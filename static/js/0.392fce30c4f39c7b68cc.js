webpackJsonp([0],{"+342":function(e,t){},"+ByR":function(e,t){},"+PdG":function(e,t){},"+X9e":function(e,t){},"+lBg":function(e,t){},"/JJ9":function(e,t){},"/dO2":function(e,t,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MultiDrag",function(){return yt}),n.d(t,"Sortable",function(){return Ue}),n.d(t,"Swap",function(){return ct});function l(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var u=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=l(/Edge/i),f=l(/firefox/i),m=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),p=l(/iP(ad|od|hone)/i),h=l(/chrome/i)&&l(/android/i),v={capture:!1,passive:!1};function g(e,t,n){e.addEventListener(t,n,!u&&v)}function b(e,t,n){e.removeEventListener(t,n,!u&&v)}function y(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function w(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function x(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&y(e,t):y(e,t))||r&&e===n)return e;if(e===n)break}while(e=w(e))}return null}var k,_=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(_," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(_," ")}}function C(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function N(e,t){var n="";if("string"==typeof e)n=e;else do{var r=C(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function T(e,t,n){if(e){var r=e.getElementsByTagName(t),a=0,o=r.length;if(n)for(;a<o;a++)n(r[a],a);return r}return[]}function D(){var e=document.scrollingElement;return e||document.documentElement}function I(e,t,n,r,a){if(e.getBoundingClientRect||e===window){var o,i,s,c,l,d,f;if(e!==window&&e!==D()?(i=(o=e.getBoundingClientRect()).top,s=o.left,c=o.bottom,l=o.right,d=o.height,f=o.width):(i=0,s=0,c=window.innerHeight,l=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!u))do{if(a&&a.getBoundingClientRect&&("none"!==C(a,"transform")||n&&"static"!==C(a,"position"))){var m=a.getBoundingClientRect();i-=m.top+parseInt(C(a,"border-top-width")),s-=m.left+parseInt(C(a,"border-left-width")),c=i+o.height,l=s+o.width;break}}while(a=a.parentNode);if(r&&e!==window){var p=N(a||e),h=p&&p.a,v=p&&p.d;p&&(c=(i/=v)+(d/=v),l=(s/=h)+(f/=h))}return{top:i,left:s,bottom:c,right:l,width:f,height:d}}}function M(e,t,n){for(var r=z(e,!0),a=I(e)[t];r;){var o=I(r)[n];if(!("top"===n||"left"===n?a>=o:a<=o))return r;if(r===D())break;r=z(r,!1)}return!1}function O(e,t,n){for(var r=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==Ue.ghost&&o[a]!==Ue.dragged&&x(o[a],n.draggable,e,!1)){if(r===t)return o[a];r++}a++}return null}function A(e,t){for(var n=e.lastElementChild;n&&(n===Ue.ghost||"none"===C(n,"display")||t&&!y(n,t));)n=n.previousElementSibling;return n||null}function L(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ue.clone||t&&!y(e,t)||n++;return n}function E(e){var t=0,n=0,r=D();if(e)do{var a=N(e),o=a.a,i=a.d;t+=e.scrollLeft*o,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function z(e,t){if(!e||!e.getBoundingClientRect)return D();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=C(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return D();if(r||t)return n;r=!0}}}while(n=n.parentNode);return D()}function R(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function V(e,t){return function(){if(!k){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),k=setTimeout(function(){k=void 0},t)}}}function B(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function $(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function U(e,t){C(e,"position","absolute"),C(e,"top",t.top),C(e,"left",t.left),C(e,"width",t.width),C(e,"height",t.height)}function P(e){C(e,"position",""),C(e,"top",""),C(e,"left",""),C(e,"width",""),C(e,"height","")}var F="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==C(e,"display")&&e!==Ue.ghost){t.push({target:e,rect:I(e)});var n=i({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=N(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var a=!1,o=0;t.forEach(function(e){var t=0,n=e.target,i=n.fromRect,s=I(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=N(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&R(c,s)&&!R(i,s)&&(u.top-s.top)/(u.left-s.left)==(i.top-s.top)/(i.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,c,l,r.options)),R(s,i)||(n.prevFromRect=i,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(a=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),a?e=setTimeout(function(){"function"==typeof n&&n()},o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){C(e,"transition",""),C(e,"transform","");var a=N(this.el),o=a&&a.a,i=a&&a.d,s=(t.left-n.left)/(o||1),c=(t.top-n.top)/(i||1);e.animatingX=!!s,e.animatingY=!!c,C(e,"transform","translate3d("+s+"px,"+c+"px,0)"),function(e){e.offsetWidth}(e),C(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),C(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){C(e,"transition",""),C(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}var j=[],q={initializeByDefault:!0},W={mount:function(e){for(var t in q)!q.hasOwnProperty(t)||t in e||(e[t]=q[t]);j.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var a=e+"Global";j.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][a]&&t[r.pluginName][a](i({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](i({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var a in j.forEach(function(r){var a=r.pluginName;if(e.options[a]||r.initializeByDefault){var i=new r(e,t,e.options);i.sortable=e,i.options=e.options,e[a]=i,o(n,i.defaults)}}),e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);void 0!==i&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return j.forEach(function(r){"function"==typeof r.eventProperties&&o(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return j.forEach(function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(r=a.optionListeners[t].call(e[a.pluginName],n))}),r}};function Y(e){var t=e.sortable,n=e.rootEl,r=e.name,a=e.targetEl,o=e.cloneEl,s=e.toEl,c=e.fromEl,l=e.oldIndex,f=e.newIndex,m=e.oldDraggableIndex,p=e.newDraggableIndex,h=e.originalEvent,v=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[F]){var b,y=t.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||u||d?(b=document.createEvent("Event")).initEvent(r,!0,!0):b=new CustomEvent(r,{bubbles:!0,cancelable:!0}),b.to=s||n,b.from=c||n,b.item=a||n,b.clone=o,b.oldIndex=l,b.newIndex=f,b.oldDraggableIndex=m,b.newDraggableIndex=p,b.originalEvent=h,b.pullMode=v?v.lastPutMode:void 0;var x=i({},g,W.getEventProperties(r,t));for(var k in x)b[k]=x[k];n&&n.dispatchEvent(b),y[w]&&y[w].call(t,b)}}var G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,a=s(n,["evt"]);W.pluginEvent.bind(Ue)(e,t,i({dragEl:Q,parentEl:X,ghostEl:J,rootEl:Z,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:re,dragStarted:ve,putSortable:le,activeSortable:Ue.active,originalEvent:r,oldIndex:ae,oldDraggableIndex:ie,newIndex:oe,newDraggableIndex:se,hideGhostForTarget:Re,unhideGhostForTarget:Ve,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(e){K({sortable:t,name:e,originalEvent:r})}},a))};function K(e){Y(i({putSortable:le,cloneEl:ne,targetEl:Q,rootEl:Z,oldIndex:ae,oldDraggableIndex:ie,newIndex:oe,newDraggableIndex:se},e))}var Q,X,J,Z,ee,te,ne,re,ae,oe,ie,se,ce,le,ue,de,fe,me,pe,he,ve,ge,be,ye,we,xe=!1,ke=!1,_e=[],Se=!1,Ce=!1,Ne=[],Te=!1,De=[],Ie="undefined"!=typeof document,Me=p,Oe=d||u?"cssFloat":"float",Ae=Ie&&!h&&!p&&"draggable"in document.createElement("div"),Le=function(){if(Ie){if(u)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ee=function(e,t){var n=C(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=O(e,0,t),o=O(e,1,t),i=a&&C(a),s=o&&C(o),c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+I(a).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+I(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return a&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||c>=r&&"none"===n[Oe]||o&&"none"===n[Oe]&&c+l>r)?"vertical":"horizontal"},ze=function(e){function t(e,n){return function(r,a,o,i){var s=r.options.group.name&&a.options.group.name&&r.options.group.name===a.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,a,o,i),n)(r,a,o,i);var c=(n?r:a).options.group.name;return!0===e||"string"==typeof e&&e===c||e.join&&e.indexOf(c)>-1}}var n={},a=e.group;a&&"object"==r(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Re=function(){!Le&&J&&C(J,"display","none")},Ve=function(){!Le&&J&&C(J,"display","")};Ie&&document.addEventListener("click",function(e){if(ke)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ke=!1,!1},!0);var Be=function(e){if(Q){e=e.touches?e.touches[0]:e;var t=(a=e.clientX,o=e.clientY,_e.some(function(e){if(!A(e)){var t=I(e),n=e[F].options.emptyInsertThreshold,r=a>=t.left-n&&a<=t.right+n,s=o>=t.top-n&&o<=t.bottom+n;return n&&r&&s?i=e:void 0}}),i);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[F]._onDragOver(n)}}var a,o,i},$e=function(e){Q&&Q.parentNode[F]._isOutsideThisEl(e.target)};function Ue(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[F]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ee(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ue.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in W.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var a in ze(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&Ae,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?g(e,"pointerdown",this._onTapStart):(g(e,"mousedown",this._onTapStart),g(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(g(e,"dragover",this),g(e,"dragenter",this)),_e.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,H())}function Pe(e,t,n,r,a,o,i,s){var c,l,f=e[F],m=f.options.onMove;return!window.CustomEvent||u||d?(c=document.createEvent("Event")).initEvent("move",!0,!0):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=a||t,c.relatedRect=o||I(t),c.willInsertAfter=s,c.originalEvent=i,e.dispatchEvent(c),m&&(l=m.call(f,c,i)),l}function Fe(e){e.draggable=!1}function He(){Te=!1}function je(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function qe(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}Ue.prototype={constructor:Ue,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,a=r.preventOnFilter,o=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(i||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(function(e){De.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&De.push(r)}}(n),!Q&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled||c.isContentEditable||(s=x(s,r.draggable,n,!1))&&s.animated||te===s)){if(ae=L(s),ie=L(s,r.draggable),"function"==typeof l){if(l.call(this,e,s,this))return K({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),G("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(l&&(l=l.split(",").some(function(r){if(r=x(c,r.trim(),n,!1))return K({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),G("filter",t,{evt:e}),!0})))return void(a&&e.cancelable&&e.preventDefault());r.handle&&!x(c,r.handle,n,!1)||this._prepareDragStart(e,i,s)}}},_prepareDragStart:function(e,t,n){var r,a=this,o=a.el,i=a.options,s=o.ownerDocument;if(n&&!Q&&n.parentNode===o){var c=I(n);if(Z=o,X=(Q=n).parentNode,ee=Q.nextSibling,te=n,ce=i.group,Ue.dragged=Q,ue={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=ue.clientX-c.left,he=ue.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",r=function(){G("delayEnded",a,{evt:e}),Ue.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!f&&a.nativeDraggable&&(Q.draggable=!0),a._triggerDragStart(e,t),K({sortable:a,name:"choose",originalEvent:e}),S(Q,i.chosenClass,!0))},i.ignore.split(",").forEach(function(e){T(Q,e.trim(),Fe)}),g(s,"dragover",Be),g(s,"mousemove",Be),g(s,"touchmove",Be),g(s,"mouseup",a._onDrop),g(s,"touchend",a._onDrop),g(s,"touchcancel",a._onDrop),f&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),G("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||u))r();else{if(Ue.eventCanceled)return void this._onDrop();g(s,"mouseup",a._disableDelayedDrag),g(s,"touchend",a._disableDelayedDrag),g(s,"touchcancel",a._disableDelayedDrag),g(s,"mousemove",a._delayedDragTouchMoveHandler),g(s,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&g(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&Fe(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):g(document,t?"touchmove":"mousemove",this._onTouchMove):(g(Q,"dragend",this),g(Z,"dragstart",this._onDragStart));try{document.selection?qe(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(xe=!1,Z&&Q){G("dragStarted",this,{evt:t}),this.nativeDraggable&&g(document,"dragover",$e);var n=this.options;!e&&S(Q,n.dragClass,!1),S(Q,n.ghostClass,!0),Ue.active=this,e&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Re();for(var e=document.elementFromPoint(de.clientX,de.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(de.clientX,de.clientY))!==t;)t=e;if(Q.parentNode[F]._isOutsideThisEl(e),t)do{if(t[F]){if(t[F]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ve()}},_onTouchMove:function(e){if(ue){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,a=e.touches?e.touches[0]:e,o=J&&N(J,!0),i=J&&o&&o.a,s=J&&o&&o.d,c=Me&&we&&E(we),l=(a.clientX-ue.clientX+r.x)/(i||1)+(c?c[0]-Ne[0]:0)/(i||1),u=(a.clientY-ue.clientY+r.y)/(s||1)+(c?c[1]-Ne[1]:0)/(s||1);if(!Ue.active&&!xe){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(J){o?(o.e+=l-(fe||0),o.f+=u-(me||0)):o={a:1,b:0,c:0,d:1,e:l,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");C(J,"webkitTransform",d),C(J,"mozTransform",d),C(J,"msTransform",d),C(J,"transform",d),fe=l,me=u,de=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:Z,t=I(Q,!0,Me,!0,e),n=this.options;if(Me){for(we=e;"static"===C(we,"position")&&"none"===C(we,"transform")&&we!==document;)we=we.parentNode;we!==document.body&&we!==document.documentElement?(we===document&&(we=D()),t.top+=we.scrollTop,t.left+=we.scrollLeft):we=D(),Ne=E(we)}S(J=Q.cloneNode(!0),n.ghostClass,!1),S(J,n.fallbackClass,!0),S(J,n.dragClass,!0),C(J,"transition",""),C(J,"transform",""),C(J,"box-sizing","border-box"),C(J,"margin",0),C(J,"top",t.top),C(J,"left",t.left),C(J,"width",t.width),C(J,"height",t.height),C(J,"opacity","0.8"),C(J,"position",Me?"absolute":"fixed"),C(J,"zIndex","100000"),C(J,"pointerEvents","none"),Ue.ghost=J,e.appendChild(J),C(J,"transform-origin",pe/parseInt(J.style.width)*100+"% "+he/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,a=n.options;G("dragStart",this,{evt:e}),Ue.eventCanceled?this._onDrop():(G("setupClone",this),Ue.eventCanceled||((ne=$(Q)).draggable=!1,ne.style["will-change"]="",this._hideClone(),S(ne,this.options.chosenClass,!1),Ue.clone=ne),n.cloneId=qe(function(){G("clone",n),Ue.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(ne,Q),n._hideClone(),K({sortable:n,name:"clone"}))}),!t&&S(Q,a.dragClass,!0),t?(ke=!0,n._loopId=setInterval(n._emulateDragOver,50)):(b(document,"mouseup",n._onDrop),b(document,"touchend",n._onDrop),b(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(n,r,Q)),g(document,"drop",n),C(Q,"transform","translateZ(0)")),xe=!0,n._dragStartId=qe(n._dragStarted.bind(n,t,e)),g(document,"selectstart",n),ve=!0,m&&C(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,a,o=this.el,s=e.target,c=this.options,l=c.group,u=Ue.active,d=ce===l,f=c.sort,m=le||u,p=this,h=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=x(s,c.draggable,o,!0),R("dragOver"),Ue.eventCanceled)return h;if(Q.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||p._ignoreWhileAnimating===s)return $(!1);if(ke=!1,u&&!c.disabled&&(d?f||(r=!Z.contains(Q)):le===this||(this.lastPutMode=ce.checkPull(this,u,Q,e))&&l.checkPut(this,u,Q,e))){if(a="vertical"===this._getDirection(e,s),t=I(Q),R("dragOverValid"),Ue.eventCanceled)return h;if(r)return X=Z,V(),this._hideClone(),R("revert"),Ue.eventCanceled||(ee?Z.insertBefore(Q,ee):Z.appendChild(Q)),$(!0);var v=A(o,c.draggable);if(!v||function(e,t,n){var r=I(A(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,a,this)&&!v.animated){if(v===Q)return $(!1);if(v&&o===e.target&&(s=v),s&&(n=I(s)),!1!==Pe(Z,o,Q,t,s,n,e,!!s))return V(),o.appendChild(Q),X=o,U(),$(!0)}else if(s.parentNode===o){n=I(s);var g,b,y,w=Q.parentNode!==o,k=!function(e,t,n){var r=n?e.left:e.top,a=n?e.right:e.bottom,o=n?e.width:e.height,i=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===i||a===s||r+o/2===i+c/2}(Q.animated&&Q.toRect||t,s.animated&&s.toRect||n,a),_=a?"top":"left",N=M(s,"top","top")||M(Q,"top","top"),T=N?N.scrollTop:void 0;if(ge!==s&&(b=n[_],Se=!1,Ce=!k&&c.invertSwap||w),0!==(g=function(e,t,n,r,a,o,i,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!i)if(s&&ye<l*a){if(!Se&&(1===be?c>u+l*o/2:c<d-l*o/2)&&(Se=!0),Se)f=!0;else if(1===be?c<u+ye:c>d-ye)return-be}else if(c>u+l*(1-a)/2&&c<d-l*(1-a)/2)return function(e){return L(Q)<L(e)?1:-1}(t);if((f=f||i)&&(c<u+l*o/2||c>d-l*o/2))return c>u+l/2?1:-1;return 0}(e,s,n,a,k?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,Ce,ge===s))){var D=L(Q);do{D-=g,y=X.children[D]}while(y&&("none"===C(y,"display")||y===J))}if(0===g||y===s)return $(!1);ge=s,be=g;var O=s.nextElementSibling,E=!1,z=Pe(Z,o,Q,t,s,n,e,E=1===g);if(!1!==z)return 1!==z&&-1!==z||(E=1===z),Te=!0,setTimeout(He,30),V(),E&&!O?o.appendChild(Q):s.parentNode.insertBefore(Q,E?O:s),N&&B(N,0,T-N.scrollTop),X=Q.parentNode,void 0===b||Ce||(ye=Math.abs(b-I(s)[_])),U(),$(!0)}if(o.contains(Q))return $(!1)}return!1}function R(c,l){G(c,p,i({evt:e,isOwner:d,axis:a?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:f,fromSortable:m,target:s,completed:$,onMove:function(n,r){return Pe(Z,o,Q,t,n,I(n),e,r)},changed:U},l))}function V(){R("dragOverAnimationCapture"),p.captureAnimationState(),p!==m&&m.captureAnimationState()}function $(t){return R("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(p),p!==m&&(S(Q,le?le.options.ghostClass:u.options.ghostClass,!1),S(Q,c.ghostClass,!0)),le!==p&&p!==Ue.active?le=p:p===Ue.active&&le&&(le=null),m===p&&(p._ignoreWhileAnimating=s),p.animateAll(function(){R("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(s===Q&&!Q.animated||s===o&&!s.animated)&&(ge=null),c.dragoverBubble||e.rootEl||s===document||(Q.parentNode[F]._isOutsideThisEl(e.target),!t&&Be(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function U(){oe=L(Q),se=L(Q,c.draggable),K({sortable:p,name:"change",toEl:o,newIndex:oe,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",Be),b(document,"mousemove",Be),b(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;oe=L(Q),se=L(Q,n.draggable),G("drop",this,{evt:e}),X=Q&&Q.parentNode,oe=L(Q),se=L(Q,n.draggable),Ue.eventCanceled?this._nulling():(xe=!1,Ce=!1,Se=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),m&&C(document.body,"user-select",""),C(Q,"transform",""),e&&(ve&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(Z===X||le&&"clone"!==le.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),Q&&(this.nativeDraggable&&b(Q,"dragend",this),Fe(Q),Q.style["will-change"]="",ve&&!xe&&S(Q,le?le.options.ghostClass:this.options.ghostClass,!1),S(Q,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==X?(oe>=0&&(K({rootEl:X,name:"add",toEl:X,fromEl:Z,originalEvent:e}),K({sortable:this,name:"remove",toEl:X,originalEvent:e}),K({rootEl:X,name:"sort",toEl:X,fromEl:Z,originalEvent:e}),K({sortable:this,name:"sort",toEl:X,originalEvent:e})),le&&le.save()):oe!==ae&&oe>=0&&(K({sortable:this,name:"update",toEl:X,originalEvent:e}),K({sortable:this,name:"sort",toEl:X,originalEvent:e})),Ue.active&&(null!=oe&&-1!==oe||(oe=ae,se=ie),K({sortable:this,name:"end",toEl:X,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){G("nulling",this),Z=Q=X=J=ee=ne=te=re=ue=de=ve=oe=se=ae=ie=ge=be=le=ce=Ue.dragged=Ue.ghost=Ue.clone=Ue.active=null,De.forEach(function(e){e.checked=!0}),De.length=fe=me=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,a=n.length,o=this.options;r<a;r++)x(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||je(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var a=n.children[r];x(a,this.options.draggable,n,!1)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return x(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=W.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&ze(n)},destroy:function(){G("destroy",this);var e=this.el;e[F]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_e.splice(_e.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(G("hideClone",this),Ue.eventCanceled)return;C(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),re=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(re){if(G("showClone",this),Ue.eventCanceled)return;Z.contains(Q)&&!this.options.group.revertClone?Z.insertBefore(ne,Q):ee?Z.insertBefore(ne,ee):Z.appendChild(ne),this.options.group.revertClone&&this.animate(Q,ne),C(ne,"display",""),re=!1}}else this._hideClone()}},Ie&&g(document,"touchmove",function(e){(Ue.active||xe)&&e.cancelable&&e.preventDefault()}),Ue.utils={on:g,off:b,css:C,find:T,is:function(e,t){return!!x(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:V,closest:x,toggleClass:S,clone:$,index:L,nextTick:qe,cancelNextTick:We,detectDirection:Ee,getChild:O},Ue.get=function(e){return e[F]},Ue.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ue.utils=i({},Ue.utils,e.utils)),W.mount(e)})},Ue.create=function(e,t){return new Ue(e,t)},Ue.version="1.10.2";var Ye,Ge,Ke,Qe,Xe,Je,Ze=[],et=!1;function tt(){Ze.forEach(function(e){clearInterval(e.pid)}),Ze=[]}function nt(){clearInterval(Je)}var rt,at=V(function(e,t,n,r){if(t.scroll){var a,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,c=t.scrollSpeed,l=D(),u=!1;Ge!==n&&(Ge=n,tt(),Ye=t.scroll,a=t.scrollFn,!0===Ye&&(Ye=z(n,!0)));var d=0,f=Ye;do{var m=f,p=I(m),h=p.top,v=p.bottom,g=p.left,b=p.right,y=p.width,w=p.height,x=void 0,k=void 0,_=m.scrollWidth,S=m.scrollHeight,N=C(m),T=m.scrollLeft,M=m.scrollTop;m===l?(x=y<_&&("auto"===N.overflowX||"scroll"===N.overflowX||"visible"===N.overflowX),k=w<S&&("auto"===N.overflowY||"scroll"===N.overflowY||"visible"===N.overflowY)):(x=y<_&&("auto"===N.overflowX||"scroll"===N.overflowX),k=w<S&&("auto"===N.overflowY||"scroll"===N.overflowY));var O=x&&(Math.abs(b-o)<=s&&T+y<_)-(Math.abs(g-o)<=s&&!!T),A=k&&(Math.abs(v-i)<=s&&M+w<S)-(Math.abs(h-i)<=s&&!!M);if(!Ze[d])for(var L=0;L<=d;L++)Ze[L]||(Ze[L]={});Ze[d].vx==O&&Ze[d].vy==A&&Ze[d].el===m||(Ze[d].el=m,Ze[d].vx=O,Ze[d].vy=A,clearInterval(Ze[d].pid),0==O&&0==A||(u=!0,Ze[d].pid=setInterval(function(){r&&0===this.layer&&Ue.active._onTouchMove(Xe);var t=Ze[this.layer].vy?Ze[this.layer].vy*c:0,n=Ze[this.layer].vx?Ze[this.layer].vx*c:0;"function"==typeof a&&"continue"!==a.call(Ue.dragged.parentNode[F],n,t,e,Xe,Ze[this.layer].el)||B(Ze[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==l&&(f=z(f,!1)));et=u}},30),ot=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,i=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||a;i();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function it(){}function st(){}function ct(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;rt=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,a=e.activeSortable,o=e.changed,i=e.cancel;if(a.options.swap){var s=this.sortable.el,c=this.options;if(n&&n!==s){var l=rt;!1!==r(n)?(S(n,c.swapClass,!0),rt=n):rt=null,l&&l!==rt&&S(l,c.swapClass,!1)}o(),t(!0),i()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,a=n||this.sortable,o=this.options;rt&&S(rt,o.swapClass,!1),rt&&(o.swap||n&&n.options.swap)&&r!==rt&&(a.captureAnimationState(),a!==t&&t.captureAnimationState(),function(e,t){var n,r,a=e.parentNode,o=t.parentNode;if(!a||!o||a.isEqualNode(t)||o.isEqualNode(e))return;n=L(e),r=L(t),a.isEqualNode(o)&&n<r&&r++;a.insertBefore(t,a.children[n]),o.insertBefore(e,o.children[r])}(r,rt),a.animateAll(),a!==t&&t.animateAll())},nulling:function(){rt=null}},o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:rt}}})}it.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=O(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:ot},o(it,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ot},o(st,{pluginName:"removeOnSpill"});var lt,ut,dt,ft,mt,pt=[],ht=[],vt=!1,gt=!1,bt=!1;function yt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag)),g(document,"keydown",this._checkKeyDown),g(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";pt.length&&ut===e?pt.forEach(function(e,t){r+=(t?", ":"")+e.textContent}):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;dt=t},delayEnded:function(){this.isMultiDrag=~pt.indexOf(dt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<pt.length;r++)ht.push($(pt[r])),ht[r].sortableIndex=pt[r].sortableIndex,ht[r].draggable=!1,ht[r].style["will-change"]="",S(ht[r],this.options.selectedClass,!1),pt[r]===dt&&S(ht[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,a=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||pt.length&&ut===t&&(wt(!0,n),r("clone"),a()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(wt(!1,n),ht.forEach(function(e){C(e,"display","")}),t(),mt=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(ht.forEach(function(e){C(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),n(),mt=!0,r())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&ut&&ut.multiDrag._deselectMultiDrag(),pt.forEach(function(e){e.sortableIndex=L(e)}),pt=pt.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),bt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){pt.forEach(function(e){e!==dt&&C(e,"position","absolute")});var r=I(dt,!1,!0,!0);pt.forEach(function(e){e!==dt&&U(e,r)}),gt=!0,vt=!0}n.animateAll(function(){gt=!1,vt=!1,t.options.animation&&pt.forEach(function(e){P(e)}),t.options.sort&&xt()})}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;gt&&~pt.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,a=e.dragRect;pt.length>1&&(pt.forEach(function(e){r.addAnimationState({target:e,rect:gt?I(e):a}),P(e),e.fromRect=a,t.removeAnimationState(e)}),gt=!1,function(e,t){pt.forEach(function(n,r){var a=t.children[n.sortableIndex+(e?Number(r):0)];a?t.insertBefore(n,a):t.appendChild(n)})}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,a=e.activeSortable,o=e.parentEl,i=e.putSortable,s=this.options;if(r){if(n&&a._hideClone(),vt=!1,s.animation&&pt.length>1&&(gt||!n&&!a.options.sort&&!i)){var c=I(dt,!1,!0,!0);pt.forEach(function(e){e!==dt&&(U(e,c),o.appendChild(e))}),gt=!0}if(!n)if(gt||xt(),pt.length>1){var l=mt;a._showClone(t),a.options.animation&&!mt&&l&&ht.forEach(function(e){a.addAnimationState({target:e,rect:ft}),e.fromRect=ft,e.thisAnimationDuration=null})}else a._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(pt.forEach(function(e){e.thisAnimationDuration=null}),r.options.animation&&!n&&r.multiDrag.isMultiDrag){ft=o({},t);var a=N(dt,!0);ft.top-=a.f,ft.left-=a.e}},dragOverAnimationComplete:function(){gt&&(gt=!1,xt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,a=e.sortable,o=e.dispatchSortableEvent,i=e.oldIndex,s=e.putSortable,c=s||this.sortable;if(t){var l=this.options,u=r.children;if(!bt)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(dt,l.selectedClass,!~pt.indexOf(dt)),~pt.indexOf(dt))pt.splice(pt.indexOf(dt),1),lt=null,Y({sortable:a,rootEl:n,name:"deselect",targetEl:dt,originalEvt:t});else{if(pt.push(dt),Y({sortable:a,rootEl:n,name:"select",targetEl:dt,originalEvt:t}),t.shiftKey&&lt&&a.el.contains(lt)){var d,f,m=L(lt),p=L(dt);if(~m&&~p&&m!==p)for(p>m?(f=m,d=p):(f=p,d=m+1);f<d;f++)~pt.indexOf(u[f])||(S(u[f],l.selectedClass,!0),pt.push(u[f]),Y({sortable:a,rootEl:n,name:"select",targetEl:u[f],originalEvt:t}))}else lt=dt;ut=c}if(bt&&this.isMultiDrag){if((r[F].options.sort||r!==n)&&pt.length>1){var h=I(dt),v=L(dt,":not(."+this.options.selectedClass+")");if(!vt&&l.animation&&(dt.thisAnimationDuration=null),c.captureAnimationState(),!vt&&(l.animation&&(dt.fromRect=h,pt.forEach(function(e){if(e.thisAnimationDuration=null,e!==dt){var t=gt?I(e):h;e.fromRect=t,c.addAnimationState({target:e,rect:t})}})),xt(),pt.forEach(function(e){u[v]?r.insertBefore(e,u[v]):r.appendChild(e),v++}),i===L(dt))){var g=!1;pt.forEach(function(e){e.sortableIndex===L(e)||(g=!0)}),g&&o("update")}pt.forEach(function(e){P(e)}),c.animateAll()}ut=c}(n===r||s&&"clone"!==s.lastPutMode)&&ht.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=bt=!1,ht.length=0},destroyGlobal:function(){this._deselectMultiDrag(),b(document,"pointerup",this._deselectMultiDrag),b(document,"mouseup",this._deselectMultiDrag),b(document,"touchend",this._deselectMultiDrag),b(document,"keydown",this._checkKeyDown),b(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==bt&&bt||ut!==this.sortable||e&&x(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;pt.length;){var t=pt[0];S(t,this.options.selectedClass,!1),pt.shift(),Y({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[F];t&&t.options.multiDrag&&!~pt.indexOf(e)&&(ut&&ut!==t&&(ut.multiDrag._deselectMultiDrag(),ut=t),S(e,t.options.selectedClass,!0),pt.push(e))},deselect:function(e){var t=e.parentNode[F],n=pt.indexOf(e);t&&t.options.multiDrag&&~n&&(S(e,t.options.selectedClass,!1),pt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return pt.forEach(function(r){var a;t.push({multiDragElement:r,index:r.sortableIndex}),a=gt&&r!==dt?-1:gt?L(r,":not(."+e.options.selectedClass+")"):L(r),n.push({multiDragElement:r,index:a})}),{items:c(pt),clones:[].concat(ht),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function wt(e,t){ht.forEach(function(n,r){var a=t.children[n.sortableIndex+(e?Number(r):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function xt(){pt.forEach(function(e){e!==dt&&e.parentNode&&e.parentNode.removeChild(e)})}Ue.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):t.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(k),k=void 0},nulling:function(){Xe=Ge=Ye=et=Je=Ke=Qe=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,a);if(Xe=e,t||d||u||m){at(e,this.options,o,t);var i=z(o,!0);!et||Je&&r===Ke&&a===Qe||(Je&&nt(),Je=setInterval(function(){var o=z(document.elementFromPoint(r,a),!0);o!==i&&(i=o,tt()),at(e,n.options,o,t)},10),Ke=r,Qe=a)}else{if(!this.options.bubbleScroll||z(o,!0)===D())return void tt();at(e,this.options,z(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),Ue.mount(st,it),t.default=Ue},"/dPw":function(e,t){},"/n8b":function(e,t){},"/qqq":function(e,t){},"/uyb":function(e,t){},"0wX1":function(e,t){},"0ySY":function(e,t,n){"use strict";var r=n("Xxa5"),a=n.n(r),o=n("exGp"),i=n.n(o),s=n("lh9K"),c=[],l={name:"choiceList",props:{tab:String},created:function(){this.queryList(this.tab)},data:function(){return{storeList:c}},methods:{goToIndex:function(e){console.log(e.id),localStorage.removeItem("shopId"),localStorage.shopId=e.id,Object(s.a)()&&localStorage.shopId?this.setStoreData(e):this.$router.replace({name:"login",query:{}})},queryList:function(e){var t=this;return i()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeList({storeType:e});case 2:r=n.sent,console.log(r),0===r.code&&(t.storeList=r.storeList);case 5:case"end":return n.stop()}},n,t)}))()},setStoreData:function(e){var t=this;return i()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.setStoreData({storeId:e.id});case 2:r=n.sent,console.log(r),0===r.code?(localStorage.storeId=e.id,t.$router.replace({path:"/index",query:{appId:e.storeType}})):alert(r.msg);case 5:case"end":return n.stop()}},n,t)}))()}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"choiceList"},[n("a-list",{attrs:{grid:{gutter:16,column:6},dataSource:e.storeList},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{staticClass:"choice-list-item",on:{click:function(n){return e.goToIndex(t)}}},[n("a-card",{attrs:{title:t.storeName}},[n("p",[e._v("主体信息：已认证")]),e._v(" "),n("p",[e._v("店铺状态："),n("span",{staticClass:"choiceList-lan"},[e._v(e._s(1===t.status?"营业中":"已打烊"))])]),e._v(" "),n("span",{staticClass:"choiceList-genre"},[e._v(e._s(1===t.storeType?"租赁":2===t.storeType?"零售":3===t.storeType?"美业":4===t.storeType?"教育":5===t.storeType?"餐饮":6===t.storeType?"官网":99===t.storeType?"管理":""))])])],1)}}])})],1)},staticRenderFns:[]};var d=n("VU/8")(l,u,!1,function(e){n("hKBi")},"data-v-14c99708",null);t.a=d.exports},"1+2W":function(e,t){},"1Lnj":function(e,t){},"1XpT":function(e,t){},"1Y13":function(e,t){},"1aHD":function(e,t){},"1pkV":function(e,t){},"2nhO":function(e,t,n){"use strict";var r=n("Kci8"),a={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"home"},[this._v("\n  this is home page\n")])},staticRenderFns:[]};var o=n("VU/8")({name:"home",data:function(){return{}},methods:{}},a,!1,function(e){n("Yjq7")},"data-v-2f203a3c",null).exports,i={name:"choiceContent",components:{choiceList:n("0ySY").a},data:function(){return{tab:""}},created:function(){},mounted:function(){},methods:{callback:function(e){console.log(e),this.tab=e}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"choiceStore-tabs-warp"},[n("a-tabs",{staticClass:"choiceStore-tabs",attrs:{defaultActiveKey:""},on:{change:e.callback}},[n("a-tab-pane",{key:"",attrs:{tab:"所有店铺",forceRender:""}},[""===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"1",attrs:{tab:"租赁",forceRender:""}},["1"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"零售",forceRender:""}},["2"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"3",attrs:{tab:"美业",forceRender:""}},["3"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"4",attrs:{tab:"教育",forceRender:""}},["4"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"5",attrs:{tab:"餐饮",forceRender:""}},["5"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"6",attrs:{tab:"官网",forceRender:""}},["6"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1),e._v(" "),n("a-tab-pane",{key:"99",attrs:{tab:"管理",forceRender:""}},["99"===e.tab?n("choiceList",{attrs:{tab:e.tab}}):e._e()],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(i,s,!1,function(e){n("SUw3")},"data-v-7438340c",null).exports,l=n("Xxa5"),u=n.n(l),d=n("exGp"),f=n.n(d);function m(e,t){var n=new Date(e),r=n.getFullYear(),a=n.getMonth()+1;a=a<10?"0"+a:a;var o=n.getDate();o=o<10?"0"+o:o;var i=n.getHours();i=i<10?"0"+i:i;var s=n.getMinutes();s=s<10?"0"+s:s;var c=n.getSeconds();return c=c<10?"0"+c:c,"yyyy-MM-dd"===t?r+"-"+a+"-"+o:r+"-"+a+"-"+o+" "+i+":"+s+":"+c}var p=[{title:"用户名",dataIndex:"username"},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile"},{title:"所属店铺",dataIndex:"storeName"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],h="",v={name:"user",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,username:null,data:[],columns:p}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){h=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.username=this.username,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===h||0===h.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.userDelete(h)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.username&&null!==n.username&&(n.username=n.username.trim()),t.username=n.username,t.pagination.current=1,e||t.searchByConditions(n)})},goToAdminAdd:function(){this.bus.$emit("goToPage","userAdd")},userEdit:function(e){var t={id:e};this.bus.$emit("goToPage","userEdit"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},userDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),h="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.goToAdminAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"userId",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"正常":"禁用"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.userEdit(r.userId)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var b=n("VU/8")(v,g,!1,function(e){n("zFDg")},"data-v-11f90c46",null).exports,y=n("mvHQ"),w=n.n(y),x={name:"userAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),checkedList:[],homeCheckedList:[],roleList:[],data:{status:0},tenantList:[],storeList:[],homeMenuList:[],storeId:null,storeName:null,tenantId:null}},created:function(){this.getTenant(),this.getRoleList(),this.getHomeMenuList()},methods:{getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},getHomeMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getHomeMenuList({});case 2:0===(n=t.sent).code&&(e.homeMenuList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getStore:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeListByTenantId({tenantId:e});case 2:0===(r=n.sent).code&&(t.storeList=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},changeTenant:function(e){this.getStore(e)},changeStore:function(e){var t=this;this.storeList.forEach(function(n){if(n.id===e)return t.storeName=n.storeName,!1})},onChange:function(e){},onChange2:function(e){console.log(this.homeCheckedList)},changeStatus:function(e){},getRoleList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listRole({});case 2:0===(n=t.sent).code&&(e.roleList=n.roleList);case 4:case"end":return t.stop()}},t,e)}))()},addUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","user");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.roleIdList=t.checkedList,n.storeName=t.storeName,n.keys=w()(t.homeCheckedList),e||t.addUser(n)})},goToBack:function(){this.bus.$emit("goToPage","user")}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请填写用户名!"}]}],expression:"['username', { rules: [{ required: true, message: '请填写用户名!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请填写密码!"}]}],expression:"['password', { rules: [{ required: true, message: '请填写密码!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"邮箱","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"租户","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantId"],expression:"['tenantId']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择租户"},on:{change:e.changeTenant}},e._l(e.tenantList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.tenantName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"所属店铺","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeId"],expression:"['storeId']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择所属店铺"},on:{change:e.changeStore}},e._l(e.storeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.storeName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"角色","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.roleList,function(t){return n("a-checkbox",{key:t.roleId,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"首页菜单","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange2},model:{value:e.homeCheckedList,callback:function(t){e.homeCheckedList=t},expression:"homeCheckedList"}},e._l(e.homeMenuList,function(t){return n("a-checkbox",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.title))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("正常")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var _=n("VU/8")(x,k,!1,function(e){n("FLeV")},"data-v-0258e7a4",null).exports,S={name:"userEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),checkedList:[],homeCheckedList:[],roleList:[],tenantList:[],homeMenuList:[],data:{username:null,password:null,email:null,mobile:null,status:null},storeList:[],storeId:null,storeName:null}},props:{passData:Object},created:function(){this.getTenant(),this.getRoleList(),this.getUserInfo(this.passData.id),this.getHomeMenuList()},methods:{getStore:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeListByTenantId({tenantId:e});case 2:0===(r=n.sent).code&&(t.storeList=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},getHomeMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getHomeMenuList({});case 2:0===(n=t.sent).code&&(e.homeMenuList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},changeTenant:function(e){this.getStore(e)},changeStore:function(e){var t=this;this.storeList.forEach(function(n){if(n.id===e)return t.storeName=n.storeName,!1})},onChange:function(e){},onChange2:function(e){console.log(this.homeCheckedList)},changeStatus:function(e){},getUserInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userInfo({userId:e});case 2:r=n.sent,t.data=r.user,t.storeName=r.user.storeName,t.checkedList=r.user.roleIdList,t.homeCheckedList=r.user.homeKeys,t.getStore(r.user.tenantId);case 8:case"end":return n.stop()}},n,t)}))()},getRoleList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listRole({});case 2:0===(n=t.sent).code&&(e.roleList=n.roleList);case 4:case"end":return t.stop()}},t,e)}))()},editUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","user");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.userId=t.passData.id,n.roleIdList=t.checkedList,n.storeName=t.storeName,n.keys=w()(t.homeCheckedList),e||t.editUser(n)})},goToBack:function(){this.bus.$emit("goToPage","user")}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请填写用户名!"}],initialValue:e.data.username}],expression:"['username', { rules: [{ required: true, message: '请填写用户名!' }],initialValue: data.username }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password"],expression:"['password']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"邮箱","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{initialValue:e.data.email}],expression:"['email', {initialValue: data.email }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{initialValue:e.data.mobile}],expression:"['mobile', {initialValue: data.mobile }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"租户","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantId",{initialValue:e.data.tenantId}],expression:"['tenantId',{initialValue: data.tenantId}]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择租户"},on:{change:e.changeTenant}},e._l(e.tenantList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.tenantName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"所属店铺","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeId",{initialValue:e.data.storeId}],expression:"['storeId', {initialValue: data.storeId}]"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择所属店铺"},on:{change:e.changeStore}},e._l(e.storeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.storeName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"角色","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.roleList,function(t){return n("a-checkbox",{key:t.roleId,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"首页菜单","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange2},model:{value:e.homeCheckedList,callback:function(t){e.homeCheckedList=t},expression:"homeCheckedList"}},e._l(e.homeMenuList,function(t){return n("a-checkbox",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.title))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("正常")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var N=n("VU/8")(S,C,!1,function(e){n("nGh7")},"data-v-baf5ac60",null).exports,T=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"remark"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],D="",I={name:"role",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,roleName:null,data:[],columns:T}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){D=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.roleName=this.roleName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===D||0===D.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.roleDelete(D)},roleEdit:function(e){var t={id:e};this.bus.$emit("goToPage","roleEdit"),this.bus.$emit("passData",t)},roleAdd:function(){this.bus.$emit("goToPage","roleAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.roleName&&null!==n.roleName&&(n.roleName=n.roleName.trim()),t.roleName=n.roleName,t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},roleDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),D="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.roleList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName"],expression:"['roleName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"角色名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.roleAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"roleId",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.roleEdit(r.roleId)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var O=n("VU/8")(I,M,!1,function(e){n("KLhd")},"data-v-a3719b72",null).exports,A={name:"roleAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{menuIdList:[]}}},created:function(){this.getStoreInfo(localStorage.shopId)},methods:{getStoreInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.storeInfo({id:localStorage.shopId});case 2:n=t.sent,e.getMenuList(Number(n.sysStore.storeType));case 4:case"end":return t.stop()}},t,e)}))()},onSelect:function(e,t){},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getMenuList:function(e){var t=this;return f()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.menuList({});case 2:n=e.sent,t.menuList=t.translateData(n);case 4:case"end":return e.stop()}},e,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.menuId){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t},addRole:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","role");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,e||t.addRole(n)})},goToBack:function(){this.bus.$emit("goToPage","role")}}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"角色名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"请填写角色名称!"}]}],expression:"['roleName', { rules: [{ required: true, message: '请填写角色名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!0,message:"请填写备注!"}]}],expression:"['remark', { rules: [{ required: true, message: '请填写备注!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"授权","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-tree",{attrs:{"show-line":"",checkable:"",treeData:e.menuList,replaceFields:e.replaceFields},on:{select:e.onSelect,check:e.onCheck}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var E=n("VU/8")(A,L,!1,function(e){n("vIKg")},"data-v-68eee9a0",null).exports,z={name:"roleEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{roleName:null,remark:null,menuIdList:[]},menuList:[],menuIdList:[]}},props:{passData:Object},created:function(){this.getStoreInfo(localStorage.shopId)},methods:{getStoreInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.storeInfo({id:localStorage.shopId});case 2:n=t.sent,e.getMenuList(Number(n.sysStore.storeType));case 4:case"end":return t.stop()}},t,e)}))()},onSelect:function(e,t){},onCheck:function(e,t){this.data.menuIdList=e,t.halfCheckedKeys.length>0?this.menuIdList=e.concat(t.halfCheckedKeys):this.menuIdList=e},getRoleInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleInfo({roleId:e});case 2:r=n.sent,t.data=r.role,t.menuIdList=r.role.menuIdList,a=[],t.menuList.forEach(function(e){a.push(e.menuId)}),o=[],t.data.menuIdList.forEach(function(e){-1===a.indexOf(e)&&o.push(e)}),i=[],t.menuList.forEach(function(e){e.children.forEach(function(e){e.children&&i.push(e.menuId)})}),s=[],o.forEach(function(e){-1===i.indexOf(e)&&s.push(e)}),t.data.menuIdList=s;case 14:case"end":return n.stop()}},n,t)}))()},getMenuList:function(e){var t=this;return f()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.menuList({});case 2:n=e.sent,t.menuList=t.translateData(n),t.getRoleInfo(t.passData.id);case 5:case"end":return e.stop()}},e,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.menuId){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t},editRole:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","role");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.roleId=t.passData.id,n.menuIdList=t.menuIdList,e||t.editRole(n)})},goToBack:function(){this.bus.$emit("goToPage","role")}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"角色名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"请填写角色名称!"}],initialValue:e.data.roleName}],expression:"['roleName', { rules: [{ required: true, message: '请填写角色名称!' }],initialValue: data.roleName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!0,message:"请填写备注!"}],initialValue:e.data.remark}],expression:"['remark', { rules: [{ required: true, message: '请填写备注!' }],initialValue: data.remark }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"授权","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-tree",{attrs:{"show-line":"",checkable:"",treeData:e.menuList,checkedKeys:e.data.menuIdList,replaceFields:e.replaceFields},on:{select:e.onSelect,check:e.onCheck}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var V=n("VU/8")(z,R,!1,function(e){n("d0yp")},"data-v-75cf6bcf",null).exports,B=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"位置",dataIndex:"position"},{title:"链接",dataIndex:"link",width:"20%",scopedSlots:{customRender:"linkShow"}},{title:"链接名称",dataIndex:"linkName",width:"20%",scopedSlots:{customRender:"linkNameShow"}},{title:"排序",dataIndex:"sort"},{title:"状态",dataIndex:"enable",scopedSlots:{customRender:"enable"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:100,scopedSlots:{customRender:"action"}}],$="",U={name:"advert",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,data:[],columns:B}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){$=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===$||0===$.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete($)},formatDate:function(e){return m(e)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},advertAdd:function(){this.bus.$emit("goToPage","advertAdd")},advertUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","advertEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.advertList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.advertList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.advertDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),$="");case 4:case"end":return n.stop()}},n,t)}))()}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"advert"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.advertAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"200px"}})}},{key:"type",fn:function(t){return n("span",{},[e._v(e._s(1===t?"图片":2===t?"视频":"图片"))])}},{key:"linkShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.link}},[e._v("\n      "+e._s(r.link)+"\n    ")])}},{key:"linkNameShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.linkName}},[e._v("\n      "+e._s(r.linkName)+"\n    ")])}},{key:"enable",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"启用":"禁用"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.advertUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var F=n("VU/8")(U,P,!1,function(e){n("udy9")},"data-v-2da2562c",null).exports,H=n("CaOM"),j=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"价格",dataIndex:"price"}],q=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"价格",dataIndex:"price"}],W=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"价格",dataIndex:"price"}],Y=[{title:"书名",dataIndex:"bookName"}];var G="",K="",Q="",X="",J=[],Z={name:"advertAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),goodsForm:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),bookOneForm:this.$form.createForm(this,{name:"coordinated"}),activityForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visibleTwo:null,visible:!1,visibleOne:!1,goodsVisible:!1,bookVisible:!1,bookOneVisible:!1,visibleContent:!1,activityVisible:!1,choiceVisible:!1,typeVisible:!0,linkUrl:"",baseLink:null,loading:!1,loadingOne:!1,permissions:localStorage.permissions,data:{enable:1,link:null,linkName:null,picUrl:null,videoUrl:null,imgUrl:null},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,paginationGoods:{total:0,current:1},paginationBook:{total:0,current:1},paginationActivity:{total:0,current:1},goodsList:[],bookList:[],activityList:[],one:null,oneValue:null,two:null,twoValue:null,user:null,goodsName:null,bookName:null,bookNum:null,barcode:null,title:null,columnGoods:j,columnBook:q,columnActivity:W,bookColumn:Y,position:[],positionOne:[],positionTwo:[],oneList:[],listChoice:[]}},created:function(){console.log("appId",Number(Object(H.a)("appId"))),this.positionOne.push({key:"home",value:"首页"}),1===Number(Object(H.a)("appId"))?(this.position.push({key:"home",value:"首页"},{key:"shop",value:"商城"}),-1!==this.permissions.indexOf("goods:save")?(this.oneList.push({key:1,value:"商品"},{key:2,value:"图书"},{key:3,value:"活动"}),this.getGoodsList()):this.oneList.push({key:2,value:"图书"},{key:3,value:"活动"}),this.getBookList(),this.getActivityList()):(this.position.push({key:"home",value:"首页"},{key:"shop",value:"分类"}),this.oneList.push({key:1,value:"商品"}),this.getGoodsList()),this.positionTwo=this.position,this.getUserInfo()},computed:{rowSelectionGoods:function(){return{type:"radio",onChange:function(e,t){G=e[0],X=t[0].goodsName}}},rowSelectionBook:function(){return{type:"radio",onChange:function(e,t){K=e[0],X=t[0].bookName}}},rowSelectionBooks:function(){return{onChange:function(e,t){K=e;var n=[];t.forEach(function(e){n.push({id:e.id,bookName:e.bookName})}),J=n}}},rowSelectionActivity:function(){return{type:"radio",onChange:function(e,t){Q=e[0],X=t[0].title}}}},methods:{handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.data.videoUrl=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.data.videoUrl)):this.loadingOne=!1},removeVideo:function(){this.playerOptions.sources[0].src=null,this.show=!0,this.showV=!1,this.data.videoUrl=null},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},add:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.advertAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","advert");case 4:case"end":return n.stop()}},n,t)}))()},getUserInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.loginUser();case 2:0===(n=t.sent).code&&(e.user=n.user);case 4:case"end":return t.stop()}},t,e)}))()},getGoodsList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList();case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.paginationGoods.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},getBookList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookList=n.rows,e.paginationBook.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},getActivityList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.activityList();case 2:0===(n=t.sent).code&&(e.activityList=n.rows,e.paginationActivity.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},showModel:function(){1===this.oneValue&&2===this.twoValue?this.goodsVisible=!0:2===this.oneValue&&2===this.twoValue?-1!==this.permissions.indexOf("advert:more")?this.bookOneVisible=!0:this.bookVisible=!0:3===this.oneValue&&2===this.twoValue&&(this.activityVisible=!0)},onChange:function(e){},handleChanges:function(e){},handleOkGoods:function(){this.goodsVisible=!1,this.data.link=this.baseLink+G,this.data.linkName=X},handleOkBook:function(){this.bookVisible=!1,this.data.link=this.baseLink+K,this.data.linkName=X},handleOkBookOne:function(){this.bookOneVisible=!1,this.data.link=this.baseLink+K[0],this.data.linkName="已选择",console.log(K),console.log(J),this.listChoice=J,this.choiceVisible=!0},handleOkActivity:function(){this.activityVisible=!1,this.data.link=this.baseLink+Q,this.data.linkName=X},typeChange:function(e){1===e?(console.log(e),this.typeVisible=!0,this.position=this.positionTwo):2===e&&(console.log(e),this.typeVisible=!1,this.position=this.positionOne)},changeType:function(e){this.choiceVisible=!1,this.visibleContent=!1,this.data.linkName="",this.visible=!0,this.oneValue=e,1===e?this.one="goods":2===e?this.one="book":3===e&&(this.one="activity"),null===this.two?this.data.link=this.linkUrl+this.one:this.data.link=this.linkUrl+this.one+this.two,console.log("this.data.link",this.data.link),-1!==this.data.link.indexOf("book/detail")&&-1!==this.permissions.indexOf("advert:more")&&(this.visibleContent=!0)},changeTypeOne:function(e){this.choiceVisible=!1,this.visibleContent=!1,this.data.linkName="",this.twoValue=e,1===e?(this.two="/list",this.visibleOne=!1):2===e&&(this.two="/detail/",this.visibleOne=!0),this.data.link=this.linkUrl+this.one+this.two,console.log("this.data.link",this.data.link),this.baseLink=this.data.link,-1!==this.data.link.indexOf("book/detail")&&-1!==this.permissions.indexOf("advert:more")&&(this.visibleContent=!0)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(null!==n.type&&void 0!==n.type){if(1===n.type){if(n.picUrl=t.data.imgUrl,n.link=t.data.link,null===n.picUrl)return void t.$message.warn("图片不能为空");if(void 0===n.position)return void t.$message.warn("位置不能为空");if(void 0===n.one||null===n.one)return void t.$message.warn("分类不能为空");if(void 0===n.two||null===n.two)return void t.$message.warn("功能不能为空");if(void 0===n.link||null===n.link)return void t.$message.warn("链接不能为空");if("/"===n.link.substr(n.link.length-1))return void t.$message.warn("请点击选择具体内容");if(-1!==n.link.indexOf("book/detail")&&-1!==t.permissions.indexOf("advert:more")&&(void 0===n.content||""===n.content.trim()))return void t.$message.warn("描述不能为空");-1!==n.link.indexOf("detail")&&(n.linkName=t.data.linkName),-1!==n.link.indexOf("book/detail")&&-1!==t.permissions.indexOf("advert:more")&&(n.bookId=K,n.linkName="")}else if(2===n.type){if(n.videoUrl=t.data.videoUrl,null===n.videoUrl)return void t.$message.warn("视频不能为空");if(void 0===n.position)return void t.$message.warn("位置不能为空");n.position="home",n.link=null}void 0!==n.sort?(console.log("values",n),e||t.add(n)):t.$message.warn("排序不能为空")}else t.$message.warn("请选择类型")})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.goodsForm.validateFields(function(e,n){t.goodsName=n.goodsName,t.paginationGoods.current=1,e||t.searchGoods(n)})},handleSubmitBook:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){t.bookName=n.bookName,t.bookNum=n.bookNum,t.barcode=n.barcode,t.paginationBook.current=1,e||t.searchBook(n)})},handleSubmitBookOne:function(e){var t=this;e.preventDefault(),this.bookOneForm.validateFields(function(e,n){t.bookName=n.bookName,t.bookNum=n.bookNum,t.barcode=n.barcode,t.paginationBook.current=1,e||t.searchBook(n)})},handleSubmitActivity:function(e){var t=this;e.preventDefault(),this.activityForm.validateFields(function(e,n){t.title=n.title,t.paginationActivity.current=1,e||t.searchActivity(n)})},handleGoodsChange:function(e,t,n){var r={};r.goodsName=this.goodsName,this.paginationGoods.current=e.current,r.page=e.current,this.searchGoods(r)},handleBookChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},handleActivityChange:function(e,t,n){var r={};r.title=this.title,this.paginationActivity.current=e.current,r.page=e.current,this.searchActivity(r)},searchGoods:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.paginationGoods.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchActivity:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityList(e);case 2:0===(r=n.sent).code&&(t.activityList=r.rows,t.paginationActivity.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","advert")}}},ee={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"advertAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"120px"},on:{change:e.typeChange}},[n("a-select-option",{attrs:{value:1}},[e._v("图片")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("视频")])],1)],1),e._v(" "),e.typeVisible?n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 690px X 360px")])],1):e._e(),e._v(" "),e.typeVisible?e._e():n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:16}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loadingOne?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"位置","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["position"],expression:"['position']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择位置"},on:{change:e.handleChanges}},e._l(e.position,function(t){return n("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),e.typeVisible?n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["one"],expression:"['one']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"},on:{change:e.changeType}},e._l(e.oneList,function(t){return n("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])}),1)],1):e._e(),e._v(" "),e.typeVisible?n("div",[e.visible?n("a-form-item",{attrs:{label:"功能","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["two"],expression:"['two']"}],staticStyle:{width:"120px"},on:{change:e.changeTypeOne}},[n("a-select-option",{attrs:{value:1}},[e._v("列表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("详情")])],1)],1):e._e(),e._v(" "),e.visibleOne?n("a-form-item",{attrs:{label:"详情","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.showModel}},[e._v("选择内容")]),e._v(" "),n("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.data.linkName))])],1):e._e(),e._v(" "),n("a-form-item",{attrs:{hidden:"",label:"链接","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{initialValue:e.data.link}],expression:"['link', {initialValue: data.link}]"}],attrs:{placeholder:"请选择链接"}})],1)],1):e._e(),e._v(" "),e.choiceVisible?n("a-form-item",[n("a-table",{attrs:{columns:e.bookColumn,dataSource:e.listChoice,rowKey:"id",pagination:!1}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enable",{required:!0,initialValue:e.data.enable}],expression:"['enable', { required: true, initialValue: data.enable}]"}],on:{change:e.onChange}},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort"],expression:"['sort']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请输入排序"}})],1),e._v(" "),e.visibleContent?n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}],attrs:{rows:10}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"商品",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkGoods},model:{value:e.goodsVisible,callback:function(t){e.goodsVisible=t},expression:"goodsVisible"}},[n("a-form",{attrs:{form:e.goodsForm,layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionGoods,columns:e.columnGoods,rowKey:"id",dataSource:e.goodsList,pagination:e.paginationGoods},on:{change:e.handleGoodsChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"图书",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkBook},model:{value:e.bookVisible,callback:function(t){e.bookVisible=t},expression:"bookVisible"}},[n("a-form",{attrs:{form:e.bookForm,layout:"vertical"},on:{submit:e.handleSubmitBook}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"isbn码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionBook,columns:e.columnBook,rowKey:"id",dataSource:e.bookList,pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"图书",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkBookOne},model:{value:e.bookOneVisible,callback:function(t){e.bookOneVisible=t},expression:"bookOneVisible"}},[n("a-form",{attrs:{form:e.bookOneForm,layout:"vertical"},on:{submit:e.handleSubmitBookOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"isbn码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionBooks,columns:e.columnBook,rowKey:"id",dataSource:e.bookList,pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"活动",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkActivity},model:{value:e.activityVisible,callback:function(t){e.activityVisible=t},expression:"activityVisible"}},[n("a-form",{attrs:{form:e.activityForm,layout:"vertical"},on:{submit:e.handleSubmitActivity}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionActivity,columns:e.columnActivity,rowKey:"id",dataSource:e.activityList,pagination:e.paginationActivity},on:{change:e.handleActivityChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1)],1)},staticRenderFns:[]};var te=n("VU/8")(Z,ee,!1,function(e){n("ySV7")},"data-v-61d5c7de",null).exports,ne=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"价格",dataIndex:"price"}],re=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"价格",dataIndex:"price"}],ae=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"价格",dataIndex:"price"}],oe=[{title:"书名",dataIndex:"bookName"}];var ie="",se="",ce="",le="",ue=[],de={name:"advertEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),goodsForm:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),bookOneForm:this.$form.createForm(this,{name:"coordinated"}),activityForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loadingOne:!1,visible:!0,visibleOne:!1,goodsVisible:!1,bookVisible:!1,bookOneVisible:!1,visibleContent:!1,activityVisible:!1,choiceVisible:!1,typeVisible:!0,linkUrl:"",describe:"选择内容",baseLink:null,permissions:localStorage.permissions,data:{enable:null,link:null,linkName:null,sort:null,position:null,picUrl:null,imgUrl:null,type:null,content:null},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,paginationGoods:{total:0,current:1},paginationBook:{total:0,current:1},paginationActivity:{total:0,current:1},goodsList:[],bookList:[],activityList:[],one:null,oneValue:null,two:null,twoValue:null,user:null,goodsName:null,bookName:null,bookNum:null,barcode:null,title:null,columnGoods:ne,columnBook:re,columnActivity:ae,bookColumn:oe,positionList:[],positionOne:[],positionTwo:[],oneList:[],listChoice:[]}},props:{passData:Object},created:function(){this.positionOne.push({key:"home",value:"首页"}),1===Number(Object(H.a)("appId"))?(this.positionList.push({key:"home",value:"首页"},{key:"shop",value:"商城"}),-1!==this.permissions.indexOf("goods:save")?(this.oneList.push({key:1,value:"商品"},{key:2,value:"图书"},{key:3,value:"活动"}),this.getGoodsList()):this.oneList.push({key:2,value:"图书"},{key:3,value:"活动"}),this.getBookList(),this.getActivityList()):(this.positionList.push({key:"home",value:"首页"},{key:"shop",value:"分类"}),this.oneList.push({key:1,value:"商品"}),this.getGoodsList()),this.positionTwo=this.positionList,this.getInfo(this.passData.id),this.getUserInfo()},computed:{rowSelectionGoods:function(){return{type:"radio",onChange:function(e,t){ie=e[0],le=t[0].goodsName}}},rowSelectionBook:function(){return{type:"radio",onChange:function(e,t){se=e[0],le=t[0].bookName}}},rowSelectionBooks:function(){return{onChange:function(e,t){se=e;var n=[];t.forEach(function(e){n.push({id:e.id,bookName:e.bookName})}),ue=n}}},rowSelectionActivity:function(){return{type:"radio",onChange:function(e,t){ce=e[0],le=t[0].title}}}},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.advertInfo({id:e});case 2:r=n.sent,t.data=r.advert,t.data.imgUrl=r.advert.picUrl,null!==r.advert.videoUrl&&""!==r.advert.videoUrl&&(t.show=!1,t.showV=!0,t.playerOptions.sources[0].src=r.advert.videoUrl),null===t.data.type||1===t.data.type?(t.data.type=1,t.typeVisible=!0,t.positionList=t.positionTwo):2===t.data.type&&(t.typeVisible=!1,t.positionList=t.positionOne),-1!==t.data.link.indexOf("goods")?(t.oneValue=1,t.one="goods"):-1!==t.data.link.indexOf("book")?(t.oneValue=2,t.one="book"):-1!==t.data.link.indexOf("activity")&&(t.oneValue=3,t.one="activity"),-1!==t.data.link.indexOf("list")?(t.twoValue=1,t.two="/list"):-1!==t.data.link.indexOf("detail")&&(t.twoValue=2,t.two="/detail/",t.visibleOne=!0,t.baseLink=t.linkUrl+t.one+t.two,t.describe="重新选择内容"),console.log(t.data),-1!==t.data.link.indexOf("book/detail")&&-1!==t.permissions.indexOf("advert:more")&&(t.visibleContent=!0,t.choiceVisible=!0,t.listChoice=r.advert.listBook);case 11:case"end":return n.stop()}},n,t)}))()},getUserInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.loginUser();case 2:0===(n=t.sent).code&&(e.user=n.user);case 4:case"end":return t.stop()}},t,e)}))()},getGoodsList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList();case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.paginationGoods.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},getBookList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookList=n.rows,e.paginationBook.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},getActivityList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.activityList();case 2:0===(n=t.sent).code&&(e.activityList=n.rows,e.paginationActivity.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},onChange:function(e){},typeChange:function(e){1===e?(this.typeVisible=!0,this.positionList=this.positionTwo):2===e&&(this.typeVisible=!1,this.positionList=this.positionOne)},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.data.videoUrl=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.data.videoUrl)):this.loadingOne=!1},removeVideo:function(){this.playerOptions.sources[0].src=null,this.show=!0,this.showV=!1,this.data.videoUrl=null},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChanges:function(e){},handleOkGoods:function(){this.goodsVisible=!1,this.data.link=this.baseLink+ie,this.data.linkName=le},handleOkBook:function(){this.bookVisible=!1,this.data.link=this.baseLink+se,this.data.linkName=le},handleOkBookOne:function(){this.bookOneVisible=!1,this.data.link=this.baseLink+se[0],this.data.linkName="已选择",console.log(se),console.log(ue),this.listChoice=ue,this.choiceVisible=!0},handleOkActivity:function(){this.activityVisible=!1,this.data.link=this.baseLink+ce,this.data.linkName=le},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.goodsForm.validateFields(function(e,n){t.goodsName=n.goodsName,t.paginationGoods.current=1,e||t.searchGoods(n)})},handleSubmitBook:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){t.bookName=n.bookName,t.bookNum=n.bookNum,t.barcode=n.barcode,t.paginationBook.current=1,e||t.searchBook(n)})},handleSubmitBookOne:function(e){var t=this;e.preventDefault(),this.bookOneForm.validateFields(function(e,n){t.bookName=n.bookName,t.bookNum=n.bookNum,t.barcode=n.barcode,t.paginationBook.current=1,e||t.searchBook(n)})},handleSubmitActivity:function(e){var t=this;e.preventDefault(),this.activityForm.validateFields(function(e,n){t.title=n.title,t.paginationActivity.current=1,e||t.searchActivity(n)})},handleGoodsChange:function(e,t,n){var r={};r.goodsName=this.goodsName,this.paginationGoods.current=e.current,r.page=e.current,this.searchGoods(r)},handleBookChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},handleActivityChange:function(e,t,n){var r={};r.title=this.title,this.paginationActivity.current=e.current,r.page=e.current,this.searchActivity(r)},searchGoods:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.paginationGoods.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchActivity:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityList(e);case 2:0===(r=n.sent).code&&(t.activityList=r.rows,t.paginationActivity.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},showModel:function(){1===this.oneValue&&2===this.twoValue?this.goodsVisible=!0:2===this.oneValue&&2===this.twoValue?-1!==this.permissions.indexOf("advert:more")?this.bookOneVisible=!0:this.bookVisible=!0:3===this.oneValue&&2===this.twoValue&&(this.activityVisible=!0)},changeType:function(e){this.choiceVisible=!1,this.visibleContent=!1,this.data.linkName="",this.visible=!0,this.oneValue=e,1===e?this.one="goods":2===e?this.one="book":3===e&&(this.one="activity"),null===this.two?this.data.link=this.linkUrl+this.one:this.data.link=this.linkUrl+this.one+this.two,this.baseLink=this.data.link,-1!==this.data.link.indexOf("book/detail")&&-1!==this.permissions.indexOf("advert:more")&&(this.visibleContent=!0)},changeTypeOne:function(e){this.choiceVisible=!1,this.visibleContent=!1,this.data.linkName="",this.twoValue=e,1===e?(this.two="/list",this.visibleOne=!1):2===e&&(this.two="/detail/",this.visibleOne=!0),this.data.link=this.linkUrl+this.one+this.two,this.baseLink=this.data.link,-1!==this.data.link.indexOf("book/detail")&&-1!==this.permissions.indexOf("advert:more")&&(this.visibleContent=!0)},updateAdvert:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.advertUpdate(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","advert");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.id=t.passData.id,1===n.type){if(n.picUrl=t.data.imgUrl,n.link=t.data.link,null===n.picUrl||""===n.picUrl)return void t.$message.warn("图片不能为空");if(void 0===n.position||null===n.position)return void t.$message.warn("位置不能为空");if(void 0===n.one||null===n.one)return void t.$message.warn("分类不能为空");if(void 0===n.two||null===n.two)return void t.$message.warn("功能不能为空");if(""===n.link)return void t.$message.warn("链接不能为空");if(-1!==n.link.indexOf("book/detail")&&-1!==t.permissions.indexOf("advert:more")&&(void 0===n.content||""===n.content.trim()))return void t.$message.warn("描述不能为空");if("/"===n.link.substr(n.link.length-1))return void t.$message.warn("请点击选择具体内容");-1!==n.link.indexOf("detail")?n.linkName=t.data.linkName:n.linkName="",-1!==n.link.indexOf("book/detail")&&-1!==t.permissions.indexOf("advert:more")&&(n.bookId=se,n.linkName="")}else if(2===n.type){if(n.videoUrl=t.data.videoUrl,null===n.videoUrl||""===n.videoUrl)return void t.$message.warn("视频不能为空");if(void 0===n.position||null===n.position)return void t.$message.warn("位置不能为空");n.position="home",n.link=null}""!==n.sort?(console.log("values",n),e||t.updateAdvert(n)):t.$message.warn("排序不能为空")})},goToBack:function(){this.bus.$emit("goToPage","advert")}}},fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"advertEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.data.type}],expression:"['type', {initialValue: data.type}]"}],staticStyle:{width:"120px"},on:{change:e.typeChange}},[n("a-select-option",{attrs:{value:1}},[e._v("图片")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("视频")])],1)],1),e._v(" "),e.typeVisible?n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 690px X 360px")])],1):e._e(),e._v(" "),e.typeVisible?e._e():n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loadingOne?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"位置","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["position",{initialValue:e.data.position}],expression:"['position', {initialValue: data.position}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择位置"},on:{change:e.handleChanges}},e._l(e.positionList,function(t){return n("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),e.typeVisible?n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["one",{initialValue:e.oneValue}],expression:"['one', {initialValue: oneValue}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"},on:{change:e.changeType}},e._l(e.oneList,function(t){return n("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.value))])}),1)],1):e._e(),e._v(" "),e.typeVisible?n("div",[e.visible?n("a-form-item",{attrs:{label:"功能","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["two",{initialValue:e.twoValue}],expression:"['two', {initialValue: twoValue}]"}],staticStyle:{width:"120px"},on:{change:e.changeTypeOne}},[n("a-select-option",{attrs:{value:1}},[e._v("列表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("详情")])],1)],1):e._e(),e._v(" "),e.visibleOne?n("a-form-item",{attrs:{label:"详情","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModel}},[e._v(e._s(e.describe))]),e._v(" "),n("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.data.linkName))])],1):e._e(),e._v(" "),n("a-form-item",{attrs:{hidden:"",label:"链接","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{initialValue:e.data.link}],expression:"['link', {initialValue: data.link}]"}],attrs:{placeholder:"请输入链接"}})],1)],1):e._e(),e._v(" "),e.choiceVisible?n("a-form-item",[n("a-table",{attrs:{columns:e.bookColumn,dataSource:e.listChoice,rowKey:"id",pagination:!1}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enable",{required:!0,initialValue:e.data.enable}],expression:"['enable', { required: true, initialValue: data.enable}]"}],on:{change:e.onChange}},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.data.sort}],expression:"['sort', {initialValue: data.sort}]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),e.visibleContent?n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:e.data.content}],expression:"['content', {initialValue: data.content}]"}],attrs:{rows:10}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"商品",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkGoods},model:{value:e.goodsVisible,callback:function(t){e.goodsVisible=t},expression:"goodsVisible"}},[n("a-form",{attrs:{form:e.goodsForm,layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionGoods,columns:e.columnGoods,rowKey:"id",dataSource:e.goodsList,pagination:e.paginationGoods},on:{change:e.handleGoodsChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"图书",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkBook},model:{value:e.bookVisible,callback:function(t){e.bookVisible=t},expression:"bookVisible"}},[n("a-form",{attrs:{form:e.bookForm,layout:"vertical"},on:{submit:e.handleSubmitBook}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"isbn码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionBook,columns:e.columnBook,rowKey:"id",dataSource:e.bookList,pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"图书",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkBookOne},model:{value:e.bookOneVisible,callback:function(t){e.bookOneVisible=t},expression:"bookOneVisible"}},[n("a-form",{attrs:{form:e.bookOneForm,layout:"vertical"},on:{submit:e.handleSubmitBookOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"isbn码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionBooks,columns:e.columnBook,rowKey:"id",dataSource:e.bookList,pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"活动",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkActivity},model:{value:e.activityVisible,callback:function(t){e.activityVisible=t},expression:"activityVisible"}},[n("a-form",{attrs:{form:e.activityForm,layout:"vertical"},on:{submit:e.handleSubmitActivity}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionActivity,columns:e.columnActivity,rowKey:"id",dataSource:e.activityList,pagination:e.paginationActivity},on:{change:e.handleActivityChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1)],1)},staticRenderFns:[]};var me=n("VU/8")(de,fe,!1,function(e){n("fDlB")},"data-v-255f99d4",null).exports,pe=[{title:"头像",dataIndex:"avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"nickName"},{title:"姓名",dataIndex:"realName"},{title:"手机号",dataIndex:"mobile"},{title:"性别",dataIndex:"gender",scopedSlots:{customRender:"gender"}},{title:"会员类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"积分",dataIndex:"points",scopedSlots:{customRender:"points"}},{title:"余额",dataIndex:"balance",scopedSlots:{customRender:"balance"}},{title:"注册时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],he=null,ve="",ge={name:"member",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],realName:null,nickName:null,mobile:null,type:null,visibleOne:!1,columns:pe}},created:function(){console.log("appId",Number(Object(H.a)("appId"))),2===Number(Object(H.a)("appId"))?this.visibleOne=!1:1===Number(Object(H.a)("appId"))&&(this.visibleOne=!0),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){he=t,ve=e}}}},methods:{showModal:function(){if(null===he||0===he.length)this.$message.error("请至少选择一条进行删除");else{console.log(he);var e=!1;he.forEach(function(t){2!==t.type&&"2"!==t.type||(e=!0)}),e?this.$message.error("选项中包含vip会员"):this.visible=!0}},handleOk:function(){this.visible=!1,this.deleteMember(ve)},deleteMember:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ve="",he=null);case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.realName=this.realName,r.nickName=this.nickName,r.mobile=this.mobile,r.type=this.type,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},memberDetail:function(e){var t={id:e};this.bus.$emit("goToPage","memberDetail"),this.bus.$emit("passData",t)},memberUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","memberEdit"),this.bus.$emit("passData",t)},getMemberCardInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardList({memberId:e});case 2:r=n.sent,console.log(r.rows.length),r.rows.length>0?t.$message.error("该用户已开过卡"):(a={id:e},t.bus.$emit("goToPage","memberCardAdd"),t.bus.$emit("passData",a));case 5:case"end":return n.stop()}},n,t)}))()},openCard:function(e){this.getMemberCardInfo(e)},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.type=n.type,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.memberList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"会员类型"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:"1"}},[e._v("散客")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("会员")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}},{key:"gender",fn:function(t){return n("div",{},[e._v(e._s(1===t?"男":2===t?"女":"未知"))])}},{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"散客":2===t?"会员":"管理员"))])}},{key:"points",fn:function(t){return n("span",{},[e._v(e._s(null===t?0:""===t?0:t))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.memberDetail(r.id)}}},[e._v("查看")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.memberUpdate(r.id)}}},[e._v("修改")]),e._v(" "),e.visibleOne?n("a-divider",{attrs:{type:"vertical"}}):e._e(),e._v(" "),e.visibleOne?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.openCard(r.id)}}},[e._v("开卡")]):e._e()],1)}}])})],1)},staticRenderFns:[]};var ye=n("VU/8")(ge,be,!1,function(e){n("DHrB")},"data-v-03c8c2d6",null).exports,we={name:"memberDetail",data:function(){return{deleteId:[],visible:!1,realName:null,mobile:null,gender:null,type:null,balance:null,points:null,avatarUrl:null,nickName:null,memberCardList:[],remark:null}},props:{passData:Object},created:function(){this.getInfo(this.passData.id),this.getMemberCardInfo(this.passData.id)},methods:{showModal:function(e){this.deleteId.push(e),this.visible=!0},handleOk:function(){this.visible=!1,this.deleteMemberCard(this.deleteId)},formatDate:function(e){return m(e)},editMemberCard:function(e){var t={id:e};this.bus.$emit("goToPage","memberCardEdit"),this.bus.$emit("passData",t)},deleteMemberCard:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.getMemberCardInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},getMemberCardInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardList({memberId:e});case 2:r=n.sent,t.memberCardList=r.rows;case 4:case"end":return n.stop()}},n,t)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberInfo({id:e});case 2:0===(r=n.sent).code&&(t.realName=r.member.realName,t.mobile=r.member.mobile,t.gender=r.member.gender,t.nickName=r.member.nickName,t.avatarUrl=r.member.avatarUrl,t.balance=r.member.balance,t.points=r.member.points,t.type=r.member.type,t.remark=r.member.remark);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","member")}}},xe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberDetail"},[n("h2",{staticClass:"mytitle"},[e._v("基本信息"),n("a-button",{staticStyle:{float:"right"},on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("a-row",{staticClass:"borderOne",staticStyle:{"font-size":"16px"},attrs:{type:"flex",align:"middle"}},[n("a-col",{staticStyle:{width:"90px"}},[n("img",{attrs:{src:e.avatarUrl,width:"100%"}})]),e._v(" "),n("a-col",{staticStyle:{width:"20px"}}),e._v(" "),n("a-col",{staticClass:"mycell",staticStyle:{flex:"1"}},[e._v("\n      "+e._s(e.nickName)),n("br"),e._v(" "),n("div",{staticStyle:{width:"100%",height:"10px"}}),e._v("\n      "+e._s(1===e.type?"散客":2===e.type?"会员":"管理员")+"\n    ")]),e._v(" "),n("a-col",{attrs:{span:24}},[n("p",{staticStyle:{height:"15px"}})]),e._v(" "),n("a-col",{attrs:{span:24}},[n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("真实姓名: "+e._s(e.realName))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("手机号码: "+e._s(e.mobile))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("性别: "+e._s(1===e.gender?"男":"女"))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("余额: "+e._s(e.balance))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("积分: "+e._s(e.points))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}}),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("备注: "+e._s(e.remark))])],1)],1)],1),e._v(" "),n("h2",{staticClass:"borderTwo mytitle"},[e._v("会员卡")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},e._l(e.memberCardList,function(t){return n("a-col",{key:t.id,staticClass:"one",attrs:{span:6}},[n("a-card",{staticStyle:{width:"300px"},attrs:{title:1===t.cardType?"不限次卡":2===t.cardType?"次卡":""}},[n("a",{staticStyle:{"margin-right":"10px"},attrs:{slot:"extra",href:"javascript:;"},on:{click:function(n){return e.editMemberCard(t.id)}},slot:"extra"},[e._v("编辑")]),n("a",{attrs:{slot:"extra",href:"javascript:;"},on:{click:function(n){return e.showModal(t.id)}},slot:"extra"},[e._v("删除")]),e._v(" "),n("p",[e._v(e._s(t.cardNum))]),e._v(" "),n("p",[e._v(e._s(t.cardName))]),e._v(" "),n("p",[e._v("有效期:"+e._s(e.formatDate(t.endTime).substring(0,10)))])])],1)}),1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])])],1)},staticRenderFns:[]};var ke=n("VU/8")(we,xe,!1,function(e){n("zJl1")},"data-v-7c82b645",null).exports,_e={name:"memberEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{realName:null,mobile:null,storeId:null,type:null,remark:null},storeList:[]}},props:{passData:Object},created:function(){this.getStore(),this.getInfo(this.passData.id)},methods:{getStore:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.storeList({});case 2:0===(n=t.sent).code&&(e.storeList=n.storeList);case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberInfo({id:e});case 2:r=n.sent,t.data=r.member;case 4:case"end":return n.stop()}},n,t)}))()},selectChange:function(e){},changeCondition:function(e){},updateMember:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","member");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){""!==t.realName?""!==t.mobile?(n.id=t.passData.id,n.nickName=t.data.nickName,e||t.updateMember(n)):t.$message.warn("电话不能为空"):t.$message.warn("姓名不能为空")})},goToBack:function(){this.bus.$emit("goToPage","member")}}},Se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"真实姓名","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName",{rules:[{message:"姓名!"}],initialValue:e.data.realName}],expression:"['realName', { rules: [{  message: '姓名!' }], initialValue: data.realName}]"}],attrs:{placeholder:"请输入姓名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{message:"联系电话!"}],initialValue:e.data.mobile}],expression:"['mobile', { rules: [{  message: '联系电话!' }], initialValue: data.mobile}]"}],attrs:{placeholder:"请输入联系电话"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{message:"备注!"}],initialValue:e.data.remark}],expression:"['remark', { rules: [{  message: '备注!' }], initialValue: data.remark}]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var Ce=n("VU/8")(_e,Se,!1,function(e){n("oqOH")},"data-v-56dff4c8",null).exports,Ne=n("PJh5"),Te=n.n(Ne),De={name:"memberCardAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM-DD",cardList:[],visible:!1,data:{id:null,cardId:null,realName:null,mobile:null,times:null,borrowDays:null,borrowQuantity:null,deposit:null,startTime:null,endTime:null,remark:null,numbers:null},moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id),this.getCardList()},methods:{getCardList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.cardList({});case 2:0===(n=t.sent).code&&(e.cardList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.member,t.data.startTime=m(new Date),t.data.endTime=t.data.startTime);case 4:case"end":return n.stop()}},n,t)}))()},onChangeOne:function(e,t){this.data.startTime=t},onOkOne:function(e){},onChange:function(e,t){},onOk:function(e){},selectChange:function(e){var t=this;this.cardList.forEach(function(n){n.id===e&&(2===n.cardType?(t.data.numbers=n.numbers,t.visible=!0):t.visible=!1,t.data.times=n.times,t.data.borrowDays=n.borrowDays,t.data.borrowQuantity=n.borrowQuantity,t.data.deposit=n.deposit,t.data.endTime=m(new Date(t.data.startTime).getTime()+24*n.times*60*60*1e3))})},addMemberCard:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","member");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),e||t.addMemberCard(n)})},goToBack:function(){this.bus.$emit("goToPage","member")}}},Ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberCardAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{staticStyle:{display:"none"},attrs:{label:"用户id","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberId",{initialValue:e.data.id}],expression:"['memberId', {initialValue: data.id}]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"姓名","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{attrs:{"read-only":""},model:{value:e.data.realName,callback:function(t){e.$set(e.data,"realName",t)},expression:"data.realName"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{attrs:{"read-only":""},model:{value:e.data.mobile,callback:function(t){e.$set(e.data,"mobile",t)},expression:"data.mobile"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"会员卡","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId"],expression:"['cardId']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择会员卡"},on:{change:e.selectChange}},e._l(e.cardList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.cardName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"卡号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardNum",{rules:[{message:"卡号!"}]}],expression:"['cardNum', { rules: [{  message: '卡号!' }]}]"}],attrs:{placeholder:"请输入卡号"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"次卡使用数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["numbers",{initialValue:e.data.numbers}],expression:"['numbers', {initialValue: data.numbers}]"}],attrs:{"read-only":""}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"有效天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["times",{initialValue:e.data.times}],expression:"['times', {initialValue: data.times}]"}],attrs:{placeholder:"请输入有效天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅时长","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowDays",{initialValue:e.data.borrowDays}],expression:"['borrowDays', {initialValue: data.borrowDays}]"}],attrs:{placeholder:"请输入借阅时长"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅本数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowQuantity",{initialValue:e.data.borrowQuantity}],expression:"['borrowQuantity', {initialValue: data.borrowQuantity}]"}],attrs:{placeholder:"请输入借阅本数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"押金","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:e.data.deposit}],expression:"['deposit', {initialValue: data.deposit}]"}],attrs:{placeholder:"请输入押金"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开卡时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime",{initialValue:e.moment(e.data.startTime,e.dateFormat)}],expression:"['startTime',{initialValue: moment(data.startTime, dateFormat)}]"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChangeOne,ok:e.onOkOne}})],1),e._v(" "),n("a-form-item",{attrs:{label:"有效日期","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime",{initialValue:e.moment(e.data.endTime,e.dateFormat)}],expression:"['endTime',{initialValue: moment(data.endTime, dateFormat)}]"}],attrs:{placeholder:"选择有效日期"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:6}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Me=n("VU/8")(De,Ie,!1,function(e){n("eDYg")},"data-v-061e51c4",null).exports,Oe={name:"memberCardEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM-DD hh:mm:ss",cardList:[],visible:null,data:{memberId:null,cardId:null,cardNum:null,cardName:null,cardType:null,startTime:null,endTime:null,times:null,borrowDays:null,borrowQuantity:null,deposit:null,numbers:null},moment:Te.a}},props:{passData:Object},created:function(){this.getCardList()},methods:{getCardList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.cardList({});case 2:0===(n=t.sent).code&&(e.cardList=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.memberCard,2===t.data.cardType?t.visible=!0:t.visible=!1,t.data.startTime=m(new Date(r.memberCard.startTime)),t.data.endTime=m(new Date(r.memberCard.endTime)));case 4:case"end":return n.stop()}},n,t)}))()},onChangeOne:function(e,t){this.data.startTime=t},onOkOne:function(e){},onChange:function(e,t){},onOk:function(e){},selectChange:function(e){var t=this;this.cardList.forEach(function(n){n.id===e&&(2===n.cardType?(t.data.numbers=n.numbers,t.visible=!0):t.visible=!1,t.data.times=n.times,t.data.cardName=n.cardName,t.data.cardType=n.cardType,t.data.borrowDays=n.borrowDays,t.data.borrowQuantity=n.borrowQuantity,t.data.deposit=n.deposit,t.data.endTime=m(new Date(t.data.startTime).getTime()+24*n.times*60*60*1e3))})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.cardName=t.data.cardName,n.cardType=t.data.cardType,e||t.editMemberCard(n)})},editMemberCard:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberCardEdit(e);case 2:0===n.sent.code&&(t.bus.$emit("goToPage","memberDetail"),r={id:t.data.memberId},t.bus.$emit("passData",r));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){var e={id:this.data.memberId};this.bus.$emit("goToPage","memberDetail"),this.bus.$emit("passData",e)}}},Ae={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberCardEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"会员卡","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardId",{initialValue:e.data.cardId}],expression:"['cardId', {initialValue: data.cardId}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择会员卡"},on:{change:e.selectChange}},e._l(e.cardList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.cardName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"卡号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardNum",{rules:[{message:"卡号!"}],initialValue:e.data.cardNum}],expression:"['cardNum', { rules: [{  message: '卡号!' }],initialValue: data.cardNum}]"}],attrs:{placeholder:"请输入卡号"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"次卡使用数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["numbers",{initialValue:e.data.numbers}],expression:"['numbers', {initialValue: data.numbers}]"}]})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["times",{initialValue:e.data.times}],expression:"['times', {initialValue: data.times}]"}],attrs:{placeholder:"请输入天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowDays",{initialValue:e.data.borrowDays}],expression:"['borrowDays', {initialValue: data.borrowDays}]"}],attrs:{placeholder:"请输入借阅天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅本数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowQuantity",{initialValue:e.data.borrowQuantity}],expression:"['borrowQuantity', {initialValue: data.borrowQuantity}]"}],attrs:{placeholder:"请输入借阅本数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"押金","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:e.data.deposit}],expression:"['deposit', {initialValue: data.deposit}]"}],attrs:{placeholder:"请输入押金"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开卡时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime",{initialValue:e.moment(e.data.startTime,e.dateFormat)}],expression:"['startTime',{initialValue: moment(data.startTime, dateFormat)}]"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChangeOne,ok:e.onOkOne}})],1),e._v(" "),n("a-form-item",{attrs:{label:"有效日期","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime",{initialValue:e.moment(e.data.endTime,e.dateFormat)}],expression:"['endTime', {initialValue: moment(data.endTime, dateFormat)}]"}],attrs:{placeholder:"选择有效日期"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Le=n("VU/8")(Oe,Ae,!1,function(e){n("EDhB")},"data-v-0cf089d6",null).exports,Ee=[{title:"卡类型",dataIndex:"cardType",scopedSlots:{customRender:"cardType"}},{title:"卡名称",dataIndex:"cardName"},{title:"价格",dataIndex:"price"},{title:"次卡使用次数",dataIndex:"numbers"},{title:"有效天数",dataIndex:"times"},{title:"押金",dataIndex:"deposit"},{title:"最大借阅天数",dataIndex:"borrowDays"},{title:"最大借阅数量",dataIndex:"borrowQuantity"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"排序",dataIndex:"sort"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],ze="",Re={name:"card",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:[],visible:!1,columns:Ee}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ze=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===ze||0===ze.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(ze)},formatDate:function(e){return m(e)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},cardAdd:function(){this.bus.$emit("goToPage","cardAdd")},cardEdit:function(e){var t={id:e};this.bus.$emit("goToPage","cardEdit"),this.bus.$emit("passData",t)},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cardDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ze="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cardList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.cardList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.cardAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"提示",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"cardType",fn:function(t){return n("span",{},[e._v(e._s(1===t?"不限次":2===t?"次卡":""))])}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.cardEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Be=n("VU/8")(Re,Ve,!1,function(e){n("QfWg")},"data-v-754c7e93",null).exports,$e={name:"cardAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,data:{cardType:1,status:1}}},methods:{changeCard:function(e){2===e.target.value?this.visible=!0:this.visible=!1},changeStatus:function(e){},add:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cardAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","card");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(!e){if(void 0===n.cardName||""===n.cardName.trim())return void t.$message.warn("卡名称不能为空");if(void 0===n.price||""===n.price.trim())return void t.$message.warn("价格不能为空");if(2===n.cardType){if(void 0===n.numbers||""===n.numbers)return void t.$message.warn("次卡使用次数不能为空");if(n.numbers<=0)return void t.$message.warn("次卡使用次数必须大于0")}if(void 0===n.times||""===n.times.trim())return void t.$message.warn("有效天数不能为空");if(void 0===n.borrowDays||""===n.borrowDays.trim())return void t.$message.warn("借阅天数不能为空");if(void 0===n.borrowQuantity||""===n.borrowQuantity.trim())return void t.$message.warn("借阅本数不能为空");if(void 0===n.deposit||""===n.deposit.trim())return void t.$message.warn("押金不能为空");if(void 0===n.sort||""===n.sort.trim())return void t.$message.warn("排序不能为空");t.add(n)}})},goToBack:function(){this.bus.$emit("goToPage","card")}}},Ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cardAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"卡类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardType",{initialValue:e.data.cardType}],expression:"['cardType', {initialValue: data.cardType}]"}],on:{change:e.changeCard}},[n("a-radio",{attrs:{value:1}},[e._v("不限次")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("次卡")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"卡名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardName",{rules:[{message:"卡名称!"}]}],expression:"['cardName', { rules: [{  message: '卡名称!' }] }]"}],attrs:{placeholder:"请输入卡名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{message:"价格!"}]}],expression:"['price', { rules: [{ message: '价格!' }] }]"}],attrs:{placeholder:"请输入价格"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"使用次数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["numbers"],expression:"['numbers']"}],attrs:{type:"number",placeholder:"请输入使用次数"}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"有效天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["times",{rules:[{message:"有效天数!"}]}],expression:"['times', { rules: [{ message: '有效天数!' }] }]"}],attrs:{placeholder:"请输入天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowDays",{rules:[{message:"借阅天数!"}]}],expression:"['borrowDays', { rules: [{ message: '借阅天数!' }] }]"}],attrs:{placeholder:"请输入借阅天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅本数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowQuantity",{rules:[{message:"借阅本数!"}]}],expression:"['borrowQuantity', { rules: [{ message: '借阅本数!' }] }]"}],attrs:{placeholder:"请输入借阅本数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"押金","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{rules:[{message:"押金!"}]}],expression:"['deposit', { rules: [{ message: '押金!' }] }]"}],attrs:{placeholder:"请输入押金"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort"],expression:"['sort']"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', {initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("上架")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Pe=n("VU/8")($e,Ue,!1,function(e){n("uVSI")},"data-v-cbb13c88",null).exports,Fe={name:"cardEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:null,data:{cardName:null,price:null,times:null,cardType:null,status:null,borrowDays:null,borrowQuantity:null,deposit:null,sort:null,numbers:null}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cardInfo({id:e});case 2:r=n.sent,t.data=r.card,1===t.data.cardType?t.visible=!1:2===t.data.cardType&&(t.visible=!0);case 5:case"end":return n.stop()}},n,t)}))()},changeCard:function(e){2===e.target.value?this.visible=!0:this.visible=!1},changeStatus:function(e){},updateCard:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cardEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","card");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(""!==n.cardName)if(""!==n.price){if(2===n.cardType){if(void 0===n.numbers||""===n.numbers||null===n.numbers)return void t.$message.warn("次卡使用次数不能为空");if(n.numbers<=0)return void t.$message.warn("次卡使用次数必须大于0")}""!==n.times?""!==n.borrowDays?""!==n.borrowQuantity?""!==n.deposit?""!==n.sort?(n.id=t.passData.id,e||t.updateCard(n)):t.$message.warn("排序不能为空"):t.$message.warn("押金不能为空"):t.$message.warn("借阅本数不能为空"):t.$message.warn("借阅天数不能为空"):t.$message.warn("天数不能为空")}else t.$message.warn("价格不能为空");else t.$message.warn("卡名称不能为空")})},goToBack:function(){this.bus.$emit("goToPage","card")}}},He={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cardEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"卡类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardType",{initialValue:e.data.cardType}],expression:"['cardType', {initialValue: data.cardType}]"}],on:{change:e.changeCard}},[n("a-radio",{attrs:{value:1}},[e._v("不限次")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("次卡")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"卡名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cardName",{rules:[{message:"卡名称!"}],initialValue:e.data.cardName}],expression:"['cardName', { rules: [{  message: '卡名称!' }], initialValue: data.cardName}]"}],attrs:{placeholder:"请输入卡名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:e.data.price}],expression:"['price', { initialValue: data.price}]"}],attrs:{placeholder:"请输入价格"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"使用次数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["numbers",{initialValue:e.data.numbers}],expression:"['numbers', {initialValue: data.numbers}]"}],attrs:{type:"number",placeholder:"请输入使用次数"}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"有效天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["times",{initialValue:e.data.times}],expression:"['times', { initialValue: data.times}]"}],attrs:{placeholder:"请输入天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅天数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowDays",{initialValue:e.data.borrowDays}],expression:"['borrowDays', {initialValue: data.borrowDays }]"}],attrs:{placeholder:"请输入借阅天数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"借阅本数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["borrowQuantity",{initialValue:e.data.borrowQuantity}],expression:"['borrowQuantity', {initialValue: data.borrowQuantity }]"}],attrs:{placeholder:"请输入借阅本数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"押金","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deposit",{initialValue:e.data.deposit}],expression:"['deposit', {initialValue: data.deposit }]"}],attrs:{placeholder:"请输入押金"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.data.sort}],expression:"['sort', {initialValue: data.sort }]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', {initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("上架")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var je=n("VU/8")(Fe,He,!1,function(e){n("Dr9H")},"data-v-8b86fc4e",null).exports,qe=n("Dd8w"),We=n.n(qe),Ye={placeholder:"请选择时间"},Ge={lang:We()({placeholder:"请选择日期",rangePlaceholder:["开始日期","结束日期"]},{today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:We()({},Ye)};Ge.lang.ok="确 定";var Ke=Ge,Qe=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"订单类型",dataIndex:"orderType",scopedSlots:{customRender:"orderType"}},{title:"订单状态",dataIndex:"orderStatus",scopedSlots:{customRender:"orderStatus"}},{title:"金额",dataIndex:"totalAmount",customRender:function(e){return e.toFixed(2)}},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],Xe=null,Je="",Ze={name:"cardOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},downLoadOrder:null,orderNum:null,nickName:null,realName:null,mobile:null,orderStatus:2,orderType:3,visible:!1,visibleOne:!1,startTime:null,endTime:null,locale:Ke,columns:Qe}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Xe=t,Je=e}}}},methods:{exportOrder:function(){var e=this;this.form.validateFields(function(t,n){void 0!==n.orderNum&&null!==n.orderNum&&""!==n.orderNum.trim()||(n.orderNum=""),void 0!==n.nickName&&null!==n.nickName&&""!==n.nickName.trim()||(n.nickName=""),void 0!==n.realName&&null!==n.realName&&""!==n.realName.trim()||(n.realName=""),void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()||(n.mobile=""),n.orderStatus=e.orderStatus,null===n.orderStatus&&(n.orderStatus=-1),n.startTime=e.startTime,null===n.startTime&&(n.startTime=""),n.endTime=e.endTime,null===n.endTime&&(n.endTime=""),n.orderType=e.orderType,n.ids=Je,t||(e.downLoadOrder="https://api.xiaoerd.icu/order/exportExcel?token="+sessionStorage.getItem("token")+"&orderNum="+n.orderNum+"&nickName="+n.nickName+"&realName="+n.realName+"&mobile="+n.mobile+"&orderStatus="+n.orderStatus+"&startTime="+n.startTime+"&endTime="+n.endTime+"&orderType="+n.orderType+"&ids="+n.ids)})},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},cancelOrder:function(){if(null===Xe||Xe.length>1)this.$message.error("必须选择一条数据");else{if(1!==Xe[0].orderStatus)return this.$message.error("当前订单不可以取消"),!1;this.cancel(Xe[0].id)}},cancel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("取消订单成功"),t.tableData(),Xe=null);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){""===Je||0===Je.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showModalOne:function(){if(null===Xe||Xe.length>1)this.$message.error("必须选择一条数据");else{if(7!==Xe[0].orderStatus)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},handleOk:function(){this.visible=!1,this.deleteOrder(Je)},handleOkOne:function(){this.visibleOne=!1,this.refund(Xe[0].orderNum)},deleteOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Je="");case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),Xe=null;case 2:case"end":return t.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.orderStatus=this.orderStatus,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,r.orderType=this.orderType,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.orderStatus=t.orderStatus,n.orderType=t.orderType,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.orderStatus=null,this.tableData()):(this.orderStatus=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList({orderStatus:e,orderType:t.orderType});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},orderDetail:function(e){var t={id:e};this.bus.$emit("goToPage","cardOrderDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.orderList({orderType:e.orderType,orderStatus:e.orderStatus});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},et={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cardOrder"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportOrder}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadOrder}},[e._v(" 导出")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"orderStatus",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#f50":2===t?"#87d068":5===t?"#108ee9":6===t?"#2db7f5":0===t?"#2db7f5":""}},[e._v(e._s(1===t?"待付款":2===t?"已付款":5===t?"待评价":6===t?"已完成":0===t?"已取消":""))])}},{key:"orderType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":3===t?"#87d068":4===t?"#2db7f5":5===t?"#2db7f5":""}},[e._v(e._s(1===t?"商品":2===t?"充值":3===t?"会员卡":4===t?"图书":5===t?"活动":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.orderDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var tt=n("VU/8")(Ze,et,!1,function(e){n("cCzA")},"data-v-ff167eee",null).exports,nt=[{title:"人员头像",dataIndex:"avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"nickName"},{title:"姓名",dataIndex:"realName"},{title:"手机号",dataIndex:"mobile"}],rt=[{title:"活动封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"活动人数",dataIndex:"totalNumber"},{title:"价格",dataIndex:"price"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],at={name:"cardOrderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),order:{orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,remark:null},data:[],data1:[],columns:nt,columns1:rt}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{formatDate:function(e){return m(e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderInfo({orderId:e});case 2:0===(r=n.sent).code&&(t.order=r.order,t.data.push(r.order.member));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","cardOrder")}}},ot={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cardOrderDetail"},[n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单金额: "+e._s(e.order.totalAmount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s(0===e.order.orderStatus?"已取消":1===e.order.orderStatus?"待付款":2===e.order.orderStatus?"已付款":3===e.order.orderStatus?"待评价":5===e.order.orderStatus?"已完成":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.formatDate(e.order.createTime)))])],1)],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("人员信息")]),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}}])})],1),e._v(" "),n("p",{staticStyle:{"padding-top":"20px"}},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1)])},staticRenderFns:[]};var it=n("VU/8")(at,ot,!1,function(e){n("TeQZ")},"data-v-aafe83c2",null).exports,st=[{title:"封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"馆内编码",width:"180px",dataIndex:"bookNum"},{title:"条码",dataIndex:"barcode"},{title:"图书名称",dataIndex:"bookName"},{title:"作者",dataIndex:"author"},{title:"价格",dataIndex:"price"},{title:"库存",dataIndex:"stock"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:150,scopedSlots:{customRender:"action"}}],ct=[{title:"头像",dataIndex:"avatar_url",scopedSlots:{customRender:"avatarUrl"}},{title:"姓名",dataIndex:"real_name"},{title:"昵称",dataIndex:"nick_name"},{title:"日期",dataIndex:"create_time",scopedSlots:{customRender:"createTime"}},{title:"订单编号",dataIndex:"order_num"},{title:"订单状态",dataIndex:"order_status",scopedSlots:{customRender:"orderStatus"}}],lt="",ut={name:"book",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),importUrl:"https://api.xiaoerd.icu/book/importBook",downLoadUrl:"https://api.xiaoerd.icu/book/exportBook?token="+sessionStorage.getItem("token"),picUrl:"",data:[],borrowData:[],downLoadBook:null,pagination:{total:0,current:1},visible:!1,bookName:null,bookNum:null,barcode:null,status:null,columns:st,borrowColumns:ct,borrowModel:!1}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){lt=e}}}},props:{passData:Object},methods:{showBorrowRecord:function(e){this.borrowModel=!0,this.borrowData=e},exportBook:function(){var e=this;this.form.validateFields(function(t,n){if(void 0===n.bookName&&(n.bookName=""),void 0===n.bookNum&&(n.bookNum=""),void 0===n.barcode||null===n.barcode||""===n.barcode.trim())n.barcode="";else{var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}void 0===n.status&&(n.status=""),t||(e.downLoadBook="https://api.xiaoerd.icu/book/exportExcel?token="+sessionStorage.getItem("token")+"&bookName="+n.bookName+"&bookNum="+n.bookNum+"&barcode="+n.barcode+"&status="+n.status)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleChange:function(e){"done"===e.file.status&&this.tableData()},showModal:function(){""===lt||0===lt.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteBook(lt)},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(null!==n.barcode&&void 0!==n.barcode&&""!==n.barcode.trim()){var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.bookNum&&null!==n.bookNum&&(n.bookNum=n.bookNum.trim()),t.bookNum=n.bookNum,t.barcode=n.barcode,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},deleteBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),lt="");case 4:case"end":return n.stop()}},n,t)}))()},bookAdd:function(){this.bus.$emit("goToPage","bookAdd")},bookEdit:function(e){var t={id:e,page:this.pagination.current};this.bus.$emit("goToPage","bookEdit"),this.bus.$emit("passData",t)},bookUpper:function(){""===lt||0===lt.length?this.$message.error("至少选择一条数据"):this.upper(lt)},bookLower:function(){""===lt||0===lt.length?this.$message.error("至少选择一条数据"):this.lower(lt)},recommend:function(){""===lt||0===lt.length?this.$message.error("至少选择一条数据"):this.recommends(lt)},cancelRecommend:function(){""===lt||0===lt.length?this.$message.error("至少选择一条数据"):this.cancelRecommends(lt)},upper:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookUpper(e);case 2:0===n.sent.code&&(t.$message.success("上架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},recommends:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recommend(e);case 2:0===n.sent.code&&(t.$message.success("推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},cancelRecommends:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelRecommend(e);case 2:0===n.sent.code&&(t.$message.success("取消推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},lower:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookLower(e);case 2:0===n.sent.code&&(t.$message.success("下架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList({page:null!==e.passData?e.passData.page:1});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,null!==e.passData&&(e.pagination.current=e.passData.page));case 4:case"end":return t.stop()}},t,e)}))()}}},dt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"馆内编码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"条码(isbn)",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"180px"},attrs:{placeholder:"状态"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("上架")]),e._v(" "),n("a-select-option",{attrs:{value:0}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.bookAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-upload",{attrs:{name:"importBookFile",headers:e.headers,multiple:!1,accept:".xls,.xlsx",action:e.importUrl},on:{change:e.handleChange}},[n("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 下载模板")])])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportBook}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadBook}},[e._v(" 导出")])])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"up"},on:{click:e.bookUpper}},[e._v("上架")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"down"},on:{click:e.bookLower}},[e._v("下架")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"up"},on:{click:e.recommend}},[e._v("推荐")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"down"},on:{click:e.cancelRecommend}},[e._v("取消推荐")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"借阅记录",width:"1000px",footer:null,centered:"",cancelText:"取消"},model:{value:e.borrowModel,callback:function(t){e.borrowModel=t},expression:"borrowModel"}},[n("a-table",{attrs:{columns:e.borrowColumns,dataSource:e.borrowData,rowKey:"order_num"},scopedSlots:e._u([{key:"orderStatus",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":1===t?"#f50":2===t?"#77d068":3===t?"#83d068":11===t?"#87d068":12===t?"#2db7f5":13===t?"#89D4F5":5===t?"#89DE":6===t?"#49d068":""}},[e._v(e._s(0===t?"已取消":1===t?"待付款":2===t?"待发货":3===t?"待收货":5===t?"待评价":11===t?"预借中":12===t?"借阅中":13===t?"预归还":6===t?"已完成":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.bookEdit(r.id)}}},[e._v("修改")]),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showBorrowRecord(r.borrowRecord)}}},[e._v("借阅记录")])])}}])})],1)},staticRenderFns:[]};var ft=n("VU/8")(ut,dt,!1,function(e){n("wcYR")},"data-v-14deead4",null).exports,mt=n("//Fk"),pt=n.n(mt),ht=n("woOf"),vt=n.n(ht),gt=n("5eDb"),bt=n.n(gt),yt=(n("Aenb"),n("Abny"),n("NBEC"),n("HaK5"),n("gBhd"),n("Q/P+"),n("c/6r"),n("SlIL"),n("Rv7z"),n("TC2U"),n("eVbm"),n("DhT3"),{props:{value:{type:String,editor:null,required:!0},setting:{},url:{default:"",type:String},accept:{default:"image/jpeg, image/png",type:String},maxSize:{default:2097152,type:Number},withCredentials:{default:!1,type:Boolean}},watch:{value:function(e){console.log("init "+e),0!==this.status&&bt.a.activeEditor.getContent()===e||bt.a.activeEditor.setContent(e),this.status=2}},data:function(){return{status:0,id:"editor-"+(new Date).getMilliseconds()}},methods:{},mounted:function(){var e=this,t={selector:"#"+e.id,language_url:"@/zh_CN.js",language:"zh_CN",init_instance_callback:function(t){console.log("Editor: "+t.id+" is now initialized."),t.on("input change undo redo",function(){var n=t.getContent();e.$emit("show",n)})},content_style:"\n  *                         { padding:0; margin:0; }\n  html, body                { height:100%; }\n  img                       { max-width:100%; display:block;height:auto; }\n  a                         { text-decoration: none; }\n  iframe                    { width: 100%; }\n  p                         { line-height:1.6; margin: 0px; }\n  table                     { word-wrap:break-word; word-break:break-all; max-width:100%; border:none; border-color:#999; }\n  .mce-object-iframe        { width:100%; box-sizing:border-box; margin:0; padding:0; }\n  ul,ol                     { list-style-position:inside; }\n",insert_button_items:"image link | inserttable",paste_retain_style_properties:"all",paste_word_valid_elements:"*[*]",paste_data_images:!0,paste_convert_word_fake_lists:!1,paste_webkit_styles:"all",paste_merge_formats:!0,nonbreaking_force_tab:!1,paste_auto_cleanup_on_paste:!1,plugins:["advlist link image","code","table textcolor paste textcolor colorpicker"],toolbar_items_size:"small",block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;",toolbar1:"table |insertfile undo redo | formatselect | link unlink | uploadimg image media",toolbar2:" fontsizeselect | forecolor backcolor | fontselect bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | outdent indent | removeformat",images_upload_handler:function(t,n,r){var a,o;t.blob().size>e.maxSize&&r("文件体积过大"),e.accept.indexOf(t.blob().type)>=0?(a=new XMLHttpRequest,o=new FormData,a.withCredentials=e.withCredentials,a.open("POST",e.url),a.onload=function(){var e;403!==a.status?a.status<200||a.status>=300?r("HTTP Error: "+a.status):(e=JSON.parse(a.responseText),n(e.url)):r("HTTP Error: "+a.status,{remove:!0})},a.onerror=function(){console.log(a),e.$emit("on-ready","上传失败")},o.append("file",t.blob()),a.send(o)):r("图片格式错误")}};vt()(t,e.setting),bt.a.init(t)},beforeDestroy:function(){bt.a.get(this.id).destroy()}}),wt={render:function(){var e=this.$createElement;return(this._self._c||e)("textarea",{attrs:{id:this.id},domProps:{value:this.value}})},staticRenderFns:[]},xt=n("VU/8")(yt,wt,!1,null,null,null).exports;function kt(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var _t={name:"bookAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/300x300?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,fileList:[],previewVisible:!1,previewImage:"",replaceFields:{children:"children",title:"label",key:"id"},data:{picUrl:null,bookNum:null,bookName:null,author:null,price:null,pressName:null,recommend:0,status:1,stock:null,unit:1,bookPosition:null,describe:null},richTextData:null,onOff:!0,listOne:[],showList:[],tags:[],exit:!1}},created:function(){this.getTag()},methods:{editors:function(e){this.content=e},findBook:function(){this.loseBlur(this.data.barcode)},loseBlur:function(e){console.log(e.target.value),this.fileList=[],this.data.picUrl=null,this.data.bookNum=null,this.data.bookName=null,this.data.author=null,this.data.price=null,this.data.pressName=null,this.data.publishDate=null,this.richTextData="",this.data.describe=null,this.getBookByBarcode(e.target.value),this.getByBarcode(e.target.value)},getBookByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getBookByISBN({isbn:e});case 2:0===(r=n.sent).code?(t.data=r.book,t.data.barcode=e,t.richTextData=r.book.describe,t.fileList.push({uid:1,name:"image",status:"done",url:r.book.picUrl})):(t.richTextData="",t.data.barcode=e,t.data.bookName=null,t.data.author=null,t.data.price=null,t.data.publishDate=null,t.data.pressName=null,t.data.stock=null);case 4:case"end":return n.stop()}},n,t)}))()},getByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getByBarcode({barcode:e});case 2:0===(r=n.sent).code&&null!==r.book&&(t.exit=!0);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},handleOkOne:function(){this.exit=!1},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label,void 0!==t.children&&t.children.forEach(function(e){e.parentId=t.label,e.id=e.label})})}));case 4:case"end":return t.stop()}},t,e)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,kt(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0,console.log(e.url);case 7:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t),console.log(this.fileList)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},selectChange:function(e){},changeRecommends:function(e){},changeStatus:function(e){},getContent:function(e){this.data.describe=e},addBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","book");case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(0!==t.fileList.length){var r=[];t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0],n.describe=t.content,void 0!==n.barcode&&""!==n.barcode?(n.barcode=t.data.barcode,void 0!==n.bookNum&&""!==n.bookNum?void 0!==n.bookName&&""!==n.bookName&&null!==n.bookName?void 0!==n.author&&""!==n.author&&null!==n.author?void 0!==n.pressName&&""!==n.pressName&&null!==n.pressName?void 0!==n.price&&""!==n.price&&null!==n.price?void 0!==n.stock&&""!==n.stock&&null!==n.stock?void 0!==n.unit&&""!==n.unit&&null!==n.unit?(n.tags=t.tags,e||t.addBook(n)):t.$message.warn("单位不能为空"):t.$message.warn("库存不能为空"):t.$message.warn("价格不能为空"):t.$message.warn("出版社不能为空"):t.$message.warn("作者不能为空"):t.$message.warn("书名不能为空"):t.$message.warn("馆内编码不能为空")):t.$message.warn("条码不能为空")}else t.$message.warn("图片不能为空")})},goToBack:function(){this.bus.$emit("goToPage","book")}}},St={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"条码(isbn)","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode",{required:!0,rules:[{message:"请输入条码!"}],initialValue:e.data.barcode}],expression:"['barcode', { required: true,rules: [{ message: '请输入条码!' }], initialValue: data.barcode}]"}],attrs:{placeholder:"请输入条码",autocomplete:"off"},on:{blur:e.loseBlur}})],1),e._v(" "),n("a-form-item",{attrs:{label:"馆内编码","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum",{required:!0,rules:[{message:"馆内编码!"}],initialValue:e.data.bookNum}],expression:"['bookNum', { required: true,rules: [{ message: '馆内编码!' }], initialValue: data.bookNum}]"}],attrs:{placeholder:"请输入馆内编码"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"书名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,rules:[{message:"书名!"}],initialValue:e.data.bookName}],expression:"['bookName', { required: true,rules: [{ message: '书名!' }], initialValue: data.bookName}]"}],attrs:{placeholder:"请输入书名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"作者","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["author",{required:!0,rules:[{message:"作者!"}],initialValue:e.data.author}],expression:"['author', { required: true,rules: [{ message: '作者!' }], initialValue: data.author }]"}],attrs:{placeholder:"请输入作者"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"出版社","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pressName",{required:!0,rules:[{message:"出版社!"}],initialValue:e.data.pressName}],expression:"['pressName', { required: true,rules: [{ message: '出版社!' }], initialValue: data.pressName }]"}],attrs:{placeholder:"请输入出版社"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"出版日期","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["publishDate",{required:!0,rules:[{message:"出版日期!"}],initialValue:e.data.publishDate}],expression:"['publishDate', { required: true,rules: [{ message: '出版日期!' }], initialValue: data.publishDate }]"}],attrs:{placeholder:"请输入出版日期"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{required:!0,initialValue:e.data.price}],expression:"['price', { required: true,initialValue: data.price }]"}],attrs:{placeholder:"请输入价格"}})],1),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"库存","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{style:{display:"inline-block",width:"146px"},attrs:{"label-col":{span:2},"wrapper-col":{span:20}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock",{required:!0,initialValue:e.data.stock}],expression:"['stock', { required: true,initialValue: data.stock}]"}],attrs:{placeholder:"输入库存"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block",width:"180px"},attrs:{"label-col":{span:2},"wrapper-col":{span:20}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unit",{initialValue:e.data.unit}],expression:"['unit',{initialValue: data.unit}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"选择单位"}},[n("a-select-option",{attrs:{value:1}},[e._v("本")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("册")])],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}],on:{change:e.changeRecommends}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"上架状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:0}},[e._v("下架")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("上架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModal}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"书位","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookPosition",{required:!0,initialValue:e.data.bookPosition}],expression:"['bookPosition', { required: true,initialValue: data.bookPosition }]"}],attrs:{type:"number",placeholder:"书位"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"button"},on:{click:e.handleSubmit}},[e._v("\n                确定\n            ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n                返回\n            ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{title:"图书存在提示",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.exit,callback:function(t){e.exit=t},expression:"exit"}},[n("p",[e._v("该书已存在")])])],1)},staticRenderFns:[]};var Ct=n("VU/8")(_t,St,!1,function(e){n("WQjn")},"data-v-742e3e34",null).exports;function Nt(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var Tt={name:"bookEdit",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/300x300?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,fileList:[],previewVisible:!1,previewImage:"",replaceFields:{children:"children",title:"label",key:"id"},data:{picUrl:null,recommend:null,status:null,describe:null,barcode:null,bookNum:null,bookName:null,pressName:null,unit:null,author:null,publishDate:null,stock:null,bookPosition:null,price:null},richTextData:"",onOff:!0,categoryList:[],listOne:[],showList:[],tags:[]}},props:{passData:Object},created:function(){this.getTag()},methods:{editors:function(e){this.content=e},loseBlur:function(e){console.log(e.target.value),this.fileList=[],this.data.picUrl=null,this.data.bookName=null,this.data.author=null,this.data.price=null,this.data.pressName=null,this.richTextData="",this.data.describe=null,this.getBookByBarcode(e.target.value)},getBookByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getBookByISBN({isbn:e});case 2:0===(r=n.sent).code?(t.data.bookName=r.book.bookName,t.data.author=r.book.author,t.data.price=r.book.price,t.data.recommend=r.book.recommend,t.data.pressName=r.book.pressName,t.data.status=r.book.status,t.data.unit=r.book.unit,t.richTextData=r.book.describe,t.fileList=[],t.fileList.push({uid:1,name:"image",status:"done",url:r.book.picUrl})):(t.fileList=[],t.data.bookName=null,t.data.author=null,t.data.price=null,t.data.pressName=null,t.data.recommend=0,t.data.status=0);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label,void 0!==t.children&&t.children.forEach(function(e){e.parentId=t.label,e.id=e.label})})}),e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookInfo({id:e});case 2:r=n.sent,t.data=r.book,t.content=r.book.describe,t.data.describe=r.book.describe,t.tags=r.book.tags,t.showList=t.tags,r.book.picUrls.forEach(function(e,n){t.fileList.push({uid:n,name:"image",status:"done",url:e})});case 9:case"end":return n.stop()}},n,t)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,Nt(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},selectChange:function(e){},changeRecommends:function(e){},changeStatus:function(e){},getContent:function(e){this.data.describe=e},updateBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookEdit(e);case 2:0===n.sent.code&&(r={page:t.passData.page},t.bus.$emit("goToPage","book"),t.bus.$emit("passData",r));case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},save:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.describe=t.content;var r=[];0!==t.fileList.length?(t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0]):(n.picUrls=null,n.picUrl=null),void 0!==n.barcode&&""!==n.barcode?void 0!==n.bookNum&&""!==n.bookNum?void 0!==n.bookName&&""!==n.bookName?void 0!==n.author&&""!==n.author?void 0!==n.pressName&&""!==n.pressName?void 0!==n.price&&""!==n.price?void 0!==n.stock&&""!==n.stock?void 0!==n.unit&&""!==n.unit?(n.tags=t.tags,e||t.updateBook(n)):t.$message.warn("单位不能为空"):t.$message.warn("库存不能为空"):t.$message.warn("价格不能为空"):t.$message.warn("出版社不能为空"):t.$message.warn("作者不能为空"):t.$message.warn("书名不能为空"):t.$message.warn("馆内编码不能为空"):t.$message.warn("条码不能为空")})},goToBack:function(){var e={page:this.passData.page};this.bus.$emit("goToPage","book"),this.bus.$emit("passData",e)}}},Dt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"条码(isbn)","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode",{required:!0,rules:[{message:"条码(isbn)!"}],initialValue:e.data.barcode}],expression:"['barcode', {required: true, rules: [{  message: '条码(isbn)!' }], initialValue: data.barcode}]"}],attrs:{placeholder:"请输入条码",autocomplete:"off"},on:{blur:e.loseBlur}})],1),e._v(" "),n("a-form-item",{attrs:{label:"馆内编码","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum",{required:!0,rules:[{message:"馆内编码!"}],initialValue:e.data.bookNum}],expression:"['bookNum', {required: true, rules: [{  message: '馆内编码!' }], initialValue: data.bookNum}]"}],attrs:{placeholder:"请输入馆内编码"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"书名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,rules:[{message:"书名!"}],initialValue:e.data.bookName}],expression:"['bookName', {required: true, rules: [{  message: '书名!' }], initialValue: data.bookName}]"}],attrs:{placeholder:"请输入书名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"作者","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["author",{required:!0,rules:[{message:"作者!"}],initialValue:e.data.author}],expression:"['author', {required: true, rules: [{  message: '作者!' }], initialValue: data.author}]"}],attrs:{placeholder:"请输入作者"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"出版社","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pressName",{required:!0,rules:[{message:"出版社!"}],initialValue:e.data.pressName}],expression:"['pressName', {required: true, rules: [{  message: '出版社!' }], initialValue: data.pressName}]"}],attrs:{placeholder:"请输入出版社"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"出版日期","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["publishDate",{required:!0,rules:[{message:"出版日期!"}],initialValue:e.data.publishDate}],expression:"['publishDate', {required: true, rules: [{  message: '出版日期!' }], initialValue: data.publishDate}]"}],attrs:{placeholder:"请输入出版日期"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{required:!0,initialValue:e.data.price}],expression:"['price', {required: true, initialValue: data.price}]"}],attrs:{placeholder:"输入库存"}})],1),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"库存","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{staticClass:"publish",style:{display:"inline-block",width:"146px"},attrs:{"wrapper-col":{span:20}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock",{required:!0,initialValue:e.data.stock}],expression:"['stock', {required: true, initialValue: data.stock}]"}],attrs:{placeholder:"输入库存"}})],1),e._v(" "),n("a-form-item",{staticClass:"unit",style:{display:"inline-block",width:"180px"},attrs:{"label-col":{span:2},"wrapper-col":{span:20}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unit",{initialValue:e.data.unit}],expression:"['unit',{initialValue: data.unit}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"选择单位"}},[n("a-select-option",{attrs:{value:1}},[e._v("本")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("册")])],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}],on:{change:e.changeRecommends}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"上架状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:0}},[e._v("下架")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("上架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModal}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"书位","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookPosition",{required:!0,initialValue:e.data.bookPosition}],expression:"['bookPosition', { required: true,initialValue: data.bookPosition }]"}],attrs:{type:"number",placeholder:"书位"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1)],1)},staticRenderFns:[]};var It=n("VU/8")(Tt,Dt,!1,function(e){n("K/IZ")},"data-v-63cad28a",null).exports,Mt=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"订单类型",dataIndex:"orderType",scopedSlots:{customRender:"orderType"}},{title:"配送方式",dataIndex:"distributionType",scopedSlots:{customRender:"distributionType"}},{title:"订单状态",dataIndex:"orderStatus",scopedSlots:{customRender:"orderStatus"}},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remarkShow"}},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:100,scopedSlots:{customRender:"action"}}],Ot=null,At="",Lt={name:"order",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},downLoadOrder:null,orderNum:null,nickName:null,realName:null,mobile:null,orderStatus:null,orderType:4,visible:!1,visibleOne:!1,startTime:null,endTime:null,locale:Ke,columns:Mt}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ot=t,At=e}}}},methods:{exportOrder:function(){var e=this;this.form.validateFields(function(t,n){void 0!==n.orderNum&&null!==n.orderNum&&""!==n.orderNum.trim()||(n.orderNum=""),void 0!==n.nickName&&null!==n.nickName&&""!==n.nickName.trim()||(n.nickName=""),void 0!==n.realName&&null!==n.realName&&""!==n.realName.trim()||(n.realName=""),void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()||(n.mobile=""),n.orderStatus=e.orderStatus,null===n.orderStatus&&(n.orderStatus=-1),n.startTime=e.startTime,null===n.startTime&&(n.startTime=""),n.endTime=e.endTime,null===n.endTime&&(n.endTime=""),n.orderType=e.orderType,n.ids=At,t||(e.downLoadOrder="https://api.xiaoerd.icu/order/exportExcel?token="+sessionStorage.getItem("token")+"&orderNum="+n.orderNum+"&nickName="+n.nickName+"&realName="+n.realName+"&mobile="+n.mobile+"&orderStatus="+n.orderStatus+"&startTime="+n.startTime+"&endTime="+n.endTime+"&orderType="+n.orderType+"&ids="+n.ids)})},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},orderAdd:function(){this.bus.$emit("goToPage","orderAdd")},cancelOrder:function(){if(null===Ot||Ot.length>1)this.$message.error("必须选择一条数据");else{if(2!==Ot[0].orderStatus&&11!==Ot[0].orderStatus)return this.$message.error("当前订单不可以取消"),!1;this.cancel(Ot[0].id)}},showModal:function(){""===At||0===At.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showModalOne:function(){if(null===Ot||Ot.length>1)this.$message.error("必须选择一条数据");else{if(7!==Ot[0].orderStatus)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},handleOk:function(){this.visible=!1,this.deleteOrder(At)},handleOkOne:function(){this.visibleOne=!1,this.refund(Ot[0].id)},deleteOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),At="");case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.refundOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("退款成功"),t.tableData(),Ot=null);case 4:case"end":return n.stop()}},n,t)}))()},cancel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("取消订单成功"),t.tableData(),Ot=null);case 4:case"end":return n.stop()}},n,t)}))()},confirmBook:function(){if(null===Ot||Ot.length>1)this.$message.error("必须选择一条数据");else{if(11!==Ot[0].orderStatus)return this.$message.error("只有预借中的订单可以确认"),!1;var e={};e.id=Ot[0].id,e.orderNum=Ot[0].orderNum,e.orderType=Ot[0].orderType,1===Ot[0].distributionType?(e.orderStatus=3,this.editOrder(e)):(e.orderStatus=2,this.editOrder(e))}},editOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderEdit(e);case 2:0===n.sent.code&&(t.$message.success("确认订单成功"),t.tableData(),Ot=null);case 4:case"end":return n.stop()}},n,t)}))()},confirmOrder:function(){if(null===Ot||Ot.length>1)this.$message.error("必须选择一条数据");else{if(11!==Ot[0].orderStatus)return this.$message.error("只有预借中的订单可以确认"),!1;this.confirm(Ot[0].id)}},confirm:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.confirmOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("确认订单成功"),t.tableData(),Ot=null);case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.orderStatus=this.orderStatus,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,r.orderType=this.orderType,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.orderStatus=t.orderStatus,n.orderType=t.orderType,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.orderStatus=null,this.tableData()):(this.orderStatus=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList({orderStatus:e,orderType:t.orderType,startTime:t.startTime,endTime:t.endTime});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},orderDetail:function(e){var t={id:e};this.bus.$emit("goToPage","orderDetail"),this.bus.$emit("passData",t)},orderTest:function(e){this.orderInfo(e)},orderInfo:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderTest({orderId:e});case 2:0===n.sent.code?t.$message.success("测试成功"):t.$message.warn("测试失败");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.orderList({orderType:e.orderType});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},Et={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"order"},[n("a-tabs",{attrs:{defaultActiveKey:"99"},on:{change:e.callback}},[n("a-tab-pane",{key:"-1",attrs:{tab:"所有"}}),e._v(" "),n("a-tab-pane",{key:"11",attrs:{tab:"预借中"}}),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"待发货"}}),e._v(" "),n("a-tab-pane",{key:"3",attrs:{tab:"待收货"}}),e._v(" "),n("a-tab-pane",{key:"12",attrs:{tab:"借阅中"}}),e._v(" "),n("a-tab-pane",{key:"13",attrs:{tab:"预归还"}}),e._v(" "),n("a-tab-pane",{key:"5",attrs:{tab:"待评价"}}),e._v(" "),n("a-tab-pane",{key:"6",attrs:{tab:"已完成 "}}),e._v(" "),n("a-tab-pane",{key:"0",attrs:{tab:"已取消"}})],1),e._v(" "),n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportOrder}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadOrder}},[e._v(" 导出")])])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.orderAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.confirmBook}},[e._v("确认订单")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"cancel"},on:{click:e.cancelOrder}},[e._v("取消订单")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除订单")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"orderStatus",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":1===t?"#f50":2===t?"#77d068":3===t?"#83d068":11===t?"#87d068":12===t?"#2db7f5":13===t?"#89D4F5":5===t?"#89DE":6===t?"#49d068":""}},[e._v(e._s(0===t?"已取消":1===t?"待付款":2===t?"待发货":3===t?"待收货":5===t?"待评价":11===t?"预借中":12===t?"借阅中":13===t?"预归还":6===t?"已完成":""))])}},{key:"orderType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":3===t?"#87d068":4===t?"#2db7f5":"grey"}},[e._v(e._s(1===t?"商品":2===t?"充值":3===t?"会员卡":4===t?"图书":"活动"))])}},{key:"distributionType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":0===t?"#87d068":"grey"}},[e._v(e._s(1===t?"自提":0===t?"外送":""))])}},{key:"remarkShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.remark}},[e._v("\n      "+e._s(r.remark)+"\n    ")])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.orderDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var zt=n("VU/8")(Lt,Et,!1,function(e){n("tli4")},"data-v-30b9c204",null).exports,Rt=n("ifoU"),Vt=n.n(Rt),Bt=n("lHA8"),$t=n.n(Bt),Ut=n("c/Tr"),Pt=n.n(Ut),Ft=[{title:"会员名称",dataIndex:"nickName"},{title:"姓名",dataIndex:"realName"},{title:"手机号",dataIndex:"mobile"}],Ht=[{title:"图书封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码（isbn）",dataIndex:"barcode"},{title:"库存",dataIndex:"stock"}],jt=[{title:"图书封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码（isbn）",dataIndex:"barcode"},{title:"库存",dataIndex:"stock"}],qt=[{title:"条码（isbn）",dataIndex:"barcode"},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Wt="",Yt=[],Gt=[],Kt={name:"orderAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),memberForm:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),data:{orderStatus:11,distributionType:0,orderType:4,totalAmount:null},isbn:null,judgeContact:!0,paginationMember:{total:0,current:1},paginationBook:{total:0,current:1},columnMember:Ft,columnBook:Ht,columnBookOne:jt,columnSelected:qt,memberVisible:!1,visibleBook:!1,visibleBookOne:!1,memberList:[],memberId:null,memberName:null,orderBookList:[],bookList:[],bookListOne:[],selectedBook:[],selectedBookId:[],nickName:null,realName:null,bookName:null,bookNum:null,barcode:null}},created:function(){this.getMember(),this.getBook({stock:0})},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){Wt=t[0]}}},rowSelections:function(){return{onChange:function(e,t){0!==t.length&&t.forEach(function(e){Yt.push(e)}),Gt=Pt()(new $t.a(Gt.concat(e)))}}},rowSelectionsOne:function(){return{onChange:function(e,t){0!==t.length&&t.forEach(function(e){Yt.push(e)}),Gt=Pt()(new $t.a(Gt.concat(e)))}}}},methods:{getBookByBarcode:function(e){if(null!==e.target.value&&""!==e.target.value.trim()){var t={},n=new RegExp("-","g");t.barcode=e.target.value.replace(n,"").trim(),t.stock=1,this.getBookByIsbn(t)}},getBookByIsbn:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(1===r.rows.length?(a=!0,Gt.forEach(function(e){e===r.rows[0].id&&(a=!1)}),a&&(Yt.push(r.rows[0]),Gt.push(r.rows[0].id)),t.handleOkThree()):(t.bookListOne=r.rows,t.visibleBookOne=!0,t.resetIsbn()));case 4:case"end":return n.stop()}},n,t)}))()},deleteRecord:function(e){this.selectedBookId=this.selectedBookId.filter(function(t){return t!==e}),Gt=Gt.filter(function(t){return t!==e}),Yt=Yt.filter(function(t){return t.id!==e}),this.selectedBook=this.selectedBook.filter(function(t){return t.id!==e});var t=0;Yt.forEach(function(e){t+=e.price}),this.data.totalAmount=t},onChange:function(e){0===e.target.value?this.judgeContact=!0:1===e.target.value&&(this.judgeContact=!1)},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.memberForm.validateFields(function(e,n){t.nickName=n.nickName,t.realName=n.realName,t.paginationMember.current=1,e||t.searchMember(n)})},searchMember:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberList(e);case 2:0===(r=n.sent).code&&(t.memberList=r.rows,t.paginationMember.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmitTwo:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){if(void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.bookNum&&null!==n.bookNum&&(n.bookNum=n.bookNum.trim()),t.bookNum=n.bookNum,null!==n.barcode&&void 0!==n.barcode&&""!==n.barcode.trim()){var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}t.barcode=n.barcode,n.stock=0,t.paginationBook.current=1,e||t.searchBook(n)})},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleMemberChange:function(e,t,n){var r={};r.nickName=this.nickName,r.realName=this.realName,this.paginationMember.current=e.current,r.page=e.current,this.searchMember(r)},handleBookChange:function(e,t,n){var r={};r.bookName=this.bookName,r.barcode=this.barcode,r.bookNum=this.bookNum,r.stock=0,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},handleOkOne:function(){this.memberVisible=!1,this.memberId=Wt.id,this.memberName=Wt.nickName},handleOkTwo:function(){this.visibleBook=!1;var e=new Vt.a;Yt=Yt.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=[],n=0;Gt.forEach(function(e){Yt.forEach(function(r){e===r.id&&(n+=r.price,t.push(r))})}),this.data.totalAmount=n,this.selectedBook=t,this.selectedBookId=Gt},handleOkThree:function(){console.log("bookData",Yt),console.log("bookId",Gt),this.visibleBookOne=!1;var e=new Vt.a;Yt=Yt.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=[],n=0;Gt.forEach(function(e){Yt.forEach(function(r){e===r.id&&(n+=r.price,t.push(r))})}),this.data.totalAmount=n,this.selectedBook=t,this.selectedBookId=Gt,this.resetIsbn()},resetIsbn:function(){this.form.setFieldsValue({isbn:null})},showMemberModal:function(){this.memberVisible=!0},showBookModal:function(){this.visibleBook=!0},handleChange:function(e){},getMember:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.memberList();case 2:0===(n=t.sent).code&&(e.memberList=n.rows,e.paginationMember.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},getBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},addBookOrder:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderAdd(e);case 2:0===(r=n.sent).code?t.bus.$emit("goToPage","order"):t.$message.warn(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(void 0!==t.memberId&&null!==t.memberId)if(n.memberId=t.memberId,0!==t.selectedBookId.length)if(n.ids=t.selectedBookId,void 0!==n.totalAmount&&null!==t.totalAmount){if(0===n.distributionType){if(null===n.orderShipment.contacts||void 0===n.orderShipment.contacts||""===n.orderShipment.contacts.trim())return void t.$message.warn("请输入联系人");if(null===n.orderShipment.mobile||void 0===n.orderShipment.mobile||""===n.orderShipment.mobile.trim())return void t.$message.warn("请输入联系电话");if(null===n.orderShipment.address||void 0===n.orderShipment.address||""===n.orderShipment.address.trim())return void t.$message.warn("请输入送货地址")}n.orderType=t.data.orderType,e||(Gt=[],Yt=[],t.addBookOrder(n))}else t.$message.warn("请输入金额");else t.$message.warn("请选择书籍");else t.$message.warn("请选择会员")})},goToBack:function(){Gt=[],Yt=[],this.bus.$emit("goToPage","order")}}},Qt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"orderAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"选择会员","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showMemberModal}},[e._v("选择会员")]),e._v(" "),null!==e.memberId?n("span",[e._v("会员名称："+e._s(e.memberName))]):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"选择图书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showBookModal}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",{attrs:{label:"条码选书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["isbn",{initialValue:e.isbn}],expression:"['isbn',{initialValue: isbn}]"}],attrs:{placeholder:"请输入条码",autocomplete:"off"},on:{pressEnter:e.getBookByBarcode}})],1),e._v(" "),0!==e.selectedBook.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.columnSelected,rowKey:"id",dataSource:e.selectedBook,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteRecord(r.id)}}},[e._v("删除")])])}}],null,!1,1941376072)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"订单金额","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["totalAmount",{required:!0,initialValue:e.data.totalAmount}],expression:"['totalAmount', { required: true, initialValue: data.totalAmount }]"}],attrs:{type:"number",readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"订单状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderStatus",{required:!0,initialValue:e.data.orderStatus}],expression:"['orderStatus', { required: true, initialValue: data.orderStatus}]"}]},[n("a-radio",{attrs:{value:11}},[e._v("预借中")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"配送方式","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["distributionType",{required:!0,initialValue:e.data.distributionType}],expression:"['distributionType', { required: true, initialValue: data.distributionType}]"}],on:{change:e.onChange}},[n("a-radio",{attrs:{value:0}},[e._v("外送")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("自提")])],1)],1),e._v(" "),e.judgeContact?n("div",[n("a-form-item",{attrs:{label:"收货人姓名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderShipment.contacts",{required:!0}],expression:"['orderShipment.contacts', { required: true }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderShipment.mobile",{required:!0}],expression:"['orderShipment.mobile', { required: true }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"收货地址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderShipment.address",{required:!0}],expression:"['orderShipment.address', { required: true }]"}]})],1)],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{required:!0}],expression:"['remark', { required: true }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"会员",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.memberVisible,callback:function(t){e.memberVisible=t},expression:"memberVisible"}},[n("a-form",{attrs:{form:e.memberForm,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"会员名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"120px"},attrs:{placeholder:"用户名"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columnMember,rowKey:"id",dataSource:e.memberList,pagination:e.paginationMember},on:{change:e.handleMemberChange}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",width:"600",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleBook,callback:function(t){e.visibleBook=t},expression:"visibleBook"}},[n("a-form",{attrs:{form:e.bookForm,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitTwo}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"180px"},attrs:{placeholder:"isbn"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelections,columns:e.columnBook,rowKey:"id",selectedRowKeys:e.selectedBookId,dataSource:e.bookList,scroll:{y:500},pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",width:"600",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkThree},model:{value:e.visibleBookOne,callback:function(t){e.visibleBookOne=t},expression:"visibleBookOne"}},[n("a-table",{attrs:{rowSelection:e.rowSelectionsOne,columns:e.columnBookOne,rowKey:"id",dataSource:e.bookListOne},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var Xt=n("VU/8")(Kt,Qt,!1,function(e){n("aDXi")},"data-v-a8d41e02",null).exports,Jt=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"订单状态",dataIndex:"orderStatus",scopedSlots:{customRender:"orderStatus"}},{title:"价格",dataIndex:"totalAmount",customRender:function(e){return e.toFixed(2)}},{title:"快递单号",dataIndex:"orderLogistics.logisticsNum"},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remarkShow"}},{title:"商家备注",dataIndex:"businessRemark",scopedSlots:{customRender:"businessRemark"}},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],Zt=null,en="",tn={name:"shopOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},downLoadOrder:null,orderNum:null,nickName:null,realName:null,mobile:null,orderStatus:null,orderType:1,visible:!1,visibleOne:!1,visibleTwo:!1,discountedPricesVisible:!1,startTime:null,endTime:null,locale:Ke,columns:Jt,discountedPrices:null,disId:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Zt=t,en=e}}}},methods:{exportOrder:function(){var e=this;this.form.validateFields(function(t,n){void 0!==n.orderNum&&null!==n.orderNum&&""!==n.orderNum.trim()||(n.orderNum=""),void 0!==n.nickName&&null!==n.nickName&&""!==n.nickName.trim()||(n.nickName=""),void 0!==n.realName&&null!==n.realName&&""!==n.realName.trim()||(n.realName=""),void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()||(n.mobile=""),n.orderStatus=e.orderStatus,null===n.orderStatus&&(n.orderStatus=-1),n.startTime=e.startTime,null===n.startTime&&(n.startTime=""),n.endTime=e.endTime,null===n.endTime&&(n.endTime=""),n.orderType=e.orderType,n.ids=en,t||(e.downLoadOrder="https://api.xiaoerd.icu/order/exportExcel?token="+sessionStorage.getItem("token")+"&orderNum="+n.orderNum+"&nickName="+n.nickName+"&realName="+n.realName+"&mobile="+n.mobile+"&orderStatus="+n.orderStatus+"&startTime="+n.startTime+"&endTime="+n.endTime+"&orderType="+n.orderType+"&ids="+n.ids)})},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},cancelOrder:function(){if(null===Zt||Zt.length>1)this.$message.error("必须选择一条数据");else{if(1!==Zt[0].orderStatus)return this.$message.error("当前订单不可以取消"),!1;this.cancel(Zt[0].id)}},showModal:function(){""===en||0===en.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showDiscountedPrices:function(e){this.discountedPricesVisible=!0,this.disId=e},showModalOne:function(){if(null===Zt||Zt.length>1)this.$message.error("必须选择一条数据");else{if(7!==Zt[0].orderStatus)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},showModalTwo:function(){if(null===Zt||Zt.length>1)this.$message.error("必须选择一条数据");else{if(9!==Zt[0].orderStatus)return this.$message.error("当前订单不可以退货"),!1;this.visibleTwo=!0}},handleOk:function(){this.visible=!1,this.deleteOrder(en)},handleOkOne:function(){this.visibleOne=!1,this.refund(Zt[0].id)},handleOkTwo:function(){this.visibleTwo=!1,this.refundGood(Zt[0].id)},discountedPriceshandleOk:function(){this.discountedPricesVisible=!1,this.setDiscountedPrices()},setDiscountedPrices:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.setDiscountedPrices({id:e.disId,discountedPrices:e.discountedPrices});case 2:0===t.sent.code&&(e.$message.success("设置优惠价成功"),e.discountedPrices=null,en="",e.tableData());case 4:case"end":return t.stop()}},t,e)}))()},deleteOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),en="");case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.refundOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("退款成功"),Zt=null,en="",t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},refundGood:function(e){var t=this;return f()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},cancel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("取消订单成功"),t.tableData(),Zt=null,en="");case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.orderStatus=this.orderStatus,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,r.orderType=this.orderType,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.orderStatus=t.orderStatus,n.orderType=t.orderType,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.orderStatus=null,this.tableData()):(this.orderStatus=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList({orderStatus:e,orderType:t.orderType,startTime:t.startTime,endTime:t.endTime});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},orderDetail:function(e){var t={id:e};this.bus.$emit("goToPage","shopOrderDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.orderList({orderType:e.orderType});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},nn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shopOrder"},[n("a-tabs",{attrs:{defaultActiveKey:"99"},on:{change:e.callback}},[n("a-tab-pane",{key:"-1",attrs:{tab:"所有"}}),e._v(" "),n("a-tab-pane",{key:"1",attrs:{tab:"未付款"}}),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"待发货"}}),e._v(" "),n("a-tab-pane",{key:"3",attrs:{tab:"待收货"}}),e._v(" "),n("a-tab-pane",{key:"5",attrs:{tab:"待评价"}}),e._v(" "),n("a-tab-pane",{key:"6",attrs:{tab:"已完成"}}),e._v(" "),n("a-tab-pane",{key:"0",attrs:{tab:"已取消"}}),e._v(" "),n("a-tab-pane",{key:"7",attrs:{tab:"退款中"}}),e._v(" "),n("a-tab-pane",{key:"8",attrs:{tab:"退款完成"}})],1),e._v(" "),n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportOrder}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadOrder}},[e._v(" 导出")])])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"cancel"},on:{click:e.cancelOrder}},[e._v("取消订单")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除订单")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-modal",{attrs:{title:"退货确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleTwo,callback:function(t){e.visibleTwo=t},expression:"visibleTwo"}},[n("p",[e._v("确定进行退货退款操作？")])]),e._v(" "),n("a-modal",{attrs:{title:"设置订单价格",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.discountedPriceshandleOk},model:{value:e.discountedPricesVisible,callback:function(t){e.discountedPricesVisible=t},expression:"discountedPricesVisible"}},[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"订单价格"},model:{value:e.discountedPrices,callback:function(t){e.discountedPrices=t},expression:"discountedPrices"}})],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"orderStatus",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":1===t?"#f50":2===t?"#87d068":3===t?"#2db7f5":5===t?"#4db7f5":6===t?"#49d068":7===t?"#234567":8===t?"#765432":""}},[e._v(e._s(0===t?"已取消":1===t?"未付款":2===t?"待发货":3===t?"待收货":5===t?"待评价":6===t?"已完成":7===t?"退款中":8===t?"退款完成":""))])}},{key:"remarkShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.remark}},[e._v("\n        "+e._s(r.remark)+"\n      ")])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"businessRemark",fn:function(t){return n("span",{attrs:{title:t}},[e._v(e._s(t.substring(0,10)))])}},{key:"discountedPrices",fn:function(t){return n("span",{},[e._v(e._s(null!=t?t:""))])}},{key:"action",fn:function(t,r){return n("span",{},[1===r.orderStatus?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showDiscountedPrices(r.id)}}},[e._v("改价")]):e._e(),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.orderDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var rn=n("VU/8")(tn,nn,!1,function(e){n("cXq3")},"data-v-3b5403c4",null).exports,an=[{title:"商品图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"图书编码",dataIndex:"bookNum"},{title:"购买数量",dataIndex:"buyNum"},{title:"价格",dataIndex:"price"}],on=[{title:"图书图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName",scopedSlots:{customRender:"nameShow"}},{title:"isbn码",dataIndex:"barcode"},{title:"图书编码",dataIndex:"bookNum"},{title:"借阅数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}},{title:"价格",dataIndex:"price"}],sn=[{title:"序号",customRender:function(e,t,n){return""+(n+1)}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码",dataIndex:"barcode"},{title:"单位",dataIndex:"unit",scopedSlots:{customRender:"unit"}},{title:"借阅数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}}],cn=[{title:"序号",customRender:function(e,t,n){return""+(n+1)}},{title:"图书名称",dataIndex:"bookName",width:"40%",scopedSlots:{customRender:"valueShow"}},{title:"数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}}],ln=[{title:"城市",dataIndex:"city"},{title:"描述",dataIndex:"description"},{title:"部门",dataIndex:"site"},{title:"时间",dataIndex:"time",scopedSlots:{customRender:"time"}}],un={name:"orderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),permissions:localStorage.permissions,judge:!1,judgeOne:!1,judgeTwo:!1,visibleWay:!1,visiblePrint:!1,visiblePrintOne:!1,timer:null,times:null,list:[],order:{orderShipment:null,orderLogistics:null,evaluation:null,orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,orderGoodsList:[],orderBookList:[],remark:null},jsonMap:{mailNo:null,arrivedOrgSimpleName:null,districtName:null,caddress:null,cprovince:null,ccity:null,conPhone:null,conName:null,shipperName:null,shipperPhone:null,orderNum:null,orderName:null,remark:null,orderBookList:[]},logisticsName:null,logisticsNum:null,visible:!1,visibleOne:!1,columns:an,bookColumns:on,printColumns:sn,printColumnsOne:cn,columnsOne:ln}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{confirm:function(){var e={};e.id=this.passData.id,e.orderNum=this.order.orderNum,e.orderType=this.order.orderType,1===this.order.distributionType?e.orderStatus=3:e.orderStatus=2,this.editOrder(e)},editOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderEdit(e);case 2:0===n.sent.code&&(t.$message.success("确认订单成功"),t.judgeTwo=!1,t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},changeWay:function(e){this.visibleWay="快递单号"===e},showReturn:function(){this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1,this.returnBook(this.passData.id),this.judgeOne=!1},showModal:function(){2===this.order.orderStatus&&4===this.order.orderType?this.visible=!0:this.$message.warn("无法发货")},showPrint:function(){this.visiblePrint=!0,this.timer=setTimeout(window.print,100),this.times=setTimeout(this.closePrint,500)},showPrintOne:function(){window.open(window.encodeURI("http://lhtprint.xiaoerd.icu?mailMap="+this.jsonMap),"_blank")},closePrint:function(){this.visiblePrint=!1},closePrintOne:function(){this.visiblePrintOne=!1},printMail:function(){window.open(window.encodeURI("http://apiprint.xiaoerd.icu?mailMap="+this.jsonMap),"_blank")},formatDate:function(e){return m(e)},returnBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.returnBook({orderId:e});case 2:0===n.sent.code&&(t.$message.success("还书成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderInfo({orderId:e});case 2:0===(r=n.sent).code&&(4===r.order.orderType&&2===r.order.orderStatus?t.judge=!0:4!==r.order.orderType||13!==r.order.orderStatus&&12!==r.order.orderStatus?4===r.order.orderType&&11===r.order.orderStatus&&(t.judgeTwo=!0):t.judgeOne=!0,t.order=r.order,t.jsonMap=r.mailMap,null!==r.order.orderLogistics&&(t.logisticsName=r.order.orderLogistics.logisticsName,t.logisticsNum=r.order.orderLogistics.logisticsNum,null!==t.logisticsNum&&""!==t.logisticsNum&&t.getSimpleInfo(t.logisticsNum)));case 4:case"end":return n.stop()}},n,t)}))()},getSimpleInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.mailSimpleInfo({mailNo:e});case 2:0===(r=n.sent).code&&(t.list=r.list);case 4:case"end":return n.stop()}},n,t)}))()},handleOk:function(){var e=this;this.visible=!1,this.form.validateFields(function(t,n){n.orderId=e.passData.id,void 0!==n.logisticsName&&""!==n.logisticsName?"快递单号"!==n.logisticsName||void 0!==n.courierNum&&""!==n.courierNum?t||("德邦"===n.logisticsName?(console.log(n),e.productNums(e.passData.id,n)):(e.sendGoods(n),e.judge=!1)):e.$message.warn("请填写物流单号"):e.$message.warn("请选择物流公司")})},productNums:function(e,t){var n=this;return f()(u.a.mark(function r(){var a;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.productNums({id:e});case 2:0===(a=r.sent).code?"true"===a.productNums.result?(t.courierNum=a.productNums.mailNo,t.arrivedOrgSimpleName=a.productNums.arrivedOrgSimpleName,n.sendGoods(t),n.judge=!1,window.open(window.encodeURI("http://apiprint.xiaoerd.icu?mailMap="+a.mailMap),"_blank")):n.$message.warn("发货失败"):n.$message.warn("服务异常");case 4:case"end":return r.stop()}},r,n)}))()},handlePrint:function(){this.visiblePrint=!1},handlePrintOne:function(){this.visiblePrintOne=!1},sendGoods:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.sendGoods(e);case 2:0===n.sent.code&&(t.$message.success("发货成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","order")}}},dn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"orderDetail"},[n("p",{staticClass:"back"},[null!==e.order.orderShipment&&1!==e.order.distributionType?n("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.showPrint}},[e._v("打印")]):e._e(),e._v(" "),null!==e.order.orderShipment&&1!==e.order.distributionType&&-1!==e.permissions.indexOf("order:specialPrint")?n("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.showPrintOne}},[e._v("面单打印")]):e._e(),e._v(" "),null!==e.order.orderShipment&&1!==e.order.distributionType&&3===e.order.orderStatus&&-1!==e.permissions.indexOf("order:orderPrint")?n("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.printMail}},[e._v("打印物流单")]):e._e(),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单金额: "+e._s(e.order.totalAmount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s(0===e.order.orderStatus?"已取消":2===e.order.orderStatus?"待发货":3===e.order.orderStatus?"待收货":11===e.order.orderStatus?"预借中":12===e.order.orderStatus?"借阅中":13===e.order.orderStatus?"预归还":5===e.order.orderStatus?"待评价":6===e.order.orderStatus?"已完成":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("配送方式: "+e._s(0===e.order.distributionType?"外送":1===e.order.distributionType?"自提":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.formatDate(e.order.createTime)))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}}),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("备注: "+e._s(e.order.remark))])],1)],1),e._v(" "),null!==e.order.orderLogistics&&1!==e.order.distributionType?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("送货信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("送货方: "+e._s(e.logisticsName))]),e._v(" "),null!==e.logisticsNum&&""!==e.logisticsNum.trim()?n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("快递单号: "+e._s(e.logisticsNum))]):e._e()],1),e._v(" "),e.list.length>0?n("a-table",{attrs:{columns:e.columnsOne,dataSource:e.list,align:"center",rowKey:function(e,t){return t},pagination:!1},scopedSlots:e._u([{key:"time",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,4122465384)}):e._e()],1):e._e(),e._v(" "),null!==e.order.orderShipment&&1!==e.order.distributionType?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("收货人信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货地址: "+e._s(e.order.orderShipment.provinceName+e.order.orderShipment.cityName+e.order.orderShipment.districtName+e.order.orderShipment.address))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("联系人: "+e._s(e.order.orderShipment.contacts))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("联系电话: "+e._s(e.order.orderShipment.mobile))])],1)],1):e._e(),e._v(" "),null!==e.order.evaluation?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("客户评价")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("满意度: "+e._s(e.order.evaluation.star))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("评价内容: "+e._s(e.order.evaluation.content))])],1)],1):e._e(),e._v(" "),n("div",[n("h2",{staticClass:"mytitle"},[e._v("订单商品")]),e._v(" "),n("a-modal",{attrs:{title:"信息",centered:"",okText:"确定",cancelText:"取消",width:"400px"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"快递公司:","label-col":{span:5},"wrapper-col":{span:4}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["logisticsName"],expression:"['logisticsName']"}],staticStyle:{width:"120px"},attrs:{placeholder:"快递公司"},on:{change:e.changeWay}},[n("a-select-option",{attrs:{value:"德邦"}},[e._v("德邦")]),e._v(" "),n("a-select-option",{attrs:{value:"商家配送"}},[e._v("商家配送")]),e._v(" "),n("a-select-option",{attrs:{value:"快递单号"}},[e._v("快递单号")])],1)],1),e._v(" "),e.visibleWay?n("a-form-item",{attrs:{label:"快递单号:","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["courierNum",{required:!0,rules:[{message:"快递单号!"}]}],expression:"['courierNum', { required: true,rules: [{ message: '快递单号!' }] }]"}],attrs:{placeholder:"快递单号"}})],1):e._e()],1)],1),e._v(" "),n("a-modal",{attrs:{title:"还书确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定还书？")])]),e._v(" "),n("a-table",{attrs:{columns:e.bookColumns,dataSource:e.order.orderBookList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"nameShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.bookName}},[e._v("\n          "+e._s(r.bookName)+"\n        ")])}},{key:"borrowNum",fn:function(t){return n("span",{},[e._v(e._s(null!=t?t:1))])}}])}),e._v(" "),n("p",{staticStyle:{"padding-top":"20px"}},[e.judgeTwo?n("a-button",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认订单")]):e._e(),e._v(" "),e.judgeOne?n("a-button",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.showReturn}},[e._v("确认归还")]):e._e(),e._v(" "),e.judge?n("a-button",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.showModal}},[e._v("发货")]):e._e()],1)],1),e._v(" "),n("a-modal",{attrs:{centered:"",width:"800px",footer:null},on:{ok:e.handlePrint},model:{value:e.visiblePrint,callback:function(t){e.visiblePrint=t},expression:"visiblePrint"}},[n("h2",{attrs:{align:"center"}},[e._v("借阅发货清单")]),e._v(" "),null!==e.order.orderShipment&&1!==e.order.distributionType?n("a-row",{staticClass:"print",attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:12}},[e._v("收货人名称: "+e._s(e.order.orderShipment.contacts))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:12}},[e._v("收货人电话: "+e._s(e.order.orderShipment.mobile))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:12}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:12}},[e._v("打印日期: "+e._s(e.formatDate(new Date)))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货地址: "+e._s(e.order.orderShipment.provinceName+e.order.orderShipment.cityName+e.order.orderShipment.districtName+e.order.orderShipment.address))])],1):e._e(),e._v(" "),n("a-table",{attrs:{columns:e.printColumns,dataSource:e.order.orderBookList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"borrowNum",fn:function(t){return n("span",{},[e._v(e._s(null!=t?t:1))])}},{key:"unit",fn:function(t){return n("span",{},[e._v(e._s(1===t?"本":2===t?"册":""))])}}])})],1),e._v(" "),n("a-modal",{attrs:{centered:"",width:"75mm",footer:null},on:{ok:e.handlePrintOne},model:{value:e.visiblePrintOne,callback:function(t){e.visiblePrintOne=t},expression:"visiblePrintOne"}},[n("h2",{attrs:{align:"center"}},[e._v("借阅发货清单")]),e._v(" "),null!==e.order.orderShipment&&1!==e.order.distributionType?n("a-row",{staticClass:"print",attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货人名称: "+e._s(e.order.orderShipment.contacts))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货人电话: "+e._s(e.order.orderShipment.mobile))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("打印日期: "+e._s(e.formatDate(new Date)))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货地址: "+e._s(e.order.orderShipment.provinceName+e.order.orderShipment.cityName+e.order.orderShipment.districtName+e.order.orderShipment.address))])],1):e._e(),e._v(" "),n("p"),e._v(" "),n("a-table",{attrs:{columns:e.printColumnsOne,dataSource:e.order.orderBookList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"valueShow",fn:function(t,r){return n("div",{style:{maxWidth:"30mm",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.bookName}},[e._v("\n          "+e._s(r.bookName)+"\n        ")])}},{key:"borrowNum",fn:function(t){return n("span",{},[e._v(e._s(null!=t?t:1))])}}])})],1)],1)},staticRenderFns:[]};var fn=n("VU/8")(un,dn,!1,function(e){n("mEII")},"data-v-973539b6",null).exports,mn=[{title:"商品图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName",scopedSlots:{customRender:"nameShow"}},{title:"货号",dataIndex:"goodsNum"},{title:"规格",dataIndex:"spec"},{title:"购买数量",dataIndex:"buyNum"},{title:"价格",dataIndex:"specPrice"},{title:"换购",dataIndex:"swapName"},{title:"实际",dataIndex:"price"}],pn=[{title:"图书图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"借阅数量",dataIndex:"borrowNum"},{title:"价格",dataIndex:"price"}],hn=[{title:"城市",dataIndex:"acceptAddress"},{title:"描述",dataIndex:"remark"},{title:"时间",dataIndex:"acceptTime",scopedSlots:{customRender:"acceptTime"}}],vn=[{title:"城市",dataIndex:"city"},{title:"描述",dataIndex:"description"},{title:"部门",dataIndex:"site"},{title:"时间",dataIndex:"time",scopedSlots:{customRender:"time"}}],gn={name:"shopOrderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),judge:!1,visibleWay:!0,list:[],listOne:[],mailMap:{},order:{couponEntity:null,evaluation:null,orderShipment:null,orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,orderGoodsList:[],orderBookList:[],remark:null},logisticsName:null,logisticsNum:null,visible:!1,visibleOne:!1,columns:mn,bookColumns:pn,columnsOne:hn,columnsTwo:vn,remarkVisible:!1,remark:null}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{handleRemark:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.businessRemark({id:Number(e.passData.id),businessRemark:e.order.businessRemark});case 2:0===t.sent.code&&(e.$message.success("备注成功"),e.remarkVisible=!1,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},businessRemark:function(){this.remarkVisible=!0},changeWay:function(e){this.visibleWay="商家配送"!==e},showReturn:function(){this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1,this.returnBook(this.passData.id)},showModal:function(){2===this.order.orderStatus&&1===this.order.orderType?this.visible=!0:this.$message.warn("无法发货")},formatDate:function(e){return m(e)},returnBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.returnBook({orderId:e});case 2:0===n.sent.code&&(t.$message.success("还书成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderInfo({orderId:e});case 2:0===(r=n.sent).code&&(1===r.order.orderType&&2===r.order.orderStatus?t.judge=!0:4===r.order.orderType&&(t.judge=!1),t.order=r.order,null!==r.order.orderLogistics&&(t.logisticsName=r.order.orderLogistics.logisticsName,t.logisticsNum=r.order.orderLogistics.logisticsNum,null!==t.logisticsNum&&""!==t.logisticsNum&&"顺丰"===r.order.orderLogistics.logisticsName?t.getSimpleInfo(e):null===t.logisticsNum||""===t.logisticsNum||"申通"!==r.order.orderLogistics.logisticsName&&"圆通"!==r.order.orderLogistics.logisticsName?null!==t.logisticsNum&&""!==t.logisticsNum&&t.getMailInfo(t.logisticsNum):t.getbirdInfo(e)));case 4:case"end":return n.stop()}},n,t)}))()},getSimpleInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.sfInfo({orderId:e});case 2:0===(r=n.sent).code&&(t.list=r.list);case 4:case"end":return n.stop()}},n,t)}))()},getbirdInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.birdInfo({orderId:e});case 2:0===(r=n.sent).code&&(t.listOne=r.list);case 4:case"end":return n.stop()}},n,t)}))()},getMailInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.mailSimpleInfo({mailNo:e});case 2:0===(r=n.sent).code&&(t.listOne=r.list);case 4:case"end":return n.stop()}},n,t)}))()},handleOk:function(){var e=this;this.visible=!1,this.form.validateFields(function(t,n){n.orderId=e.passData.id,void 0!==n.logisticsName&&""!==n.logisticsName?"商家配送"===n.logisticsName||void 0!==n.courierNum&&""!==n.courierNum?t||(e.sendGoods(n),e.judge=!1):e.$message.warn("请填写物流单号"):e.$message.warn("请选择物流公司")})},productNums:function(e,t){var n=this;return f()(u.a.mark(function r(){var a;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.productNums({id:e});case 2:0===(a=r.sent).code?"true"===a.productNums.result?(t.courierNum=a.productNums.mailNo,n.mailMap=a.mailMap,n.sendGoods(t),n.judge=!1):n.$message.warn("发货失败"):n.$message.warn("服务异常");case 4:case"end":return r.stop()}},r,n)}))()},sendGoods:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.sendGoods(e);case 2:0===n.sent.code&&(t.$message.success("发货成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","shopOrder")}}},bn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shopOrderDetail"},[n("p",{staticClass:"back"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单金额: "+e._s(e.order.totalAmount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s(0===e.order.orderStatus?"已取消":1===e.order.orderStatus?"待付款":2===e.order.orderStatus?"待发货":3===e.order.orderStatus?"待收货":5===e.order.orderStatus?"待评价":6===e.order.orderStatus?"已完成":7===e.order.orderStatus?"退款中":8===e.order.orderStatus?"退款完成":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("配送方式: "+e._s(0===e.order.distributionType?"外送":1===e.order.distributionType?"自提":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("优惠券: "+e._s(null===e.order.couponEntity?"无":e.order.couponEntity.title))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("使用积分: "+e._s(null===e.order.scores?"0":e.order.scores))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.formatDate(e.order.createTime)))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("备注: "+e._s(e.order.remark))])],1)],1),e._v(" "),null!==e.order.orderLogistics?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("送货信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("送货方: "+e._s(e.logisticsName))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("快递单号: "+e._s(e.logisticsNum))])],1)],1):e._e(),e._v(" "),e.list.length>0?n("a-table",{attrs:{columns:e.columnsOne,dataSource:e.list,align:"center",rowKey:function(e,t){return t},pagination:!1},scopedSlots:e._u([{key:"time",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,4122465384)}):e._e(),e._v(" "),e.listOne.length>0?n("a-table",{attrs:{columns:e.columnsTwo,dataSource:e.listOne,align:"center",rowKey:function(e,t){return t},pagination:!1},scopedSlots:e._u([{key:"time",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,4122465384)}):e._e(),e._v(" "),null!==e.order.orderShipment?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("收货人信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("收货地址: "+e._s(e.order.orderShipment.provinceName+e.order.orderShipment.cityName+e.order.orderShipment.districtName+e.order.orderShipment.address))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("联系人: "+e._s(e.order.orderShipment.contacts))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("联系电话: "+e._s(e.order.orderShipment.mobile))])],1)],1):e._e(),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("商家备注")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("\n        "+e._s(e.order.businessRemark)+"\n      ")])],1)],1),e._v(" "),null!==e.order.evaluation?n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("客户评价")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("满意度: "+e._s(e.order.evaluation.star))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("评价内容: "+e._s(e.order.evaluation.content))])],1)],1):e._e(),e._v(" "),n("div",[n("h2",{staticClass:"mytitle"},[e._v("订单商品")]),e._v(" "),n("a-modal",{attrs:{title:"信息",centered:"",okText:"确定",cancelText:"取消",width:"400px"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"快递公司:","label-col":{span:5},"wrapper-col":{span:4}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["logisticsName"],expression:"['logisticsName']"}],staticStyle:{width:"120px"},attrs:{placeholder:"快递公司"},on:{change:e.changeWay}},[n("a-select-option",{attrs:{value:"德邦"}},[e._v("德邦")]),e._v(" "),n("a-select-option",{attrs:{value:"顺丰"}},[e._v("顺丰")]),e._v(" "),n("a-select-option",{attrs:{value:"申通"}},[e._v("申通")]),e._v(" "),n("a-select-option",{attrs:{value:"圆通"}},[e._v("圆通")]),e._v(" "),n("a-select-option",{attrs:{value:"商家配送"}},[e._v("商家配送")])],1)],1),e._v(" "),e.visibleWay?n("a-form-item",{attrs:{label:"快递单号:","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["courierNum",{required:!0,rules:[{message:"快递单号!"}]}],expression:"['courierNum', { required: true,rules: [{ message: '快递单号!' }] }]"}],attrs:{placeholder:"快递单号"}})],1):e._e()],1)],1),e._v(" "),n("a-modal",{attrs:{title:"还书确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定还书？")])]),e._v(" "),n("a-modal",{attrs:{title:"商家备注",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleRemark},model:{value:e.remarkVisible,callback:function(t){e.remarkVisible=t},expression:"remarkVisible"}},[n("a-textarea",{model:{value:e.order.businessRemark,callback:function(t){e.$set(e.order,"businessRemark",t)},expression:"order.businessRemark"}})],1),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.order.orderGoodsList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"nameShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.goodsName}},[e._v("\n        "+e._s(r.goodsName)+"\n      ")])}}])}),e._v(" "),n("p",{staticStyle:{"padding-top":"20px"}},[e.judge?n("a-button",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.showModal}},[e._v("发货")]):e._e(),e._v(" "),n("a-button",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.businessRemark}},[e._v("商家备注")])],1)],1)],1)},staticRenderFns:[]};var yn=n("VU/8")(gn,bn,!1,function(e){n("+342")},"data-v-7b052c03",null).exports,wn=[{title:"标题",dataIndex:"title"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],xn="",kn={name:"paper",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,title:null,status:null,data:[],columns:wn}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){xn=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.title=this.title,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===xn||0===xn.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(xn)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},paperAdd:function(){this.bus.$emit("goToPage","paperAdd")},paperUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","paperEdit"),this.bus.$emit("passData",t)},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),xn="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.paperList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},_n={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"paper"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("停用")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.paperAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"启用":"停用"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.paperUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Sn=n("VU/8")(kn,_n,!1,function(e){n("bnzc")},"data-v-ff2346b4",null).exports,Cn=[{title:"题目标题",dataIndex:"questionTitle"},{dataIndex:"questionType",width:100,scopedSlots:{customRender:"questionType"}}],Nn="",Tn={name:"paperAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],columns:Cn,status:1}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Nn=t}}}},methods:{changeStatus:function(e){},add:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","paper");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&""!==n.title?""!==Nn&&0!==Nn.length?(n.questionList=Nn,e||t.add(n)):t.$message.warn("题目不能为空"):t.$message.warn("标题不能为空")})},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.questionList({});case 2:0===(n=t.sent).code&&(e.data=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","paper")}}},Dn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"paperAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{message:"标题!"}]}],expression:"['title', { rules: [{  message: '标题!' }] }]"}],attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.status}],expression:"['status', { initialValue: status }]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("停用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"questionType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"单选":"问答"))])}}])})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var In=n("VU/8")(Tn,Dn,!1,function(e){n("e4ce")},"data-v-f5cc1562",null).exports,Mn=[{title:"题目标题",dataIndex:"questionTitle"},{dataIndex:"questionType",width:100,scopedSlots:{customRender:"questionType"}}],On="",An="",Ln={name:"paperEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{questionList:[],title:null,status:null},selectedRowKeys:[],data1:[],columns:Mn}},props:{passData:Object},created:function(){this.getInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){var e=this;return{onChange:function(t,n){On=t,An=n,e.selectedRowKeys=On},selectedRowKeys:e.selectedRowKeys}}},methods:{changeStatus:function(e){},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperInfo({id:e});case 2:r=n.sent,t.data=r.paper,a=[],t.data.questionList.forEach(function(e){a.push(e.id)}),t.selectedRowKeys=a,An=t.data.questionList,On=a;case 9:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0!==n.title&&""!==n.title?""!==An&&0!==An.length?(n.questionList=An,e||t.updatePaper(n)):t.$message.warn("题目不能为空"):t.$message.warn("标题不能为空")})},updatePaper:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","paper");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.questionList({});case 2:0===(n=t.sent).code&&(e.data1=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","paper")}}},En={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"paperEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{message:"标题!"}],initialValue:e.data.title}],expression:"['title', { rules: [{  message: '标题!' }],initialValue: data.title }]"}],attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', { initialValue: data.status }]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("停用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data1,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"questionType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"单选":"问答"))])}}])})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var zn=n("VU/8")(Ln,En,!1,function(e){n("ygc2")},"data-v-4fd728e6",null).exports,Rn=[{title:"活动封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"活动人数",dataIndex:"totalNumber"},{title:"价格",dataIndex:"price"},{title:"已报名人数",dataIndex:"joinNumber",key:"id",scopedSlots:{customRender:"joinNumber"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Vn=[{title:"人员头像",dataIndex:"member.avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"手机号",dataIndex:"member.mobile"}],Bn="",$n={name:"activity",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,visibleOne:!1,data:[],data1:[],title:null,status:null,columns:Rn,columns1:Vn}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Bn=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.title=this.title,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.selectByConditions(r)},showModalOne:function(){""===Bn||0===Bn.length?this.$message.error("至少选择一条进行删除"):this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1,this.delete(Bn)},showModal:function(e){this.activityData(e),this.visible=!0},handleOk:function(e){this.visible=!1},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,t.status=n.status,t.pagination.current=1,e||t.selectByConditions(n)})},activityAdd:function(){this.bus.$emit("goToPage","activityAdd")},activityUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","activityEdit"),this.bus.$emit("passData",t)},activityData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityJoinList({activityId:e});case 2:0===(r=n.sent).code&&(t.data1=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},selectByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.activityList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Bn="");case 4:case"end":return n.stop()}},n,t)}))()}}},Un={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activity"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:"1"}},[e._v("报名中")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("已结束")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.activityAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModalOne}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"已报名人员",centered:"",okText:"确认",cancelText:"取消",width:"850px"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-table",{attrs:{columns:e.columns1,dataSource:e.data1,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}}])})],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",align:"center",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"200px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"报名中":"已结束"))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"joinNumber",fn:function(t,r){return n("a",{on:{click:function(t){return e.showModal(r.id)}}},[e._v(e._s(t))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.activityUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Pn=n("VU/8")($n,Un,!1,function(e){n("Z9DA")},"data-v-a05eadd6",null).exports;var Fn={name:"activityAdd",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,data:{imgUrl:null,picUrl:null,status:1,content:null}}},created:function(){},methods:{onChange:function(e,t){},onOk:function(e){},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},changeStatus:function(e){},getContent:function(e){this.data.content=e},addActivity:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","activity");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.data.imgUrl,n.content=t.data.content,null!==n.picUrl?void 0!==n.title&&""!==n.title?void 0!==n.beginTime?void 0!==n.endTime?void 0!==n.totalNumber&&""!==n.totalNumber?void 0!==n.address&&""!==n.address?void 0!==n.price&&""!==n.price?e||t.addActivity(n):t.$message.warn("价格不能为空"):t.$message.warn("活动地址不能为空"):t.$message.warn("活动人数不能为空"):t.$message.warn("结束时间不能为空"):t.$message.warn("开始时间不能为空"):t.$message.warn("标题不能为空"):t.$message.warn("图片不能为空")})},goToBack:function(){this.bus.$emit("goToPage","activity")}}},Hn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activityAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{required:!0,rules:[{message:"标题!"}]}],expression:"['title', {required: true, rules: [{  message: '标题!' }] }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["beginTime"],expression:"['beginTime']"}],attrs:{showTime:"",placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"结束时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"['endTime']"}],attrs:{showTime:"",placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动人数","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["totalNumber",{required:!0,rules:[{message:"活动人数!"}]}],expression:"['totalNumber', { required: true,rules: [{ message: '活动人数!' }] }]"}],attrs:{placeholder:"请输入活动人数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动地址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"活动地址!"}]}],expression:"['address', { required: true,rules: [{ message: '活动地址!' }] }]"}],attrs:{placeholder:"请输入活动地址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{required:!0}],expression:"['price', { required: true }]"}],attrs:{placeholder:"请输入价格"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("活动中")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("已结束")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"活动内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var jn=n("VU/8")(Fn,Hn,!1,function(e){n("WgLl")},"data-v-353c1fb5",null).exports;var qn={name:"activityEdit",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},dateFormat:"YYYY-MM-DD hh:mm:ss",form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,data:{title:null,totalNumber:null,picUrl:null,imgUrl:null,recommend:null,beginTime:null,endTime:null,status:null,address:null,price:null,content:null},loading:!1,richTextData:"",moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityInfo({id:e});case 2:r=n.sent,t.data=r.activity,a=new Date(r.activity.beginTime),o=new Date(r.activity.endTime),t.data.beginTime=a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),t.data.endTime=o.getFullYear()+"-"+(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),t.data.imgUrl=r.activity.picUrl,t.richTextData=r.activity.content;case 10:case"end":return n.stop()}},n,t)}))()},onChange:function(e,t){this.data.beginTime=e},onOk:function(e){},onChangeOne:function(e,t){this.data.endTime=e},onOkOne:function(e){},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},changeStatus:function(e){},getContent:function(e){this.data.content=e},EditActivity:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.activityEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","activity");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.data.imgUrl,n.content=t.data.content,n.beginTime=t.data.beginTime,n.endTime=t.data.endTime,n.Id=t.passData.id,""!==n.title?""!==n.totalNumber?""!==n.address?""!==n.price?e||t.EditActivity(n):t.$message.warn("价格不能为空"):t.$message.warn("活动地址不能为空"):t.$message.warn("活动人数不能为空"):t.$message.warn("标题不能为空")})},goToBack:function(){this.bus.$emit("goToPage","activity")}}},Wn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activityEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.data.title}],expression:"['title', { initialValue: data.title}]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{attrs:{showTime:"",placeholder:"选择开始时间",format:e.dateFormat,value:e.moment(e.data.beginTime,e.dateFormat)},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"结束时间","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{attrs:{showTime:"",placeholder:"选择开始时间",format:e.dateFormat,value:e.moment(e.data.endTime,e.dateFormat)},on:{change:e.onChangeOne,ok:e.onOkOne}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动人数","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["totalNumber",{initialValue:e.data.totalNumber}],expression:"['totalNumber', { initialValue: data.totalNumber}]"}],attrs:{placeholder:"请输入活动人数"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动地址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"活动地址!"}],initialValue:e.data.address}],expression:"['address', { required: true,rules: [{ message: '活动地址!' }],initialValue: data.address }]"}],attrs:{placeholder:"请输入活动地址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{required:!0,initialValue:e.data.price}],expression:"['price', { required: true,initialValue: data.price }]"}],attrs:{placeholder:"请输入价格"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', {initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("报名中")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("已结束")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"活动内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{attrs:{richTextData:e.richTextData},on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Yn=n("VU/8")(qn,Wn,!1,function(e){n("MZqU")},"data-v-7866bed4",null).exports,Gn=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"订单类型",dataIndex:"orderType",scopedSlots:{customRender:"orderType"}},{title:"订单状态",dataIndex:"orderStatus",scopedSlots:{customRender:"orderStatus"}},{title:"金额",dataIndex:"totalAmount",customRender:function(e){return e.toFixed(2)}},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],Kn=null,Qn="",Xn={name:"activityOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},downLoadOrder:null,orderNum:null,nickName:null,realName:null,mobile:null,orderStatus:null,orderType:5,visible:!1,visibleOne:!1,startTime:null,endTime:null,locale:Ke,columns:Gn}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Kn=t,Qn=e}}}},methods:{exportOrder:function(){var e=this;this.form.validateFields(function(t,n){void 0!==n.orderNum&&null!==n.orderNum&&""!==n.orderNum.trim()||(n.orderNum=""),void 0!==n.nickName&&null!==n.nickName&&""!==n.nickName.trim()||(n.nickName=""),void 0!==n.realName&&null!==n.realName&&""!==n.realName.trim()||(n.realName=""),void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()||(n.mobile=""),n.orderStatus=e.orderStatus,null===n.orderStatus&&(n.orderStatus=-1),n.startTime=e.startTime,null===n.startTime&&(n.startTime=""),n.endTime=e.endTime,null===n.endTime&&(n.endTime=""),n.orderType=e.orderType,n.ids=Qn,t||(e.downLoadOrder="https://api.xiaoerd.icu/order/exportExcel?token="+sessionStorage.getItem("token")+"&orderNum="+n.orderNum+"&nickName="+n.nickName+"&realName="+n.realName+"&mobile="+n.mobile+"&orderStatus="+n.orderStatus+"&startTime="+n.startTime+"&endTime="+n.endTime+"&orderType="+n.orderType+"&ids="+n.ids)})},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},cancelOrder:function(){if(null===Kn||Kn.length>1)this.$message.error("必须选择一条数据");else{if(1!==Kn[0].orderStatus)return this.$message.error("当前订单不可以取消"),!1;this.cancel(Kn[0].id)}},cancel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("取消订单成功"),t.tableData(),Kn=null);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){""===Qn||0===Qn.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showModalOne:function(){if(null===Kn||Kn.length>1)this.$message.error("必须选择一条数据");else{if(7!==Kn[0].orderStatus)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},handleOk:function(){this.visible=!1,this.deleteOrder(Qn)},handleOkOne:function(){this.visibleOne=!1,this.refund(Kn[0].id)},deleteOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Qn="");case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.refundOrder({id:e});case 2:0===n.sent.code&&(t.$message.success("退款成功"),t.tableData(),Kn=null);case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.orderStatus=this.orderStatus,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,r.orderType=this.orderType,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.orderStatus=t.orderStatus,n.orderType=t.orderType,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.orderStatus=null,this.tableData()):(this.orderStatus=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList({orderStatus:e,orderType:t.orderType});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},orderDetail:function(e){var t={id:e};this.bus.$emit("goToPage","activityOrderDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.orderList({orderType:e.orderType,orderStatus:e.orderStatus});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},Jn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activityOrder"},[n("a-tabs",{attrs:{defaultActiveKey:"99"},on:{change:e.callback}},[n("a-tab-pane",{key:"-1",attrs:{tab:"所有"}}),e._v(" "),n("a-tab-pane",{key:"1",attrs:{tab:"未付款"}}),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"已报名"}}),e._v(" "),n("a-tab-pane",{key:"7",attrs:{tab:"退款中"}}),e._v(" "),n("a-tab-pane",{key:"8",attrs:{tab:"已退款"}})],1),e._v(" "),n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportOrder}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadOrder}},[e._v(" 导出")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"orderStatus",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#f50":2===t?"#87d068":7===t?"#108ee9":8===t?"#2db7f5":0===t?"#2db7f5":""}},[e._v(e._s(1===t?"未付款":2===t?"已报名":7===t?"退款中":8===t?"已退款":0===t?"已取消":""))])}},{key:"orderType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":3===t?"#87d068":4===t?"#2db7f5":5===t?"#2db7f5":""}},[e._v(e._s(1===t?"商品":2===t?"充值":3===t?"会员卡":4===t?"图书":5===t?"活动":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.orderDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var Zn=n("VU/8")(Xn,Jn,!1,function(e){n("XJiJ")},"data-v-ad844456",null).exports,er=[{title:"人员头像",dataIndex:"avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"nickName"},{title:"姓名",dataIndex:"realName"},{title:"手机号",dataIndex:"mobile"}],tr=[{title:"活动封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"活动人数",dataIndex:"totalNumber"},{title:"价格",dataIndex:"price"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],nr={name:"activityOrderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),order:{orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,remark:null},data:[],data1:[],columns:er,columns1:tr}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{formatDate:function(e){return m(e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderInfo({orderId:e});case 2:0===(r=n.sent).code&&(t.order=r.order,t.data.push(r.order.member),null!==r.order.orderActivity.activity&&t.data1.push(r.order.orderActivity.activity),console.log(t.data1),console.log(t.data1.length));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","activityOrder")}}},rr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"activityOrderDetail"},[n("p",{staticClass:"back"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单金额: "+e._s(e.order.totalAmount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s(0===e.order.orderStatus?"已取消":1===e.order.orderStatus?"待付款":2===e.order.orderStatus?"已报名":7===e.order.orderStatus?"退款中":8===e.order.orderStatus?"已退款":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.formatDate(e.order.createTime)))])],1)],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("人员信息")]),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}}])})],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("活动信息")]),e._v(" "),0!==e.data1.length?n("a-table",{attrs:{columns:e.columns1,dataSource:e.data1,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"200px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"报名中":"已结束"))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,1734707910)}):n("p",[e._v("活动已删除")])],1)])},staticRenderFns:[]};var ar=n("VU/8")(nr,rr,!1,function(e){n("DDoT")},"data-v-5d55a0d8",null).exports,or=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"分类名称",dataIndex:"categoryName"},{title:"排序",dataIndex:"sort"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],ir="",sr={name:"goodsCategory",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,picUrl:"",data:[],permissions:localStorage.permissions,columns:or}},created:function(){-1!==this.permissions.indexOf("goods:category:update")&&3===or.length&&or.push({title:"操作",width:180,scopedSlots:{customRender:"action"}}),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ir=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===ir||0===ir.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(ir)},formatDate:function(e){return m(e)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},categoryAdd:function(){this.bus.$emit("goToPage","goodsCategoryAdd")},categoryUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","goodsCategoryEdit"),this.bus.$emit("passData",t)},addAttr:function(e){var t={id:e};this.bus.$emit("goToPage","categoryAttr"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCategoryList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCategoryDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ir="");case 4:case"end":return n.stop()}},n,t)}))()}}},cr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsCategory"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[-1!==e.permissions.indexOf("goods:category:save")?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.categoryAdd}},[e._v("新增")])],1):e._e(),e._v(" "),-1!==e.permissions.indexOf("goods:category:delete")?n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1):e._e()],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px",height:"40px"}})}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.categoryUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var lr=n("VU/8")(sr,cr,!1,function(e){n("RejN")},"data-v-65abcb71",null).exports;var ur={name:"goodsCategoryAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),loading:!1,picUrl:"",imgUrl:"",uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token}},created:function(){},methods:{handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},addGoodsCategory:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCategoryAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","goodsCategory");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.imgUrl,""!==t.imgUrl?void 0!==n.categoryName&&""!==n.categoryName?void 0!==n.sort&&""!==n.sort?e||t.addGoodsCategory(n):t.$message.warn("排序不能为空"):t.$message.warn("分类名称不能为空"):t.$message.warn("图片不能为空")})},goToBack:function(){this.bus.$emit("goToPage","goodsCategory")}}},dr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsCategoryAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}},model:{value:e.picUrl,callback:function(t){e.picUrl=t},expression:"picUrl"}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.picUrl?n("img",{attrs:{src:e.picUrl,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"分类名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryName",{rules:[{message:"分类名称!"}]}],expression:"['categoryName', { rules: [{  message: '分类名称!' }] }]"}],attrs:{placeholder:"请输入分类名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{message:"排序!"}]}],expression:"['sort', { rules: [{  message: '排序!' }] }]"}],attrs:{placeholder:"请输入分排序"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var fr=n("VU/8")(ur,dr,!1,function(e){n("aCbb")},"data-v-2e129fe9",null).exports;var mr={name:"goodsCategoryEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),loading:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,data:{picUrl:null,categoryName:null,sort:null},imgUrl:""}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCategoryInfo({categoryId:e});case 2:r=n.sent,t.data=r.category,t.imgUrl=r.category.picUrl;case 5:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},updateGoodsCategory:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCategoryEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","goodsCategory");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.picUrl=t.imgUrl,""!==t.imgUrl?""!==n.categoryName?""!==n.sort?e||t.updateGoodsCategory(n):t.$message.warn("排序不能为空"):t.$message.warn("卡名称不能为空"):t.$message.warn("图片不能为空")})},goToBack:function(){this.bus.$emit("goToPage","goodsCategory")}}},pr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsCategoryEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"分类名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryName",{rules:[{message:"分类名称!"}],initialValue:e.data.categoryName}],expression:"['categoryName', { rules: [{  message: '分类名称!' }], initialValue: data.categoryName}]"}],attrs:{placeholder:"请输入分类名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.data.sort}],expression:"['sort', {initialValue: data.sort}]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var hr=n("VU/8")(mr,pr,!1,function(e){n("ZHUV")},"data-v-7902ab25",null).exports,vr=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"分类",dataIndex:"category.categoryName"},{title:"价格",dataIndex:"price",customRender:function(e){return e.toFixed(2)}},{title:"折扣价格",dataIndex:"discountPrice",customRender:function(e){if(null!==e)return e.toFixed(2)}},{title:"库存",dataIndex:"stock"},{title:"销量",dataIndex:"saleNum"},{title:"上架状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],gr="",br={name:"goods",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,visibleOne:!1,saleNum:0,data:[],permissions:localStorage.permissions,categoryList:[],goodsName:null,categoryId:null,status:null,columns:vr}},created:function(){-1!==this.permissions.indexOf("goods:update")&&9===vr.length&&vr.push({title:"操作",width:180,scopedSlots:{customRender:"action"}}),this.tableData(),this.getCategory()},computed:{rowSelection:function(){return{onChange:function(e,t){gr=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===gr||0===gr.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},editSaleNum:function(){""===gr||0===gr.length?this.$message.error("至少选择一件商品进行修改"):this.visibleOne=!0},handleOk:function(){this.visible=!1,this.delete(gr)},handleOkOne:function(){this.visibleOne=!1;var e={};e.ids=gr,e.saleNum=this.saleNum,this.updateSaleNum(e)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},selectChange:function(e){},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},goodsAdd:function(){this.bus.$emit("goToPage","goodsAdd")},goodsUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","goodsEdit"),this.bus.$emit("passData",t)},goodsUpper:function(){""===gr||0===gr.length?this.$message.error("至少选择一条数据"):this.upper(gr)},goodsLower:function(){""===gr||0===gr.length?this.$message.error("至少选择一条数据"):this.lower(gr)},upper:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsUpper(e);case 2:0===n.sent.code&&(t.$message.success("上架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},lower:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsLower(e);case 2:0===n.sent.code&&(t.$message.success("下架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},goodsRecommend:function(){""===gr||0===gr.length?this.$message.error("至少选择一条数据"):this.recommend(gr)},goodsCancelRecommend:function(){""===gr||0===gr.length?this.$message.error("至少选择一条数据"):this.cancelRecommend(gr)},recommend:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsRecommend(e);case 2:0===n.sent.code&&(t.$message.success("推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},cancelRecommend:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsCancelRecommend(e);case 2:0===n.sent.code&&(t.$message.success("取消推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},updateSaleNum:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsEditSaleNum(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),(r={}).page=t.pagination.current,t.searchByConditions(r),t.saleNum=0);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.data.forEach(function(e){var t=0;e.specList.length>0&&(e.specList[0].children.forEach(function(e){t+=e.stock}),e.stock=t)}),e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),gr="");case 4:case"end":return n.stop()}},n,t)}))()}}},yr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goods"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId"],expression:"['categoryId']"}],staticStyle:{width:"200px"},attrs:{placeholder:"分类",allowClear:!0},on:{change:e.selectChange}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:"1"}},[e._v("上架")]),e._v(" "),n("a-select-option",{attrs:{value:"0"}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),-1!==e.permissions.indexOf("goods:save")?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.goodsAdd}},[e._v("新增")])],1):e._e(),e._v(" "),-1!==e.permissions.indexOf("goods:delete")?n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1):e._e(),e._v(" "),-1!==e.permissions.indexOf("goods:update")?n("div",{staticStyle:{display:"inline-block"}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"up"},on:{click:e.goodsUpper}},[e._v("上架")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"down"},on:{click:e.goodsLower}},[e._v("下架")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"up"},on:{click:e.goodsRecommend}},[e._v("推荐")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"down"},on:{click:e.goodsCancelRecommend}},[e._v("取消推荐")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"edit"},on:{click:e.editSaleNum}},[e._v("修改销量")])],1)],1):e._e()],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"确认修改销量",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",{staticStyle:{"text-align":"center"}},[n("span",{staticStyle:{display:"inline-block"}},[e._v("销量：")]),e._v(" "),n("a-input-number",{staticStyle:{width:"200px"},attrs:{placeholeder:"请输入销量"},model:{value:e.saleNum,callback:function(t){e.saleNum=t},expression:"saleNum"}})],1)]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px",height:"80px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"category",fn:function(t){return n("span",{},[e._v(e._s(t.categoryName))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.goodsUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var wr=n("VU/8")(br,yr,!1,function(e){n("6Y/t")},"data-v-2588d0fc",null).exports;function xr(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var kr={name:"goodsAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",combobox2:"combobox",allowClear:!0,maxTagCount:1,maxTagCount2:1,headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/750x750?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,videlUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,fileList:[],previewVisible:!1,previewImage:"",replaceFields:{children:"children",title:"label",key:"id"},data:{imgUrl:"",picUrl:"",describe:"",status:1,recommend:1},onOff:!0,categoryList:[],listOne:[],showList:[],tags:[],specArr:[],fareList:[],selectList:[],index:0,index2:0,stock:null,attributeArr:[],s:{maxHeight:"400px",overflow:"auto","z-index":1e8},brandList:[],playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,attrSelect:null,loading:!1,attrInput:!1}},created:function(){this.getSpecList(),this.getCategory(),this.brandAllList(),this.fareAllList(),this.getAttrList()},methods:{editors:function(e){this.content=e},checkSame:function(e,t){console.log(e)},removeVideo:function(){this.playerOptions.sources[0].src=null,this.showV=!1},addStock:function(){var e=this;this.stock=0,this.specArr.forEach(function(t){var n=t.stock,r=e.form.getFieldValue(n);e.stock+=parseInt(r),console.log(r)})},checkStock:function(e,t,n){new RegExp("^\\+?[1-9]\\d*$").test(t)||n(new Error("库存为大于0的整数")),n()},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!0,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!1},chooseChild:function(e,t){var n=this;this.selectList.forEach(function(r){console.log(r),r.specName===e&&(n.specArr[t].childArr=r.children)}),this.specArr[t].attrInput=!1},chooseChild2:function(e,t){var n=this;this.attrSelect.forEach(function(r){r.attrName===e&&(n.attributeArr[t].childArr=r.children)})},removeSpec:function(e){this.specArr.splice(e,1)},addSpec:function(){var e={pid:"pid"+this.index,cid:"cid"+this.index,price:"price"+this.index,pidInitValue:null,cidInitValue:null,priceInitValue:null,stock:"stock"+this.index,num:"num"+this.index,attrValue:"attrValue"+this.index,attrInput:!1,specValue:"specValue"+this.index};this.specArr.push(e),this.index=this.index+1,console.log(this.specArr)},removeAttribute:function(e){this.attributeArr.splice(e,1)},addAttribute:function(){var e={pid:"ppid"+this.index2,cid:"ccid"+this.index2,attrName:"attrName"+this.index2,attrVal:"attrVal"+this.index2};this.attributeArr.push(e),this.index2=this.index2+1},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},getSpecList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.specList({});case 2:0===(n=t.sent).code&&(e.selectList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getAttrList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.shopAttrList({});case 2:0===(n=t.sent).code&&(e.attrSelect=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}));case 4:case"end":return t.stop()}},t,e)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,xr(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},handleChange2:function(e,t){var n,r,a,o=this;"uploading"!==e.file.status?"done"===e.file.status&&(n=e.file.originFileObj,r=function(e){o.specArr[t].picUrl=e,o.loading=!1},(a=new FileReader).addEventListener("load",function(){return r(a.result)}),a.readAsDataURL(n),this.specArr[t].imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},changeStatus:function(e){},getContent:function(e){this.data.describe=e},addGoods:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","goods");case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(0!==t.fileList.length){var r=[],a=!0;t.specArr.forEach(function(e){var o=e.pid,i=e.cid,s=e.price,c=e.stock,l=e.num,u=e.attrValue,d=e.specValue;if(void 0===n[l]||""===n[l])return t.$message.warn("货号不能为空"),a=!1,!1;if(void 0===n[d]||""===n[d])return t.$message.warn("商品规格不能为空"),a=!1,!1;if(void 0===n[u]||""===n[u])return t.$message.warn("规格属性不能为空"),a=!1,!1;if(void 0===n[s]||""===n[s])return t.$message.warn("规格价格不能为空"),a=!1,!1;if(void 0===n[c]||""===n[c])return t.$message.warn("库存不能为空"),a=!1,!1;if(n.stock<0)return t.$message.warn("库存不能负数"),a=!1,!1;var f={pid:n[o],cid:n[i],price:n[s],picUrl:e.imgUrl,stock:n[c],num:n[l],attrValue:n[u],specValue:n[d]};r.push(f)}),n.specArr=r;var o=[],i=!0;if(t.attributeArr.forEach(function(e){var r=e.attrName,a=e.attrVal;if(void 0===n[r]||""===n[r])return t.$message.warn("商品属性名称不能为空"),i=!1,!1;if(void 0===n[a]||""===n[a])return t.$message.warn("商品属性值不能为空"),i=!1,!1;var s={attrName:n[r],attrValue:n[a]};o.push(s)}),!a)return!1;if(!i)return!1;n.attrArr=o;var s=[];t.fileList.forEach(function(e){s.push(e.response.url)}),n.picUrls=s,n.picUrl=s[0],void 0!==n.goodsName&&""!==n.goodsName?void 0!==n.categoryId&&""!==n.categoryId?void 0!==n.price&&""!==n.price?(n.tags=t.tags,n.videoUrl=t.playerOptions.sources[0].src,n.describe=t.content,e||t.addGoods(n)):t.$message.warn("价格不能为空"):t.$message.warn("分类不能为空"):t.$message.warn("商品名称不能为空")}else t.$message.warn("图片不能为空")})},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},fareAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.fareAllList();case 2:0===(n=t.sent).code&&(e.fareList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","goods")}}},_r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("span",[e._v("宽高 750px X 750px")]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.videlUploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"商品名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName",{rules:[{message:"商品名称!"}]}],expression:"['goodsName', { rules: [{  message: '商品名称!' }] }]"}],attrs:{placeholeder:"请输入商品名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"搜索关键字","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["keyword",{rules:[{message:"搜索关键字!"}]}],expression:"['keyword', { rules: [{  message: '搜索关键字!' }] }]"}],attrs:{placeholeder:"请输入搜索关键字"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"上架状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("上架")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"品牌","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brand.id"],expression:"['brand.id']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId"],expression:"['categoryId']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{message:"价格!"}]}],expression:"['price', { rules: [{  message: '价格!' }] }]"}],attrs:{placeholeder:"请输入价格"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"折扣价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discountPrice",{rules:[{message:"折扣价格!"}]}],expression:"['discountPrice', { rules: [{  message: '折扣价格!' }] }]"}],attrs:{placeholeder:"请输入折扣价格"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"重量(KG)","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{rules:[{message:"重量!"}]}],expression:"['weight', { rules: [{  message: '重量!' }] }]"}],attrs:{placeholeder:"请输入重量"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"运费模板","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fareId"],expression:"['fareId']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"}},e._l(e.fareList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"库存","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock",{rules:[{validator:this.checkStock}],initialValue:e.stock}],expression:"['stock', { rules: [{validator: this.checkStock}], initialValue: stock }]"}],attrs:{placeholeder:"请输入库存"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"商品规格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.addSpec}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),e._l(e.specArr,function(t,r){return n("a-row",{key:r,staticStyle:{"margin-top":"5px"},attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.num],expression:"[k.num]"}],attrs:{placeholder:"货号"}})],1),e._v(" "),n("a-col",{attrs:{span:5}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.specValue],expression:"[k.specValue]"}],attrs:{"dropdown-style":e.s,allowClear:e.allowClear,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请选择规格"},on:{change:function(t){return e.chooseChild(t,r)}}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.specName,attrs:{value:t.specName}},[e._v(e._s(t.specName))])}),1)],1),e._v(" "),n("a-col",{attrs:{span:5}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrValue],expression:"[k.attrValue]"}],attrs:{"dropdown-style":e.s,allowClear:e.allowClear,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请选择属性"},on:{change:e.checkSame}},e._l(t.childArr,function(t){return n("a-select-option",{key:t.specName,attrs:{value:t.specName}},[e._v("\n                "+e._s(t.specName)+"\n              ")])}),1)],1),e._v(" "),n("a-col",{attrs:{span:3}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.price],expression:"[k.price]"}],attrs:{placeholder:"金额"}})],1),e._v(" "),n("a-col",{attrs:{span:3}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.stock],expression:"[k.stock]"}],attrs:{placeholder:"库存"},on:{input:e.addStock}})],1),e._v(" "),n("a-col",{attrs:{span:2}},[n("a-button",{on:{click:function(t){return e.removeSpec(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:function(t){return e.handleChange2(t,r)}}},[t.picUrl?n("img",{staticStyle:{width:"116px",height:"116px"},attrs:{src:t.picUrl,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 100px X 100px")])],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{label:"商品属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.addAttribute}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("br"),e._v(" "),e._l(e.attributeArr,function(t,r){return n("a-row",{key:r,staticStyle:{"margin-top":"5px"},attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrName],expression:"[k.attrName]"}],attrs:{"dropdown-style":e.s,allowClear:e.allowClear,mode:e.combobox2,maxTagCount:e.maxTagCount2,placeholder:"属性名"},on:{change:function(t){return e.chooseChild2(t,r)}}},e._l(e.attrSelect,function(t){return n("a-select-option",{key:t.attrName,attrs:{value:t.attrName}},[e._v(e._s(t.attrName))])}),1)],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrVal],expression:"[k.attrVal]"}],attrs:{"dropdown-style":e.s,allowClear:e.allowClear,mode:e.combobox2,maxTagCount:e.maxTagCount2,placeholder:"属性值"}},e._l(t.childArr,function(t){return n("a-select-option",{key:t.attrName,attrs:{value:t.attrName}},[e._v(e._s(t.attrName))])}),1)],1),e._v(" "),n("a-button",{on:{click:function(t){return e.removeAttribute(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{label:"佣金比例","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission"],expression:"['commission']"}],attrs:{min:1,placeholeder:"请输入商品佣金比例"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择商品标签",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1)],1)},staticRenderFns:[]};var Sr=n("VU/8")(kr,_r,!1,function(e){n("Qd5c")},"data-v-46598e87",null).exports,Cr=n("kCXt"),Nr=n("a55b");function Tr(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var Dr={name:"goodsEdit",components:{ACol:Nr.b,ARow:Cr.a,RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",maxTagCount:1,headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/750x750?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,videlUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,fileList:[],previewVisible:!1,previewImage:"",replaceFields:{children:"children",title:"label",key:"id"},data:{picUrl:null,categoryId:null,goodsName:null,status:null,recommend:null,stock:null,describe:null,commission:null,price:null},richTextData:"",onOff:!0,categoryList:[],listOne:[],showList:[],tags:[],specArr:[],fareList:[],index:0,index2:0,selectList:[],seleIndex:null,childArr:[],isInit:!0,isChange:!1,stock:0,firstVal:null,s:{maxHeight:"400px",overflow:"auto","z-index":1e8},brandList:[],attributeArr:[],playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,loading:!1,attrSelect:null,attrInput:!1}},props:{passData:Object},created:function(){this.getCategory(),this.brandAllList(),this.fareAllList(),this.getAttrList(),this.getInfo(this.passData.id)},methods:{editors:function(e){this.content=e},checkSame:function(e,t){-1===e&&(this.specArr[t].attrInput=!0)},removeVideo:function(){this.playerOptions.sources[0].src=null,this.showV=!1},addStock:function(){var e=this;this.stock=0,this.specArr.forEach(function(t){var n=t.stock,r=e.form.getFieldValue(n);e.stock+=parseInt(r),console.log(r)})},handleChange2:function(e,t){var n,r,a,o=this;"uploading"!==e.file.status?"done"===e.file.status&&(n=e.file.originFileObj,r=function(e){o.specArr[t].picUrl=e,o.loading=!1},(a=new FileReader).addEventListener("load",function(){return r(a.result)}),a.readAsDataURL(n),this.specArr[t].imgUrl=e.file.response.url):this.loading=!0},checkStock:function(e,t,n){new RegExp("^\\+?[1-9]\\d*$").test(t)||n(new Error("库存为大于0的整数")),n()},fareAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.fareAllList();case 2:0===(n=t.sent).code&&(e.fareList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!0,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!1},chooseChild:function(e,t){var n=this;this.selectList.forEach(function(r){r.specName===e&&(n.specArr[t].childArr=r.children)}),this.specArr[t].attrInput=!1},chooseChild2:function(e,t){var n=this;this.attrSelect.forEach(function(r){r.attrName===e&&(n.attributeArr[t].childArr=r.children)})},removeSpec:function(e){this.specArr.splice(e,1)},addSpec:function(){var e={pid:"pid"+this.index,cid:"cid"+this.index,price:"price"+this.index,pidInitValue:null,cidInitValue:null,priceInitValue:null,stock:"stock"+this.index,stockInitValue:null,num:"num"+this.index,numInitValue:null,attrValue:"attrValue"+this.index,attrInput:!1,specValue:"specValue"+this.index};this.specArr.push(e),this.index=this.index+1,console.log(this.specArr)},removeAttribute:function(e){this.attributeArr.splice(e,1)},addAttribute:function(){var e={pid:"ppid"+this.index2,cid:"cpid"+this.index2,attrName:"attrName"+this.index2,attrVal:"attrVal"+this.index2};this.attributeArr.push(e),this.index2=this.index2+1},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}),e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getAttrList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.shopAttrList({});case 2:0===(n=t.sent).code&&(e.attrSelect=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsInfo({goodsId:e});case 2:return r=n.sent,n.next=5,t.$Http.specList({});case 5:0===(a=n.sent).code&&(t.selectList=a.data),t.data=r.goods,null!=t.data.videoUrl&&""!==t.data.videoUrl&&(t.showV=!0,t.playerOptions.sources[0].src=t.data.videoUrl),t.data.specList.forEach(function(e){e.children.forEach(function(n){var r="pid"+t.index,a="cid"+t.index,o="price"+t.index,i="stock"+t.index,s="num"+t.index,c="attrValue"+t.index,l="specValue"+t.index,u=e.pid,d=n.cid,f=n.price,m=n.stock,p=n.num,h=n.attrValue,v=n.specValue,g=n.id;t.stock+=m;var b=n.picUrl,y=n.picUrl,w=[];t.selectList.forEach(function(e){e.specName===v&&(w=e.children)});var x={pid:r,cid:a,price:o,pidInitValue:u,cidInitValue:d,priceInitValue:f,childArr:w,picUrl:b,imgUrl:y,stock:i,specId:g,stockInitValue:m,num:s,numInitValue:p,attrValue:c,attrValueInitValue:h,specValue:l,specValueInitValue:v};t.specArr.push(x),t.index=t.index+1})}),t.data.attrList.forEach(function(e){e.children.forEach(function(n){var r="ppid"+t.index2,a="ccid"+t.index2,o="attrName"+t.index2,i="attrVal"+t.index2,s=e.pid,c=n.cid,l=n.attrName,u=n.attrValue,d=[];t.attrSelect.forEach(function(e){e.attrName===s&&(d=e.children)});var f={pid:r,cid:a,pidInitValue:s,cidInitValue:c,childArr:d,attrVal:i,attrValueInitValue:u,attrName:o,attrNameInitValue:l};t.attributeArr.push(f),t.index2=t.index2+1})}),t.content=r.goods.describe,t.tags=r.goods.tags,t.showList=t.tags,r.goods.picUrls.forEach(function(e,n){t.fileList.push({uid:n,name:"image",status:"done",url:e})});case 15:case"end":return n.stop()}},n,t)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,Tr(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},changeStatus:function(e){},getContent:function(e){this.data.describe=e},updateGoods:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","goods");case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.Id=t.passData.id,n.describe=t.content;var r=[],a=!0;t.specArr.forEach(function(e){var o=e.pid,i=e.cid,s=e.price,c=e.stock,l=e.num,u=e.attrValue,d=e.specValue;if(void 0===n[l]||""===n[l])return t.$message.warn("货号不能为空"),a=!1,!1;if(void 0===n[d]||""===n[d])return t.$message.warn("商品规格不能为空"),a=!1,!1;if(void 0===n[u]||""===n[u])return t.$message.warn("规格属性不能为空"),a=!1,!1;if(void 0===n[s]||""===n[s])return t.$message.warn("规格价格不能为空"),a=!1,!1;if(void 0===n[c]||""===n[c])return t.$message.warn("库存不能为空"),a=!1,!1;if(null!==e.specId){var f={specId:e.specId,pid:n[o],cid:n[i],price:n[s],picUrl:e.imgUrl,stock:n[c],num:n[l],attrValue:n[u],specValue:n[d]};r.push(f)}else{var m={pid:n[o],cid:n[i],price:n[s],picUrl:e.imgUrl,stock:n[c],num:n[l],attrValue:n[u],specValue:n[d]};r.push(m)}}),n.specArr=r;var o=[],i=!0;if(t.attributeArr.forEach(function(e){var r=e.attrName,a=e.attrVal;if(void 0===n[r]||""===n[r])return t.$message.warn("商品属性名称不能为空"),i=!1,!1;if(void 0===n[a]||""===n[a])return t.$message.warn("商品属性值不能为空"),i=!1,!1;var s={attrName:n[r],attrValue:n[a]};o.push(s)}),!a)return!1;if(!i)return!1;if(n.attrArr=o,0!==t.fileList.length){var s=[];t.fileList.forEach(function(e){void 0===e.response?s.push(e.url):s.push(e.response.url)}),n.picUrls=s,n.picUrl=s[0],void 0!==n.goodsName&&""!==n.goodsName?void 0!==n.categoryId&&""!==n.categoryId?void 0!==n.price&&""!==n.price?(n.tags=t.tags,n.videoUrl=t.playerOptions.sources[0].src,e||t.updateGoods(n)):t.$message.warn("价格不能为空"):t.$message.warn("分类不能为空"):t.$message.warn("商品名称不能为空")}else t.$message.warn("图片不能为空")})},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","goods")},specList:function(e){var t=this;return f()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.specList({});case 2:0===(n=e.sent).code&&(t.selectList=n.data);case 4:case"end":return e.stop()}},e,t)}))()}}},Ir={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("span",[e._v("宽高 750px X 750px")]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.videlUploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"商品名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName",{rules:[{message:"商品名称!"}],initialValue:e.data.goodsName}],expression:"['goodsName', { rules: [{  message: '商品名称!' }], initialValue: data.goodsName}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"搜索关键词","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["keyword",{rules:[{message:"搜索关键词!"}],initialValue:e.data.keyword}],expression:"['keyword', { rules: [{  message: '搜索关键词!' }], initialValue: data.keyword}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"上架状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', {initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("上架")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("下架")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"品牌","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brand.id",{initialValue:null==e.data.brand?void 0:e.data.brand.id}],expression:"['brand.id', {initialValue: data.brand==null?undefined:data.brand.id}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId",{initialValue:e.data.categoryId}],expression:"['categoryId', {initialValue: data.categoryId}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:e.data.price}],expression:"['price', {initialValue: data.price}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"折扣价格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discountPrice",{initialValue:e.data.discountPrice}],expression:"['discountPrice', {initialValue: data.discountPrice}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"重量(KG)","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight",{initialValue:e.data.weight}],expression:"['weight', { initialValue: data.weight }]"}],attrs:{placeholeder:"请输入重量"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"运费模板","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fareId",{initialValue:e.data.fareId}],expression:"['fareId',{initialValue: data.fareId}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择分类"}},e._l(e.fareList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"库存","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stock",{rules:[{validator:this.checkStock}],initialValue:e.stock}],expression:"['stock', { rules: [{validator: this.checkStock}], initialValue: stock }]"}],attrs:{placeholeder:"请输入库存"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"商品规格","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.addSpec}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("br"),e._v(" "),e._l(e.specArr,function(t,r){return n("a-row",{key:r,staticStyle:{"margin-top":"5px"},attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.num,{initialValue:null==t.numInitValue?void 0:t.numInitValue}],expression:"[k.num, {initialValue: k.numInitValue  == null ? undefined : k.numInitValue}]"}],attrs:{placeholder:"货号"}})],1),e._v(" "),n("a-col",{attrs:{span:5}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.specValue,{rule:[{message:"规格属性"}],initialValue:null==t.specValueInitValue?void 0:t.specValueInitValue}],expression:"[k.specValue, {rule: [{message: '规格属性'}],initialValue: k.specValueInitValue  == null ? undefined : k.specValueInitValue}]"}],attrs:{"dropdown-style":e.s,allowClear:!0,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请选择规格"},on:{change:function(t){return e.chooseChild(t,r)}}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.specName,attrs:{value:t.specName}},[e._v(e._s(t.specName))])}),1)],1),e._v(" "),n("a-col",{attrs:{span:5}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrValue,{rule:[{message:"规格属性"}],initialValue:null==t.attrValueInitValue?void 0:t.attrValueInitValue}],expression:"[k.attrValue, {rule: [{message: '规格属性'}],initialValue: k.attrValueInitValue  == null ? undefined : k.attrValueInitValue}]"}],attrs:{"dropdown-style":e.s,allowClear:!0,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请选择属性"}},e._l(t.childArr,function(t){return n("a-select-option",{key:t.specName,attrs:{value:t.specName}},[e._v("\n                "+e._s(t.specName)+"\n              ")])}),1)],1),e._v(" "),n("a-col",{attrs:{span:3}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.price,{rule:[{message:"规格价格"}],initialValue:null==t.priceInitValue?void 0:t.priceInitValue}],expression:"[k.price, {rule: [{message: '规格价格'}],initialValue: k.priceInitValue  == null ? undefined : k.priceInitValue}]"}],attrs:{placeholder:"金额"}})],1),e._v(" "),n("a-col",{attrs:{span:3}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.stock,{rule:[{message:"库存"}],initialValue:null==t.stockInitValue?void 0:t.stockInitValue}],expression:"[k.stock, {rule: [{message: '库存'}],initialValue: k.stockInitValue  == null ? undefined : k.stockInitValue}]"}],attrs:{placeholder:"库存"},on:{input:e.addStock}})],1),e._v(" "),n("a-col",{attrs:{span:2}},[n("a-button",{on:{click:function(t){return e.removeSpec(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:function(t){return e.handleChange2(t,r)}}},[t.picUrl?n("img",{staticStyle:{width:"116px",height:"116px"},attrs:{src:t.picUrl,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 100px X 100px")])],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{label:"商品属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.addAttribute}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("br"),e._v(" "),e._l(e.attributeArr,function(t,r){return n("a-row",{key:r,staticStyle:{"margin-top":"5px"},attrs:{gutter:24}},[n("a-col",{attrs:{span:6}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrName,{rule:[{message:"属性名"}],initialValue:t.attrNameInitValue}],expression:"[k.attrName, {rule: [{message: '属性名'}],initialValue: k.attrNameInitValue}]"}],attrs:{"dropdown-style":e.s,allowClear:!0,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请输入属性名"},on:{change:function(t){return e.chooseChild2(t,r)}}},e._l(e.attrSelect,function(t){return n("a-select-option",{key:t.attrName,attrs:{value:t.attrName}},[e._v(e._s(t.attrName))])}),1)],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.attrVal,{rule:[{message:"属性值"}],initialValue:t.attrValueInitValue}],expression:"[k.attrVal, {rule: [{message: '属性值'}],initialValue: k.attrValueInitValue}]"}],attrs:{"dropdown-style":e.s,allowClear:!0,mode:"combobox",maxTagCount:e.maxTagCount,placeholder:"请选择属性"}},e._l(t.childArr,function(t){return n("a-select-option",{key:t.attrName,attrs:{value:t.attrName}},[e._v(e._s(t.attrName))])}),1)],1),e._v(" "),n("a-button",{on:{click:function(t){return e.removeAttribute(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{label:"佣金比例","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission",{initialValue:e.data.commission}],expression:"['commission', {initialValue: data.commission}]"}],attrs:{min:1,placeholeder:"请输入商品佣金比例"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择商品标签",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1)],1)},staticRenderFns:[]};var Mr=n("VU/8")(Dr,Ir,!1,function(e){n("aFIn")},"data-v-76a39061",null).exports,Or=[{title:"logo",dataIndex:"logo",scopedSlots:{customRender:"logo"}},{title:"店铺名称",dataIndex:"storeName"},{title:"联系电话",dataIndex:"phone"},{title:"地址",dataIndex:"address"},{title:"店铺类型",dataIndex:"storeType",align:"center",scopedSlots:{customRender:"storeType"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Ar="",Lr={name:"store",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,storeName:null,pagination:{total:0,current:1},data:[],columns:Or}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ar=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.storeName=this.storeName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Ar||0===Ar.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.storeDelete(Ar)},storeDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ar="");case 4:case"end":return n.stop()}},n,t)}))()},storeEdit:function(e){var t={id:e};this.bus.$emit("goToPage","storeEdit"),this.bus.$emit("passData",t)},storeAdd:function(){this.bus.$emit("goToPage","storeAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.storeName&&null!==n.storeName&&(n.storeName=n.storeName.trim()),t.storeName=n.storeName,t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.listStore(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listStore({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Er={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"store"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeName"],expression:"['storeName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"店铺名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.storeAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"logo",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"storeType",fn:function(t){return n("span",{},[e._v(e._s(1===t?"租赁":2===t?"零售":3===t?"美业":4===t?"教育":5===t?"餐饮":6===t?"官网":99===t?"管理":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.storeEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var zr=n("VU/8")(Lr,Er,!1,function(e){n("981K")},"data-v-7620b455",null).exports;var Rr={name:"storeAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/100x100?token="+sessionStorage.token,loading:!1,tenantList:[],data:{status:1,imgUrl:null,logo:null}}},created:function(){this.getTenant()},methods:{getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.logo=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.logo=t.data.imgUrl,void 0!==n.storeType&&""!==n.storeType?void 0!==n.tenantId&&""!==n.tenantId?void 0!==n.storeName&&""!==n.storeName?void 0!==n.province&&""!==n.province.trim()?void 0!==n.city&&""!==n.city.trim()?void 0!==n.district&&""!==n.district.trim()?void 0!==n.address&&""!==n.address.trim()?e||t.addStore(n):t.$message.warn("地址不能为空"):t.$message.warn("区不能为空"):t.$message.warn("市不能为空"):t.$message.warn("省份不能为空"):t.$message.warn("店铺名称不能为空"):t.$message.warn("租户不能为空"):t.$message.warn("店铺类型不能为空")})},addStore:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","store");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","store")}}},Vr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"logo","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.logo?n("img",{attrs:{src:e.data.logo,alt:"avatar",width:"100px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeType"],expression:"['storeType']"}],staticStyle:{width:"200px"},attrs:{placeholder:"店铺类型"}},[n("a-select-option",{attrs:{value:1}},[e._v("租赁")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("零售")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("美业")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("教育")]),e._v(" "),n("a-select-option",{attrs:{value:5}},[e._v("餐饮")]),e._v(" "),n("a-select-option",{attrs:{value:6}},[e._v("官网")]),e._v(" "),n("a-select-option",{attrs:{value:99}},[e._v("管理")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeName",{required:!0,rules:[{message:"店铺名称!"}]}],expression:"['storeName', { required: true,rules: [{ message: '店铺名称!' }] }]"}],attrs:{placeholder:"店铺名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺简介","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["introduction",{required:!0,rules:[{message:"店铺简介!"}]}],expression:"['introduction', { required: true,rules: [{ message: '店铺简介!' }] }]"}],attrs:{placeholder:"店铺简介"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"租户","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantId"],expression:"['tenantId']"}],staticStyle:{width:"200px"},attrs:{placeholder:"请选择租户"}},e._l(e.tenantList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.tenantName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"公司编码","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyCode",{required:!0,rules:[{message:"公司编码!"}]}],expression:"['companyCode', { required: true,rules: [{ message: '公司编码!' }] }]"}],attrs:{placeholder:"公司编码"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"编码密钥","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appKey",{required:!0,rules:[{message:"联系电话!"}]}],expression:"['appKey', { required: true,rules: [{ message: '联系电话!' }] }]"}],attrs:{placeholder:"编码密钥"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"sign","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sign",{required:!0,rules:[{message:"sign!"}]}],expression:"['sign', { required: true,rules: [{ message: 'sign!' }] }]"}],attrs:{placeholder:"sign"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("营业中")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("已打烊")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"联系人","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ContactPerson",{required:!0,rules:[{message:"联系人!"}]}],expression:"['ContactPerson', { required: true,rules: [{ message: '联系人!' }] }]"}],attrs:{placeholder:"联系人"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"微信号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["wechatNumber",{required:!0,rules:[{message:"微信号!"}]}],expression:"['wechatNumber', { required: true,rules: [{ message: '微信号!' }] }]"}],attrs:{placeholder:"微信号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{required:!0,rules:[{message:"联系电话!"}]}],expression:"['phone', { required: true,rules: [{ message: '联系电话!' }] }]"}],attrs:{placeholder:"联系电话"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"省","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["province",{required:!0,rules:[{message:"所属省份!"}]}],expression:"['province', { required: true,rules: [{ message: '所属省份!' }] }]"}],attrs:{placeholder:"所属省份"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"市","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{required:!0,rules:[{message:"所属市!"}]}],expression:"['city', { required: true,rules: [{ message: '所属市!' }] }]"}],attrs:{placeholder:"所属市"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"区","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["district",{required:!0,rules:[{message:"所属区域!"}]}],expression:"['district', { required: true,rules: [{ message: '所属区域!' }] }]"}],attrs:{placeholder:"所属区域"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"地址","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"地址!"}]}],expression:"['address', { required: true,rules: [{ message: '地址!' }] }]"}],attrs:{placeholder:"地址"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Br=n("VU/8")(Rr,Vr,!1,function(e){n("+PdG")},"data-v-34e4d91e",null).exports;var $r={name:"storeEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/100x100?token="+sessionStorage.token,loading:!1,tenantList:[],data:{imgUrl:null,logo:null,storeName:null,tenantId:null,status:null,phone:null,wechatNumber:null,address:null,companyCode:null,appKey:null,storeType:null,province:null,city:null,district:null,sign:null}}},props:{passData:Object},created:function(){this.getTenant()},methods:{getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeInfo({id:e});case 2:r=n.sent,t.data=r.sysStore,t.data.imgUrl=r.sysStore.logo;case 5:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.logo=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.logo=t.data.imgUrl,void 0!==n.storeType&&""!==n.storeType?void 0!==n.tenantId&&""!==n.tenantId?void 0!==n.storeName&&""!==n.storeName?void 0!==n.province&&""!==n.province.trim()?void 0!==n.city&&""!==n.city.trim()?void 0!==n.district&&""!==n.district.trim()?void 0!==n.address&&""!==n.address.trim()?e||t.editStore(n):t.$message.warn("地址不能为空"):t.$message.warn("区不能为空"):t.$message.warn("市不能为空"):t.$message.warn("省份不能为空"):t.$message.warn("店铺名称不能为空"):t.$message.warn("租户不能为空"):t.$message.warn("店铺类型不能为空")})},editStore:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","store");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","store")}}},Ur={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"logo","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.logo?n("img",{attrs:{src:e.data.logo,alt:"avatar",width:"100px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeType",{initialValue:e.data.storeType}],expression:"['storeType',{initialValue: data.storeType}]"}],staticStyle:{width:"200px"},attrs:{placeholder:"店铺类型"}},[n("a-select-option",{attrs:{value:1}},[e._v("租赁")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("零售")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("美业")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("教育")]),e._v(" "),n("a-select-option",{attrs:{value:5}},[e._v("餐饮")]),e._v(" "),n("a-select-option",{attrs:{value:6}},[e._v("官网")]),e._v(" "),n("a-select-option",{attrs:{value:99}},[e._v("管理")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeName",{required:!0,rules:[{message:"店铺名称!"}],initialValue:e.data.storeName}],expression:"['storeName', { required: true,rules: [{ message: '店铺名称!' }],initialValue: data.storeName }]"}],attrs:{placeholder:"店铺名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺简介","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["introduction",{required:!0,rules:[{message:"店铺简介!"}],initialValue:e.data.introduction}],expression:"['introduction', { required: true,rules: [{ message: '店铺简介!' }],initialValue: data.introduction }]"}],attrs:{placeholder:"店铺简介"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"租户","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantId",{initialValue:e.data.tenantId}],expression:"['tenantId',{initialValue: data.tenantId}]"}],staticStyle:{width:"200px"},attrs:{placeholder:"请选择租户"}},e._l(e.tenantList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.tenantName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"公司编码","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyCode",{required:!0,initialValue:e.data.companyCode}],expression:"['companyCode', { required: true, initialValue: data.companyCode}]"}],attrs:{placeholder:"公司编码"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"编码密钥","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appKey",{required:!0,initialValue:e.data.appKey}],expression:"['appKey', { required: true, initialValue: data.appKey}]"}],attrs:{placeholder:"编码密钥"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"sign","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sign",{required:!0,initialValue:e.data.sign}],expression:"['sign', { required: true, initialValue: data.sign}]"}],attrs:{placeholder:"sign"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("营业中")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("已打烊")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"微信号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["wechatNumber",{required:!0,rules:[{message:"联系电话!"}],initialValue:e.data.wechatNumber}],expression:"['wechatNumber', { required: true,rules: [{ message: '联系电话!' }],initialValue: data.wechatNumber }]"}],attrs:{placeholder:"微信号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{required:!0,rules:[{message:"联系电话!"}],initialValue:e.data.phone}],expression:"['phone', { required: true,rules: [{ message: '联系电话!' }],initialValue: data.phone }]"}],attrs:{placeholder:"联系电话"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"省","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["province",{required:!0,rules:[{message:"所属省份!"}],initialValue:e.data.province}],expression:"['province', { required: true,rules: [{ message: '所属省份!' }],initialValue: data.province }]"}],attrs:{placeholder:"所属省份"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"市","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["city",{required:!0,rules:[{message:"所属市!"}],initialValue:e.data.city}],expression:"['city', { required: true,rules: [{ message: '所属市!' }],initialValue: data.city }]"}],attrs:{placeholder:"所属市"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"区","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["district",{required:!0,rules:[{message:"所属区域!"}],initialValue:e.data.district}],expression:"['district', { required: true,rules: [{ message: '所属区域!' }],initialValue: data.district }]"}],attrs:{placeholder:"所属区域"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"地址","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"地址!"}],initialValue:e.data.address}],expression:"['address', { required: true,rules: [{ message: '地址!' }],initialValue: data.address }]"}],attrs:{placeholder:"地址"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Pr=n("VU/8")($r,Ur,!1,function(e){n("AHki")},"data-v-d43338cc",null).exports;var Fr={name:"storeSetting",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/100x100?token="+sessionStorage.token,loading:!1,tenantList:[],data:{imgUrl:null,logo:null,storeName:null,tenantId:null,status:null,phone:null,wechatNumber:null,address:null,storeType:null}}},props:{passData:Object},created:function(){this.getInfo(-1)},methods:{getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.tenantList({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeInfo({id:e});case 2:r=n.sent,t.data=r.sysStore,t.data.imgUrl=r.sysStore.logo;case 5:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.logo=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=-1,n.logo=t.data.imgUrl,void 0!==n.storeName&&""!==n.storeName?void 0!==n.phone&&""!==n.phone?void 0!==n.address&&""!==n.address?e||t.editStore(n):t.$message.warn("地址不能为空"):t.$message.warn("电话不能为空"):t.$message.warn("店铺名称不能为空")})},editStore:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeEdit(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","store")}}},Hr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"logo","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.logo?n("img",{attrs:{src:e.data.logo,alt:"avatar",width:"100px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"店铺名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeName",{required:!0,rules:[{message:"店铺名称!"}],initialValue:e.data.storeName}],expression:"['storeName', { required: true,rules: [{ message: '店铺名称!' }],initialValue: data.storeName }]"}],attrs:{placeholder:"店铺名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"微信号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["wechatNumber",{required:!0,rules:[{message:"联系电话!"}],initialValue:e.data.wechatNumber}],expression:"['wechatNumber', { required: true,rules: [{ message: '联系电话!' }],initialValue: data.wechatNumber }]"}],attrs:{placeholder:"微信号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{required:!0,rules:[{message:"联系电话!"}],initialValue:e.data.phone}],expression:"['phone', { required: true,rules: [{ message: '联系电话!' }],initialValue: data.phone }]"}],attrs:{placeholder:"联系电话"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"地址","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"地址!"}],initialValue:e.data.address}],expression:"['address', { required: true,rules: [{ message: '地址!' }],initialValue: data.address }]"}],attrs:{placeholder:"地址"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var jr=n("VU/8")(Fr,Hr,!1,function(e){n("WjAO")},"data-v-1a7e62cb",null).exports,qr={name:"wechatSettingsEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{id:null,appid:null,secret:null,mchid:null,mchkey:null,pubAppid:null,pubSecret:null,url:null,payPoint:null}}},created:function(){this.getInfo(-1)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.wechatSettingsInfo({id:e});case 2:null!==(r=n.sent).wechatSettings&&(t.data=r.wechatSettings);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.data.id,console.log(n),e||(null!==n.id?t.editWechatSeetings(n):t.saveWechatSettings(n))})},saveWechatSettings:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.wechatSettingsSave(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()},editWechatSeetings:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.wechatSettingsEdit(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()}}},Wr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wechatSettingsEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"小程序ID","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["appid",{required:!0,rules:[{message:"小程序ID!"}],initialValue:e.data.appid}],expression:"['appid', { required: true,rules: [{ message: '小程序ID!' }],initialValue: data.appid }]"}],attrs:{placeholder:"小程序ID"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"小程序秘钥","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["secret",{required:!0,rules:[{message:"app秘钥!"}],initialValue:e.data.secret}],expression:"['secret', { required: true,rules: [{ message: 'app秘钥!' }],initialValue: data.secret }]"}],attrs:{placeholder:"小程序秘钥"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"公众号ID","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pubAppid",{required:!0,rules:[{message:"公众号ID!"}],initialValue:e.data.pubAppid}],expression:"['pubAppid', { required: true,rules: [{ message: '公众号ID!' }],initialValue: data.pubAppid }]"}],attrs:{placeholder:"公众号ID"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"公众号秘钥","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pubSecret",{required:!0,rules:[{message:"公众号秘钥!"}],initialValue:e.data.pubSecret}],expression:"['pubSecret', { required: true,rules: [{ message: '公众号秘钥!' }],initialValue: data.pubSecret }]"}],attrs:{placeholder:"公众号秘钥"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"商户号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mchid",{required:!0,rules:[{message:"商户号!"}],initialValue:e.data.mchid}],expression:"['mchid', { required: true,rules: [{ message: '商户号!' }],initialValue: data.mchid }]"}],attrs:{placeholder:"商户号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"商户密钥","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mchkey",{required:!0,rules:[{message:"商户密钥!"}],initialValue:e.data.mchkey}],expression:"['mchkey', { required: true,rules: [{ message: '商户密钥!' }],initialValue: data.mchkey }]"}],attrs:{placeholder:"商户密钥"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"API证书地址","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{required:!0,rules:[{message:"API证书地址!"}],initialValue:e.data.url}],expression:"['url', { required: true,rules: [{ message: 'API证书地址!' }],initialValue: data.url }]"}],attrs:{placeholder:"API证书地址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"支付分设置","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["payPoint",{required:!0,rules:[{message:"支付分设置!"}],initialValue:e.data.payPoint}],expression:"['payPoint', { required: true,rules: [{ message: '支付分设置!' }],initialValue: data.payPoint }]"}],attrs:{placeholder:"支付分设置"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var Yr=n("VU/8")(qr,Wr,!1,function(e){n("FaSy")},"data-v-142c1b28",null).exports,Gr=[{title:"模块",dataIndex:"appId",scopedSlots:{customRender:"appId"}},{title:"操作",key:"operation",scopedSlots:{customRender:"action"}}],Kr={name:"appMenu",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],columns:Gr}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){},onSelect:function(e,t,n){}}}},methods:{appMenuAdd:function(){this.bus.$emit("goToPage","appMenuAdd")},appMenuEdit:function(e){var t={appId:e};this.bus.$emit("goToPage","appMenuEdit"),this.bus.$emit("passData",t)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.appMenuList();case 2:0===(n=t.sent).code&&(e.data=n.rows);case 4:case"end":return t.stop()}},t,e)}))()}}},Qr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"appMenu"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}}),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"appId",pagination:!1},scopedSlots:e._u([{key:"appId",fn:function(t){return n("span",{},[e._v(e._s(1===t?"租赁":2===t?"零售":3===t?"美业":4===t?"教育":5===t?"餐饮":99===t?"管理":6===t?"官网":0===t?"系统管理员":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.appMenuEdit(r.appId)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Xr=n("VU/8")(Kr,Qr,!1,function(e){n("xeaZ")},"data-v-4d19f32c",null).exports,Jr={name:"appMenuAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{menuIdList:[]}}},created:function(){this.getMenuList()},methods:{onSelect:function(e,t){},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.menuList({});case 2:n=t.sent,e.menuList=e.translateData(n);case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.menuId){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t},addAppMenu:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.roleAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","appMenu");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,console.log(n)})},goToBack:function(){this.bus.$emit("goToPage","appMenu")}}},Zr={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"appMenuAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模块","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["appId"],expression:"['appId']"}],attrs:{placeholder:"选择模块"}},[n("a-select-option",{attrs:{value:1}},[e._v("租赁")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("零售")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("美业")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("教育")]),e._v(" "),n("a-select-option",{attrs:{value:5}},[e._v("餐饮")]),e._v(" "),n("a-select-option",{attrs:{value:99}},[e._v("人力资源")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"授权","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-tree",{attrs:{"show-line":"",checkable:"",treeData:e.menuList,replaceFields:e.replaceFields},on:{select:e.onSelect,check:e.onCheck}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ea=n("VU/8")(Jr,Zr,!1,function(e){n("w2Fb")},"data-v-3fedeeb8",null).exports,ta={name:"editMenuAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{appId:null,menuIdList:[]},menuIdList:[]}},props:{passData:Object},created:function(){this.data.appId=this.passData.appId,this.getMenuList()},methods:{onSelect:function(e,t){},onCheck:function(e,t){this.data.menuIdList=e,t.halfCheckedKeys.length>0?this.menuIdList=e.concat(t.halfCheckedKeys):this.menuIdList=e},getMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.menuList({});case 2:n=t.sent,e.menuList=e.translateData(n),e.getAppInfo(e.passData.appId);case 5:case"end":return t.stop()}},t,e)}))()},getAppInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.appMenuInfo({appId:e});case 2:r=n.sent,t.data.menuIdList=r.sysAppMenu.menuIdList,t.menuIdList=r.sysAppMenu.menuIdList,a=[],t.menuList.forEach(function(e){a.push(e.menuId)}),o=[],t.data.menuIdList.forEach(function(e){-1===a.indexOf(e)&&o.push(e)}),i=[],t.menuList.forEach(function(e){e.children.forEach(function(e){e.children&&i.push(e.menuId)})}),s=[],o.forEach(function(e){-1===i.indexOf(e)&&s.push(e)}),t.data.menuIdList=s;case 14:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.menuId){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t},editAppMenu:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.editAppMenu(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","appMenu");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.menuIdList,console.log(n),e||t.editAppMenu(n)})},goToBack:function(){this.bus.$emit("goToPage","appMenu")}}},na={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editMenuAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模块","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["appId",{initialValue:e.data.appId}],expression:"['appId',{initialValue: data.appId}]"}],attrs:{disabled:"",placeholder:"选择模块"}},[n("a-select-option",{attrs:{value:1}},[e._v("租赁")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("零售")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("美业")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("教育")]),e._v(" "),n("a-select-option",{attrs:{value:5}},[e._v("餐饮")]),e._v(" "),n("a-select-option",{attrs:{value:6}},[e._v("官网")]),e._v(" "),n("a-select-option",{attrs:{value:0}},[e._v("系统管理员")]),e._v(" "),n("a-select-option",{attrs:{value:99}},[e._v("管理")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"授权","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-tree",{attrs:{"show-line":"",checkable:"",treeData:e.menuList,checkedKeys:e.data.menuIdList,replaceFields:e.replaceFields},on:{select:e.onSelect,check:e.onCheck}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ra=n("VU/8")(ta,na,!1,function(e){n("X22y")},"data-v-79fdee25",null).exports,aa=[{title:"消息内容",dataIndex:"content"},{title:"消息类型",dataIndex:"moduleName"},{title:"创建时间",dataIndex:"createDate",scopedSlots:{customRender:"createTime"}},{title:"状态",dataIndex:"isRead",scopedSlots:{customRender:"isRead"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],oa="",ia={name:"sysMessage",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,storeName:null,pagination:{total:0,current:1},data:[],columns:aa}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){oa=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===oa||0===oa.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1},goToUrl:function(e){console.log("record",e),console.log("record.url",e.url),"0"!==e.isRead&&(e.isRead="0",this.updateMessage(e));var t={id:e.outId};this.bus.$emit("goToPage",e.url),this.bus.$emit("passData",t)},readAll:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.messageUpdateAll();case 2:0===t.sent.code&&(e.$message.success("设置全部已读成功"),e.tableData());case 4:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.messageList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},updateMessage:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.messageEdit(e);case 2:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.messageList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},sa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sysMessage"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.readAll}},[e._v("全部已读")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"messageId",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.goToUrl(r)}}},[e._v("详情")])])}},{key:"isRead",fn:function(e){return n("span",{staticClass:"isRead",style:"0"===e?"background-color: grey":"1"===e?"background-color: #87d068":"",attrs:{title:"0"===e?"已阅读":"1"===e?"未阅读":""}})}}])})],1)},staticRenderFns:[]};var ca=n("VU/8")(ia,sa,!1,function(e){n("iCs+")},"data-v-5a83274c",null).exports,la=[{title:"会员",dataIndex:"member.nickName"},{title:"头像",dataIndex:"member.avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"话题",dataIndex:"title"},{title:"图片",dataIndex:"picUrls",scopedSlots:{customRender:"picUrls"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"点赞",dataIndex:"likeNumber",scopedSlots:{customRender:"likeNumber"}},{title:"评论",dataIndex:"replyNumber",scopedSlots:{customRender:"replyNumber"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],ua=[{title:"人员头像",dataIndex:"member.avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"手机号",dataIndex:"member.mobile"}],da=[{title:"人员头像",dataIndex:"member.avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"手机号",dataIndex:"member.mobile"},{title:"评论内容",dataIndex:"content"}],fa={name:"topic",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visibleOne:!1,visibleTwo:!1,pagination:{total:0,current:1},data:[],data1:[],data2:[],title:null,status:null,columns:la,columns1:ua,columns2:da}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.title=this.title,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModalOne:function(e){this.likeData(e),this.visibleOne=!0},handleOkOne:function(e){this.visibleOne=!1},showModalTwo:function(e){this.replayData(e),this.visibleTwo=!0},handleOkTwo:function(e){this.visibleTwo=!1},selectChange:function(e){},likeData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.likeList({topicId:e});case 2:0===(r=n.sent).code&&(t.data1=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},replayData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.replyList({topicId:e});case 2:0===(r=n.sent).code&&(t.data2=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.topicList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.topicList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},ma={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topic"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"话题",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("状态1")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("状态2")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"点赞人员",centered:"",okText:"确认",cancelText:"取消",width:"850px"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("a-table",{attrs:{columns:e.columns1,dataSource:e.data1,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}}])})],1),e._v(" "),n("a-modal",{attrs:{title:"评论人员",centered:"",okText:"确认",cancelText:"取消",width:"850px"},on:{ok:e.handleOkTwo},model:{value:e.visibleTwo,callback:function(t){e.visibleTwo=t},expression:"visibleTwo"}},[n("a-table",{attrs:{columns:e.columns2,dataSource:e.data2,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"50px"}})}}])})],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",align:"center",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("a-avatar",{attrs:{src:e}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"green":"red"}},[e._v(e._s(1===t?"状态1":"状态2"))])}},{key:"picUrls",fn:function(e){return n("img",{attrs:{src:e,width:"100px",height:"100px"}})}},{key:"likeNumber",fn:function(t,r){return n("a",{on:{click:function(t){return e.showModalOne(r.id)}}},[e._v(e._s(null===t?0:t))])}},{key:"replyNumber",fn:function(t,r){return n("a",{on:{click:function(t){return e.showModalTwo(r.id)}}},[e._v(e._s(null===t?0:t))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var pa=n("VU/8")(fa,ma,!1,function(e){n("xNxL")},"data-v-5c73d9c8",null).exports,ha=[{title:"标题",dataIndex:"questionTitle"},{title:"问题类型",dataIndex:"questionType",width:180,scopedSlots:{customRender:"questionType"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],va="",ga={name:"question",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,questionTitle:null,questionType:null,data:[],columns:ha}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){va=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.questionTitle=this.questionTitle,r.questionType=this.questionType,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===va||0===va.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(va)},questionUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","questionEdit"),this.bus.$emit("passData",t)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.questionTitle&&null!==n.questionTitle&&(n.questionTitle=n.questionTitle.trim()),t.questionTitle=n.questionTitle,t.questionType=n.questionType,t.pagination.current=1,e||t.searchByConditions(n)})},paperAdd:function(){this.bus.$emit("goToPage","questionAdd")},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.questionDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),va="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.questionList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.questionList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},ba={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionTitle"],expression:"['questionTitle']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionType"],expression:"['questionType']"}],staticStyle:{width:"200px"},attrs:{placeholder:"问题类型"}},[n("a-select-option",{attrs:{value:1}},[e._v("单选")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("问答")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.paperAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"questionType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"单选":"问答"))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.questionUpdate(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var ya=n("VU/8")(ga,ba,!1,function(e){n("1Y13")},"data-v-759cdd3a",null).exports,wa=0,xa={name:"questionAdd",data:function(){return{headers:{authorization:"authorization-text"},data:{questionType:1},judge:!0}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"dynamic_form_item"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0})},methods:{remove:function(e){var t=this.form,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},add:function(){var e=this.form,t=e.getFieldValue("keys").concat(wa++);e.setFieldsValue({keys:t})},changeStatus:function(e){1===e.target.value?this.judge=!0:2===e.target.value&&(this.judge=!1)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.questionTitle&&""!==n.questionTitle?(n.optionList=n.optionList.filter(function(e){return void 0!==e}),e||t.addQuestion(n)):t.$message.warn("标题不能为空")})},addQuestion:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.questionAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","question");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","question")}}},ka={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"questionAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionTitle",{rules:[{message:"标题!"}]}],expression:"['questionTitle', { rules: [{  message: '标题!' }] }]"}],attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{message:"标题!"}]}],expression:"['sort', { rules: [{  message: '标题!' }] }]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"题目类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionType",{required:!0,initialValue:e.data.questionType}],expression:"['questionType', { required: true, initialValue: data.questionType}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("单选")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("问答")])],1)],1),e._v(" "),e.judge?n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{style:{display:"inline-block",width:"60%"},attrs:{"label-col":{span:2},"wrapper-col":{span:4}}},[n("a-button",{staticStyle:{width:"80%"},attrs:{typeof:"dashed"},on:{click:e.add}},[n("a-icon",{attrs:{type:"plus",value:"添加选项"}})],1)],1),e._v(" "),e._l(e.form.getFieldValue("keys"),function(t){return n("a-form-item",{key:t,attrs:{label:"","label-col":{span:2},"wrapper-col":{span:16},required:!1}},[n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].optionName",{validateTrigger:["change","blur"]}],expression:"['optionList[' + k + '].optionName', {validateTrigger: ['change', 'blur'] }]"}],style:{display:"inline-block"}}),e._v(" "),e.form.getFieldValue("keys").length>1?n("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===e.form.getFieldValue("keys").length},on:{click:function(){return e.remove(t)}}}):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"选项值","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].optionValue"],expression:"['optionList[' + k + '].optionValue']"}],style:{display:"inline-block"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"分数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].score"],expression:"['optionList[' + k + '].score']"}],style:{display:"inline-block"}})],1)],1)})],2):n("a-form-item",{attrs:{label:"问答","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{attrs:{label:"题目","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList[0].optionName",{validateTrigger:["change","blur"]}],expression:"['optionList[' + 0 + '].optionName', {validateTrigger: ['change', 'blur'] }]"}],style:{display:"inline-block"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"分数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList[0].score"],expression:"['optionList[' + 0 + '].score']"}],style:{display:"inline-block"}})],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var _a=n("VU/8")(xa,ka,!1,function(e){n("jpwL")},"data-v-9d7f64fa",null).exports,Sa=0,Ca={name:"questionEdit",data:function(){return{headers:{authorization:"authorization-text"},data:{optionList:[],questionTitle:null,questionType:null},judge:!0}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"dynamic_form_item"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0})},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.questionInfo({id:e});case 2:r=n.sent,t.data=r.question,1===t.data.questionType?t.judge=!0:2===t.data.questionType&&(t.judge=!1),t.data.optionList=r.question.optionList,a=[],t.data.optionList.length>0&&(Sa=t.data.optionList[t.data.optionList.length-1].id+1,t.data.optionList.forEach(function(e){a.push(e.id)}),t.form.setFieldsValue({keys:a}));case 8:case"end":return n.stop()}},n,t)}))()},remove:function(e){var t=this,n=this.form,r=n.getFieldValue("keys");1!==r.length&&(this.data.optionList.forEach(function(n,r){n.id===e&&t.data.optionList.splice(r,1)}),n.setFieldsValue({keys:r.filter(function(t){return t!==e})}))},add:function(){var e=this.form,t=e.getFieldValue("keys").concat(Sa++);e.setFieldsValue({keys:t});this.data.optionList.push({id:null,optionName:null,questionId:null})},changeStatus:function(e){1===e.target.value?this.judge=!0:2===e.target.value&&(this.judge=!1)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0!==n.questionTitle&&""!==n.questionTitle?(n.optionList=n.optionList.filter(function(e){return void 0!==e}),e||t.updateQuestion(n)):t.$message.warn("标题不能为空")})},updateQuestion:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.questionEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","question");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","question")}}},Na={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"questionEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionTitle",{rules:[{message:"标题!"}],initialValue:e.data.questionTitle}],expression:"['questionTitle', { rules: [{  message: '标题!' }], initialValue: data.questionTitle }]"}],attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"题目类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["questionType",{required:!0,initialValue:e.data.questionType}],expression:"['questionType', { required: true, initialValue: data.questionType}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("单选")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("问答")])],1)],1),e._v(" "),e.judge?n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{style:{display:"inline-block",width:"60%"},attrs:{"label-col":{span:2},"wrapper-col":{span:4}}},[n("a-button",{staticStyle:{width:"80%"},attrs:{typeof:"dashed"},on:{click:e.add}},[n("a-icon",{attrs:{type:"plus",value:"添加选项"}})],1)],1),e._v(" "),e._l(e.form.getFieldValue("keys"),function(t,r){return n("a-form-item",{key:t,attrs:{label:"","label-col":{span:2},"wrapper-col":{span:16},required:!1}},[n("a-form-item",{attrs:{label:"选项","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].optionName",{validateTrigger:["change","blur"],rules:[{message:"标题!"}],initialValue:e.data.optionList[r].optionName}],expression:"['optionList[' + k + '].optionName', {validateTrigger: ['change', 'blur'], rules: [{  message: '标题!' }], initialValue: data.optionList[index].optionName }]"}],style:{display:"inline-block"}}),e._v(" "),e.form.getFieldValue("keys").length>1?n("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===e.form.getFieldValue("keys").length},on:{click:function(){return e.remove(t)}}}):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"选项值","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].optionValue",{initialValue:e.data.optionList[r].optionValue}],expression:"['optionList[' + k + '].optionValue',{ initialValue: data.optionList[index].optionValue}]"}],style:{display:"inline-block"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"分数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList["+t+"].score",{initialValue:e.data.optionList[r].score}],expression:"['optionList[' + k + '].score',{ initialValue: data.optionList[index].score}]"}],style:{display:"inline-block"}})],1)],1)})],2):n("a-form-item",{attrs:{label:"问答","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{attrs:{label:"题目","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList[0].optionName",{validateTrigger:["change","blur"],initialValue:e.data.optionList[0].optionName}],expression:"['optionList[' + 0 + '].optionName', {validateTrigger: ['change', 'blur'],initialValue: data.optionList[0].optionName }]"}],style:{display:"inline-block"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"分数","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["optionList[0].score",{initialValue:e.data.optionList[0].score}],expression:"['optionList[' + 0 + '].score',{initialValue: data.optionList[0].score}]"}],style:{display:"inline-block"}})],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ta=n("VU/8")(Ca,Na,!1,function(e){n("UR/I")},"data-v-104ed072",null).exports,Da=[{title:"菜单名称",dataIndex:"name"},{title:"菜单路径",dataIndex:"url",width:"20%",scopedSlots:{customRender:"urlShow"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"排序",dataIndex:"orderNum"},{title:"授权",dataIndex:"perms",width:"40%",scopedSlots:{customRender:"permsShow"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Ia="",Ma={name:"menuList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,data:[],columns:Da}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ia=e},onSelect:function(e,t,n){}}}},methods:{menuEdit:function(e){var t={id:e};this.bus.$emit("goToPage","menuEdit"),this.bus.$emit("passData",t)},showModal:function(){""===Ia||0===Ia.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.menuDelete(Ia)},menuAdd:function(){this.bus.$emit("goToPage","menuAdd")},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},menuDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.deleteMenu(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ia="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.menuList({});case 2:n=t.sent,e.data=e.translateData(n);case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.menuId){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t}}},Oa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menuList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.menuAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"menuId",pagination:!1},scopedSlots:e._u([{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"菜单":2===t?"按钮":"目录"))])}},{key:"urlShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.url}},[e._v("\n      "+e._s(r.url)+"\n    ")])}},{key:"permsShow",fn:function(t,r){return n("div",{style:{maxWidth:"400px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.perms}},[e._v("\n      "+e._s(r.perms)+"\n    ")])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.menuEdit(r.menuId)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Aa=n("VU/8")(Ma,Oa,!1,function(e){n("O7qg")},"data-v-122965bc",null).exports,La={name:"menuAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),menuList:[],list:[],data:{}}},created:function(){this.getMenuList()},methods:{changeType:function(e){console.log(e.target.value),1===e.target.value?this.menuList=this.list:this.menuList=[]},getMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.menuFirstList();case 2:0===(n=t.sent).code&&(e.list=n.menuList);case 4:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),void 0!==n.type?void 0!==n.name&&""!==n.name&&""!==n.name.trim()?e||t.menuAdd(n):t.$message.warn("菜单名称不能为空"):t.$message.warn("目录不能为空")})},menuAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addMenu(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","menuList");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","menuList")}}},Ea={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menuAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],on:{change:e.changeType}},[n("a-radio",{attrs:{value:0}},[e._v("目录")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("菜单")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"菜单名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{required:!0,rules:[{message:"菜单名称!"}]}],expression:"['name', { required: true,rules: [{ message: '菜单名称!' }] }]"}],attrs:{placeholder:"菜单名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"上级菜单","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],attrs:{placeholder:"上级菜单"}},e._l(e.menuList,function(t){return n("a-select-option",{key:t.menuId,attrs:{value:t.menuId}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"菜单URL","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url"],expression:"['url']"}],attrs:{placeholder:"菜单URL"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"授权标识","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms"],expression:"['perms']"}],attrs:{placeholder:"多个用逗号分开, 如：member:list,member:info"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],attrs:{type:"number",placeholder:"排序号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"图标","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}],attrs:{placeholder:"图标"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var za=n("VU/8")(La,Ea,!1,function(e){n("fjxZ")},"data-v-1aa6e475",null).exports,Ra={name:"menuAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),menuList:[],list:[],data:{type:null,name:null,parentId:null,url:null,perms:null,orderNum:null,icon:null}}},props:{passData:Object},created:function(){this.getMenuList()},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.menuInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.menu,0===t.data.parentId&&(t.data.parentId=null),1===t.data.type&&(t.menuList=t.list));case 4:case"end":return n.stop()}},n,t)}))()},changeType:function(e){1===e.target.value?this.menuList=this.list:this.menuList=[]},getMenuList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.menuFirstList();case 2:0===(n=t.sent).code&&(e.list=n.menuList),e.getInfo(e.passData.id);case 5:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuId=t.passData.id,void 0!==n.type?void 0!==n.name&&""!==n.name&&""!==n.name.trim()?e||t.menuEdit(n):t.$message.warn("菜单名称不能为空"):t.$message.warn("目录不能为空")})},menuEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.editMenu(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","menuList");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","menuList")}}},Va={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menuAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.data.type}],expression:"['type', {initialValue: data.type}]"}],on:{change:e.changeType}},[n("a-radio",{attrs:{value:0}},[e._v("目录")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("菜单")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"菜单名称","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.data.name}],expression:"['name', {initialValue: data.name}]"}],attrs:{placeholder:"菜单名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"上级菜单","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId', {initialValue: data.parentId}]"}],attrs:{placeholder:"上级菜单"}},e._l(e.menuList,function(t){return n("a-select-option",{key:t.menuId,attrs:{value:t.menuId}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"菜单URL","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{initialValue:e.data.url}],expression:"['url', {initialValue: data.url}]"}],attrs:{placeholder:"菜单URL"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"授权标识","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{initialValue:e.data.perms}],expression:"['perms', {initialValue: data.perms}]"}],attrs:{placeholder:"多个用逗号分开, 如：member:list,member:info"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum",{initialValue:e.data.orderNum}],expression:"['orderNum', {initialValue: data.orderNum}]"}],attrs:{type:"number",placeholder:"排序号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"图标","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:e.data.icon}],expression:"['icon', {initialValue: data.icon}]"}],attrs:{placeholder:"图标"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ba=n("VU/8")(Ra,Va,!1,function(e){n("ff4F")},"data-v-299c798f",null).exports,$a=[{title:"工号",dataIndex:"userNo"},{title:"用户名",dataIndex:"userName"},{title:"身份证",dataIndex:"idCard"},{title:"手机号",dataIndex:"mobile"},{title:"公司",dataIndex:"companyName"},{title:"部门",dataIndex:"deptName"},{title:"岗位",dataIndex:"postName"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],Ua="",Pa={name:"hrmUser",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),importUrl:"https://api.xiaoerd.icu/user/importUser",downLoadUrl:"https://api.xiaoerd.icu/user/exportTemplate?token="+sessionStorage.getItem("token"),downLoadUser:null,pagination:{total:0,current:1},visible:!1,visibleOne:!1,resetId:null,data:[],userNo:null,userName:null,mobile:null,idCard:null,columns:$a}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ua=e}}}},methods:{exportUser:function(){var e=this;this.form.validateFields(function(t,n){void 0===n.userNo&&(n.userNo=""),void 0===n.userName&&(n.userName=""),void 0===n.mobile&&(n.mobile=""),void 0===n.idCard&&(n.idCard=""),t||(e.downLoadUser="https://api.xiaoerd.icu/user/exportUser?token="+sessionStorage.getItem("token")+"&userNo="+n.userNo+"&userName="+n.userName+"&mobile="+n.mobile+"&idCard="+n.idCard)})},handleChange:function(e){"done"===e.file.status&&this.tableData()},handleTableChange:function(e,t,n){var r={};r.userNo=this.userNo,r.userName=this.userName,r.mobile=this.mobile,r.idCard=this.isCard,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Ua||0===Ua.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.hrmUserDelete(Ua)},showModalOne:function(e){this.resetId=e,this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1,this.hrmUserResetPassword(this.resetId)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.userNo=n.userNo,t.userName=n.userName,t.mobile=n.mobile,t.idCard=n.isCard,t.pagination.current=1,e||t.searchByConditions(n)})},goToHrmUserAdd:function(){this.bus.$emit("goToPage","hrmUserAdd")},hrmUserEdit:function(e){var t={id:e};this.bus.$emit("goToPage","hrmUserEdit"),this.bus.$emit("passData",t)},hrmUserResetPassword:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserResetPassword({id:e});case 2:0===n.sent.code&&(t.$message.success("重置密码成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},hrmUserDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ua="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.hrmUserList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Fa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hrmUser"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo"],expression:"['userNo']"}],staticStyle:{width:"200px"},attrs:{placeholder:"工号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName"],expression:"['userName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCard"],expression:"['idCard']"}],staticStyle:{width:"200px"},attrs:{placeholder:"身份证",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.goToHrmUserAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 下载模板")])])],1),e._v(" "),n("a-form-item",[n("a-upload",{attrs:{name:"importUser",headers:e.headers,multiple:!1,accept:".xls,.xlsx",action:e.importUrl},on:{change:e.handleChange}},[n("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportUser}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUser}},[e._v(" 导出")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"确认重置密码？",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确认重置密码？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.hrmUserEdit(r.id)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showModalOne(r.id)}}},[e._v("密码重置")])],1)}}])})],1)},staticRenderFns:[]};var Ha=n("VU/8")(Pa,Fa,!1,function(e){n("4kt0")},"data-v-350855dc",null).exports,ja={name:"hrmUserAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"})}},methods:{addHrmUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","hrmUser");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0===n.password||/^\w+$/.test(n.password)&&6===n.password.length?void 0===n.idCard||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(n.idCard)?void 0===n.mobile||/^1[34578]\d{9}$/.test(n.mobile)?e||t.addHrmUser(n):t.$message.error("手机格式错误"):t.$message.error("身份证格式错误"):t.$message.error("密码格式错误，只能是数字、字母、下划线，且长度为6")})},goToBack:function(){this.bus.$emit("goToPage","hrmUser")}}},qa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hrmUserAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"工号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo",{rules:[{required:!0,message:"请填写工号!"}]}],expression:"['userNo', { rules: [{ required: true, message: '请填写工号!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请填写用户名!"}]}],expression:"['userName', { rules: [{ required: true, message: '请填写用户名!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请填写密码!"}]}],expression:"['password', { rules: [{ required: true, message: '请填写密码!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"身份证","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCard",{rules:[{required:!0,message:"请填写身份证!"}]}],expression:"['idCard', { rules: [{ required: true, message: '请填写身份证!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,message:"请填写手机号!"}]}],expression:"['mobile', { rules: [{ required: true, message: '请填写手机号!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"公司名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName"],expression:"['companyName']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"部门","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptName"],expression:"['deptName']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"岗位","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postName"],expression:"['postName']"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Wa=n("VU/8")(ja,qa,!1,function(e){n("/qqq")},"data-v-d222a760",null).exports,Ya={name:"hrmUserEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),data:{userNo:null,userName:null,password:null,idCard:null,mobile:null,deptName:null,companyName:null,postName:null}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserInfo({id:e});case 2:r=n.sent,t.data=r.user;case 4:case"end":return n.stop()}},n,t)}))()},editHrmUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.hrmUserEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","hrmUser");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,""===n.idCard||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(n.idCard)?""===n.mobile||/^1[34578]\d{9}$/.test(n.mobile)?e||t.editHrmUser(n):t.$message.error("手机格式错误"):t.$message.error("身份证格式错误")})},goToBack:function(){this.bus.$emit("goToPage","hrmUser")}}},Ga={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hrmUserEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"工号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo",{rules:[{required:!0,message:"请填写用户名!"}],initialValue:e.data.userNo}],expression:"['userNo', { rules: [{ required: true, message: '请填写用户名!' }],initialValue: data.userNo }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请填写用户名!"}],initialValue:e.data.userName}],expression:"['userName', { rules: [{ required: true, message: '请填写用户名!' }],initialValue: data.userName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password"],expression:"['password']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"身份证","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCard",{rules:[{required:!0,message:"请填写身份证!"}],initialValue:e.data.idCard}],expression:"['idCard', { rules: [{ required: true, message: '请填写身份证!' }],initialValue: data.idCard }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,message:"请填写手机号!"}],initialValue:e.data.mobile}],expression:"['mobile', { rules: [{ required: true, message: '请填写手机号!' }],initialValue: data.mobile }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"公司名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{initialValue:e.data.companyName}],expression:"['companyName', {initialValue: data.companyName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"部门","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptName",{initialValue:e.data.deptName}],expression:"['deptName', {initialValue: data.deptName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"岗位","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postName",{initialValue:e.data.postName}],expression:"['postName', {initialValue: data.postName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ka=n("VU/8")(Ya,Ga,!1,function(e){n("lvet")},"data-v-74005939",null).exports,Qa=n("Gu7T"),Xa=n.n(Qa),Ja={a:"啊阿锕",ai:"埃挨哎唉哀皑癌蔼矮艾碍爱隘诶捱嗳嗌嫒瑷暧砹锿霭",an:"鞍氨安俺按暗岸胺案谙埯揞犴庵桉铵鹌顸黯",ang:"肮昂盎",ao:"凹敖熬翱袄傲奥懊澳坳拗嗷噢岙廒遨媪骜聱螯鏊鳌鏖",ba:"芭捌扒叭吧笆八疤巴拔跋靶把耙坝霸罢爸茇菝萆捭岜灞杷钯粑鲅魃",bai:"白柏百摆佰败拜稗薜掰鞴",ban:"斑班搬扳般颁板版扮拌伴瓣半办绊阪坂豳钣瘢癍舨",bang:"邦帮梆榜膀绑棒磅蚌镑傍谤蒡螃",bao:"苞胞包褒雹保堡饱宝抱报暴豹鲍爆勹葆宀孢煲鸨褓趵龅",bo:"剥薄玻菠播拨钵波博勃搏铂箔伯帛舶脖膊渤泊驳亳蕃啵饽檗擘礴钹鹁簸跛",bei:"杯碑悲卑北辈背贝钡倍狈备惫焙被孛陂邶埤蓓呗怫悖碚鹎褙鐾",ben:"奔苯本笨畚坌锛",beng:"崩绷甭泵蹦迸唪嘣甏",bi:"逼鼻比鄙笔彼碧蓖蔽毕毙毖币庇痹闭敝弊必辟壁臂避陛匕仳俾芘荜荸吡哔狴庳愎滗濞弼妣婢嬖璧贲畀铋秕裨筚箅篦舭襞跸髀",bian:"鞭边编贬扁便变卞辨辩辫遍匾弁苄忭汴缏煸砭碥稹窆蝙笾鳊",biao:"标彪膘表婊骠飑飙飚灬镖镳瘭裱鳔",bie:"鳖憋别瘪蹩鳘",bin:"彬斌濒滨宾摈傧浜缤玢殡膑镔髌鬓",bing:"兵冰柄丙秉饼炳病并禀邴摒绠枋槟燹",bu:"捕卜哺补埠不布步簿部怖拊卟逋瓿晡钚醭",ca:"擦嚓礤",cai:"猜裁材才财睬踩采彩菜蔡",can:"餐参蚕残惭惨灿骖璨粲黪",cang:"苍舱仓沧藏伧",cao:"操糙槽曹草艹嘈漕螬艚",ce:"厕策侧册测刂帻恻",ceng:"层蹭噌",cha:"插叉茬茶查碴搽察岔差诧猹馇汊姹杈楂槎檫钗锸镲衩",chai:"拆柴豺侪茈瘥虿龇",chan:"搀掺蝉馋谗缠铲产阐颤冁谄谶蒇廛忏潺澶孱羼婵嬗骣觇禅镡裣蟾躔",chang:"昌猖场尝常长偿肠厂敞畅唱倡伥鬯苌菖徜怅惝阊娼嫦昶氅鲳",chao:"超抄钞朝嘲潮巢吵炒怊绉晁耖",che:"车扯撤掣彻澈坼屮砗",chen:"郴臣辰尘晨忱沉陈趁衬称谌抻嗔宸琛榇肜胂碜龀",cheng:"撑城橙成呈乘程惩澄诚承逞骋秤埕嵊徵浈枨柽樘晟塍瞠铖裎蛏酲",chi:"吃痴持匙池迟弛驰耻齿侈尺赤翅斥炽傺墀芪茌搋叱哧啻嗤彳饬沲媸敕胝眙眵鸱瘛褫蚩螭笞篪豉踅踟魑",chong:"充冲虫崇宠茺忡憧铳艟",chou:"抽酬畴踌稠愁筹仇绸瞅丑俦圳帱惆溴妯瘳雠鲋",chu:"臭初出橱厨躇锄雏滁除楚础储矗搐触处亍刍憷绌杵楮樗蜍蹰黜",chuan:"揣川穿椽传船喘串掾舛惴遄巛氚钏镩舡",chuang:"疮窗幢床闯创怆",chui:"吹炊捶锤垂陲棰槌",chun:"春椿醇唇淳纯蠢促莼沌肫朐鹑蝽",chuo:"戳绰蔟辶辍镞踔龊",ci:"疵茨磁雌辞慈瓷词此刺赐次荠呲嵯鹚螅糍趑",cong:"聪葱囱匆从丛偬苁淙骢琮璁枞",cu:"凑粗醋簇猝殂蹙",cuan:"蹿篡窜汆撺昕爨",cui:"摧崔催脆瘁粹淬翠萃悴璀榱隹",cun:"村存寸磋忖皴",cuo:"撮搓措挫错厝脞锉矬痤鹾蹉躜",da:"搭达答瘩打大耷哒嗒怛妲疸褡笪靼鞑",dai:"呆歹傣戴带殆代贷袋待逮怠埭甙呔岱迨逯骀绐玳黛",dan:"耽担丹单郸掸胆旦氮但惮淡诞弹蛋亻儋卩萏啖澹檐殚赕眈瘅聃箪",dang:"当挡党荡档谠凼菪宕砀铛裆",dao:"刀捣蹈倒岛祷导到稻悼道盗叨啁忉洮氘焘忑纛",de:"德得的锝",deng:"蹬灯登等瞪凳邓噔嶝戥磴镫簦",di:"堤低滴迪敌笛狄涤翟嫡抵底地蒂第帝弟递缔氐籴诋谛邸坻莜荻嘀娣柢棣觌砥碲睇镝羝骶",dian:"颠掂滇碘点典靛垫电佃甸店惦奠淀殿丶阽坫埝巅玷癜癫簟踮",diao:"碉叼雕凋刁掉吊钓调轺铞蜩粜貂",die:"跌爹碟蝶迭谍叠佚垤堞揲喋渫轶牒瓞褶耋蹀鲽鳎",ding:"丁盯叮钉顶鼎锭定订丢仃啶玎腚碇町铤疔耵酊",dong:"东冬董懂动栋侗恫冻洞垌咚岽峒夂氡胨胴硐鸫",dou:"兜抖斗陡豆逗痘蔸钭窦窬蚪篼酡",du:"都督毒犊独读堵睹赌杜镀肚度渡妒芏嘟渎椟橐牍蠹笃髑黩",duan:"端短锻段断缎彖椴煅簖",dui:"堆兑队对怼憝碓",dun:"墩吨蹲敦顿囤钝盾遁炖砘礅盹镦趸",duo:"掇哆多夺垛躲朵跺舵剁惰堕咄哚缍柁铎裰踱",e:"蛾峨鹅俄额讹娥恶厄扼遏鄂饿噩谔垩垭苊莪萼呃愕屙婀轭曷腭硪锇锷鹗颚鳄",en:"恩蒽摁唔嗯",er:"而儿耳尔饵洱二贰迩珥铒鸸鲕",fa:"发罚筏伐乏阀法珐垡砝",fan:"藩帆番翻樊矾钒繁凡烦反返范贩犯饭泛蘩幡犭梵攵燔畈蹯",fang:"坊芳方肪房防妨仿访纺放匚邡彷钫舫鲂",fei:"菲非啡飞肥匪诽吠肺废沸费芾狒悱淝妃绋绯榧腓斐扉祓砩镄痱蜚篚翡霏鲱",fen:"芬酚吩氛分纷坟焚汾粉奋份忿愤粪偾瀵棼愍鲼鼢",feng:"丰封枫蜂峰锋风疯烽逢冯缝讽奉凤俸酆葑沣砜",fu:"佛否夫敷肤孵扶拂辐幅氟符伏俘服浮涪福袱弗甫抚辅俯釜斧脯腑府腐赴副覆赋复傅付阜父腹负富讣附妇缚咐匐凫郛芙苻茯莩菔呋幞滏艴孚驸绂桴赙黻黼罘稃馥虍蚨蜉蝠蝮麸趺跗鳆",ga:"噶嘎蛤尬呷尕尜旮钆",gai:"该改概钙盖溉丐陔垓戤赅胲",gan:"干甘杆柑竿肝赶感秆敢赣坩苷尴擀泔淦澉绀橄旰矸疳酐",gang:"冈刚钢缸肛纲岗港戆罡颃筻",gong:"杠工攻功恭龚供躬公宫弓巩汞拱贡共蕻廾咣珙肱蚣蛩觥",gao:"篙皋高膏羔糕搞镐稿告睾诰郜蒿藁缟槔槁杲锆",ge:"哥歌搁戈鸽胳疙割革葛格阁隔铬个各鬲仡哿塥嗝纥搿膈硌铪镉袼颌虼舸骼髂",gei:"给",gen:"根跟亘茛哏艮",geng:"耕更庚羹埂耿梗哽赓鲠",gou:"钩勾沟苟狗垢构购够佝诟岣遘媾缑觏彀鸲笱篝鞲",gu:"辜菇咕箍估沽孤姑鼓古蛊骨谷股故顾固雇嘏诂菰哌崮汩梏轱牯牿胍臌毂瞽罟钴锢瓠鸪鹄痼蛄酤觚鲴骰鹘",gua:"刮瓜剐寡挂褂卦诖呱栝鸹",guai:"乖拐怪哙",guan:"棺关官冠观管馆罐惯灌贯倌莞掼涫盥鹳鳏",guang:"光广逛犷桄胱疒",gui:"瑰规圭硅归龟闺轨鬼诡癸桂柜跪贵刽匦刿庋宄妫桧炅晷皈簋鲑鳜",gun:"辊滚棍丨衮绲磙鲧",guo:"锅郭国果裹过馘蠃埚掴呙囗帼崞猓椁虢锞聒蜮蜾蝈",ha:"哈",hai:"骸孩海氦亥害骇咴嗨颏醢",han:"酣憨邯韩含涵寒函喊罕翰撼捍旱憾悍焊汗汉邗菡撖阚瀚晗焓颔蚶鼾",hen:"夯痕很狠恨",hang:"杭航沆绗珩桁",hao:"壕嚎豪毫郝好耗号浩薅嗥嚆濠灏昊皓颢蚝",he:"呵喝荷菏核禾和何合盒貉阂河涸赫褐鹤贺诃劾壑藿嗑嗬阖盍蚵翮",hei:"嘿黑",heng:"哼亨横衡恒訇蘅",hong:"轰哄烘虹鸿洪宏弘红黉讧荭薨闳泓",hou:"喉侯猴吼厚候后堠後逅瘊篌糇鲎骺",hu:"呼乎忽瑚壶葫胡蝴狐糊湖弧虎唬护互沪户冱唿囫岵猢怙惚浒滹琥槲轷觳烀煳戽扈祜鹕鹱笏醐斛",hua:"花哗华猾滑画划化话劐浍骅桦铧稞",huai:"槐徊怀淮坏还踝",huan:"欢环桓缓换患唤痪豢焕涣宦幻郇奂垸擐圜洹浣漶寰逭缳锾鲩鬟",huang:"荒慌黄磺蝗簧皇凰惶煌晃幌恍谎隍徨湟潢遑璜肓癀蟥篁鳇",hui:"灰挥辉徽恢蛔回毁悔慧卉惠晦贿秽会烩汇讳诲绘诙茴荟蕙哕喙隳洄彗缋珲晖恚虺蟪麾",hun:"荤昏婚魂浑混诨馄阍溷缗",huo:"豁活伙火获或惑霍货祸攉嚯夥钬锪镬耠蠖",ji:"击圾基机畸稽积箕肌饥迹激讥鸡姬绩缉吉极棘辑籍集及急疾汲即嫉级挤几脊己蓟技冀季伎祭剂悸济寄寂计记既忌际妓继纪居丌乩剞佶佴脔墼芨芰萁蒺蕺掎叽咭哜唧岌嵴洎彐屐骥畿玑楫殛戟戢赍觊犄齑矶羁嵇稷瘠瘵虮笈笄暨跻跽霁鲚鲫髻麂",jia:"嘉枷夹佳家加荚颊贾甲钾假稼价架驾嫁伽郏拮岬浃迦珈戛胛恝铗镓痂蛱笳袈跏",jian:"歼监坚尖笺间煎兼肩艰奸缄茧检柬碱硷拣捡简俭剪减荐槛鉴践贱见键箭件健舰剑饯渐溅涧建僭谏谫菅蒹搛囝湔蹇謇缣枧柙楗戋戬牮犍毽腱睑锏鹣裥笕箴翦趼踺鲣鞯",jiang:"僵姜将浆江疆蒋桨奖讲匠酱降茳洚绛缰犟礓耩糨豇",jiao:"蕉椒礁焦胶交郊浇骄娇嚼搅铰矫侥脚狡角饺缴绞剿教酵轿较叫佼僬茭挢噍峤徼姣纟敫皎鹪蛟醮跤鲛",jie:"窖揭接皆秸街阶截劫节桔杰捷睫竭洁结解姐戒藉芥界借介疥诫届偈讦诘喈嗟獬婕孑桀獒碣锴疖袷颉蚧羯鲒骱髫",jin:"巾筋斤金今津襟紧锦仅谨进靳晋禁近烬浸尽卺荩堇噤馑廑妗缙瑾槿赆觐钅锓衿矜",jing:"劲荆兢茎睛晶鲸京惊精粳经井警景颈静境敬镜径痉靖竟竞净刭儆阱菁獍憬泾迳弪婧肼胫腈旌",jiong:"炯窘冂迥扃",jiu:"揪究纠玖韭久灸九酒厩救旧臼舅咎就疚僦啾阄柩桕鹫赳鬏",ju:"鞠拘狙疽驹菊局咀矩举沮聚拒据巨具距踞锯俱句惧炬剧倨讵苣苴莒掬遽屦琚枸椐榘榉橘犋飓钜锔窭裾趄醵踽龃雎鞫",juan:"捐鹃娟倦眷卷绢鄄狷涓桊蠲锩镌隽",jue:"撅攫抉掘倔爵觉决诀绝厥劂谲矍蕨噘崛獗孓珏桷橛爝镢蹶觖",jun:"均菌钧军君峻俊竣浚郡骏捃狻皲筠麇",ka:"喀咖卡佧咔胩",ke:"咯坷苛柯棵磕颗科壳咳可渴克刻客课岢恪溘骒缂珂轲氪瞌钶疴窠蝌髁",kai:"开揩楷凯慨剀垲蒈忾恺铠锎",kan:"刊堪勘坎砍看侃凵莰莶戡龛瞰",kang:"康慷糠扛抗亢炕坑伉闶钪",kao:"考拷烤靠尻栲犒铐",ken:"肯啃垦恳垠裉颀",keng:"吭忐铿",kong:"空恐孔控倥崆箜",kou:"抠口扣寇芤蔻叩眍筘",ku:"枯哭窟苦酷库裤刳堀喾绔骷",kua:"夸垮挎跨胯侉",kuai:"块筷侩快蒯郐蒉狯脍",kuan:"宽款髋",kuang:"匡筐狂框矿眶旷况诓诳邝圹夼哐纩贶",kui:"亏盔岿窥葵奎魁傀馈愧溃馗匮夔隗揆喹喟悝愦阕逵暌睽聩蝰篑臾跬",kun:"坤昆捆困悃阃琨锟醌鲲髡",kuo:"括扩廓阔蛞",la:"垃拉喇蜡腊辣啦剌摺邋旯砬瘌",lai:"莱来赖崃徕涞濑赉睐铼癞籁",lan:"蓝婪栏拦篮阑兰澜谰揽览懒缆烂滥啉岚懔漤榄斓罱镧褴",lang:"琅榔狼廊郎朗浪莨蒗啷阆锒稂螂",lao:"捞劳牢老佬姥酪烙涝唠崂栳铑铹痨醪",le:"勒乐肋仂叻嘞泐鳓",lei:"雷镭蕾磊累儡垒擂类泪羸诔荽咧漯嫘缧檑耒酹",ling:"棱冷拎玲菱零龄铃伶羚凌灵陵岭领另令酃塄苓呤囹泠绫柃棂瓴聆蛉翎鲮",leng:"楞愣",li:"厘梨犁黎篱狸离漓理李里鲤礼莉荔吏栗丽厉励砾历利傈例俐痢立粒沥隶力璃哩俪俚郦坜苈莅蓠藜捩呖唳喱猁溧澧逦娌嫠骊缡珞枥栎轹戾砺詈罹锂鹂疠疬蛎蜊蠡笠篥粝醴跞雳鲡鳢黧",lian:"俩联莲连镰廉怜涟帘敛脸链恋炼练挛蔹奁潋濂娈琏楝殓臁膦裢蠊鲢",liang:"粮凉梁粱良两辆量晾亮谅墚椋踉靓魉",liao:"撩聊僚疗燎寥辽潦了撂镣廖料蓼尥嘹獠寮缭钌鹩耢",lie:"列裂烈劣猎冽埒洌趔躐鬣",lin:"琳林磷霖临邻鳞淋凛赁吝蔺嶙廪遴檩辚瞵粼躏麟",liu:"溜琉榴硫馏留刘瘤流柳六抡偻蒌泖浏遛骝绺旒熘锍镏鹨鎏",long:"龙聋咙笼窿隆垄拢陇弄垅茏泷珑栊胧砻癃",lou:"楼娄搂篓漏陋喽嵝镂瘘耧蝼髅",lu:"芦卢颅庐炉掳卤虏鲁麓碌露路赂鹿潞禄录陆戮垆摅撸噜泸渌漉璐栌橹轳辂辘氇胪镥鸬鹭簏舻鲈",lv:"驴吕铝侣旅履屡缕虑氯律率滤绿捋闾榈膂稆褛",luan:"峦孪滦卵乱栾鸾銮",lue:"掠略锊",lun:"轮伦仑沦纶论囵",luo:"萝螺罗逻锣箩骡裸落洛骆络倮荦摞猡泺椤脶镙瘰雒",ma:"妈麻玛码蚂马骂嘛吗唛犸嬷杩麽",mai:"埋买麦卖迈脉劢荬咪霾",man:"瞒馒蛮满蔓曼慢漫谩墁幔缦熳镘颟螨鳗鞔",mang:"芒茫盲忙莽邙漭朦硭蟒",meng:"氓萌蒙檬盟锰猛梦孟勐甍瞢懵礞虻蜢蠓艋艨黾",miao:"猫苗描瞄藐秒渺庙妙喵邈缈缪杪淼眇鹋蜱",mao:"茅锚毛矛铆卯茂冒帽貌贸侔袤勖茆峁瑁昴牦耄旄懋瞀蛑蝥蟊髦",me:"么",mei:"玫枚梅酶霉煤没眉媒镁每美昧寐妹媚坶莓嵋猸浼湄楣镅鹛袂魅",men:"门闷们扪玟焖懑钔",mi:"眯醚靡糜迷谜弥米秘觅泌蜜密幂芈冖谧蘼嘧猕獯汨宓弭脒敉糸縻麋",mian:"棉眠绵冕免勉娩缅面沔湎腼眄",mie:"蔑灭咩蠛篾",min:"民抿皿敏悯闽苠岷闵泯珉",ming:"明螟鸣铭名命冥茗溟暝瞑酩",miu:"谬",mo:"摸摹蘑模膜磨摩魔抹末莫墨默沫漠寞陌谟茉蓦馍嫫镆秣瘼耱蟆貊貘",mou:"谋牟某厶哞婺眸鍪",mu:"拇牡亩姆母墓暮幕募慕木目睦牧穆仫苜呒沐毪钼",na:"拿哪呐钠那娜纳内捺肭镎衲箬",nai:"氖乃奶耐奈鼐艿萘柰",nan:"南男难囊喃囡楠腩蝻赧",nao:"挠脑恼闹孬垴猱瑙硇铙蛲",ne:"淖呢讷",nei:"馁",nen:"嫩能枘恁",ni:"妮霓倪泥尼拟你匿腻逆溺伲坭猊怩滠昵旎祢慝睨铌鲵",nian:"蔫拈年碾撵捻念廿辇黏鲇鲶",niang:"娘酿",niao:"鸟尿茑嬲脲袅",nie:"捏聂孽啮镊镍涅乜陧蘖嗫肀颞臬蹑",nin:"您柠",ning:"狞凝宁拧泞佞蓥咛甯聍",niu:"牛扭钮纽狃忸妞蚴",nong:"脓浓农侬",nu:"奴努怒呶帑弩胬孥驽",nv:"女恧钕衄",nuan:"暖",nuenue:"虐",nue:"疟谑",nuo:"挪懦糯诺傩搦喏锘",ou:"哦欧鸥殴藕呕偶沤怄瓯耦",pa:"啪趴爬帕怕琶葩筢",pai:"拍排牌徘湃派俳蒎",pan:"攀潘盘磐盼畔判叛爿泮袢襻蟠蹒",pang:"乓庞旁耪胖滂逄",pao:"抛咆刨炮袍跑泡匏狍庖脬疱",pei:"呸胚培裴赔陪配佩沛掊辔帔淠旆锫醅霈",pen:"喷盆湓",peng:"砰抨烹澎彭蓬棚硼篷膨朋鹏捧碰坯堋嘭怦蟛",pi:"砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬丕陴邳郫圮鼙擗噼庀媲纰枇甓睥罴铍痦癖疋蚍貔",pian:"篇偏片骗谝骈犏胼褊翩蹁",piao:"飘漂瓢票剽嘌嫖缥殍瞟螵",pie:"撇瞥丿苤氕",pin:"拼频贫品聘拚姘嫔榀牝颦",ping:"乒坪苹萍平凭瓶评屏俜娉枰鲆",po:"坡泼颇婆破魄迫粕叵鄱溥珀钋钷皤笸",pou:"剖裒踣",pu:"扑铺仆莆葡菩蒲埔朴圃普浦谱曝瀑匍噗濮璞氆镤镨蹼",qi:"期欺栖戚妻七凄漆柒沏其棋奇歧畦崎脐齐旗祈祁骑起岂乞企启契砌器气迄弃汽泣讫亟亓圻芑萋葺嘁屺岐汔淇骐绮琪琦杞桤槭欹祺憩碛蛴蜞綦綮趿蹊鳍麒",qia:"掐恰洽葜",qian:"牵扦钎铅千迁签仟谦乾黔钱钳前潜遣浅谴堑嵌欠歉佥阡芊芡荨掮岍悭慊骞搴褰缱椠肷愆钤虔箝",qiang:"枪呛腔羌墙蔷强抢嫱樯戗炝锖锵镪襁蜣羟跫跄",qiao:"橇锹敲悄桥瞧乔侨巧鞘撬翘峭俏窍劁诮谯荞愀憔缲樵毳硗跷鞒",qie:"切茄且怯窃郄唼惬妾挈锲箧",qin:"钦侵亲秦琴勤芹擒禽寝沁芩蓁蕲揿吣嗪噙溱檎螓衾",qing:"青轻氢倾卿清擎晴氰情顷请庆倩苘圊檠磬蜻罄箐謦鲭黥",qiong:"琼穷邛茕穹筇銎",qiu:"秋丘邱球求囚酋泅俅氽巯艽犰湫逑遒楸赇鸠虬蚯蝤裘糗鳅鼽",qu:"趋区蛆曲躯屈驱渠取娶龋趣去诎劬蕖蘧岖衢阒璩觑氍祛磲癯蛐蠼麴瞿黢",quan:"圈颧权醛泉全痊拳犬券劝诠荃獾悛绻辁畎铨蜷筌鬈",que:"缺炔瘸却鹊榷确雀阙悫",qun:"裙群逡",ran:"然燃冉染苒髯",rang:"瓤壤攘嚷让禳穰",rao:"饶扰绕荛娆桡",ruo:"惹若弱",re:"热偌",ren:"壬仁人忍韧任认刃妊纫仞荏葚饪轫稔衽",reng:"扔仍",ri:"日",rong:"戎茸蓉荣融熔溶容绒冗嵘狨缛榕蝾",rou:"揉柔肉糅蹂鞣",ru:"茹蠕儒孺如辱乳汝入褥蓐薷嚅洳溽濡铷襦颥",ruan:"软阮朊",rui:"蕊瑞锐芮蕤睿蚋",run:"闰润",sa:"撒洒萨卅仨挲飒",sai:"腮鳃塞赛噻",san:"三叁伞散彡馓氵毵糁霰",sang:"桑嗓丧搡磉颡",sao:"搔骚扫嫂埽臊瘙鳋",se:"瑟色涩啬铩铯穑",sen:"森",seng:"僧",sha:"莎砂杀刹沙纱傻啥煞脎歃痧裟霎鲨",shai:"筛晒酾",shan:"珊苫杉山删煽衫闪陕擅赡膳善汕扇缮剡讪鄯埏芟潸姗骟膻钐疝蟮舢跚鳝",shang:"墒伤商赏晌上尚裳垧绱殇熵觞",shao:"梢捎稍烧芍勺韶少哨邵绍劭苕潲蛸笤筲艄",she:"奢赊蛇舌舍赦摄射慑涉社设厍佘猞畲麝",shen:"砷申呻伸身深娠绅神沈审婶甚肾慎渗诜谂吲哂渖椹矧蜃",sheng:"声生甥牲升绳省盛剩胜圣丞渑媵眚笙",shi:"师失狮施湿诗尸虱十石拾时什食蚀实识史矢使屎驶始式示士世柿事拭誓逝势是嗜噬适仕侍释饰氏市恃室视试谥埘莳蓍弑唑饣轼耆贳炻礻铈铊螫舐筮豕鲥鲺",shou:"收手首守寿授售受瘦兽扌狩绶艏",shu:"蔬枢梳殊抒输叔舒淑疏书赎孰熟薯暑曙署蜀黍鼠属术述树束戍竖墅庶数漱恕倏塾菽忄沭涑澍姝纾毹腧殳镯秫鹬",shua:"刷耍唰涮",shuai:"摔衰甩帅蟀",shuan:"栓拴闩",shuang:"霜双爽孀",shui:"谁水睡税",shun:"吮瞬顺舜恂",shuo:"说硕朔烁蒴搠嗍濯妁槊铄",si:"斯撕嘶思私司丝死肆寺嗣四伺似饲巳厮俟兕菥咝汜泗澌姒驷缌祀祠锶鸶耜蛳笥",song:"松耸怂颂送宋讼诵凇菘崧嵩忪悚淞竦",sou:"搜艘擞嗽叟嗖嗾馊溲飕瞍锼螋",su:"苏酥俗素速粟僳塑溯宿诉肃夙谡蔌嗉愫簌觫稣",suan:"酸蒜算",sui:"虽隋随绥髓碎岁穗遂隧祟蓑冫谇濉邃燧眭睢",sun:"孙损笋荪狲飧榫跣隼",suo:"梭唆缩琐索锁所唢嗦娑桫睃羧",ta:"塌他它她塔獭挞蹋踏闼溻遢榻沓",tai:"胎苔抬台泰酞太态汰邰薹肽炱钛跆鲐",tan:"坍摊贪瘫滩坛檀痰潭谭谈坦毯袒碳探叹炭郯蕈昙钽锬覃",tang:"汤塘搪堂棠膛唐糖傥饧溏瑭铴镗耥螗螳羰醣",thang:"倘躺淌",theng:"趟烫",tao:"掏涛滔绦萄桃逃淘陶讨套挑鼗啕韬饕",te:"特",teng:"藤腾疼誊滕",ti:"梯剔踢锑提题蹄啼体替嚏惕涕剃屉荑悌逖绨缇鹈裼醍",tian:"天添填田甜恬舔腆掭忝阗殄畋钿蚺",tiao:"条迢眺跳佻祧铫窕龆鲦",tie:"贴铁帖萜餮",ting:"厅听烃汀廷停亭庭挺艇莛葶婷梃蜓霆",tong:"通桐酮瞳同铜彤童桶捅筒统痛佟僮仝茼嗵恸潼砼",tou:"偷投头透亠",tu:"凸秃突图徒途涂屠土吐兔堍荼菟钍酴",tuan:"湍团疃",tui:"推颓腿蜕褪退忒煺",tun:"吞屯臀饨暾豚窀",tuo:"拖托脱鸵陀驮驼椭妥拓唾乇佗坨庹沱柝砣箨舄跎鼍",wa:"挖哇蛙洼娃瓦袜佤娲腽",wai:"歪外",wan:"豌弯湾玩顽丸烷完碗挽晚皖惋宛婉万腕剜芄苋菀纨绾琬脘畹蜿箢",wang:"汪王亡枉网往旺望忘妄罔尢惘辋魍",wei:"威巍微危韦违桅围唯惟为潍维苇萎委伟伪尾纬未蔚味畏胃喂魏位渭谓尉慰卫倭偎诿隈葳薇帏帷崴嵬猥猬闱沩洧涠逶娓玮韪軎炜煨熨痿艉鲔",wen:"瘟温蚊文闻纹吻稳紊问刎愠阌汶璺韫殁雯",weng:"嗡翁瓮蓊蕹",wo:"挝蜗涡窝我斡卧握沃莴幄渥杌肟龌",wu:"巫呜钨乌污诬屋无芜梧吾吴毋武五捂午舞伍侮坞戊雾晤物勿务悟误兀仵阢邬圬芴庑怃忤浯寤迕妩骛牾焐鹉鹜蜈鋈鼯",xi:"昔熙析西硒矽晰嘻吸锡牺稀息希悉膝夕惜熄烯溪汐犀檄袭席习媳喜铣洗系隙戏细僖兮隰郗茜葸蓰奚唏徙饩阋浠淅屣嬉玺樨曦觋欷熹禊禧钸皙穸蜥蟋舾羲粞翕醯鼷",xia:"瞎虾匣霞辖暇峡侠狭下厦夏吓掀葭嗄狎遐瑕硖瘕罅黠",xian:"锨先仙鲜纤咸贤衔舷闲涎弦嫌显险现献县腺馅羡宪陷限线冼藓岘猃暹娴氙祆鹇痫蚬筅籼酰跹",xiang:"相厢镶香箱襄湘乡翔祥详想响享项巷橡像向象芗葙饷庠骧缃蟓鲞飨",xiao:"萧硝霄削哮嚣销消宵淆晓小孝校肖啸笑效哓咻崤潇逍骁绡枭枵筱箫魈",xie:"楔些歇蝎鞋协挟携邪斜胁谐写械卸蟹懈泄泻谢屑偕亵勰燮薤撷廨瀣邂绁缬榭榍歙躞",xin:"薪芯锌欣辛新忻心信衅囟馨莘歆铽鑫",xing:"星腥猩惺兴刑型形邢行醒幸杏性姓陉荇荥擤悻硎",xiong:"兄凶胸匈汹雄熊芎",xiu:"休修羞朽嗅锈秀袖绣莠岫馐庥鸺貅髹",xu:"墟戌需虚嘘须徐许蓄酗叙旭序畜恤絮婿绪续讴诩圩蓿怵洫溆顼栩煦砉盱胥糈醑",xuan:"轩喧宣悬旋玄选癣眩绚儇谖萱揎馔泫洵渲漩璇楦暄炫煊碹铉镟痃",xue:"靴薛学穴雪血噱泶鳕",xun:"勋熏循旬询寻驯巡殉汛训讯逊迅巽埙荀薰峋徇浔曛窨醺鲟",ya:"压押鸦鸭呀丫芽牙蚜崖衙涯雅哑亚讶伢揠吖岈迓娅琊桠氩砑睚痖",yan:"焉咽阉烟淹盐严研蜒岩延言颜阎炎沿奄掩眼衍演艳堰燕厌砚雁唁彦焰宴谚验厣靥赝俨偃兖讠谳郾鄢芫菸崦恹闫阏洇湮滟妍嫣琰晏胭腌焱罨筵酽魇餍鼹",yang:"殃央鸯秧杨扬佯疡羊洋阳氧仰痒养样漾徉怏泱炀烊恙蛘鞅",yao:"邀腰妖瑶摇尧遥窑谣姚咬舀药要耀夭爻吆崾徭瀹幺珧杳曜肴鹞窈繇鳐",ye:"椰噎耶爷野冶也页掖业叶曳腋夜液谒邺揶馀晔烨铘",yi:"一壹医揖铱依伊衣颐夷遗移仪胰疑沂宜姨彝椅蚁倚已乙矣以艺抑易邑屹亿役臆逸肄疫亦裔意毅忆义益溢诣议谊译异翼翌绎刈劓佾诒圪圯埸懿苡薏弈奕挹弋呓咦咿噫峄嶷猗饴怿怡悒漪迤驿缢殪贻旖熠钇镒镱痍瘗癔翊衤蜴舣羿翳酏黟",yin:"茵荫因殷音阴姻吟银淫寅饮尹引隐印胤鄞堙茚喑狺夤氤铟瘾蚓霪龈",ying:"英樱婴鹰应缨莹萤营荧蝇迎赢盈影颖硬映嬴郢茔莺萦撄嘤膺滢潆瀛瑛璎楹鹦瘿颍罂",yo:"哟唷",yong:"拥佣臃痈庸雍踊蛹咏泳涌永恿勇用俑壅墉慵邕镛甬鳙饔",you:"幽优悠忧尤由邮铀犹油游酉有友右佑釉诱又幼卣攸侑莸呦囿宥柚猷牖铕疣蝣鱿黝鼬",yu:"迂淤于盂榆虞愚舆余俞逾鱼愉渝渔隅予娱雨与屿禹宇语羽玉域芋郁吁遇喻峪御愈欲狱育誉浴寓裕预豫驭禺毓伛俣谀谕萸蓣揄喁圄圉嵛狳饫庾阈妪妤纡瑜昱觎腴欤於煜燠聿钰鹆瘐瘀窳蝓竽舁雩龉",yuan:"鸳渊冤元垣袁原援辕园员圆猿源缘远苑愿怨院塬沅媛瑗橼爰眢鸢螈鼋",yue:"曰约越跃钥岳粤月悦阅龠樾刖钺",yun:"耘云郧匀陨允运蕴酝晕韵孕郓芸狁恽纭殒昀氲",za:"匝砸杂拶咂",zai:"栽哉灾宰载再在咱崽甾",zan:"攒暂赞瓒昝簪糌趱錾",zang:"赃脏葬奘戕臧",zao:"遭糟凿藻枣早澡蚤躁噪造皂灶燥唣缫",ze:"责择则泽仄赜啧迮昃笮箦舴",zei:"贼",zen:"怎谮",zeng:"增憎曾赠缯甑罾锃",zha:"扎喳渣札轧铡闸眨栅榨咋乍炸诈揸吒咤哳怍砟痄蚱齄",zhai:"摘斋宅窄债寨砦",zhan:"瞻毡詹粘沾盏斩辗崭展蘸栈占战站湛绽谵搌旃",zhang:"樟章彰漳张掌涨杖丈帐账仗胀瘴障仉鄣幛嶂獐嫜璋蟑",zhao:"招昭找沼赵照罩兆肇召爪诏棹钊笊",zhe:"遮折哲蛰辙者锗蔗这浙谪陬柘辄磔鹧褚蜇赭",zhen:"珍斟真甄砧臻贞针侦枕疹诊震振镇阵缜桢榛轸赈胗朕祯畛鸩",zheng:"蒸挣睁征狰争怔整拯正政帧症郑证诤峥钲铮筝",zhi:"芝枝支吱蜘知肢脂汁之织职直植殖执值侄址指止趾只旨纸志挚掷至致置帜峙制智秩稚质炙痔滞治窒卮陟郅埴芷摭帙忮彘咫骘栉枳栀桎轵轾攴贽膣祉祗黹雉鸷痣蛭絷酯跖踬踯豸觯",zhong:"中盅忠钟衷终种肿重仲众冢锺螽舂舯踵",zhou:"舟周州洲诌粥轴肘帚咒皱宙昼骤啄着倜诹荮鬻纣胄碡籀舳酎鲷",zhu:"珠株蛛朱猪诸诛逐竹烛煮拄瞩嘱主著柱助蛀贮铸筑住注祝驻伫侏邾苎茱洙渚潴驺杼槠橥炷铢疰瘃蚰竺箸翥躅麈",zhua:"抓",zhuai:"拽",zhuan:"专砖转撰赚篆抟啭颛",zhuang:"桩庄装妆撞壮状丬",zhui:"椎锥追赘坠缀萑骓缒",zhun:"谆准",zhuo:"捉拙卓桌琢茁酌灼浊倬诼廴蕞擢啜浞涿杓焯禚斫",zi:"兹咨资姿滋淄孜紫仔籽滓子自渍字谘嵫姊孳缁梓辎赀恣眦锱秭耔笫粢觜訾鲻髭",zong:"鬃棕踪宗综总纵腙粽",zou:"邹走奏揍鄹鲰",zu:"租足卒族祖诅阻组俎菹啐徂驵蹴",zuan:"钻纂攥缵",zui:"嘴醉最罪",zun:"尊遵撙樽鳟",zuo:"昨左佐柞做作坐座阝阼胙祚酢",cou:"薮楱辏腠",nang:"攮哝囔馕曩",o:"喔",dia:"嗲",chuai:"嘬膪踹",cen:"岑涔",diu:"铥",nou:"耨",fou:"缶",bia:"髟"},Za={chineseToPinYin:function(e){for(var t=e.length,n="",r=new RegExp("[a-zA-Z0-9]"),a=0;a<t;a++){var o=e.substr(a,1),i=this.arraySearch(o,Ja);r.test(o)?n+=o:!1!==i&&(n+=i)}for(n=n.replace(/ /g,"-");n.indexOf("--")>0;)n=n.replace("--","-");return n},arraySearch:function(e,t){for(var n in Ja)if(-1!==Ja[n].indexOf(e))return this.ucfirst(n);return!1},ucfirst:function(e){if(e.length>0)return e.substr(0,1).toUpperCase()+e.substr(1,e.length)}},eo=[],to=[{label:"总工时",value:"0",key:"workHours"},{label:"标准工时",value:"1",key:"workHourStd"},{label:"加班总工时",value:"2",key:"wordHourOvertime"},{label:"请假总工时",value:"3",key:"workHourTakeLeave"},{label:"出勤工资",value:"4",key:"salary"},{label:"岗位工资",value:"5",key:"salaryPost"},{label:"工龄工资",value:"6",key:"salaryAge"},{label:"单件工资",value:"7",key:"salarySingleton"},{label:"单人几件数",value:"8",key:"numberSingleton"},{label:"班组计件数",value:"9",key:"numberTeam"},{label:"提成",value:"10",key:"salaryCommission"},{label:"保密工资",value:"11",key:"salaryConfidential"},{label:"交通补贴",value:"12",key:"subsidyTraffic"},{label:"通讯费补贴",value:"13",key:"subsidyCommunication"},{label:"餐补",value:"14",key:"subsidyMeal"},{label:"津贴",value:"15",key:"allowance"},{label:"病事假迟到",value:"16",key:"sickLeave"},{label:"应出勤天数",value:"17",key:"workDays"},{label:"实际出勤天数",value:"18",key:"workDaysActual"},{label:"考勤扣款",value:"19",key:"attendanceDeduction"},{label:"其他扣款",value:"20",key:"otherDeduction"},{label:"计税工资",value:"21",key:"salaryTax"},{label:"预扣个税",value:"22",key:"withHoldingPersonalTax"},{label:"个税退补",value:"23",key:"personalTaxRefund"}],no="",ro=0,ao={name:"salary",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM",uploadUrl:"https://api.xiaoerd.icu/salary/importSalary",downLoadUrl:"https://api.xiaoerd.icu/salary/exportSalary?token="+sessionStorage.getItem("token"),downLoadSalary:null,pagination:{total:0,current:1},loading:!1,visible:!1,visibleTag:!1,data:[],userNo:null,userName:null,salaryMonth:m(new Date).substring(0,10),columns:eo,moment:Te.a,plainOptions:to,tags:[],fixTags:[],salaryFieldList:[],tableLength:null,judge:!1,existence:null}},beforeCreate:function(){this.salaryForm=this.$form.createForm(this,{name:"dynamic_form_item2"}),this.salaryForm.getFieldDecorator("keys",{initialValue:[],preserve:!0})},created:function(){this.createSalaryTag(),this.salaryTag()},computed:{rowSelection:function(){return{onChange:function(e,t){no=e}}}},methods:{exportSalary:function(){var e=this;this.form.validateFields(function(t,n){void 0===n.userNo&&(n.userNo=""),void 0===n.userName&&(n.userName=""),void 0===n.salaryMonth?n.salaryMonth="":n.salaryMonth=m(n.salaryMonth).substring(0,10),t||(e.downLoadSalary="https://api.xiaoerd.icu/salary/salaryExport?token="+sessionStorage.getItem("token")+"&userNo="+n.userNo+"&userName="+n.userName+"&salaryMonth="+n.salaryMonth)})},add:function(){var e=this.salaryForm,t=e.getFieldValue("keys").concat(ro++);e.setFieldsValue({keys:t})},remove:function(e){var t=this.salaryForm,n=t.getFieldValue("keys");1!==n.length&&t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},onChangeOne:function(e){this.tags=e},createSalaryTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.salaryTag();case 2:0===t.sent.salaryFieldList.length&&(n=[{fieldName:"基本工资",fieldKey:"salaryBasic"},{fieldName:"绩效工资",fieldKey:"salaryMerit"},{fieldName:"加班工资",fieldKey:"salaryOvertime"},{fieldName:"奖金",fieldKey:"bonus"},{fieldName:"社保合计",fieldKey:"socialSecurity"},{fieldName:"住房公积金",fieldKey:"accumulationFund"},{fieldName:"个人所得税",fieldKey:"personalTax"},{fieldName:"应发工资",fieldKey:"salaryGross"},{fieldName:"实发金额",fieldKey:"salaryReal"}],e.addSalaryTag(n));case 4:case"end":return t.stop()}},t,e)}))()},salaryTag:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.salaryTag();case 2:n=t.sent,e.salaryFieldList=n.salaryFieldList,r=[],a=[],e.plainOptions.forEach(function(t){e.salaryFieldList.forEach(function(e){t.label===e.fieldName&&(r.push(t.value),a.push(t.label))})}),e.tags=r,e.fixTags=r,o=a.concat(["基本工资","绩效工资","加班工资","奖金","社保合计","住房公积金","个人所得税","应发工资","实发金额"]),i=[],e.salaryFieldList.forEach(function(e){i.push(e.fieldName)}),(i=i.filter(function(e){return!o.includes(e)})).forEach(function(t){e.salaryFieldList.forEach(function(n){t===n.fieldName&&(e.tags.push(n.fieldKey),e.plainOptions.push({label:n.fieldName,value:n.fieldKey,key:n.fieldKey}))})}),e.salaryMonth=m(new Date).substring(0,10),e.tableData(e.salaryMonth);case 16:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.userNo=this.userNo,r.userName=this.userName,r.salaryMonth=this.salaryMonth,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleChange:function(e){"done"===e.file.status&&this.tableData(this.salaryMonth)},showModal:function(){""===no||0===no.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showModalOne:function(){this.salaryForm.setFieldsValue({keys:[]}),this.visibleTag=!0},handleOk:function(){this.visible=!1,this.salaryDelete(no)},handleOkTag:function(){var e=this;this.judge=!1;var t=[],n=[];this.fixTags.filter(function(t){return!e.tags.includes(t)}).forEach(function(t){e.plainOptions.forEach(function(e){t===e.value&&n.push({fieldName:e.label,fieldKey:e.key})})});var r=[];n.forEach(function(t){e.salaryFieldList.forEach(function(e){t.fieldKey===e.fieldKey&&t.fieldName===e.fieldName&&r.push(e.id)})}),this.tags.forEach(function(n){e.plainOptions.forEach(function(e){n===e.value&&t.push({fieldName:e.label,fieldKey:e.key})})});var a=[];t.forEach(function(t){e.salaryFieldList.forEach(function(e){t.fieldKey===e.fieldKey&&a.push(t)})}),t=t.filter(function(e){return!a.includes(e)}),this.salaryForm.validateFields(function(n,a){var o=[],i=[];void 0!==a.salaryName&&a.salaryName.map(function(e){void 0!==e&&i.push(e.trim())});var s=[].concat(Xa()(new $t.a(i)));if(void 0!==s&&(s.forEach(function(e){if(void 0!==e&&""!==e.trim()){var t=Za.chineseToPinYin(e);t=t.substr(0,1).toLowerCase()+t.substr(1,t.length),o.push({fieldName:e,fieldKey:t})}}),console.log(o),o.forEach(function(t){e.salaryFieldList.forEach(function(n){t.fieldName===n.fieldName&&(e.existence=t.fieldName+"已存在",e.judge=!0)})})),o=o.concat(t),console.log(o),!n){if(e.judge)return e.$message.error(e.existence),!1;e.visibleTag=!1,r.length>0&&e.deleteSalaryTag(r),o.length>0&&e.addSalaryTag(o)}})},onChange:function(e){this.tags=e},formatDate:function(e){return m(e).substring(0,7)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.userNo=n.userNo,t.userName=n.userName,void 0===n.salaryMonth||null===n.salaryMonth?(t.salaryMonth="",n.salaryMonth=""):(n.salaryMonth=m(n.salaryMonth).substring(0,10),t.salaryMonth=n.salaryMonth),t.pagination.current=1,e||t.searchByConditions(n)})},salaryAdd:function(){this.bus.$emit("goToPage","salaryAdd")},salarySort:function(){this.bus.$emit("goToPage","salarySort")},addSalaryTag:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryTagAdd(e);case 2:0===n.sent.code&&t.salaryTag();case 4:case"end":return n.stop()}},n,t)}))()},deleteSalaryTag:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryTagDelete(e);case 2:0===n.sent.code&&t.salaryTag();case 4:case"end":return n.stop()}},n,t)}))()},salaryEdit:function(e){var t={id:e};this.bus.$emit("goToPage","salaryEdit"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryList(e);case 2:0===(r=n.sent).code&&(r.rows.length>0?(t.columns=[],eo=[{title:"工号",dataIndex:"user.userNo",width:100,fixed:"left"},{title:"姓名",dataIndex:"user.userName",width:100,fixed:"left"}],(a=(a=JSON.parse(r.rows[0].content)).sort(function(e,t){return e.sort-t.sort})).forEach(function(e){eo.push({title:e.field,dataIndex:e.key})}),eo.push({title:"月份",dataIndex:"salaryMonth",width:100,fixed:"right",scopedSlots:{customRender:"salaryMonth"}}),eo.push({title:"操作",key:"operation",width:100,fixed:"right",scopedSlots:{customRender:"action"}}),t.columns=eo,t.tableLength=400+100*a.length,r.rows.forEach(function(e){var t=JSON.parse(e.content);for(var n in t)e[t[n].key]=t[n].value})):(t.columns=[],eo=[{title:"工号",dataIndex:"user.userNo",width:100,fixed:"left"},{title:"姓名",dataIndex:"user.userName",width:100,fixed:"left"}],t.salaryFieldList.forEach(function(e){eo.push({title:e.fieldName,dataIndex:e.fieldKey})}),eo.push({title:"月份",dataIndex:"salaryMonth",width:100,fixed:"right",scopedSlots:{customRender:"salaryMonth"}}),eo.push({title:"操作",key:"operation",width:100,fixed:"right",scopedSlots:{customRender:"action"}}),t.tableLength=400+100*t.salaryFieldList.length,t.columns=eo),t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},salaryDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(t.salaryMonth),no="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryList({salaryMonth:e});case 2:0===(r=n.sent).code&&(r.rows.length>0?(t.columns=[],eo=[{title:"工号",dataIndex:"user.userNo",width:100,fixed:"left"},{title:"姓名",dataIndex:"user.userName",width:100,fixed:"left"}],(a=(a=JSON.parse(r.rows[0].content)).sort(function(e,t){return e.sort-t.sort})).forEach(function(e){eo.push({title:e.field,dataIndex:e.key})}),eo.push({title:"月份",dataIndex:"salaryMonth",width:100,fixed:"right",scopedSlots:{customRender:"salaryMonth"}}),eo.push({title:"操作",key:"operation",width:100,fixed:"right",scopedSlots:{customRender:"action"}}),t.columns=eo,t.tableLength=400+100*a.length,r.rows.forEach(function(e){var t=JSON.parse(e.content);for(var n in t)e[t[n].key]=t[n].value})):(t.columns=[],eo=[{title:"工号",dataIndex:"user.userNo",width:100,fixed:"left"},{title:"姓名",dataIndex:"user.userName",width:100,fixed:"left"}],t.salaryFieldList.forEach(function(e){eo.push({title:e.fieldName,dataIndex:e.fieldKey})}),eo.push({title:"月份",dataIndex:"salaryMonth",width:100,fixed:"right",scopedSlots:{customRender:"salaryMonth"}}),eo.push({title:"操作",key:"operation",width:100,fixed:"right",scopedSlots:{customRender:"action"}}),t.columns=eo,t.tableLength=400+100*t.salaryFieldList.length),t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()}}},oo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"salary"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo"],expression:"['userNo']"}],staticStyle:{width:"200px"},attrs:{placeholder:"工号"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName"],expression:"['userName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名"}})],1),e._v(" "),n("a-form-item",[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["salaryMonth",{initialValue:e.moment(e.salaryMonth,e.dateFormat)}],expression:"['salaryMonth', {initialValue: moment(salaryMonth, dateFormat)}]"}],attrs:{placeholder:"选择月份"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.salaryAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 下载模板")])])],1),e._v(" "),n("a-form-item",[n("a-upload",{attrs:{name:"file",headers:e.headers,multiple:!1,accept:".xls,.xlsx",action:e.uploadUrl},on:{change:e.handleChange}},[n("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportSalary}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadSalary}},[e._v(" 导出")])])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"add"},on:{click:e.showModalOne}},[e._v("编辑工资项")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"add"},on:{click:e.salarySort}},[e._v("工资项排序")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"添加工资项",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTag},model:{value:e.visibleTag,callback:function(t){e.visibleTag=t},expression:"visibleTag"}},[n("a-checkbox-group",{staticClass:"my-checkbox-group",attrs:{options:e.plainOptions,value:e.tags},on:{change:e.onChangeOne}}),e._v(" "),n("a-form",{attrs:{form:e.salaryForm,layout:"vertical"}},[e._l(e.salaryForm.getFieldValue("keys"),function(t){return n("a-form-item",{key:t,staticClass:"clear",staticStyle:{"margin-right":"20px",width:"200px"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["salaryName["+t+"]",{validateTrigger:["change","blur"]}],expression:"['salaryName[' + k + ']', {validateTrigger: ['change', 'blur'] }]"}],style:{display:"inline-block",float:"left",width:"180px"}}),e._v(" "),e.salaryForm.getFieldValue("keys").length>1?n("a-icon",{staticClass:"dynamic-delete-button mybotton",attrs:{type:"minus-circle-o",disabled:1===e.salaryForm.getFieldValue("keys").length},on:{click:function(){return e.remove(t)}}}):e._e()],1)}),e._v(" "),n("a-form-item",[n("a-button",{staticStyle:{"text-align":"center"},attrs:{typeof:"dashed"},on:{click:e.add}},[n("a-icon",{attrs:{type:"plus",value:"添加选项"}})],1)],1)],2)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",scroll:{x:e.tableLength},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"salaryMonth",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.salaryEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var io=n("VU/8")(ao,oo,!1,function(e){n("QLtu")},"data-v-7f9b2a83",null).exports,so={name:"salaryAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),salaryFieldList:[]}},created:function(){this.getSalaryTag()},methods:{getSalaryTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.salaryTag();case 2:(n=t.sent).salaryFieldList.forEach(function(e){null===e.sort&&(e.sort=99)}),n.salaryFieldList=n.salaryFieldList.sort(function(e,t){return e.sort-t.sort}),e.salaryFieldList=n.salaryFieldList;case 6:case"end":return t.stop()}},t,e)}))()},addSalary:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","salary");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){var r=[];for(var a in n)if("userId"!==a&&"userNo"!==a&&"salaryMonth"!==a){var o=a.split(";");void 0===n[a]||""===n[a].trim()?r.push({field:o[1],key:o[0],sort:Number(o[2]),value:""}):r.push({field:o[1],key:o[0],sort:Number(o[2]),value:n[a]})}n.content=w()(r),e||t.addSalary(n)})},goToBack:function(){this.bus.$emit("goToPage","salary")}}},co={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"salaryAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"用户id","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo",{rules:[{required:!0,message:"请填写用户工号!"}]}],expression:"['userNo', { rules: [{ required: true, message: '请填写用户工号!' }] }]"}]})],1),e._v(" "),e._l(e.salaryFieldList,function(e){return n("div",{key:e.fieldKey},[n("a-form-item",{attrs:{label:e.fieldName,"label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.fieldKey+";"+e.fieldName+";"+e.sort],expression:"[item.fieldKey + ';' + item.fieldName + ';' + item.sort]"}],attrs:{placeholder:e.fieldName}})],1)],1)}),e._v(" "),n("a-form-item",{attrs:{label:"月份","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["salaryMonth",{rules:[{required:!0,message:"请选择月份"}]}],expression:"['salaryMonth', {rules:[{required:true, message: '请选择月份'}]}]"}],attrs:{placeholder:"选择月份"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],2)],1)},staticRenderFns:[]};var lo=n("VU/8")(so,co,!1,function(e){n("v86L")},"data-v-18b4c5d8",null).exports,uo={name:"salaryEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM",data:{userId:null,salaryBasic:null,workDays:null,workDaysActual:null,workHours:null,workHourStd:null,wordHourOvertime:null,workHourTakeLeave:null,salary:null,salaryAge:null,salaryPost:null,salarySingleton:null,numberSingleton:null,numberTeam:null,salaryCommission:null,salaryMerit:null,salaryConfidential:null,subsidyTraffic:null,subsidyCommunication:null,subsidyMeal:null,bonus:null,salaryOvertime:null,allowance:null,deduction:null,sickLeave:null,salaryGross:null,socialSecurity:null,accumulationFund:null,salaryTax:null,personalTax:null,withHoldingPersonalTax:null,personalTaxRefund:null,salaryReal:null,salaryMonth:null},salaryFieldList:[],userNo:null,moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i,s;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryInfo({id:e});case 2:for(i in r=n.sent,console.log("res.salaryFieldList",r.salary),a=[],o=JSON.parse(r.salary.content))a.push({fieldName:o[i].field,fieldKey:o[i].key,sort:o[i].sort}),r.salary[o[i].key]=o[i].value;a=a.sort(function(e,t){return e.sort-t.sort}),t.salaryFieldList=a,t.data=r.salary,t.userNo=r.salary.user.userNo,s=new Date(r.salary.salaryMonth),t.data.salaryMonth=s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1);case 13:case"end":return n.stop()}},n,t)}))()},editSalary:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","salary");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id;var r=[];for(var a in n)if("userId"!==a&&"userNo"!==a&&"salaryMonth"!==a&&"id"!==a){console.log(a);var o=a.split(";");r.push({field:o[1],key:o[0],sort:Number(o[2]),value:n[a]})}n.content=w()(r),console.log(n),e||t.editSalary(n)})},goToBack:function(){this.bus.$emit("goToPage","salary")}}},fo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"salaryEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{staticStyle:{display:"none"},attrs:{label:"用户id","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userId",{initialValue:e.data.userId}],expression:"['userId', {initialValue: data.userId }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"工号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo",{initialValue:e.userNo}],expression:"['userNo', {initialValue: userNo }]"}],attrs:{readOnly:""}})],1),e._v(" "),e._l(e.salaryFieldList,function(t){return n("div",{key:t.fieldKey},[n("a-form-item",{attrs:{label:t.fieldName,"label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.fieldKey+";"+t.fieldName+";"+t.sort,{initialValue:e.data[t.fieldKey]}],expression:"[item.fieldKey + ';' + item.fieldName + ';' + item.sort, {initialValue: data[item.fieldKey] }]"}],attrs:{placeholder:t.fieldName}})],1)],1)}),e._v(" "),n("a-form-item",{attrs:{label:"月份","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["salaryMonth",{initialValue:e.moment(e.data.salaryMonth,e.dateFormat)}],expression:"['salaryMonth', {initialValue: moment(data.salaryMonth, dateFormat)}]"}],attrs:{placeholder:"选择月份"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],2)],1)},staticRenderFns:[]};var mo=n("VU/8")(uo,fo,!1,function(e){n("Uk8j")},"data-v-1c3b59cf",null).exports,po={name:"salarySort",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),salaryFieldList:[]}},created:function(){this.getSalaryTag()},methods:{getSalaryTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.salaryTag();case 2:n=t.sent,e.salaryFieldList=n.salaryFieldList;case 4:case"end":return t.stop()}},t,e)}))()},updateSalaryField:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.salaryFieldUpdate(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","salary");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){var r=[];for(var a in n)null===n[a]||""===n[a]?r.push({id:a,sort:99}):r.push({id:a,sort:n[a]});e||t.updateSalaryField(r)})},goToBack:function(){this.bus.$emit("goToPage","salary")}}},ho={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"salarySort"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[e._l(e.salaryFieldList,function(e){return n("div",{key:e.id},[n("a-form-item",{attrs:{label:e.fieldName,"label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.id+"",{initialValue:e.sort}],expression:"[item.id + '', {initialValue: item.sort }]"}],attrs:{type:"number",placeholder:e.fieldName+"排序"}})],1)],1)}),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],2)],1)},staticRenderFns:[]};var vo=n("VU/8")(po,ho,!1,function(e){n("eos2")},"data-v-75116744",null).exports;function go(e,t){if(t){var n=this.$data._chart,r=e.datasets.map(function(e){return e.label}),a=t.datasets.map(function(e){return e.label}),o=JSON.stringify(a);JSON.stringify(r)===o&&t.datasets.length===e.datasets.length?(e.datasets.forEach(function(e,r){var a=Object.keys(t.datasets[r]),o=Object.keys(e),i=a.filter(function(e){return"_meta"!==e&&-1===o.indexOf(e)});for(var s in i.forEach(function(e){delete n.data.datasets[r][e]}),e)e.hasOwnProperty(s)&&(n.data.datasets[r][s]=e[s])}),e.hasOwnProperty("labels")&&(n.data.labels=e.labels,this.$emit("labels:update")),e.hasOwnProperty("xLabels")&&(n.data.xLabels=e.xLabels,this.$emit("xlabels:update")),e.hasOwnProperty("yLabels")&&(n.data.yLabels=e.yLabels,this.$emit("ylabels:update")),n.update(),this.$emit("chart:update")):(n&&(n.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}var bo={reactiveData:{data:function(){return{chartData:null}},watch:{chartData:go}},reactiveProp:{props:{chartData:{type:Object,required:!0,default:function(){}}},watch:{chartData:go}}},yo=n("ikxi"),wo=n.n(yo);function xo(e,t){return{render:function(e){return e("div",{style:this.styles,class:this.cssClasses},[e("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(e){this.$data._plugins.push(e)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(e,n){this.$data._chart&&this.$data._chart.destroy(),this.$data._chart=new wo.a(this.$refs.canvas.getContext("2d"),{type:t,data:e,options:n,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var ko=xo("bar-chart","bar"),_o=(xo("horizontalbar-chart","horizontalBar"),xo("doughnut-chart","doughnut")),So=xo("line-chart","line"),Co=(xo("pie-chart","pie"),xo("polar-chart","polarArea"),xo("radar-chart","radar"),xo("bubble-chart","bubble"),xo("scatter-chart","scatter"),{name:"Chart",extends:So,mixins:[bo.reactiveProp],props:{chartdata:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartdata,this.options)},watch:{chartdata:function(){this.renderChart(this.chartdata,this.options)}}});var No=n("VU/8")(Co,null,!1,function(e){n("y/gW")},"data-v-060b4218",null).exports,To={name:"visit",components:{LineChart:No},data:function(){return{data:{list:[],listDate:[],listOne:[],listTwo:[],listThree:[],listFour:[]},loaded:!1,chartdata:null,options:{responsive:!0,maintainAspectRatio:!1}}},created:function(){this.tableData(),this.getChartData()},mounted:function(){},methods:{getBase:function(){this.loaded=!1;try{var e={labels:this.data.listDate,datasets:[{label:"店铺数量",borderColor:"rgb(58,161,255)",data:this.data.listOne}]};this.chartdata=e,this.loaded=!0}catch(e){console.error(e)}},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.visitInfo({});case 2:0===(n=t.sent).code&&(e.data=n.data);case 4:case"end":return t.stop()}},t,e)}))()},getChartData:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.visitShowList();case 2:0===(n=t.sent).code&&(r=[],a=[],n.data.forEach(function(e){r.push(m(e.day).substring(0,10)),a.push(e.nums)}),e.data.listDate=r,e.data.listOne=a),e.getBase();case 5:case"end":return t.stop()}},t,e)}))()}}},Do={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"visit"},[n("a-row",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"flex",gutter:16}},[n("a-col",{attrs:{span:6}},[n("a-card",{staticStyle:{"background-color":"rgb(58,161,255)",color:"#fff"}},[n("h2",{staticClass:"mytitle white"},[e._v("累计访问量")]),e._v(" "),void 0!==e.data.visitPv&&null!==e.data.visitPv?n("p",{staticClass:"visit-ps"},[e._v(e._s(e.data.visitPv))]):n("p",{staticClass:"visit-ps"},[e._v("--")])])],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-card",{staticStyle:{"background-color":"rgb(78,203,115)",color:"#fff"}},[n("h2",{staticClass:"mytitle white"},[e._v("用户总量")]),e._v(" "),void 0!==e.data.totalMember&&null!==e.data.totalMember?n("p",{staticClass:"visit-ps"},[e._v(e._s(e.data.totalMember))]):n("p",{staticClass:"visit-ps"},[e._v("--")])])],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-card",{staticStyle:{"background-color":"rgb(251,212,55)",color:"#fff"}},[n("h2",{staticClass:"mytitle white"},[e._v("访问人数")]),e._v(" "),void 0!==e.data.visitUv&&null!==e.data.visitUv?n("p",{staticClass:"visit-ps"},[e._v(e._s(e.data.visitUv))]):n("p",{staticClass:"visit-ps"},[e._v("--")])])],1),e._v(" "),n("a-col",{attrs:{span:6}},[n("a-card",{staticStyle:{"background-color":"rgb(54,203,203)",color:"#fff"}},[n("h2",{staticClass:"mytitle white"},[e._v("总成交额")]),e._v(" "),void 0!==e.data.totalAmount&&null!==e.data.totalAmount?n("p",{staticClass:"visit-ps"},[e._v(e._s(e.data.totalAmount))]):n("p",{staticClass:"visit-ps"},[e._v("--")])])],1)],1),e._v(" "),n("div",[n("h1",{staticClass:"mytitle"},[e._v("平台店铺数")]),e._v(" "),n("div",{staticClass:"container"},[e.loaded?n("line-chart",{attrs:{chartdata:e.chartdata,options:e.options}}):e._e()],1)])],1)},staticRenderFns:[]};var Io=n("VU/8")(To,Do,!1,function(e){n("mAf+")},"data-v-8ee57aaa",null).exports,Mo={name:"borrowRanking",data:function(){return{borrowRanking:[]}},created:function(){this.tableData()},methods:{tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.borrowRanking({});case 2:n=t.sent,console.log(n),0===n.code&&(e.borrowRanking=n.borrowRanking);case 5:case"end":return t.stop()}},t,e)}))()}}},Oo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"borrowRanking"},[n("a-row",{attrs:{type:"flex"}},e._l(e.borrowRanking,function(t,r){return n("a-col",{key:t.id,staticClass:"one",attrs:{span:4}},[n("a-card",{staticStyle:{width:"250px"}},[n("p",[e._v(e._s(r+1))]),e._v(" "),n("p",[n("img",{attrs:{src:t.picUrl,width:"200px"}})]),e._v(" "),n("p",[e._v(e._s(t.bookName))])])],1)}),1)],1)},staticRenderFns:[]};var Ao=n("VU/8")(Mo,Oo,!1,function(e){n("0wX1")},"data-v-681a9d1b",null).exports,Lo=[{title:"排行",scopedSlots:{customRender:"data"}},{title:"头像",dataIndex:"avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"nickName"},{title:"姓名(电话)",dataIndex:"realName"},{title:"借阅数量(本)",dataIndex:"borrowNum"},{title:"最近一次借阅",dataIndex:"borrowRecently",scopedSlots:{customRender:"borrowRecently"}}],Eo={name:"memberAnalysis",data:function(){return{data:[],columns:Lo}},created:function(){this.tableData()},methods:{change:function(e){var t="",n=w()(e);return this.data.forEach(function(e,r){w()(e)===n&&(t=r+1)}),t},formatDate:function(e){return m(e)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.borrowTop({});case 2:n=t.sent,console.log(n),0===n.code&&(e.data=n.borrowTop);case 5:case"end":return t.stop()}},t,e)}))()}}},zo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberAnalysis"},[n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id"},scopedSlots:e._u([{key:"data",fn:function(t,r){return n("span",{},[e._v("\n      "+e._s(e.change(t))+"\n    ")])}},{key:"index",fn:function(t){return n("span",{},[e._v(e._s(e.change(t)))])}},{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}},{key:"borrowRecently",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var Ro=n("VU/8")(Eo,zo,!1,function(e){n("X+t2")},"data-v-19951706",null).exports,Vo=[{title:"书名",dataIndex:"bookName"},{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"音频",dataIndex:"audioUrl",width:300,scopedSlots:{customRender:"audioUrl"}},{title:"时长",dataIndex:"duration"},{title:"播放次数",dataIndex:"listenTimes"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Bo="",$o={name:"audioList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],bookName:null,duration:null,listenTimes:null,columns:Vo}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Bo=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,r.duration=this.duration,r.listenTimes=this.listenTimes,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Bo||0===Bo.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(Bo)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.duration&&null!==n.duration&&(n.duration=n.duration.trim()),t.duration=n.duration,void 0!==n.listenTimes&&null!==n.listenTimes&&(n.listenTimes=n.listenTimes.trim()),t.listenTimes=n.listenTimes,t.pagination.current=1,e||t.searchByConditions(n)})},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Bo="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},audioAdd:function(){this.bus.$emit("goToPage","audioAdd")},audioEdit:function(e){var t={id:e};this.bus.$emit("goToPage","audioEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.audioList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Uo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["duration"],expression:"['duration']"}],staticStyle:{width:"200px"},attrs:{placeholder:"时长",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["listenTimes"],expression:"['listenTimes']"}],staticStyle:{width:"200px"},attrs:{placeholder:"播放次数",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.audioAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"audioUrl",fn:function(e){return n("audio",{attrs:{src:e,controls:""}})}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.audioEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Po=n("VU/8")($o,Uo,!1,function(e){n("4FQh")},"data-v-8f827730",null).exports,Fo=[{title:"图书名称",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}}];function Ho(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var jo="",qo={name:"audioAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),tableForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loadingOne:!1,visible:!1,visibleOne:!1,columns:Fo,replaceFields:{children:"children",title:"label",key:"id"},bookData:[],pagination:{total:0,current:1},showList:[],tags:[],listOne:[],bookName:null,data:{imgUrl:null,bookName:null,picUrl:null,audioUrl:null,duration:null,describe:null}}},created:function(){this.getBook(),this.getTag()},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){jo=t[0]}}}},methods:{editors:function(e){this.content=e},onCheck:function(e,t){this.tags=e},handleOkOne:function(){this.showList=[],this.visibleOne=!1,this.showList=this.tags},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},showModalOne:function(){this.visibleOne=!0},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.tableForm.validateFields(function(e,n){t.bookName=n.bookNameOne,n.bookName=n.bookNameOne,t.pagination.current=1,e||t.searchByConditions(n)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){this.visible=!0},handleOk:function(){this.visible=!1,this.data.bookName=jo.bookName,this.data.imgUrl=jo.picUrl,this.data.picUrl=jo.picUrl},getDuration:function(){this.data.duration=parseInt(this.$refs.audio.duration)},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookData=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookData=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(Ho(e.file.originFileObj,function(e){t.data.picUrl=e,t.loading=!1}),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUploadOne:function(e){var t="audio/mp3"===e.type||"video/mp4"===e.type||"audio/mpeg"===e.type;return t||(this.loadingOne=!0,this.$message.error("音频格式不正确!")),t},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChangeOne:function(e){var t=this;"done"===e.file.status&&(Ho(e.file.originFileObj,function(e){t.$message.success("上传文件成功")}),this.loadingOne=!0,this.data.audioUrl=e.file.response.url)},handleRemove:function(){this.data.duration=null,this.data.audioUrl=null,this.loadingOne=!1},getContent:function(e){this.data.describe=e},addAudio:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","audioList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.data.imgUrl,n.audioUrl=t.data.audioUrl,n.describe=t.content,null!==n.picUrl&&""!==n.picUrl&&void 0!==n.picUrl?null!==n.bookName&&""!==n.bookName.trim()?void 0!==n.audioUrl&&""!==n.audioUrl&&null!==n.audioUrl?(n.duration=t.data.duration,void 0!==n.duration&&""!==n.duration?(n.tags=t.tags,e||t.addAudio(n)):t.$message.warn("请选择时长")):t.$message.warn("请选择音频"):t.$message.warn("请输入图书名称"):t.$message.warn("请选择图书或上传图片")})},goToBack:function(){this.bus.$emit("goToPage","audioList")}}},Wo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"选择图书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,initialValue:e.data.bookName}],expression:"['bookName', { required: true,initialValue: data.bookName }]"}],attrs:{placeholder:"请输入图书名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,disabled:e.loadingOne,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("上传音频")])],1),e._v(" "),e.data.audioUrl?n("audio",{ref:"audio",attrs:{src:e.data.audioUrl,controls:""},on:{canplay:e.getDuration}}):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"时长","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["duration",{required:!0,initialValue:e.data.duration}],expression:"['duration', { required: true,initialValue: data.duration }]"}],attrs:{readOnly:"",placeholder:"请输入时长"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModalOne}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"简介","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{attrs:{form:e.tableForm,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNameOne"],expression:"['bookNameOne']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",dataSource:e.bookData,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}}])})],1)],1)},staticRenderFns:[]};var Yo=n("VU/8")(qo,Wo,!1,function(e){n("6s9+")},"data-v-34449d2e",null).exports,Go=[{title:"图书名称",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}}];function Ko(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var Qo="",Xo={name:"audioEdit",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),tableForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loadingOne:!1,visible:!1,visibleOne:!1,columns:Go,bookData:[],pagination:{total:0,current:1},showList:[],listOne:[],replaceFields:{children:"children",title:"label",key:"id"},tags:[],data:{bookId:null,bookName:null,categoryId:null,imgUrl:null,picUrl:null,audioUrl:null,duration:null,describe:null},richTextData:""}},props:{passData:Object},created:function(){this.getTag(),this.getBook()},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){Qo=t[0]}}}},methods:{editors:function(e){this.content=e},showModalOne:function(){this.visibleOne=!0},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},onCheck:function(e,t){this.tags=e},handleOkOne:function(){this.showList=[],this.visibleOne=!1,this.showList=this.tags},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.tableForm.validateFields(function(e,n){t.bookName=n.bookNameOne,n.bookName=n.bookNameOne,t.pagination.current=1,e||t.searchByConditions(n)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleOk:function(){this.visible=!1,this.data.bookName=Qo.bookName,this.data.imgUrl=Qo.picUrl,this.data.picUrl=Qo.picUrl},showModal:function(){this.visible=!0},getDuration:function(){this.data.duration=parseInt(this.$refs.audio.duration)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioInfo({id:e});case 2:r=n.sent,t.data=r.audio,t.data.imgUrl=r.audio.picUrl,t.content=r.audio.describe,t.data.describe=r.audio.describe,t.tags=r.audio.tags,t.showList=t.tags;case 9:case"end":return n.stop()}},n,t)}))()},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookData=n.rows,e.pagination.total=n.total,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookData=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(Ko(e.file.originFileObj,function(e){t.data.picUrl=e,t.loading=!1}),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},beforeUploadOne:function(e){var t="audio/mp3"===e.type||"video/mp4"===e.type||"audio/mpeg"===e.type;return t||(this.data.duration=null,this.data.audioUrl=null,this.loadingOne=!0,this.$message.error("音频格式不正确!")),t},handleChangeOne:function(e){var t=this;"done"===e.file.status&&(Ko(e.file.originFileObj,function(e){t.$message.success("上传文件成功")}),this.loadingOne=!0,this.data.audioUrl=e.file.response.url)},handleRemove:function(){this.data.duration=null,this.data.audioUrl=null,this.loadingOne=!1},getContent:function(e){this.data.describe=e},editAudio:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","audioList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.picUrl=t.data.imgUrl,n.audioUrl=t.data.audioUrl,n.describe=t.content,null!==n.picUrl&&""!==n.picUrl&&void 0!==n.picUrl?null!==n.bookName&&""!==n.bookName.trim()?void 0!==n.audioUrl&&""!==n.audioUrl&&null!==n.audioUrl?(n.duration=t.data.duration,void 0!==n.duration&&""!==n.duration?(n.tags=t.tags,e||t.editAudio(n)):t.$message.warn("请选择时长")):t.$message.warn("请选择音频"):t.$message.warn("请输入图书名称"):t.$message.warn("请选择图片")})},goToBack:function(){this.bus.$emit("goToPage","audioList")}}},Jo={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"重选图书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,initialValue:e.data.bookName}],expression:"['bookName', { required: true,initialValue: data.bookName }]"}],attrs:{placeholder:"请输入图书名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,disabled:e.loadingOne,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("重传音频")])],1),e._v(" "),null!==e.data.audioUrl?n("audio",{ref:"audio",attrs:{src:e.data.audioUrl,controls:""},on:{canplay:e.getDuration}}):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"时长","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["duration",{required:!0,initialValue:e.data.duration}],expression:"['duration', { required: true,initialValue: data.duration}]"}],attrs:{readOnly:"",placeholder:"请输入时长"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModalOne}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"简介","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{attrs:{form:e.tableForm,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNameOne"],expression:"['bookNameOne']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",dataSource:e.bookData,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}}])})],1)],1)},staticRenderFns:[]};var Zo=n("VU/8")(Xo,Jo,!1,function(e){n("iHo2")},"data-v-a8d7a1e4",null).exports,ei=[{title:"属性名",dataIndex:"label"},{title:"类型",dataIndex:"type"},{title:"排序",dataIndex:"sort"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],ti="",ni={name:"tag",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],permissions:localStorage.permissions,visible:!1,columns:ei}},created:function(){-1!==this.permissions.indexOf("attr:update")&&4===ei.length&&ei.push({title:"操作",width:180,scopedSlots:{customRender:"action"}}),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ti=e}}}},methods:{showModal:function(){""===ti||0===ti.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(ti)},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ti="");case 4:case"end":return n.stop()}},n,t)}))()},formatDate:function(e){return m(e)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},attrAdd:function(){this.bus.$emit("goToPage","tagAdd")},addLevel:function(){this.bus.$emit("goToPage","tagAddLevel")},attrEdit:function(e){var t={id:e};this.bus.$emit("goToPage","tagEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:n=t.sent,e.data=e.translateData(n.rows),e.sortList(e.data);case 5:case"end":return t.stop()}},t,e)}))()},sortList:function(e){var t=this;null===e&&0===e.length||(e.forEach(function(e){void 0!==e.children&&(e.children.forEach(function(e){void 0!==e.children&&t.sortByKey(e.children,"sort")}),t.sortByKey(e.children,"sort"))}),this.sortByKey(e,"sort"))},sortByKey:function(e,t){return e.sort(function(e,n){var r=e[t],a=n[t];return r<a?-1:r>a?1:0})},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})})}),t}}},ri={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tag"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[-1!==e.permissions.indexOf("attr:save")?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.attrAdd}},[e._v("新增")])],1):e._e(),e._v(" "),-1!==e.permissions.indexOf("attr:saveLevel")?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addLevel}},[e._v("新增三级")])],1):e._e(),e._v(" "),-1!==e.permissions.indexOf("attr:delete")?n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1):e._e()],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.attrEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var ai=n("VU/8")(ni,ri,!1,function(e){n("yS18")},"data-v-83841424",null).exports,oi={name:"tagAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{},typeShow:!0,list:[]}},created:function(){this.getParentInfo()},methods:{getParentInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({parentId:0});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.typeShow=!1},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0===n.parentId&&(n.parentId=0),void 0!==n.label&&""!==n.label?!0!==t.typeShow||void 0!==n.type&&""!==n.type?void 0!==n.sort&&""!==n.sort?e||t.addAttr(n):t.$message.warn("排序不能为空"):t.$message.warn("类型不能为空"):t.$message.warn("标签名不能为空")})},addAttr:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","tag");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","tag")}}},ii={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tagAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择上级"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"属性名","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{required:!0,rules:[{message:"属性名!"}]}],expression:"['label', { required: true,rules: [{ message: '属性名!' }] }]"}],attrs:{placeholder:"属性名"}})],1),e._v(" "),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.typeShow,expression:"typeShow"}],attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{required:!0,rules:[{message:"类型!"}]}],expression:"['type', { required: true,rules: [{ message: '类型!' }] }]"}],attrs:{placeholder:"类型"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,rules:[{message:"排序!"}]}],expression:"['sort', { required: true,rules: [{ message: '排序!' }] }]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var si=n("VU/8")(oi,ii,!1,function(e){n("u/B0")},"data-v-1f42a7d6",null).exports,ci={name:"tagAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{},list:[]}},created:function(){this.getParentInfo()},methods:{getParentInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getAllSecond();case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.parentId?void 0!==n.label&&""!==n.label?void 0!==n.sort&&""!==n.sort?e||t.addAttr(n):t.$message.warn("排序不能为空"):t.$message.warn("标签名不能为空"):t.$message.warn("上级目录不能为空")})},addAttr:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","tag");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","tag")}}},li={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tagAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择上级"}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"属性名","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{required:!0,rules:[{message:"属性名!"}]}],expression:"['label', { required: true,rules: [{ message: '属性名!' }] }]"}],attrs:{placeholder:"属性名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,rules:[{message:"排序!"}]}],expression:"['sort', { required: true,rules: [{ message: '排序!' }] }]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ui=n("VU/8")(ci,li,!1,function(e){n("x+bW")},"data-v-68639bd1",null).exports,di={name:"tagEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{parentId:null,label:null,type:null,sort:null},typeShow:!1,list:[]}},props:{passData:Object},created:function(){this.getParentInfo()},methods:{getParentInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList();case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrInfo({id:e});case 2:r=n.sent,t.data=r.attr,0===t.data.parentId&&(t.data.parentId=void 0,t.typeShow=!0);case 5:case"end":return n.stop()}},n,t)}))()},selectChange:function(e){},editAttr:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","tag");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0===n.parentId&&(n.parentId=0),""!==n.label?!0!==t.typeShow||void 0!==n.type&&""!==n.type?""!==n.sort?(n.id=t.passData.id,e||t.editAttr(n)):t.$message.warn("排序不能为空"):t.$message.warn("类型不能为空"):t.$message.warn("标签名不能为空")})},goToBack:function(){this.bus.$emit("goToPage","tag")}}},fi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tagEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择上级",disabled:""},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"属性名","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{required:!0,rules:[{message:"属性名!"}],initialValue:e.data.label}],expression:"['label', { required: true,rules: [{ message: '属性名!' }],initialValue: data.label }]"}],attrs:{placeholder:"属性名"}})],1),e._v(" "),n("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.typeShow,expression:"typeShow"}],attrs:{label:"类型","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{required:!0,rules:[{message:"类型!"}],initialValue:e.data.type}],expression:"['type', { required: true,rules: [{ message: '类型!' }],initialValue: data.type }]"}],attrs:{placeholder:"类型"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,initialValue:e.data.sort}],expression:"['sort', { required: true,initialValue: data.sort }]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var mi=n("VU/8")(di,fi,!1,function(e){n("ETdn")},"data-v-a6dd7878",null).exports,pi=[{title:"试卷",dataIndex:"paper.title"},{title:"真实姓名",dataIndex:"realName"},{title:"生日",dataIndex:"birthday"},{title:"得分",dataIndex:"score"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],hi={name:"answer",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,title:null,realName:null,score:null,data:[],columns:pi}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.title=this.title,r.realName=this.realName,r.score=this.score,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},formatDate:function(e){return m(e)},answerUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","answerDetail"),this.bus.$emit("passData",t)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.score&&null!==n.score&&(n.score=n.score.trim()),t.score=n.score,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.answerList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.answerList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},vi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"answer"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"试卷",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["score"],expression:"['score']"}],staticStyle:{width:"200px"},attrs:{placeholder:"得分",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.answerUpdate(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var gi=n("VU/8")(hi,vi,!1,function(e){n("R2ow")},"data-v-620155fc",null).exports,bi={name:"answerDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM-DD",paperList:[],memberList:[],questionList:[],data:{realName:null},moment:Te.a}},props:{passData:Object},created:function(){this.getMemberList()},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.answerInfo({id:e});case 2:r=n.sent,t.data=r.answer,t.data.realName=r.answer.realName,t.getQuestionInfo(t.data.paperId);case 6:case"end":return n.stop()}},n,t)}))()},getQuestionInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.paperInfo({id:e});case 2:r=n.sent,t.questionList=r.paper.questionList;case 4:case"end":return n.stop()}},n,t)}))()},getPaperList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.paperList({});case 2:0===(n=t.sent).code&&(e.paperList=n.rows),e.getInfo(e.passData.id);case 5:case"end":return t.stop()}},t,e)}))()},getMemberList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.memberList({});case 2:0===(n=t.sent).code&&(e.memberList=n.rows),e.getPaperList();case 5:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},goToBack:function(){this.bus.$emit("goToPage","answer")}}},yi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"answerDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[null!==e.data.memberId?n("a-form-item",{attrs:{label:"会员","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberId",{initialValue:e.data.memberId}],expression:"['memberId',{initialValue: data.memberId}]"}],staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择会员"}},e._l(e.memberList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.realName))])}),1)],1):n("a-form-item",{attrs:{label:"会员","label-col":{span:2},"wrapper-col":{span:5}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName",{initialValue:e.data.realName}],expression:"['realName',{initialValue: data.realName}]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"生日","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{initialValue:e.moment(e.data.birthday,e.dateFormat)}],expression:"['birthday',{initialValue: moment(data.birthday, dateFormat)}]"}],attrs:{disabled:"",placeholder:"选择生日"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"试卷","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["paperId",{initialValue:e.data.paperId}],expression:"['paperId',{initialValue: data.paperId}]"}],staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择试卷"}},e._l(e.paperList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])}),1)],1),e._v(" "),e._l(e.questionList,function(t){return n("a-form-item",{key:t.id,attrs:{label:" ","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-form-item",{staticStyle:{display:"none"},attrs:{label:"问题id","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["answerQuestionList["+t.id+"].questionId",{initialValue:t.id}],expression:"['answerQuestionList[' + item.id + '].questionId', {initialValue: item.id }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"问题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["answerQuestionList["+t.id+"].questionTitle",{initialValue:t.questionTitle}],expression:"['answerQuestionList[' + item.id + '].questionTitle', {initialValue: item.questionTitle }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",e._l(t.optionList,function(r){return 1===t.questionType?n("div",{key:r.id,staticStyle:{"margin-bottom":"6px"}},[e._v(e._s(r.optionValue)+":"+e._s(r.optionName))]):e._e()}),0),e._v(" "),n("a-form-item",{attrs:{label:"答案","label-col":{span:2},"wrapper-col":{span:16}}},e._l(e.data.answerQuestionList,function(r){return r.questionId===t.id?n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["answerQuestionList["+t.id+"].answerContent",{initialValue:r.answerContent}],expression:"['answerQuestionList[' + item.id + '].answerContent', {initialValue: item3.answerContent }]"}],key:r.id,attrs:{readOnly:""}}):e._e()}),1),e._v(" "),n("a-form-item",{attrs:{label:"分数","label-col":{span:2},"wrapper-col":{span:16}}},e._l(e.data.answerQuestionList,function(r){return r.questionId===t.id?n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["answerQuestionList["+t.id+"].score",{initialValue:r.score}],expression:"['answerQuestionList[' + item.id + '].score', {initialValue: item3.score }]"}],key:r.id,attrs:{readOnly:""}}):e._e()}),1)],1)}),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],2)],1)},staticRenderFns:[]};var wi=n("VU/8")(bi,yi,!1,function(e){n("eu5e")},"data-v-1969abf9",null).exports,xi=[{title:"键",dataIndex:"key",width:"20%",scopedSlots:{customRender:"keyShow"}},{title:"值",dataIndex:"value",width:"60%",scopedSlots:{customRender:"valueShow"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],ki="",_i={name:"config",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,addVisible:!0,data:[],columns:xi}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ki=e}}}},methods:{showModal:function(){""===ki||0===ki.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.configDelete(ki)},configDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.configDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ki="");case 4:case"end":return n.stop()}},n,t)}))()},configEdit:function(e){var t={id:e};this.bus.$emit("goToPage","configEdit"),this.bus.$emit("passData",t)},configAdd:function(){this.bus.$emit("goToPage","configAdd")},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.configList({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,0!==e.data.length?e.addVisible=!1:e.addVisible=!0);case 4:case"end":return t.stop()}},t,e)}))()}}},Si={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"config"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[e.addVisible?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.configAdd}},[e._v("新增")])],1):e._e(),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"keyShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.key}},[e._v("\n      借阅须知\n    ")])}},{key:"valueShow",fn:function(t,r){return n("div",{style:{maxWidth:"600px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.value}},[e._v("\n      "+e._s(r.value)+"\n    ")])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.configEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Ci=n("VU/8")(_i,Si,!1,function(e){n("1pkV")},"data-v-9ccc7744",null).exports,Ni={name:"configAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,data:{describe:null},richTextData:""}},created:function(){},methods:{editors:function(e){this.content=e},getContent:function(e){this.data.describe=e},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.key?void 0!==t.content&&""!==t.content.replace(/(^\s*)|(\s*$)/g,"")?(n.value=t.content,e||t.addConfig(n)):t.$message.warn("请输入值"):t.$message.warn("请选择键值")})},addConfig:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.configAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","config")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","config")}}},Ti={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"configAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"键","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["key"],expression:"['key']"}],attrs:{placeholder:"请选择键"}},[n("a-select-option",{attrs:{value:"borrowInstructions"}},[e._v("借阅须知")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"值","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Di=n("VU/8")(Ni,Ti,!1,function(e){n("GZzZ")},"data-v-bf4fce56",null).exports,Ii={name:"configEdit",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,data:{key:null,value:null,describe:null},richTextData:""}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{editors:function(e){this.content=e},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.configInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.config,t.content=t.data.value);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.value=t.content,e||t.editConfig(n)})},editConfig:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.configEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","config"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","config")},getContent:function(e){this.data.describe=e}}},Mi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"configEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"键","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["key",{initialValue:e.data.key}],expression:"['key',{initialValue: data.key}]"}]},[n("a-select-option",{attrs:{value:"borrowInstructions"}},[e._v("借阅须知")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"值","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var Oi=n("VU/8")(Ii,Mi,!1,function(e){n("L6PU")},"data-v-4bd32a37",null).exports,Ai=[{title:"编号",dataIndex:"id"},{title:"租户名称",dataIndex:"tenantName"},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"剩余时间(天)",dataIndex:"expireDay",align:"center",scopedSlots:{customRender:"expireDay"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],Li="",Ei={name:"tenant",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,tenantName:null,status:null,data:[],columns:Ai}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Li=e}}}},methods:{setOpenId:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.setOpenId({appId:"wx730a07cdfd056dd9"});case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.tenantName=this.tenantName,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Li||0===Li.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.tenantDelete(Li)},tenantEdit:function(e){var t={id:e};this.bus.$emit("goToPage","tenantEdit"),this.bus.$emit("passData",t)},tenantAdd:function(){this.bus.$emit("goToPage","tenantAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.tenantName&&null!==n.tenantName&&(n.tenantName=n.tenantName.trim()),t.tenantName=n.tenantName,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},tenantDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,t.$Http.tenantDelete(e);case 3:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Li="");case 5:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.tenantList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.tenantList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},zi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tenant"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantName"],expression:"['tenantName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"租户名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:1}},[e._v("在业")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("停业")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.tenantAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.setOpenId}},[e._v("openId")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"startTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"在业":"停业"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"expireDay",fn:function(t){return n("span",{style:t<30?"color: #f50":""},[e._v(e._s(t<0?0:t))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.tenantEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Ri=n("VU/8")(Ei,zi,!1,function(e){n("c8sk")},"data-v-38c9b5bc",null).exports,Vi={name:"tenantAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),data:{status:1}}},created:function(){},methods:{onChange:function(e,t){},onOk:function(e){},changeStatus:function(e){},addTenant:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.tenantAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","tenant");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.tenantName&&""!==n.tenantName.trim()?void 0!==n.startTime?void 0!==n.endTime?e||t.addTenant(n):t.$message.warn("请选择结束时间"):t.$message.warn("请选择开始时间"):t.$message.warn("租户名称不能为空")})},goToBack:function(){this.bus.$emit("goToPage","tenant")}}},Bi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tenantAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"租户名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantName"],expression:"['tenantName']"}],attrs:{placeholder:"请输入租户名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime"],expression:"['startTime']"}],attrs:{showTime:"",placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"结束时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"['endTime']"}],attrs:{showTime:"",placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("在业")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("停业")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var $i=n("VU/8")(Vi,Bi,!1,function(e){n("NUv0")},"data-v-443d14a2",null).exports,Ui={name:"tenantEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM-DD hh:mm:ss",data:{tenantName:null,startTime:null,endTime:null,status:null},moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.tenantInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.sysTenant,t.data.startTime=m(r.sysTenant.startTime),t.data.endTime=m(r.sysTenant.endTime));case 4:case"end":return n.stop()}},n,t)}))()},onChange:function(e,t){this.data.startTime=e},onOk:function(e){},onChangeOne:function(e,t){this.data.endTime=e},onOkOne:function(e){},changeStatus:function(e){},editTenant:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.tenantEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","tenant");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.startTime=t.data.startTime,n.endTime=t.data.endTime,void 0!==n.tenantName&&""!==n.tenantName.trim()?e||t.editTenant(n):t.$message.warn("租户名称不能为空")})},goToBack:function(){this.bus.$emit("goToPage","tenant")}}},Pi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tenantEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"租户名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tenantName",{initialValue:e.data.tenantName}],expression:"['tenantName', {initialValue: data.tenantName}]"}],attrs:{placeholder:"请输入租户名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{showTime:"",placeholder:"选择开始时间",format:e.dateFormat,value:e.moment(e.data.startTime,e.dateFormat)},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"结束时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{showTime:"",placeholder:"选择开始时间",format:e.dateFormat,value:e.moment(e.data.endTime,e.dateFormat)},on:{change:e.onChangeOne,ok:e.onOkOne}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("在业")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("停业")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Fi=n("VU/8")(Ui,Pi,!1,function(e){n("afix")},"data-v-618af876",null).exports,Hi=[{title:"经度",dataIndex:"longitude"},{title:"纬度",dataIndex:"latitude"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],ji="",qi={name:"clockSettings",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Hi}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ji=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===ji||0===ji.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteClockSettings(ji)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1})},clockSettingsAdd:function(){this.bus.$emit("goToPage","clockSettingsAdd")},clockSettingsEdit:function(e){var t={id:e};this.bus.$emit("goToPage","clockSettingsEdit"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockSettingsList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},deleteClockSettings:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockSettingsDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ji="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.clockSettingsList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Wi={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clockSettings"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.clockSettingsAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.clockSettingsEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Yi=n("VU/8")(qi,Wi,!1,function(e){n("GWDW")},"data-v-a627ee34",null).exports,Gi={name:"clockSettingsAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),moment:Te.a,data:{longitude:null,latitude:null}}},mounted:function(){this.getMap()},methods:{getMap:function(){var e=new BMapGL.Map("allmap"),t=new BMapGL.Point(118.77807441,32.0572355);e.centerAndZoom(t,12),e.enableScrollWheelZoom(!0);var n=new BMapGL.Marker(t),r=this;e.addEventListener("click",function(a){r.data.longitude=a.latlng.lng,r.data.latitude=a.latlng.lat,e.removeOverlay(n),t=new BMapGL.Point(a.latlng.lng,a.latlng.lat),n=new BMapGL.Marker(t),e.addOverlay(n),e.panTo(t)})},addClockSettings:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockSettingsAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","clockSettings");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(!e){var r={};if(void 0!==n.mondayMorning?r.mondayMorning=m(Te()(n.mondayMorning).format()).slice(11,16):r.mondayMorning=null,void 0!==n.mondayNight?r.mondayNight=m(Te()(n.mondayNight).format()).slice(11,16):r.mondayNight=null,void 0!==n.tuesdayMorning?r.tuesdayMorning=m(Te()(n.tuesdayMorning).format()).slice(11,16):r.tuesdayMorning=null,void 0!==n.tuesdayNight?r.tuesdayNight=m(Te()(n.tuesdayNight).format()).slice(11,16):r.tuesdayNight=null,void 0!==n.wednesdayMorning?r.wednesdayMorning=m(Te()(n.wednesdayMorning).format()).slice(11,16):r.wednesdayMorning=null,void 0!==n.wednesdayNight?r.wednesdayNight=m(Te()(n.wednesdayNight).format()).slice(11,16):r.wednesdayNight=null,void 0!==n.thursdayMorning?r.thursdayMorning=m(Te()(n.thursdayMorning).format()).slice(11,16):r.thursdayMorning=null,void 0!==n.thursdayNight?r.thursdayNight=m(Te()(n.thursdayNight).format()).slice(11,16):r.thursdayNight=null,void 0!==n.fridayMorning?r.fridayMorning=m(Te()(n.fridayMorning).format()).slice(11,16):r.fridayMorning=null,void 0!==n.fridayNight?r.fridayNight=m(Te()(n.fridayNight).format()).slice(11,16):r.fridayNight=null,void 0!==n.saturdayMorning?r.saturdayMorning=m(Te()(n.saturdayMorning).format()).slice(11,16):r.saturdayMorning=null,void 0!==n.saturdayNight?r.saturdayNight=m(Te()(n.saturdayNight).format()).slice(11,16):r.saturdayNight=null,void 0!==n.sundayMorning?r.sundayMorning=m(Te()(n.sundayMorning).format()).slice(11,16):r.sundayMorning=null,void 0!==n.sundayNight?r.sundayNight=m(Te()(n.sundayNight).format()).slice(11,16):r.sundayNight=null,n.role=w()(r),n.longitude=t.data.longitude,n.latitude=t.data.latitude,void 0===n.longitude)return void t.$message.warn("请选择地点");t.addClockSettings(n)}})},goToBack:function(){this.bus.$emit("goToPage","clockSettings")}}},Ki={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clockSettingsAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"地图","label-col":{span:5},"wrapper-col":{span:16}}},[n("div",{staticClass:"allmap",attrs:{id:"allmap"}})]),e._v(" "),n("a-form-item",{attrs:{label:"时间设置","label-col":{span:5},"wrapper-col":{span:16}}},[n("table",[n("thead",{staticClass:"ant-table-thead"},[n("tr",[n("th"),e._v(" "),n("th",[e._v("上班时间")]),e._v(" "),n("th",[e._v("下班时间")])])]),e._v(" "),n("tbody",{staticClass:"ant-table-tbody"},[n("tr",[n("td",[e._v("周一")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["mondayMorning"],expression:"['mondayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["mondayNight"],expression:"['mondayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周二")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["tuesdayMorning"],expression:"['tuesdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["tuesdayNight"],expression:"['tuesdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周三")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["wednesdayMorning"],expression:"['wednesdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["wednesdayNight"],expression:"['wednesdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周四")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["thursdayMorning"],expression:"['thursdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["thursdayNight"],expression:"['thursdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周五")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["fridayMorning"],expression:"['fridayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["fridayNight"],expression:"['fridayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周六")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["saturdayMorning"],expression:"['saturdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["saturdayNight"],expression:"['saturdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周日")]),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sundayMorning"],expression:"['sundayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sundayNight"],expression:"['sundayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)])])])]),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Qi=n("VU/8")(Gi,Ki,!1,function(e){n("mAVP")},"data-v-45af5e31",null).exports,Xi={name:"clockSettingsEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),data:{mondayMorning:null,mondayNight:null,tuesdayMorning:null,tuesdayNight:null,wednesdayMorning:null,wednesdayNight:null,thursdayMorning:null,thursdayNight:null,fridayMorning:null,fridayNight:null,saturdayMorning:null,saturdayNight:null,sundayMorning:null,sundayNight:null,longitude:null,latitude:null,role:null},moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getMap:function(){var e=new BMapGL.Map("allmap"),t=new BMapGL.Point(this.data.longitude,this.data.latitude);e.centerAndZoom(t,12),e.enableScrollWheelZoom(!0);var n=new BMapGL.Marker(t);e.addOverlay(n),e.panTo(t);var r=this;e.addEventListener("click",function(a){r.data.longitude=a.latlng.lng,r.data.latitude=a.latlng.lat,e.removeOverlay(n),t=new BMapGL.Point(a.latlng.lng,a.latlng.lat),n=new BMapGL.Marker(t),e.addOverlay(n),e.panTo(t)})},onChange:function(e,t){this.data.mondayMorning=t},onChangeOne:function(e,t){this.data.mondayNight=t},onChangeTwo:function(e,t){this.data.tuesdayMorning=t},onChangeThree:function(e,t){this.data.tuesdayNight=t},onChangeFour:function(e,t){this.data.wednesdayMorning=t},onChangeFive:function(e,t){this.data.wednesdayNight=t},onChangeSix:function(e,t){this.data.thursdayMorning=t},onChangeSeven:function(e,t){this.data.thursdayNight=t},onChangeEight:function(e,t){this.data.fridayMorning=t},onChangeNine:function(e,t){this.data.fridayNight=t},onChangeTen:function(e,t){this.data.saturdayMorning=t},onChangeEleven:function(e,t){this.data.saturdayNight=t},onChangeTwelve:function(e,t){this.data.sundayMorning=t},onChangeThirteen:function(e,t){this.data.sundayNight=t},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockSettingsInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.clockSettings,t.getMap(),a=JSON.parse(r.clockSettings.role),t.data.role=a,t.data=a,t.data.longitude=r.clockSettings.longitude,t.data.latitude=r.clockSettings.latitude);case 4:case"end":return n.stop()}},n,t)}))()},editClockSettings:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockSettingsEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","clockSettings");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.id=t.passData.id,!e){var r={};void 0!==n.mondayMorning?r.mondayMorning=m(Te()(n.mondayMorning).format()).slice(11,16):null!==t.data.mondayMorning&&""!==t.data.mondayMorning?r.mondayMorning=t.data.mondayMorning:r.mondayMorning=null,void 0!==n.mondayNight?r.mondayNight=m(Te()(n.mondayNight).format()).slice(11,16):null!==t.data.mondayNight&&""!==t.data.mondayNight?r.mondayNight=t.data.mondayNight:r.mondayNight=null,void 0!==n.tuesdayMorning?r.tuesdayMorning=m(Te()(n.tuesdayMorning).format()).slice(11,16):null!==t.data.tuesdayMorning&&""!==t.data.tuesdayMorning?r.tuesdayMorning=t.data.tuesdayMorning:r.tuesdayMorning=null,void 0!==n.tuesdayNight?r.tuesdayNight=m(Te()(n.tuesdayNight).format()).slice(11,16):null!==t.data.tuesdayNight&&""!==t.data.tuesdayNight?r.tuesdayNight=t.data.tuesdayNight:r.tuesdayNight=null,void 0!==n.wednesdayMorning?r.wednesdayMorning=m(Te()(n.wednesdayMorning).format()).slice(11,16):null!==t.data.wednesdayMorning&&""!==t.data.wednesdayMorning?r.wednesdayMorning=t.data.wednesdayMorning:r.wednesdayMorning=null,void 0!==n.wednesdayNight?r.wednesdayNight=m(Te()(n.wednesdayNight).format()).slice(11,16):null!==t.data.wednesdayNight&&""!==t.data.wednesdayNight?r.wednesdayNight=t.data.wednesdayNight:r.wednesdayNight=null,void 0!==n.thursdayMorning?r.thursdayMorning=m(Te()(n.thursdayMorning).format()).slice(11,16):null!==t.data.thursdayMorning&&""!==t.data.thursdayMorning?r.thursdayMorning=t.data.thursdayMorning:r.thursdayMorning=null,void 0!==n.thursdayNight?r.thursdayNight=m(Te()(n.thursdayNight).format()).slice(11,16):null!==t.data.thursdayNight&&""!==t.data.thursdayNight?r.thursdayNight=t.data.thursdayNight:r.thursdayNight=null,void 0!==n.fridayMorning?r.fridayMorning=m(Te()(n.fridayMorning).format()).slice(11,16):null!==t.data.fridayMorning&&""!==t.data.fridayMorning?r.fridayMorning=t.data.fridayMorning:r.fridayMorning=null,void 0!==n.fridayNight?r.fridayNight=m(Te()(n.fridayNight).format()).slice(11,16):null!==t.data.fridayNight&&""!==t.data.fridayNight?r.fridayNight=t.data.fridayNight:r.fridayNight=null,void 0!==n.saturdayMorning?r.saturdayMorning=m(Te()(n.saturdayMorning).format()).slice(11,16):null!==t.data.saturdayMorning&&""!==t.data.saturdayMorning?r.saturdayMorning=t.data.saturdayMorning:r.saturdayMorning=null,void 0!==n.saturdayNight?r.saturdayNight=m(Te()(n.saturdayNight).format()).slice(11,16):null!==t.data.saturdayNight&&""!==t.data.saturdayNight?r.saturdayNight=t.data.saturdayNight:r.saturdayNight=null,void 0!==n.sundayMorning?r.sundayMorning=m(Te()(n.sundayMorning).format()).slice(11,16):null!==t.data.sundayMorning&&""!==t.data.sundayMorning?r.sundayMorning=t.data.sundayMorning:r.sundayMorning=null,void 0!==n.sundayNight?r.sundayNight=m(Te()(n.sundayNight).format()).slice(11,16):null!==t.data.sundayNight&&""!==t.data.sundayNight?r.sundayNight=t.data.sundayNight:r.sundayNight=null,n.role=w()(r),n.longitude=t.data.longitude,n.latitude=t.data.latitude,t.editClockSettings(n)}})},goToBack:function(){this.bus.$emit("goToPage","clockSettings")}}},Ji={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clockSettingsEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"地图","label-col":{span:5},"wrapper-col":{span:16}}},[n("div",{staticClass:"allmap",attrs:{id:"allmap"}})]),e._v(" "),n("a-form-item",{attrs:{label:"时间设置","label-col":{span:5},"wrapper-col":{span:16}}},[n("table",[n("thead",{staticClass:"ant-table-thead"},[n("tr",[n("th"),e._v(" "),n("th",[e._v("上班时间")]),e._v(" "),n("th",[e._v("下班时间")])])]),e._v(" "),n("tbody",{staticClass:"ant-table-tbody"},[n("tr",[n("td",[e._v("周一")]),e._v(" "),n("td",[null!==e.data.mondayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.mondayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChange}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["mondayMorning"],expression:"['mondayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.mondayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.mondayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeOne}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["mondayNight"],expression:"['mondayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周二")]),e._v(" "),n("td",[null!==e.data.tuesdayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.tuesdayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeTwo}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["tuesdayMorning"],expression:"['tuesdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.tuesdayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.tuesdayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeThree}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["tuesdayNight"],expression:"['tuesdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周三")]),e._v(" "),n("td",[null!==e.data.wednesdayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.wednesdayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeFour}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["wednesdayMorning"],expression:"['wednesdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.wednesdayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.wednesdayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeFive}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["wednesdayNight"],expression:"['wednesdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周四")]),e._v(" "),n("td",[null!==e.data.thursdayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.thursdayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeSix}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["thursdayMorning"],expression:"['thursdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.thursdayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.thursdayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeSeven}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["thursdayNight"],expression:"['thursdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周五")]),e._v(" "),n("td",[null!==e.data.fridayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.fridayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeEight}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["fridayMorning"],expression:"['fridayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.fridayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.fridayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeNine}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["fridayNight"],expression:"['fridayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周六")]),e._v(" "),n("td",[null!==e.data.saturdayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.saturdayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeTen}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["saturdayMorning"],expression:"['saturdayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.saturdayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.saturdayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeEleven}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["saturdayNight"],expression:"['saturdayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)]),e._v(" "),n("tr",[n("td",[e._v("周日")]),e._v(" "),n("td",[null!==e.data.sundayMorning?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.sundayMorning,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeTwelve}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sundayMorning"],expression:"['sundayMorning']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1),e._v(" "),n("td",[null!==e.data.sundayNight?n("a-time-picker",{attrs:{placeholder:"请选择时间",value:e.moment(e.data.sundayNight,"HH:mm"),format:"HH:mm"},on:{change:e.onChangeThirteen}}):n("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["sundayNight"],expression:"['sundayNight']"}],attrs:{placeholder:"请选择时间",format:"HH:mm"}})],1)])])])]),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Zi=n("VU/8")(Xi,Ji,!1,function(e){n("+ByR")},"data-v-779ccc6e",null).exports,es=[{title:"部门",fixed:"left",width:100,dataIndex:"deptName"},{title:"岗位",fixed:"left",width:100,dataIndex:"postName"},{title:"工号",fixed:"left",width:100,dataIndex:"userNo"},{title:"姓名",fixed:"left",width:100,dataIndex:"userName"},{title:"1号",width:100,dataIndex:"clock01",scopedSlots:{customRender:"clock01"}},{title:"2号",width:100,dataIndex:"clock02",scopedSlots:{customRender:"clock02"}},{title:"3号",width:100,dataIndex:"clock03",scopedSlots:{customRender:"clock03"}},{title:"4号",width:100,dataIndex:"clock04",scopedSlots:{customRender:"clock04"}},{title:"5号",width:100,dataIndex:"clock05",scopedSlots:{customRender:"clock05"}},{title:"6号",width:100,dataIndex:"clock06",scopedSlots:{customRender:"clock06"}},{title:"7号",width:100,dataIndex:"clock07",scopedSlots:{customRender:"clock07"}},{title:"8号",width:100,dataIndex:"clock08",scopedSlots:{customRender:"clock08"}},{title:"9号",width:100,dataIndex:"clock09",scopedSlots:{customRender:"clock09"}},{title:"10号",width:100,dataIndex:"clock10",scopedSlots:{customRender:"clock10"}},{title:"11号",width:100,dataIndex:"clock11",scopedSlots:{customRender:"clock11"}},{title:"12号",width:100,dataIndex:"clock12",scopedSlots:{customRender:"clock12"}},{title:"13号",width:100,dataIndex:"clock13",scopedSlots:{customRender:"clock13"}},{title:"14号",width:100,dataIndex:"clock14",scopedSlots:{customRender:"clock14"}},{title:"15号",width:100,dataIndex:"clock15",scopedSlots:{customRender:"clock15"}},{title:"16号",width:100,dataIndex:"clock16",scopedSlots:{customRender:"clock16"}},{title:"17号",width:100,dataIndex:"clock17",scopedSlots:{customRender:"clock17"}},{title:"18号",width:100,dataIndex:"clock18",scopedSlots:{customRender:"clock18"}},{title:"19号",width:100,dataIndex:"clock19",scopedSlots:{customRender:"clock19"}},{title:"20号",width:100,dataIndex:"clock20",scopedSlots:{customRender:"clock20"}},{title:"21号",width:100,dataIndex:"clock21",scopedSlots:{customRender:"clock21"}},{title:"22号",width:100,dataIndex:"clock22",scopedSlots:{customRender:"clock22"}},{title:"23号",width:100,dataIndex:"clock23",scopedSlots:{customRender:"clock23"}},{title:"24号",width:100,dataIndex:"clock24",scopedSlots:{customRender:"clock24"}},{title:"25号",width:100,dataIndex:"clock25",scopedSlots:{customRender:"clock25"}},{title:"26号",width:100,dataIndex:"clock26",scopedSlots:{customRender:"clock26"}},{title:"27号",width:100,dataIndex:"clock27",scopedSlots:{customRender:"clock27"}},{title:"28号",width:100,dataIndex:"clock28",scopedSlots:{customRender:"clock28"}},{title:"29号",width:100,dataIndex:"clock29",scopedSlots:{customRender:"clock29"}},{title:"30号",width:100,dataIndex:"clock30",scopedSlots:{customRender:"clock30"}},{title:"31号",width:100,dataIndex:"clock31",scopedSlots:{customRender:"clock31"}},{title:"月份",fixed:"right",width:100,dataIndex:"clockDay"},{title:"操作",key:"operation",fixed:"right",width:80,scopedSlots:{customRender:"action"}}],ts={name:"clock",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:[],clockDay:null,columns:es}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.clockDay=this.clockDay,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},formatDate:function(e){return m(e)},clockDetail:function(e){var t=e;this.bus.$emit("goToPage","clockDetail"),this.bus.$emit("passData",t)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n.clockDay),void 0===n.clockDay||null===n.clockDay?(t.clockDay="",n.clockDay=""):(n.clockDay=m(n.clockDay).substring(0,10),t.clockDay=n.clockDay),t.pagination.current=1,e||t.searchByConditions(n)})},refactor:function(e){var t=[],n=[];e.forEach(function(e){e.clockDay=m(e.clockDay).substring(0,10);var r={userId:e.userId,month:e.clockDay.substring(0,7)};if(-1===w()(t).indexOf(w()(r))){t.push(r);var a=[];e.keys=e.clockDay.substring(8,10),a.push(e),n.push({key:t.length,deptName:e.user.deptName,postName:e.user.postName,userNo:e.user.userNo,userName:e.user.userName,clockDay:e.clockDay.substring(0,7),list:a}),"01"===e.keys?n[t.length-1].clock01=e.clockIn:"02"===e.keys?n[t.length-1].clock02=e.clockIn:"03"===e.keys?n[t.length-1].clock03=e.clockIn:"04"===e.keys?n[t.length-1].clock04=e.clockIn:"05"===e.keys?n[t.length-1].clock05=e.clockIn:"06"===e.keys?n[t.length-1].clock06=e.clockIn:"07"===e.keys?n[t.length-1].clock07=e.clockIn:"08"===e.keys?n[t.length-1].clock08=e.clockIn:"09"===e.keys?n[t.length-1].clock09=e.clockIn:"10"===e.keys?n[t.length-1].clock10=e.clockIn:"11"===e.keys?n[t.length-1].clock11=e.clockIn:"12"===e.keys?n[t.length-1].clock12=e.clockIn:"13"===e.keys?n[t.length-1].clock13=e.clockIn:"14"===e.keys?n[t.length-1].clock14=e.clockIn:"15"===e.keys?n[t.length-1].clock15=e.clockIn:"16"===e.keys?n[t.length-1].clock16=e.clockIn:"17"===e.keys?n[t.length-1].clock17=e.clockIn:"18"===e.keys?n[t.length-1].clock18=e.clockIn:"19"===e.keys?n[t.length-1].clock19=e.clockIn:"20"===e.keys?n[t.length-1].clock20=e.clockIn:"21"===e.keys?n[t.length-1].clock21=e.clockIn:"22"===e.keys?n[t.length-1].clock22=e.clockIn:"23"===e.keys?n[t.length-1].clock23=e.clockIn:"24"===e.keys?n[t.length-1].clock24=e.clockIn:"25"===e.keys?n[t.length-1].clock25=e.clockIn:"26"===e.keys?n[t.length-1].clock26=e.clockIn:"27"===e.keys?n[t.length-1].clock27=e.clockIn:"28"===e.keys?n[t.length-1].clock28=e.clockIn:"29"===e.keys?n[t.length-1].clock29=e.clockIn:"30"===e.keys?n[t.length-1].clock30=e.clockIn:"31"===e.keys&&(n[t.length-1].clock31=e.clockIn)}else t.forEach(function(t,r){t.userId===e.userId&&t.month===e.clockDay.substring(0,7)&&(e.keys=e.clockDay.substring(8,10),"01"===e.keys?n[r].clock01=e.clockIn:"02"===e.keys?n[r].clock02=e.clockIn:"03"===e.keys?n[r].clock03=e.clockIn:"04"===e.keys?n[r].clock04=e.clockIn:"05"===e.keys?n[r].clock05=e.clockIn:"06"===e.keys?n[r].clock06=e.clockIn:"07"===e.keys?n[r].clock07=e.clockIn:"08"===e.keys?n[r].clock08=e.clockIn:"09"===e.keys?n[r].clock09=e.clockIn:"10"===e.keys?n[r].clock10=e.clockIn:"11"===e.keys?n[r].clock11=e.clockIn:"12"===e.keys?n[r].clock12=e.clockIn:"13"===e.keys?n[r].clock13=e.clockIn:"14"===e.keys?n[r].clock14=e.clockIn:"15"===e.keys?n[r].clock15=e.clockIn:"16"===e.keys?n[r].clock16=e.clockIn:"17"===e.keys?n[r].clock17=e.clockIn:"18"===e.keys?n[r].clock18=e.clockIn:"19"===e.keys?n[r].clock19=e.clockIn:"20"===e.keys?n[r].clock20=e.clockIn:"21"===e.keys?n[r].clock21=e.clockIn:"22"===e.keys?n[r].clock22=e.clockIn:"23"===e.keys?n[r].clock23=e.clockIn:"24"===e.keys?n[r].clock24=e.clockIn:"25"===e.keys?n[r].clock25=e.clockIn:"26"===e.keys?n[r].clock26=e.clockIn:"27"===e.keys?n[r].clock27=e.clockIn:"28"===e.keys?n[r].clock28=e.clockIn:"29"===e.keys?n[r].clock29=e.clockIn:"30"===e.keys?n[r].clock30=e.clockIn:"31"===e.keys&&(n[r].clock31=e.clockIn))})}),this.data=n},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.clockList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.refactor(t.data));case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.clockList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.refactor(e.data));case 4:case"end":return t.stop()}},t,e)}))()}}},ns={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clock"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo"],expression:"['userNo']"}],attrs:{placeholder:"工号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["clockDay"],expression:"['clockDay']"}],attrs:{placeholder:"选择月份"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"key",scroll:{x:3800,y:600},pagination:!1},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"clock01",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock01}},[e._v("\n      "+e._s(void 0===r.clock01?"无":r.clock01)+"\n    ")])}},{key:"clock02",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock02}},[e._v("\n      "+e._s(void 0===r.clock02?"无":r.clock02)+"\n    ")])}},{key:"clock03",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock03}},[e._v("\n      "+e._s(void 0===r.clock03?"无":r.clock03)+"\n    ")])}},{key:"clock04",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock04}},[e._v("\n      "+e._s(void 0===r.clock04?"无":r.clock04)+"\n    ")])}},{key:"clock05",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock05}},[e._v("\n      "+e._s(void 0===r.clock05?"无":r.clock05)+"\n    ")])}},{key:"clock06",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock06}},[e._v("\n      "+e._s(void 0===r.clock06?"无":r.clock06)+"\n    ")])}},{key:"clock07",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock07}},[e._v("\n      "+e._s(void 0===r.clock07?"无":r.clock07)+"\n    ")])}},{key:"clock08",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock08}},[e._v("\n      "+e._s(void 0===r.clock08?"无":r.clock08)+"\n    ")])}},{key:"clock09",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock09}},[e._v("\n      "+e._s(void 0===r.clock09?"无":r.clock09)+"\n    ")])}},{key:"clock10",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock10}},[e._v("\n      "+e._s(void 0===r.clock10?"无":r.clock10)+"\n    ")])}},{key:"clock11",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock11}},[e._v("\n      "+e._s(void 0===r.clock11?"无":r.clock11)+"\n    ")])}},{key:"clock12",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock12}},[e._v("\n      "+e._s(void 0===r.clock12?"无":r.clock12)+"\n    ")])}},{key:"clock13",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock13}},[e._v("\n      "+e._s(void 0===r.clock13?"无":r.clock13)+"\n    ")])}},{key:"clock14",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock14}},[e._v("\n      "+e._s(void 0===r.clock14?"无":r.clock14)+"\n    ")])}},{key:"clock15",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock15}},[e._v("\n      "+e._s(void 0===r.clock15?"无":r.clock15)+"\n    ")])}},{key:"clock16",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock16}},[e._v("\n      "+e._s(void 0===r.clock16?"无":r.clock16)+"\n    ")])}},{key:"clock17",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock17}},[e._v("\n      "+e._s(void 0===r.clock17?"无":r.clock17)+"\n    ")])}},{key:"clock18",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock18}},[e._v("\n      "+e._s(void 0===r.clock18?"无":r.clock18)+"\n    ")])}},{key:"clock19",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock19}},[e._v("\n      "+e._s(void 0===r.clock19?"无":r.clock19)+"\n    ")])}},{key:"clock20",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock20}},[e._v("\n      "+e._s(void 0===r.clock20?"无":r.clock20)+"\n    ")])}},{key:"clock21",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock21}},[e._v("\n      "+e._s(void 0===r.clock21?"无":r.clock21)+"\n    ")])}},{key:"clock22",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock22}},[e._v("\n      "+e._s(void 0===r.clock22?"无":r.clock22)+"\n    ")])}},{key:"clock23",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock23}},[e._v("\n      "+e._s(void 0===r.clock23?"无":r.clock23)+"\n    ")])}},{key:"clock24",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock24}},[e._v("\n      "+e._s(void 0===r.clock24?"无":r.clock24)+"\n    ")])}},{key:"clock25",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock25}},[e._v("\n      "+e._s(void 0===r.clock25?"无":r.clock25)+"\n    ")])}},{key:"clock26",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock26}},[e._v("\n      "+e._s(void 0===r.clock26?"无":r.clock26)+"\n    ")])}},{key:"clock27",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock27}},[e._v("\n      "+e._s(void 0===r.clock27?"无":r.clock27)+"\n    ")])}},{key:"clock28",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock28}},[e._v("\n      "+e._s(void 0===r.clock28?"无":r.clock28)+"\n    ")])}},{key:"clock29",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock29}},[e._v("\n      "+e._s(void 0===r.clock29?"无":r.clock29)+"\n    ")])}},{key:"clock30",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock30}},[e._v("\n      "+e._s(void 0===r.clock30?"无":r.clock30)+"\n    ")])}},{key:"clock31",fn:function(t,r){return n("div",{style:{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.clock31}},[e._v("\n      "+e._s(void 0===r.clock31?"无":r.clock31)+"\n    ")])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.clockDetail(r)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var rs=n("VU/8")(ts,ns,!1,function(e){n("dUjX")},"data-v-6522622c",null).exports,as={name:"clockDetail",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM",data:{userNo:null,userName:null,deptName:null,postName:null,clockDay:null,clock01:null,clock02:null,clock03:null,clock04:null,clock05:null,clock06:null,clock07:null,clock08:null,clock09:null,clock10:null,clock11:null,clock12:null,clock13:null,clock14:null,clock15:null,clock16:null,clock17:null,clock18:null,clock19:null,clock20:null,clock21:null,clock22:null,clock23:null,clock24:null,clock25:null,clock26:null,clock27:null,clock28:null,clock29:null,clock30:null,clock31:null},days:null}},props:{passData:Object},created:function(){this.getInfo(this.passData)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.data=e,r=new Date(e.clockDay),a=r.getMonth(),r.setMonth(a+1),r.setDate(0),t.days=r.getDate();case 6:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","clock")}}},os={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clockDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"工号","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userNo",{initialValue:e.data.userNo}],expression:"['userNo', {initialValue: data.userNo }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"姓名","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{initialValue:e.data.userName}],expression:"['userName', {initialValue: data.userName }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"部门","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptName",{initialValue:e.data.deptName}],expression:"['deptName', {initialValue: data.deptName }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"岗位","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postName",{initialValue:e.data.postName}],expression:"['postName', {initialValue: data.postName }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"年月","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clockDay",{initialValue:e.data.clockDay}],expression:"['clockDay', {initialValue: data.clockDay }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"1号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock01",{initialValue:e.data.clock01}],expression:"['clock01', {initialValue: data.clock01 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"3号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock02",{initialValue:e.data.clock02}],expression:"['clock02', {initialValue: data.clock02 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"3号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock03",{initialValue:e.data.clock03}],expression:"['clock03', {initialValue: data.clock03 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"4号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock04",{initialValue:e.data.clock04}],expression:"['clock04', {initialValue: data.clock04 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"5号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock05",{initialValue:e.data.clock05}],expression:"['clock05', {initialValue: data.clock05 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"6号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock06",{initialValue:e.data.clock06}],expression:"['clock06', {initialValue: data.clock06 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"7号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock07",{initialValue:e.data.clock07}],expression:"['clock07', {initialValue: data.clock07 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"8号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock08",{initialValue:e.data.clock08}],expression:"['clock08', {initialValue: data.clock08 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"9号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock09",{initialValue:e.data.clock09}],expression:"['clock09', {initialValue: data.clock09 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"10号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock10",{initialValue:e.data.clock10}],expression:"['clock10', {initialValue: data.clock10 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"11号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock11",{initialValue:e.data.clock11}],expression:"['clock11', {initialValue: data.clock11 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"12号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock12",{initialValue:e.data.clock12}],expression:"['clock12', {initialValue: data.clock12 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"13号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock13",{initialValue:e.data.clock13}],expression:"['clock13', {initialValue: data.clock13 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"14号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock14",{initialValue:e.data.clock14}],expression:"['clock14', {initialValue: data.clock14 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"15号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock15",{initialValue:e.data.clock15}],expression:"['clock15', {initialValue: data.clock15 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"16号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock16",{initialValue:e.data.clock16}],expression:"['clock16', {initialValue: data.clock16 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"17号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock17",{initialValue:e.data.clock17}],expression:"['clock17', {initialValue: data.clock17 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"18号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock18",{initialValue:e.data.clock18}],expression:"['clock18', {initialValue: data.clock18 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"19号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock19",{initialValue:e.data.clock19}],expression:"['clock19', {initialValue: data.clock19 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"20号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock20",{initialValue:e.data.clock20}],expression:"['clock20', {initialValue: data.clock20 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"21号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock21",{initialValue:e.data.clock21}],expression:"['clock21', {initialValue: data.clock21 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"22号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock22",{initialValue:e.data.clock22}],expression:"['clock22', {initialValue: data.clock22 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"23号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock23",{initialValue:e.data.clock23}],expression:"['clock23', {initialValue: data.clock23 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"24号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock24",{initialValue:e.data.clock24}],expression:"['clock24', {initialValue: data.clock24 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"25号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock25",{initialValue:e.data.clock25}],expression:"['clock25', {initialValue: data.clock25 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"26号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock26",{initialValue:e.data.clock26}],expression:"['clock26', {initialValue: data.clock26 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"27号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock27",{initialValue:e.data.clock27}],expression:"['clock27', {initialValue: data.clock27 }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"28号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock28",{initialValue:e.data.clock28}],expression:"['clock28', {initialValue: data.clock28 }]"}],attrs:{readOnly:""}})],1),e._v(" "),e.days>=29?n("a-form-item",{attrs:{label:"29号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock29",{initialValue:e.data.clock29}],expression:"['clock29', {initialValue: data.clock29 }]"}],attrs:{readOnly:""}})],1):e._e(),e._v(" "),e.days>=30?n("a-form-item",{attrs:{label:"30号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock30",{initialValue:e.data.clock30}],expression:"['clock30', {initialValue: data.clock30 }]"}],attrs:{readOnly:""}})],1):e._e(),e._v(" "),e.days>=31?n("a-form-item",{attrs:{label:"31号打卡记录","label-col":{span:3},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clock31",{initialValue:e.data.clock31}],expression:"['clock31', {initialValue: data.clock31 }]"}],attrs:{readOnly:""}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var is=n("VU/8")(as,os,!1,function(e){n("5I4A")},"data-v-6d6832bc",null).exports,ss=[{title:"订单编号",dataIndex:"order.orderNum"},{title:"商品名称",dataIndex:"goodName"},{title:"用户昵称",dataIndex:"member.nickName"},{title:"评论内容",dataIndex:"content",scopedSlots:{customRender:"titleShow"}},{title:"图片",dataIndex:"picArr",scopedSlots:{customRender:"picArr"}},{title:"评论时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],cs="",ls={name:"goods",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,data:[],permissions:localStorage.permissions,categoryList:[],goodsName:null,categoryId:null,status:null,columns:ss,selectList:[],picModel:!1,evaluationPic:[]}},created:function(){this.tableData(),this.goodList()},computed:{rowSelection:function(){return{onChange:function(e,t){cs=e}}}},props:{passData:Object},methods:{showPic:function(e){this.picModel=!0,this.evaluationPic=e.split(",")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},replay:function(e){var t={id:e.id};this.bus.$emit("goToPage","reply"),this.bus.$emit("passData",t)},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===cs||0===cs.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.evaluationDelete(cs)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.evaluationList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.evaluationList({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.data.forEach(function(e){""!==e.picUrl&&(e.picArr=e.picUrl.split(","))}),e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()},evaluationDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.evaluationDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),cs="");case 4:case"end":return n.stop()}},n,t)}))()},goodList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsAllList({});case 2:0===(n=t.sent).code&&(e.selectList=n.data);case 4:case"end":return t.stop()}},t,e)}))()}}},us={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goods"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsId"],expression:"['goodsId']"}],staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"商品名称","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.goodsName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户昵称"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}],staticStyle:{width:"200px"},attrs:{placeholder:"评论内容"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{width:1e3,title:"评论图片",footer:null},model:{value:e.picModel,callback:function(t){e.picModel=t},expression:"picModel"}},[n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!1},expression:"{movable: false}"}],staticClass:"images"},e._l(e.evaluationPic,function(e){return n("img",{key:e,staticStyle:{width:"200px",height:"200px"},attrs:{src:e}})}),0)]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"titleShow",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.content}},[e._v("\n      "+e._s(r.content)+"\n    ")])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"picArr",fn:function(t){return n("div",{},[n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!1},expression:"{movable: false}"}],staticClass:"images",staticStyle:{width:"300px"}},e._l(t,function(e){return n("img",{key:e,staticStyle:{width:"80px",height:"80px"},attrs:{src:e}})}),0)])}},{key:"action",fn:function(t,r){return n("span",{},[""==r.reply?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.replay(r)}}},[e._v("回复")]):n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.replay(r)}}},[e._v("查看回复")])])}}])})],1)},staticRenderFns:[]};var ds=n("VU/8")(ls,us,!1,function(e){n("7lOs")},"data-v-65f70641",null).exports,fs={name:"reply",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:null,data:{content:null,reply:null}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.evaluationInfo({id:e});case 2:r=n.sent,t.data=r.evaluation,""===t.data.reply?t.visible=!0:t.visible=!1;case 5:case"end":return n.stop()}},n,t)}))()},editEvalution:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.updateEvalution(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","evaluation");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,e||t.editEvalution(n)})},goToBack:function(){this.bus.$emit("goToPage","evaluation")}}},ms={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reply"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"客户评价","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{initialValue:e.data.content}],expression:"['content', {initialValue: data.content}]"}],attrs:{readOnly:"",rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{label:"商家回复","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["reply",{initialValue:e.data.reply}],expression:"['reply', {initialValue: data.reply}]"}],attrs:{rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[e.visible?n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]):e._e(),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ps=n("VU/8")(fs,ms,!1,function(e){n("fuXn")},"data-v-1bc09dd5",null).exports,hs=[{title:"属性名称",dataIndex:"attrName"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"operation"}}],vs="",gs={name:"infoTypeList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{current:1,pageSize:10},visible:!1,data:{},columns:hs,title:null,serviceType:null,selectList:[],arr:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){vs=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.shopAttrList(e);case 2:0===(r=n.sent).code&&(t.data=r.data,a=[],t.data.forEach(function(e){var t={id:e.id,parentId:e.parentId,attrName:e.attrName,children:e.children};a.push(t)}),t.arr=a,console.log(a));case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(vs),""===vs||0===vs.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.specDelete(vs)},specEdit:function(e){var t={id:e};this.bus.$emit("goToPage","categoryAttrEdit"),this.bus.$emit("passData",t)},specAdd:function(e){this.bus.$emit("goToPage","categoryAttrAdd")},specDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.shopAttrDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),vs="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function e(){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.shopAttrList({});case 2:0===(n=e.sent).code&&(t.data=n.data,r=[],t.data.forEach(function(e){var t={id:e.id,parentId:e.parentId,attrName:e.attrName,children:e.children};r.push(t)}),t.arr=r,console.log(r));case 4:case"end":return e.stop()}},e,t)}))()}}},bs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.specAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.arr,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.specEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var ys=n("VU/8")(gs,bs,!1,function(e){n("FGtH")},"data-v-b9e77e16",null).exports,ws={name:"specAdd",data:function(){return{show:!0,showV:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),selectList:[],data:{}}},created:function(){this.queryAllParent()},methods:{handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources[0].src)):this.loading=!0},specAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.shopAttrAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","categoryAttr");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){e||t.specAdd(n)})},goToBack:function(){this.bus.$emit("goToPage","categoryAttr")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentAttrById({parentId:-1});case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.attrName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},xs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"属性","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["attrName",{rules:[{required:!0,message:"请填写规格名称!"}]}],expression:"['attrName', { rules: [{ required: true, message: '请填写规格名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"父节点","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}]},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ks=n("VU/8")(ws,xs,!1,function(e){n("3xRo")},"data-v-6ad4f2a6",null).exports,_s={name:"roleEdit",data:function(){return{show:!0,showV:!0,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{},selectList:[],menuList:[],menuIdList:[]}},props:{passData:Object},created:function(){this.queryAllParent(),this.getSpecInfo(this.passData.id)},methods:{handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!0},getSpecInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.attrById({id:e});case 2:r=n.sent,t.data=r.shopAttr,t.menuIdList=r.data.menuIdList;case 5:case"end":return n.stop()}},n,t)}))()},specEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.shopAttrEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","categoryAttr");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.videoUrl=t.playerOptions.sources[0].src,e||t.specEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","categoryAttr")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentAttrById({parentId:-1});case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.attrName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},Ss={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"属性","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["attrName",{rules:[{required:!0,message:"请填写栏目名称!"}],initialValue:e.data.attrName}],expression:"['attrName', { rules: [{ required: true, message: '请填写栏目名称!' }],initialValue: data.attrName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"父节点","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],attrs:{placeholder:"请选择规格"}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("确定")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var Cs=n("VU/8")(_s,Ss,!1,function(e){n("MaV4")},"data-v-cad6b6e8",null).exports,Ns=n("fZjL"),Ts=n.n(Ns),Ds={name:"Chart",extends:ko,props:{chartdata:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartdata,this.options)}};var Is=n("VU/8")(Ds,null,!1,function(e){n("+lBg")},"data-v-624dd7f9",null).exports,Ms={name:"Chart",extends:_o,props:{chartdata:{type:Object,default:null},options:{type:Object,default:null}},mounted:function(){this.renderChart(this.chartdata,this.options)}};var Os={name:"overview",components:{barChart:Is,LineChart:No,DoughnutChart:n("VU/8")(Ms,null,!1,function(e){n("+X9e")},"data-v-3d0bfc20",null).exports},data:function(){return{money:0,loaded:!1,loaded2:!1,chartdata:{},options:{responsive:!0,maintainAspectRatio:!1},chartdata2:{},options2:{responsive:!0,maintainAspectRatio:!1},type:-1,tenantId:null,timeList:[],timeDataList:[],dataLists:[],topLists:{},leftbar:{},rightbar:{},discss:{},sixData:[{title:"支付人数",key:"xdrs",content:0},{title:"支付订单数",key:"zfdds",content:0},{title:"退款订单(个)",key:"tkdds",content:0},{title:"成功退款金额(元)",key:"cgtkje",content:0},{title:"浏览数",key:"ll",content:0},{title:"访客数",key:"fw",content:0}]}},mounted:function(){},created:function(){this.everyTimeData(),this.dataList(),this.twobar(),this.topList()},methods:{getYesterDay:function(e,t){var n=new Date,r=n.getTime(),a=864e5*e;n.setTime(parseInt(r+a));var o=n.getFullYear(),i=(n.getMonth()+1).toString();i.length<=1&&(i="0"+i);var s=n.getDate().toString();return s.length<=1&&(s="0"+s),o+t+i+t+s},topList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.topList();case 2:0===(n=t.sent).code&&(e.topLists=n.data);case 4:case"end":return t.stop()}},t,e)}))()},twobar:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.twobar();case 2:0===(n=t.sent).code&&(e.leftbar=n.data.pvcastpay,e.rightbar=n.data.pvcastcollect);case 4:case"end":return t.stop()}},t,e)}))()},onChange:function(e){if(console.log(e.target.value),this.loaded2=!1,this.chartdata2=null,!1===this.loaded2&&null===this.chartdata2){var t=[],n=[];this.dataLists[e.target.value].list.forEach(function(e){t.push(e.day),n.push(e.data)});var r={labels:t,datasets:[{label:this.dataLists[e.target.value].title,backgroundColor:"rgba(0,193,222,.6)",hoverBackgroundColor:"rgba(0,193,222,.8)",data:n}]};this.chartdata2=r,this.loaded2=!0}},dataList:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.dataList();case 2:0===(n=t.sent).code&&(e.dataLists=n.data,r=[],a=[],e.dataLists[0].list.forEach(function(e){r.push(e.day),a.push(e.data)}),o={labels:r,datasets:[{label:e.dataLists[0].title,backgroundColor:"rgba(0,193,222,.6)",hoverBackgroundColor:"rgba(0,193,222,.8)",data:a}]},e.chartdata2=o,e.loaded2=!0);case 4:case"end":return t.stop()}},t,e)}))()},everyTimeData:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.everyTimeData();case 2:0===(n=t.sent).code&&(console.log(n.data),Ts()(n.sixData).forEach(function(t){e.sixData.forEach(function(e){t===e.key&&("cgtkje"===t&&(e.content=n.sixData[t].toFixed(2)),e.content=n.sixData[t])})}),n.data.forEach(function(t){e.timeList.push(t.time),e.timeDataList.push(t.totalAmount),e.money+=t.totalAmount}),r={labels:e.timeList,datasets:[{label:"成交额",backgroundColor:"rgba(0,193,222,.6)",hoverBackgroundColor:"rgba(0,193,222,.8)",data:e.timeDataList}]},e.chartdata=r,e.loaded=!0);case 4:case"end":return t.stop()}},t,e)}))()}}},As={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[n("span",[n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v("数据概况")]),n("span",[e._v("数据更新时间")]),n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.getYesterDay(-1,"-"))+"  00:00:00  至  "+e._s(e.getYesterDay(-1,"-"))+"  23:59:59")])])]),e._v(" "),n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v("支付金额(元)")]),e._v(" "),n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.money.toFixed(2)))]),e._v(" "),n("div",[n("a-row",{staticStyle:{height:"200px"},attrs:{type:"flex"}},[n("a-col",{attrs:{span:16}},[n("div",{staticClass:"container"},[e.loaded?n("bar-chart",{attrs:{chartdata:e.chartdata,options:e.options}}):e._e()],1)]),e._v(" "),n("a-col",{attrs:{span:8}},[n("a-list",{attrs:{grid:{gutter:16,column:2},"data-source":e.sixData},scopedSlots:e._u([{key:"renderItem",fn:function(t,r){return n("a-list-item",{},[n("a-card",{attrs:{title:t.title}},[e._v("\n              "+e._s("cgtkje"===t.key?t.content.toFixed(2):t.content)+"\n            ")])],1)}}])})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"margin-top":"280px"}},[n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v("整体看板")]),e._v(" "),n("a-row",e._l(e.dataLists,function(t,r){return n("a-col",{key:r,attrs:{span:4}},[n("a-list",[n("a-radio-group",{on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("a-radio-button",{staticStyle:{width:"200px",height:"200px",border:"none"},attrs:{value:r}},[n("a-list-item",[n("a-card",{staticStyle:{width:"200px",height:"200px"},attrs:{headStyle:e.discss,bodyStyle:e.discss,title:t.title}},[n("p",[e._v(e._s("支付金额"===t.title||"退款金额"===t.title?t.zr.toFixed(2):t.zr))]),e._v(" "),n("p",[e._v("对比前日:"+e._s(t.dbqr>0?(100*t.dbqr.toFixed(2)-100).toFixed(2):0)+"%")]),e._v(" "),n("p",[e._v("对比上周:"+e._s(t.dbsz>0?(100*t.dbsz.toFixed(2)-100).toFixed(2):0)+"%")])])],1)],1)],1)],1)],1)}),1),e._v(" "),e.loaded2?n("div",{staticClass:"container",staticStyle:{width:"100%",margin:"100px auto"}},[n("line-chart",{staticStyle:{width:"100%"},attrs:{chartdata:e.chartdata2,options:e.options2}})],1):e._e()],1),e._v(" "),n("a-row",[n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v("流量看板")]),e._v(" "),n("a-col",{attrs:{span:12}},[n("a-popover",{staticStyle:{width:"100px",height:"100px","border-radius":"50%","background-color":"#f5f5f5",margin:"0 400px"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-button",{staticStyle:{color:"#666666"},attrs:{type:"primary"}},[e._v("\n          "+e._s(e.leftbar.zr)+"%\n        ")])],1),e._v(" "),n("p",{staticStyle:{"margin-left":"400px"}},[e._v(e._s(e.leftbar.title))]),e._v(" "),n("p",{staticStyle:{"margin-left":"400px"}},[e._v(e._s(e.leftbar.dbqr)+"%")]),e._v(" "),n("p",{staticStyle:{"margin-left":"400px"}},[e._v(e._s(e.leftbar.dbsz)+"%")])],1),e._v(" "),n("a-col",{attrs:{span:12}},[n("a-popover",{staticStyle:{width:"100px",height:"100px","border-radius":"50%","background-color":"#f5f5f5"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-button",{staticStyle:{color:"#666666"},attrs:{type:"primary"}},[e._v("\n          "+e._s(e.rightbar.zr)+"%\n        ")])],1),e._v(" "),n("p",[e._v(e._s(e.rightbar.title))]),e._v(" "),n("p",[e._v(e._s(e.rightbar.dbqr)+"%")]),e._v(" "),n("p",[e._v(e._s(e.rightbar.dbsz)+"%")])],1)],1),e._v(" "),n("a-row",[n("h3",{staticStyle:{"font-weight":"bolder"}},[e._v("商品看板")]),e._v(" "),n("a-col",{attrs:{span:8}},[n("div",{staticStyle:{background:"#ECECEC",padding:"30px"}},[n("a-card",{staticStyle:{width:"400px",height:"300px"},attrs:{title:"收藏榜",bordered:!1}},e._l(e.topLists.one,function(t,r){return n("p",{key:r},[e._v(e._s(t.goods_name)),n("span",[e._v(e._s(t.count)+"次")])])}),0)],1)]),e._v(" "),n("a-col",{attrs:{span:8}},[n("div",{staticStyle:{background:"#ECECEC",padding:"30px"}},[n("a-card",{staticStyle:{width:"400px",height:"300px"},attrs:{title:"销量榜",bordered:!1}},e._l(e.topLists.two,function(t,r){return n("p",{key:r},[e._v(e._s(t.goods_name)),n("span",[e._v(e._s(t.count)+"件")])])}),0)],1)]),e._v(" "),n("a-col",{attrs:{span:8}},[n("div",{staticStyle:{background:"#ECECEC",padding:"30px"}},[n("a-card",{staticStyle:{width:"400px",height:"300px"},attrs:{title:"支付金额榜",bordered:!1}},e._l(e.topLists.three,function(t,r){return n("p",{key:r},[e._v(e._s(t.goods_name)+" "),n("span",[e._v(e._s(t.price)+"元")])])}),0)],1)])],1)],1)},staticRenderFns:[]};var Ls=n("VU/8")(Os,As,!1,function(e){n("vxTA")},"data-v-9083c5be",null).exports,Es=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t},zs={name:"index",components:{LineChart:No},data:function(){return{startDate:null,endDate:null,endOpen:!1,loaded:!1,chartdata:null,headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,sv:!1,ev:!1,o:{},data:[],options:{responsive:!0,maintainAspectRatio:!1},dateType:1,dateTypeList:[{id:1,typeName:"近三十天"},{id:2,typeName:"近七天"},{id:3,typeName:"自然日"},{id:4,typeName:"自然周"},{id:5,typeName:"自然月"}]}},created:function(){this.dataList()},methods:{getBase:function(){this.loaded=!1;try{var e={labels:this.o.dateList,datasets:[{label:this.o.list[0].title,borderColor:"rgb(58,161,255)",data:this.o.list[0].list},{label:this.o.list[1].title,borderColor:"rgb(78,203,115)",data:this.o.list[1].list},{label:this.o.list[2].title,borderColor:"rgb(251,212,55)",data:this.o.list[2].list},{label:this.o.list[3].title,borderColor:"rgb(54,203,203)",data:this.o.list[3].list}]};this.chartdata=e,this.loaded=!0,this.visible=!0}catch(e){console.error(e)}},dataList:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.flowList({dateType:e.dateType,startDate:Es(e.startDate),endDate:Es(e.endDate)});case 2:0===(n=t.sent).code&&(e.data=n.data,r={},a=[],o=[],n.data[0].list.forEach(function(e){o.push(e.day)}),r.dateList=o,n.data.forEach(function(e){var t={},n=[];t.title=e.title,e.list.forEach(function(e){n.push(e.data)}),t.list=n,a.push(t)}),r.list=a,e.o=r,e.getBase());case 4:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){1===e&&(this.sv=!1,this.ev=!1),2===e&&(this.sv=!1,this.ev=!1),3===e&&(this.sv=!0,this.ev=!0),4===e&&(this.sv=!0,this.ev=!1),5===e&&(this.sv=!0,this.ev=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e}}},Rs={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flowview"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{staticStyle:{"margin-top":"5px"}},[e._v("\n      统计日期:\n    ")]),e._v(" "),n("a-form-item",[n("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"分类"},on:{change:e.selectChange},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},e._l(e.dateTypeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.typeName))])}),1)],1),e._v(" "),n("a-form-item",[e.sv?n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}):e._e()],1),e._v(" "),n("a-form-item",[e.ev?n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}):e._e()],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.dataList}},[e._v("查询")])],1)],1),e._v(" "),n("div",{staticClass:"data-ul"},[e._m(0),e._v(" "),n("div",{staticClass:"data-li"},[n("div",{staticClass:"title"},[e._v(e._s(this.data[0].title))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v(e._s(this.data[0].zr))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v("较前一天"),n("span",[e._v(e._s(this.data[0].dbqr>0?100*this.data[0].dbqr.toFixed(2)-100:0)+"%")])])]),e._v(" "),n("div",{staticClass:"data-li"},[n("div",{staticClass:"title"},[e._v(e._s(this.data[1].title))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v(e._s(this.data[1].zr))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v("较前一天"),n("span",[e._v(e._s(this.data[1].dbqr>0?100*this.data[1].dbqr.toFixed(2)-100:0)+"%")])])])]),e._v(" "),n("div",{staticClass:"data-ul"},[e._m(1),e._v(" "),n("div",{staticClass:"data-li"},[n("div",{staticClass:"title"},[e._v(e._s(this.data[2].title))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v(e._s(this.data[2].zr))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v("较前一天"),n("span",[e._v(e._s(this.data[2].dbqr>0?100*this.data[2].dbqr.toFixed(2)-100:0)+"%")])])]),e._v(" "),n("div",{staticClass:"data-li"},[n("div",{staticClass:"title"},[e._v(e._s(this.data[3].title))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v(e._s(this.data[3].zr))]),e._v(" "),n("div",{staticClass:"sub-tit"},[e._v("较前一天"),n("span",[e._v(e._s(this.data[3].dbqr>0?100*this.data[3].dbqr.toFixed(2)-100:0)+"%")])])])]),e._v(" "),n("div",[n("h1",{staticClass:"mytitle"},[e._v("流量趋势")]),e._v(" "),n("div",{staticStyle:{width:"1600px",height:"500px"}},[e.loaded?n("line-chart",{attrs:{chartdata:e.chartdata,options:e.options}}):e._e()],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"data-li"},[t("img",{attrs:{src:n("5dpG")}}),this._v(" "),t("div",{staticClass:"li-tit"},[this._v("浏览访问")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"data-li"},[t("img",{attrs:{src:n("P0L1")}}),this._v(" "),t("div",{staticClass:"li-tit"},[this._v("成交转化")])])}]};var Vs=n("VU/8")(zs,Rs,!1,function(e){n("uST9")},"data-v-7df1214e",null).exports,Bs=n("Fd2+"),$s=n("w/TU"),Us={components:{vuedraggable:n.n($s).a},data:function(){return{vanList:[],btnList:[{name:"van-search"},{name:"van-slider"},{name:"van-switch"}]}},created:function(){for(var e in Bs.a)console.log(e);this.btnList.push()},methods:{createUI:function(e){this.vanList.push({key:e})}}},Ps={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.btnList,function(t,r){return n("a-button",{key:r,on:{click:function(n){return e.createUI(t.name)}}},[e._v(e._s(t.name))])}),e._v(" "),n("div",{ref:"phone",staticStyle:{width:"300px",height:"600px",border:"1px red solid",position:"absolute",left:"1000px"},attrs:{id:"search"}},[n("vuedraggable",{attrs:{"chosen-class":"chosen","force-fallback":"true",group:"people",animation:"1000"}},e._l(e.vanList,function(t,r){return n("div",{key:r},[n("transition-group",["van-search"===t.key?n("div",{key:r},[n("van-search")],1):e._e()]),e._v(" "),n("transition-group",["van-slider"===t.key?n("div",{key:r},[n("van-slider")],1):e._e()]),e._v(" "),n("transition-group",["van-switch"===t.key?n("div",{key:r},[n("van-switch")],1):e._e()])],1)}),0)],1)],2)},staticRenderFns:[]};var Fs=n("VU/8")(Us,Ps,!1,function(e){n("kAry")},"data-v-5c9aaf98",null).exports,Hs={name:"homeMenuAdd",data:function(){return{form:this.$form.createForm(this,{name:"coordinated"})}},created:function(){},methods:{addHomeMenu:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addHomeMenu(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","homeMenuList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&""!==n.title?void 0!==n.key&&""!==n.key?e||t.addHomeMenu(n):t.$message.warn("KEY不能为空"):t.$message.warn("模块名称不能为空")})},goToBack:function(){this.bus.$emit("goToPage","homeMenuList")}}},js={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模块名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{message:"模块名称!"}]}],expression:"['title', { rules: [{  message: '模块名称!' }] }]"}],attrs:{placeholder:"请输入模块名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"KEY","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["key",{rules:[{message:"KEY!"}]}],expression:"['key', { rules: [{  message: 'KEY!' }] }]"}],attrs:{placeholder:"请输入KEY"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var qs=n("VU/8")(Hs,js,!1,function(e){n("NdTe")},"data-v-0302b52e",null).exports,Ws={name:"homeMenuEdit",data:function(){return{form:this.$form.createForm(this,{name:"coordinated"}),data:{}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.infoHomeMenu({id:e});case 2:r=n.sent,t.data=r.homeMenu;case 4:case"end":return n.stop()}},n,t)}))()},updateHomeMenu:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.updateHomeMenu(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","homeMenuList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0!==n.title&&""!==n.title?void 0!==n.key&&""!==n.key?e||t.updateHomeMenu(n):t.$message.warn("KEY不能为空"):t.$message.warn("模块名称不能为空")})},goToBack:function(){this.bus.$emit("goToPage","homeMenuList")}}},Ys={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsCategoryEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模块名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{message:"模块名称!"}],initialValue:e.data.title}],expression:"['title', { rules: [{  message: '模块名称!' }], initialValue: data.title}]"}],attrs:{placeholder:"请输入模块名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"KEY","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["key",{initialValue:e.data.key}],expression:"['key', {initialValue: data.key}]"}],attrs:{placeholder:"请输入KEY"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Gs=n("VU/8")(Ws,Ys,!1,function(e){n("K6dV")},"data-v-b969f3f2",null).exports,Ks=[{title:"模块名称",dataIndex:"title"},{title:"KEY",dataIndex:"key"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Qs="",Xs={name:"homeMenuList",data:function(){return{form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Ks}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Qs=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Qs||0===Qs.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(Qs)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},addHomeMenu:function(){this.bus.$emit("goToPage","homeMenuAdd")},updateHomeMenu:function(e){var t={id:e};this.bus.$emit("goToPage","homeMenuEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listHomeMenu({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalcount);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.listHomeMenu(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalcount);case 4:case"end":return n.stop()}},n,t)}))()},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.deleteHomeMenu(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Qs="");case 4:case"end":return n.stop()}},n,t)}))()}}},Js={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"goodsCategory"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addHomeMenu}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.updateHomeMenu(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Zs=n("VU/8")(Xs,Js,!1,function(e){n("e2CY")},"data-v-7e8319ca",null).exports,ec=[{title:"模块名称",dataIndex:"title"},{title:"KEY",dataIndex:"key"},{title:"排序",dataIndex:"sort",scopedSlots:{customRender:"sort"}}],tc=[],nc=[],rc={name:"userEdit",components:{EditableCell:{template:'\n        <div class="editable-cell">\n            <div v-if="editable" class="editable-cell-input-wrapper">\n                <a-input :value="value"\n                         v-decorator="[{ rules: [{ required: true, message: \'排序!\' }] }]"\n                         @change="handleChange" @pressEnter="check"/>\n                <a-icon\n                        type="check"\n                        class="editable-cell-icon-check"\n                        @click="check"\n                />\n            </div>\n            <div v-else class="editable-cell-text-wrapper">\n                {{ value || \' \' }}\n                <a-icon type="edit" class="editable-cell-icon" @click="edit"/>\n            </div>\n        </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{selectId:tc,selectedList:nc,haveHomeMenuList:[],haveHomeMenu:ec,rowSelection:{selectedRowKeys:[],onChange:this.onSelectChange}}},props:{passData:Object},created:function(){this.getInfo()},computed:{},methods:{onSelectChange:function(e,t){this.rowSelection.selectedRowKeys=Pt()(new $t.a(e)),tc=e,nc=t},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.haveHomeMenuList)),a=r.find(function(t){return t.key===e});a&&(a[t]=n,this.haveHomeMenuList=r,console.log(this.haveHomeMenuList))},onDelete:function(e){var t=[].concat(Xa()(this.haveHomeMenuList));this.haveHomeMenuList=t.filter(function(t){return t.key!==e})},getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.homeInfo();case 2:0===(n=t.sent).code&&(e.haveHomeMenuList=n.data,n.selectResult&&(r=[],n.selectResult.forEach(function(t){e.haveHomeMenuList.forEach(function(e){t.key===e.key&&(e.sort=t.sort,r.push(t.key))})}),a=r,e.rowSelection={selectedRowKeys:a,onChange:e.onSelectChange,getCheckboxProps:function(e){return console.log(e),{props:{defaultChecked:a.includes(e.key)}}}},console.log(e.haveHomeMenuList)));case 4:case"end":return t.stop()}},t,e)}))()},save:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(nc),t.next=3,e.$Http.homeInfoUpdate({menuResult:w()(nc)});case 3:0===t.sent.code&&(e.$message.success("保存成功"),nc=[],tc=[],e.getInfo());case 5:case"end":return t.stop()}},t,e)}))()}}},ac={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userEdit"},[n("a-button",{on:{click:e.save}},[e._v("保存")]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,rowKey:"key",columns:e.haveHomeMenu,dataSource:e.haveHomeMenuList,pagination:!1},scopedSlots:e._u([{key:"sort",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.key,"sort",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.key)}}},[e._v("删除")])])}}])})],1)},staticRenderFns:[]};var oc=n("VU/8")(rc,ac,!1,function(e){n("LP5z")},"data-v-36259862",null).exports,ic=function(e){return e?Te()(e).format("YYYY-MM-DD"):""},sc=[{title:"活动名称",dataIndex:"title"},{title:"类型",dataIndex:"activityType",scopedSlots:{customRender:"activityType"}},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],cc="",lc={name:"omsCourse",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:sc,courseName:null,selectList:[],omsDataType:null,typeId:null,actName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){cc=e}}}},methods:{formatDate:function(e){return ic(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fullDiscountList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(cc),""===cc||0===cc.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delFullDiscount(cc)},fullDiscountEdit:function(e){var t={id:e};this.bus.$emit("goToPage","fullDiscountEdit"),this.bus.$emit("passData",t)},fullDiscountAdd:function(){this.bus.$emit("goToPage","fullDiscountAdd")},delFullDiscount:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fullDiscountDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),cc="");case 4:case"end":return n.stop()}},n,t)}))()},cancelForm:function(){this.form.resetFields()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.fullDiscountList({title:e.actName});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.data.forEach(function(e){var t=new Date(ic(e.beginTime)).getTime(),n=new Date(ic(e.endTime)).getTime(),r=new Date(ic(new Date)).getTime();t>r&&(e.status=1),r>n&&(e.status=2),t<=r&&r<=n&&(e.status=3)}),e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},uc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["actName"],expression:"['actName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"活动名称"},model:{value:e.actName,callback:function(t){e.actName=t},expression:"actName"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.cancelForm}},[e._v("重置")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.fullDiscountAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"activityType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"按价格":"按数量"))])}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"未生效":2===t?"已失效":"进行中"))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.fullDiscountEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var dc=n("VU/8")(lc,uc,!1,function(e){n("q93p")},"data-v-596d31ad",null).exports,fc=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var mc=[],pc=[],hc=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],vc=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],gc={name:"couponAdd",data:function(){return{goodsId:pc,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],selectedGoodsId:[],goodsList:[],columns:hc,goodsSelect:vc,goodsModel:!1,selectedGoods:[],categoryList:[],brandList:[],byMoney:!1,byNum:!1,byGoods:!1}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){mc.push(e)}),pc=e}}}},methods:{checkType:function(e){1===e.target.value&&(this.byMoney=!0,this.byNum=!1),2===e.target.value&&(this.byNum=!0,this.byMoney=!1)},checkGoodsType:function(e){1===e.target.value&&(this.byGoods=!1),2===e.target.value&&(this.byGoods=!0)},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,mc.length>0){var e=new Vt.a;mc=mc.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;pc.forEach(function(e){mc.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=pc}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,r.fullDiscount=1,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addFullDiscount:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addFullDiscount(e);case 2:0===(r=n.sent).code&&t.bus.$emit("goToPage","fullDiscountList"),500===r.code&&(null!==r.data&&void 0!==r.data&&t.selectedGoods.forEach(function(e){r.data.forEach(function(n){e.id===n&&t.$message.error(e.goodsName+"正在参加活动")})}),null!==r.message&&void 0!==r.message&&t.$message.error("所有商品正在参加活动"));case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=fc(t.startValue),n.endTime=fc(t.endValue);var r=[];2===n.goodsType?(t.selectedGoods.forEach(function(e){r.push({goodsId:e.id})}),n.fullDiscountGoods=r):n.fullDiscountGoods=[],e||t.addFullDiscount(n)})},goToBack:function(){this.bus.$emit("goToPage","fullDiscountList")}}},bc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写活动名称!"}]}],expression:"['title', { rules: [{ required: true, message: '请填写活动名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityType",{rules:[{required:!0,message:"请选择活动类型!"}]}],expression:"['activityType', { rules: [{ required: true, message: '请选择活动类型!' }] }]"}],on:{change:e.checkType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          按价格\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          按数量\n        ")])],1)],1),e._v(" "),e.byMoney?n("div",[n("a-form-item",{attrs:{label:"条件","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        满"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["condition",{rules:[{required:!0,message:"请填写条件!"}]}],expression:"['condition', { rules: [{ required: true, message: '请填写条件!' }] }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写优惠!"}]}],expression:"['discount', { rules: [{ required: true, message: '请填写优惠!' }] }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"每人最多","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxDiscount",{rules:[{required:!0,message:"请填写最多优惠!"}]}],expression:"['maxDiscount', { rules: [{ required: true, message: '请填写最多优惠!' }] }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1)],1):e._e(),e._v(" "),e.byNum?n("div",[n("a-form-item",{attrs:{label:"条件","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        满"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["condition",{rules:[{required:!0,message:"请填写条件!"}]}],expression:"['condition', { rules: [{ required: true, message: '请填写条件!' }] }]"}],staticStyle:{width:"50px"}}),e._v("件\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写优惠!"}]}],expression:"['discount', { rules: [{ required: true, message: '请填写优惠!' }] }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"每人最多","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxDiscount",{rules:[{required:!0,message:"请填写最多优惠!"}]}],expression:"['maxDiscount', { rules: [{ required: true, message: '请填写最多优惠!' }] }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1)],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsType",{rules:[{required:!0,message:"请选择活动类型!"}]}],expression:"['goodsType', { rules: [{ required: true, message: '请选择活动类型!' }] }]"}],on:{change:e.checkGoodsType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          全部商品\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          部分商品\n        ")])],1)],1),e._v(" "),e.byGoods?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),e.byGoods&&0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,463067944)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否叠加优惠券","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isCoupon",{rules:[{required:!0,message:"是否叠加优惠券!"}]}],expression:"['isCoupon', { rules: [{ required: true, message: '是否叠加优惠券!' }] }]"}]},[n("a-radio",{attrs:{value:1}},[e._v("\n          是\n        ")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("\n          否\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var yc=n("VU/8")(gc,bc,!1,function(e){n("aoMJ")},"data-v-790b8eb6",null).exports,wc=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var xc=[],kc=[],_c=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Sc=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Cc={name:"couponAdd",data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null},pagination:{total:0,current:1},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:_c,goodsSelect:Sc,selectedGoods:[],categoryList:[],brandList:[],edit:!0,byMoney:!1,byNum:!1,byGoods:!1}},created:function(){this.getFullDiscountInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){xc.push(e)}),kc=e}}}},props:{passData:Object},methods:{brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.selectedGoods=[],this.goodsModel=!1,xc.length>0){var e=new Vt.a;xc=xc.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;kc.forEach(function(e){xc.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=kc}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,r.fullDiscount=1,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkType:function(e){1===e.target.value&&(this.byMoney=!0,this.byNum=!1),2===e.target.value&&(this.byNum=!0,this.byMoney=!1)},checkGoodsType:function(e){1===e.target.value&&(this.byGoods=!1),2===e.target.value&&(this.byGoods=!0)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getFullDiscountInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fullDiscountInfo({id:e});case 2:r=n.sent,t.data=r.fullDiscount,t.selectedGoods=t.data.goodsList,t.startValue=Te()(new Date(t.data.beginTime)),t.endValue=Te()(new Date(t.data.endTime)),1===t.data.activityType&&(t.byMoney=!0,t.byNum=!1),2===t.data.activityType&&(t.byMoney=!1,t.byNum=!0),1===t.data.goodsType&&(t.byGoods=!1),2===t.data.goodsType&&(t.byGoods=!0);case 11:case"end":return n.stop()}},n,t)}))()},fullDiscountEdit:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fullDiscountUpdate(e);case 2:0===(r=n.sent).code&&t.bus.$emit("goToPage","fullDiscountList"),500===r.code&&(null!==r.data&&void 0!==r.data&&t.selectedGoods.forEach(function(e){r.data.forEach(function(n){e.id===n&&t.$message.error(e.goodsName+"正在参加活动")})}),null!==r.message&&void 0!==r.message&&t.$message.error("所有商品正在参加活动"));case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=wc(t.startValue),n.endTime=wc(t.endValue);var r=[];t.selectedGoods.forEach(function(e){r.push({goodsId:e.id,specId:Number(e.specId)})}),2===n.goodsType?n.fullDiscountGoods=r:n.fullDiscountGoods=[],n.id=t.passData.id,e||t.fullDiscountEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","fullDiscountList")}}},Nc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.title}],expression:"['title', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.title }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityType",{rules:[{required:!0,message:"请选择活动类型!"}],initialValue:e.data.activityType}],expression:"['activityType', { rules: [{ required: true, message: '请选择活动类型!' }], initialValue: data.activityType }]"}],on:{change:e.checkType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          按价格\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          按数量\n        ")])],1)],1),e._v(" "),e.byMoney?n("div",[n("a-form-item",{attrs:{label:"条件","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        满"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["condition",{rules:[{required:!0,message:"请填写条件!"}],initialValue:e.data.condition}],expression:"['condition', { rules: [{ required: true, message: '请填写条件!' }], initialValue: data.condition }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写优惠!"}],initialValue:e.data.discount}],expression:"['discount', { rules: [{ required: true, message: '请填写优惠!' }], initialValue: data.discount }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"每人最多","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxDiscount",{rules:[{required:!0,message:"请填写最多优惠!"}],initialValue:e.data.maxDiscount}],expression:"['maxDiscount', { rules: [{ required: true, message: '请填写最多优惠!' }], initialValue: data.maxDiscount }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1)],1):e._e(),e._v(" "),e.byNum?n("div",[n("a-form-item",{attrs:{label:"条件","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        满"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["condition",{rules:[{required:!0,message:"请填写条件!"}],initialValue:e.data.condition}],expression:"['condition', { rules: [{ required: true, message: '请填写条件!' }], initialValue: data.condition }]"}],staticStyle:{width:"50px"}}),e._v("件\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写优惠!"}],initialValue:e.data.discount}],expression:"['discount', { rules: [{ required: true, message: '请填写优惠!' }], initialValue: data.discount }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1),e._v(" "),n("a-form-item",{attrs:{label:"每人最多","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减"),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxDiscount",{rules:[{required:!0,message:"请填写最多优惠!"}],initialValue:e.data.maxDiscount}],expression:"['maxDiscount', { rules: [{ required: true, message: '请填写最多优惠!' }], initialValue: data.maxDiscount }]"}],staticStyle:{width:"50px"}}),e._v("元\n      ")],1)],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsType",{rules:[{required:!0,message:"请选择活动类型!"}],initialValue:e.data.goodsType}],expression:"['goodsType', { rules: [{ required: true, message: '请选择活动类型!' }], initialValue: data.goodsType }]"}],on:{change:e.checkGoodsType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          全部商品\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          部分商品\n        ")])],1)],1),e._v(" "),e.byGoods?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),e.byGoods&&0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.id)}}},[e._v("删除")])])}}],null,!1,586734381)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否叠加优惠券","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isCoupon",{rules:[{required:!0,message:"是否叠加优惠券!"}],initialValue:e.data.isCoupon}],expression:"['isCoupon', { rules: [{ required: true, message: '是否叠加优惠券!' }], initialValue: data.isCoupon }]"}]},[n("a-radio",{attrs:{value:1}},[e._v("\n          是\n        ")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("\n          否\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e.edit?n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]):e._e(),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var Tc=n("VU/8")(Cc,Nc,!1,function(e){n("3wNa")},"data-v-72e36063",null).exports,Dc="",Ic={name:"autoSalary",data:function(){var e=this;return{w:0,xztType:null,seleMonth:null,importShow:!1,importModel:!1,autoSalaryAdd:"https://api.xiaoerd.icu/autoSalary/uploadSalary",downLoadSalary:null,salaryMonth:null,dateFormat:"YYYY-MM",headers:{authorization:"authorization-text",token:localStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{onChange:function(t){e.pagination.current=t},pageSize:5,current:1},visible:!1,autoColumns:[],autoData:[],autoColumnsList:[],autoDataList:[],autoSalary:[],cardList:[],data:{},selectList:[],headerList:[],drBtn:!1}},created:function(){this.findAllXztType(),this.tableData({salaryMonth:m(new Date,"yyyy-MM-dd")})},computed:{rowSelection:function(){return{onChange:function(e,t){Dc=e}}},dr:function(){return{seleMonth:this.seleMonth,xztType:this.xztType}}},watch:{dr:{handler:function(e,t){e.seleMonth.length>0&&e.xztType.length>0&&(this.drBtn=!0)},deep:!0}},methods:{moment:Te.a,delXzt:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delXzt(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData({salaryMonth:t.salaryMonth}));case 4:case"end":return n.stop()}},n,t)}))()},showXzt:function(e){var t={autoColumns:this.autoColumnsList[e],autoData:this.autoDataList[e]};this.bus.$emit("goToPage","xzt"),this.bus.$emit("passData",t)},setAddUrl:function(){if(null===this.seleMonth||null===this.xztType)return this.$message.error("月份和薪资单类型不能为空!");this.autoSalaryAdd="https://api.xiaoerd.icu/autoSalary/uploadSalary?importMonth="+this.seleMonth+"&xztType="+this.xztType},dateChange:function(e,t){this.seleMonth=t,this.xztType=t+"薪资"},showImport:function(){this.importModel=!0},handleChange:function(e){"done"===e.file.status&&(this.autoColumnsList=[],this.tableData({salaryMonth:this.salaryMonth}))},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Dc||0===Dc.length?this.$message.error("至少选择一条进行删除"):(this.visible=!0,console.log(Dc))},handleOk:function(){this.visible=!1,this.delContentById(Dc)},handleOk2:function(){this.importModel=!1},delContentById:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delContentById(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Dc="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i,s,c,l,d,f,m,p,h;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.autoColumnsList.length>0&&(t.autoColumnsList=[]),t.headerList.length>0&&(t.headerList=[]),t.autoDataList.length>0&&(t.autoDataList=[]),t.cardList.length>0&&(t.cardList=[]),n.next=6,t.$Http.autoSalaryList(e);case 6:if(0===(r=n.sent).code){for(t.data=r.data,a=0;a<t.data.length;a++){for((o=t.data[a].columns).index=a,t.cardList.push(o),i=JSON.parse(t.data[a].columns.columns),s=[],c=0,l=0;l<i.length;l++)0===l?s.push({title:i[l],dataIndex:l+"",key:l+"",fixed:"left",width:200}):s.push({title:i[l],dataIndex:l+"",key:l+"",width:200}),c+=s[l].width;for(t.w=c,t.headerList.push({title:t.data[a].columns.xztType,w:t.w}),t.autoColumnsList.push(s),d=[],f=0;f<t.data[a].content.length;f++){for(m={},t.$set(m,"id",t.data[a].content[f].id),p=JSON.parse(t.data[a].content[f].content),h=0;h<Ts()(p).length;h++)t.$set(m,h+"",p[h]);d.push(m)}t.autoDataList.push(d),console.log(t.cardList)}t.pagination.total=t.cardList.length}case 8:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.userNo=n.userNo,t.userName=n.userName,void 0===n.salaryMonth||null===n.salaryMonth?(t.salaryMonth="",n.salaryMonth=""):(n.salaryMonth=m(n.salaryMonth).substring(0,7),t.salaryMonth=n.salaryMonth),t.pagination.current=1,e||t.tableData(n)})},findAllXztType:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findAllXztType();case 2:n=t.sent,console.log(n),0===n.code&&(r=n.data,e.selectList=r);case 5:case"end":return t.stop()}},t,e)}))()},exportExcel:function(e){this.downLoadSalary="https://api.xiaoerd.icu/autoSalary/exportExcel?token="+localStorage.getItem("token")+"&id="+e}}},Mc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["salaryMonth"],expression:"['salaryMonth']"}],attrs:{defaultValue:e.moment(new Date,"YYYY-MM"),placeholder:"选择月份"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"import"},on:{click:e.showImport}},[e._v("导入")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"选择月份",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk2},model:{value:e.importModel,callback:function(t){e.importModel=t},expression:"importModel"}},[n("a-form-item",[n("a-month-picker",{attrs:{placeholder:"选择月份"},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-input",{attrs:{placeholder:"薪资条类型"},model:{value:e.xztType,callback:function(t){e.xztType=t},expression:"xztType"}})],1),e._v(" "),n("a-form-item",[e.drBtn?n("a-upload",{attrs:{name:"file",headers:e.headers,multiple:!1,accept:".xls,.xlsx",beforeUpload:e.setAddUrl,action:e.autoSalaryAdd},on:{change:e.handleChange}},[n("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1):e._e()],1)],1),e._v(" "),n("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:e.pagination,"data-source":e.cardList},scopedSlots:e._u([{key:"renderItem",fn:function(t,r){return n("a-list-item",{},[n("a-card",[n("a-row",{staticStyle:{width:"100%"}},[n("a-col",{attrs:{span:16}},[n("span",{staticStyle:{"font-size":"large","font-weight":"bolder"}},[e._v(e._s(t.xztType)+"["+e._s(t.salaryDate)+"]")])]),e._v(" "),n("a-col",{attrs:{span:8}},[n("div",{staticStyle:{float:"right"}},[n("a-button",{attrs:{type:"primary"},on:{click:function(n){return e.exportExcel(t.id)}}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadSalary}},[e._v(" 导出")])]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:function(n){return e.showXzt(t.index)}}},[e._v("查看")]),e._v(" "),n("a-button",{attrs:{type:"danger"},on:{click:function(n){return e.delXzt(t)}}},[e._v("删除")])],1)])],1)],1)],1)}}])})],1)},staticRenderFns:[]};var Oc=n("VU/8")(Ic,Mc,!1,function(e){n("8xIt")},"data-v-6c836ee6",null).exports,Ac={name:"xzt",data:function(){return{w:null,pagination:{onChange:function(e){console.log(e)},pageSize:10}}},props:{passData:[]},created:function(){for(var e=0;e<this.passData.autoColumns.length;e++)this.w+=this.passData.autoColumns[e].width},methods:{goBack:function(){this.bus.$emit("goToPage","autoSalaryList")}}},Lc={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("a-button",{on:{click:this.goBack}},[this._v("返回")]),this._v(" "),t("a-table",{attrs:{scroll:{x:this.w},pagination:this.pagination,columns:this.passData.autoColumns,dataSource:this.passData.autoData,rowKey:"id"}})],1)},staticRenderFns:[]};var Ec=n("VU/8")(Ac,Lc,!1,function(e){n("zzv9")},"data-v-00c6868a",null).exports,zc=[{title:"栏目名称",dataIndex:"columnName"},{title:"链接",dataIndex:"link"},{title:"状态",dataIndex:"status",customRender:function(e){return 0===e.status?"停用":"正常"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],Rc=[{title:"栏目名称",dataIndex:"columnName"},{title:"链接",dataIndex:"link"},{title:"状态",dataIndex:"status",customRender:function(e){return 0===e.status?"停用":"正常"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],Vc="",Bc={name:"cons",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,columns:zc,columns2:Rc,data:{consTypeId:null,title:null},selectList:[],dataList:[],arr:[]}},created:function(){this.tableData({})},computed:{rowSelection:function(){return{onChange:function(e,t){Vc=e,console.log(Vc)}}}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.tableData(n)})},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){console.log(Vc),""===Vc||0===Vc.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.colDel(Vc)},colEdit:function(e){var t={id:e};this.bus.$emit("goToPage","columnCtrlEdit"),this.bus.$emit("passData",t)},colDel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delCol(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData({}));case 4:case"end":return n.stop()}},n,t)}))()},columnAdd:function(){this.bus.$emit("goToPage","columnCtrlAdd")},consDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delCons(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Vc="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.queryCol(e);case 2:0===(r=n.sent).code&&(t.data=r.data,a=[],t.data.forEach(function(e){var t={id:e.parent.id,parentId:e.parent.parentId,columnName:e.parent.columnName,link:e.parent.link,status:e.parent.status,children:e.child};a.push(t)}),t.arr=a,console.log(a));case 4:case"end":return n.stop()}},n,t)}))()}}},$c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName"],expression:"['columnName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"栏目名称"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.columnAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.arr,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.colEdit(r.id)}}},[e._v("修改")])])}},{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"菜单":2===t?"按钮":"目录"))])}}])})],1)},staticRenderFns:[]};var Uc=n("VU/8")(Bc,$c,!1,function(e){n("OV/M")},"data-v-28ec5c55",null).exports,Pc={name:"colAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),selectList:[],data:{}}},created:function(){this.queryAllParent()},methods:{addCol:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addCol(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","columnCtrlList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){e||t.addCol(n)})},goToBack:function(){this.bus.$emit("goToPage","columnCtrlList")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentCol();case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.columnName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},Fc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"栏目名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName",{rules:[{required:!0,message:"请填写栏目名称!"}]}],expression:"['columnName', { rules: [{ required: true, message: '请填写栏目名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"父级栏目","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}]},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"链接","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{rules:[{required:!0,message:"请填写链接!"}]}],expression:"['link', { rules: [{ required: true, message: '请填写链接!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请填写状态!"}]}],expression:"['status', { rules: [{ required: true, message: '请填写状态!' }] }]"}]},[n("a-select-option",{key:0,attrs:{value:0}},[e._v("正常")]),e._v(" "),n("a-select-option",{key:1,attrs:{value:1}},[e._v("停用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Hc=n("VU/8")(Pc,Fc,!1,function(e){n("i+yu")},"data-v-7585e463",null).exports,jc={name:"roleEdit",data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{},selectList:[],menuList:[],menuIdList:[]}},props:{passData:Object},created:function(){this.queryAllParent(),this.getColInfo(this.passData.id)},methods:{getColInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getColById({id:e});case 2:r=n.sent,t.data=r.data,t.menuIdList=r.data.menuIdList;case 5:case"end":return n.stop()}},n,t)}))()},editCol:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.updateCol(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","columnCtrlList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,e||t.editCol(n)})},goToBack:function(){this.bus.$emit("goToPage","columnCtrlList")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentCol();case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.columnName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},qc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"栏目名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName",{rules:[{required:!0,message:"请填写栏目名称!"}],initialValue:e.data.columnName}],expression:"['columnName', { rules: [{ required: true, message: '请填写栏目名称!' }],initialValue: data.columnName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"父级栏目","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId', {initialValue: data.parentId}]"}]},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"链接","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{rules:[{required:!0,message:"请填写链接!"}],initialValue:e.data.link}],expression:"['link', { rules: [{ required: true, message: '请填写链接!' }],initialValue: data.link }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请填写状态!"}],initialValue:e.data.status}],expression:"['status', { rules: [{ required: true, message: '请填写状态!' }],initialValue: data.status }]"}]},[n("a-select-option",{key:0,attrs:{value:0}},[e._v("正常")]),e._v(" "),n("a-select-option",{key:1,attrs:{value:1}},[e._v("停用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("确定")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var Wc=n("VU/8")(jc,qc,!1,function(e){n("1Lnj")},"data-v-7f6e92ec",null).exports,Yc=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t},Gc=[{title:"文章标题",dataIndex:"title"},{title:"发布时间",dataIndex:"publishDate",render:function(e){return Yc(e)}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],Kc="",Qc={name:"cons",components:{ACol:Nr.b,ARow:Cr.a},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,columns:Gc,data:{consTypeId:null,title:null},cTable:[],selectList:[],dataList:[],arr:[],pass:{},right:!1,sele:[],id:null}},created:function(){this.treeData({})},computed:{rowSelection:function(){return{onChange:function(e,t){Kc=e,console.log(Kc)}}}},methods:{onSelect:function(e,t){var n=e[0];this.pass={name:n.substring(0,n.indexOf(",")),id:n.substring(n.indexOf(",")+1)},this.tableData(this.pass),this.right=!0},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.tableData(n)})},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){console.log(Kc),""===Kc||0===Kc.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.contDel(Kc)},contEdit:function(e){var t={id:e};this.bus.$emit("goToPage","contentCtrlEdit"),this.bus.$emit("passData",t)},contDel:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delCont(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(t.pass));case 4:case"end":return n.stop()}},n,t)}))()},addContent:function(){this.bus.$emit("goToPage","contentCtrlAdd"),this.bus.$emit("passData",this.pass)},consDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delCons(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Kc="");case 4:case"end":return n.stop()}},n,t)}))()},treeData:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.queryCol(e);case 2:0===(r=n.sent).code&&(t.data=r.data,a=[],t.data.forEach(function(e){var t=[];e.child.forEach(function(e){var n={title:e.columnName,key:e.link+","+e.id};t.push(n)});var n={title:e.parent.columnName,key:e.parent.link+","+e.parent.id,children:t};a.push(n)}),t.arr=a,o=t.arr[0].key,t.sele.push(o),console.log(a),t.tableData({id:o.substring(o.indexOf(",")+1)}));case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getContById(e);case 2:0===(r=n.sent).code&&(t.cTable=r.data.data,0===r.data.type&&(t.right=!0),1===r.data.type&&(t.right=!1),t.cTable.forEach(function(e){e.publishDate=Yc(e.publishDate)}));case 4:case"end":return n.stop()}},n,t)}))()}}},Xc={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("div",{staticStyle:{width:"20%",float:"left"}},[n("a-tree",{attrs:{"tree-data":e.arr,defaultSelectedKeys:e.sele},on:{select:e.onSelect}})],1),e._v(" "),n("div",{staticStyle:{width:"80%",float:"right"}},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[e.right?n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addContent}},[e._v("新增")])],1):e._e(),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.cTable,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.contEdit(r.id)}}},[e._v("修改")])])}}])})],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])])],1)},staticRenderFns:[]};var Jc=n("VU/8")(Qc,Xc,!1,function(e){n("dQHh")},"data-v-d35dc3ea",null).exports;var Zc={name:"colAdd",components:{RichText:xt},data:function(){return{show:!0,showV:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loading2:!1,selectList:[],richTextData:null,data:{picUrl:null,imgUrl:null,describe:null},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},created:function(){this.selectList.push({value:this.passData.id,text:this.passData.name})},props:{passData:Object},methods:{getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},handleChange2:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources[0].src)):this.loading2=!0},addCont:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addCont(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","contentCtrlList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.data.imgUrl,n.videoUrl=t.playerOptions.sources[0].src,n.columnId=t.passData.id,n.content=t.data.describe,e||t.addCont(n)})},goToBack:function(){this.bus.$emit("goToPage","contentCtrlList")}}},el={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"文章标题","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"摘要","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary"],expression:"['summary']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"文章类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}]},[n("a-select-option",{key:1,attrs:{value:1}},[e._v("文本图片")]),e._v(" "),n("a-select-option",{key:2,attrs:{value:2}},[e._v("视频")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:5},"wrapper-col":{span:16}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.handleChange2}},[n("div",[n("a-icon",{attrs:{type:e.loading2?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"内容","label-col":{span:5},"wrapper-col":{span:16}}},[n("rich-text",{attrs:{richTextData:e.richTextData},on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var tl=n("VU/8")(Zc,el,!1,function(e){n("JccS")},"data-v-42117872",null).exports;var nl={name:"roleEdit",components:{RichText:xt},data:function(){return{show:!0,showV:!0,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},selectList:[],menuList:[],menuIdList:[],picUrl:null,imgUrl:null,describe:null,richTextData:null}},props:{passData:Object},created:function(){this.getContInfo(this.passData.id)},methods:{handleChange2:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!0},getContent:function(e){this.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},getContInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getCont({id:e});case 2:r=n.sent,t.data=r.article,t.picUrl=t.data.picUrl,t.imgUrl=t.data.picUrl,t.richTextData=t.data.content,t.playerOptions.sources[0].src=t.data.videoUrl,t.menuIdList=r.data.menuIdList;case 9:case"end":return n.stop()}},n,t)}))()},editCont:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.updateCont(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","contentCtrlList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,e||(n.picUrl=t.imgUrl,n.content=t.describe,n.videoUrl=t.playerOptions.sources[0].src,t.editCont(n))})},goToBack:function(){this.bus.$emit("goToPage","contentCtrlList")}}},rl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"文章标题","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写文章标题!"}],initialValue:e.data.title}],expression:"['title', { rules: [{ required: true, message: '请填写文章标题!' }],initialValue: data.title }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"摘要","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary",{rules:[{required:!0,message:"请填写摘要!"}],initialValue:e.data.summary}],expression:"['summary', { rules: [{ required: true, message: '请填写摘要!' }],initialValue: data.summary }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"文章类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请填写状态!"}],initialValue:e.data.type}],expression:"['type', { rules: [{ required: true, message: '请填写状态!' }],initialValue: data.type }]"}]},[n("a-select-option",{key:1,attrs:{value:1}},[e._v("文本图片")]),e._v(" "),n("a-select-option",{key:2,attrs:{value:2}},[e._v("视频")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.picUrl?n("img",{attrs:{src:e.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:5},"wrapper-col":{span:16}}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.handleChange2}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e()],1),e._v(" "),n("a-form-item",{attrs:{label:"内容","label-col":{span:5},"wrapper-col":{span:16}}},[n("rich-text",{attrs:{richTextData:e.richTextData},on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("确定")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var al=n("VU/8")(nl,rl,!1,function(e){n("Q7EB")},"data-v-5d62cf36",null).exports,ol=[{title:"二维码",dataIndex:"url",scopedSlots:{customRender:"url"}},{title:"二维码文本",dataIndex:"content"},{title:"所属店铺",dataIndex:"store.storeName"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"核销时间",dataIndex:"writeOffTime",scopedSlots:{customRender:"writeOffTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],il="",sl=null,cl={name:"storeCode",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,storeId:null,storeList:[],pagination:{total:0,current:1},data:[],startTime:null,endTime:null,locale:Ke,columns:ol}},created:function(){this.tableData(),this.getStoreList()},computed:{rowSelection:function(){return{onChange:function(e,t){il=e,sl=t}}}},methods:{handleTableChange:function(e,t,n){var r={};r.storeId=this.storeId,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},getStoreList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.storeListByJudge();case 2:0===(n=t.sent).code&&(e.storeList=n.storeList);case 4:case"end":return t.stop()}},t,e)}))()},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},storeCodeEdit:function(e){if("1"===e.status){var t={id:e.id};this.bus.$emit("goToPage","storeCodeEdit"),this.bus.$emit("passData",t)}else this.$message.warn("该信息不能修改")},storeCodeDetail:function(e){var t={id:e};this.bus.$emit("goToPage","storeCodeDetail"),this.bus.$emit("passData",t)},sendMessage:function(){var e=this;if(null===sl||sl.length<1)this.$message.error("请选择数据");else{var t=!0;sl.forEach(function(n){"1"!==n.status&&(t=!1,e.$message.error("只能选取未发送的二维码"))}),t&&this.send(il)}},send:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.codeSend(e);case 2:0===n.sent.code&&t.tableData();case 4:case"end":return n.stop()}},n,t)}))()},storeCodeAdd:function(){this.bus.$emit("goToPage","storeCodeAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.storeId=n.storeId,n.startTime=t.startTime,n.endTime=t.endTime,console.log(n),t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.listStoreCode(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listStoreCode({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},ll={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeCode"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeId"],expression:"['storeId']"}],staticStyle:{width:"200px"},attrs:{placeholder:"店铺",allowClear:!0}},e._l(e.storeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.storeName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:1}},[e._v("未发送")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("未核销")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("已核销")])],1)],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.storeCodeAdd}},[e._v("生成二维码")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.sendMessage}},[e._v("发送信息")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"url",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"status",fn:function(t){return n("span",{},[e._v(e._s("1"===t?"未发送":"2"===t?"未核销":"3"===t?"已核销":""))])}},{key:"remark",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.remark}},[e._v("\n      "+e._s(r.remark)+"\n    ")])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"writeOffTime",fn:function(t){return null!==t?n("span",{},[e._v(e._s(e.formatDate(t)))]):e._e()}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.storeCodeEdit(r)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.storeCodeDetail(r.id)}}},[e._v("详情")])],1)}}],null,!0)})],1)},staticRenderFns:[]};var ul=n("VU/8")(cl,ll,!1,function(e){n("4ta8")},"data-v-c440fc2c",null).exports,dl={name:"storeCodeAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),type:1}},methods:{send:function(e){this.type=2,this.handleSubmit(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()?/^1[3456789]\d{9}$/.test(n.mobile)?void 0!==n.remark&&null!==n.remark&&""!==n.remark.trim()?(n.type=t.type,console.log(n),e||t.addStoreCode(n)):t.$message.warn("备注不能为空"):t.$message.warn("手机号不正确"):t.$message.warn("手机号不能为空")})},addStoreCode:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeCodeAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","storeCode");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","storeCode")}}},fl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeCodeAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"手机号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{required:!0,rules:[{message:"手机号!"}]}],expression:"['mobile', { required: true,rules: [{ message: '手机号!' }] }]"}],attrs:{placeholder:"手机号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{required:!0}],expression:"['remark', { required: true }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        保存\n      ")]),e._v(" "),n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.send}},[e._v(" 发送 ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ml=n("VU/8")(dl,fl,!1,function(e){n("MK9U")},"data-v-44ee1409",null).exports,pl={name:"storeCodeEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{mobile:null,remark:null},type:1}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeCodeInfo({id:e});case 2:r=n.sent,t.data=r.sysStoreCode,t.data.mobile=r.sysStoreCode.sysShortMessage.mobile;case 5:case"end":return n.stop()}},n,t)}))()},send:function(e){this.type=2,this.handleSubmit(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()?/^1[3456789]\d{9}$/.test(n.mobile)?void 0!==n.remark&&null!==n.remark&&""!==n.remark.trim()?(n.type=t.type,console.log(n),e||t.updateStoreCode(n)):t.$message.warn("备注不能为空"):t.$message.warn("手机号不正确"):t.$message.warn("手机号不能为空")})},updateStoreCode:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeCodeUpdate(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","storeCode");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","storeCode")}}},hl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeCodeEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"手机号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{required:!0,rules:[{message:"手机号!"}],initialValue:e.data.mobile}],expression:"['mobile', { required: true,rules: [{ message: '手机号!' }],initialValue: data.mobile }]"}],attrs:{placeholder:"手机号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{required:!0,initialValue:e.data.remark}],expression:"['remark', { required: true ,initialValue: data.remark}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        修改\n      ")]),e._v(" "),n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.send}},[e._v(" 发送 ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var vl=n("VU/8")(pl,hl,!1,function(e){n("qcl2")},"data-v-d552e47c",null).exports,gl={name:"storeCodeDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{mobile:null,remark:null,status:null,url:null,sendTime:null,writeOffTime:null}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeCodeInfo({id:e});case 2:r=n.sent,t.data=r.sysStoreCode,t.data.mobile=r.sysStoreCode.sysShortMessage.mobile,null!==r.sysStoreCode.sysShortMessage.sendTime?t.data.sendTime=m(r.sysStoreCode.sysShortMessage.sendTime):t.data.sendTime=null,null!==t.data.writeOffTime&&(t.data.writeOffTime=m(t.data.writeOffTime));case 7:case"end":return n.stop()}},n,t)}))()},send:function(e){this.type=2,this.handleSubmit(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()?/^1[3456789]\d{9}$/.test(n.mobile)?(n.type=t.type,console.log(n)):t.$message.warn("手机号不正确"):t.$message.warn("手机号不能为空")})},updateStoreCode:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeCodeUpdate(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","storeCode");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","storeCode")}}},bl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeCodeDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"二维码","label-col":{span:2},"wrapper-col":{span:16}}},[n("img",{attrs:{src:e.data.url}})]),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{required:!0,rules:[{message:"手机号!"}],initialValue:e.data.mobile}],expression:"['mobile', { required: true,rules: [{ message: '手机号!' }],initialValue: data.mobile }]"}],attrs:{"read-only":"",placeholder:"手机号"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status',{initialValue: data.status}]"}],staticStyle:{width:"200px"},attrs:{disabled:""}},[n("a-select-option",{attrs:{value:"1"}},[e._v("未发送")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("未核销")]),e._v(" "),n("a-select-option",{attrs:{value:"3"}},[e._v("已核销")])],1)],1),e._v(" "),null!==e.data.sendTime?n("a-form-item",{attrs:{label:"发送时间","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sendTime",{initialValue:e.data.sendTime}],expression:"['sendTime', {initialValue: data.sendTime }]"}],attrs:{"read-only":""}})],1):e._e(),e._v(" "),null!==e.data.writeOffTime?n("a-form-item",{attrs:{label:"核销时间","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["writeOffTime",{initialValue:e.data.writeOffTime}],expression:"['writeOffTime', {initialValue: data.writeOffTime }]"}],attrs:{"read-only":""}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{required:!0,initialValue:e.data.remark}],expression:"['remark', { required: true ,initialValue: data.remark}]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var yl=n("VU/8")(gl,bl,!1,function(e){n("xlbD")},"data-v-405f5410",null).exports;var wl={name:"guideEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,data:{id:null,imgUrl:null,url:null}}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.guideInfo();case 2:null!==(n=t.sent).guide&&(e.data=n.guide,e.data.imgUrl=n.guide.url);case 4:case"end":return t.stop()}},t,e)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.url=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.data.id,n.url=t.data.imgUrl,console.log(n),e||(null===n.id?t.addGuide(n):t.editGuide(n))})},addGuide:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.guideAdd(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()},editGuide:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.guideEdit(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","store")}}},xl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"guideEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.url?n("img",{attrs:{src:e.data.url,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var kl=n("VU/8")(wl,xl,!1,function(e){n("67JE")},"data-v-0a673963",null).exports,_l=[{title:"店铺名称",dataIndex:"storeName"},{title:"二维码总数",dataIndex:"total"},{title:"已核销数",dataIndex:"written"},{title:"未核销数",dataIndex:"unwritten"}],Sl={name:"codeAnalysis",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,storeId:null,storeList:[],data:[],startTime:null,endTime:null,isAdmin:localStorage.isAdmin,locale:Ke,columns:_l}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.storeId=this.storeId,r.startTime=this.startTime,r.endTime=this.endTime,this.searchByConditions(r)},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},storeCodeEdit:function(e){if("1"===e.status){var t={id:e.id};this.bus.$emit("goToPage","storeCodeEdit"),this.bus.$emit("passData",t)}else this.$message.warn("该信息不能修改")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.storeId=n.storeId,n.startTime=t.startTime,n.endTime=t.endTime,console.log(n),e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.codeAnalysisList({});case 2:0===(n=t.sent).code&&(e.data=n.storeList);case 4:case"end":return t.stop()}},t,e)}))()}}},Cl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"codeAnalysis"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}}),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"url",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"status",fn:function(t){return n("span",{},[e._v(e._s("1"===t?"未发送":"2"===t?"未核销":"3"===t?"已核销":""))])}},{key:"remark",fn:function(t,r){return n("div",{style:{maxWidth:"200px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.remark}},[e._v("\n      "+e._s(r.remark)+"\n    ")])}}])})],1)},staticRenderFns:[]};var Nl=n("VU/8")(Sl,Cl,!1,function(e){n("v74i")},"data-v-03b8bd71",null).exports,Tl=[{title:"优惠券名称",dataIndex:"title"},{title:"类型",dataIndex:"isGoods",scopedSlots:{customRender:"isGoods"}},{title:"优惠券类型",dataIndex:"couponType",scopedSlots:{customRender:"couponType"}},{title:"优惠类型",dataIndex:"offerType",scopedSlots:{customRender:"offerType"}},{title:"过期时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Dl="",Il={name:"omsCourse",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Tl,courseName:null,selectList:[],omsDataType:null,typeId:null,title:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Dl=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.couponList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount,t.data.forEach(function(e){var t,n;e.createDate=(t=e.createDate,n=t?Te()(t).format("YYYY-MM-DD"):"",console.log(n),n)}));case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Dl),""===Dl||0===Dl.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delCoupon(Dl)},couponEdit:function(e){var t={id:e};this.bus.$emit("goToPage","couponEdit"),this.bus.$emit("passData",t)},Issue:function(e){var t={id:e};this.bus.$emit("goToPage","Issue"),this.bus.$emit("passData",t)},couponAdd:function(){this.bus.$emit("goToPage","couponAdd")},delCoupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delCoupon(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Dl="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.couponList({title:e.title});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount,console.log(e.pagination),e.data.forEach(function(e){-1===e.couponType&&(e.couponTypeName="满减"),e.couponContent="满"+e.fullAmount+"减"+e.discountPrice}));case 4:case"end":return t.stop()}},t,e)}))()}}},Ml={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"优惠券名称"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.couponAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s(0===t?"进行中":"结束"))])}},{key:"isGoods",fn:function(t){return n("span",{},[e._v(e._s(-1===t?"通用":1===t?"指定商品":""))])}},{key:"couponType",fn:function(t){return n("span",{},[e._v(e._s(-1===t?"满减":1===t?"折扣":""))])}},{key:"offerType",fn:function(t){return n("span",{},[e._v(e._s(-1===t?"普通优惠":1===t?"新客优惠":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.couponEdit(r.id)}}},[e._v("修改")]),e._v(" "),0===r.status?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.Issue(r.id)}}},[e._v("发放")]):e._e()])}}])})],1)},staticRenderFns:[]};var Ol=n("VU/8")(Il,Ml,!1,function(e){n("SGbo")},"data-v-691456b6",null).exports,Al=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var Ll=[],El=[],zl=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"分类",dataIndex:"category.categoryName"},{title:"价格",dataIndex:"price"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"}],Rl=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Vl={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'优惠券数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{goodsId:El,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:zl,goodsSelect:Rl,selectedGoods:[],categoryList:[],brandList:[],rowSelection:{selectedRowKeys:[],onChange:this.onSelectChange}}},created:function(){this.tableData()},computed:{},methods:{onSelectChange:function(e,t){this.rowSelection.selectedRowKeys=Pt()(new $t.a(e)),0!==t.length&&t.forEach(function(e){Ll.push(e)}),El=this.rowSelection.selectedRowKeys},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.id===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,Ll.length>0){var e=new Vt.a;Ll=Ll.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;El.forEach(function(e){Ll.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=El}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addCoupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addCoupon(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","coupon");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=Al(t.startValue),n.endTime=Al(t.endValue);var r=Al(new Date);-1===n.useThreshold&&(n.fullAmount=null);var a=[];1===n.isGoods?(t.selectedGoods.forEach(function(e){a.push({goodsId:e.id,goodsCouponCount:Number(e.couponCount)})}),n.couponGoods=a):n.couponGoods=[],Al(t.endValue)>=r&&(n.status=0),Al(t.endValue)<r&&(n.status=1),e||t.addCoupon(n)})},goToBack:function(){this.bus.$emit("goToPage","coupon")}}},Bl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"优惠券名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写优惠券名称!"}]}],expression:"['title', { rules: [{ required: true, message: '请填写优惠券名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isGoods",{rules:[{required:!0,message:"请选择优惠券类型!"}]}],expression:"['isGoods', { rules: [{ required: true, message: '请选择优惠券类型!' }] }]"}],on:{change:e.checkType}},[n("a-radio",{attrs:{value:-1}},[e._v("\n            通用\n          ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n            指定商品\n          ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠券数量","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponCount",{rules:[{required:!0,message:"请填写优惠券数量!"}]}],expression:"['couponCount', { rules: [{ required: true, message: '请填写优惠券数量!' }] }]"}],staticStyle:{width:"100px"}})],1),e._v(" "),e.goodsBtn?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),0!==e.selectedGoods.length&&e.goodsBtn?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"couponCount",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.id,"couponCount",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.id)}}},[e._v("删除")])])}}],null,!1,1707980802)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"使用门槛","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["useThreshold",{rules:[{required:!0,message:"请选择优惠券类型!"}]}],expression:"['useThreshold', { rules: [{ required: true, message: '请选择优惠券类型!' }] }]"}],on:{change:e.checkUse}},[n("a-radio",{attrs:{value:-1}},[e._v("\n            无使用门槛\n          ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n            满\n            "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullAmount"],expression:"['fullAmount']"}],staticStyle:{width:"100px"}}),e._v("元\n          ")],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠券类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponType",{rules:[{required:!0,message:"请选择优惠券类型!"}]}],expression:"['couponType', { rules: [{ required: true, message: '请选择优惠券类型!' }] }]"}],on:{change:e.checkCouponType}},[n("a-radio",{attrs:{value:-1}},[e._v("\n            满减券\n          ")])],1)],1),e._v(" "),e.manjian?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n          减\n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discountPrice",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['discountPrice', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}}),e._v("\n          元\n      ")],1)],1):e._e(),e._v(" "),e.zhekou?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n          打\n            "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['discount', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}}),e._v("\n          折\n          ")],1)],1):e._e(),e._v(" "),e.suiji?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n          范围随机:       \n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["minRange",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['minRange', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}}),e._v("\n          -\n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxRange",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['maxRange', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}}),e._v(" "),n("br"),e._v("\n          真实范围随机:\n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["minRealRange",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['minRealRange', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}}),e._v("\n          -\n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxRealRange",{rules:[{required:!0,message:"请填写优惠政策!"}]}],expression:"['maxRealRange', { rules: [{ required: true, message: '请填写优惠政策!' }] }]"}],staticStyle:{width:"100px"}})],1)],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n        -\n        "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"过期时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["offerType",{rules:[{required:!0,message:"请选择优惠类型!"}]}],expression:"['offerType', { rules: [{ required: true, message: '请选择优惠类型!' }] }]"}]},[n("a-radio",{attrs:{value:-1}},[e._v("\n            普通优惠\n          ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n            新客优惠\n          ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var $l=n("VU/8")(Vl,Bl,!1,function(e){n("h8D7")},"data-v-6744e478",null).exports,Ul=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var Pl=[],Fl=[],Hl=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"},width:80},{title:"商品名称",dataIndex:"goodsName",width:150},{title:"分类",dataIndex:"category.categoryName",width:150},{title:"价格",dataIndex:"price",width:150},{title:"折扣价格",dataIndex:"discountPrice",width:150},{title:"库存",dataIndex:"stock",width:150}],jl=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],ql={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'优惠券数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n          type="check"\n          class="editable-cell-icon-check"\n          @click="check"\n        />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null},pagination:{total:0,current:1},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:Hl,goodsSelect:jl,selectedGoods:[],categoryList:[],brandList:[],rowSelection:{selectedRowKeys:[],onChange:this.onSelectChange}}},created:function(){this.getCouponInfo(this.passData.id),this.tableData()},computed:{},props:{passData:Object},methods:{onSelectChange:function(e,t){this.rowSelection.selectedRowKeys=Pt()(new $t.a(e)),0!==t.length&&t.forEach(function(e){Pl.push(e)}),Fl=this.rowSelection.selectedRowKeys},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.id===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,t.pagination.current=1,n.status=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,Pl.length>0){var e=new Vt.a;Pl=Pl.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;Fl.forEach(function(e){Pl.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=Fl}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,r=[],e.selectedGoods.forEach(function(e){r.push(e.id)}),e.pagination.total=n.total,e.goodsList?(a=r,e.rowSelection={selectedRowKeys:a,onChange:e.onSelectChange,getCheckboxProps:function(e){return console.log(e),{props:{defaultChecked:a.includes(e.id)}}}}):e.rowSelection={selectedRowKeys:[],onChange:e.onSelectChange});case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getCouponInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getCouponInfo({id:e});case 2:r=n.sent,t.data=r.aCoupon,1===t.data.isGoods&&(t.goodsBtn=!0,t.couponCount=!1),-1===t.data.isGoods&&(t.goodsBtn=!1,t.couponCount=!0),-1===t.data.couponType&&(t.manjian=!0,t.zhekou=!1,t.suiji=!1),1===t.data.couponType&&(t.zhekou=!0,t.manjian=!1,t.suiji=!1),2===t.data.couponType&&(t.zhekou=!1,t.manjian=!1,t.suiji=!0),t.selectedGoods=t.data.goodsList,t.startValue=Te()(new Date(t.data.beginTime)),t.endValue=Te()(new Date(t.data.endTime));case 12:case"end":return n.stop()}},n,t)}))()},couponEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.couponEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","coupon");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.data.menuIdList,n.beginTime=Ul(t.startValue),n.endTime=Ul(t.endValue);var r=Ul(new Date);-1===n.useThreshold&&(n.fullAmount=null);var a=[];1===n.isGoods?(t.selectedGoods.forEach(function(e){a.push({goodsId:e.id,goodsCouponCount:Number(e.couponCount)})}),n.couponGoods=a):n.couponGoods=[],Ul(t.endValue)>=r&&(n.status=0),Ul(t.endValue)<r&&(n.status=1),e||t.couponEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","coupon")}}},Wl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"优惠券名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写优惠券名称!"}],initialValue:e.data.title}],expression:"['title', { rules: [{ required: true, message: '请填写优惠券名称!' }], initialValue: data.title }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isGoods",{rules:[{required:!0,message:"请选择优惠券类型!"}],initialValue:e.data.isGoods}],expression:"['isGoods', { rules: [{ required: true, message: '请选择优惠券类型!' }], initialValue: data.isGoods }]"}],on:{change:e.checkType}},[n("a-radio",{attrs:{value:-1}},[e._v("\n          通用\n        ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n          指定商品\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠券数量","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponCount",{rules:[{required:!0,message:"请填写优惠券数量!"}],initialValue:e.data.couponCount}],expression:"['couponCount', { rules: [{ required: true, message: '请填写优惠券数量!' }], initialValue: data.couponCount }]"}],staticStyle:{width:"100px"}})],1),e._v(" "),e.goodsBtn?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),0!==e.selectedGoods.length&&e.goodsBtn?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"couponCount",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.id,"couponCount",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.id)}}},[e._v("删除")])])}}],null,!1,1707980802)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"使用门槛","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["useThreshold",{rules:[{required:!0,message:"请选择使用门槛!"}],initialValue:e.data.useThreshold}],expression:"['useThreshold', { rules: [{ required: true, message: '请选择使用门槛!' }], initialValue: data.useThreshold }]"}],on:{change:e.checkUse}},[n("a-radio",{attrs:{value:-1}},[e._v("\n          无使用门槛\n        ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n          满\n          "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullAmount",{initialValue:e.data.fullAmount}],expression:"['fullAmount',{ initialValue: data.fullAmount}]"}],staticStyle:{width:"100px"}}),e._v("元\n        ")],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠券类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["couponType",{rules:[{required:!0,message:"请选择优惠券类型!"}],initialValue:e.data.couponType}],expression:"['couponType', { rules: [{ required: true, message: '请选择优惠券类型!' }], initialValue: data.couponType }]"}],on:{change:e.checkCouponType}},[n("a-radio",{attrs:{value:-1}},[e._v("\n          满减券\n        ")])],1)],1),e._v(" "),e.manjian?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        减\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discountPrice",{rules:[{required:!0,message:"请填写立减金额!"}],initialValue:e.data.discountPrice}],expression:"['discountPrice', { rules: [{ required: true, message: '请填写立减金额!' }], initialValue: data.discountPrice }]"}],staticStyle:{width:"100px"}}),e._v("\n        元\n      ")],1)],1):e._e(),e._v(" "),e.zhekou?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        打\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["discount",{rules:[{required:!0,message:"请填写几折优惠!"}],initialValue:e.data.discount}],expression:"['discount', { rules: [{ required: true, message: '请填写几折优惠!' }], initialValue: data.discount }]"}],staticStyle:{width:"100px"}}),e._v("\n        折\n      ")],1)],1):e._e(),e._v(" "),e.suiji?n("div",[n("a-form-item",{attrs:{label:"优惠政策","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n        范围随机:       \n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["minRange",{rules:[{required:!0,message:"最小随机金额!"}],initialValue:e.data.minRange}],expression:"['minRange', { rules: [{ required: true, message: '最小随机金额!' }], initialValue: data.minRange }]"}],staticStyle:{width:"100px"}}),e._v("\n        -\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxRange",{rules:[{required:!0,message:"最大随机金额!"}],initialValue:e.data.maxRange}],expression:"['maxRange', { rules: [{ required: true, message: '最大随机金额!' }], initialValue: data.maxRange }]"}],staticStyle:{width:"100px"}}),e._v(" "),n("br"),e._v("\n        真实范围随机:\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["minRealRange",{rules:[{required:!0,message:"最小随机金额!"}],initialValue:e.data.minRealRange}],expression:"['minRealRange', { rules: [{ required: true, message: '最小随机金额!' }], initialValue: data.minRealRange }]"}],staticStyle:{width:"100px"}}),e._v("\n        -\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxRealRange",{rules:[{required:!0,message:"最大随机金额!"}],initialValue:e.data.maxRealRange}],expression:"['maxRealRange', { rules: [{ required: true, message: '最大随机金额!' }] , initialValue: data.maxRealRange}]"}],staticStyle:{width:"100px"}})],1)],1):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"过期时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"优惠类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["offerType",{rules:[{required:!0,message:"请选择优惠类型!"}],initialValue:e.data.offerType}],expression:"['offerType', { rules: [{ required: true, message: '请选择优惠类型!' }], initialValue: data.offerType }]"}]},[n("a-radio",{attrs:{value:-1}},[e._v("\n          普通优惠\n        ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n          新客优惠\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{align:"center",rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1)],1)},staticRenderFns:[]};var Yl=n("VU/8")(ql,Wl,!1,function(e){n("LHHV")},"data-v-2b008755",null).exports,Gl=[{title:"头像",dataIndex:"avatarUrl",scopedSlots:{customRender:"avatarUrl"}},{title:"昵称",dataIndex:"nickName"},{title:"姓名",dataIndex:"realName"},{title:"手机号",dataIndex:"mobile"},{title:"性别",dataIndex:"gender",scopedSlots:{customRender:"gender"}},{title:"会员类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"注册时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],Kl=null,Ql="",Xl={name:"member",data:function(){var e=this;return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1,onChange:function(t){console.log(t),e.pagination.current=t}},show:!0,visible:!1,data:[],haveMember:[],have:[],no:[],realName:null,nickName:null,mobile:null,type:null,columns:Gl,t1:!0,t2:!1}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Kl=t,Ql=e}}}},props:{passData:Object},methods:{callback:function(e){"0"===e?(this.data=this.have,this.show=!1,this.t1=!1,this.t2=!0,this.pagination.total=this.data.length,this.pagination.current=1):"1"===e?(this.data=this.no,this.show=!0,this.t1=!0,this.t2=!1,this.pagination.total=this.data.length,this.pagination.current=1):"99"===e&&(this.data=this.have,this.show=!1,this.t1=!1,this.t2=!0,this.pagination.total=this.data.length,this.pagination.current=1)},showModal:function(){null===Kl||0===Kl.length?this.$message.error("请至少选择一条进行发放"):this.visible=!0},handleOk:function(){this.visible=!1,this.Issue(Ql,2)},Issue:function(e,t){var n=this;return f()(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.IssueCoupon({memberId:e,couponId:n.passData.id,status:0,type:t});case 2:0===r.sent.code&&(n.$message.success("发放成功"),n.tableData(),Ql="",Kl=null);case 4:case"end":return r.stop()}},r,n)}))()},handleTableChange:function(e,t,n){},memberDetail:function(e){var t={id:e};this.bus.$emit("goToPage","memberDetail"),this.bus.$emit("passData",t)},memberUpdate:function(e){var t={id:e};this.bus.$emit("goToPage","memberEdit"),this.bus.$emit("passData",t)},openCard:function(e){var t={id:e};this.bus.$emit("goToPage","memberCardAdd"),this.bus.$emit("passData",t)},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.type=n.type,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.memberList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.memberAllList({nickName:e.nickName});case 2:if(0!==(n=t.sent).code){t.next=11;break}return e.have=[],e.no=[],e.data=n.data,t.next=9,e.$Http.couponMemberList({couponId:e.passData.id});case 9:if(0===(r=t.sent).code){for(e.haveMember=r.data,a=0;a<e.haveMember.length;a++)for(o=0;o<e.data.length;o++)e.data[o].id===e.haveMember[a].memberId&&(e.have.push(e.data[o]),e.data.splice(o,1),o--);e.no=e.data}case 11:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","coupon")}}},Jl={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"memberList"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")]),e._v(" "),e.show?n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("发放")]):e._e(),e._v(" "),e.show?n("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.Issue(null,1)}}},[e._v("全部发放")]):e._e(),e._v(" "),n("br"),e._v(" "),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"昵称"},model:{value:e.nickName,callback:function(t){e.nickName=t},expression:"nickName"}}),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.tableData}},[e._v("查询")]),e._v(" "),n("a-tabs",{attrs:{defaultActiveKey:"99"},on:{change:e.callback}},[n("a-tab-pane",{key:"1",attrs:{tab:"未发放"}}),e._v(" "),n("a-tab-pane",{key:"0",attrs:{tab:"已发放"}})],1),e._v(" "),n("a-modal",{attrs:{title:"发放确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定发放所选人？")])]),e._v(" "),e.t1?n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}},{key:"gender",fn:function(t){return n("div",{},[e._v(e._s(1===t?"男":2===t?"女":"未知"))])}},{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"散客":2===t?"会员":"管理员"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,1730031571)}):e._e(),e._v(" "),e.t2?n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"avatarUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}},{key:"gender",fn:function(t){return n("div",{},[e._v(e._s(1===t?"男":2===t?"女":"未知"))])}},{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"散客":2===t?"会员":"管理员"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,1730031571)}):e._e()],1)},staticRenderFns:[]};var Zl=n("VU/8")(Xl,Jl,!1,function(e){n("3OwB")},"data-v-5fc5d6b0",null).exports,eu=[{title:"标题",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"内容",dataIndex:"content",scopedSlots:{customRender:"content"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],tu="",nu={name:"helpCenter",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,pagination:{total:0,current:1},data:[],columns:eu}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){tu=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===tu||0===tu.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.helpDelete(tu)},helpDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.helpCenterDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),tu="");case 4:case"end":return n.stop()}},n,t)}))()},helpEdit:function(e){var t={id:e};this.bus.$emit("goToPage","helpCenterEdit"),this.bus.$emit("passData",t)},helpAdd:function(){this.bus.$emit("goToPage","helpCenterAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.helpCenterList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.helpCenterList({});case 2:0===(n=t.sent).code&&(e.data=e.translateData(n.rows));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t}}},ru={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"helpCenter"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.helpAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"content",fn:function(t,r){return n("div",{style:{minWidth:"150px",maxWidth:"150px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.content}},[e._v("\n      "+e._s(r.content)+"\n    ")])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.helpEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var au=n("VU/8")(nu,ru,!1,function(e){n("ddYb")},"data-v-619c10ca",null).exports,ou={name:"helpCenterAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,data:{describe:null},richTextData:"",list:[]}},created:function(){this.getParentList()},methods:{editors:function(e){this.content=e},getContent:function(e){this.data.describe=e},getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.helpCenterList({parentId:0});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.visible=!0},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(console.log(n),void 0===n.parentId&&(n.parentId=0),void 0!==n.name&&""!==n.name.trim()){if(!0===t.visible){if(void 0===t.content)return void t.$message.warn("请输入内容");n.content=t.content}e||t.addHelpCenter(n)}else t.$message.warn("请选择标题")})},addHelpCenter:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addHelpCenter(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","helpCenter")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","helpCenter")}}},iu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"helpCenterAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"120px"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{required:!0,rules:[{message:"请输入标题!"}]}],expression:"['name', { required: true,rules: [{ message: '请输入标题!' }] }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var su=n("VU/8")(ou,iu,!1,function(e){n("xJRl")},"data-v-7a3ed491",null).exports,cu={name:"helpCenterEdit",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,data:{name:null,content:null,describe:null},visible:!1,richTextData:"",list:[]}},props:{passData:Object},created:function(){this.getParentList()},methods:{editors:function(e){this.content=e},getContent:function(e){this.data.describe=e},getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.helpCenterList({parentId:0});case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.helpCenterInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.sysHelpCenter,0===t.data.parentId?t.data.parentId=void 0:t.visible=!0,t.content=t.data.content);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.id=t.passData.id,void 0===n.parentId&&(n.parentId=0),""!==n.name.trim()){if(!0===t.visible){if(void 0===t.content)return void t.$message.warn("请输入内容");n.content=t.content}e||t.editHelpCenter(n)}else t.$message.warn("请选择标题")})},editHelpCenter:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.editHelpCenter(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","helpCenter"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","helpCenter")}}},lu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"helpCenterEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],staticStyle:{width:"120px"},attrs:{disabled:""}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{required:!0,rules:[{message:"请输入标题!"}],initialValue:e.data.name}],expression:"['name', { required: true,rules: [{ message: '请输入标题!' }],initialValue: data.name }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),e.visible?n("a-form-item",{attrs:{label:"内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var uu=n("VU/8")(cu,lu,!1,function(e){n("6YwY")},"data-v-2973336e",null).exports,du=[{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"积分",dataIndex:"points"},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"备注",dataIndex:"remark",width:"40%",scopedSlots:{customRender:"remarkShow"}},{title:"时间",dataIndex:"createDate",scopedSlots:{customRender:"createDate"}}],fu={name:"point",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},nickName:null,realName:null,mobile:null,type:null,data:[],columns:du}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.realName=this.realName,r.nickName=this.nickName,r.mobile=this.mobile,r.type=this.type,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.type=n.type,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointDetail(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.pointDetail({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},mu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"point"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"类型"}},[n("a-select-option",{attrs:{value:"0"}},[e._v("抵减")]),e._v(" "),n("a-select-option",{attrs:{value:"1"}},[e._v("增加")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"pointId",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"type",fn:function(t){return n("a-tag",{attrs:{color:"1"===t?"#108ee9":"0"===t?"#f50":"#87d068"}},[e._v(e._s("1"===t?"增加":"0"===t?"抵减":""))])}},{key:"remarkShow",fn:function(t,r){return n("div",{style:{maxWidth:"400px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.remark}},[e._v("\n      "+e._s(r.remark)+"\n    ")])}},{key:"createDate",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var pu=n("VU/8")(fu,mu,!1,function(e){n("/uyb")},"data-v-aec90ac4",null).exports,hu={name:"pointsSetting",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{id:null,buyPoints:null,deductPoints:null}}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.pointInfo();case 2:n=t.sent,console.log(n),null!==n.sysPointsSetting&&(e.data=n.sysPointsSetting);case 5:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),null!==n.buyPoints&&""!==n.buyPoints?null!==n.deductPoints&&""!==n.deductPoints?e||(null===t.data.id?(console.log("新增"),t.addPoint(n)):(n.id=t.data.id,console.log("修改"),t.editPoint(n))):t.$message.warn("抵扣的积分不能为空"):t.$message.warn("增加的积分不能为空")})},addPoint:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointAdd(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()},editPoint:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointEdit(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()}}},vu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointsSetting"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"增加的积分","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["buyPoints",{required:!0,initialValue:e.data.buyPoints}],expression:"['buyPoints', { required: true,initialValue: data.buyPoints }]"}],attrs:{type:"number",placeholder:"每购买一元所增加的积分"}}),e._v(" "),n("span",[e._v("每购买一元所增加的积分")])],1),e._v(" "),n("a-form-item",{attrs:{label:"抵扣的积分","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deductPoints",{required:!0,initialValue:e.data.deductPoints}],expression:"['deductPoints', { required: true,initialValue: data.deductPoints }]"}],attrs:{type:"number",placeholder:"每抵扣一元所需要的积分"}}),e._v(" "),n("span",[e._v("每抵扣一元所需要的积分")])],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var gu=n("VU/8")(hu,vu,!1,function(e){n("4BaI")},"data-v-58fbed55",null).exports,bu={name:"pointsSign",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,visibleOne:!1,data:{id:null,type:null,basicPoints:null,signDays:null,extraPoints:null,signDaysOne:null,extraPointsOne:null,signDaysTwo:null,extraPointsTwo:null,explain:null},richTextData:""}},created:function(){this.getInfo()},methods:{editors:function(e){this.content=e},getContent:function(e){this.data.explain=e},getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.pointsSignInfo();case 2:null!==(n=t.sent).pointsSign&&(e.data=n.pointsSign,e.content=n.pointsSign.explain,1===e.data.type?(e.data.signDaysOne=e.data.signDays,e.data.extraPointsOne=e.data.extraPoints,e.visible=!0):2===e.data.type&&(e.data.signDaysTwo=e.data.signDays,e.data.extraPointsTwo=e.data.extraPoints,e.visibleOne=!0));case 4:case"end":return t.stop()}},t,e)}))()},changeType:function(e){1===e.target.value?(this.visible=!0,this.visibleOne=!1):2===e.target.value&&(this.visible=!1,this.visibleOne=!0)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.explain=t.content,null!==n.basicPoints&&""!==n.basicPoints)if(null!==n.type&&""!==n.type){if(1===n.type){if(null===n.signDaysOne||""===n.signDaysOne||void 0===n.signDaysOne)return void t.$message.warn("天数不能为空");if(null===n.extraPointsOne||""===n.extraPointsOne||void 0===n.extraPointsOne)return void t.$message.warn("积分奖励不能为空");n.signDays=n.signDaysOne,n.extraPoints=n.extraPointsOne}else if(2===n.type){if(null===n.signDaysTwo||""===n.signDaysTwo||void 0===n.signDaysTwo)return void t.$message.warn("天数不能为空");if(null===n.extraPointsTwo||""===n.extraPointsTwo||void 0===n.extraPointsTwo)return void t.$message.warn("积分奖励不能为空");n.signDays=n.signDaysTwo,n.extraPoints=n.extraPointsTwo}e||(null===t.data.id?t.addPointsSign(n):(n.id=t.data.id,t.editPointsSign(n)))}else t.$message.warn("请选择奖励规则");else t.$message.warn("单日签到获取的积分不能为空")})},addPointsSign:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsSignAdd(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()},editPointsSign:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsSignEdit(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()}}},yu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointsSign"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"日签规则设置","label-col":{span:4},"wrapper-col":{span:15}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["basicPoints",{required:!0,initialValue:e.data.basicPoints}],expression:"['basicPoints', { required: true,initialValue: data.basicPoints }]"}],attrs:{type:"number",placeholder:"用户单日签到获取的积分"}}),e._v(" "),n("span",[e._v("用户单日签到获取的积分")])],1),e._v(" "),n("a-form-item",{attrs:{label:"连续签到奖励规则","label-col":{span:4},"wrapper-col":{span:15}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{required:!0,initialValue:e.data.type}],expression:"['type', { required: true, initialValue: data.type}]"}],staticStyle:{"margin-bottom":"20px"},on:{change:e.changeType}},[n("a-radio",{attrs:{value:1}},[e._v("递增奖励")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("指定天数奖励")])],1),e._v(" "),e.visible?n("a-form-item",[n("a-form-item",{staticClass:"two",staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"250px"},attrs:{label:"第二天起递增奖励","label-col":{span:14},"wrapper-col":{span:9}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["extraPointsOne",{required:!0,initialValue:e.data.extraPointsOne}],expression:"['extraPointsOne', { required: true,initialValue: data.extraPointsOne }]"}],attrs:{type:"number"}})],1),e._v(" "),n("a-form-item",{staticClass:"two",staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"150px"},attrs:{label:"积分","label-col":{span:10},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDaysOne",{required:!0,initialValue:e.data.signDaysOne}],expression:"['signDaysOne', { required: true,initialValue: data.signDaysOne }]"}],attrs:{type:"number"}})],1),e._v(" "),n("a-form-item",{staticClass:"two",staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"180px"},attrs:{label:"天后不在递增","label-col":{span:15}}})],1):e._e(),e._v(" "),e.visibleOne?n("a-form-item",[n("a-form-item",{staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"200px"},attrs:{label:"连续签到第","label-col":{span:10},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDaysTwo",{required:!0,initialValue:e.data.signDaysTwo}],expression:"['signDaysTwo', { required: true,initialValue: data.signDaysTwo }]"}],attrs:{type:"number"}})],1),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"30px"},attrs:{label:"天","label-col":{span:10}}}),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"250px"},attrs:{label:"额外赠送","label-col":{span:10},"wrapper-col":{span:8}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["extraPointsTwo",{required:!0,initialValue:e.data.extraPointsTwo}],expression:"['extraPointsTwo', { required: true,initialValue: data.extraPointsTwo }]"}],attrs:{type:"number"}})],1),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"10px"},style:{display:"inline-block",width:"50px"},attrs:{label:"积分","label-col":{span:15}}})],1):e._e(),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"注：","label-col":{span:2},"wrapper-col":{span:20}}},[n("p",{staticClass:"one"},[e._v("1、用户超过以上连续签到天数后，重新计算连续天数，继续赠送。")]),e._v(" "),n("p",{staticClass:"one"},[e._v("2、商家请慎重更改签到奖励规则，奖励规则修改后会即时生效，顾客连续签到时间会被重置，重新开始连续签到！")])])],1),e._v(" "),n("a-form-item",{attrs:{label:"规则说明","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:20,offset:8}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")])],1)],1)],1)},staticRenderFns:[]};var wu=n("VU/8")(bu,yu,!1,function(e){n("xqKw")},"data-v-b6caec22",null).exports,xu=[{title:"商品名称",dataIndex:"goodsName"},{title:"兑换人数",dataIndex:""},{title:"兑换数量",dataIndex:""},{title:"剩余数量",dataIndex:""},{title:"积分订单数量",dataIndex:""},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],ku="",_u="",Su={name:"exchange",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,pagination:{total:0,current:1},goodsName:null,status:null,data:[],columns:xu}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ku=e,_u=t}}}},methods:{addExchange:function(){this.bus.$emit("goToPage","pointsExchangeAdd")},detail:function(e){var t={id:e};this.bus.$emit("goToPage","pointsExchangeDetail"),this.bus.$emit("passData",t)},showModal:function(){if(""===ku||0===ku.length)this.$message.error("至少选择一条进行删除");else{var e=!1;_u.forEach(function(t){1===t.status&&(e=!0)}),e?this.$message.error("进行中的兑换商品不能删除"):this.visible=!0}},handleOk:function(){this.visible=!1,this.delete(ku)},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsExchangeDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),ku="",_u="");case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,0===n.status&&(n.status=null),t.status=n.status,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsExchangeList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.pointsExchangeList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Cu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"exchange"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("进行中")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("已结束")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addExchange}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("span",{},[e._v(e._s(1===t?"进行中":2===t?"已结束":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.detail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var Nu=n("VU/8")(Su,Cu,!1,function(e){n("j5N+")},"data-v-176d28b0",null).exports,Tu=[],Du=[],Iu=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Mu=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Ou={name:"exchangeAdd",data:function(){return{goodsId:Du,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:{},selectedGoodsId:[],goodsList:[],columns:Iu,goodsSelect:Mu,goodsModel:!1,selectedGoods:[],categoryList:[],brandList:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){Tu.push(e)}),Du=e}}}},methods:{changePoints:function(e,t){this.selectedGoods[e].points=t.target.value},changeMoney:function(e,t){this.selectedGoods[e].money=t.target.value},changeNums:function(e,t){this.selectedGoods[e].nums=t.target.value},changeLimitNum:function(e,t){this.selectedGoods[e].limitNum=t.target.value},changeLabelName:function(e,t){this.selectedGoods[e].labelName=t.target.value},judgeLength:function(e,t){t.target.value.length<4&&this.$message.error("标签名称最短四个字符")},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e}),Tu=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,n.status=1,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){this.selectedGoods=[],this.goodsModel=!1;var e=new Vt.a;Tu=(Tu=Tu.filter(function(t){return!e.has(t.specId)&&e.set(t.specId,1)})).filter(function(e){return void 0!==e.specId}),this.selectedGoods=Tu,this.selectedGoods.forEach(function(e){e.points=null,e.money=null,e.nums=null,e.limitNum=null,e.labelName=null}),this.selectedGoodsId=Du},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({status:1});case 2:0===(n=t.sent).code&&(console.log("数据",n.rows),e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},addPointsExchange:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsExchangeAdd(e);case 2:0===n.sent.code&&(Tu=[],t.bus.$emit("goToPage","pointsExchange"));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(console.log(t.selectedGoods),0!==t.selectedGoods.length){var r=!1,a=[];t.selectedGoods.forEach(function(e){e.labelName.length<4&&(r=!0),a.push({goodsId:e.id,goodsName:e.goodsName,points:e.points,money:e.money,nums:e.nums,limitNum:e.limitNum,labelName:e.labelName,specId:e.specId,specName:e.spec})}),r?t.$message.warn("标签名称最少四个字"):(console.log(a),e||t.addPointsExchange(a))}else t.$message.warn("请选择商品")})},goToBack:function(){Tu=[],this.bus.$emit("goToPage","pointsExchange")}}},Au={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"exchangeAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{defaultExpandAllRows:!0,columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}},{key:"expandedRowRender",fn:function(t,r){return n("div",{},[n("a-form",[n("a-form-item",{attrs:{label:"兑换价格","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.points,expression:"record.points"}],on:{change:function(t){return e.changePoints(r,t)}}}),e._v(" 积分 + "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.money,expression:"record.money"}],on:{change:function(t){return e.changeMoney(r,t)}}}),e._v(" 金额\n            ")],1),e._v(" "),n("a-form-item",{attrs:{label:"兑换数量","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.nums,expression:"record.nums"}],on:{change:function(t){return e.changeNums(r,t)}}})],1),e._v(" "),n("a-form-item",{attrs:{label:"兑换限制次数","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.limitNum,expression:"record.limitNum"}],on:{change:function(t){return e.changeLimitNum(r,t)}}})],1),e._v(" "),n("a-form-item",{attrs:{label:"标签名称","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:t.labelName,expression:"record.labelName"}],attrs:{maxLength:6},on:{change:function(t){return e.changeLabelName(r,t)},blur:function(t){return e.judgeLength(r,t)}}})],1)],1)],1)}}],null,!1,2860310004)}):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var Lu=n("VU/8")(Ou,Au,!1,function(e){n("c48q")},"data-v-2dbe3943",null).exports,Eu=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"价格",dataIndex:"price"},{title:"规格",dataIndex:"spec"}],zu={name:"pointsExchangeDetail",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),data:{points:null,money:null,nums:null,limitNum:null,labelName:null},list:[],goods:Eu}},created:function(){this.getExchangeInfo(this.passData.id)},props:{passData:Object},methods:{getExchangeInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.pointsExchangeInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.pointsExchange,t.list.push({picUrl:r.pointsExchange.shopGoodsSpec.picUrl,goodsName:r.pointsExchange.goodsName,stock:r.pointsExchange.shopGoodsSpec.stock,price:r.pointsExchange.shopGoodsSpec.price,spec:r.pointsExchange.specName}));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","pointsExchange")}}},Ru={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointsExchangeDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"兑换商品","label-col":{span:5},"wrapper-col":{span:16}}}),e._v(" "),n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goods,rowKey:"id",dataSource:e.list,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])}),e._v(" "),n("a-form-item",{attrs:{label:"兑换价格","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["points",{initialValue:e.data.points}],expression:"['points',{initialValue: data.points}]"}],attrs:{"read-only":""}}),e._v(" 积分 + "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{initialValue:e.data.money}],expression:"['money',{initialValue: data.money}]"}]}),e._v(" 金额\n    ")],1),e._v(" "),n("a-form-item",{attrs:{label:"兑换数量","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nums",{initialValue:e.data.nums}],expression:"['nums',{initialValue: data.nums}]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"兑换限制次数","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["limitNum",{initialValue:e.data.limitNum}],expression:"['limitNum',{initialValue: data.limitNum}]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"标签名称","label-col":{span:3},"wrapper-col":{span:3}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["labelName",{initialValue:e.data.labelName}],expression:"['labelName',{initialValue: data.labelName}]"}],attrs:{"read-only":"",maxLength:6}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Vu=n("VU/8")(zu,Ru,!1,function(e){n("CabM")},"data-v-6cd6e04e",null).exports,Bu={name:"distribution",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{id:null,commission:null,commissionSecond:null,withdraw:null}}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.distributionsettingDetail();case 2:n=t.sent,console.log(n),null!==n.distributionSetting&&(e.data=n.distributionSetting);case 5:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),null!==n.commission&&""!==n.commission?null!==n.withdraw&&""!==n.withdraw?e||(n.id=t.data.id,t.saveSetting(n)):t.$message.warn("最低提现额度不能为空"):t.$message.warn("返佣比例不能为空")})},saveSetting:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.distributionsettingSave(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()}}},$u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"distribution"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"返佣比例%","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission",{required:!0,initialValue:e.data.commission}],expression:"['commission', { required: true,initialValue: data.commission }]"}],attrs:{type:"number",placeholder:"推荐购买订单金额的百分比"}}),e._v(" "),n("span",[e._v("推荐购买订单金额的百分比(一级)")])],1),e._v(" "),n("a-form-item",{attrs:{label:"返佣比例%","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commissionSecond",{required:!0,initialValue:e.data.commissionSecond}],expression:"['commissionSecond', { required: true,initialValue: data.commissionSecond }]"}],attrs:{type:"number",placeholder:"推荐购买订单金额的百分比"}}),e._v(" "),n("span",[e._v("推荐购买订单金额的百分比(二级)")])],1),e._v(" "),n("a-form-item",{attrs:{label:"提现额度","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["withdraw",{required:!0,initialValue:e.data.withdraw}],expression:"['withdraw', { required: true,initialValue: data.withdraw }]"}],attrs:{type:"number",placeholder:"最低提现金额"}}),e._v(" "),n("span",[e._v("最低提现金额")])],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var Uu=n("VU/8")(Bu,$u,!1,function(e){n("KDBB")},"data-v-1b8f65f0",null).exports,Pu={name:"distribution",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{id:null,commission:null,commissionSecond:null,withdraw:null}}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.distributionsettingDetail();case 2:null!==(n=t.sent).distributionSetting&&(e.data=n.distributionSetting);case 4:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),null!==n.duration&&""!==n.duration?null!==n.numbers&&""!==n.numbers?e||(n.id=t.data.id,t.saveSetting(n)):t.$message.warn("返佣次数不能为空"):t.$message.warn("返佣时长不能为空")})},saveSetting:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.distributionsettingSave(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()}}},Fu={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"distribution"},[t("a-form",{staticClass:"formWidth",attrs:{form:this.form,layout:"vertical"},on:{submit:this.handleSubmit}},[t("a-form-item",{attrs:{label:"返佣时长（天）","label-col":{span:2},"wrapper-col":{span:10}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["duration",{required:!0,initialValue:this.data.duration}],expression:"['duration', { required: true,initialValue: data.duration }]"}],attrs:{type:"number",placeholder:"天数"}})],1),this._v(" "),t("a-form-item",{attrs:{label:"返佣次数","label-col":{span:2},"wrapper-col":{span:10}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["numbers",{required:!0,initialValue:this.data.numbers}],expression:"['numbers', { required: true,initialValue: data.numbers }]"}],attrs:{type:"number",placeholder:"次数"}})],1),this._v(" "),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[t("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[this._v("\n            确定\n          ")])],1)],1)],1)},staticRenderFns:[]};var Hu=n("VU/8")(Pu,Fu,!1,function(e){n("zjNF")},"data-v-2010ebd0",null).exports,ju={name:"distributionConfig",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{id:null,commission:null,commissionSecond:null,withdraw:null,withdrawMax:null}}},created:function(){this.getInfo()},methods:{getInfo:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.distributionsettingDetail();case 2:n=t.sent,console.log(n),null!==n.distributionSetting&&(e.data=n.distributionSetting);case 5:case"end":return t.stop()}},t,e)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),null!==n.commission&&""!==n.commission?null!==n.withdrawMax&&""!==n.withdrawMax?null!==n.withdraw&&""!==n.withdraw?(n.id=t.data.id,e||t.saveSetting(n)):t.$message.warn("最低提现额度不能为空"):t.$message.warn("最高提现额度不能为空"):t.$message.warn("返佣比例不能为空")})},saveSetting:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.distributionsettingSave(e);case 2:0===n.sent.code&&(t.getInfo(),t.$message.success("设置成功"));case 4:case"end":return n.stop()}},n,t)}))()}}},qu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"distributionConfig"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"返佣比例%","label-col":{span:3},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["commission",{required:!0,initialValue:e.data.commission}],expression:"['commission', { required: true,initialValue: data.commission }]"}],attrs:{type:"number",placeholder:"推荐购买订单金额的百分比"}}),e._v(" "),n("span",[e._v("推荐购买订单金额的百分比(一级)")])],1),e._v(" "),n("a-form-item",{attrs:{label:"最高提现金额","label-col":{span:3},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["withdrawMax",{required:!0,initialValue:e.data.withdrawMax}],expression:"['withdrawMax', { required: true,initialValue: data.withdrawMax }]"}],attrs:{type:"number",placeholder:"最高提现金额"}}),e._v(" "),n("span",[e._v("最高提现金额")])],1),e._v(" "),n("a-form-item",{attrs:{label:"提现额度","label-col":{span:3},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["withdraw",{required:!0,initialValue:e.data.withdraw}],expression:"['withdraw', { required: true,initialValue: data.withdraw }]"}],attrs:{type:"number",placeholder:"最低提现金额"}}),e._v(" "),n("span",[e._v("最低提现金额")])],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var Wu=n("VU/8")(ju,qu,!1,function(e){n("rGxf")},"data-v-626489ef",null).exports,Yu=[{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"手机号码",dataIndex:"member.mobile"},{title:"订单编号",dataIndex:"orderNum"},{title:"佣金",dataIndex:"commission"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],Gu={name:"commision",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,data:[],columns:Yu}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.distributioncommisionlist({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.mobile=n.mobile,t.realName=n.realName,t.nickName=n.nickName,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.distributioncommisionlist(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()}}},Ku={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"commision"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#77d068":"#f50"}},[e._v(e._s(1===t?"未结算":2===t?"已结算":"已取消"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var Qu=n("VU/8")(Gu,Ku,!1,function(e){n("q6ma")},"data-v-64b4288b",null).exports,Xu=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"品牌名称",dataIndex:"brandName"},{title:"排序",dataIndex:"sort"},{title:"状态",dataIndex:"isRecommend",scopedSlots:{customRender:"isRecommend"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Ju="",Zu={name:"index",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Xu,brandName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ju=e}}}},methods:{recommend:function(e,t){var n=this;return f()(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.brandEdit({id:e,isRecommend:t});case 2:0===r.sent.code&&(n.$message.success("删除成功"),n.tableData());case 4:case"end":return r.stop()}},r,n)}))()},dateformat:function(e){var t=Te()(e).format("yyyy-MM-dd");return console.log(t),t},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.brandList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Ju),""===Ju||0===Ju.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.brandDelete(Ju)},brandEdit:function(e){var t={id:e};this.bus.$emit("goToPage","brandEdit"),this.bus.$emit("passData",t)},brandAdd:function(){this.bus.$emit("goToPage","brandAdd")},brandDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.brandDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ju="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandList({brandName:e.brandName});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},ed={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"品牌名称",allowClear:!0},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.brandAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"isRecommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":0===t?"#87d068":"grey"}},[e._v(e._s(1===t?"推荐中":0===t?"未推荐":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.brandEdit(r.id)}}},[e._v("修改")]),e._v(" "),1===r.isRecommend?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recommend(r.id,0)}}},[e._v("取消推荐")]):e._e(),e._v(" "),0===r.isRecommend?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recommend(r.id,1)}}},[e._v("推荐")]):e._e()])}}])})],1)},staticRenderFns:[]};var td=n("VU/8")(Zu,ed,!1,function(e){n("x9Dy")},"data-v-0c6e40ec",null).exports,nd=n("ufx+");function rd(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var ad={name:"indexAdd",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,loading2:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{title:null,content:null,menuIdList:[],picUrl:null,picUrl2:null,imgUrl:null,imgUrl2:null}}},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(rd(e.file.originFileObj,function(e){t.data.picUrl=e,t.loading=!1}),this.data.imgUrl=e.file.response.url):this.loading=!0},handleChange2:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(rd(e.file.originFileObj,function(e){t.data.picUrl2=e,t.loading2=!1}),this.data.imgUrl2=e.file.response.url):this.loading2=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addbrand:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addbrand(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","brand");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.picUrl=t.data.imgUrl,n.backgroundUrl=t.data.imgUrl2,e||t.addbrand(n)})},goToBack:function(){this.bus.$emit("goToPage","brand")}}},od={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"品牌名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandName",{rules:[{required:!0,message:"请填写品牌名称!"}]}],expression:"['brandName', { rules: [{ required: true, message: '请填写品牌名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 210px X 130px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"背景图","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange2}},[e.data.picUrl2?n("img",{attrs:{src:e.data.picUrl2,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading2?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 210px X 130px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{required:!0,message:"请填写排序!"}]}],expression:"['sort', { rules: [{required: true,  message: '请填写排序!' }] }]"}],attrs:{placeholder:"请输入分排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"请填写品牌描述!"}]}],expression:"['description', { rules: [{ required: true, message: '请填写品牌描述!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var id=n("VU/8")(ad,od,!1,function(e){n("Hb9E")},"data-v-9a987dfa",null).exports;function sd(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var cd={name:"indexEdit",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,loading2:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{title:null,content:null,menuIdList:[]},menuList:[],menuIdList:[],picUrl:null,picUrl2:null,imgUrl:null,imgUrl2:null}},props:{passData:Object},created:function(){this.getBrandInfo(this.passData.id)},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(sd(e.file.originFileObj,function(e){t.picUrl=e,t.loading=!1}),this.imgUrl=e.file.response.url):this.loading=!0},handleChange2:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(sd(e.file.originFileObj,function(e){t.picUrl2=e,t.loading2=!1}),this.imgUrl2=e.file.response.url):this.loading2=!0},getBrandInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.brandInfo({id:e});case 2:r=n.sent,t.data=r.shopBrand,t.picUrl=t.data.picUrl,t.picUrl2=t.data.backgroundUrl;case 6:case"end":return n.stop()}},n,t)}))()},brandEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.brandEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","brand");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.picUrl=t.imgUrl,n.backgroundUrl=t.imgUrl2,e||t.brandEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","brand")}}},ld={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"品牌名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandName",{rules:[{required:!0,message:"请填写品牌名称!"}],initialValue:e.data.brandName}],expression:"['brandName', { rules: [{ required: true, message: '请填写品牌名称!' }],initialValue: data.brandName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.picUrl?n("img",{attrs:{src:e.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 210px X 130px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"背景图","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange2}},[e.picUrl2?n("img",{attrs:{src:e.picUrl2,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading2?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 210px X 130px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{required:!0,message:"请填写排序!"}],initialValue:e.data.sort}],expression:"['sort', {rules: [{ required: true, message: '请填写排序!' }],initialValue: data.sort}]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"品牌描述","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:"请填写品牌描述!"}],initialValue:e.data.description}],expression:"['description', { rules: [{ required: true, message: '请填写品牌描述!' }],initialValue: data.description }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ud=n("VU/8")(cd,ld,!1,function(e){n("Z3/R")},"data-v-bb3f758e",null).exports,dd=[{title:"规格名称",dataIndex:"specName"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"operation"}}],fd="",md={name:"infoTypeList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{current:1,pageSize:10},visible:!1,data:{},columns:dd,title:null,serviceType:null,selectList:[],arr:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){fd=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){console.log(fd),""===fd||0===fd.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.specDelete(fd)},specEdit:function(e){var t={id:e};this.bus.$emit("goToPage","specEdit"),this.bus.$emit("passData",t)},specAdd:function(e){this.bus.$emit("goToPage","specAdd")},specDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.specDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),fd="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function e(){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.specList({});case 2:0===(n=e.sent).code&&(t.data=n.data,r=[],t.data.forEach(function(e){var t={id:e.id,parentId:e.parentId,specName:e.specName,children:e.children};r.push(t)}),t.arr=r,console.log(r));case 4:case"end":return e.stop()}},e,t)}))()}}},pd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.specAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.arr,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.specEdit(r.id)}}},[e._v("修改")])])}},{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"菜单":2===t?"按钮":"目录"))])}}])})],1)},staticRenderFns:[]};var hd=n("VU/8")(md,pd,!1,function(e){n("bMH6")},"data-v-5f65831f",null).exports,vd={name:"specAdd",data:function(){return{show:!0,showV:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),selectList:[],data:{}}},created:function(){this.queryAllParent()},methods:{handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources[0].src)):this.loading=!0},specAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.specAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","spec");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){e||t.specAdd(n)})},goToBack:function(){this.bus.$emit("goToPage","spec")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentSpecById({parentId:-1});case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.specName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},gd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"规格名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["specName",{rules:[{required:!0,message:"请填写规格名称!"}]}],expression:"['specName', { rules: [{ required: true, message: '请填写规格名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"所属规格","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}]},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var bd=n("VU/8")(vd,gd,!1,function(e){n("CWx+")},"data-v-35465ba6",null).exports,yd={name:"roleEdit",data:function(){return{show:!0,showV:!0,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{},selectList:[],menuList:[],menuIdList:[]}},props:{passData:Object},created:function(){this.queryAllParent(),this.getSpecInfo(this.passData.id)},methods:{handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!0},getSpecInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.specById({id:e});case 2:r=n.sent,t.data=r.shopSpec,t.menuIdList=r.data.menuIdList;case 5:case"end":return n.stop()}},n,t)}))()},specEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.specEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","spec");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.videoUrl=t.playerOptions.sources[0].src,e||t.specEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","spec")},queryAllParent:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.findParentSpecById({parentId:-1});case 2:n=t.sent,e.selectList.push({value:-1,text:"无"}),0===n.code&&(n.data.forEach(function(t){e.selectList.push({value:t.id,text:t.specName})}),console.log(e.selectList));case 5:case"end":return t.stop()}},t,e)}))()}}},wd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"规格名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["specName",{rules:[{required:!0,message:"请填写栏目名称!"}],initialValue:e.data.specName}],expression:"['specName', { rules: [{ required: true, message: '请填写栏目名称!' }],initialValue: data.specName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"所属规格","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],attrs:{placeholder:"请选择规格"}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("确定")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var xd=n("VU/8")(yd,wd,!1,function(e){n("O3sd")},"data-v-43fdc5a1",null).exports,kd=[{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"realName"},{title:"账号",dataIndex:"account"},{title:"提现金额",dataIndex:"amount"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"备注",dataIndex:"remark"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],_d={name:"commision",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,visibleFail:!1,data:[],columns:kd,reqVal:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.withdrawlist({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},showModal:function(){this.visible=!0},handleOk:function(){this.visible=!1,this.commisionUpdate(1)},showModalFail:function(){this.visibleFail=!0},handleFail:function(){this.visibleFail=!1,this.commisionUpdate(3)},formatDate:function(e){return m(e)},commisionUpdate:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(1!==e){n.next=7;break}return n.next=3,t.$Http.withdrawConfirm({orderNum:t.reqVal.orderNum,bankCardNum:t.reqVal.account,cardPeople:t.reqVal.realName,money:t.reqVal.amount,id:t.reqVal.id,status:e,source:t.reqVal.source});case 3:0===n.sent.code&&(t.$message.success("操作成功"),t.tableData()),n.next=12;break;case 7:if(3!==e){n.next=12;break}return n.next=10,t.$Http.withdrawFail({orderNum:t.reqVal.orderNum,id:t.reqVal.id,status:e});case 10:0===n.sent.code&&(t.$message.success("操作成功"),t.tableData());case 12:case"end":return n.stop()}},n,t)}))()},confirmFail:function(e){this.reqVal=e,this.showModalFail()},confirmOk:function(e){this.reqVal=e,this.showModal()},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})}}},Sd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"commision"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"提现确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定提现吗？")])]),e._v(" "),n("a-modal",{attrs:{title:"提现确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleFail},model:{value:e.visibleFail,callback:function(t){e.visibleFail=t},expression:"visibleFail"}},[n("p",[e._v("确定拒绝吗？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":1===t?"#f50":3===t?"#87d068":"#2db7f5"}},[e._v(e._s(0===t?"待审核":1===t?"提现中":2===t?"已提现":3===t?"提现失败":"待审核"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[0==r.status?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.confirmOk(r)}}},[e._v("确认")]):e._e(),e._v(" "),0==r.status?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.confirmFail(r)}}},[e._v("拒绝")]):e._e()])}}])})],1)},staticRenderFns:[]};var Cd=n("VU/8")(_d,Sd,!1,function(e){n("F2sa")},"data-v-7e4519c6",null).exports,Nd=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t},Td=[{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"手机号码",dataIndex:"member.mobile"},{title:"金额",dataIndex:"amount"},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],Dd={name:"details",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},picUrl:"",visible:!1,data:[],columns:Td,startDate:null,endDate:null,endOpen:!1}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.detailslist({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.mobile=n.mobile,t.realName=n.realName,t.nickName=n.nickName,n.startDate=Nd(t.startDate),n.endDate=Nd(t.endDate),t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.detailslist(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()}}},Id={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),n("a-form-item",[n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"type",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"收入":"支出"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var Md=n("VU/8")(Dd,Id,!1,function(e){n("QcX7")},"data-v-233ea85c",null).exports,Od=[{title:"模板名称",dataIndex:"title"},{title:"是否包邮",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"收费方式",dataIndex:"tollType",scopedSlots:{customRender:"tollType"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Ad="",Ld={name:"index",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Od,brandName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ad=e}}}},methods:{dateformat:function(e){return e?Te()(e).format("YYYY-MM-DD"):""},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fareList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Ad),""===Ad||0===Ad.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.fareDelete(Ad)},fareEdit:function(e){var t={id:e};this.bus.$emit("goToPage","fareEdit"),this.bus.$emit("passData",t)},fareAdd:function(){this.bus.$emit("goToPage","fareAdd")},fareDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fareDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ad="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.fareList({brandName:e.brandName});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Ed={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"模板名称",allowClear:!0},model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.fareAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"type",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s(0===t?"包邮":"不包邮"))])}},{key:"tollType",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s(0===t?"按重量":"按件数"))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.fareEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var zd=n("VU/8")(Ld,Ed,!1,function(e){n("DyBw")},"data-v-dace04e4",null).exports,Rd=n("2vhu"),Vd=Rd.a.SHOW_PARENT;var Bd={name:"indexAdd",components:{ATextarea:nd.a},data:function(){return{SHOW_PARENT:Vd,index:0,otherArr:[],uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],visible:!1,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null},areaId:null,areaList:[],desc:null,typeList:[{id:0,typeName:"包邮"},{id:1,typeName:"不包邮"}],tollTypeList:[{id:0,typeName:"按重量"},{id:1,typeName:"按件数"}],byZl:{one:"KG内",two:"元,每增加",three:"KG,增加运费",four:"元"},byJs:{one:"件内",two:"元,每增加",three:"件,增加运费",four:"元"}}},created:function(){this.initAreaList()},methods:{addArea:function(){var e={base:"base"+this.index,basePrice:"basePrice"+this.index,other:"other"+this.index,otherPrice:"otherPrice"+this.index,areaId:"areaId"+this.index};this.otherArr.push(e),this.index=this.index+1},removeOther:function(e){this.otherArr.splice(e,1)},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},fareAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fareAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","fare");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList;var r=[];t.otherArr.forEach(function(e){var t=e.base,a=e.basePrice,o=e.other,i=e.otherPrice,s=e.areaId;n.fareOther={base:n[t],basePrice:n[a],other:n[o],otherPrice:n[i],areaId:n[s]},r.push(n.fareOther)}),n.otherArr=r,e||t.fareAdd(n)})},initAreaList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.areaList();case 2:0===(n=t.sent).code&&n.data.forEach(function(t){var n=[];t.children.forEach(function(e){n.push({title:e.name,value:e.yzcode,key:e.yzcode})}),e.areaList.push({title:t.name,value:t.yzcode,key:t.yzcode,children:n})});case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","fare")}}},$d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模板名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写模板名称!"}]}],expression:"['title', { rules: [{ required: true, message: '请填写模板名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否包邮","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择"}},e._l(e.typeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.typeName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"计价方式","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tollType"],expression:"['tollType']"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}},e._l(e.tollTypeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.typeName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"运费设置","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n      默认运费      \n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["base",{rules:[{required:!0,message:"不能为空!"}]}],expression:"['base', { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.one:e.byJs.one)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["basePrice",{rules:[{required:!0,message:"不能为空!"}]}],expression:"['basePrice', { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.two:e.byJs.two)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["other",{rules:[{required:!0,message:"不能为空!"}]}],expression:"['other', { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.three:e.byJs.three)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["otherPrice",{rules:[{required:!0,message:"不能为空!"}]}],expression:"['otherPrice', { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.four:e.byJs.four)+"\n    ")],1),e._v(" "),n("a-form-item",{attrs:{label:"特殊地区","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{on:{click:e.addArea}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),e._l(e.otherArr,function(t,r){return n("div",{key:t},[n("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.areaId],expression:"[i.areaId]"}],staticStyle:{width:"100%"},attrs:{"tree-data":e.areaList,"tree-checkable":"","show-checked-strategy":e.SHOW_PARENT,"search-placeholder":"请选择"}}),e._v(" "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.base,{rules:[{required:!0,message:"不能为空!"}]}],expression:"[i.base, { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.one:e.byJs.one)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.basePrice,{rules:[{required:!0,message:"不能为空!"}]}],expression:"[i.basePrice, { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.two:e.byJs.two)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.other,{rules:[{required:!0,message:"不能为空!"}]}],expression:"[i.other, { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.three:e.byJs.three)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.otherPrice,{rules:[{required:!0,message:"不能为空!"}]}],expression:"[i.otherPrice, { rules: [{ required: true, message: '不能为空!' }] }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.four:e.byJs.four)+"\n        "),n("a-button",{on:{click:function(t){return e.removeOther(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ud=n("VU/8")(Bd,$d,!1,function(e){n("ZFE0")},"data-v-0a38a4eb",null).exports,Pd=Rd.a.SHOW_PARENT;var Fd={name:"indexEdit",components:{ATextarea:nd.a},data:function(){return{SHOW_PARENT:Pd,index:0,otherArr:[],uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{title:null,content:null,menuIdList:[]},menuList:[],menuIdList:[],picUrl:null,imgUrl:null,areaId:null,areaList:[],desc:null,initSelect:["220000"],typeList:[{id:0,typeName:"包邮"},{id:1,typeName:"不包邮"}],tollTypeList:[{id:0,typeName:"按重量"},{id:1,typeName:"按件数"}],byZl:{one:"KG内",two:"元,每增加",three:"KG,增加运费",four:"元"},byJs:{one:"件内",two:"元,每增加",three:"件,增加运费",four:"元"}}},props:{passData:Object},created:function(){this.getfareInfo(this.passData.id),this.initAreaList()},methods:{addArea:function(){var e={base:"base"+this.index,basePrice:"basePrice"+this.index,other:"other"+this.index,otherPrice:"otherPrice"+this.index,areaId:"areaId"+this.index};this.otherArr.push(e),this.index=this.index+1},removeOther:function(e){this.otherArr.splice(e,1)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},getfareInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fareInfo({id:e});case 2:r=n.sent,t.data=r.shopFare,t.desc=t.data.tollType,t.data.fareOther.forEach(function(e){var n={base:"base"+t.index,basePrice:"basePrice"+t.index,other:"other"+t.index,otherPrice:"otherPrice"+t.index,areaId:"areaId"+t.index,basev:e.ofBase,basePricev:e.ofBasePrice,otherv:e.ofOther,otherPricev:e.ofOtherPrice,arr:e.areaIds.split(",")};t.otherArr.push(n),t.index=t.index+1}),console.log(t.otherArr);case 7:case"end":return n.stop()}},n,t)}))()},fareEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fareEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","fare");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id;var r=[];t.otherArr.forEach(function(e){var t=e.base,a=e.basePrice,o=e.other,i=e.otherPrice,s=e.areaId;n.fareOther={base:n[t],basePrice:n[a],other:n[o],otherPrice:n[i],areaId:n[s]},r.push(n.fareOther)}),n.otherArr=r,n.menuIdList=t.menuIdList,e||t.fareEdit(n)})},initAreaList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.areaList();case 2:0===(n=t.sent).code&&n.data.forEach(function(t){var n=[];t.children.forEach(function(e){n.push({title:e.name,value:e.yzcode,key:e.yzcode})}),e.areaList.push({title:t.name,value:t.yzcode,key:t.yzcode,children:n})});case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","fare")}}},Hd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"模板名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写模板名称!"}],initialValue:e.data.title}],expression:"['title', { rules: [{ required: true, message: '请填写模板名称!' }],initialValue: data.title }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否包邮","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请选择!"}],initialValue:e.data.type}],expression:"['type', { rules: [{ required: true, message: '请选择!' }],initialValue: data.type }]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择"}},e._l(e.typeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.typeName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"计价方式","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tollType",{rules:[{required:!0,message:"请选择!"}],initialValue:e.data.tollType}],expression:"['tollType', { rules: [{ required: true, message: '请选择!' }],initialValue: data.tollType }]"}],staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}},e._l(e.tollTypeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.typeName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"运费设置","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n      默认运费      \n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["base",{rules:[{required:!0,message:"不能为空!"}],initialValue:e.data.base}],expression:"['base', { rules: [{ required: true, message: '不能为空!' }],initialValue: data.base }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.one:e.byJs.one)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["basePrice",{rules:[{required:!0,message:"不能为空!"}],initialValue:e.data.basePrice}],expression:"['basePrice', { rules: [{ required: true, message: '不能为空!' }],initialValue: data.basePrice }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.two:e.byJs.two)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["other",{rules:[{required:!0,message:"不能为空!"}],initialValue:e.data.other}],expression:"['other', { rules: [{ required: true, message: '不能为空!' }],initialValue: data.other }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.three:e.byJs.three)+"\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["otherPrice",{rules:[{required:!0,message:"不能为空!"}],initialValue:e.data.otherPrice}],expression:"['otherPrice', { rules: [{ required: true, message: '不能为空!' }],initialValue: data.otherPrice }]"}],staticStyle:{width:"50px"}}),e._v("\n      "+e._s(0===e.desc?e.byZl.four:e.byJs.four)+"\n    ")],1),e._v(" "),n("a-form-item",{attrs:{label:"特殊地区","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{on:{click:e.addArea}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),e._l(e.otherArr,function(t,r){return n("div",{key:r},[n("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.areaId,{rules:[{required:!0,message:"不能为空!"}],initialValue:t.arr}],expression:"[i.areaId, { rules: [{ required: true, message: '不能为空!' }],initialValue: i.arr }]"}],staticStyle:{width:"100%"},attrs:{"tree-data":e.areaList,"tree-checkable":"","show-checked-strategy":e.SHOW_PARENT,"search-placeholder":"请选择"}}),e._v(" "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.base,{rules:[{required:!0,message:"不能为空!"}],initialValue:t.basev}],expression:"[i.base, { rules: [{ required: true, message: '不能为空!' }],initialValue: i.basev }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.one:e.byJs.one)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.basePrice,{rules:[{required:!0,message:"不能为空!"}],initialValue:t.basePricev}],expression:"[i.basePrice, { rules: [{ required: true, message: '不能为空!' }],initialValue: i.basePricev }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.two:e.byJs.two)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.other,{rules:[{required:!0,message:"不能为空!"}],initialValue:t.otherv}],expression:"[i.other, { rules: [{ required: true, message: '不能为空!' }],initialValue: i.otherv }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.three:e.byJs.three)+"\n        "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.otherPrice,{rules:[{required:!0,message:"不能为空!"}],initialValue:t.otherPricev}],expression:"[i.otherPrice, { rules: [{ required: true, message: '不能为空!' }],initialValue: i.otherPricev }]"}],staticStyle:{width:"50px"}}),e._v("\n        "+e._s(0===e.desc?e.byZl.four:e.byJs.four)+"\n        "),n("a-button",{on:{click:function(t){return e.removeOther(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1)})],2),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var jd=n("VU/8")(Fd,Hd,!1,function(e){n("ZmVo")},"data-v-92995814",null).exports,qd=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"分类",dataIndex:"categoryName"},{title:"商品",dataIndex:"goodsName"},{title:"视频类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Wd="",Yd={name:"index",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:qd,brandName:null,categoryId:void 0,goodsId:void 0,categoryList:[],goodsList:[]}},created:function(){this.tableData(),this.getCategory()},computed:{rowSelection:function(){return{onChange:function(e,t){Wd=e}}}},methods:{getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},getGoods:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsAllList({categoryId:e});case 2:0===(r=n.sent).code&&(t.goodsList=r.data);case 4:case"end":return n.stop()}},n,t)}))()},recommend:function(e,t){var n=this;return f()(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.brandEdit({id:e,isRecommend:t});case 2:0===r.sent.code&&(n.$message.success("删除成功"),n.tableData());case 4:case"end":return r.stop()}},r,n)}))()},dateformat:function(e){var t=Te()(e).format("yyyy-MM-dd");return console.log(t),t},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.installVideoList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Wd),""===Wd||0===Wd.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.installVideoDelete(Wd)},installVideoEdit:function(e){var t={id:e};this.bus.$emit("goToPage","installVideoEdit"),this.bus.$emit("passData",t)},installVideoAdd:function(){this.bus.$emit("goToPage","installVideoAdd")},installVideoDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.installVideoDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Wd="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.installVideoList({categoryId:e.categoryId});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Gd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择分类"},on:{change:function(t){return e.getGoods(t)}},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.installVideoAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"type",fn:function(t){return n("span",{},[e._v(e._s(0==t?"本地":2==t?"腾讯":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.installVideoEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Kd=n("VU/8")(Yd,Gd,!1,function(e){n("k2Q+")},"data-v-c41b95ae",null).exports;var Qd={name:"indexAdd",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,videlUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null},categoryId:null,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,categoryList:null,goodsList:null,localV:!1,cloudV:!1}},created:function(){this.getCategory()},methods:{chooseType:function(e){0===e.target.value?(this.localV=!0,this.cloudV=!1):(this.localV=!1,this.cloudV=!0)},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!0,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!1},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},getGoods:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsAllList({categoryId:e});case 2:0===(r=n.sent).code&&(t.goodsList=r.data);case 4:case"end":return n.stop()}},n,t)}))()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addInstallVideo:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addInstallVideo(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","installVideo");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.videoUrl=t.playerOptions.sources[0].src,n.picUrl=t.data.imgUrl,e||t.addInstallVideo(n)})},goToBack:function(){this.bus.$emit("goToPage","installVideo")}}},Xd={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高比例1 : 1  建议尺寸242px X 242px ")])],1),e._v(" "),n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId"],expression:"['categoryId']"}],attrs:{placeholder:"请选择分类"},on:{change:function(t){return e.getGoods(t)}}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"商品名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"视频类型","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],on:{change:e.chooseType}},[n("a-radio",{attrs:{value:0}},[e._v("\n            本地\n          ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n            腾讯\n          ")])],1)],1),e._v(" "),e.localV?n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.videlUploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"400px",height:"230px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})],1):e._e()]):e._e(),e._v(" "),e.cloudV?n("a-form-item",{attrs:{label:"vid","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vid"],expression:"['vid']"}]})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var Jd=n("VU/8")(Qd,Xd,!1,function(e){n("W6xS")},"data-v-48c7fcf4",null).exports;var Zd={name:"indexEdit",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,videlUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!0,categoryList:null,goodsList:null,cate:null,localV:!1,cloudV:!1,picUrl:null,imgUrl:null}},props:{passData:Object},created:function(){this.getInstallVideoInfo(this.passData.id),this.getCategory()},methods:{chooseType:function(e){0===e.target.value?(this.localV=!0,this.cloudV=!1):(this.localV=!1,this.cloudV=!0)},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.show=!0,this.showV=!0,console.log(this.playerOptions.sources.src)):this.loading=!1},getGoods:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsAllList({categoryId:e});case 2:0===(r=n.sent).code&&(t.goodsList=r.data);case 4:case"end":return n.stop()}},n,t)}))()},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.categoryAllList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.categoryList);case 4:case"end":return t.stop()}},t,e)}))()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},getInstallVideoInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.installVideoInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.shopGoodInstallVideo,0===t.data.type?(t.localV=!0,t.cloudV=!1):(t.localV=!1,t.cloudV=!0),t.playerOptions.sources[0].src=t.data.videoUrl,t.picUrl=t.data.picUrl),t.getGoods(t.data.categoryId);case 5:case"end":return n.stop()}},n,t)}))()},installVideoEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.editInstallVideo(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","installVideo");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.menuIdList,n.videoUrl=t.playerOptions.sources[0].src,n.picUrl=t.imgUrl,e||t.installVideoEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","installVideo")}}},ef={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.picUrl?n("img",{attrs:{src:e.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高比例1 : 1  建议尺寸242px X 242px ")])],1),e._v(" "),n("a-form-item",{attrs:{label:"分类","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryId",{initialValue:e.data.categoryId}],expression:"['categoryId', {initialValue: data.categoryId}]"}],attrs:{placeholder:"请选择分类"},on:{change:function(t){return e.getGoods(t)}}},e._l(e.categoryList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"商品名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName",{initialValue:e.data.goodsName}],expression:"['goodsName', {initialValue: data.goodsName}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"视频类型","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.data.type}],expression:"['type', {initialValue: data.type}]"}],on:{change:e.chooseType}},[n("a-radio",{attrs:{value:0}},[e._v("\n            本地\n          ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n            腾讯\n          ")])],1)],1),e._v(" "),e.localV?n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.videlUploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"400px",height:"230px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})],1):e._e()]):e._e(),e._v(" "),e.cloudV?n("a-form-item",{attrs:{label:"vid","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vid",{initialValue:e.data.vid}],expression:"['vid', {initialValue: data.vid}]"}]})],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var tf=n("VU/8")(Zd,ef,!1,function(e){n("n8WX")},"data-v-777d1aa6",null).exports,nf=[{title:"发票类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"抬头",dataIndex:"title"},{title:"地址",dataIndex:"address"},{title:"电话",dataIndex:"mobile"},{title:"金额",dataIndex:"amount",customRender:function(e){return e.toFixed(2)}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],rf="",af={name:"invoice",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:[],title:null,type:null,status:null,columns:nf}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){rf=e}}}},methods:{update:function(){""===rf||0===rf.length?this.$message.error("至少选择一条数据"):this.updateInvoice(rf)},invoiceDetail:function(e){var t={id:e};this.bus.$emit("goToPage","invoiceDetail"),this.bus.$emit("passData",t)},handleTableChange:function(e,t,n){var r={};r.title=this.title,r.type=this.type,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,t.type=n.type,t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},selectChange:function(e){},updateInvoice:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.invoiceEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.invoiceList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.invoiceList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},of={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invoice"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"票据类型"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("普票")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("专用发票")])],1)],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"发票抬头",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("未开")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("已开")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"edit"},on:{click:e.update}},[e._v("开票")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#f50":"#108ee9"}},[e._v(e._s(1===t?"未开":"已开"))])}},{key:"type",fn:function(t){return n("span",{},[e._v(e._s(1===t?"普票":2===t?"专用发票":"未知"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.invoiceDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var sf=n("VU/8")(af,of,!1,function(e){n("bOac")},"data-v-7a953d9c",null).exports,cf=[{title:"商品图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"购买数量",dataIndex:"buyNum"},{title:"价格",dataIndex:"price"}],lf=[{title:"活动封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"活动人数",dataIndex:"totalNumber"},{title:"价格",dataIndex:"price"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],uf=[{title:"图书图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"图书编码",dataIndex:"bookNum"},{title:"借阅数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}},{title:"价格",dataIndex:"price"}],df={name:"invoiceDetail",data:function(){return{invoice:{type:null,memberId:null,orderId:null,title:null,taxCode:null,address:null,mobile:null,bank:null,bankCode:null,amount:null,email:null,invoiceName:null,status:null,remark:null},order:null,visibleBook:null,visibleGoods:null,visibleActivity:null,bookColumns:uf,columns:cf,columns1:lf,bookList:null,goodsList:null,activityList:[]}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{formatDate:function(e){return m(e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.invoiceInfo({id:e});case 2:0===(r=n.sent).code&&(t.invoice=r.invoice,t.getOrderInfo(t.invoice.orderId));case 4:case"end":return n.stop()}},n,t)}))()},getOrderInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderInfo({orderId:e});case 2:0===(r=n.sent).code&&(t.order=r.order,t.order.orderBookList.length>0&&(t.visibleBook=!0),t.order.orderGoodsList.length>0&&(t.visibleGoods=!0),null!==t.order.orderActivity&&null!==t.order.orderActivity.activity&&(t.visibleActivity=!0,t.activityList.push(r.order.orderActivity.activity)),t.bookList=t.order.orderBookList,t.goodsList=t.order.orderGoodsList);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","invoice")}}},ff={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invoiceDetail"},[n("h2",{staticClass:"mytitle"},[e._v("开票信息"),n("a-button",{staticStyle:{float:"right"},on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("a-row",{staticClass:"borderOne",staticStyle:{"font-size":"16px"},attrs:{type:"flex",align:"middle"}},[n("a-col",{attrs:{span:24}},[n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("发票类型: "+e._s(1===e.invoice.type?"普票":2===e.invoice.type?"专用发票":"未知"))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("发票抬头: "+e._s(e.invoice.title))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("纳税人识别号: "+e._s(e.invoice.taxCode))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("单位地址: "+e._s(e.invoice.address))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("单位电话: "+e._s(e.invoice.mobile))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("开户银行: "+e._s(e.invoice.bank))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("银行账号: "+e._s(e.invoice.bankCode))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("开票金额: "+e._s(e.invoice.amount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("开票名称: "+e._s(e.invoice.invoiceName))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("备注: "+e._s(e.invoice.remark))])],1)],1)],1),e._v(" "),n("h2",{staticClass:"borderTwo mytitle"},[e._v("订单详情")]),e._v(" "),e.visibleBook?n("a-table",{attrs:{columns:e.bookColumns,dataSource:e.bookList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"borrowNum",fn:function(t){return n("span",{},[e._v(e._s(null!=t?t:1))])}}],null,!1,1644712831)}):e._e(),e._v(" "),e.visibleGoods?n("a-table",{attrs:{columns:e.columns,dataSource:e.goodsList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}}],null,!1,1850937614)}):e._e(),e._v(" "),e.visibleActivity?n("a-table",{attrs:{columns:e.columns1,dataSource:e.activityList,rowKey:"id",align:"center",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"200px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"报名中":"已结束"))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}],null,!1,1734707910)}):e._e()],1)},staticRenderFns:[]};var mf=n("VU/8")(df,ff,!1,function(e){n("Ehlx")},"data-v-05edcfc3",null).exports,pf=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"金额",dataIndex:"totalAmount",customRender:function(e){return e.toFixed(2)}},{title:"快递单号",dataIndex:"trackNum"},{title:"快递公司",dataIndex:"courierCompany"},{title:"退款状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"退款原因",dataIndex:"reason"},{title:"退款备注",dataIndex:"remark"},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],hf=null,vf={name:"refundOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},orderNum:null,nickName:null,realName:null,mobile:null,status:null,refuseReason:null,visibleOne:!1,visibleTwo:!1,startTime:null,endTime:null,locale:Ke,columns:pf,refundVisible:!1,refundPrice:null,refundId:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){hf=t}}}},methods:{showRefund:function(e){if(1!==e.status)return this.$message.error("当前订单不可以退款"),!1;this.refundVisible=!0,this.refundId=e.id,this.refundPrice=e.totalAmount},refundhandleOk:function(){this.refundVisible=!1,this.setRefund()},setRefund:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.updateRefund({id:e.refundId,totalAmount:e.refundPrice,refuseReason:e.refuseReason});case 2:0===t.sent.code&&e.refund(e.refundId);case 4:case"end":return t.stop()}},t,e)}))()},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},showModalOne:function(){if(null===hf||hf.length>1)this.$message.error("必须选择一条数据");else{if(console.log(hf[0]),1!==hf[0].status)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},showModalTwo:function(e){if(1!==e.status)return this.$message.error("当前订单不可以操作"),!1;this.visibleTwo=!0,this.refundId=e.id},handleOkOne:function(){this.visibleOne=!1,this.refund(hf[0].id)},handleOkTwo:function(){this.visibleTwo=!1;var e={};e.refuseReason=this.refuseReason,e.id=this.refundId,null!==e.refuseReason&&""!==e.refuseReason.trim()?this.refuse(e):this.$message.warn("拒绝原因不能为空")},refuse:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderRefuse(e);case 2:0===n.sent.code&&(t.$message.success("退款已拒绝"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderRefund({id:e});case 2:0===(r=n.sent).code?(t.$message.success("退款成功"),t.tableData()):(t.$message.success(r.msg),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.status=this.status,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.status=t.status,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.status=null,this.tableData()):(this.status=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderRefundList({status:e,startTime:t.startTime,endTime:t.endTime});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderRefundList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.orderRefundList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},gf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"refundOrder"},[n("a-tabs",{attrs:{defaultActiveKey:"99"},on:{change:e.callback}},[n("a-tab-pane",{key:"-1",attrs:{tab:"所有"}}),e._v(" "),n("a-tab-pane",{key:"1",attrs:{tab:"退款中"}}),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"退款完成"}}),e._v(" "),n("a-tab-pane",{key:"3",attrs:{tab:"拒绝退款"}})],1),e._v(" "),n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"拒绝退款原因",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleTwo,callback:function(t){e.visibleTwo=t},expression:"visibleTwo"}},[n("a-textarea",{model:{value:e.refuseReason,callback:function(t){e.refuseReason=t},expression:"refuseReason"}})],1),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.refundhandleOk},model:{value:e.refundVisible,callback:function(t){e.refundVisible=t},expression:"refundVisible"}},[n("p",[n("span",[e._v("金额：")]),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"退款金额"},model:{value:e.refundPrice,callback:function(t){e.refundPrice=t},expression:"refundPrice"}})],1),e._v(" "),n("p",[n("span",[e._v("原因：")]),n("a-textarea",{staticStyle:{width:"200px"},model:{value:e.refuseReason,callback:function(t){e.refuseReason=t},expression:"refuseReason"}})],1)]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:3===t?"#234567":1===t?"#f50":2===t?"#87d068":""}},[e._v(e._s(3===t?"拒绝退款":1===t?"退款中":2===t?"已退款":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showRefund(r)}}},[e._v("退款")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.showModalTwo(r)}}},[e._v("拒绝退款")])],1)}}])})],1)},staticRenderFns:[]};var bf=n("VU/8")(vf,gf,!1,function(e){n("9Q4h")},"data-v-da9fea74",null).exports,yf={name:"customerService",created:function(){window.open("https://mpkf.weixin.qq.com/cgi-bin/kfloginpage","_blank")}},wf={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var xf=n("VU/8")(yf,wf,!1,function(e){n("3+qe")},"data-v-8475a808",null).exports,kf=[{title:"赠送条件",dataIndex:"giftConditions",scopedSlots:{customRender:"giftConditions"}},{title:"赠送类型",dataIndex:"giftType",scopedSlots:{customRender:"giftType"}},{title:"赠送内容",dataIndex:"couponList",scopedSlots:{customRender:"couponList"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],_f="",Sf={name:"index",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:kf,brandName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){_f=e}}}},methods:{dateformat:function(e){var t=Te()(e).format("yyyy-MM-dd");return console.log(t),t},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.giftList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(_f),""===_f||0===_f.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.giftDelete(_f)},giftEdit:function(e){var t={id:e};this.bus.$emit("goToPage","giveEdit"),this.bus.$emit("passData",t)},giftAdd:function(){this.bus.$emit("goToPage","giveAdd")},giftDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.giftDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),_f="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.giftList({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Cf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.giftAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"giftConditions",fn:function(t){return n("span",{},[e._v(e._s(1===t?"注册送":2===t?"分享送":"其他"))])}},{key:"giftType",fn:function(t){return n("span",{},[e._v(e._s(0===t?"优惠券":1===t?"积分":"其他"))])}},{key:"couponList",fn:function(t){return null!=t?n("div",{},e._l(t,function(t){return n("span",{key:t.id},[e._v(e._s(t.title)+"  ")])}),0):n("div",{},[n("span",[e._v("11111 ")])])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.giftEdit(r.id)}}},[e._v("修改")])])}}],null,!0)})],1)},staticRenderFns:[]};var Nf=n("VU/8")(Sf,Cf,!1,function(e){n("tSOK")},"data-v-5fe3d76d",null).exports;var Tf=[{title:"优惠券名称",dataIndex:"title"},{title:"类型",dataIndex:"couponTypeName"},{title:"过期时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],Df=[],If={name:"indexAdd",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",couponForm:this.$form.createForm(this,{name:"coordinated"}),form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null},coupon:!1,pagination:{total:0,current:1},columns:Tf,couponVisible:!1,couponV:!1,couponArr:{},title:null}},computed:{rowSelection:function(){return{onChange:function(e,t){Df={id:e,title:t}}}}},methods:{handleOk:function(){this.couponVisible=!1,this.couponV=!0,console.log(Df),this.couponArr=Df},showModal:function(){this.couponVisible=!0,this.tableData()},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.omsProductList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount,t.data.forEach(function(e){var t,n;e.createDate=(t=e.createDate,n=t?Te()(t).format("YYYY-MM-DD"):"",console.log(n),n)}));case 4:case"end":return n.stop()}},n,t)}))()},chooseType:function(e){0===e.target.value?this.coupon=!0:this.coupon=!1},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addGift:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addGift(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","give");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.giftContent=w()(t.couponArr.id),e||t.addGift(n)})},goToBack:function(){this.bus.$emit("goToPage","give")},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.couponList({title:e.title});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount,console.log(e.pagination),e.data.forEach(function(e){-1===e.couponType&&(e.couponTypeName="满减"),e.couponContent="满"+e.fullAmount+"减"+e.discountPrice}));case 4:case"end":return t.stop()}},t,e)}))()}}},Mf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"赠送条件","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["giftConditions",{rules:[{required:!0,message:"请选择条件!"}]}],expression:"['giftConditions', { rules: [{ required: true, message: '请选择条件!' }] }]"}],staticStyle:{width:"120px"},attrs:{placeholder:"选择条件"}},[n("a-select-option",{key:1,attrs:{value:1}},[e._v("注册送")]),e._v(" "),n("a-select-option",{key:2,attrs:{value:2}},[e._v("分享送")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"赠送类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["giftType",{rules:[{required:!0,message:"请选择赠送类型!"}]}],expression:"['giftType', { rules: [{ required: true, message: '请选择赠送类型!' }] }]"}],on:{change:e.chooseType}},[n("a-radio",{attrs:{value:0},on:{change:e.chooseType}},[e._v("\n          优惠券\n        ")])],1)],1),e._v(" "),e.coupon?n("a-form-item",{attrs:{label:"优惠券","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择优惠券")]),e._v(" "),e.couponV?n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.couponArr.title,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t.title)),n("a-icon",{staticClass:"mycolClose",on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1):e._e()],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"优惠券",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.couponVisible,callback:function(t){e.couponVisible=t},expression:"couponVisible"}},[n("a-form",{attrs:{form:e.couponForm,layout:"vertical"}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"优惠券名称"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s(0===t?"进行中":"结束"))])}}])})],1)],1)},staticRenderFns:[]};var Of=n("VU/8")(If,Mf,!1,function(e){n("si2V")},"data-v-85881250",null).exports;var Af=[{title:"优惠券名称",dataIndex:"title"},{title:"类型",dataIndex:"couponTypeName"},{title:"过期时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}}],Lf=[],Ef={name:"indexEdit",components:{ATextarea:nd.a},data:function(){return{uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,couponForm:this.$form.createForm(this,{name:"coordinated"}),loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{title:null,content:null,menuIdList:[]},couponData:{},menuList:[],menuIdList:[],picUrl:null,imgUrl:null,coupon:!1,pagination:{total:0,current:1},columns:Af,couponVisible:!1,couponV:!1,couponArr:{},title:null}},props:{passData:Object},created:function(){this.getGiftInfo(this.passData.id)},computed:{rowSelection:function(){return{onChange:function(e,t){Lf={id:e,title:t}}}}},methods:{handleOk:function(){this.couponVisible=!1,this.couponV=!0,console.log(Lf),this.couponArr=Lf},showModal:function(){this.couponVisible=!0,this.tableData()},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.omsProductList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount,t.data.forEach(function(e){var t,n;e.createDate=(t=e.createDate,n=t?Te()(t).format("YYYY-MM-DD"):"",console.log(n),n)}));case 4:case"end":return n.stop()}},n,t)}))()},chooseType:function(e){0===e.target.value?this.coupon=!0:this.coupon=!1},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.imgUrl=e.file.response.url):this.loading=!0},getGiftInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.giftInfo({id:e});case 2:r=n.sent,t.data=r.shopGift,t.couponArr.title=t.data.couponList,0===t.data.giftType&&(t.coupon=!0,t.couponV=!0),t.menuIdList=r.data.menuIdList;case 7:case"end":return n.stop()}},n,t)}))()},giftEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.giftEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","give");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.menuIdList,n.giftContent=w()(t.couponArr.id),e||t.giftEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","give")},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.couponList({title:e.title});case 2:0===(n=t.sent).code&&(e.couponData=n.page.list,e.pagination.total=n.page.totalCount,console.log(e.pagination),e.couponData.forEach(function(e){-1===e.couponType&&(e.couponTypeName="满减"),e.couponContent="满"+e.fullAmount+"减"+e.discountPrice}));case 4:case"end":return t.stop()}},t,e)}))()}}},zf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"赠送条件","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["giftConditions",{rules:[{required:!0,message:"请选择条件!"}],initialValue:e.data.giftConditions}],expression:"['giftConditions', { rules: [{ required: true, message: '请选择条件!' }],initialValue: data.giftConditions }]"}],staticStyle:{width:"120px"},attrs:{placeholder:"选择条件"}},[n("a-select-option",{key:1,attrs:{value:1}},[e._v("注册送")]),e._v(" "),n("a-select-option",{key:2,attrs:{value:2}},[e._v("分享送")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"赠送类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["giftType",{rules:[{required:!0,message:"请选择赠送类型!"}],initialValue:e.data.giftType}],expression:"['giftType', { rules: [{ required: true, message: '请选择赠送类型!' }],initialValue: data.giftType }]"}],on:{change:e.chooseType}},[n("a-radio",{attrs:{value:0},on:{change:e.chooseType}},[e._v("\n          优惠券\n        ")])],1)],1),e._v(" "),e.coupon?n("a-form-item",{attrs:{label:"优惠券","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择优惠券")]),e._v(" "),e.couponV?n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.couponArr.title,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t.title)),n("a-icon",{staticClass:"mycolClose",on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1):e._e()],1):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{staticStyle:{top:"5px"},attrs:{zIndex:99999,title:"优惠券",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.couponVisible,callback:function(t){e.couponVisible=t},expression:"couponVisible"}},[n("a-form",{attrs:{form:e.couponForm,layout:"vertical"}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"优惠券名称"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.couponData,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s(0===t?"进行中":"结束"))])}}])})],1)],1)},staticRenderFns:[]};var Rf=n("VU/8")(Ef,zf,!1,function(e){n("rWlc")},"data-v-867f7472",null).exports,Vf=[{title:"快递单号",dataIndex:"mailNo"},{title:"订单号",dataIndex:"order.orderNum"},{title:"寄件人名称",dataIndex:"sendName"},{title:"寄件人地址",dataIndex:"sendAddress"},{title:"收件人名称",dataIndex:"reiverName"},{title:"收件人地址",dataIndex:"reiverAddress"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Bf={name:"mailOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:[],mailNo:null,orderNum:null,columns:Vf}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleTableChange:function(e,t,n){var r={};r.mailNo=this.mailNo,r.orderNum=this.orderNum,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},mailDetail:function(e){var t={id:e};this.bus.$emit("goToPage","mailOrderDetail"),this.bus.$emit("passData",t)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.mailNo&&null!==n.mailNo&&(n.mailNo=n.mailNo.trim()),t.mailNo=n.mailNo,void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,t.pagination.current=1,e||t.searchByConditions(n)})},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.mailOrderList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.mailOrderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()}}},$f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mailOrder"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mailNo"],expression:"['mailNo']"}],staticStyle:{width:"200px"},attrs:{placeholder:"快递单号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.mailDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var Uf=n("VU/8")(Bf,$f,!1,function(e){n("9uo1")},"data-v-52b2e405",null).exports,Pf=[{title:"商品图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"购买数量",dataIndex:"buyNum"},{title:"价格",dataIndex:"price"}],Ff=[{title:"城市",dataIndex:"city"},{title:"描述",dataIndex:"description"},{title:"部门",dataIndex:"site"},{title:"时间",dataIndex:"time",scopedSlots:{customRender:"time"}}],Hf=[{title:"图书图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"借阅数量",dataIndex:"borrowNum"},{title:"价格",dataIndex:"price"}],jf={name:"mailOrderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),mailOrder:{cargoName:null,gmtCommit:null,mailNo:null,reiverAddress:null,reiverName:null,remark:null,result:null,sendAddress:null,sendEndTime:null,sendName:null,sendStartTime:null,order:{evaluation:null,orderShipment:null,orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,orderGoodsList:[],orderBookList:[],mailInfoList:[],remark:null}},columns:Pf,bookColumns:Hf,columnsOne:Ff}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{showReturn:function(){this.visibleOne=!0},formatDate:function(e){return m(e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.mailInfo({id:e});case 2:0===(r=n.sent).code&&(t.mailOrder=r.mailOrder);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","mailOrder")}}},qf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mailOrderDetail"},[n("p",{staticClass:"back"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")])],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.mailOrder.order.orderNum))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单金额: "+e._s(e.mailOrder.order.totalAmount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s(0===e.mailOrder.order.orderStatus?"已取消":2===e.mailOrder.order.orderStatus?"待发货":3===e.mailOrder.order.orderStatus?"待收货":11===e.mailOrder.order.orderStatus?"预借中":12===e.mailOrder.order.orderStatus?"借阅中":13===e.mailOrder.order.orderStatus?"预归还":5===e.mailOrder.order.orderStatus?"待评价":6===e.mailOrder.order.orderStatus?"已完成":7===e.mailOrder.order.orderStatus?"退款中":8===e.mailOrder.order.orderStatus?"退款完成":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("配送方式: "+e._s(0===e.mailOrder.order.distributionType?"外送":1===e.mailOrder.order.distributionType?"自提":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.formatDate(e.mailOrder.order.createTime)))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}}),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("备注: "+e._s(e.mailOrder.order.remark))])],1)],1),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("还书物流")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("物流编号: "+e._s(e.mailOrder.mailNo))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("寄件人名称："+e._s(e.mailOrder.sendName))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("寄件人地址："+e._s(e.mailOrder.sendAddress))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("收件人名称："+e._s(e.mailOrder.reiverName))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("收件人地址："+e._s(e.mailOrder.reiverAddress))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}}),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:24}},[e._v("备注: "+e._s(e.mailOrder.remark))])],1),e._v(" "),n("a-table",{attrs:{columns:e.columnsOne,dataSource:e.mailOrder.order.mailInfoList,align:"center",rowKey:function(e,t){return t},pagination:!1},scopedSlots:e._u([{key:"time",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1),e._v(" "),e.mailOrder.order.orderGoodsList.length>0?n("div",[n("h2",{staticClass:"mytitle"},[e._v("订单商品")]),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.mailOrder.order.orderGoodsList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}}],null,!1,1850937614)})],1):e._e(),e._v(" "),e.mailOrder.order.orderBookList.length>0?n("div",[n("h2",{staticClass:"mytitle"},[e._v("订单书籍")]),e._v(" "),n("a-table",{attrs:{columns:e.bookColumns,dataSource:e.mailOrder.order.orderBookList,align:"center",rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}}],null,!1,1850937614)})],1):e._e()])},staticRenderFns:[]};var Wf=n("VU/8")(jf,qf,!1,function(e){n("QGnN")},"data-v-5903ffc4",null).exports,Yf=[{title:"发票分类名称",dataIndex:"categoryName"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Gf="",Kf={name:"agentInvoice",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,pagination:{total:0,current:1},data:[],columns:Yf}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Gf=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Gf||0===Gf.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteAgentInvoice(Gf)},deleteAgentInvoice:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentInvoiceDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Gf="");case 4:case"end":return n.stop()}},n,t)}))()},invoiceEdit:function(e){var t={id:e};this.bus.$emit("goToPage","agentInvoiceEdit"),this.bus.$emit("passData",t)},invoiceAdd:function(){this.bus.$emit("goToPage","agentInvoiceAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.helpCenterList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceList({});case 2:0===(n=t.sent).code&&(e.data=e.translateData(n.rows));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t}}},Qf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agentInvoice"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.invoiceAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.invoiceEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Xf=n("VU/8")(Kf,Qf,!1,function(e){n("xBCc")},"data-v-b99fcb20",null).exports,Jf={name:"invoiceAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{},list:[]}},created:function(){this.getParentList()},methods:{getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceList({parentId:0});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){console.log("value",e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),void 0===n.parentId&&(n.parentId=0),void 0!==n.categoryName&&""!==n.categoryName.trim()?e||t.addInvoice(n):t.$message.warn("请输入发票分类名称")})},addInvoice:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentInvoiceAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","agentInvoice")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentInvoice")}}},Zf={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invoiceAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:3},"wrapper-col":{span:15}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"200px"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"发票分类名称","label-col":{span:3},"wrapper-col":{span:15}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryName",{required:!0,rules:[{message:"发票分类名称!"}]}],expression:"['categoryName', { required: true,rules: [{ message: '发票分类名称!' }] }]"}],attrs:{placeholder:"发票分类名称"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var em=n("VU/8")(Jf,Zf,!1,function(e){n("6+GR")},"data-v-16df8b21",null).exports,tm={name:"invoiceEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{categoryName:null,parentId:null},list:[]}},props:{passData:Object},created:function(){this.getParentList()},methods:{getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceList({});case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentInvoiceInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.agentInvoice,0===t.data.parentId&&(t.data.parentId=void 0));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0===n.parentId&&(n.parentId=0),""!==n.categoryName.trim()?e||t.editAgentInvoice(n):t.$message.warn("请输入发票分类名称")})},editAgentInvoice:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentInvoiceEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","agentInvoice"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentInvoice")}}},nm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invoiceEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:3},"wrapper-col":{span:15}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],staticStyle:{width:"200px"},attrs:{disabled:""}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"发票分类名称","label-col":{span:3},"wrapper-col":{span:15}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["categoryName",{required:!0,rules:[{message:"发票分类名称!"}],initialValue:e.data.categoryName}],expression:"['categoryName', { required: true,rules: [{ message: '发票分类名称!' }],initialValue: data.categoryName }]"}],attrs:{placeholder:"发票分类名称"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var rm=n("VU/8")(tm,nm,!1,function(e){n("wG09")},"data-v-9cf55dc0",null).exports,am=[{title:"客户名称",dataIndex:"companyName"},{title:"登录账号",dataIndex:"loginName"},{title:"联系人",dataIndex:"contacts"},{title:"联系电话",dataIndex:"mobile"},{title:"建账日期",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"纳税性质",dataIndex:"taxNature",scopedSlots:{customRender:"taxNature"}},{title:"启用状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],om="",im=null,sm={name:"customer",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,visibleOne:!1,name:null,data:[],columns:am}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){om=e,im=t}}}},methods:{warrant:function(){if(null===im||1!==im.length)this.$message.error("选择一位客户进行授权");else{var e={customer:im};this.bus.$emit("goToPage","warrant"),this.bus.$emit("passData",e),im=null}},assign:function(){if(null===im||1!==im.length)this.$message.error("选择一位客户进行授权");else{var e={customer:im};this.bus.$emit("goToPage","assignUser"),this.bus.$emit("passData",e),im=null}},editStatus:function(){if(null===im)this.$message.error("至少选择一条数据");else{var e=[];im.forEach(function(t){e.push(t.status)}),1!==(e=[].concat(Xa()(new $t.a(e)))).length?this.$message.error("请选择相同状态"):this.customerUpdateStatus(om)}},handleTableChange:function(e,t,n){var r={};r.name=this.name,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===om||0===om.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},resetPassword:function(){""===om||0===om.length?this.$message.error("至少选择一条进行重置"):this.visibleOne=!0},handleOk:function(){this.visible=!1,this.customerDelete(om)},handleOkOne:function(){this.visibleOne=!1,this.customerReset(om)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.name&&null!==n.name&&(n.name=n.name.trim()),t.name=n.name,t.pagination.current=1,e||t.searchByConditions(n)})},customerAdd:function(){this.bus.$emit("goToPage","agentCustomerAdd")},editCustomer:function(e){var t={id:e};this.bus.$emit("goToPage","agentCustomerEdit"),this.bus.$emit("passData",t)},deleteCustomer:function(e){this.deleteCustomerById(e)},accountBook:function(e){var t={id:e};this.bus.$emit("goToPage","accountBook"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},deleteCustomerById:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,t.$Http.agentCustomerDeleteById({id:e});case 3:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData());case 5:case"end":return n.stop()}},n,t)}))()},customerDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),om="");case 4:case"end":return n.stop()}},n,t)}))()},customerUpdateStatus:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerUpdateStatus(e);case 2:0===n.sent.code&&(t.$message.success("状态重置成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},customerReset:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerReset(e);case 2:0===n.sent.code&&(t.$message.success("密码重置成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentCustomerList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},cm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customer"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.customerAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.warrant}},[e._v("授权")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.assign}},[e._v("指派")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.editStatus}},[e._v("启用/禁用")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"reset"},on:{click:e.resetPassword}},[e._v("重置密码")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定重置选中项的密码？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"taxNature",fn:function(t){return n("span",{},[e._v(e._s(1===t?"小纳税人":"一般纳税人"))])}},{key:"status",fn:function(t){return n("span",{},[e._v(e._s(1===t?"启用":2===t?"禁用":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.accountBook(r.id)}}},[e._v("进账簿")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.editCustomer(r.id)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteCustomer(r.id)}}},[e._v("删除")])],1)}}])})],1)},staticRenderFns:[]};var lm=n("VU/8")(sm,cm,!1,function(e){n("P/e0")},"data-v-a84f6148",null).exports,um=[{title:"编号",dataIndex:"userId"},{title:"操作员",dataIndex:"username"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}];var dm={name:"customerAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/100x100?token="+sessionStorage.token,dateFormat:"YYYY-MM-DD",loading:!1,data:{beginTime:m(new Date),picUrl:null,imgUrl:null,taxNature:1},list:[],listOne:[],userName:null,columns:um,moment:Te.a}},created:function(){this.getUserList()},methods:{handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},onChangeOne:function(e,t){this.data.beginTime=t},changeStatus:function(e){},getUserList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userAllList({});case 2:0===(n=t.sent).code&&(e.list=n.userList);case 4:case"end":return t.stop()}},t,e)}))()},getName:function(e){var t=this;this.list.forEach(function(n){if(e===n.userId)return t.username=n.username,!0})},deleteUser:function(e){var t=this;this.listOne.some(function(n,r){if(n.userId===e)return t.listOne.splice(r,1),!0})},onChange:function(e){this.getName(e),this.listOne.push({userId:e,username:this.username})},addCustomer:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerAdd(e);case 2:0===(r=n.sent).code?t.bus.$emit("goToPage","agentCustomer"):500===r.code&&t.$message.warn(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.picUrl=t.data.imgUrl,""!==n.loginName.trim()){var r=[];t.listOne.forEach(function(e){r.push(e.userId)}),n.userIds=r,0!==n.userIds.length?""!==n.companyName.trim()?""!==n.contacts.trim()?""!==n.mobile.trim()?/^1[34578]\d{9}$/.test(n.mobile)?e||t.addCustomer(n):t.$message.error("手机格式错误"):t.$message.warn("联系电话不能为空"):t.$message.warn("联系人不能为空"):t.$message.warn("公司不能为空"):t.$message.warn("指派会计不能为空")}else t.$message.warn("登录名不能为空")})},goToBack:function(){this.bus.$emit("goToPage","agentCustomer")}}},fm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customerAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"logo","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"100px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("建议宽高：100px * 100px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"登录账号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{rules:[{required:!0,message:"请填写登录账号!"}]}],expression:"['loginName', { rules: [{ required: true, message: '请填写登录账号!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"客户名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{rules:[{required:!0,message:"请填写客户名称!"}]}],expression:"['companyName', { rules: [{ required: true, message: '请填写客户名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系人","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contacts",{rules:[{required:!0,message:"请填写联系人!"}]}],expression:"['contacts', { rules: [{ required: true, message: '请填写联系人!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,message:"请填写联系电话!"}]}],expression:"['mobile', { rules: [{ required: true, message: '请填写联系电话!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"指派会计","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{staticStyle:{width:"200px"},on:{change:e.onChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.userId,attrs:{value:t.userId}},[e._v(e._s(t.username))])}),1)],1),e._v(" "),0!==e.listOne.length?n("a-table",{attrs:{columns:e.columns,dataSource:e.listOne,rowKey:"userId",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteUser(r.userId)}}},[e._v("删除")])])}}],null,!1,2520246438)}):e._e(),e._v(" "),n("a-form-item"),e._v(" "),n("a-form-item",{attrs:{label:"建账日期","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["beginTime",{initialValue:e.moment(e.data.beginTime,e.dateFormat)}],expression:"['beginTime',{initialValue: moment(data.beginTime, dateFormat)}]"}],attrs:{placeholder:"选择建账日期"},on:{change:e.onChangeOne}})],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"纳税性质","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["taxNature",{required:!0,initialValue:e.data.taxNature}],expression:"['taxNature', { required: true, initialValue: data.taxNature}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("小规模纳税人")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("一般纳税人")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var mm=n("VU/8")(dm,fm,!1,function(e){n("s15N")},"data-v-4c2d87e9",null).exports;var pm={name:"customerEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/100x100?token="+sessionStorage.token,loading:!1,data:{picUrl:null,imgUrl:null,loginName:null,password:null,companyName:null,mobile:null,contacts:null,beginTime:null,taxNature:null},dateFormat:"YYYY-MM-DD",moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},onChangeOne:function(e,t){this.data.beginTime=t},changeStatus:function(e){},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerInfo({id:e});case 2:r=n.sent,t.data=r.agentCustomer,t.data.beginTime=m(r.agentCustomer.beginTime),t.data.imgUrl=r.agentCustomer.picUrl;case 6:case"end":return n.stop()}},n,t)}))()},editCustomer:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentCustomerEdit(e);case 2:0===(r=n.sent).code?t.bus.$emit("goToPage","agentCustomer"):500===r.code&&t.$message.warn(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,""!==n.loginName.trim()?null===n.password&&""===n.password.trim()||/^\w+$/.test(n.password)?""!==n.companyName.trim()?""!==n.contacts.trim()?""!==n.mobile.trim()?/^1[34578]\d{9}$/.test(n.mobile)?(n.picUrl=t.data.imgUrl,e||t.editCustomer(n)):t.$message.error("手机格式错误"):t.$message.warn("联系电话不能为空"):t.$message.warn("联系人不能为空"):t.$message.warn("公司不能为空"):t.$message.error("密码格式错误，只能是数字、字母、下划线"):t.$message.warn("登录名不能为空")})},goToBack:function(){this.bus.$emit("goToPage","agentCustomer")}}},hm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customerEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"logo","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"100px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("建议宽高：100px * 100px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"登录名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{rules:[{required:!0,message:"请填写登录名!"}],initialValue:e.data.loginName}],expression:"['loginName', { rules: [{ required: true, message: '请填写登录名!' }],initialValue: data.loginName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password"],expression:"['password']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"公司","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{rules:[{required:!0,message:"请填写公司!"}],initialValue:e.data.companyName}],expression:"['companyName', { rules: [{ required: true, message: '请填写公司!' }], initialValue: data.companyName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系人","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contacts",{rules:[{required:!0,message:"请填写联系人!"}],initialValue:e.data.contacts}],expression:"['contacts', { rules: [{ required: true, message: '请填写联系人!' }], initialValue: data.contacts }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"联系电话","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{rules:[{required:!0,message:"请填写联系电话!"}],initialValue:e.data.mobile}],expression:"['mobile', {rules: [{ required: true, message: '请填写联系电话!' }], initialValue: data.mobile }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var vm=n("VU/8")(pm,hm,!1,function(e){n("3CrP")},"data-v-3175e608",null).exports,gm=[{title:"票据名称",dataIndex:"agentInvoice.categoryName"},{title:"票据期间",dataIndex:"billPeriod"},{title:"金额",dataIndex:"billAmount"},{title:"上传类型",dataIndex:"uploadType",scopedSlots:{customRender:"uploadType"}},{title:"上传时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],bm=[{title:"报表期间",dataIndex:"period"},{title:"报表类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"报表名称",dataIndex:"name"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],ym=[{title:!1,dataIndex:"categoryName",scopedSlots:{customRender:"categoryName"}}],wm="",xm="";function km(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var _m={name:"accountBook",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},formOne:this.$form.createForm(this,{name:"coordinated"}),formTwo:this.$form.createForm(this,{name:"coordinated"}),formBillAdd:this.$form.createForm(this,{name:"coordinated"}),formReport:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"categoryName",key:"id"},dateFormat:"YYYY-MM",uploimgUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,uploadFileUrl:"https://api.xiaoerd.icu/app/fileupload/uploadfile",billAddVisible:!1,reportVisible:!1,fileList:[],previewVisible:!1,previewImage:"",onOff:!0,visible:!1,customerId:null,billPeriod:null,downLoadUrl:null,downLoadUrls:null,downLoadReportUrl:null,tabPosition:"left",message:"导入",editBillId:null,pagination:{total:0,current:1},paginationTwo:{total:0,current:1},name:null,type:null,period:null,numList:[],dataOne:[],dataTwo:[],billDataAdd:{billPeriod:m(new Date).substring(0,7),invoiceId:null,billAmount:null,picUrl:null,imgUrl:null},reportData:{period:m(new Date).substring(0,7),url:null},list:[],moment:Te.a,columnsOne:gm,columnsTwo:bm,columnsNum:ym}},props:{passData:Object},created:function(){this.customerId=this.passData.id,this.tableData({customerId:this.customerId}),this.tableReportData({customerId:this.customerId}),this.getSecondList(),this.getQueryNum(this.customerId)},computed:{rowSelectionOne:function(){return{onChange:function(e,t){wm=e}}},rowSelectionTwo:function(){return{onChange:function(e,t){xm=e}}}},methods:{addBill:function(){this.billAddVisible=!0},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,km(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},handleReportChange:function(e){"done"===e.file.status&&(this.reportData.url=e.file.response.url,this.message="导入成功，重新导入")},handleCancel:function(){this.previewVisible=!1},onBillChange:function(e,t){this.billDataAdd.billPeriod=t},onReportChange:function(e,t){this.reportData.period=t},reportAdd:function(){this.reportVisible=!0},editBill:function(e){this.editBillId=e,this.getBillInfo(e)},getBillInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.billAddVisible=!0,n.next=3,t.$Http.agentBillInfo({id:e});case 3:0===(r=n.sent).code&&(t.billDataAdd=r.agentBill,t.billDataAdd.billAmount=r.agentBill.billAmount.toString(),r.agentBill.picUrls.forEach(function(e,n){t.fileList.push({uid:n,name:"image",status:"done",url:e})}));case 5:case"end":return n.stop()}},n,t)}))()},downLoad:function(){""===wm||0===wm.length?this.$message.error("至少选择一条进行下载"):this.downLoadUrl="https://api.xiaoerd.icu/agentBill/downLoad?token="+sessionStorage.getItem("token")+"&ids="+wm},downLoads:function(e){this.downLoadUrls="https://api.xiaoerd.icu/agentBill/downLoad?token="+sessionStorage.getItem("token")+"&ids="+e},downLoadReport:function(){""===xm||0===xm.length?this.$message.error("至少选择一条进行下载"):this.downLoadReportUrl="https://api.xiaoerd.icu/agentReport/downLoad?token="+sessionStorage.getItem("token")+"&ids="+xm},formatDate:function(e){return m(e)},showModal:function(){""===xm||0===xm.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteAgentReport(xm)},deleteAgentReport:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableReportData({customerId:t.customerId}),xm="");case 4:case"end":return n.stop()}},n,t)}))()},onChangeOne:function(e,t){this.billPeriod=t},onChangeTwo:function(e,t){this.period=t},onSelect:function(e,t){var n={};n.id=e[0],n.customerId=this.customerId,console.log(n),this.searchByInvoiceId(n)},handleTableChange:function(e,t,n){var r={};r.billPeriod=this.billPeriod,r.customerId=this.customerId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleTableChangeTwo:function(e,t,n){var r={};r.name=this.name,r.type=this.type,r.period=this.period,r.customerId=this.customerId,this.paginationTwo.current=e.current,r.page=e.current,this.searchReportByConditions(r)},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.formOne.validateFields(function(e,n){n.billPeriod=t.billPeriod,n.customerId=t.customerId,console.log(n),t.pagination.current=1,e||t.searchByConditions(n)})},handleSubmitTwo:function(e){var t=this;e.preventDefault(),this.formTwo.validateFields(function(e,n){n.period=t.period,void 0!==n.name&&""!==n.name.trim()&&(n.name=n.name.trim()),t.name=n.name,void 0!==n.type&&(t.type=n.type),n.customerId=t.customerId,t.paginationTwo.current=1,e||t.searchReportByConditions(n)})},reportHandleSubmit:function(e){var t=this;e.preventDefault(),this.formReport.validateFields(function(e,n){n.url=t.reportData.url,n.period=t.reportData.period,n.customerId=t.customerId,null!==n.url?void 0!==n.name&&""!==n.name.trim()?void 0!==n.type?e||t.addReport(n):t.$message.warn("报表类型不能为空"):t.$message.warn("报表名称不能为空"):t.$message.warn("文件不能为空")})},addReport:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.reportVisible=!1,t.reportData.period=m(new Date).substring(0,7),t.reportData.url=null,t.tableReportData({customerId:t.customerId}),t.message="导入"):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},AddBillhandleSubmit:function(e){var t=this;e.preventDefault(),this.formBillAdd.validateFields(function(e,n){if(0!==t.fileList.length){var r=[];if(t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.uploadType=1,n.id=t.editBillId,n.picUrls=r,n.picUrl=r[0],console.log(n.billAmount),n.billPeriod=t.billDataAdd.billPeriod,n.customerId=t.customerId,!n.billAmount.match(/^[0-9]+([.]{1}[0-9]+){0,1}$/))return t.$message.warn("金额输入错误"),!1;e||t.billAdd(n)}else t.$message.warn("图片不能为空")})},getSecondList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceSecondLevel({});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},billAdd:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.billAddVisible=!1,t.fileList=[],t.editBillId=null,t.billDataAdd.billPeriod=m(new Date).substring(0,7),t.billDataAdd.invoiceId=null,t.billDataAdd.billAmount=null,t.tableData({customerId:t.customerId}),t.getQueryNum(t.customerId)):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillList(e);case 2:0===(r=n.sent).code&&(t.dataOne=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchReportByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportList(e);case 2:0===(r=n.sent).code&&(t.dataTwo=r.rows,t.paginationTwo.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},searchByInvoiceId:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.searchBillListByInvoiceId(e);case 2:0===(r=n.sent).code&&(t.dataOne=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillList(e);case 2:0===(r=n.sent).code&&(t.dataOne=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},getQueryNum:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentInvoiceQueryNum({id:e});case 2:0===(r=n.sent).code&&(t.numList=r.agentInvoiceList,console.log("numList",t.numList));case 4:case"end":return n.stop()}},n,t)}))()},tableReportData:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportList(e);case 2:0===(r=n.sent).code&&(t.dataTwo=r.rows,t.paginationTwo.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.billAddVisible=!1,this.fileList=[],this.billDataAdd.billPeriod=m(new Date).substring(0,7),this.billDataAdd.invoiceId=null,this.billDataAdd.billAmount=null,this.editBillId=null},goToBackTwo:function(){this.reportVisible=!1,this.reportData.period=m(new Date).substring(0,7),this.reportData.url=null,this.message="导入"}}},Sm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tabs",{attrs:{type:"card",tabPosition:e.tabPosition}},[n("a-tab-pane",{key:"1",attrs:{tab:"票据管理"}},[e.billAddVisible?e._e():n("div",{staticClass:"queryNum"},[n("a-tree",{attrs:{defaultExpandAll:!0,treeData:e.numList,replaceFields:e.replaceFields},on:{select:e.onSelect}})],1),e._v(" "),e.billAddVisible?e._e():n("div",{staticClass:"agentBill"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.formOne,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{staticClass:"one"},[n("a-month-picker",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择票据期间"},on:{change:e.onChangeOne}})],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addBill}},[e._v("新增")])],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 批量下载")])])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionOne,columns:e.columnsOne,dataSource:e.dataOne,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"uploadType",fn:function(t){return n("span",{},[e._v(e._s(1===t?"会计":2===t?"客户":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.editBill(r.id)}}},[e._v("编辑")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:e.downLoadUrls},on:{click:function(t){return e.downLoads(r.id)}}},[e._v("下载")])],1)}}],null,!1,3662851607)})],1),e._v(" "),e.billAddVisible?n("div",{staticClass:"billAdd"},[n("a-form",{staticClass:"formWidthOne",attrs:{form:e.formBillAdd,layout:"vertical"},on:{submit:e.AddBillhandleSubmit}},[n("a-form-item",{attrs:{label:"票据文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploimgUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"票据期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["billPeriod",{initialValue:e.moment(e.billDataAdd.billPeriod,e.dateFormat)}],expression:"['billPeriod',{initialValue: moment(billDataAdd.billPeriod, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onBillChange}})],1),e._v(" "),n("a-form-item",{attrs:{label:"票据类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["invoiceId",{initialValue:e.billDataAdd.invoiceId}],expression:"['invoiceId',{initialValue: billDataAdd.invoiceId}]"}],staticStyle:{width:"200px"}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"输入票据金额","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["billAmount",{initialValue:e.billDataAdd.billAmount}],expression:"['billAmount',{initialValue: billDataAdd.billAmount}]"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入票据金额"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n              确定\n            ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n              返回\n            ")])],1)],1)],1):e._e()]),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:"报表管理"}},[e.reportVisible?e._e():n("div",{staticClass:"agentReport"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.formTwo,layout:"vertical"},on:{submit:e.handleSubmitTwo}},[n("a-form-item",{staticClass:"one"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"报表名称"}})],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"报表类型"}},[n("a-select-option",{attrs:{value:1}},[e._v("利润表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("资产负债表")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("税务表")])],1)],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-month-picker",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择票据期间"},on:{change:e.onChangeTwo}})],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.reportAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",{staticClass:"one"},[n("a-button",{attrs:{type:"primary"},on:{click:e.downLoadReport}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadReportUrl}},[e._v(" 下载")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionTwo,columns:e.columnsTwo,dataSource:e.dataTwo,rowKey:"id",pagination:e.paginationTwo},on:{change:e.handleTableChangeTwo},scopedSlots:e._u([{key:"type",fn:function(t){return n("span",{},[e._v(e._s(1===t?"利润表":2===t?"资产负债表":3===t?"税务表":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:r.url,target:"_blank"}},[e._v("查看")])])}}],null,!1,1009796268)})],1),e._v(" "),e.reportVisible?n("div",{staticClass:"reportEdit"},[n("a-form",{staticClass:"formWidthOne",attrs:{form:e.formReport,layout:"vertical"}},[n("a-form-item",{attrs:{label:"报表文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",headers:e.headers,multiple:!1,action:e.uploadFileUrl},on:{change:e.handleReportChange}},[n("a-button",{staticStyle:{width:"200px"},attrs:{type:"primary",icon:"import"}},[n("span",[e._v(e._s(e.message))])])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"报表名称","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入报表名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"报表类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"}},[n("a-select-option",{attrs:{value:1}},[e._v("利润表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("资产负债表")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("税务表")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"报表期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["period",{initialValue:e.moment(e.reportData.period,e.dateFormat)}],expression:"['period',{initialValue: moment(reportData.period, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onReportChange}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.reportHandleSubmit}},[e._v("\n              确定\n            ")]),e._v(" "),n("a-button",{on:{click:e.goToBackTwo}},[e._v("\n              返回\n            ")])],1)],1)],1):e._e()])],1)},staticRenderFns:[]};var Cm=n("VU/8")(_m,Sm,!1,function(e){n("ek3R")},"data-v-6d39dc7f",null).exports,Nm=[{title:"编号",dataIndex:"userId"},{title:"操作员",dataIndex:"username"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Tm={name:"warrant",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),companyName:null,list:[],data:[],userName:null,columns:Nm}},props:{passData:Object},created:function(){console.log("customer",this.passData.customer),console.log("公司名称",this.passData.customer[0].companyName),console.log("id",this.passData.customer[0].id),this.companyName=this.passData.customer[0].companyName,this.getUserList(),this.getInfo(this.passData.customer[0].id)},methods:{deleteUser:function(e){var t=this;console.log("delete",e),this.data.some(function(n,r){if(n.userId===e)return t.data.splice(r,1),!0})},getName:function(e){var t=this;this.list.forEach(function(n){if(e===n.userId)return t.username=n.username,!0})},onChange:function(e){if(console.log("value",e),this.data.length>0){var t=!0;this.data.forEach(function(n){n.userId===e&&(t=!1)}),t&&(this.getName(e),this.data.push({userId:e,username:this.username}))}else this.getName(e),this.data.push({userId:e,username:this.username})},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.customerUserList({customerId:e});case 2:0===(r=n.sent).code&&r.rows.length>0&&r.rows.forEach(function(e){t.getName(e.userId),t.data.push({userId:e.userId,username:t.username})});case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.customerId=t.passData.customer[0].id;var r=[];t.data.forEach(function(e){r.push(e.userId)}),n.userIds=r,console.log("values",n),e||t.customerUserAdd(n)})},customerUserAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.customerUserAdd(e);case 2:0===n.sent.code&&(t.$message.success("授权成功"),t.bus.$emit("goToPage","agentCustomer"));case 4:case"end":return n.stop()}},n,t)}))()},getUserList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userAllList({});case 2:0===(n=t.sent).code&&(e.list=n.userList);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","agentCustomer")}}},Dm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"warrant"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"客户","label-col":{span:5},"wrapper-col":{span:16}}},[n("span",[e._v(e._s(e.companyName))])]),e._v(" "),n("a-form-item",{attrs:{label:"新增操作员","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{staticStyle:{width:"200px"},on:{change:e.onChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.userId,attrs:{value:t.userId}},[e._v(e._s(t.username))])}),1)],1),e._v(" "),0!==e.data.length?n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"userId",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteUser(r.userId)}}},[e._v("删除")])])}}],null,!1,2520246438)}):e._e(),e._v(" "),n("a-form-item"),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Im=n("VU/8")(Tm,Dm,!1,function(e){n("PrzO")},"data-v-3e38a432",null).exports,Mm=[{title:"编号",dataIndex:"userId"},{title:"操作员",dataIndex:"username"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Om={name:"warrant",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),companyName:null,list:[],data:[],userName:null,originalOperator:"",columns:Mm}},props:{passData:Object},created:function(){console.log("customer",this.passData.customer),console.log("公司名称",this.passData.customer[0].companyName),console.log("id",this.passData.customer[0].id),this.companyName=this.passData.customer[0].companyName,this.getUserList(),this.getInfo(this.passData.customer[0].id)},methods:{deleteUser:function(e){var t=this;console.log("delete",e),this.data.some(function(n,r){if(n.userId===e)return t.data.splice(r,1),!0})},getName:function(e){var t=this;this.list.forEach(function(n){if(e===n.userId)return t.username=n.username,!0})},onChange:function(e){if(console.log("value",e),this.data.length>0){var t=!0;this.data.forEach(function(n){n.userId===e&&(t=!1)}),t&&(this.getName(e),this.data.push({userId:e,username:this.username}))}else this.getName(e),this.data.push({userId:e,username:this.username})},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.customerUserList({customerId:e});case 2:0===(r=n.sent).code&&r.rows.length>0&&r.rows.forEach(function(e){t.getName(e.userId),t.data.push({userId:e.userId,username:t.username}),t.originalOperator=t.originalOperator+" "+t.username});case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.customerId=t.passData.customer[0].id;var r=[];t.data.forEach(function(e){r.push(e.userId)}),n.userIds=r,console.log("values",n),e||t.customerUserAdd(n)})},customerUserAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.customerUserAdd(e);case 2:0===n.sent.code&&(t.$message.success("授权成功"),t.bus.$emit("goToPage","agentCustomer"));case 4:case"end":return n.stop()}},n,t)}))()},getUserList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userAllList({});case 2:0===(n=t.sent).code&&(e.list=n.userList);case 4:case"end":return t.stop()}},t,e)}))()},goToBack:function(){this.bus.$emit("goToPage","agentCustomer")}}},Am={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"warrant"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"客户","label-col":{span:5},"wrapper-col":{span:16}}},[n("span",[e._v(e._s(e.companyName))])]),e._v(" "),n("a-form-item",{attrs:{label:"新增操作员","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{staticStyle:{width:"200px"},on:{change:e.onChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.userId,attrs:{value:t.userId}},[e._v(e._s(t.username))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"原操作员","label-col":{span:5},"wrapper-col":{span:16}}},[n("span",[e._v(e._s(e.originalOperator))])]),e._v(" "),0!==e.data.length?n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"userId",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteUser(r.userId)}}},[e._v("删除")])])}}],null,!1,2520246438)}):e._e(),e._v(" "),n("a-form-item"),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Lm=n("VU/8")(Om,Am,!1,function(e){n("1+2W")},"data-v-e41e804c",null).exports,Em=[{title:"票据名称",dataIndex:"agentInvoice.categoryName"},{title:"票据期间",dataIndex:"billPeriod"},{title:"金额",dataIndex:"billAmount"},{title:"上传类型",dataIndex:"uploadType"},{title:"上传时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],zm="",Rm={name:"agentBill",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,billPeriod:null,downLoadUrl:null,downLoadUrls:null,pagination:{total:0,current:1},data:[],columns:Em}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){zm=e}}}},methods:{downLoad:function(){""===zm||0===zm.length?this.$message.error("至少选择一条进行下载"):this.downLoadUrl="https://api.xiaoerd.icu/agentBill/downLoad?token="+sessionStorage.getItem("token")+"&ids="+zm},downLoads:function(e){this.downLoadUrls="https://api.xiaoerd.icu/agentBill/downLoad?token="+sessionStorage.getItem("token")+"&ids="+e},formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};r.billPeriod=this.billPeriod,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===zm||0===zm.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},onChangeOne:function(e,t){this.billPeriod=t},handleOk:function(){this.visible=!1,this.deleteAgentBill(zm)},deleteAgentBill:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),zm="");case 4:case"end":return n.stop()}},n,t)}))()},edit:function(e){var t={id:e};this.bus.$emit("goToPage","agentBillEdit"),this.bus.$emit("passData",t)},add:function(){this.bus.$emit("goToPage","agentBillAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.billPeriod=t.billPeriod,console.log(n),t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentBillList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Vm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agentBill"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-month-picker",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择票据期间"},on:{change:e.onChangeOne}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.add}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 批量下载")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.edit(r.id)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:e.downLoadUrls},on:{click:function(t){return e.downLoads(r.id)}}},[e._v("下载")])],1)}}])})],1)},staticRenderFns:[]};var Bm=n("VU/8")(Rm,Vm,!1,function(e){n("v2v1")},"data-v-b24aeb64",null).exports;function $m(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var Um={name:"billAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,dateFormat:"YYYY-MM",loading:!1,fileList:[],previewVisible:!1,previewImage:"",onOff:!0,data:{billPeriod:m(new Date).substring(0,7),picUrl:null,imgUrl:null},list:[],moment:Te.a}},created:function(){this.getSecondList()},methods:{handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,$m(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleCancel:function(){this.previewVisible=!1},getSecondList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceSecondLevel({});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},onChange:function(e,t){this.data.billPeriod=t},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(0!==t.fileList.length){var r=[];if(t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0],n.billPeriod=t.data.billPeriod,!n.billAmount.match(/^[0-9]+([.]{1}[0-9]+){0,1}$/))return t.$message.warn("金额输入错误"),!1;e||t.addBill(n)}else t.$message.warn("图片不能为空")})},addBill:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","agentBill")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentBill")}}},Pm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"billAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"票据文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"票据期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["billPeriod",{initialValue:e.moment(e.data.billPeriod,e.dateFormat)}],expression:"['billPeriod',{initialValue: moment(data.billPeriod, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onChange}})],1),e._v(" "),n("a-form-item",{attrs:{label:"票据类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["invoiceId"],expression:"['invoiceId']"}],staticStyle:{width:"200px"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"输入票据金额","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["billAmount"],expression:"['billAmount']"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入票据金额"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var Fm=n("VU/8")(Um,Pm,!1,function(e){n("qGu8")},"data-v-546527a8",null).exports;function Hm(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var jm={name:"invoiceEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,dateFormat:"YYYY-MM",loading:!1,fileList:[],previewVisible:!1,previewImage:"",data:{invoiceId:null,billPeriod:null,billAmount:null,picUrl:null,imgUrl:null},list:[],onOff:!0,moment:Te.a}},props:{passData:Object},created:function(){this.getSecondList()},methods:{handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,Hm(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleCancel:function(){this.previewVisible=!1},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},onChange:function(e,t){this.data.billPeriod=t},selectChange:function(e){},getSecondList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentInvoiceSecondLevel({});case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.agentBill,r.agentBill.picUrls.forEach(function(e,n){t.fileList.push({uid:n,name:"image",status:"done",url:e})}));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id;var r=[];0!==t.fileList.length?(t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0]):(n.picUrls=null,n.picUrl=null),null!==n.picUrl?(n.billPeriod=t.data.billPeriod,e||t.editAgentBill(n)):t.$message.warn("图片不能为空")})},editAgentBill:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","agentBill"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentBill")}}},qm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"invoiceEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"票据文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"票据期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["billPeriod",{initialValue:e.moment(e.data.billPeriod,e.dateFormat)}],expression:"['billPeriod',{initialValue: moment(data.billPeriod, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onChange}})],1),e._v(" "),n("a-form-item",{attrs:{label:"票据类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["invoiceId",{initialValue:e.data.invoiceId}],expression:"['invoiceId',{initialValue: data.invoiceId}]"}],staticStyle:{width:"200px"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.categoryName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"输入票据金额","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["billAmount",{initialValue:e.data.billAmount}],expression:"['billAmount',{initialValue: data.billAmount}]"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入票据金额"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var Wm=n("VU/8")(jm,qm,!1,function(e){n("1XpT")},"data-v-5bfd201a",null).exports,Ym=[{title:"报表期间",dataIndex:"period"},{title:"报表类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"报表名称",dataIndex:"name"},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Gm="",Km={name:"agentReport",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),downLoadUrl:null,visible:!1,pagination:{total:0,current:1},name:null,type:null,period:null,data:[],columns:Ym}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Gm=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.name=this.name,r.type=this.type,r.period=this.period,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Gm||0===Gm.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},downLoad:function(){""===Gm||0===Gm.length?this.$message.error("至少选择一条进行下载"):this.downLoadUrl="https://api.xiaoerd.icu/agentReport/downLoad?token="+sessionStorage.getItem("token")+"&ids="+Gm},handleOk:function(){this.visible=!1,this.deleteAgentReport(Gm)},onChangeOne:function(e,t){this.period=t},deleteAgentReport:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Gm="");case 4:case"end":return n.stop()}},n,t)}))()},reportEdit:function(e){var t={id:e};this.bus.$emit("goToPage","agentReportEdit"),this.bus.$emit("passData",t)},view:function(e){window.open(e)},reportAdd:function(){this.bus.$emit("goToPage","agentReportAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.period=t.period,console.log("values",n),void 0!==n.name&&""!==n.name.trim()&&(n.name=n.name.trim()),t.name=n.name,void 0!==n.type&&(t.type=n.type),t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentReportList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Qm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agentReport"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"报表名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"报表类型"}},[n("a-select-option",{attrs:{value:1}},[e._v("利润表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("资产表")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("负债表")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("税务表")])],1)],1),e._v(" "),n("a-form-item",[n("a-month-picker",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择票据期间"},on:{change:e.onChangeOne}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.reportAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadUrl}},[e._v(" 下载")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"type",fn:function(t){return n("span",{},[e._v(e._s(1===t?"利润表":2===t?"资产表":3===t?"负债表":4===t?"税务表":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:r.url,target:"_blank"}},[e._v("查看")])])}}])})],1)},staticRenderFns:[]};var Xm=n("VU/8")(Km,Qm,!1,function(e){n("rAdd")},"data-v-04f31df6",null).exports,Jm={name:"reportAdd",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/fil/fiuplo/uploadfile",dateFormat:"YYYY-MM",message:"导入",data:{period:m(new Date).substring(0,7),url:null,imgUrl:null},moment:Te.a}},created:function(){},methods:{handleChange:function(e){"done"===e.file.status&&(console.log("info",e),this.data.url=e.file.response.url,this.message="重新导入",console.log("url",this.data.url),console.log("dsadsad"))},onChange:function(e,t){console.log(e),console.log(t),this.data.period=t},selectChange:function(e){console.log("value",e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.url=t.data.url,n.period=t.data.period,null!==n.url?void 0!==n.name&&""!==n.name.trim()?void 0!==n.type?e||t.addReport(n):t.$message.warn("报表类型不能为空"):t.$message.warn("报表名称不能为空"):t.$message.warn("文件不能为空")})},addReport:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","agentReport")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentReport")}}},Zm={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reportAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"报表文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",headers:e.headers,multiple:!1,action:e.uploadUrl},on:{change:e.handleChange}},[n("a-button",{staticStyle:{width:"200px"},attrs:{type:"primary",icon:"import"}},[n("span",[e._v(e._s(e.message))])])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"报表名称","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入报表名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"报表类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("利润表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("资产表")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("负债表")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("税务表")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"票据期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["period",{initialValue:e.moment(e.data.period,e.dateFormat)}],expression:"['period',{initialValue: moment(data.period, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onChange}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var ep=n("VU/8")(Jm,Zm,!1,function(e){n("dTsO")},"data-v-af7980a4",null).exports,tp={name:"reportEdit",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/fil/fiuplo/uploadfile",dateFormat:"YYYY-MM",message:"重新导入",data:{name:null,type:null,url:null,period:null},moment:Te.a}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{handleChange:function(e){"done"===e.file.status&&(this.data.url=e.file.response.url)},onChange:function(e,t){this.data.period=t},selectChange:function(e){console.log("value",e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentReportInfo({id:e});case 2:r=n.sent,console.log(r),0===r.code&&(t.data=r.agentReport);case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.url=t.data.url,n.period=t.data.period,console.log(n)})},editAgentBill:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","agentReport"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentReport")}}},np={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reportEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"报表文件选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-upload",{attrs:{name:"file",headers:e.headers,multiple:!1,action:e.uploadUrl},on:{change:e.handleChange}},[n("a-button",{staticStyle:{width:"200px"},attrs:{disabled:!0,type:"primary",icon:"import"}},[n("span",[e._v(e._s(e.message))])])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"报表名称","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.data.name}],expression:"['name',{initialValue: data.name}]"}],staticStyle:{width:"200px"},attrs:{placeholder:"输入报表名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"报表类型选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.data.type}],expression:"['type',{initialValue: data.type}]"}],staticStyle:{width:"200px"},on:{change:e.selectChange}},[n("a-select-option",{attrs:{value:1}},[e._v("利润表")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("资产表")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("负债表")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("税务表")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"票据期间选择","label-col":{span:4},"wrapper-col":{span:14}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["period",{initialValue:e.moment(e.data.period,e.dateFormat)}],expression:"['period',{initialValue: moment(data.period, dateFormat)}]"}],staticStyle:{width:"200px"},on:{change:e.onChange}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var rp=n("VU/8")(tp,np,!1,function(e){n("JqsX")},"data-v-0b935449",null).exports,ap=[{title:"用户名",dataIndex:"username"},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],op="",ip={name:"user",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,username:null,data:[],columns:ap}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){op=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.username=this.username,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===op||0===op.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.userDelete(op)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.username&&null!==n.username&&(n.username=n.username.trim()),t.username=n.username,t.pagination.current=1,e||t.searchByConditions(n)})},goToAdminAdd:function(){this.bus.$emit("goToPage","agentUserAdd")},userEdit:function(e){var t={id:e};this.bus.$emit("goToPage","agentUserEdit"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},userDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),op="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},sp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.goToAdminAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"userId",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"正常":"禁用"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.userEdit(r.userId)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var cp=n("VU/8")(ip,sp,!1,function(e){n("6WZA")},"data-v-c0fc9768",null).exports,lp={name:"userAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),checkedList:[],roleList:[],data:{status:1,isAdmin:0},tenantList:[],storeList:[],storeId:null,storeName:null,tenantId:null}},created:function(){this.getRoleList()},methods:{getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},getStore:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeListByTenantId({tenantId:e});case 2:0===(r=n.sent).code&&(t.storeList=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},changeTenant:function(e){this.getStore(e)},changeStore:function(e){var t=this;this.storeList.forEach(function(n){if(n.id===e)return t.storeName=n.storeName,!1})},onChange:function(e){},changeStatus:function(e){},getRoleList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listRole({});case 2:0===(n=t.sent).code&&(e.roleList=n.roleList);case 4:case"end":return t.stop()}},t,e)}))()},addUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","agentUser");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.roleIdList=t.checkedList,n.storeName=t.storeName,e||t.addUser(n)})},goToBack:function(){this.bus.$emit("goToPage","agentUser")}}},up={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请填写用户名!"}]}],expression:"['username', { rules: [{ required: true, message: '请填写用户名!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请填写密码!"}]}],expression:"['password', { rules: [{ required: true, message: '请填写密码!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"邮箱","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}]})],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"角色","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.roleList,function(t){return n("a-checkbox",{key:t.roleId,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"是否管理员","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isAdmin",{required:!0,initialValue:e.data.isAdmin}],expression:"['isAdmin', { required: true, initialValue: data.isAdmin}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("正常")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var dp=n("VU/8")(lp,up,!1,function(e){n("bg/a")},"data-v-4bfaac9c",null).exports,fp={name:"userEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),checkedList:[],roleList:[],tenantList:[],data:{username:null,password:null,email:null,mobile:null,status:null,isAdmin:null},storeList:[],storeId:null,storeName:null}},props:{passData:Object},created:function(){this.getRoleList(),this.getUserInfo(this.passData.id)},methods:{getStore:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeListByTenantId({tenantId:e});case 2:0===(r=n.sent).code&&(t.storeList=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},getTenant:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listTenant({});case 2:0===(n=t.sent).code&&(e.tenantList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},changeTenant:function(e){this.getStore(e)},changeStore:function(e){var t=this;this.storeList.forEach(function(n){if(n.id===e)return t.storeName=n.storeName,!1})},onChange:function(e){},changeStatus:function(e){},getUserInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userInfo({userId:e});case 2:r=n.sent,t.data=r.user,t.checkedList=r.user.roleIdList;case 5:case"end":return n.stop()}},n,t)}))()},getRoleList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.listRole({});case 2:0===(n=t.sent).code&&(e.roleList=n.roleList);case 4:case"end":return t.stop()}},t,e)}))()},editUser:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","agentUser");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.userId=t.passData.id,n.roleIdList=t.checkedList,n.storeName=t.storeName,e||t.editUser(n)})},goToBack:function(){this.bus.$emit("goToPage","agentUser")}}},mp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"用户名","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请填写用户名!"}],initialValue:e.data.username}],expression:"['username', { rules: [{ required: true, message: '请填写用户名!' }],initialValue: data.username }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password"],expression:"['password']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"邮箱","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{initialValue:e.data.email}],expression:"['email', {initialValue: data.email }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"手机号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile",{initialValue:e.data.mobile}],expression:"['mobile', {initialValue: data.mobile }]"}]})],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"角色","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-checkbox-group",{on:{change:e.onChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.roleList,function(t){return n("a-checkbox",{key:t.roleId,attrs:{value:t.roleId}},[e._v(e._s(t.roleName))])}),1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"是否管理员","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isAdmin",{required:!0,initialValue:e.data.isAdmin}],expression:"['isAdmin', { required: true, initialValue: data.isAdmin}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{staticClass:"myxing",attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{required:!0,initialValue:e.data.status}],expression:"['status', { required: true, initialValue: data.status}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("正常")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var pp=n("VU/8")(fp,mp,!1,function(e){n("tyRm")},"data-v-d8023eac",null).exports,hp=[{title:"合同编码",dataIndex:"contractNum"},{title:"客户名称",dataIndex:"customer.companyName"},{title:"服务项目",dataIndex:"customer.taxNature"},{title:"合同金额",dataIndex:"amount"},{title:"服务开始日期",dataIndex:"startDate",scopedSlots:{customRender:"startDate"}},{title:"服务结束日期",dataIndex:"endDate",scopedSlots:{customRender:"endDate"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],vp="",gp={name:"user",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visibleOne:!1,visibleTwo:!1,username:null,data:[],columns:hp}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){vp=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.username=this.username,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModalOne:function(){""===vp||0===vp.length?this.$message.error("至少选择一条进行废除"):this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1;var e={};e.ids=vp,e.status=3,this.updateBatch(e)},showModalTwo:function(){""===vp||0===vp.length?this.$message.error("至少选择一条进行终止"):this.visibleTwo=!0},handleOkTwo:function(){this.visibleTwo=!1;var e={};e.ids=vp,e.status=2,this.updateBatch(e)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.username&&null!==n.username&&(n.username=n.username.trim()),t.username=n.username,t.pagination.current=1,e||t.searchByConditions(n)})},goToContractAdd:function(){this.bus.$emit("goToPage","agentContractAdd")},contractEdit:function(e){var t={id:e};this.bus.$emit("goToPage","agentContractEdit"),this.bus.$emit("passData",t)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentContractList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},updateBatch:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentContractUpdateBatch(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentContractList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},bp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contract"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.goToContractAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.showModalOne}},[e._v("废除合同")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.showModalTwo}},[e._v("终止合同")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"废除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定废除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"终止确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleTwo,callback:function(t){e.visibleTwo=t},expression:"visibleTwo"}},[n("p",[e._v("确定终止选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":3===t?"#87d068":""}},[e._v(e._s(1===t?"正常":2===t?"终止":3===t?"废除":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"startDate",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t,"yyyy-MM-dd")))])}},{key:"endDate",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t,"yyyy-MM-dd")))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.contractEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var yp=n("VU/8")(gp,bp,!1,function(e){n("OnJB")},"data-v-a0d9318a",null).exports,wp={name:"contractAdd",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),data:{status:0},customerId:null,customerList:[]}},created:function(){this.getCustomerList()},methods:{getStore:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.storeListByTenantId({tenantId:e});case 2:0===(r=n.sent).code&&(t.storeList=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},onOk:function(e){},onChange:function(e){},getCustomerList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentCustomerListAll({});case 2:0===(n=t.sent).code&&(e.customerList=n.customerList);case 4:case"end":return t.stop()}},t,e)}))()},addContract:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,t.$Http.agentContractAdd(e);case 3:0===n.sent.code&&t.bus.$emit("goToPage","agentContract");case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){e||t.addContract(n)})},goToBack:function(){this.bus.$emit("goToPage","agentContract")}}},xp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contractAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"合同编号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNum",{rules:[{required:!0,message:"请填写合同编号!"}]}],expression:"['contractNum', { rules: [{ required: true, message: '请填写合同编号!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"客户名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["customerId"],expression:"['customerId']"}],attrs:{placeholder:"请选择客户"}},e._l(e.customerList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.companyName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"合同金额","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount"],expression:"['amount']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"签订人","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["signer"],expression:"['signer']"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate"],expression:"['startDate']"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}}),e._v(" "),n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endDate"],expression:"['endDate']"}],attrs:{placeholder:"选择结束时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"签订日期","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate"],expression:"['signDate']"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{message:"备注!"}],initialValue:e.data.remark}],expression:"['remark', { rules: [{  message: '备注!' }], initialValue: data.remark}]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var kp=n("VU/8")(wp,xp,!1,function(e){n("YI2q")},"data-v-7ef9d554",null).exports,_p={name:"contractEdit",data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),dateFormat:"YYYY-MM-DD",checkedList:[],roleList:[],tenantList:[],data:{contractNum:null,startDate:null,endDate:null,signDate:null,customerId:null,contractname:null,signer:null,password:null,email:null,mobile:null,status:null},storeList:[],customerList:[],storeId:null,storeName:null,moment:Te.a}},props:{passData:Object},created:function(){this.getCustomerList(),this.getContractInfo(this.passData.id)},methods:{onChange:function(e){},onOk:function(e){},changeStatus:function(e){},getContractInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentContractInfo({id:e});case 2:r=n.sent,t.data=r.agentContract,t.data.startDate=m(new Date(r.agentContract.startDate)),t.data.endDate=m(new Date(r.agentContract.endDate)),t.data.signDate=m(new Date(r.agentContract.signDate));case 7:case"end":return n.stop()}},n,t)}))()},getCustomerList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentCustomerListAll({});case 2:0===(n=t.sent).code&&(e.customerList=n.customerList);case 4:case"end":return t.stop()}},t,e)}))()},editContract:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentContractEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","agentContract");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,e||t.editContract(n)})},goToBack:function(){this.bus.$emit("goToPage","agentContract")}}},Sp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contractEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"合同编号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractNum",{rules:[{required:!0,message:"请填写用户名!"}],initialValue:e.data.contractNum}],expression:"['contractNum', { rules: [{ required: true, message: '请填写用户名!' }], initialValue: data.contractNum }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"客户名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["customerId",{initialValue:e.data.customerId}],expression:"['customerId', {initialValue: data.customerId}]"}],attrs:{placeholder:"请选择客户"}},e._l(e.customerList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.companyName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"合同金额","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["amount",{initialValue:e.data.amount}],expression:"['amount', {initialValue: data.amount}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"签订人","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["signer",{rules:[{message:"签订人!"}],initialValue:e.data.signer}],expression:"['signer', { rules: [{  message: '签订人!' }], initialValue: data.signer}]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"开始时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startDate",{initialValue:e.moment(e.data.startDate,e.dateFormat)}],expression:"['startDate', {initialValue: moment(data.startDate, dateFormat)}]"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}}),e._v(" "),n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endDate",{initialValue:e.moment(e.data.endDate,e.dateFormat)}],expression:"['endDate', {initialValue: moment(data.endDate, dateFormat)}]"}],attrs:{placeholder:"选择结束时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"签订日期","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["signDate",{initialValue:e.moment(e.data.signDate,e.dateFormat)}],expression:"['signDate',{initialValue: moment(data.signDate, dateFormat)}]"}],attrs:{placeholder:"选择开始时间"},on:{change:e.onChange,ok:e.onOk}})],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{message:"备注!"}],initialValue:e.data.remark}],expression:"['remark', { rules: [{  message: '备注!' }], initialValue: data.remark}]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Cp=n("VU/8")(_p,Sp,!1,function(e){n("JzrQ")},"data-v-eadbe71c",null).exports,Np=[{title:"消息标题",dataIndex:"title"},{title:"消息内容",dataIndex:"content",width:"30%",scopedSlots:{customRender:"content"}},{title:"公司名称",dataIndex:"companyName"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"发送时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],Tp="",Dp={name:"agentMessage",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,pagination:{total:0,current:1},data:[],columns:Np}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Tp=e}}}},methods:{formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Tp||0===Tp.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1},deleteAgentBill:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Tp="");case 4:case"end":return n.stop()}},n,t)}))()},add:function(){this.bus.$emit("goToPage","agentMessageAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentBillList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentMessageList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Ip={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agentMessage"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"index",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"content",fn:function(t,r){return n("div",{style:{maxWidth:"300px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.content}},[e._v("\n        "+e._s(r.content)+"\n      ")])}},{key:"status",fn:function(t){return n("span",{},[e._v(e._s(1===t?"未读":2===t?"已读":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var Mp=n("VU/8")(Dp,Ip,!1,function(e){n("8vsi")},"data-v-7ba34d5a",null).exports,Op=[{title:!1,dataIndex:"companyName"},{title:!1,key:"operation",scopedSlots:{customRender:"action"}}],Ap={name:"messageAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),companyName:null,dataOne:[],list:[],columns:Op}},created:function(){this.getCustomerList()},methods:{deleteCompany:function(e){var t=this;this.dataOne.some(function(n,r){if(n.id===e)return t.dataOne.splice(r,1),!0})},getCustomerList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.agentCustomerQueryAll({});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},getName:function(e){var t=this;this.list.forEach(function(n){if(e===n.id)return t.companyName=n.companyName,!0})},onChange:function(e){this.getName(e),this.dataOne.push({id:e,companyName:this.companyName})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(void 0!==n.title&&""!==n.title.trim())if(void 0!==n.content&&""!==n.content.trim())if(void 0!==n.allCustomer||0!==t.dataOne.length){var r=[];void 0===n.allCustomer?t.dataOne.forEach(function(e){r.push(e.id)}):t.list.forEach(function(e){r.push(e.id)}),n.customerIds=r,e||t.addMessage(n)}else t.$message.warn("请选择客户");else t.$message.warn("请输入内容");else t.$message.warn("请输入标题")})},addMessage:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.agentMessageAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","agentMessage")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","agentMessage")}}},Lp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"messageAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"消息标题","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],attrs:{placeholder:"输入消息标题"}})],1),e._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"0"}},[n("a-form-item",{style:{display:"inline-block",width:"40%"},attrs:{label:"客户","label-col":{span:5},"wrapper-col":{span:5}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["allCustomer"],expression:"['allCustomer']"}]},[n("a-radio",{attrs:{value:1}},[e._v("全部客户")])],1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block",width:"60%"},attrs:{label:"选择客户","label-col":{span:4},"wrapper-col":{span:11}}},[n("a-select",{on:{change:e.onChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.companyName))])}),1),e._v(" "),0!==e.dataOne.length?n("a-table",{attrs:{columns:e.columns,dataSource:e.dataOne,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteCompany(r.id)}}},[e._v("删除")])])}}],null,!1,3263792673)}):e._e()],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Ep=n("VU/8")(Ap,Lp,!1,function(e){n("/n8b")},"data-v-4d0885e9",null).exports,zp=[{title:"公司名称",dataIndex:"companyName"},{title:"联系方式",dataIndex:"mobile"},{title:"查询时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],Rp="",Vp={name:"user",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,companyName:null,data:[],columns:zp}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Rp=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.companyName=this.companyName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Rp||0===Rp.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.userDelete(Rp)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.companyName&&null!==n.companyName&&(n.companyName=n.companyName.trim()),t.companyName=n.companyName,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.angentCompanyverifyList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},userDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.angentCompanyverifyDel(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Rp="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.angentCompanyverifyList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Bp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"angentcompanyverify"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName"],expression:"['companyName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"公司名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":"#87d068"}},[e._v(e._s(1===t?"正常":"禁用"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var $p=n("VU/8")(Vp,Bp,!1,function(e){n("JxrV")},"data-v-04a945d2",null).exports;var Up={name:"storeSetting",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,tenantList:[],data:{id:null,picUrl:null,content:null}}},props:{passData:Object},created:function(){this.getInfo(-1)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$Http.shareSettingInfo({});case 2:(n=e.sent).sysShareSetting&&(t.data=n.sysShareSetting);case 4:case"end":return e.stop()}},e,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),console.log(e.file.response),this.data.picUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.picUrl=t.data.picUrl,e||t.editShare(n)})},editShare:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.shareSettingSave(e);case 2:0===n.sent.code&&t.$message.success("设置成功");case 4:case"end":return n.stop()}},n,t)}))()}}},Pp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"storeEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"分享图片","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"200px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)]),e._v(" "),n("span",[e._v("宽高 750px X 560px")])],1),e._v(" "),n("a-form-item",{attrs:{label:"分享寄语","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{message:"分享寄语!"}],initialValue:e.data.content}],expression:"['content', { rules: [{  message: '分享寄语!' }], initialValue: data.content}]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")])],1)],1)],1)},staticRenderFns:[]};var Fp=n("VU/8")(Up,Pp,!1,function(e){n("mroy")},"data-v-0acd5ab2",null).exports,Hp=[{title:"封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"套装名称",dataIndex:"suitName"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],jp="",qp={name:"book",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),importUrl:"https://api.xiaoerd.icu/book/importBook",downLoadUrl:"https://api.xiaoerd.icu/book/exportBook?token="+sessionStorage.getItem("token"),picUrl:"",data:[],downLoadBook:null,pagination:{total:0,current:1},visible:!1,bookName:null,bookNum:null,barcode:null,status:null,columns:Hp}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){jp=e}}}},methods:{exportBook:function(){var e=this;this.form.validateFields(function(t,n){if(void 0===n.bookName&&(n.bookName=""),void 0===n.bookNum&&(n.bookNum=""),void 0===n.barcode||null===n.barcode||""===n.barcode.trim())n.barcode="";else{var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}void 0===n.status&&(n.status=""),t||(e.downLoadBook="https://api.xiaoerd.icu/book/exportExcel?token="+sessionStorage.getItem("token")+"&bookName="+n.bookName+"&bookNum="+n.bookNum+"&barcode="+n.barcode+"&status="+n.status)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleChange:function(e){"done"===e.file.status&&this.tableData()},showModal:function(){""===jp||0===jp.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteBook(jp)},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.suitName&&null!==n.suitName&&(n.suitName=n.suitName.trim()),""===n.suitName&&(n.suitName=null),t.suitName=n.suitName,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.suitList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.totalAmount);case 4:case"end":return n.stop()}},n,t)}))()},deleteBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.suitDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),jp="");case 4:case"end":return n.stop()}},n,t)}))()},bookAdd:function(){this.bus.$emit("goToPage","suitAdd")},bookEdit:function(e){var t={id:e};this.bus.$emit("goToPage","suitEdit"),this.bus.$emit("passData",t)},bookUpper:function(){""===jp||0===jp.length?this.$message.error("至少选择一条数据"):this.upper(jp)},bookLower:function(){""===jp||0===jp.length?this.$message.error("至少选择一条数据"):this.lower(jp)},recommend:function(){""===jp||0===jp.length?this.$message.error("至少选择一条数据"):this.recommends(jp)},cancelRecommend:function(){""===jp||0===jp.length?this.$message.error("至少选择一条数据"):this.cancelRecommends(jp)},upper:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookUpper(e);case 2:0===n.sent.code&&(t.$message.success("上架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},recommends:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recommendSuit(e);case 2:0===n.sent.code&&(t.$message.success("推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},cancelRecommends:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelRecommendSuit(e);case 2:0===n.sent.code&&(t.$message.success("取消推荐成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},lower:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookLower(e);case 2:0===n.sent.code&&(t.$message.success("下架成功"),t.tableData());case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.suitList({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Wp={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["suitName"],expression:"['suitName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"套装名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.bookAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"up"},on:{click:e.recommend}},[e._v("推荐")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"down"},on:{click:e.cancelRecommend}},[e._v("取消推荐")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.bookEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Yp=n("VU/8")(qp,Wp,!1,function(e){n("IQsC")},"data-v-e009ea2a",null).exports;function Gp(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var Kp=[{title:"图书封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码（isbn）",dataIndex:"barcode"},{title:"库存",dataIndex:"stock"}],Qp=[{title:"条码（isbn）",dataIndex:"barcode"},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"}],Xp=[],Jp=[],Zp={name:"bookAdd",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/300x300?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,visibleBook:!1,fileList:[],previewVisible:!1,previewImage:"",replaceFields:{children:"children",title:"label",key:"id"},data:{picUrl:null,bookNum:null,bookName:null,author:null,price:null,pressName:null,recommend:0,status:1,stock:null,unit:1,bookPosition:null,describe:null},richTextData:null,onOff:!0,barcode:null,listOne:[],showList:[],tags:[],exit:!1,columnBook:Kp,columnSelected:Qp,bookList:[],selectedBook:[],selectedBookId:[],paginationBook:{total:0,current:1}}},created:function(){this.getTag()},computed:{rowSelections:function(){return{onChange:function(e,t){0!==t.length&&t.forEach(function(e){Xp.push(e)}),Jp=e}}}},methods:{editors:function(e){this.content=e},handleSubmitTwo:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){if(void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.bookNum&&null!==n.bookNum&&(n.bookNum=n.bookNum.trim()),t.bookNum=n.bookNum,null!==n.barcode&&void 0!==n.barcode&&""!==n.barcode.trim()){var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}t.barcode=n.barcode,n.stock=0,t.paginationBook.current=1,e||t.searchBook(n)})},handleBookChange:function(e,t,n){var r={};r.barcode=this.data.barcode,r.stock=0,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},showBookModal:function(){this.getBook()},handleOkTwo:function(){this.visibleBook=!1;var e=new Vt.a;Xp=Xp.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=[],n=0;Jp.forEach(function(e){Xp.forEach(function(r){e===r.id&&(n+=r.price,t.push(r))})}),this.data.totalAmount=n,this.selectedBook=t,this.selectedBookId=Jp},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={stock:0,barcode:e.barcode},t.next=3,e.$Http.bookList(n);case 3:0===(r=t.sent).code&&r.rows.length>0?(e.bookList=r.rows,e.paginationBook.total=r.total,e.visibleBook=!0):e.$message.error("暂时没有套装书");case 5:case"end":return t.stop()}},t,e)}))()},findBook:function(){this.loseBlur(this.data.barcode)},loseBlur:function(e){console.log(e.target.value),this.fileList=[],this.data.picUrl=null,this.data.bookNum=null,this.data.bookName=null,this.data.author=null,this.data.price=null,this.data.pressName=null,this.data.publishDate=null,this.richTextData="",this.data.describe=null,this.getBookByBarcode(e.target.value),this.getByBarcode(e.target.value)},getBookByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getBookByISBN({isbn:e});case 2:0===(r=n.sent).code?(t.data=r.book,t.data.barcode=e,t.richTextData=r.book.describe,t.fileList.push({uid:1,name:"image",status:"done",url:r.book.picUrl})):(t.richTextData="",t.data.barcode=e,t.data.bookName=null,t.data.author=null,t.data.price=null,t.data.publishDate=null,t.data.pressName=null,t.data.stock=null);case 4:case"end":return n.stop()}},n,t)}))()},getByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getByBarcode({barcode:e});case 2:0===(r=n.sent).code&&null!==r.book&&(t.exit=!0);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},handleOkOne:function(){this.exit=!1},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label,void 0!==t.children&&t.children.forEach(function(e){e.parentId=t.label,e.id=e.label})})}));case 4:case"end":return t.stop()}},t,e)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,Gp(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0,console.log(e.url);case 7:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t),console.log(this.fileList)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},selectChange:function(e){},changeRecommends:function(e){},changeStatus:function(e){},getContent:function(e){this.data.describe=e},addBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.suitAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","suit");case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(0!==t.fileList.length){var r=[];t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0],n.introduction=t.content,n.booksId=t.selectedBookId,n.tags=t.tags,e||t.addBook(n)}else t.$message.warn("图片不能为空")})},goToBack:function(){this.bus.$emit("goToPage","suit")}}},eh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"套装名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["suitName",{required:!0,rules:[{message:"请输入套装名称!"}]}],expression:"['suitName', { required: true,rules: [{ message: '请输入套装名称!' }]}]"}],attrs:{placeholder:"请输入套装名称",autocomplete:"off"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}],on:{change:e.changeRecommends}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModal}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{label:"套装书","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showBookModal}},[e._v("选择套装书")])],1),e._v(" "),0!==e.selectedBook.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.columnSelected,rowKey:"id",dataSource:e.selectedBook,pagination:!1}}):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"button"},on:{click:e.handleSubmit}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{title:"图书存在提示",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.exit,callback:function(t){e.exit=t},expression:"exit"}},[n("p",[e._v("该书已存在")])]),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",width:"600",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleBook,callback:function(t){e.visibleBook=t},expression:"visibleBook"}},[n("a-form",{attrs:{form:e.bookForm,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitTwo}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"180px"},attrs:{placeholder:"isbn"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelections,columns:e.columnBook,rowKey:"id",selectedRowKeys:e.selectedBookId,dataSource:e.bookList,scroll:{y:500},pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var th=n("VU/8")(Zp,eh,!1,function(e){n("URJE")},"data-v-4717777e",null).exports;function nh(e){return new pt.a(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})}var rh=[],ah=[],oh=[{title:"图书封面",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码（isbn）",dataIndex:"barcode"},{title:"库存",dataIndex:"stock"}],ih=[{title:"条码（isbn）",dataIndex:"barcode"},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"}],sh={name:"bookEdit",components:{RichText:xt},data:function(){return{editorSetting:{height:500},MaxSize:75765,Accept:"image/jpeg, image/png",withCredentials:!0,content:"",headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/300x300?token="+sessionStorage.token,editorUploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,visible:!1,fileList:[],previewVisible:!1,previewImage:"",selectedBookId:[],replaceFields:{children:"children",title:"label",key:"id"},data:{picUrl:null,recommend:null,status:null,describe:null,barcode:null,bookNum:null,bookName:null,pressName:null,unit:null,author:null,publishDate:null,stock:null,bookPosition:null,price:null},richTextData:"",onOff:!0,categoryList:[],listOne:[],visibleBook:!1,showList:[],tags:[],columnBook:oh,columnSelected:ih,bookData:rh,bookId:ah,bookList:[],selectedBook:[],paginationBook:{total:0,current:1},rowSelections:{onChange:this.onChange1,getCheckboxProps:function(e){return{props:{defaultChecked:!1}}}}}},props:{passData:Object},created:function(){this.getTag()},computed:{},methods:{editors:function(e){this.content=e},onChangeId:function(e,t){rh=[],ah=[],0!==t.length&&t.forEach(function(e){rh.push(e)}),ah=e},handleSubmitTwo:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){if(void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.bookNum&&null!==n.bookNum&&(n.bookNum=n.bookNum.trim()),t.bookNum=n.bookNum,null!==n.barcode&&void 0!==n.barcode&&""!==n.barcode.trim()){var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}t.barcode=n.barcode,n.stock=0,t.paginationBook.current=1,e||t.searchBook(n)})},handleBookChange:function(e,t,n){var r={};r.barcode=this.data.barcode,r.stock=0,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},showBookModal:function(){this.getBook()},handleOkTwo:function(){this.visibleBook=!1;var e=new Vt.a;rh=rh.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=new Vt.a,n=[],r=0;(ah=ah.filter(function(e){return!t.has(e)&&t.set(e,1)})).forEach(function(e){rh.forEach(function(t){e===t.id&&(r+=t.price,n.push(t))})}),this.data.totalAmount=r,this.selectedBook=n,this.selectedBookId=ah,console.log(this.selectedBook),console.log(this.selectedBookId)},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.visibleBook=!0,n={id:e.data.id,stock:0,barcode:e.data.barcode},t.next=4,e.$Http.bookList(n);case 4:0===(r=t.sent).code&&r.rows.length>0?(e.bookList=r.rows,e.paginationBook.total=r.total,e.rowSelections={onChange:e.onChangeId,getCheckboxProps:function(e){return{props:{defaultChecked:ah.includes(e.id)}}}},console.log(e.bookList)):e.$message.error("暂时没有套装书");case 6:case"end":return t.stop()}},t,e)}))()},loseBlur:function(e){console.log(e.target.value),this.fileList=[],this.data.picUrl=null,this.data.bookName=null,this.data.author=null,this.data.price=null,this.data.pressName=null,this.richTextData="",this.data.describe=null,this.getBookByBarcode(e.target.value)},getBookByBarcode:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getBookByISBN({isbn:e});case 2:0===(r=n.sent).code?(t.data.bookName=r.book.bookName,t.data.author=r.book.author,t.data.price=r.book.price,t.data.recommend=r.book.recommend,t.data.pressName=r.book.pressName,t.data.status=r.book.status,t.data.unit=r.book.unit,t.fileList=[],t.fileList.push({uid:1,name:"image",status:"done",url:r.book.picUrl})):(t.fileList=[],t.data.bookName=null,t.data.author=null,t.data.price=null,t.data.pressName=null,t.data.recommend=0,t.data.status=0);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){this.visible=!0},handleOk:function(){this.showList=[],this.visible=!1,this.showList=this.tags},onSelect:function(e,t){},onCheck:function(e,t){this.tags=e},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label,void 0!==t.children&&t.children.forEach(function(e){e.parentId=t.label,e.id=e.label})})}),e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.suitInfo({id:e});case 2:r=n.sent,t.data=r.bmsBookSuit,t.content=r.bmsBookSuit.introduction,t.data.describe=r.bmsBookSuit.introduction,t.tags=r.bmsBookSuit.tags,t.showList=t.tags,t.selectedBook=r.bmsBookSuit.suitList,t.selectedBookId=JSON.parse(r.bmsBookSuit.booksId),ah=JSON.parse(r.bmsBookSuit.booksId),rh=r.bmsBookSuit.suitList,r.bmsBookSuit.picUrls.forEach(function(e,n){t.fileList.push({uid:n,name:"image",status:"done",url:e})});case 13:case"end":return n.stop()}},n,t)}))()},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,nh(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t=e.fileList;this.onOff&&(this.fileList=t)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),this.onOff=t&&n,t&&n},selectChange:function(e){},changeRecommends:function(e){},changeStatus:function(e){},getContent:function(e){this.data.describe=e},updateBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.suitEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","suit");case 4:case"end":return n.stop()}},n,t)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},save:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.introduction=t.content,n.booksId=w()(t.selectedBookId);var r=[];0!==t.fileList.length?(t.fileList.forEach(function(e){void 0===e.response?r.push(e.url):r.push(e.response.url)}),n.picUrls=r,n.picUrl=r[0]):(n.picUrls=null,n.picUrl=null),n.tags=t.tags,e||t.updateBook(n)})},goToBack:function(){this.bus.$emit("goToPage","suit")}}},ch={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bookEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"封面","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",accept:"image/*",action:e.uploadUrl,fileList:e.fileList,beforeUpload:e.beforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<12?n("div",[n("a-icon",{attrs:{type:"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),n("a-form-item",{attrs:{label:"套装名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["suitName",{required:!0,rules:[{message:"请输入套装名称!"}],initialValue:e.data.suitName}],expression:"['suitName', { required: true,rules: [{ message: '请输入套装名称!' }], initialValue: data.suitName}]"}],attrs:{placeholder:"请输入套装名称",autocomplete:"off"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否推荐","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["recommend",{required:!0,initialValue:e.data.recommend}],expression:"['recommend', { required: true, initialValue: data.recommend}]"}],on:{change:e.changeRecommends}},[n("a-radio",{attrs:{value:1}},[e._v("是")]),e._v(" "),n("a-radio",{attrs:{value:0}},[e._v("否")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModal}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{staticClass:"editor",attrs:{value:e.content,setting:e.editorSetting,url:e.editorUploadUrl,"max-size":e.MaxSize,accept:e.Accept,"with-credentials":e.withCredentials},on:{show:e.editors}})],1),e._v(" "),n("a-form-item",{attrs:{label:"套装书","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showBookModal}},[e._v("选择套装书")])],1),e._v(" "),0!==e.selectedBook.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.columnSelected,rowKey:"id",dataSource:e.selectedBook,pagination:!1}}):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",destroyOnClose:!0,centered:"",width:"600",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkTwo},model:{value:e.visibleBook,callback:function(t){e.visibleBook=t},expression:"visibleBook"}},[n("a-form",{attrs:{form:e.bookForm,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitTwo}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"180px"},attrs:{placeholder:"isbn"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"180px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelections,rowKey:"id",pagination:e.paginationBook,columns:e.columnBook,dataSource:e.bookList},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var lh=n("VU/8")(sh,ch,!1,function(e){n("sxJU")},"data-v-355a79e4",null).exports,uh=[{title:"版本号",dataIndex:"versionCode"},{title:"版本名称",dataIndex:"versionName"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],dh="",fh={name:"index",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:uh,brandName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){dh=e}}}},methods:{formatDate:function(e){return m(e)},recommend:function(e,t){var n=this;return f()(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.brandEdit({id:e,isRecommend:t});case 2:0===r.sent.code&&(n.$message.success("删除成功"),n.tableData());case 4:case"end":return r.stop()}},r,n)}))()},dateformat:function(e){var t=Te()(e).format("yyyy-MM-dd");return console.log(t),t},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.brandList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(dh),""===dh||0===dh.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.versionDelete(dh)},brandEdit:function(e){var t={id:e};this.bus.$emit("goToPage","versionEdit"),this.bus.$emit("passData",t)},brandAdd:function(){this.bus.$emit("goToPage","versionAdd")},versionDelete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.versionDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),dh="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.versionList({});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},mh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.brandAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"isRecommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":0===t?"#87d068":"grey"}},[e._v(e._s(1===t?"推荐中":0===t?"未推荐":""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.brandEdit(r.id)}}},[e._v("修改")]),e._v(" "),1===r.isRecommend?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recommend(r.id,0)}}},[e._v("取消推荐")]):e._e(),e._v(" "),0===r.isRecommend?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recommend(r.id,1)}}},[e._v("推荐")]):e._e()])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var ph=n("VU/8")(fh,mh,!1,function(e){n("NHOf")},"data-v-816e6b04",null).exports,hh={name:"indexAdd",components:{ATextarea:nd.a},data:function(){return{headers:{authorization:"authorization-text"},uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadfile",loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,downloadUrl:null}}},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.data.downloadUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},versionAdd:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.versionAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","version");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.downloadUrl=t.data.downloadUrl,e||t.versionAdd(n)})},goToBack:function(){this.bus.$emit("goToPage","version")}}},vh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"版本号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["versionCode",{rules:[{required:!0,message:"请填写版本号!"}]}],expression:"['versionCode', { rules: [{ required: true, message: '请填写版本号!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"版本名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["versionName",{rules:[{required:!0,message:"请填写版本名称!"}]}],expression:"['versionName', { rules: [{ required: true, message: '请填写版本名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"APK","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,headers:e.headers},on:{change:e.handleChange}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),e._v(" 上传APK ")],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"描述","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请填写版本描述!"}]}],expression:"['content', { rules: [{ required: true, message: '请填写版本描述!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n          确定\n        ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1)],1)},staticRenderFns:[]};var gh=n("VU/8")(hh,vh,!1,function(e){n("rPOg")},"data-v-0ca9535c",null).exports,bh={name:"indexEdit",components:{ATextarea:nd.a},data:function(){return{headers:{authorization:"authorization-text"},uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadfile",loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},data:{title:null,content:null,menuIdList:[]},menuList:[],menuIdList:[],picUrl:null,imgUrl:null,downloadUrl:null,fileList:[]}},props:{passData:Object},created:function(){this.getVersionInfo(this.passData.id)},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.downloadUrl=e.file.response.url):this.loading=!0},getVersionInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.versionInfo({id:e});case 2:r=n.sent,t.data=r.sysAppVersion,null!==r.sysAppVersion.downloadUrl&&(t.fileList.push({uid:"-1",name:r.sysAppVersion.versionName,status:"done",url:r.sysAppVersion.downloadUrl}),t.downloadUrl=r.sysAppVersion.downloadUrl),t.menuIdList=r.data.menuIdList;case 6:case"end":return n.stop()}},n,t)}))()},versionEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.versionEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","version");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.menuIdList,n.downloadUrl=t.downloadUrl,e||t.versionEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","version")}}},yh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"版本号","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["versionCode",{rules:[{required:!0,message:"请填写版本号!"}],initialValue:e.data.versionCode}],expression:"['versionCode', { rules: [{ required: true, message: '请填写版本号!' }],initialValue: data.versionCode }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"版本名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["versionName",{rules:[{required:!0,message:"请填写版本名称!"}],initialValue:e.data.versionName}],expression:"['versionName', { rules: [{ required: true, message: '请填写版本名称!' }],initialValue: data.versionName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"APK","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,headers:e.headers,"default-file-list":e.fileList},on:{change:e.handleChange}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),e._v(" 上传APK ")],1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"版本描述","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请填写版本描述!"}],initialValue:e.data.content}],expression:"['content', { rules: [{ required: true, message: '请填写版本描述!' }],initialValue: data.content }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var wh=n("VU/8")(bh,yh,!1,function(e){n("MSp+")},"data-v-40306603",null).exports,xh=[{title:"订单编号",dataIndex:"orderNum"},{title:"昵称",dataIndex:"member.nickName"},{title:"姓名",dataIndex:"member.realName"},{title:"电话号码",dataIndex:"member.mobile"},{title:"订单类型",dataIndex:"orderType",scopedSlots:{customRender:"orderType"}},{title:"订单状态",dataIndex:"payScoreStatus",scopedSlots:{customRender:"payScoreStatus"}},{title:"押金",dataIndex:"deposit"},{title:"会员卡状态",dataIndex:"passDate",scopedSlots:{customRender:"passDate"}},{title:"金额",dataIndex:"totalAmount",customRender:function(e){return e.toFixed(2)}},{title:"下单时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"到期时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"操作",key:"operation",fixed:"right",width:180,scopedSlots:{customRender:"action"}}],kh=null,_h="",Sh={name:"cardOrder",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},downLoadOrder:null,orderNum:null,nickName:null,realName:null,mobile:null,orderStatus:2,orderType:3,visible:!1,visibleOne:!1,startTime:null,endTime:null,locale:Ke,columns:xh,changeOrderMoneyModel:!1,money:null,orderNo:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){kh=t,_h=e}}}},methods:{changeOrderMoney:function(e){this.changeOrderMoneyModel=!0,this.orderNo=e},changeOrderMoneyhandleOk:function(){this.changeOrderMoneyModel=!1,this.setChangeOrderMoney()},setChangeOrderMoney:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.refundPayscore({orderNo:e.orderNo,depositAmount:100*e.money});case 2:0===t.sent.code&&(e.$message.success("已完结"),e.discountedPrices=null,_h="",e.tableData());case 4:case"end":return t.stop()}},t,e)}))()},exportOrder:function(){var e=this;this.form.validateFields(function(t,n){void 0!==n.orderNum&&null!==n.orderNum&&""!==n.orderNum.trim()||(n.orderNum=""),void 0!==n.nickName&&null!==n.nickName&&""!==n.nickName.trim()||(n.nickName=""),void 0!==n.realName&&null!==n.realName&&""!==n.realName.trim()||(n.realName=""),void 0!==n.mobile&&null!==n.mobile&&""!==n.mobile.trim()||(n.mobile=""),n.orderStatus=e.orderStatus,null===n.orderStatus&&(n.orderStatus=-1),n.startTime=e.startTime,null===n.startTime&&(n.startTime=""),n.endTime=e.endTime,null===n.endTime&&(n.endTime=""),n.orderType=e.orderType,n.ids=_h,t||(e.downLoadOrder="https://api.xiaoerd.icu/order/exportExcel?token="+sessionStorage.getItem("token")+"&orderNum="+n.orderNum+"&nickName="+n.nickName+"&realName="+n.realName+"&mobile="+n.mobile+"&orderStatus="+n.orderStatus+"&startTime="+n.startTime+"&endTime="+n.endTime+"&orderType="+n.orderType+"&ids="+n.ids)})},dateChange:function(e,t){this.startTime=t[0],this.endTime=t[1]},cancelOrder:function(){if(null===kh||kh.length>1)this.$message.error("必须选择一条数据");else{if(1!==kh[0].orderStatus)return this.$message.error("当前订单不可以取消"),!1;this.cancel(kh[0].id)}},cancel:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.cancelPayscoreOrder({orderNo:e});case 2:0===(r=n.sent).code&&(t.$message.success("取消订单成功"),t.tableData(),kh=null),500===r.code&&(t.$message.success("不能取消"),t.tableData(),kh=null);case 5:case"end":return n.stop()}},n,t)}))()},showModal:function(){""===_h||0===_h.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},showModalOne:function(){if(null===kh||kh.length>1)this.$message.error("必须选择一条数据");else{if(7!==kh[0].orderStatus)return this.$message.error("当前订单不可以退款"),!1;this.visibleOne=!0}},handleOk:function(){this.visible=!1,this.deleteOrder(_h)},handleOkOne:function(){this.visibleOne=!1,this.refund(kh[0].orderNum)},deleteOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),_h="");case 4:case"end":return n.stop()}},n,t)}))()},refund:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),kh=null;case 2:case"end":return t.stop()}},n,t)}))()},handleTableChange:function(e,t,n){var r={};r.orderStatus=this.orderStatus,r.nickName=this.nickName,r.orderNum=this.orderNum,r.realName=this.realName,r.mobile=this.mobile,r.startTime=this.startTime,r.endTime=this.endTime,this.pagination.current=e.current,r.page=e.current,r.orderType=this.orderType,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.orderNum&&null!==n.orderNum&&(n.orderNum=n.orderNum.trim()),t.orderNum=n.orderNum,void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.realName&&null!==n.realName&&(n.realName=n.realName.trim()),t.realName=n.realName,void 0!==n.mobile&&null!==n.mobile&&(n.mobile=n.mobile.trim()),t.mobile=n.mobile,t.pagination.current=1,n.startTime=t.startTime,n.endTime=t.endTime,n.orderStatus=t.orderStatus,n.orderType=t.orderType,e||t.searchByConditions(n)})},callback:function(e){"99"===e?(this.orderStatus=null,this.tableData()):(this.orderStatus=e,this.searchByStatus(e))},formatDate:function(e){return m(e)},searchByStatus:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList({orderStatus:e,orderType:t.orderType});case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total,t.pagination.current=1);case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},orderDetail:function(e){var t={orderNum:e};this.bus.$emit("goToPage","payScoreDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.payscoreList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total,e.pagination.current=1);case 4:case"end":return t.stop()}},t,e)}))()}}},Ch={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cardOrder"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"订单编号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"昵称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"姓名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mobile"],expression:"['mobile']"}],staticStyle:{width:"200px"},attrs:{placeholder:"手机号",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-range-picker",{attrs:{locale:e.locale},on:{change:e.dateChange}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"export"},on:{click:e.exportOrder}},[n("a",{staticStyle:{color:"#ffffff"},attrs:{href:e.downLoadOrder}},[e._v(" 导出")])])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-modal",{attrs:{title:"退款确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("p",[e._v("确定进行退款操作？")])]),e._v(" "),n("a-modal",{attrs:{title:"设置订单价格",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.changeOrderMoneyhandleOk},model:{value:e.changeOrderMoneyModel,callback:function(t){e.changeOrderMoneyModel=t},expression:"changeOrderMoneyModel"}},[n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"订单价格"},model:{value:e.money,callback:function(t){e.money=t},expression:"money"}})],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"payScoreStatus",fn:function(t){return n("a-tag",{attrs:{color:"CREATED"===t?"#f50":"DOING"===t?"#87d068":"DONE"===t?"#108ee9":"REVOKED"===t?"#2db7f5":"EXPIRED"===t?"#2db7f5":""}},[e._v(e._s("CREATED"===t?"未进行":"DOING"===t?"进行中":"DONE"===t?"已完结":"REVOKED"===t?"已取消":"EXPIRED"===t?"已失效":""))])}},{key:"orderType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":3===t?"#87d068":4===t?"#2db7f5":5===t?"#2db7f5":""}},[e._v(e._s(1===t?"商品":2===t?"充值":3===t?"会员卡":4===t?"图书":5===t?"活动":""))])}},{key:"passDate",fn:function(t){return n("span",{},[e._v(e._s(1===t?"已到期":0===t?"":"使用中"))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(null!==t?e.formatDate(t):""))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.orderDetail(r.orderNum)}}},[e._v("详情")]),e._v(" "),"DOING"===r.payScoreStatus?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.cancel(r.orderNum)}}},[e._v("取消")]):e._e(),e._v(" "),"DOING"===r.payScoreStatus?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.changeOrderMoney(r.orderNum)}}},[e._v("完结")]):e._e()])}}])})],1)},staticRenderFns:[]};var Nh=n("VU/8")(Sh,Ch,!1,function(e){n("j1hc")},"data-v-1b2af0b0",null).exports,Th=[{title:"商品图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"图书编码",dataIndex:"bookNum"},{title:"购买数量",dataIndex:"buyNum"},{title:"价格",dataIndex:"price"}],Dh=[{title:"图书图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",dataIndex:"bookName"},{title:"图书编码",dataIndex:"bookNum"},{title:"借阅数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}},{title:"价格",dataIndex:"price"}],Ih=[{title:"序号",customRender:function(e,t,n){return""+(n+1)}},{title:"馆内编码",dataIndex:"bookNum"},{title:"图书名称",dataIndex:"bookName"},{title:"条码",dataIndex:"barcode"},{title:"单位",dataIndex:"unit",scopedSlots:{customRender:"unit"}},{title:"借阅数量",dataIndex:"borrowNum",scopedSlots:{customRender:"borrowNum"}}],Mh=[{title:"城市",dataIndex:"city"},{title:"描述",dataIndex:"description"},{title:"部门",dataIndex:"site"},{title:"时间",dataIndex:"time",scopedSlots:{customRender:"time"}}],Oh={name:"orderDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),permissions:localStorage.permissions,judge:!1,judgeOne:!1,judgeTwo:!1,visibleWay:!1,visiblePrint:!1,timer:null,times:null,list:[],order:{orderShipment:null,orderLogistics:null,evaluation:null,orderNum:null,totalAmount:null,orderStatus:null,orderType:null,distributionType:null,createTime:null,orderGoodsList:[],orderBookList:[],remark:null},jsonMap:{mailNo:null,arrivedOrgSimpleName:null,districtName:null,caddress:null,cprovince:null,ccity:null,conPhone:null,conName:null,shipperName:null,shipperPhone:null,orderNum:null,orderName:null,remark:null},logisticsName:null,logisticsNum:null,visible:!1,visibleOne:!1,columns:Th,bookColumns:Dh,printColumns:Ih,columnsOne:Mh}},props:{passData:Object},created:function(){this.getInfo(this.passData.orderNum)},methods:{confirm:function(){var e={};e.id=this.passData.id,e.orderNum=this.order.orderNum,e.orderType=this.order.orderType,1===this.order.distributionType?e.orderStatus=3:e.orderStatus=2,this.editOrder(e)},editOrder:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.orderEdit(e);case 2:0===n.sent.code&&(t.$message.success("确认订单成功"),t.judgeTwo=!1,t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},changeWay:function(e){this.visibleWay="快递单号"===e},showReturn:function(){this.visibleOne=!0},handleOkOne:function(){this.visibleOne=!1,this.returnBook(this.passData.id),this.judgeOne=!1},showModal:function(){2===this.order.orderStatus&&4===this.order.orderType?this.visible=!0:this.$message.warn("无法发货")},showPrint:function(){this.visiblePrint=!0,this.timer=setTimeout(window.print,100),this.times=setTimeout(this.closePrint,500)},closePrint:function(){this.visiblePrint=!1},printMail:function(){window.open(window.encodeURI("http://apiprint.xiaoerd.icu?mailMap="+this.jsonMap),"_blank")},formatDate:function(e){return m(e)},returnBook:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.returnBook({orderId:e});case 2:0===n.sent.code&&(t.$message.success("还书成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.payScoreInfo({orderNo:e});case 2:r=n.sent,console.log(r.data),t.order=r.data;case 5:case"end":return n.stop()}},n,t)}))()},getSimpleInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.mailSimpleInfo({mailNo:e});case 2:0===(r=n.sent).code&&(t.list=r.list);case 4:case"end":return n.stop()}},n,t)}))()},handleOk:function(){var e=this;this.visible=!1,this.form.validateFields(function(t,n){n.orderId=e.passData.id,void 0!==n.logisticsName&&""!==n.logisticsName?"快递单号"!==n.logisticsName||void 0!==n.courierNum&&""!==n.courierNum?t||("德邦"===n.logisticsName?(console.log(n),e.productNums(e.passData.id,n)):(e.sendGoods(n),e.judge=!1)):e.$message.warn("请填写物流单号"):e.$message.warn("请选择物流公司")})},productNums:function(e,t){var n=this;return f()(u.a.mark(function r(){var a;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$Http.productNums({id:e});case 2:0===(a=r.sent).code?"true"===a.productNums.result?(t.courierNum=a.productNums.mailNo,t.arrivedOrgSimpleName=a.productNums.arrivedOrgSimpleName,n.sendGoods(t),n.judge=!1,window.open(window.encodeURI("http://apiprint.xiaoerd.icu?mailMap="+a.mailMap),"_blank")):n.$message.warn("发货失败"):n.$message.warn("服务异常");case 4:case"end":return r.stop()}},r,n)}))()},handlePrint:function(){this.visiblePrint=!1},sendGoods:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.sendGoods(e);case 2:0===n.sent.code&&(t.$message.success("发货成功"),t.getInfo(t.passData.id));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","payscoreOrder")}}},Ah={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"orderDetail"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")]),e._v(" "),n("div",{staticClass:"d1"},[n("h2",{staticClass:"mytitle"},[e._v("订单信息")]),e._v(" "),n("a-row",{attrs:{type:"flex"}},[n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单编号: "+e._s(e.order.out_order_no))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("服务信息: "+e._s(e.order.service_introduction))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("付费项目: "+e._s(e.order.post_payments.length>0?e.order.post_payments[0].name:""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("项目金额: "+e._s(e.order.post_payments.length>0?e.order.post_payments[0].amount:""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("风险金名称: "+e._s(e.order.risk_fund.name))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("风险金金额: "+e._s(e.order.risk_fund.amount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("商户收款金额: "+e._s(e.order.total_amount))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("订单状态: "+e._s("DONE"===e.order.state?"已完成":"CREATED"===e.order.state?"已创建":"DOING"===e.order.state?"进行中":"REVOKED"===e.order.state?"已取消":"EXPIRED"===e.order.state?"订单已失效":""))]),e._v(" "),n("a-col",{staticClass:"one mycell",attrs:{span:8}},[e._v("下单时间: "+e._s(e.order.time_range.start_time.replace(/^(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})$/,"$1-$2-$3 $4:$5:$6")))])],1)],1)],1)},staticRenderFns:[]};var Lh=n("VU/8")(Oh,Ah,!1,function(e){n("SE6Q")},"data-v-52395df4",null).exports,Eh=[{title:"图片",dataIndex:"book.picUrl",scopedSlots:{customRender:"picUrl"}},{title:"书名",dataIndex:"book.bookName"},{title:"馆内编码",dataIndex:"book.bookNum"},{title:"条码",dataIndex:"book.barcode"},{title:"标签",dataIndex:"label"},{title:"序号",dataIndex:"sort"},{title:"操作时间",dataIndex:"updateTime",scopedSlots:{customRender:"updateTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],zh="",Rh={name:"recommendList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],bookName:null,bookNum:null,barcode:null,columns:Eh}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){zh=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===zh||0===zh.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(zh)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.bookNum&&null!==n.bookNum&&(n.bookNum=n.bookNum.trim()),t.bookNum=n.bookNum,null!==n.barcode&&void 0!==n.barcode&&""!==n.barcode.trim()){var r=new RegExp("-","g");n.barcode=n.barcode.replace(r,"").trim()}t.barcode=n.barcode,t.pagination.current=1,e||t.searchByConditions(n)})},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recommendDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),zh="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recommendList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},recommendAdd:function(){this.bus.$emit("goToPage","bookRecommendAdd")},recommendEdit:function(e){var t={id:e};this.bus.$emit("goToPage","bookRecommendEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.recommendList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Vh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recommendList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"馆内编码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"条码",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.recommendAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"updateTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recommendEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Bh=n("VU/8")(Rh,Vh,!1,function(e){n("itOa")},"data-v-5326b7be",null).exports,$h=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"图书名称",width:"25%",dataIndex:"bookName"},{title:"馆内编码",dataIndex:"bookNum"},{title:"条码",dataIndex:"barcode"}],Uh=[],Ph={name:"recommendAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),bookForm:this.$form.createForm(this,{name:"coordinated"}),data:{},bookList:[],listChoice:[],tagList:[],paginationBook:{total:0,current:1},columnBook:$h,bookVisible:!1}},created:function(){this.getBookList(),this.getTagList()},computed:{rowSelectionBooks:function(){return{onChange:function(e,t){var n=Uh;t.forEach(function(e){n.push({id:e.id,bookName:e.bookName,sort:null})}),Uh=n;var r=new Vt.a,a=[];(Uh=Uh.filter(function(e){return!r.has(e.id)&&r.set(e.id,1)})).forEach(function(t){e.forEach(function(e){t.id===e&&a.push(t)})}),Uh=a}}}},methods:{handleChange:function(e){},removeData:function(e){this.listChoice.splice(e,1)},showModel:function(){this.bookVisible=!0},handleOkBook:function(){this.bookVisible=!1,this.listChoice=Uh},getTagList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getRecommendTag();case 2:0===(n=t.sent).code&&(e.tagList=n.list,console.log("tagList",e.tagList));case 4:case"end":return t.stop()}},t,e)}))()},getBookList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookList=n.rows,e.paginationBook.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleSubmitBook:function(e){var t=this;e.preventDefault(),this.bookForm.validateFields(function(e,n){t.bookName=n.bookName,t.bookNum=n.bookNum,t.barcode=n.barcode,t.paginationBook.current=1,e||t.searchBook(n)})},handleBookChange:function(e,t,n){var r={};r.bookName=this.bookName,r.bookNum=this.bookNum,r.barcode=this.barcode,this.paginationBook.current=e.current,r.page=e.current,this.searchBook(r)},searchBook:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookList=r.rows,t.paginationBook.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(void 0!==n.book){var r=!1;if(n.book.forEach(function(e){null===e.sort&&(r=!0)}),r)t.$message.warn("请填入排序");else if(void 0!==n.label){var a=[],o=[];n.book.forEach(function(e){a.push(e.bookId),o.push(e.sort)}),n.bookIds=a,n.sorts=o,n.book=null,console.log("value",n),e||t.add(n)}else t.$message.warn("推荐分类不能为空")}else t.$message.warn("请选择图书")})},add:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addBookRecommend(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","bookRecommend");case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","bookRecommend")}}},Fh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recommendAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"选择图书","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-button",{staticStyle:{width:"300px"},attrs:{type:"primary"},on:{click:e.showModel}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",e._l(e.listChoice,function(t,r){return n("a-row",{key:r,attrs:{gutter:24}},[n("a-col",{attrs:{span:3}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["book["+r+"].bookId",{initialValue:t.id}],expression:"['book['+index+'].bookId', {initialValue: item.id}]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-col",{attrs:{span:10}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["book["+r+"].bookName",{initialValue:t.bookName}],expression:"['book['+index+'].bookName', {initialValue: item.bookName}]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-col",{attrs:{span:3}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["book["+r+"].sort",{initialValue:t.sort}],expression:"['book['+index+'].sort', {initialValue: item.sort }]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-button",{on:{click:function(t){return e.removeData(r)}}},[n("a-icon",{attrs:{type:"minus"}})],1)],1)}),1),e._v(" "),n("a-form-item",{attrs:{label:"选择分类","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["label"],expression:"['label']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择分类"},on:{change:e.handleChange}},e._l(e.tagList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.label}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"书籍",width:"800px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkBook},model:{value:e.bookVisible,callback:function(t){e.bookVisible=t},expression:"bookVisible"}},[n("a-form",{attrs:{form:e.bookForm,layout:"vertical"},on:{submit:e.handleSubmitBook}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNum"],expression:"['bookNum']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书编码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["barcode"],expression:"['barcode']"}],staticStyle:{width:"200px"},attrs:{placeholder:"isbn码"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionBooks,columns:e.columnBook,rowKey:"id",dataSource:e.bookList,pagination:e.paginationBook},on:{change:e.handleBookChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"20px"}})}}])})],1)],1)},staticRenderFns:[]};var Hh=n("VU/8")(Ph,Fh,!1,function(e){n("Y9I6")},"data-v-dfad3b04",null).exports,jh={name:"recommendEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{book:{picUrl:null},bookId:null,label:null,sort:null},tagList:[]}},props:{passData:Object},created:function(){this.getTagList()},methods:{getTagList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getRecommendTag();case 2:0===(n=t.sent).code&&(e.tagList=n.list,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookRecommendInfo({id:e});case 2:r=n.sent,t.data=r.bookRecommend;case 4:case"end":return n.stop()}},n,t)}))()},selectChange:function(e){},editBookRecommend:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookRecommendEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","bookRecommend");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){""!==n.label?""!==n.sort?(n.id=t.passData.id,e||t.editBookRecommend(n)):t.$message.warn("排序不能为空"):t.$message.warn("标签名不能为空")})},goToBack:function(){this.bus.$emit("goToPage","bookRecommend")}}},qh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recommendEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图书","label-col":{span:2},"wrapper-col":{span:16}}},[n("img",{attrs:{src:e.data.book.picUrl,width:"263px"}})]),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:10}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,rules:[{message:"属性名!"}],initialValue:e.data.book.bookName}],expression:"['bookName', { required: true,rules: [{ message: '属性名!' }],initialValue: data.book.bookName }]"}],attrs:{readOnly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"重选分类","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["label",{initialValue:e.data.label}],expression:"['label',{initialValue: data.label}]"}],staticStyle:{width:"300px"},on:{change:e.selectChange}},e._l(e.tagList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.label}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:4}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,initialValue:e.data.sort}],expression:"['sort', { required: true,initialValue: data.sort }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Wh=n("VU/8")(jh,qh,!1,function(e){n("oz0K")},"data-v-f24b1bcc",null).exports,Yh=[{title:"活动名称",dataIndex:"actName"},{title:"是否限购",dataIndex:"isLimit",scopedSlots:{customRender:"isLimit"}},{title:"订单取消时间",dataIndex:"canalTime"},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Gh="",Kh={name:"omsCourse",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Yh,courseName:null,selectList:[],omsDataType:null,typeId:null,actName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Gh=e}}}},methods:{formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.seckillList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Gh),""===Gh||0===Gh.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delSeckill(Gh)},couponEdit:function(e){var t={id:e};this.bus.$emit("goToPage","seckillEdit"),this.bus.$emit("passData",t)},couponDetail:function(e){var t={id:e};this.bus.$emit("goToPage","seckillDetail"),this.bus.$emit("passData",t)},seckillAdd:function(){this.bus.$emit("goToPage","seckillAdd")},delSeckill:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.delSeckill(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Gh="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.seckillList({actName:e.actName});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Qh={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"活动名称"},model:{value:e.actName,callback:function(t){e.actName=t},expression:"actName"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.seckillAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"isLimit",fn:function(t){return n("a-tag",{attrs:{color:0===t?"#108ee9":"#f50"}},[e._v(e._s("0"===t?"不限购":"限购"))])}},{key:"startTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[r.startTime>=(new Date).valueOf()||r.endTime<=(new Date).valueOf()?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.couponEdit(r.id)}}},[e._v("修改")]):e._e(),e._v(" "),r.startTime<=(new Date).valueOf()&&r.endTime>=(new Date).valueOf()?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.couponDetail(r.id)}}},[e._v("详情")]):e._e()])}}])})],1)},staticRenderFns:[]};var Xh=n("VU/8")(Kh,Qh,!1,function(e){n("7koX")},"data-v-56523747",null).exports,Jh=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t};var Zh=[],ev=[],tv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],nv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"规格",dataIndex:"spec"},{title:"秒杀数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"秒杀价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],rv={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'秒杀数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' || 0 }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null},pagination:{total:0,current:1},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:tv,goodsSelect:nv,selectedGoods:[],categoryList:[],brandList:[],edit:!0}},created:function(){this.getSeckillInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){Zh.push(e)}),ev=e}}}},props:{passData:Object},methods:{showTime:function(){this.endValue.valueOf()>new Date(new Date(new Date(this.startValue.valueOf()).toLocaleDateString()).getTime()+864e5-1)&&(this.$message.error("只能选择开始时间当天时间"),this.endValue="")},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){var e=this;this.selectedGoods=[],this.goodsModel=!1;var t=new Vt.a;(Zh=Zh.filter(function(e){return!t.has(e.specId)&&t.set(e.specId,1)})).forEach(function(t){ev.forEach(function(n){t.specId===n&&e.selectedGoods.push(t)})}),this.selectedGoodsId=ev},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getSeckillInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getSeckillInfo({id:e});case 2:r=n.sent,t.data=r.seckillInfo,t.selectedGoods=t.data.goodsList,t.selectedGoods.forEach(function(e){e.nums=e.seckillNums+"",e.price=e.seckillPrice,e.spec=e.spec}),t.startValue=Te()(new Date(t.data.startTime)),t.endValue=Te()(new Date(t.data.endTime)),a=(new Date).valueOf(),o=new Date(t.data.startTime).valueOf(),i=new Date(t.data.endTime).valueOf(),a>o&&a<i&&(t.edit=!1);case 12:case"end":return n.stop()}},n,t)}))()},seckillEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.seckillEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","seckill");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.data.menuIdList,n.startTime=Jh(t.startValue),n.endTime=Jh(t.endValue);var r=[];t.selectedGoods.every(function(e){if(void 0===e.nums||null===e.nums||void 0===e.price||null===e.price)return t.$message.error("请填写秒杀数量和价格"),!1}),t.selectedGoods.forEach(function(e){r.push({goodsId:e.id,nums:Number(e.nums),specId:Number(e.specId),price:Number(e.price)})}),n.seckillGoods=r,e||t.seckillEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","seckill")}}},av={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["actName",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.actName}],expression:"['actName', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.actName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,2759432488)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"订单取消时间(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["canalTime",{rules:[{required:!0,message:"请填写订单取消时间!"}],initialValue:e.data.canalTime}],expression:"['canalTime', { rules: [{ required: true, message: '请填写订单取消时间!' }], initialValue: data.canalTime }]"}],staticStyle:{width:"100px"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.showTime},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}],initialValue:Number(e.data.isLimit)}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }], initialValue: Number(data.isLimit) }]"}]},[n("a-radio",{attrs:{value:0}},[e._v("\n          不限购\n        ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n          限购\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[e.edit?n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]):e._e(),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{align:"center",rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1)],1)},staticRenderFns:[]};var ov=n("VU/8")(rv,av,!1,function(e){n("aLAq")},"data-v-1f9e4d96",null).exports,iv=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t};var sv=[],cv=[],lv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],uv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"规格",dataIndex:"spec"},{title:"秒杀数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"秒杀价格",dataIndex:"price",scopedSlots:{customRender:"price"}}],dv={name:"seckillDetail",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'秒杀数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' || 0 }}\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null},pagination:{total:0,current:1},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:lv,goodsSelect:uv,selectedGoods:[],categoryList:[],brandList:[],edit:!0}},created:function(){this.getSeckillInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){sv.push(e)}),cv=e}}}},props:{passData:Object},methods:{showTime:function(){this.endValue.valueOf()>new Date(new Date(new Date(this.startValue.valueOf()).toLocaleDateString()).getTime()+864e5-1)&&(this.$message.error("只能选择开始时间当天时间"),this.endValue="")},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){var e=this;this.selectedGoods=[],this.goodsModel=!1;var t=new Vt.a;(sv=sv.filter(function(e){return!t.has(e.specId)&&t.set(e.specId,1)})).forEach(function(t){cv.forEach(function(n){t.specId===n&&e.selectedGoods.push(t)})}),this.selectedGoodsId=cv},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getSeckillInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.getSeckillInfo({id:e});case 2:r=n.sent,t.data=r.seckillInfo,t.selectedGoods=t.data.goodsList,t.selectedGoods.forEach(function(e){e.nums=e.seckillNums+"",e.price=e.seckillPrice,e.spec=e.spec}),t.startValue=Te()(new Date(t.data.startTime)),t.endValue=Te()(new Date(t.data.endTime)),a=(new Date).valueOf(),o=new Date(t.data.startTime).valueOf(),i=new Date(t.data.endTime).valueOf(),a>o&&a<i&&(t.edit=!1);case 12:case"end":return n.stop()}},n,t)}))()},seckillEdit:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.seckillEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","seckill");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.data.menuIdList,n.startTime=iv(t.startValue),n.endTime=iv(t.endValue);var r=[];t.selectedGoods.every(function(e){if(void 0===e.nums||null===e.nums||void 0===e.price||null===e.price)return t.$message.error("请填写秒杀数量和价格"),!1}),t.selectedGoods.forEach(function(e){r.push({goodsId:e.id,nums:Number(e.nums),specId:Number(e.specId),price:Number(e.price)})}),n.seckillGoods=r,e||t.seckillEdit(n)})},goToBack:function(){this.bus.$emit("goToPage","seckill")}}},fv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seckillDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["actName",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.actName}],expression:"['actName', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.actName }]"}],attrs:{readonly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}}),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}}],null,!1,3510666880)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"订单取消时间(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["canalTime",{rules:[{required:!0,message:"请填写订单取消时间!"}],initialValue:e.data.canalTime}],expression:"['canalTime', { rules: [{ required: true, message: '请填写订单取消时间!' }], initialValue: data.canalTime }]"}],staticStyle:{width:"100px"},attrs:{readonly:""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{disabled:"","disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n        -\n        "),n("a-date-picker",{attrs:{disabled:"","disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.showTime},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}],initialValue:Number(e.data.isLimit)}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }], initialValue: Number(data.isLimit) }]"}],attrs:{disabled:""}},[n("a-radio",{attrs:{value:0}},[e._v("\n            不限购\n          ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n            限购\n          ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{align:"center",rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1)],1)},staticRenderFns:[]};var mv=n("VU/8")(dv,fv,!1,function(e){n("oRqg")},"data-v-1223bf8c",null).exports,pv=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t};var hv=[],vv=[],gv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],bv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"规格",dataIndex:"spec"},{title:"秒杀数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"秒杀价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],yv={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'秒杀数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},priceCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'秒杀价格!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' || 0 }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{goodsId:vv,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],selectedGoodsId:[],goodsList:[],columns:gv,goodsSelect:bv,goodsModel:!1,selectedGoods:[],categoryList:[],brandList:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){hv.push(e)}),vv=e}}}},methods:{showTime:function(){this.endValue.valueOf()>new Date(new Date(new Date(this.startValue.valueOf()).toLocaleDateString()).getTime()+864e5-1)&&(this.$message.error("只能选择开始时间当天时间"),this.endValue="")},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){var e=this;this.selectedGoods=[],this.goodsModel=!1;var t=new Vt.a;(hv=hv.filter(function(e){return!t.has(e.specId)&&t.set(e.specId,1)})).forEach(function(t){vv.forEach(function(n){t.specId===n&&e.selectedGoods.push(t)})}),this.selectedGoodsId=vv},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total,console.log(e.pagination));case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addCoupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addSeckill(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","seckill");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.startTime=pv(t.startValue),n.endTime=pv(t.endValue);var r=[];t.selectedGoods.every(function(e){if(void 0===e.nums||null===e.nums||void 0===e.price||null===e.price)return t.$message.error("请填写秒杀数量和价格"),!1}),t.selectedGoods.forEach(function(e){r.push({goodsId:e.id,nums:Number(e.nums),specId:Number(e.specId),price:Number(e.price)})}),n.seckillGoods=r,e||t.addCoupon(n)})},goToBack:function(){this.bus.$emit("goToPage","seckill")}}},wv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["actName",{rules:[{required:!0,message:"请填写活动名称!"}]}],expression:"['actName', { rules: [{ required: true, message: '请填写活动名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,2759432488)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"订单取消时间(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["canalTime",{rules:[{required:!0,message:"请填写订单取消时间!"}]}],expression:"['canalTime', { rules: [{ required: true, message: '请填写订单取消时间!' }] }]"}],staticStyle:{width:"100px"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.showTime},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}]}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }] }]"}]},[n("a-radio",{attrs:{value:0}},[e._v("\n          不限购\n        ")]),e._v(" "),n("a-radio",{attrs:{value:1}},[e._v("\n          限购\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var xv=n("VU/8")(yv,wv,!1,function(e){n("ieK+")},"data-v-a9f58880",null).exports,kv=[{title:"拼团名称",dataIndex:"grouponName"},{title:"是否限购",dataIndex:"isLimit",scopedSlots:{customRender:"isLimit"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"成团订单数",dataIndex:"groupOrders"},{title:"成团人数",dataIndex:"groupNumbers"},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],_v="",Sv={name:"groupon",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:kv,status:null,type:null,grouponName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){_v=e}}}},methods:{formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};r.grouponName=this.groupName,r.status=this.status,r.type=this.type,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.grouponName&&null!==n.grouponName&&(n.grouponName=n.grouponName.trim()),t.grouponName=n.grouponName,0===n.status&&(n.status=null),0===n.type&&(n.type=null),t.status=n.status,t.type=n.type,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(_v),""===_v||0===_v.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteGroupon(_v)},grouponEdit:function(e){if(1===e.status){var t={id:e.id};this.bus.$emit("goToPage","grouponEdit"),this.bus.$emit("passData",t)}else this.$message.warn("当前状态下拼团信息不能修改")},grouponDetail:function(e){var t={id:e.id};this.bus.$emit("goToPage","grouponDetail"),this.bus.$emit("passData",t)},grouponAdd:function(){this.bus.$emit("goToPage","grouponAdd")},deleteGroupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),_v="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.grouponList({grouponName:e.grouponName});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Cv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"groupon"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["grouponName"],expression:"['grouponName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"团购名称"}})],1),e._v(" "),n("a-form-item",[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("未开始")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("进行中")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("已结束")])],1)],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type"],expression:"['type']"}],staticStyle:{width:"200px"},attrs:{placeholder:"类型"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("普通拼团")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("新客拼团")])],1)],1),e._v(" "),n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.grouponAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"isLimit",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#f50":"#108ee9"}},[e._v(e._s(1===t?"限购":"不限购"))])}},{key:"type",fn:function(t){return n("span",{},[e._v(e._s(1===t?"普通拼团":2===t?"新客拼团":""))])}},{key:"status",fn:function(t){return n("span",{},[e._v(e._s(1===t?"未开始":2===t?"进行中":3===t?"已结束":""))])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.grouponEdit(r)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.grouponDetail(r)}}},[e._v("详情")])],1)}}])})],1)},staticRenderFns:[]};var Nv=n("VU/8")(Sv,Cv,!1,function(e){n("M/ek")},"data-v-0a179d83",null).exports,Tv=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t},Dv=[],Iv=[],Mv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Ov=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"拼团数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"拼团价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Av={name:"grouponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'优惠券数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}},priceCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'优惠券数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){console.log("e",e),console.log("value",e.target.value);var t=e.target.value;this.value=t},check:function(){console.log("11111111111"),this.editable=!1,this.$emit("change",this.value)},edit:function(){console.log("22222222222"),this.editable=!0}}}},data:function(){return{goodsId:Iv,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},data:{menuIdList:[]},selectedGoodsId:[],goodsList:[],columns:Mv,goodsSelect:Ov,goodsModel:!1,selectedGoods:[],categoryList:[],brandList:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){Dv.push(e)}),Iv=e}}}},methods:{changeStatus:function(e){},showTime:function(){console.log(this.endValue)},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e}),Dv=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,n.status=1,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){this.selectedGoods=[],this.goodsModel=!1;var e=new Vt.a;Dv=(Dv=Dv.filter(function(t){return!e.has(t.specId)&&e.set(t.specId,1)})).filter(function(e){return void 0!==e.specId}),this.selectedGoods=Dv,this.selectedGoodsId=Iv},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({status:1});case 2:0===(n=t.sent).code&&(console.log("数据",n.rows),e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addGroupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponAdd(e);case 2:0===n.sent.code&&(Dv=[],t.bus.$emit("goToPage","groupon"));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=Tv(t.startValue),n.endTime=Tv(t.endValue);var r=[],a=!1;console.log(t.selectedGoods),t.selectedGoods.forEach(function(e){(isNaN(e.nums)||isNaN(e.price))&&(a=!0),r.push({goodsId:e.id,nums:Number(e.nums),specId:Number(e.specId),grouponPrice:Number(e.price)})}),0!==r.length?a?t.$message.warn("拼团数量和价格不能为空"):""!==n.beginTime&&""!==n.endTime?(n.grouponGoodsList=r,console.log("values",n),e||t.addGroupon(n)):t.$message.warn("活动时间不能为空"):t.$message.warn("请选择拼团商品")})},goToBack:function(){Dv=[],this.bus.$emit("goToPage","groupon")}}},Lv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grouponAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["grouponName",{rules:[{required:!0,message:"请填写活动名称!"}]}],expression:"['grouponName', { rules: [{ required: true, message: '请填写活动名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"拼团类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"拼团类型!"}]}],expression:"['type', { rules: [{ required: true, message: '拼团类型!' }]}]"}],on:{change:e.changeStatus}},[n("a-radio",{attrs:{value:1}},[e._v("普通拼团")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("新客拼团")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"index",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,2759432488)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"拼团有效期(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expires",{rules:[{required:!0,message:"请填写拼团有效期(分钟)!"}]}],expression:"['expires', { rules: [{ required: true, message: '请填写拼团有效期(分钟)!' }] }]"}],staticStyle:{width:"200px"},attrs:{min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"参团人数","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["peopleNumber",{rules:[{required:!0,message:"请填写参团人数!"}]}],expression:"['peopleNumber', { rules: [{ required: true, message: '请填写参团人数!' }] }]"}],staticStyle:{width:"200px"},attrs:{min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}]}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }] }]"}]},[n("a-radio",{attrs:{value:1}},[e._v("\n          限购\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          不限购\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.showTime},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var Ev=n("VU/8")(Av,Lv,!1,function(e){n("A429")},"data-v-75320fca",null).exports,zv=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t},Rv=[],Vv=[],Bv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],$v=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"拼团数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"拼团价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Uv={name:"grouponEdit",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),menuList:[],richTextData:null,data:{grouponName:null,type:null,expires:null,peopleNumber:null,isLimit:null,beginTime:null,endTime:null,menuIdList:[]},pagination:{total:0,current:1},manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:Bv,goodsSelect:$v,selectedGoods:[],categoryList:[],brandList:[]}},created:function(){this.getGrouponInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){Rv.push(e)}),Vv=e}}}},props:{passData:Object},methods:{brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e}),Rv=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,n.status=1,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){this.selectedGoods=[],this.goodsModel=!1;var e=new Vt.a;Rv=(Rv=Rv.filter(function(t){return!e.has(t.specId)&&e.set(t.specId,1)})).filter(function(e){return void 0!==e.specId}),this.selectedGoods=Rv,this.selectedGoodsId=Vv},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getGrouponInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponInfo({id:e});case 2:r=n.sent,t.data=r.groupon,t.selectedGoods=t.data.goodsList,t.selectedGoods.forEach(function(e){e.nums=e.seckillNums.toString(),e.discountPrice=e.price,e.price=e.seckillPrice.toString(),e.spec=e.spec}),t.startValue=Te()(new Date(t.data.beginTime)),t.endValue=Te()(new Date(t.data.endTime));case 8:case"end":return n.stop()}},n,t)}))()},editGroupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponEdit(e);case 2:0===n.sent.code&&(Rv=[],t.bus.$emit("goToPage","groupon"));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.data.menuIdList,n.beginTime=zv(t.startValue),n.endTime=zv(t.endValue);var r=[],a=!1;t.selectedGoods.forEach(function(e){(isNaN(e.nums)||isNaN(e.price))&&(a=!0),r.push({goodsId:e.id,nums:Number(e.nums),specId:e.specId,grouponPrice:Number(e.price)})}),0!==r.length?a?t.$message.warn("拼团数量和价格不能为空"):(n.grouponGoodsList=r,console.log("values",n),e||t.editGroupon(n)):t.$message.warn("请选择拼团商品")})},goToBack:function(){Rv=[],this.bus.$emit("goToPage","groupon")}}},Pv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grouponEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["grouponName",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.grouponName}],expression:"['grouponName', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.grouponName }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"拼团类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"拼团类型!"}],initialValue:e.data.type}],expression:"['type', { rules: [{ required: true, message: '拼团类型!' }], initialValue: data.type}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("普通拼团")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("新客拼团")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,2759432488)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"拼团有效期(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expires",{rules:[{required:!0,message:"请填写拼团有效期(分钟)!"}],initialValue:Number(e.data.expires)}],expression:"['expires', { rules: [{ required: true, message: '请填写拼团有效期(分钟)!' }], initialValue: Number(data.expires) }]"}],staticStyle:{width:"200px"},attrs:{min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"参团人数","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["peopleNumber",{rules:[{required:!0,message:"请填写参团人数!"}],initialValue:Number(e.data.peopleNumber)}],expression:"['peopleNumber', { rules: [{ required: true, message: '请填写参团人数!' }], initialValue: Number(data.peopleNumber) }]"}],staticStyle:{width:"200px"},attrs:{min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}],initialValue:Number(e.data.isLimit)}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }], initialValue: Number(data.isLimit) }]"}]},[n("a-radio",{attrs:{value:1}},[e._v("\n          限购\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          不限购\n        ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{align:"center",rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1)],1)},staticRenderFns:[]};var Fv=n("VU/8")(Uv,Pv,!1,function(e){n("arfN")},"data-v-594b3cd3",null).exports,Hv=function(e){var t=e?Te()(e).format("YYYY-MM-DD HH:mm:ss"):"";return console.log(t),t},jv=[],qv=[],Wv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Yv=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"库存",dataIndex:"stock"},{title:"价格",dataIndex:"castPrice"},{title:"规格",dataIndex:"spec"},{title:"拼团数量",dataIndex:"nums",scopedSlots:{customRender:"nums"}},{title:"拼团价格",dataIndex:"price",scopedSlots:{customRender:"price"}}],Gv={name:"grouponDetail",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'数量!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' }}\n        </div>\n      </div>\n    ',props:{text:String},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),menuList:[],richTextData:null,data:{grouponName:null,type:null,expires:null,peopleNumber:null,isLimit:null,beginTime:null,endTime:null,menuIdList:[]},pagination:{total:0,current:1},manjian:!1,zhekou:!1,suiji:!1,couponCount:!1,goodsBtn:!1,goodsModel:!1,selectedGoodsId:[],goodsList:[],columns:Wv,goodsSelect:Yv,selectedGoods:[],categoryList:[],brandList:[]}},created:function(){this.getGrouponInfo(this.passData.id),this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){jv.push(e)}),qv=e}}}},props:{passData:Object},methods:{brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.specId===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.specId!==e}),jv=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.categoryId=n.categoryId,n.status=1,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){this.selectedGoods=[],this.goodsModel=!1;var e=new Vt.a;jv=jv.filter(function(t){return!e.has(t.specId)&&e.set(t.specId,1)}),this.selectedGoods=jv,this.selectedGoodsId=qv},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,r.status=1,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},checkCouponType:function(e){-1===e.target.value&&(this.manjian=!0,this.zhekou=!1,this.suiji=!1),1===e.target.value&&(this.zhekou=!0,this.manjian=!1,this.suiji=!1),2===e.target.value&&(this.zhekou=!1,this.manjian=!1,this.suiji=!0)},checkType:function(e){1===e.target.value&&(this.goodsBtn=!0,this.couponCount=!1),-1===e.target.value&&(this.couponCount=!0,this.goodsBtn=!1)},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},getGrouponInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponInfo({id:e});case 2:r=n.sent,t.data=r.groupon,t.selectedGoods=t.data.goodsList,t.selectedGoods.forEach(function(e){e.nums=e.seckillNums.toString(),e.castPrice=e.price,e.price=e.seckillPrice.toString(),e.spec=e.spec}),t.startValue=Te()(new Date(t.data.beginTime)),t.endValue=Te()(new Date(t.data.endTime));case 8:case"end":return n.stop()}},n,t)}))()},editGroupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponEdit(e);case 2:0===n.sent.code&&(jv=[],t.bus.$emit("goToPage","groupon"));case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.menuIdList=t.data.menuIdList,n.beginTime=Hv(t.startValue),n.endTime=Hv(t.endValue);var r=[],a=!1;t.selectedGoods.forEach(function(e){(isNaN(e.nums)||isNaN(e.price))&&(a=!0),r.push({goodsId:e.id,nums:Number(e.nums),specId:Number(e.specId),grouponPrice:Number(e.price)})}),0!==r.length?a?t.$message.warn("拼团数量和价格不能为空"):(n.grouponGoodsList=r,console.log("values",n),e||t.editGroupon(n)):t.$message.warn("请选择拼团商品")})},goToBack:function(){jv=[],this.bus.$emit("goToPage","groupon")}}},Kv={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grouponDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["grouponName",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.grouponName}],expression:"['grouponName', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.grouponName }]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"拼团类型","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"拼团类型!"}],initialValue:e.data.type}],expression:"['type', { rules: [{ required: true, message: '拼团类型!' }], initialValue: data.type}]"}],attrs:{disabled:""}},[n("a-radio",{attrs:{value:1}},[e._v("普通拼团")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("新客拼团")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}}),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"specId",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"nums",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"nums",t)}}})]}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}}],null,!1,3510666880)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"拼团有效期(分钟)","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["expires",{rules:[{required:!0,message:"请填写拼团有效期(分钟)!"}],initialValue:Number(e.data.expires)}],expression:"['expires', { rules: [{ required: true, message: '请填写拼团有效期(分钟)!' }], initialValue: Number(data.expires) }]"}],staticStyle:{width:"200px"},attrs:{disabled:"",min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"参团人数","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["peopleNumber",{rules:[{required:!0,message:"请填写参团人数!"}],initialValue:Number(e.data.peopleNumber)}],expression:"['peopleNumber', { rules: [{ required: true, message: '请填写参团人数!' }], initialValue: Number(data.peopleNumber) }]"}],staticStyle:{width:"200px"},attrs:{disabled:"",min:1}})],1),e._v(" "),n("a-form-item",{attrs:{label:"是否限购","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["isLimit",{rules:[{required:!0,message:"是否限购!"}],initialValue:Number(e.data.isLimit)}],expression:"['isLimit', { rules: [{ required: true, message: '是否限购!' }], initialValue: Number(data.isLimit) }]"}],attrs:{disabled:""}},[n("a-radio",{attrs:{value:1}},[e._v("\n            限购\n          ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n            不限购\n          ")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{disabled:"","disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n        -\n        "),n("a-date-picker",{attrs:{disabled:"","disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n          返回\n        ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{align:"center",rowSelection:e.rowSelection,columns:e.columns,rowKey:"specId",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"40px"}})}}])})],1)],1)},staticRenderFns:[]};var Qv=n("VU/8")(Gv,Kv,!1,function(e){n("heJ0")},"data-v-557ee60a",null).exports,Xv=[{title:"用户名称",dataIndex:"member.nickName"},{title:"拼团名称",dataIndex:"groupon.grouponName"},{title:"商品名称",dataIndex:"goodsName"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Jv="",Zv={name:"grouponRecord",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Xv,nickName:null,grouponName:null,goodsName:null,status:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Jv=e}}}},methods:{formatDate:function(e){return m(e)},handleTableChange:function(e,t,n){var r={};r.grouponName=this.grouponName,r.nickName=this.nickName,r.goodsName=this.goodsName,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.nickName&&null!==n.nickName&&(n.nickName=n.nickName.trim()),t.nickName=n.nickName,void 0!==n.grouponName&&null!==n.grouponName&&(n.grouponName=n.grouponName.trim()),t.grouponName=n.grouponName,void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,0===n.status&&(n.status=null),t.status=n.status,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponRecordList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Jv),""===Jv||0===Jv.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteGroupon(Jv)},grouponRecordDetail:function(e){var t={id:e};this.bus.$emit("goToPage","grouponRecordDetail"),this.bus.$emit("passData",t)},grouponEdit:function(e){var t={id:e};this.bus.$emit("goToPage","grouponEdit"),this.bus.$emit("passData",t)},grouponAdd:function(){this.bus.$emit("goToPage","grouponAdd")},deleteGroupon:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Jv="");case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.grouponRecordList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},eg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grouponRecord"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName"],expression:"['nickName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"用户昵称"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["grouponName"],expression:"['grouponName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"团购名称"}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("未付款")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("拼团中")]),e._v(" "),n("a-select-option",{attrs:{value:3}},[e._v("成功")]),e._v(" "),n("a-select-option",{attrs:{value:4}},[e._v("失败")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("span",{},[e._v(e._s(1===t?"未付款":2===t?"拼团中":3===t?"成功":4===t?"失败":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.grouponRecordDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var tg=n("VU/8")(Zv,eg,!1,function(e){n("i/qu")},"data-v-68ec0c77",null).exports,ng=[{title:"拼团活动",dataIndex:"groupon.grouponName"},{title:"用户昵称",dataIndex:"member.nickName"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],rg={name:"grouponRecordDetail",data:function(){return{data:null,columns:ng}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{formatDate:function(e){return m(e)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.grouponRecordMemberList({recordId:e});case 2:0===(r=n.sent).code&&(t.data=r.rows);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","grouponRecord")}}},ag={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grouponRecordDetail"},[n("a-button",{on:{click:e.goToBack}},[e._v("返回")]),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var og=n("VU/8")(rg,ag,!1,function(e){n("/JJ9")},"data-v-79883431",null).exports,ig=[{title:"书名",dataIndex:"bookName"},{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"播放次数",dataIndex:"listenTimes"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],sg="",cg={name:"audioList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],bookName:null,listenTimes:null,columns:ig}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){sg=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,r.listenTimes=this.listenTimes,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===sg||0===sg.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delete(sg)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.bookName&&null!==n.bookName&&(n.bookName=n.bookName.trim()),t.bookName=n.bookName,void 0!==n.listenTimes&&null!==n.listenTimes&&(n.listenTimes=n.listenTimes.trim()),t.listenTimes=n.listenTimes,t.pagination.current=1,e||t.searchByConditions(n)})},delete:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),sg="");case 4:case"end":return n.stop()}},n,t)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},audioAdd:function(){this.bus.$emit("goToPage","earAudioAdd")},audioEdit:function(e){var t={id:e};this.bus.$emit("goToPage","earAudioEdit"),this.bus.$emit("passData",t)},audioDetail:function(e){var t={id:e};this.bus.$emit("goToPage","earAudioDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.earAudioList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},lg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName"],expression:"['bookName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["listenTimes"],expression:"['listenTimes']"}],staticStyle:{width:"200px"},attrs:{placeholder:"播放次数",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.audioAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.audioEdit(r.id)}}},[e._v("修改")]),e._v(" "),n("a-divider",{attrs:{type:"vertical"}}),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.audioDetail(r.id)}}},[e._v("详情")])],1)}}])})],1)},staticRenderFns:[]};var ug=n("VU/8")(cg,lg,!1,function(e){n("zNtu")},"data-v-2a4f1ec4",null).exports,dg=[{title:"图书名称",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}}];var fg="",mg={name:"audioAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),tableForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,fileList:[],onOff:!0,visible:!1,visibleOne:!1,columns:dg,replaceFields:{children:"children",title:"label",key:"id"},judge:!1,bookData:[],pagination:{total:0,current:1},showList:[],tags:[],listOne:[],bookName:null,data:{imgUrl:null,bookName:null,picUrl:null,describe:null}}},created:function(){this.getBook(),this.getTag()},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){fg=t[0]}}}},methods:{onCheck:function(e,t){this.tags=e},handleOkOne:function(){this.showList=[],this.visibleOne=!1,this.showList=this.tags},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},showModalOne:function(){this.visibleOne=!0},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.tableForm.validateFields(function(e,n){t.bookName=n.bookNameOne,n.bookName=n.bookNameOne,t.pagination.current=1,e||t.searchByConditions(n)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){this.visible=!0},handleOk:function(){var e={};e.bookId=fg.id,this.visible=!1,this.queryByConditions(e)},queryByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.queryByConditions(e);case 2:0===(r=n.sent).code&&null===r.earAudio?(t.data.bookName=fg.bookName,t.data.imgUrl=fg.picUrl,t.data.picUrl=fg.picUrl):t.$message.warn("该图书已经选择过，请重新选择图书");case 4:case"end":return n.stop()}},n,t)}))()},getDuration:function(){this.data.duration=parseInt(this.$refs.audio.duration)},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookData=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookData=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUploadOne:function(e){console.log(e.type);var t="audio/mp3"===e.type||"audio/mpeg"===e.type;return t||this.$message.error("音频格式不正确!"),this.onOff=t,t},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChangeOne:function(e){var t=e.fileList;this.onOff&&(this.fileList=t),console.log(this.fileList)},handleRemove:function(){this.data.duration=null,this.data.audioUrl=null},getContent:function(e){this.data.describe=e},addEarAudio:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.audioEarAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","earAudioList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.picUrl=t.data.imgUrl,n.bookId=fg.id,null!==n.picUrl&&""!==n.picUrl&&void 0!==n.picUrl)if(null!==n.bookName&&""!==n.bookName.trim())if(null!==t.fileList&&0!==t.fileList.length){var r=[];t.fileList.forEach(function(e){r.push({name:e.name,audioUrl:e.response.url})}),n.audioList=r,n.tags=t.tags,console.log(n),e||t.addEarAudio(n)}else t.$message.warn("请选择音频");else t.$message.warn("请选择入图书");else t.$message.warn("请选择图书或上传图片")})},goToBack:function(){this.bus.$emit("goToPage","earAudioList")}}},pg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"选择图书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,initialValue:e.data.bookName}],expression:"['bookName', { required: true,initialValue: data.bookName }]"}],attrs:{"read-only":"",placeholder:"请输入图书名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("上传音频")])],1),e._v(" "),e._l(e.fileList,function(t){return e.fileList.length>0?n("p",{key:t.uid},["done"===t.status?n("audio",{ref:"audio",refInFor:!0,attrs:{src:t.response.url,controls:""},on:{canplay:e.getDuration}}):e._e()]):e._e()})],2),e._v(" "),n("a-form-item",{attrs:{label:"音频属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModalOne}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"简介","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"请填写简介!"}]}],expression:"['describe', { rules: [{ required: true, message: '请填写简介!' }] }]"}],attrs:{rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{attrs:{form:e.tableForm,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNameOne"],expression:"['bookNameOne']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",dataSource:e.bookData,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}}])})],1)],1)},staticRenderFns:[]};var hg=n("VU/8")(mg,pg,!1,function(e){n("IH2t")},"data-v-d3d69918",null).exports,vg=[{title:"图书名称",dataIndex:"bookName"},{title:"库存",dataIndex:"stock"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"推荐",dataIndex:"recommend",scopedSlots:{customRender:"recommend"}}];var gg="",bg={name:"audioEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),tableForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,fileList:[],listAudio:[],onOff:!0,loadingOne:!1,visible:!1,visibleOne:!1,columns:vg,judge:!1,bookData:[],pagination:{total:0,current:1},showList:[],listOne:[],replaceFields:{children:"children",title:"label",key:"id"},tags:[],data:{bookId:null,bookName:null,categoryId:null,imgUrl:null,picUrl:null,audioUrl:null,duration:null,describe:null},richTextData:""}},props:{passData:Object},created:function(){this.getTag(),this.getBook()},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){gg=t[0]}}}},methods:{showModalOne:function(){this.visibleOne=!0},getTag:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.attrList({});case 2:0===(n=t.sent).code&&(e.listOne=e.translateData(n.rows),e.listOne.forEach(function(e){e.parentId=e.label,e.id=e.label,void 0!==e.children&&e.children.forEach(function(t){t.parentId=e.label,t.id=t.label})}));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return 0===e.parentId});return function(e,t){e.forEach(function(e){t.forEach(function(n,r){n.parentId===e.id&&(JSON.parse(w()(t)).splice(r,1),void 0!==e.children?e.children.push(n):e.children=[n])})})}(t,e.filter(function(e){return 0!==e.parentId})),t.forEach(function(e){0===e.children.length?delete e.children:e.children.forEach(function(e){0===e.children.length&&delete e.children})}),t},onCheck:function(e,t){this.tags=e},handleOkOne:function(){this.showList=[],this.visibleOne=!1,this.showList=this.tags},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},deleteAudio:function(e){this.listAudio=this.listAudio.filter(function(t){return t!==e})},handleSubmitOne:function(e){var t=this;e.preventDefault(),this.tableForm.validateFields(function(e,n){t.bookName=n.bookNameOne,n.bookName=n.bookNameOne,t.pagination.current=1,e||t.searchByConditions(n)})},handleTableChange:function(e,t,n){var r={};r.bookName=this.bookName,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleOk:function(){var e={};e.bookId=gg.id,this.visible=!1,this.queryByConditions(e)},queryByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.queryByConditions(e);case 2:0===(r=n.sent).code&&(null===r.earAudio?(t.data.bookName=gg.bookName,t.data.imgUrl=gg.picUrl,t.data.picUrl=gg.picUrl):r.earAudio.id===t.passData.id?(t.data.bookName=gg.bookName,t.data.imgUrl=gg.picUrl,t.data.picUrl=gg.picUrl):t.$message.warn("该图书已经选择过，请重新选择图书"));case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){this.visible=!0},getDuration:function(){this.data.duration=parseInt(this.$refs.audio.duration)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioInfo({id:e});case 2:r=n.sent,t.data=r.earAudio,t.data.imgUrl=r.earAudio.picUrl,t.richTextData=r.earAudio.describe,t.data.describe=r.earAudio.describe,t.tags=r.earAudio.tags,t.showList=t.tags,t.listAudio=r.earAudio.audioList,console.log("fileList",t.fileList),console.log("size",t.fileList.length);case 12:case"end":return n.stop()}},n,t)}))()},getBook:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.bookList();case 2:0===(n=t.sent).code&&(e.bookData=n.rows,e.pagination.total=n.total,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.bookList(e);case 2:0===(r=n.sent).code&&(t.bookData=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},beforeUploadOne:function(e){var t="audio/mp3"===e.type||"audio/mpeg"===e.type;return t||(this.data.duration=null,this.data.audioUrl=null,this.loadingOne=!0,this.$message.error("音频格式不正确!")),this.onOff=t,t},handleChangeOne:function(e){var t=e.fileList;this.onOff&&(this.fileList=t),console.log(this.fileList)},handleRemove:function(){this.data.duration=null,this.data.audioUrl=null,this.loadingOne=!1},getContent:function(e){this.data.describe=e},editEarAudio:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","earAudioList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.id=t.passData.id,n.picUrl=t.data.imgUrl,null!==n.picUrl&&""!==n.picUrl&&void 0!==n.picUrl)if(null!==n.bookName&&""!==n.bookName.trim()){var r=[];0!==t.listAudio.length&&(t.listAudio.forEach(function(e){r.push({name:e.name,audioUrl:e.audioUrl})}),n.audioList=r),0!==t.fileList.length&&(t.fileList.forEach(function(e){r.push({name:e.name,audioUrl:e.response.url})}),n.audioList=r),void 0!==n.audioList?(n.tags=t.tags,console.log(n),e||t.editEarAudio(n)):t.$message.warn("请添加音频")}else t.$message.warn("请输入图书名称");else t.$message.warn("请选择图片")})},goToBack:function(){this.bus.$emit("goToPage","earAudioList")}}},yg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"重选图书","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("选择图书")])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,initialValue:e.data.bookName}],expression:"['bookName', { required: true,initialValue: data.bookName }]"}],attrs:{placeholder:"请输入图书名称","read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("重传音频")])],1),e._v(" "),e._l(e.fileList,function(t){return n("p",{key:t.uid},["done"===t.status?n("audio",{ref:"audio",refInFor:!0,attrs:{src:t.response.url,controls:""},on:{canplay:e.getDuration}}):e._e()])}),e._v(" "),e._l(e.listAudio,function(t){return n("p",{key:t.id},[n("span",{staticStyle:{display:"block","margin-top":"10px"}},[e._v(e._s(t.name)),n("a-icon",{staticStyle:{float:"right"},attrs:{type:"close"},on:{click:function(n){return e.deleteAudio(t)}}})],1),e._v(" "),n("audio",{ref:"audio",refInFor:!0,attrs:{src:t.audioUrl,controls:""},on:{canplay:e.getDuration}})])})],2),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-button",{on:{click:e.showModalOne}},[n("a-icon",{attrs:{type:"plus"}})],1),e._v(" "),n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t)),n("a-icon",{staticClass:"mycolClose",attrs:{type:"close"},on:{click:function(n){return e.deleteTag(t)}}})],1)])}),1)],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"简介","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{required:!0,message:"请填写简介!"}],initialValue:e.data.describe}],expression:"['describe', { rules: [{required: true, message: '请填写简介!' }],initialValue: data.describe }]"}],attrs:{rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"选择图书属性",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkOne},model:{value:e.visibleOne,callback:function(t){e.visibleOne=t},expression:"visibleOne"}},[n("a-tree",{attrs:{"show-line":"",checkedKeys:e.tags,checkable:"",treeData:e.listOne,replaceFields:e.replaceFields},on:{check:e.onCheck}})],1),e._v(" "),n("a-modal",{attrs:{zIndex:99999,title:"图书",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{attrs:{form:e.tableForm,layout:"vertical"},on:{submit:e.handleSubmitOne}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookNameOne"],expression:"['bookNameOne']"}],staticStyle:{width:"200px"},attrs:{placeholder:"图书名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",dataSource:e.bookData,pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"上架":"下架"))])}},{key:"recommend",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"是":"否"))])}}])})],1)],1)},staticRenderFns:[]};var wg=n("VU/8")(bg,yg,!1,function(e){n("d88s")},"data-v-44e97858",null).exports,xg={name:"audioDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),tableForm:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,fileList:[],listAudio:[],onOff:!0,loadingOne:!1,visible:!1,visibleOne:!1,judge:!1,bookData:[],pagination:{total:0,current:1},showList:[],listOne:[],replaceFields:{children:"children",title:"label",key:"id"},tags:[],data:{bookId:null,bookName:null,categoryId:null,imgUrl:null,picUrl:null,audioUrl:null,duration:null,describe:null},richTextData:""}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},computed:{rowSelection:function(){return{type:"radio",onChange:function(e,t){}}}},methods:{showModalOne:function(){this.visibleOne=!0},onCheck:function(e,t){this.tags=e},deleteTag:function(e){this.showList=this.showList.filter(function(t){return t!==e}),this.tags=this.tags.filter(function(t){return t!==e})},showModal:function(){this.visible=!0},getDuration:function(){this.data.duration=parseInt(this.$refs.audio.duration)},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioInfo({id:e});case 2:r=n.sent,t.data=r.earAudio,t.data.imgUrl=r.earAudio.picUrl,t.richTextData=r.earAudio.describe,t.data.describe=r.earAudio.describe,t.tags=r.earAudio.tags,t.showList=t.tags,t.listAudio=r.earAudio.audioList,console.log("fileList",t.fileList),console.log("size",t.fileList.length);case 12:case"end":return n.stop()}},n,t)}))()},getContent:function(e){this.data.describe=e},editEarAudio:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.earAudioEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","earAudioList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){console.log(t)})},goToBack:function(){this.bus.$emit("goToPage","earAudioList")}}},kg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"audioDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"图书名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bookName",{required:!0,initialValue:e.data.bookName}],expression:"['bookName', { required: true,initialValue: data.bookName }]"}],attrs:{placeholder:"请输入图书名称","read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"音频","label-col":{span:2},"wrapper-col":{span:17}}},[e._l(e.fileList,function(t){return e.fileList.length>0?n("p",{key:t.uid},["done"===t.status?n("audio",{ref:"audio",refInFor:!0,attrs:{src:t.response.url,controls:""},on:{canplay:e.getDuration}}):e._e()]):e._e()}),e._v(" "),e._l(e.listAudio,function(t){return 0===e.fileList.length?n("p",{key:t.id},[n("span",{staticStyle:{display:"block","margin-top":"10px"}},[e._v(e._s(t.name))]),e._v(" "),n("audio",{ref:"audio",refInFor:!0,attrs:{src:t.audioUrl,controls:""},on:{canplay:e.getDuration}})]):e._e()})],2),e._v(" "),n("a-form-item",{attrs:{label:"图书属性","label-col":{span:2},"wrapper-col":{span:17}}},[n("div",{staticClass:"gutter-example"},[n("a-row",{attrs:{gutter:16}},e._l(e.showList,function(t){return n("a-col",{key:t,attrs:{span:6}},[n("div",{staticClass:"mycol"},[e._v(e._s(t))])])}),1)],1)]),e._v(" "),n("a-form-item",{attrs:{label:"简介","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{rules:[{message:"请填写简介!"}],initialValue:e.data.describe}],expression:"['describe', { rules: [{  message: '请填写简介!' }],initialValue: data.describe }]"}],attrs:{rows:5,"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var _g=n("VU/8")(xg,kg,!1,function(e){n("rwb8")},"data-v-3abf2c75",null).exports,Sg=[{title:"标题",dataIndex:"columnName"},{title:"摘要",dataIndex:"summary",width:"50%",scopedSlots:{customRender:"summary"}},{title:"缩写",dataIndex:"link"},{title:"排序",dataIndex:"sort"},{title:"操作",key:"operation",width:100,scopedSlots:{customRender:"action"}}],Cg="",Ng={name:"columnList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,pagination:{total:0,current:1},data:[],columns:Sg}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Cg=e}}}},methods:{handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Cg||0===Cg.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteColumn(Cg)},deleteColumn:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.columnDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Cg="");case 4:case"end":return n.stop()}},n,t)}))()},columnEdit:function(e){var t={id:e};this.bus.$emit("goToPage","columnEdit"),this.bus.$emit("passData",t)},columnAdd:function(){this.bus.$emit("goToPage","columnAdd")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.columnList(e);case 2:0===(r=n.sent).code&&(t.data=t.translateData(r.rows));case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({});case 2:0===(n=t.sent).code&&(console.log(n.rows),e.data=e.translateData(n.rows));case 4:case"end":return t.stop()}},t,e)}))()},translateData:function(e){var t=e.filter(function(e){return-1===e.parentId});return function e(t,n){t.forEach(function(t){n.forEach(function(r,a){if(r.parentId===t.id){var o=JSON.parse(w()(n));o.splice(a,1),e([r],o),void 0!==t.children?t.children.push(r):t.children=[r]}})})}(t,e.filter(function(e){return-1!==e.parentId})),t}}},Tg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.columnAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:!1},scopedSlots:e._u([{key:"summary",fn:function(t,r){return n("div",{style:{maxWidth:"600px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.summary}},[e._v("\n      "+e._s(r.summary)+"\n    ")])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.columnEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Dg=n("VU/8")(Ng,Tg,!1,function(e){n("HTgX")},"data-v-9b6e6f04",null).exports,Ig={name:"columnAdd",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),visible:!1,data:{describe:null},list:[]}},created:function(){this.getParentList()},methods:{getContent:function(e){this.data.describe=e},getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({parentId:-1});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.visible=!0},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){console.log(n),void 0===n.parentId&&(n.parentId=-1),void 0!==n.columnName&&""!==n.columnName.trim()?e||t.addColumn(n):t.$message.warn("请选择标题")})},addColumn:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.columnAdd(e);case 2:0===(r=n.sent).code?(t.$message.success("保存成功"),t.bus.$emit("goToPage","columnList")):500===r.code&&t.$message.error(r.msg);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","columnList")}}},Mg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"columnAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"120px"},on:{change:e.selectChange}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.columnName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName",{required:!0,rules:[{message:"请输入标题!"}]}],expression:"['columnName', { required: true,rules: [{ message: '请输入标题!' }] }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"缩写","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{required:!0,rules:[{message:"请输入缩写!"}]}],expression:"['link', { required: true,rules: [{ message: '请输入缩写!' }] }]"}],attrs:{placeholder:"请输入缩写"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,rules:[{message:"请输入排序!"}]}],expression:"['sort', { required: true,rules: [{ message: '请输入排序!' }] }]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"摘要","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary",{rules:[{message:"摘要!"}]}],expression:"['summary', { rules: [{  message: '摘要!' }] }]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var Og=n("VU/8")(Ig,Mg,!1,function(e){n("yC8l")},"data-v-7e65d0a8",null).exports,Ag={name:"helpCenterEdit",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{columnName:null,summary:null,link:null,sort:null},visible:!1,list:[]}},props:{passData:Object},created:function(){this.getParentList()},methods:{getContent:function(e){this.data.describe=e},getParentList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({parentId:-1});case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.columnInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.data,t.data.sort=r.data.sort.toString(),-1===t.data.parentId?t.data.parentId=void 0:t.visible=!0);case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,void 0===n.parentId&&(n.parentId=-1),""!==n.columnName.trim()?e||t.editColumn(n):t.$message.warn("请选择标题")})},editColumn:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.columnEdit(e);case 2:0===n.sent.code&&(t.$message.success("修改成功"),t.bus.$emit("goToPage","columnList"));case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","columnList")}}},Lg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"helpCenterEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"上级目录","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{initialValue:e.data.parentId}],expression:"['parentId',{initialValue: data.parentId}]"}],staticStyle:{width:"120px"},attrs:{disabled:""}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.columnName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnName",{required:!0,rules:[{message:"请输入标题!"}],initialValue:e.data.columnName}],expression:"['columnName', { required: true,rules: [{ message: '请输入标题!' }],initialValue: data.columnName }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"缩写","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["link",{required:!0,rules:[{message:"请输入缩写!"}],initialValue:e.data.link}],expression:"['link', { required: true,rules: [{ message: '请输入缩写!' }],initialValue: data.link }]"}],attrs:{placeholder:"请输入缩写"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{required:!0,rules:[{message:"请输入排序!"}],initialValue:e.data.sort}],expression:"['sort', { required: true,rules: [{ message: '请输入排序!' }],initialValue: data.sort }]"}],attrs:{placeholder:"请输入排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"摘要","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary",{rules:[{message:"摘要!"}],initialValue:e.data.summary}],expression:"['summary', { rules: [{  message: '摘要!' }], initialValue: data.summary}]"}],attrs:{rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Eg=n("VU/8")(Ag,Lg,!1,function(e){n("qHHD")},"data-v-52141fe9",null).exports,zg=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"标题",dataIndex:"title"},{title:"所属栏目",dataIndex:"column.columnName"},{title:"发布时间",dataIndex:"publishDate",scopedSlots:{customRender:"publishDate"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Rg="",Vg={name:"articleList",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),picUrl:"",data:[],pagination:{total:0,current:1},visible:!1,title:null,columnId:null,list:[],columns:zg}},created:function(){this.tableData(),this.getColumnList()},computed:{rowSelection:function(){return{onChange:function(e,t){Rg=e}}}},props:{passData:Object},methods:{handleTableChange:function(e,t,n){var r={};r.title=this.title,r.columnId=this.columnId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleChange:function(e){"done"===e.file.status&&this.tableData()},showModal:function(){""===Rg||0===Rg.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.deleteArticle(Rg)},getColumnList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.title&&null!==n.title&&(n.title=n.title.trim()),t.title=n.title,t.columnId=n.columnId,t.pagination.current=1,e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.articleList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},deleteArticle:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.articleDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Rg="");case 4:case"end":return n.stop()}},n,t)}))()},articleAdd:function(){this.bus.$emit("goToPage","articleAdd")},articleEdit:function(e){var t={id:e};this.bus.$emit("goToPage","articleEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.articleList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Bg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"articleList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],staticStyle:{width:"200px"},attrs:{placeholder:"标题"}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnId"],expression:"['columnId']"}],staticStyle:{width:"200px"},attrs:{placeholder:"选择栏目"}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.columnName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.articleAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"80px"}})}},{key:"publishDate",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.articleEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var $g=n("VU/8")(Vg,Bg,!1,function(e){n("1aHD")},"data-v-4535168a",null).exports;function Ug(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var Pg={name:"articleAdd",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loadingTwo:!1,fileList:[],data:{logo:null,logoUrl:null,imgUrl:null,picUrl:null,fileUrl:null,videoUrl:null,status:1,content:null},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,list:[]}},created:function(){this.getColumnList()},methods:{getColumnList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({});case 2:0===(n=t.sent).code&&(e.list=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},onChange:function(e,t){},onOk:function(e){},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(Ug(e.file.originFileObj,function(e){t.data.picUrl=e,t.loading=!1}),this.data.imgUrl=e.file.response.url):this.loading=!0},handleChangeTwo:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(Ug(e.file.originFileObj,function(e){t.data.logo=e,t.loadingTwo=!1}),this.data.logoUrl=e.file.response.url):this.loadingTwo=!0},removeVideo:function(){this.playerOptions.sources[0].src=null,this.show=!0,this.showV=!1,this.data.videoUrl=null},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.data.videoUrl=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.data.videoUrl)):this.loading=!1},beforeUploadOne:function(e){return console.log(e.type),!0},handleRemove:function(){this.data.fileUrl=null},handleChangeOne:function(e){var t=e.fileList;this.fileList=t,console.log(this.fileList)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},beforeUploadTwo:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},changeStatus:function(e){},getContent:function(e){this.data.content=e},addArticle:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.articleAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","articleList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){if(n.picUrl=t.data.imgUrl,n.videoUrl=t.data.videoUrl,n.content=t.data.content,n.logo=t.data.logoUrl,void 0!==n.title&&""!==n.title){var r=[];t.fileList.forEach(function(e){r.push({name:e.name,fileUrl:e.response.url})}),n.articleFileList=r,console.log(n),e||t.addArticle(n)}else t.$message.warn("标题不能为空")})},goToBack:function(){this.bus.$emit("goToPage","articleList")}}},Fg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"articleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"所属栏目","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnId"],expression:"['columnId']"}],staticStyle:{width:"200px"}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.columnName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"logo","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUploadTwo},on:{change:e.handleChangeTwo}},[e.data.logo?n("img",{attrs:{src:e.data.logo,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loadingTwo?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{required:!0,rules:[{message:"标题!"}]}],expression:"['title', {required: true, rules: [{  message: '标题!' }] }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort"],expression:"['sort']"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"网址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{required:!0,rules:[{message:"网址!"}]}],expression:"['url', {required: true, rules: [{  message: '网址!' }] }]"}],attrs:{placeholder:"请输入网址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"姓名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{required:!0,rules:[{message:"姓名!"}]}],expression:"['name', {required: true, rules: [{  message: '姓名!' }] }]"}],attrs:{placeholder:"请输入姓名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"主营","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainBusiness",{required:!0,rules:[{message:"主营!"}]}],expression:"['mainBusiness', {required: true, rules: [{  message: '主营!' }] }]"}],attrs:{placeholder:"请输入主营"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"地址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"地址!"}]}],expression:"['address', {required: true, rules: [{  message: '地址!' }] }]"}],attrs:{placeholder:"请输入地址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"概要","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary",{rules:[{message:"摘要!"}]}],expression:"['summary', { rules: [{  message: '摘要!' }] }]"}],attrs:{rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{label:"文件","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("上传文件")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n            确定\n          ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n            返回\n          ")])],1)],1)],1)},staticRenderFns:[]};var Hg=n("VU/8")(Pg,Fg,!1,function(e){n("avDw")},"data-v-779cf630",null).exports;function jg(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}var qg={name:"articleEdit",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loading:!1,loadingTwo:!1,fileList:[],articleFileList:[],data:{title:null,sort:null,summary:null,columnId:null,logo:null,logoUrl:null,imgUrl:null,picUrl:null,fileUrl:null,videoUrl:null,url:null,mainBusiness:null,address:null,name:null,content:null},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"../../static/images/test.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},show:!0,showV:!1,richTextData:"",list:[]}},props:{passData:Object},created:function(){this.getColumnList()},methods:{getColumnList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.columnList({});case 2:0===(n=t.sent).code&&(e.list=n.rows,e.getInfo(e.passData.id));case 4:case"end":return t.stop()}},t,e)}))()},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.articleInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.article,console.log("数据",t.data),console.log("数据",r.article),t.data.imgUrl=r.article.picUrl,t.data.picUrl=r.article.picUrl,t.data.logoUrl=r.article.logo,t.data.logo=r.article.logo,t.articleFileList=r.article.articleFileList,null!==r.article.videoUrl&&""!==r.article.videoUrl&&(t.show=!1,t.showV=!0,t.playerOptions.sources[0].src=r.article.videoUrl),t.richTextData=r.article.content);case 4:case"end":return n.stop()}},n,t)}))()},onChange:function(e,t){},onOk:function(e){},deleteFile:function(e){this.articleFileList=this.articleFileList.filter(function(t){return t!==e})},handleChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(jg(e.file.originFileObj,function(e){t.data.picUrl=e,t.loading=!1}),this.data.imgUrl=e.file.response.url):this.loading=!0},handleChangeTwo:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&(jg(e.file.originFileObj,function(e){t.data.logo=e,t.loadingTwo=!1}),this.data.logoUrl=e.file.response.url):this.loadingTwo=!0},removeVideo:function(){this.playerOptions.sources[0].src=null,this.show=!0,this.showV=!1,this.data.videoUrl=null},videoHandleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.playerOptions.sources[0].src=e.file.response.url,this.data.videoUrl=e.file.response.url,this.show=!1,this.showV=!0,console.log(this.data.videoUrl)):this.loading=!1},beforeUploadOne:function(e){return console.log(e.type),!0},handleRemove:function(){this.data.fileUrl=null},handleChangeOne:function(e){var t=e.fileList;this.fileList=t,console.log(this.fileList)},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},beforeUploadTwo:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},changeStatus:function(e){},getContent:function(e){this.data.content=e},editArticle:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.articleEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","articleList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.picUrl=t.data.imgUrl,n.videoUrl=t.data.videoUrl,n.logo=t.data.logoUrl,n.content=t.data.content;var r=[];0!==t.articleFileList.length&&(t.articleFileList.forEach(function(e){r.push({name:e.name,fileUrl:e.fileUrl})}),n.articleFileList=r),0!==t.fileList.length&&(t.fileList.forEach(function(e){r.push({name:e.name,fileUrl:e.response.url})}),n.articleFileList=r),void 0!==n.title&&""!==n.title?e||t.editArticle(n):t.$message.warn("标题不能为空")})},goToBack:function(){this.bus.$emit("goToPage","articleList")}}},Wg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"articleEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"所属栏目","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["columnId",{initialValue:e.data.columnId}],expression:"['columnId', {initialValue: data.columnId}]"}],staticStyle:{width:"200px"}},e._l(e.list,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.columnName))])}),1)],1),e._v(" "),n("a-form-item",{attrs:{label:"logo","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUploadTwo},on:{change:e.handleChangeTwo}},[e.data.logo?n("img",{attrs:{src:e.data.logo,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loadingTwo?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"图片","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[e.data.picUrl?n("img",{attrs:{src:e.data.picUrl,alt:"avatar",width:"263px"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1),e._v(" "),n("a-form-item",{attrs:{label:"视频","label-col":{span:2},"wrapper-col":{span:17}}},[e.show?n("div",[n("a-upload",{attrs:{name:"file",listType:"picture-card",showUploadList:!1,action:e.uploadUrl},on:{change:e.videoHandleChange}},[n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),n("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1)])],1):e._e(),e._v(" "),e.showV?n("div",{staticStyle:{width:"300px"}},[n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}),e._v(" "),n("a",{on:{click:e.removeVideo}},[e._v("删除")])],1):e._e()]),e._v(" "),n("a-form-item",{attrs:{label:"标题","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{required:!0,rules:[{message:"标题!"}],initialValue:e.data.title}],expression:"['title', {required: true, rules: [{  message: '标题!' }], initialValue: data.title }]"}],attrs:{placeholder:"请输入标题"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"排序","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.data.sort}],expression:"['sort', { initialValue: data.sort}]"}],attrs:{placeholder:"排序"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"网址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{required:!0,rules:[{message:"网址!"}],initialValue:e.data.url}],expression:"['url', {required: true, rules: [{  message: '网址!' }], initialValue: data.url  }]"}],attrs:{placeholder:"请输入网址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"姓名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{required:!0,rules:[{message:"姓名!"}],initialValue:e.data.name}],expression:"['name', {required: true, rules: [{  message: '姓名!' }], initialValue: data.name  }]"}],attrs:{placeholder:"请输入姓名"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"主营","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mainBusiness",{required:!0,rules:[{message:"主营!"}],initialValue:e.data.mainBusiness}],expression:"['mainBusiness', {required: true, rules: [{  message: '主营!' }], initialValue: data.mainBusiness  }]"}],attrs:{placeholder:"请输入主营"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"地址","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{required:!0,rules:[{message:"地址!"}],initialValue:e.data.address}],expression:"['address', {required: true, rules: [{  message: '地址!' }], initialValue: data.address  }]"}],attrs:{placeholder:"请输入地址"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"概要","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["summary",{rules:[{message:"摘要!"}],initialValue:e.data.summary}],expression:"['summary', { rules: [{  message: '摘要!' }], initialValue: data.summary}]"}],attrs:{rows:5}})],1),e._v(" "),n("a-form-item",{attrs:{label:"文件","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-upload",{attrs:{name:"file",showUploadList:!0,action:e.uploadUrl,fileList:e.fileList,remove:e.handleRemove,beforeUpload:e.beforeUploadOne},on:{change:e.handleChangeOne}},[n("a-button",[e._v("上传文件")])],1),e._v(" "),e._l(e.articleFileList,function(t){return n("p",{key:t.id},[n("span",{staticStyle:{display:"block","margin-top":"10px"}},[e._v(e._s(t.name)),n("a-icon",{staticStyle:{float:"right"},attrs:{type:"close"},on:{click:function(n){return e.deleteFile(t)}}})],1)])}),e._v(" "),e._l(e.fileList,function(e){return n("p",{key:e.uid})})],2),e._v(" "),n("a-form-item",{attrs:{label:"内容","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{attrs:{richTextData:e.richTextData},on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var Yg=n("VU/8")(qg,Wg,!1,function(e){n("pa12")},"data-v-53e38475",null).exports,Gg=[{title:"岗位名称",dataIndex:"recruitmentName"},{title:"薪资",dataIndex:"salary"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"发布时间",dataIndex:"publishDate",scopedSlots:{customRender:"publishDate"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Kg="",Qg={name:"recruitmentList",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},visible:!1,recruitmentName:null,status:null,columns:Gg}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Kg=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.recruitmentName=this.recruitmentName,r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===Kg||0===Kg.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.judge(Kg)},formatDate:function(e){return m(e)},selectChange:function(e){},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.recruitmentName&&null!==n.recruitmentName&&(n.recruitmentName=n.recruitmentName.trim()),t.recruitmentName=n.recruitmentName,0===n.status&&(n.status=null),t.status=n.status,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},judge:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentJudge(e);case 2:0===(r=n.sent).code&&(r.judge?t.deleteRecruitment(Kg):t.$message.warn("有关联数据，不能删除"));case 4:case"end":return n.stop()}},n,t)}))()},deleteRecruitment:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentDelete(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Kg="");case 4:case"end":return n.stop()}},n,t)}))()},recruitmentAdd:function(){this.bus.$emit("goToPage","recruitmentAdd")},recruitmentEdit:function(e){var t={id:e};this.bus.$emit("goToPage","recruitmentEdit"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.recruitmentList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},Xg={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recruitmentList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["recruitmentName"],expression:"['recruitmentName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"岗位名称"}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.recruitmentAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":""}},[e._v(e._s(1===t?"开启":2===t?"禁用":""))])}},{key:"publishDate",fn:function(t){return n("span",{},[e._v(e._s(null===t?null:e.formatDate(t)))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.recruitmentEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Jg=n("VU/8")(Qg,Xg,!1,function(e){n("f8MO")},"data-v-b25f9a54",null).exports,Zg={name:"recruitmentAdd",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{content:null}}},created:function(){},methods:{getContent:function(e){this.data.content=e},addRecruitment:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentAdd(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","recruitmentList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.describe=t.data.content,null!==n.describe?e||t.addRecruitment(n):t.$message.warn("职位描述不能为空")})},goToBack:function(){this.bus.$emit("goToPage","recruitmentList")}}},eb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recruitmentAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"招聘名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["recruitmentName",{rules:[{required:!0,message:"招聘名称!"}]}],expression:"['recruitmentName', { rules: [{ required: true, message: '招聘名称!' }] }]"}],attrs:{placeholder:"请输入招聘名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"公司名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{rules:[{required:!0,message:"公司名称!"}]}],expression:"['companyName', { rules: [{ required: true, message: '公司名称!' }] }]"}],attrs:{placeholder:"请输入公司名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"工作地点","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"工作地点!"}]}],expression:"['address', { rules: [{ required: true, message: '工作地点!' }] }]"}],attrs:{placeholder:"请输入工作地点"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"薪资","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["salary",{rules:[{required:!0,message:"薪资!"}]}],expression:"['salary', {rules: [{required: true,  message: '薪资!' }] }]"}],attrs:{placeholder:"请输入薪资"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"状态!"}]}],expression:"['status', { rules: [{ required: true, message: '状态!' }]}]"}]},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"职位描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var tb=n("VU/8")(Zg,eb,!1,function(e){n("icnn")},"data-v-0f78cf69",null).exports,nb={name:"recruitmentEdit",components:{RichText:xt},data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{recruitmentName:null,companyName:null,address:null,salary:null,status:null,content:null},richTextData:""}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.recruitment,t.richTextData=r.recruitment.describe);case 4:case"end":return n.stop()}},n,t)}))()},getContent:function(e){this.data.content=e},editRecruitment:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.recruitmentEdit(e);case 2:0===n.sent.code&&t.bus.$emit("goToPage","recruitmentList");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.id=t.passData.id,n.describe=t.data.content,null!==n.describe?(console.log(n),e||t.editRecruitment(n)):t.$message.warn("职位描述不能为空")})},goToBack:function(){this.bus.$emit("goToPage","recruitmentList")}}},rb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recruitmentEdit"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"招聘名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["recruitmentName",{rules:[{required:!0,message:"招聘名称!"}],initialValue:e.data.recruitmentName}],expression:"['recruitmentName', { rules: [{ required: true, message: '招聘名称!' }] ,initialValue: data.recruitmentName }]"}],attrs:{placeholder:"请输入招聘名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"公司名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyName",{rules:[{required:!0,message:"公司名称!"}],initialValue:e.data.companyName}],expression:"['companyName', { rules: [{ required: true, message: '公司名称!' }],initialValue: data.companyName }]"}],attrs:{placeholder:"请输入公司名称"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"工作地点","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"工作地点!"}],initialValue:e.data.address}],expression:"['address', { rules: [{ required: true, message: '工作地点!' }],initialValue: data.address }]"}],attrs:{placeholder:"请输入工作地点"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"薪资","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["salary",{rules:[{required:!0,message:"薪资!"}],initialValue:e.data.salary}],expression:"['salary', {rules: [{required: true,  message: '薪资!' }],initialValue: data.salary }]"}],attrs:{placeholder:"请输入薪资"}})],1),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"状态!"}],initialValue:e.data.status}],expression:"['status', { rules: [{ required: true, message: '状态!' }],initialValue: data.status }]"}]},[n("a-radio",{attrs:{value:1}},[e._v("启用")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("禁用")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"职位描述","label-col":{span:2},"wrapper-col":{span:17}}},[n("RichText",{attrs:{richTextData:e.richTextData},on:{getContent:e.getContent}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var ab=n("VU/8")(nb,rb,!1,function(e){n("PEMz")},"data-v-4a70be09",null).exports,ob=[{title:"招聘岗位",dataIndex:"postName"},{title:"姓名",dataIndex:"name"},{title:"电话",dataIndex:"phone"},{title:"邮箱",dataIndex:"email"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],ib="",sb={name:"applicantList",data:function(){return{headers:{authorization:"authorization-text",token:sessionStorage.getItem("token")},form:this.$form.createForm(this,{name:"coordinated"}),data:[],pagination:{total:0,current:1},visible:!1,recruitmentName:null,status:null,columns:ob}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){ib=e}}}},methods:{handleTableChange:function(e,t,n){var r={};r.status=this.status,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},showModal:function(){""===ib||0===ib.length?this.$message.error("至少选择一条进行处理"):this.visible=!0},handleOk:function(){this.visible=!1,this.deal(ib)},formatDate:function(e){return m(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){0===n.status&&(n.status=null),t.status=n.status,t.pagination.current=1,console.log(n),e||t.searchByConditions(n)})},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.applicantList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},deal:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.applicantDeal(e);case 2:0===n.sent.code&&t.tableData();case 4:case"end":return n.stop()}},n,t)}))()},applicantDetail:function(e){var t={id:e};this.bus.$emit("goToPage","applicantDetail"),this.bus.$emit("passData",t)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.applicantList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},cb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"applicantList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"200px"},attrs:{placeholder:"状态"}},[n("a-select-option",{attrs:{value:0}},[e._v("全部")]),e._v(" "),n("a-select-option",{attrs:{value:1}},[e._v("未处理")]),e._v(" "),n("a-select-option",{attrs:{value:2}},[e._v("已处理")])],1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"edit"},on:{click:e.showModal}},[e._v("处理")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"处理确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定把选中项改为已处理？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#f50":""}},[e._v(e._s(1===t?"未处理":2===t?"已处理":""))])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.applicantDetail(r.id)}}},[e._v("详情")])])}}])})],1)},staticRenderFns:[]};var lb=n("VU/8")(sb,cb,!1,function(e){n("4XYh")},"data-v-2b32f1ef",null).exports,ub={name:"applicantDetail",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),data:{postName:null,name:null,phone:null,email:null,status:null,annex:null,remark:null}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id)},methods:{getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.applicantInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.applicant);case 4:case"end":return n.stop()}},n,t)}))()},goToBack:function(){this.bus.$emit("goToPage","applicantList")}}},db={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"applicantDetail"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",{attrs:{label:"招聘名称","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["postName",{initialValue:e.data.postName}],expression:"['postName', { initialValue: data.postName }]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"姓名","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.data.name}],expression:"['name', { initialValue: data.name }]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"电话","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:e.data.phone}],expression:"['phone', { initialValue: data.phone }]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"邮箱","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{initialValue:e.data.email}],expression:"['email', { initialValue: data.email }]"}],attrs:{"read-only":""}})],1),e._v(" "),n("a-form-item",{attrs:{label:"附件","label-col":{span:2},"wrapper-col":{span:17}}},[null!==e.data.annex&&""!==e.data.annex?n("a",{attrs:{href:e.data.annex,target:"_blank"}},[e._v("附件")]):n("span",[e._v("无附件")])]),e._v(" "),n("a-form-item",{attrs:{label:"状态","label-col":{span:2},"wrapper-col":{span:17}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.data.status}],expression:"['status', { initialValue: data.status }]"}],attrs:{"read-only":""}},[n("a-radio",{attrs:{value:1}},[e._v("未处理")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("已处理")])],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"备注","label-col":{span:2},"wrapper-col":{span:16}}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{initialValue:e.data.remark}],expression:"['remark', { initialValue: data.remark}]"}],attrs:{"read-only":"",rows:10}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1)],1)},staticRenderFns:[]};var fb=n("VU/8")(ub,db,!1,function(e){n("H7n5")},"data-v-2ac30aba",null).exports,mb=[{title:"用户名",dataIndex:"name"},{title:"店铺",width:"20%",dataIndex:"storeName"},{title:"操作记录",dataIndex:"content",width:"40%",scopedSlots:{customRender:"content"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],pb={name:"userLog",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},name:null,storeId:null,storeList:[],data:[],columns:mb}},created:function(){this.tableData(),this.getStore()},methods:{getStore:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.storeAllList({});case 2:0===(n=t.sent).code&&(e.storeList=n.storeList);case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.name=this.name,r.storeId=this.storeId,this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){void 0!==n.name&&null!==n.name&&(n.name=n.name.trim()),t.name=n.name,t.storeId=n.storeId,t.pagination.current=1,e||t.searchByConditions(n)})},formatDate:function(e){return m(e)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.userLogList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.userLogList({});case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},hb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userLog"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],staticStyle:{width:"200px"},attrs:{placeholder:"用户名",allowClear:!0}})],1),e._v(" "),n("a-form-item",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["storeId"],expression:"['storeId']"}],staticStyle:{width:"300px"},attrs:{placeholder:"请选择店铺"}},e._l(e.storeList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.storeName))])}),1)],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"content",fn:function(t,r){return n("div",{style:{minWidth:"150px",maxWidth:"500px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",wordWrap:"break-word",wordBreak:"break-all"},attrs:{title:r.content}},[e._v("\n        "+e._s(r.content)+"\n      ")])}},{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var vb=n("VU/8")(pb,hb,!1,function(e){n("jipU")},"data-v-efd21140",null).exports,gb={name:"wechatAppAuth",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),url:"https://mp.weixin.qq.com/cgi-bin/componentloginpage?",warrantVisible:!1,data:{appId:null}}},created:function(){this.tableData()},mounted:function(){this.getUrl()},methods:{getUrl:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.wechatAppAuthUrl({});case 2:0===(n=t.sent).code&&(e.url=e.url+"component_appid="+n.component_appid+"&pre_auth_code="+n.pre_auth_code+"&redirect_uri="+n.redirect_uri+"&auth_type="+n.auth_type);case 4:case"end":return t.stop()}},t,e)}))()},warrant:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.open(e.url,"_blank");case 1:case"end":return t.stop()}},t,e)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.wechatAppAuth();case 2:0===(n=t.sent).code&&(null==n.wechatAppAuth?e.warrantVisible=!0:e.data=n.wechatAppAuth);case 4:case"end":return t.stop()}},t,e)}))()}}},bb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wechatAppAuth"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[e.warrantVisible?n("a-form-item",[n("a-button",{attrs:{type:"primary"},on:{click:e.warrant}},[e._v("小程序授权")])],1):n("a-form-item",[n("p",[e._v("已授权")]),e._v(" "),n("p",[e._v("appId: "+e._s(e.data.appId))])])],1)],1)},staticRenderFns:[]};var yb=n("VU/8")(gb,bb,!1,function(e){n("55nQ")},"data-v-6a41d339",null).exports,wb=[{title:"店铺名称",dataIndex:"store.storeName"},{title:"appId",dataIndex:"appId"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}}],xb={name:"wechatAppAuthList",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),url:"https://mp.weixin.qq.com/cgi-bin/componentloginpage?",warrantVisible:!1,pagination:{total:0,current:1},columns:wb,data:[]}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){}}}},methods:{handleSubmit:function(e){e.preventDefault(),this.form.validateFields(function(e,t){})},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.wechatAppAuthList(e);case 2:0===(r=n.sent).code&&(t.data=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},formatDate:function(e){return m(e)},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.wechatAppAuthList();case 2:0===(n=t.sent).code&&(e.data=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()}}},kb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wechatAppAuthList"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}}),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"createTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}}])})],1)},staticRenderFns:[]};var _b=n("VU/8")(xb,kb,!1,function(e){n("XbhP")},"data-v-6788cc78",null).exports,Sb={name:"online",data:function(){return{form:this.$form.createForm(this,{name:"coordinated"}),messageList:[],message:"",webSocekt:null}},created:function(){this.connectWebsocket()},mounted:function(){window.addEventListener("beforeunload",this.closeWebSocket)},methods:{connectWebsocket:function(){"WebSocket"in window?this.webSocekt=new WebSocket("wss://api.xiaoerd.icu/websocket/0"):alert("不支持websocket");var e=this;this.webSocekt.onerror=function(){console.log("连接失败")},this.webSocekt.onopen=function(t){var n=[];n.push({name:"customer",message:"连接成功"}),e.messageList=n},this.webSocekt.onmessage=function(t){var n=t.data,r=JSON.parse(n);void 0!==r.state&&"success"!==r.state&&this.webSocekt.close(),void 0!==r.msg&&(e.messageList.push({name:r.name,message:r.msg}),e.scrollToBottom())},this.webSocekt.onclose=function(){console.log("关闭连接")},window.onbeforeunload=function(){this.webSocekt.close()}},sendMessage:function(){var e=this.message.trim();null===e||""===e?(this.$message.warn("发送数据不能为空"),this.message=""):(this.webSocekt.send(this.message),this.messageList.push({name:"customer",message:this.message}),this.scrollToBottom(),this.message="")},scrollToBottom:function(){var e=this;setTimeout(function(){var t=e.$refs.xwBody.scrollHeight-e.$refs.xwBody.clientHeight,n=e.$refs.xwBody.scrollTop;t>0&&t>n&&(n=(n=Math.ceil((t-n)/10)+n)>t?t:n,e.$refs.xwBody.scrollTop=n,e.scrollToBottom())},13)},closeWebSocket:function(){this.webSocekt.close()}}},Cb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"formWidth"},[n("div",{ref:"xwBody",staticClass:"showBoxCon",staticStyle:{overflow:"auto"}},[n("div",{staticClass:"xw-content"},[n("div",{staticClass:"xw-chat-wrap",staticStyle:{overflow:"auto"}},[n("ul",e._l(e.messageList,function(t,r){return n("li",{key:r},["user"===t.name?n("div",[n("div",{staticClass:"xw-chat-servicer"},[n("div",{staticClass:"xw-servicer-avantar-wrap",staticStyle:{"font-size":"14px",color:"#438cff"}}),e._v(" "),n("div",{staticClass:"xw-chat-msg",staticStyle:{"border-radius":"6px"}},[n("div",{domProps:{innerHTML:e._s(t.message)}})])])]):e._e(),e._v(" "),"customer"===t.name?n("div",[n("div",{staticClass:"xw-chat-customer"},[n("div",{staticClass:"xw-customer-avantar-wrap"}),e._v(" "),n("div",{staticClass:"xw-chat-msg",staticStyle:{display:"inline-block"}},[n("div",{domProps:{innerHTML:e._s(t.message)}})])])]):e._e()])}),0)])])]),e._v(" "),n("div",{staticClass:"footers"},[n("div",{staticClass:"xw-footer-wrap"},[n("div",{staticClass:"xw-footer-content"},[n("div",{staticClass:"xw-vmodel-wrap"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"xw-content-textarea",attrs:{placeholder:"请输入您的问题"},domProps:{value:e.message},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.sendMessage(t):null},input:function(t){t.target.composing||(e.message=t.target.value)}}})]),e._v(" "),n("div",[n("button",{staticClass:"sendMsg",attrs:{plain:!0},on:{click:e.sendMessage}},[e._v("\n              发送\n            ")])])])])])])},staticRenderFns:[]};var Nb=n("VU/8")(Sb,Cb,!1,function(e){n("TCoF")},"data-v-41581f16",null).exports,Tb=function(e){return e?Te()(e).format("YYYY-MM-DD"):""},Db=[{title:"活动名称",dataIndex:"title"},{title:"类型",dataIndex:"activityType",scopedSlots:{customRender:"activityType"}},{title:"使用门槛",dataIndex:"fullMoney",scopedSlots:{customRender:"fullMoney"}},{title:"开始时间",dataIndex:"beginTime",scopedSlots:{customRender:"beginTime"}},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"endTime"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",key:"operation",width:180,scopedSlots:{customRender:"action"}}],Ib="",Mb={name:"omsCourse",data:function(){return{headers:{authorization:"authorization-text"},form:this.$form.createForm(this,{name:"coordinated"}),pagination:{total:0,current:1},visible:!1,data:[],columns:Db,courseName:null,selectList:[],omsDataType:null,typeId:null,actName:null}},created:function(){this.tableData()},computed:{rowSelection:function(){return{onChange:function(e,t){Ib=e}}}},methods:{formatDate:function(e){return Tb(e)},handleTableChange:function(e,t,n){var r={};this.pagination.current=e.current,r.page=e.current,this.searchByConditions(r)},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.fullDiscountList(e);case 2:0===(r=n.sent).code&&(t.data=r.page.list,t.pagination.total=r.page.totalCount);case 4:case"end":return n.stop()}},n,t)}))()},showModal:function(){console.log(Ib),""===Ib||0===Ib.length?this.$message.error("至少选择一条进行删除"):this.visible=!0},handleOk:function(){this.visible=!1,this.delAddPrice(Ib)},fullDiscountEdit:function(e){var t={id:e};this.bus.$emit("goToPage","addPriceEdit"),this.bus.$emit("passData",t)},addPriceAdd:function(){this.bus.$emit("goToPage","addPriceAdd")},delAddPrice:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addPriceDelte(e);case 2:0===n.sent.code&&(t.$message.success("删除成功"),t.tableData(),Ib="");case 4:case"end":return n.stop()}},n,t)}))()},cancelForm:function(){this.form.resetFields()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.addPriceList({title:e.actName});case 2:0===(n=t.sent).code&&(e.data=n.page.list,e.data.forEach(function(e){var t=new Date(Tb(e.beginTime)).getTime(),n=new Date(Tb(e.endTime)).getTime(),r=new Date(Tb(new Date)).getTime();t>r&&(e.status=1),r>n&&(e.status=2),t<=r&&r<=n&&(e.status=3)}),e.pagination.total=n.page.totalCount);case 4:case"end":return t.stop()}},t,e)}))()}}},Ob={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["actName"],expression:"['actName']"}],staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"活动名称"},model:{value:e.actName,callback:function(t){e.actName=t},expression:"actName"}})],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"},on:{click:e.tableData}},[e._v("查询")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.cancelForm}},[e._v("重置")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addPriceAdd}},[e._v("新增")])],1),e._v(" "),n("a-form-item",[n("a-button",{attrs:{type:"danger",icon:"delete"},on:{click:e.showModal}},[e._v("删除")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"删除确认",centered:"",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确定删除选中项？")])]),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,rowKey:"id",pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"activityType",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"全部商品":"部分商品"))])}},{key:"status",fn:function(t){return n("a-tag",{attrs:{color:1===t?"#108ee9":2===t?"#108ee9":"#f50"}},[e._v(e._s(1===t?"未生效":2===t?"已失效":"进行中"))])}},{key:"fullMoney",fn:function(t){return n("span",{},[e._v("订单满"+e._s(t)+"元")])}},{key:"beginTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"endTime",fn:function(t){return n("span",{},[e._v(e._s(e.formatDate(t)))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.fullDiscountEdit(r.id)}}},[e._v("修改")])])}}])})],1)},staticRenderFns:[]};var Ab=n("VU/8")(Mb,Ob,!1,function(e){n("ud/M")},"data-v-53144868",null).exports,Lb=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var Eb=[],zb=[],Rb=[],Vb=[],Bb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],$b=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Ub=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Pb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"规格",dataIndex:"spec"},{title:"换购价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Fb={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'换购价格!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' || 0 }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:Number},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{goodsId:zb,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),form3:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],selectedGoodsId:[],goodsList:[],columns:$b,goodsSelect:Ub,specSelect:Pb,specColumns:Bb,goodsModel:!1,selectedGoods:[],selectedSpec:[],categoryList:[],brandList:[],byMoney:!1,byNum:!1,byGoods:!1,specModel:!1,specData:Rb,specIds:Vb,selectedSpecId:[],specList:[]}},created:function(){this.tableData(),this.spectableData()},computed:{rowSelection:function(){return{onChange:function(e,t){t.forEach(function(e){Eb.push(e)}),zb=e}}},rowSelectionSpec:function(){return{onChange:function(e,t){t.forEach(function(e){e.specName=e.spec,Rb.push(e)}),Vb=e}}}},methods:{handleOkSpec:function(){var e=this;this.selectedSpec=[],this.specModel=!1;var t=new Vt.a;(Rb=Rb.filter(function(e){return!t.has(e.specId)&&t.set(e.specId,1)})).forEach(function(t){Vb.forEach(function(n){t.specId===n&&e.selectedSpec.push(t)})}),this.selectedSpecId=Vb},handleSubmitSpec:function(e){var t=this;e.preventDefault(),this.form3.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditionsSpec(n)})},searchByConditionsSpec:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.specList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},checkType:function(e){1===e.target.value&&(this.byMoney=!0,this.byNum=!1),2===e.target.value&&(this.byNum=!0,this.byMoney=!1)},checkGoodsType:function(e){1===e.target.value&&(this.byGoods=!1),2===e.target.value&&(this.byGoods=!0)},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedSpec)),a=r.find(function(t){return t.specId===e});a&&(a[t]=Number(n),this.selectedSpec=r,console.log(this.selectedSpec))},onCellChangeGoods:function(e,t,n){var r=[].concat(Xa()(this.selectedGoods)),a=r.find(function(t){return t.id===e});a&&(a[t]=n,this.selectedGoods=r,console.log(this.selectedGoods))},onDeleteGoods:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},onDelete:function(e){var t=[].concat(Xa()(this.selectedSpec));this.selectedSpec=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,Eb.length>0){var e=new Vt.a;Eb=Eb.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;zb.forEach(function(e){Eb.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=zb}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},spectableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({});case 2:0===(n=t.sent).code&&(e.specList=n.rows,e.pagination.total=n.total,console.log(e.pagination));case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,r.fullDiscount=1,this.searchByConditions(r)},handleTableChangeSpec:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,this.searchByConditionsSpec(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},showSpecModal:function(){this.specModel=!0,this.brandAllList()},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addAddPrice:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addPriceAdd(e);case 2:0===(r=n.sent).code&&t.bus.$emit("goToPage","addPrice"),500===r.code&&(null!==r.data&&void 0!==r.data&&t.selectedGoods.forEach(function(e){r.data.forEach(function(n){e.id===n&&t.$message.error(e.goodsName+"正在参加活动")})}),null!==r.message&&void 0!==r.message&&t.$message.error("所有商品正在参加活动"));case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=Lb(t.startValue),n.endTime=Lb(t.endValue);var r=!0;t.selectedSpec.every(function(e){if(null===e.price||void 0===e.price)return t.$message.error("请填写换购价格"),r=!1,!1});var a=[];2===n.activityType?(t.selectedGoods.forEach(function(e){a.push(e.id)}),0===a.length&&(t.$message.error("请选择活动商品"),r=!1),n.goodsIds=w()(a)):n.goodsIds=w()([]);var o=[];t.selectedSpec.every(function(e){o.push({specId:e.specId,price:e.price})}),n.specIds=w()(o),e||!0!==r||t.addAddPrice(n)})},goToBack:function(){this.bus.$emit("goToPage","addPrice")}}},Hb={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写活动名称!"}]}],expression:"['title', { rules: [{ required: true, message: '请填写活动名称!' }] }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityType",{rules:[{required:!0,message:"请选择活动类型!"}]}],expression:"['activityType', { rules: [{ required: true, message: '请选择活动类型!' }] }]"}],on:{change:e.checkGoodsType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          全部商品\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          部分商品\n        ")])],1)],1),e._v(" "),e.byGoods?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),e.byGoods&&0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDeleteGoods(r.id)}}},[e._v("删除")])])}}],null,!1,2387264605)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"使用门槛","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n      订单满\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullMoney",{rules:[{required:!0,message:"请填写使用门槛!"}]}],expression:"['fullMoney', { rules: [{ required: true, message: '请填写使用门槛!' }] }]"}],staticStyle:{width:"100px"}}),e._v("\n      元\n    ")],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showSpecModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedSpec.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.specSelect,rowKey:"specId",dataSource:e.selectedSpec,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,289541922)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1),e._v(" "),n("a-modal",{attrs:{title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkSpec},model:{value:e.specModel,callback:function(t){e.specModel=t},expression:"specModel"}},[n("a-form",{attrs:{form:e.form3,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitSpec}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionSpec,columns:e.specColumns,rowKey:"specId",selectedRowKeys:e.selectedSpecId,dataSource:e.specList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChangeSpec},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var jb=n("VU/8")(Fb,Hb,!1,function(e){n("/dPw")},"data-v-b40f2cf6",null).exports,qb=function(e){var t=e?Te()(e).format("YYYY-MM-DD"):"";return console.log(t),t};var Wb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Yb=[],Gb=[],Kb=[],Qb=[],Xb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],Jb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],Zb=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"规格",dataIndex:"specName"},{title:"换购价格",dataIndex:"price",scopedSlots:{customRender:"price"}},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],ey={name:"couponAdd",components:{EditableCell:{template:'\n      <div class="editable-cell">\n        <div v-if="editable" class="editable-cell-input-wrapper">\n          <a-input :value="value"\n                   v-decorator="[{ rules: [{ required: true, message: \'换购价格!\' }] }]"\n                   @change="handleChange" @pressEnter="check" /><a-icon\n            type="check"\n            class="editable-cell-icon-check"\n            @click="check"\n          />\n        </div>\n        <div v-else class="editable-cell-text-wrapper">\n          {{ value || \' \' || 0 }}\n          <a-icon type="edit" class="editable-cell-icon" @click="edit" />\n        </div>\n      </div>\n    ',props:{text:Number},data:function(){return{value:this.text,editable:!1}},methods:{handleChange:function(e){var t=e.target.value;this.value=t},check:function(){this.editable=!1,this.$emit("change",this.value)},edit:function(){this.editable=!0}}}},data:function(){return{goodsId:Gb,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),form3:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],selectedGoodsId:[],goodsList:[],columns:Xb,goodsSelect:Jb,specSelect:Zb,specColumns:Wb,goodsModel:!1,selectedGoods:[],selectedSpec:[],categoryList:[],brandList:[],byMoney:!1,byNum:!1,byGoods:!1,specModel:!1,specData:Kb,specIds:Qb,selectedSpecId:[],specList:[],rowSelection:{selectedRowKeys:[],onChange:this.onSelectChange}}},props:{passData:Object},created:function(){this.getInfo(this.passData.id),this.tableData(),this.spectableData()},computed:{rowSelectionSpec:function(){return{onChange:function(e,t){t.forEach(function(e){e.specName=e.spec,Kb.push(e)}),Qb=e}}}},methods:{onSelectChange:function(e,t){this.rowSelection.selectedRowKeys=Pt()(new $t.a(e)),0!==t.length&&t.forEach(function(e){Yb.push(e)}),Gb=this.rowSelection.selectedRowKeys},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addPriceInfo({id:e});case 2:0===(r=n.sent).code&&(t.data=r.addPrice,2===t.data.activityType&&(t.byGoods=!0,t.selectedGoods=t.data.goods),t.data.goodsIds?(a=JSON.parse(t.data.goodsIds),t.rowSelection={selectedRowKeys:a,onChange:t.onSelectChange,getCheckboxProps:function(e){return console.log(e),{props:{defaultChecked:a.includes(e.id)}}}}):t.rowSelection={selectedRowKeys:[],onChange:t.onSelectChange},t.data.hg.forEach(function(e){delete e.children}),t.selectedSpec=t.data.hg,t.startValue=Te()(new Date(t.data.beginTime)),t.endValue=Te()(new Date(t.data.endTime)));case 4:case"end":return n.stop()}},n,t)}))()},handleOkSpec:function(){var e=this;this.selectedSpec=[],this.specModel=!1;var t=new Vt.a;(Kb=Kb.filter(function(e){return!t.has(e.specId)&&t.set(e.specId,1)})).forEach(function(t){Qb.forEach(function(n){t.specId===n&&e.selectedSpec.push(t)})}),this.selectedSpecId=Qb},handleSubmitSpec:function(e){var t=this;e.preventDefault(),this.form3.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditionsSpec(n)})},searchByConditionsSpec:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsSpecList(e);case 2:0===(r=n.sent).code&&(t.specList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},checkType:function(e){1===e.target.value&&(this.byMoney=!0,this.byNum=!1),2===e.target.value&&(this.byNum=!0,this.byMoney=!1)},checkGoodsType:function(e){1===e.target.value&&(this.byGoods=!1),2===e.target.value&&(this.byGoods=!0)},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onCellChange:function(e,t,n){var r=[].concat(Xa()(this.selectedSpec)),a=r.find(function(t){return t.specId===e});a&&(a[t]=Number(n),this.selectedSpec=r,console.log(this.selectedSpec))},onDeleteGoods:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},onDelete:function(e){var t=[].concat(Xa()(this.selectedSpec));this.selectedSpec=t.filter(function(t){return t.specId!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,Yb.length>0){var e=new Vt.a;Yb=Yb.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var n=0;Gb.forEach(function(e){Yb.forEach(function(r){e===r.id&&(n+=r.price,r.couponCount="",t.push(r))})}),this.selectedGoods=t,this.data.totalAmount=n,this.selectedGoodsId=Gb}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,e.pagination.total=n.total);case 4:case"end":return t.stop()}},t,e)}))()},spectableData:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsSpecList({});case 2:0===(n=t.sent).code&&(e.specList=n.rows,e.pagination.total=n.total,console.log(e.pagination));case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,r.fullDiscount=1,this.searchByConditions(r)},handleTableChangeSpec:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,this.searchByConditionsSpec(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},showSpecModal:function(){this.specModel=!0,this.brandAllList()},disabledStartDate:function(e){var t=this.endValue;return!(!e||!t)&&e.valueOf()>t.valueOf()},disabledEndDate:function(e){var t=this.startValue;return!(!e||!t)&&t.valueOf()>=e.valueOf()},handleStartOpenChange:function(e){e||(this.endOpen=!0)},handleEndOpenChange:function(e){this.endOpen=e},getContent:function(e){this.data.describe=e},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||this.$message.error("图片格式不正确!");var n=e.size/1024/1024<2;return n||this.$message.error("Image must smaller than 2MB!"),t&&n},handleChange:function(e){var t,n,r,a=this;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){a.data.picUrl=e,a.loading=!1},(r=new FileReader).addEventListener("load",function(){return n(r.result)}),r.readAsDataURL(t),this.data.imgUrl=e.file.response.url):this.loading=!0},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},editAddPrice:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addPriceEdit(e);case 2:0===(r=n.sent).code&&t.bus.$emit("goToPage","addPrice"),500===r.code&&t.selectedGoods.forEach(function(e){r.data.forEach(function(n){e.id===n&&t.$message.error(e.goodsName+"正在参加活动")})});case 5:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList,n.beginTime=qb(t.startValue),n.endTime=qb(t.endValue);var r=!0;t.selectedSpec.every(function(e){if(null===e.price||void 0===e.price)return t.$message.error("请填写换购价格"),r=!1,!1});var a=[];2===n.activityType?(t.selectedGoods.forEach(function(e){a.push(e.id)}),0===a.length&&(t.$message.error("请选择活动商品"),r=!1),n.goodsIds=w()(a)):n.goodsIds=w()([]);var o=[];t.selectedSpec.every(function(e){o.push({specId:e.specId,price:e.price})}),n.specIds=w()(o),e||!0!==r||t.addAddPrice(n)})},goToBack:function(){this.bus.$emit("goToPage","addPrice")}}},ty={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"活动名称","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写活动名称!"}],initialValue:e.data.title}],expression:"['title', { rules: [{ required: true, message: '请填写活动名称!' }], initialValue: data.title }]"}]})],1),e._v(" "),n("a-form-item",{attrs:{label:"适用商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["activityType",{rules:[{required:!0,message:"请选择活动类型!"}],initialValue:e.data.activityType}],expression:"['activityType', { rules: [{ required: true, message: '请选择活动类型!' }], initialValue: data.activityType }]"}],on:{change:e.checkGoodsType}},[n("a-radio",{attrs:{value:1}},[e._v("\n          全部商品\n        ")]),e._v(" "),n("a-radio",{attrs:{value:2}},[e._v("\n          部分商品\n        ")])],1)],1),e._v(" "),e.byGoods?n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1):e._e(),e._v(" "),e.byGoods&&0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDeleteGoods(r.id)}}},[e._v("删除")])])}}],null,!1,2387264605)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"使用门槛","label-col":{span:5},"wrapper-col":{span:16}}},[e._v("\n      订单满\n      "),n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullMoney",{rules:[{required:!0,message:"请填写使用门槛!"}],initialValue:e.data.fullMoney}],expression:"['fullMoney', { rules: [{ required: true, message: '请填写使用门槛!' }], initialValue: data.fullMoney }]"}],staticStyle:{width:"100px"}}),e._v("\n      元\n    ")],1),e._v(" "),n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showSpecModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedSpec.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.specSelect,rowKey:"specId",dataSource:e.selectedSpec,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"price",fn:function(t,r){return[n("editable-cell",{staticStyle:{width:"80px"},attrs:{text:t},on:{change:function(t){return e.onCellChange(r.specId,"price",t)}}})]}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.specId)}}},[e._v("删除")])])}}],null,!1,289541922)}):e._e(),e._v(" "),n("a-form-item",{attrs:{label:"活动时间","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-date-picker",{attrs:{"disabled-date":e.disabledStartDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"开始时间"},on:{openChange:e.handleStartOpenChange},model:{value:e.startValue,callback:function(t){e.startValue=t},expression:"startValue"}}),e._v("\n      -\n      "),n("a-date-picker",{attrs:{"disabled-date":e.disabledEndDate,"show-time":"",format:"YYYY-MM-DD",placeholder:"结束时间",open:e.endOpen},on:{openChange:e.handleEndOpenChange},model:{value:e.endValue,callback:function(t){e.endValue=t},expression:"endValue"}})],1),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        确定\n      ")]),e._v(" "),n("a-button",{on:{click:e.goToBack}},[e._v("\n        返回\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",destroyOnClose:!0,centered:"",width:"800",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1),e._v(" "),n("a-modal",{attrs:{title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOkSpec},model:{value:e.specModel,callback:function(t){e.specModel=t},expression:"specModel"}},[n("a-form",{attrs:{form:e.form3,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitSpec}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelectionSpec,columns:e.specColumns,rowKey:"specId",selectedRowKeys:e.selectedSpecId,dataSource:e.specList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChangeSpec},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var ny=n("VU/8")(ey,ty,!1,function(e){n("3OCK")},"data-v-17f37d20",null).exports;var ry=[],ay=[],oy=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"规格",dataIndex:"spec"},{title:"库存",dataIndex:"stock"}],iy=[{title:"图片",dataIndex:"picUrl",scopedSlots:{customRender:"picUrl"}},{title:"商品名称",dataIndex:"goodsName"},{title:"折扣价格",dataIndex:"discountPrice"},{title:"库存",dataIndex:"stock"},{title:"操作",key:"operation",width:80,scopedSlots:{customRender:"action"}}],sy={name:"couponAdd",data:function(){return{goodsId:ay,startValue:null,endValue:null,endOpen:!1,uploadUrl:"https://api.xiaoerd.icu/app/fileupload/uploadimg/x?token="+sessionStorage.token,loadingOne:!1,loading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),form2:this.$form.createForm(this,{name:"coordinated"}),replaceFields:{children:"children",title:"name",key:"menuId"},pagination:{total:0,current:1},menuList:[],richTextData:null,data:{title:null,content:null,menuIdList:[],picUrl:null,imgUrl:null,describe:null,fullAmount:null},selectList:[{text:"通用",value:-1},{text:"新用户",value:1},{text:"分享",value:2}],selectedGoodsId:[],goodsList:[],columns:oy,goodsSelect:iy,goodsModel:!1,selectedGoods:[],categoryList:[],brandList:[],rowSelection:{selectedRowKeys:[],onChange:this.onSelectChange}}},created:function(){this.getInfo(localStorage.storeId),this.tableData()},methods:{onSelectChange:function(e,t){this.rowSelection.selectedRowKeys=Pt()(new $t.a(e)),0!==t.length&&t.forEach(function(e){ry.push(e)}),ay=this.rowSelection.selectedRowKeys},getInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.infoPickLeak({id:e});case 2:0===(r=n.sent).code&&(t.selectedGoods=r.pickLeakGoods,a=[],t.selectedGoods.forEach(function(e){a.push(e.id)}),t.goodsList?(o=a,t.rowSelection={selectedRowKeys:o,onChange:t.onSelectChange,getCheckboxProps:function(e){return console.log(e),{props:{defaultChecked:o.includes(e.id)}}}}):t.rowSelection={selectedRowKeys:[],onChange:t.onSelectChange});case 4:case"end":return n.stop()}},n,t)}))()},brandAllList:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.brandAllList();case 2:0===(n=t.sent).code&&(e.brandList=n.data);case 4:case"end":return t.stop()}},t,e)}))()},checkUse:function(e){-1===e.target.value&&this.form.setFieldsValue({fullAmount:null})},onDelete:function(e){var t=[].concat(Xa()(this.selectedGoods));this.selectedGoods=t.filter(function(t){return t.id!==e})},handleSubmitGoods:function(e){var t=this;e.preventDefault(),this.form2.validateFields(function(e,n){void 0!==n.goodsName&&null!==n.goodsName&&(n.goodsName=n.goodsName.trim()),t.goodsName=n.goodsName,t.brandId=n.brandId,t.pagination.current=1,n.status=1,e||t.searchByConditions(n)})},handleOk:function(){if(this.goodsModel=!1,ry.length>0){var e=new Vt.a;ry=ry.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});var t=this.selectedGoods;t=t.filter(function(t){return!e.has(t.id)&&e.set(t.id,1)});ay.forEach(function(e){ry.forEach(function(n){e===n.id&&t.push(n)})}),this.selectedGoods=t,this.selectedGoodsId=ay}},getCategory:function(){var e=this;return f()(u.a.mark(function t(){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsCategoryList({});case 2:0===(n=t.sent).code&&(e.categoryList=n.rows);case 4:case"end":return t.stop()}},t,e)}))()},searchByConditions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.goodsList(e);case 2:0===(r=n.sent).code&&(t.goodsList=r.rows,t.pagination.total=r.total);case 4:case"end":return n.stop()}},n,t)}))()},tableData:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.goodsList({status:1});case 2:0===(n=t.sent).code&&(e.goodsList=n.rows,r=[],e.selectedGoods.forEach(function(e){r.push(e.id)}),e.pagination.total=n.total,e.goodsList?(a=r,e.rowSelection={selectedRowKeys:a,onChange:e.onSelectChange,getCheckboxProps:function(e){return console.log(e),{props:{defaultChecked:a.includes(e.id)}}}}):e.rowSelection={selectedRowKeys:[],onChange:e.onSelectChange});case 4:case"end":return t.stop()}},t,e)}))()},handleTableChange:function(e,t,n){var r={};r.goodsName=this.goodsName,r.categoryId=this.categoryId,this.pagination.current=e.current,r.page=e.current,r.status=1,this.searchByConditions(r)},showGoodsModal:function(){this.goodsModel=!0,this.brandAllList()},onCheck:function(e,t){t.halfCheckedKeys.length>0?this.data.menuIdList=e.concat(t.halfCheckedKeys):this.data.menuIdList=e},addPickLeak:function(e){var t=this;return f()(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$Http.addPickLeak(e);case 2:0===n.sent.code&&t.$message.success("保存成功");case 4:case"end":return n.stop()}},n,t)}))()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,n){n.menuIdList=t.data.menuIdList;var r=[];t.selectedGoods.forEach(function(e){r.push({goodsId:Number(e.id)})}),n.goods=w()(r),e||t.addPickLeak(n)})}}},cy={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleAdd"},[n("a-form",{staticClass:"formWidth",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"选择商品","label-col":{span:5},"wrapper-col":{span:16}}},[n("a-button",{attrs:{type:"primary"},on:{click:e.showGoodsModal}},[e._v("选择商品")])],1),e._v(" "),0!==e.selectedGoods.length?n("a-table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:e.goodsSelect,rowKey:"id",dataSource:e.selectedGoods,pagination:!1},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}},{key:"action",fn:function(t,r){return n("span",{},[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onDelete(r.id)}}},[e._v("删除")])])}}],null,!1,586734381)}):e._e(),e._v(" "),n("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"}},[e._v("\n        保存\n      ")])],1)],1),e._v(" "),n("a-modal",{attrs:{title:"商品",centered:"",width:"1000px",okText:"确认",cancelText:"取消"},on:{ok:e.handleOk},model:{value:e.goodsModel,callback:function(t){e.goodsModel=t},expression:"goodsModel"}},[n("a-form",{attrs:{form:e.form2,autoComplete:"off",layout:"vertical"},on:{submit:e.handleSubmitGoods}},[n("a-form-item",{style:{display:"inline-block"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goodsName"],expression:"['goodsName']"}],staticStyle:{width:"200px"},attrs:{placeholder:"商品名称"}})],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["brandId"],expression:"['brandId']"}],staticStyle:{width:"200px","z-index":"999999"},attrs:{placeholder:"品牌"}},e._l(e.brandList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.brandName))])}),1)],1),e._v(" "),n("a-form-item",{style:{display:"inline-block"}},[n("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[e._v("查询")])],1)],1),e._v(" "),n("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,rowKey:"id",selectedRowKeys:e.selectedGoodsId,dataSource:e.goodsList,scroll:{y:500},pagination:e.pagination},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"picUrl",fn:function(e){return n("img",{attrs:{src:e,width:"60px"}})}}])})],1)],1)},staticRenderFns:[]};var ly=n("VU/8")(sy,cy,!1,function(e){n("hYlO")},"data-v-2e80fe12",null).exports,uy={name:"mycontent",props:{isChoiceStore:Boolean},components:{home:o,user:b,userAdd:_,userEdit:N,role:O,roleAdd:E,roleEdit:V,advert:F,advertAdd:te,advertEdit:me,activity:Pn,activityAdd:jn,activityEdit:Yn,activityOrder:Zn,activityOrderDetail:ar,member:ye,memberDetail:ke,memberEdit:Ce,memberCardAdd:Me,memberCardEdit:Le,card:Be,cardAdd:Pe,cardEdit:je,cardOrder:tt,cardOrderDetail:it,book:ft,bookAdd:Ct,bookEdit:It,order:zt,orderAdd:Xt,shopOrder:rn,orderDetail:fn,shopOrderDetail:yn,paper:Sn,paperAdd:In,paperEdit:zn,choiceStore:c,goodsCategory:lr,goodsCategoryAdd:fr,goodsCategoryEdit:hr,goods:wr,goodsAdd:Sr,goodsEdit:Mr,store:zr,storeAdd:Br,storeEdit:Pr,storeSetting:jr,wechatSettings:Yr,appMenu:Xr,appMenuAdd:ea,appMenuEdit:ra,sysMessage:ca,topic:pa,question:ya,questionAdd:_a,questionEdit:Ta,menuList:Aa,menuAdd:za,menuEdit:Ba,hrmUser:Ha,hrmUserAdd:Wa,hrmUserEdit:Ka,salary:io,salaryAdd:lo,salaryEdit:mo,salarySort:vo,visit:Io,borrowRanking:Ao,memberAnalysis:Ro,audioList:Po,audioAdd:Yo,audioEdit:Zo,tag:ai,tagAdd:si,tagAddLevel:ui,tagEdit:mi,answer:gi,answerDetail:wi,config:Ci,configAdd:Di,configEdit:Oi,tenant:Ri,tenantAdd:$i,tenantEdit:Fi,clockSettings:Yi,clockSettingsAdd:Qi,clockSettingsEdit:Zi,clock:rs,clockDetail:is,evaluation:ds,reply:ps,autoSalaryList:Oc,xzt:Ec,columnCtrlList:Uc,columnCtrlAdd:Hc,columnCtrlEdit:Wc,contentCtrlList:Jc,contentCtrlAdd:tl,contentCtrlEdit:al,storeCode:ul,storeCodeAdd:ml,storeCodeEdit:vl,storeCodeDetail:yl,guideSetting:kl,codeAnalysis:Nl,coupon:Ol,couponAdd:$l,couponEdit:Yl,Issue:Zl,helpCenter:au,helpCenterAdd:su,helpCenterEdit:uu,point:pu,pointsSetting:gu,pointsSign:wu,pointsExchange:Nu,pointsExchangeAdd:Lu,pointsExchangeDetail:Vu,distributionSetting:Uu,distributionSettingTime:Hu,distributionConfig:Wu,distributionCommision:Qu,brand:td,brandAdd:id,brandEdit:ud,spec:hd,specEdit:xd,specAdd:bd,withdraw:Cd,fundDetails:Md,fare:zd,fareAdd:Ud,fareEdit:jd,installVideo:Kd,installVideoAdd:Jd,installVideoEdit:tf,invoice:sf,invoiceDetail:mf,refundOrder:bf,customerService:xf,give:Nf,giveAdd:Of,giveEdit:Rf,mailOrder:Uf,mailOrderDetail:Wf,agentInvoice:Xf,agentInvoiceAdd:em,agentInvoiceEdit:rm,agentCustomer:lm,agentCustomerAdd:mm,agentCustomerEdit:vm,accountBook:Cm,warrant:Im,assignUser:Lm,agentBill:Bm,agentBillAdd:Fm,agentBillEdit:Wm,agentReport:Xm,agentReportAdd:ep,agentReportEdit:rp,categoryAttr:ys,categoryAttrAdd:ks,categoryAttrEdit:Cs,agentUser:cp,agentUserAdd:dp,agentUserEdit:pp,agentContract:yp,agentContractAdd:kp,agentContractEdit:Cp,agentMessage:Mp,agentMessageAdd:Ep,companyVerify:$p,shareSetting:Fp,suit:Yp,suitAdd:th,suitEdit:lh,version:ph,versionAdd:gh,versionEdit:wh,payscoreOrder:Nh,payScoreDetail:Lh,bookRecommend:Bh,bookRecommendAdd:Hh,bookRecommendEdit:Wh,seckill:Xh,seckillAdd:xv,seckillEdit:ov,seckillDetail:mv,groupon:Nv,grouponAdd:Ev,grouponEdit:Fv,grouponDetail:Qv,grouponRecord:tg,grouponRecordDetail:og,earAudioList:ug,earAudioAdd:hg,earAudioEdit:wg,earAudioDetail:_g,columnList:Dg,columnAdd:Og,columnEdit:Eg,articleList:$g,articleAdd:Hg,articleEdit:Yg,recruitmentList:Jg,recruitmentAdd:tb,recruitmentEdit:ab,applicantList:lb,applicantDetail:fb,userLog:vb,wechatAppAuth:yb,wechatAppAuthList:_b,online:Nb,dataOverview:Ls,flowOverview:Vs,homeSet:Fs,homeMenuAdd:qs,homeMenuEdit:Gs,homeMenuList:Zs,storeHomeMenu:oc,fullDiscountList:dc,fullDiscountEdit:Tc,fullDiscountAdd:yc,wcome:r.default,addPrice:Ab,addPriceAdd:jb,addPriceEdit:ny,pickLeakEdit:ly},data:function(){return{menuHasList:["home","user","userAdd","userEdit","role","roleAdd","roleEdit","advert","advertAdd","advertEdit","activity","activityAdd","activityEdit","activityOrder","activityOrderDetail","member","memberDetail","memberEdit","memberCardAdd","memberCardEdit","card","cardAdd","cardEdit","cardOrder","cardOrderDetail","book","bookAdd","bookEdit","order","orderAdd","shopOrder","orderDetail","shopOrderDetail","paper","paperAdd","paperEdit","goodsCategory","goodsCategoryAdd","goodsCategoryEdit","goods","goodsAdd","goodsEdit","store","storeAdd","storeEdit","storeSetting","wechatSettings","appMenu","appMenuAdd","appMenuEdit","sysMessage","topic","question","questionAdd","questionEdit","menuList","menuAdd","menuEdit","hrmUser","hrmUserAdd","hrmUserEdit","salary","salaryAdd","salaryEdit","salarySort","visit","borrowRanking","memberAnalysis","audioList","audioAdd","audioEdit","tag","tagAdd","tagAddLevel","tagEdit","answer","answerDetail","config","configAdd","configEdit","tenant","tenantAdd","tenantEdit","clockSettings","clockSettingsAdd","clockSettingsEdit","clock","clockDetail","evaluation","reply","autoSalaryList","xzt","columnCtrlList","columnCtrlAdd","columnCtrlEdit","contentCtrlList","contentCtrlAdd","contentCtrlEdit","storeCode","storeCodeAdd","storeCodeEdit","storeCodeDetail","guideSetting","codeAnalysis","coupon","couponAdd","couponEdit","Issue","helpCenter","helpCenterAdd","helpCenterEdit","point","pointsSetting","pointsSign","pointsExchange","pointsExchangeAdd","pointsExchangeDetail","distributionSetting","distributionSettingTime","distributionConfig","distributionCommision","spec","specAdd","specEdit","brand","brandAdd","brandEdit","withdraw","fundDetails","fare","fareAdd","fareEdit","installVideo","installVideoAdd","installVideoEdit","invoice","invoiceDetail","refundOrder","customerService","give","giveAdd","giveEdit","mailOrder","mailOrderDetail","agentInvoice","agentInvoiceAdd","agentInvoiceEdit","agentCustomer","agentCustomerAdd","agentCustomerEdit","accountBook","warrant","assignUser","agentBill","agentBillAdd","agentBillEdit","agentReport","agentReportAdd","agentReportEdit","categoryAttr","categoryAttrAdd","categoryAttrEdit","agentUser","agentUserAdd","agentUserEdit","agentContract","agentContractAdd","agentContractEdit","agentMessage","agentMessageAdd","companyVerify","shareSetting","suit","suitAdd","suitEdit","version","versionAdd","versionEdit","payscoreOrder","payScoreDetail","bookRecommend","bookRecommendAdd","bookRecommendEdit","seckill","seckillAdd","seckillEdit","seckillDetail","groupon","grouponAdd","grouponEdit","grouponDetail","grouponRecord","grouponRecordDetail","earAudioList","earAudioAdd","earAudioEdit","earAudioDetail","columnList","columnAdd","columnEdit","articleList","articleAdd","articleEdit","recruitmentList","recruitmentAdd","recruitmentEdit","applicantList","applicantDetail","userLog","wechatAppAuth","wechatAppAuthList","online","dataOverview","flowOverview","homeSet","homeMenuAdd","homeMenuEdit","homeMenuList","storeHomeMenu","fullDiscountList","fullDiscountAdd","fullDiscountEdit","wcome","addPrice","addPriceAdd","addPriceEdit","pickLeakEdit"],passData:null,tab:"wcome",tit:["欢迎页"]}},mounted:function(){var e=this;this.bus.$on("goToPage",function(t){console.log(t),e.goToPage(t)}),this.bus.$on("passData",function(t){console.log(t),e.passData=t})},methods:{goToPage:function(e){switch(-1!==this.menuHasList.indexOf(e)?this.tab=e:this.tab="home",this.tit=["主页"],e){case"sys":this.tit=["系统管理"];break;case"wcome":this.tit=["欢迎页"];break;case"role":this.tit=["系统管理","角色管理"];break;case"roleAdd":this.tit=["系统管理","角色新增"];break;case"roleEdit":this.tit=["系统管理","角色编辑"];break;case"user":this.tit=["系统管理","用户管理"];break;case"userAdd":this.tit=["系统管理","用户管理","用户新增"];break;case"userEdit":this.tit=["系统管理","用户管理","用户编辑"];break;case"advert":this.tit=["营销管理","广告管理"];break;case"advertAdd":this.tit=["营销管理","广告管理","广告新增"];break;case"advertEdit":this.tit=["营销管理","广告管理","广告修改"];break;case"activity":this.tit=["活动管理"];break;case"activityAdd":this.tit=["活动管理","新增"];break;case"activityEdit":this.tit=["活动管理","编辑"];break;case"activityOrder":this.tit=["订单管理","活动订单"];break;case"activityOrderDetail":this.tit=["活动订单","订单详情"];break;case"member":this.tit=["会员管理","会员管理"];break;case"memberDetail":this.tit=["会员管理","会员详情"];break;case"memberEditl":this.tit=["会员管理","会员编辑"];break;case"memberCardAdd":this.tit=["会员管理","会员卡新增"];break;case"memberCardEdit":this.tit=["会员管理","会员卡编辑"];break;case"card":this.tit=["会员管理","会员卡管理"];break;case"cardAdd":this.tit=["会员管理","会员卡管理","会员新增"];break;case"cardEdit":this.tit=["会员管理","会员卡管理","会员编辑"];break;case"cardOrder":this.tit=["订单管理","会员卡订单"];break;case"cardOrderDetail":this.tit=["订单管理","会员卡订单","会员卡订单详情"];break;case"book":this.tit=["图书借阅","图书管理"];break;case"bookAdd":this.tit=["图书借阅","图书管理","图书新增"];break;case"bookEdit":this.tit=["图书借阅","图书管理","图书编辑"];break;case"order":this.tit=["订单管理","图书订单"];break;case"orderAdd":this.tit=["订单管理","借阅订单","订单新增"];break;case"shopOrder":this.tit=["订单管理","商品订单"];break;case"orderDetail":this.tit=["订单管理","图书订单","订单详情"];break;case"shopOrderDetail":this.tit=["订单管理","商品订单","订单详情"];break;case"paper":this.tit=["问卷管理"];break;case"paperAdd":this.tit=["问卷管理","新增问卷"];break;case"paperEdit":this.tit=["问卷管理","编辑问卷"];break;case"goodsCategory":this.tit=["商场管理","分类管理"];break;case"goodsCategoryAdd":this.tit=["商场管理","分类管理","分类新增"];break;case"goodsCategoryEdit":this.tit=["商场管理","分类管理","分类编辑"];break;case"goods":this.tit=["商场管理","商品管理"];break;case"goodsAdd":this.tit=["商场管理","商品管理","商品新增"];break;case"goodsEdit":this.tit=["商场管理","商品管理","商品编辑"];break;case"store":this.tit=["系统管理","店铺管理"];break;case"storeAdd":this.tit=["系统管理","店铺新增"];break;case"storeEdit":this.tit=["系统管理","店铺编辑"];break;case"storeSetting":this.tit=["系统管理","店铺设置"];break;case"wechatSettings":this.tit=["系统管理","微信设置"];break;case"appMenu":this.tit=["系统管理","模块管理"];break;case"appMenuAdd":this.tit=["系统管理","模块管理","新增"];break;case"appMenuEdit":this.tit=["系统管理","模块管理","编辑"];break;case"sysMessage":this.tit=["系统管理","消息提醒"];break;case"topic":this.tit=["圈子管理","帖子管理"];break;case"question":this.tit=["问卷管理","题库管理"];break;case"questionAdd":this.tit=["问卷管理","新增问题"];break;case"questionEdit":this.tit=["问卷管理","编辑问题"];break;case"menuList":this.tit=["系统管理","菜单管理"];break;case"menuAdd":this.tit=["系统管理","菜单新增"];break;case"menuEdit":this.tit=["系统管理","菜单编辑"];break;case"hrmUser":this.tit=["薪资管理","员工管理"];break;case"hrmUserAdd":this.tit=["薪资管理","员工新增"];break;case"hrmUserEdit":this.tit=["薪资管理","员工编辑"];break;case"salary":this.tit=["薪资管理","工资管理"];break;case"salaryAdd":this.tit=["薪资管理","工资新增"];break;case"salaryEdit":this.tit=["薪资管理","工资编辑"];break;case"salarySort":this.tit=["薪资管理","工资项排序"];break;case"visit":this.tit=["统计分析","访问分析"];break;case"borrowRanking":this.tit=["统计分析","借阅排行"];break;case"memberAnalysis":this.tit=["统计分析","借阅分析"];break;case"audioList":this.tit=["图书借阅","音频管理"];break;case"audioAdd":this.tit=["图书借阅","音频新增"];break;case"audioEdit":this.tit=["图书借阅","音频编辑"];break;case"tag":this.tit=["图书借阅","标签管理"];break;case"tagAdd":this.tit=["图书借阅","标签新增"];break;case"tagAddLevel":this.tit=["图书借阅","三级标签新增"];break;case"tagEdit":this.tit=["图书借阅","标签编辑"];break;case"answer":this.tit=["问卷管理","答卷管理"];break;case"answerDetail":this.tit=["问卷管理","答卷详情"];break;case"config":this.tit=["系统管理","参数配置"];break;case"configAdd":this.tit=["系统管理","参数新增"];break;case"configEdit":this.tit=["系统管理","参数编辑"];break;case"tenant":this.tit=["系统管理","租户管理"];break;case"tenantAdd":this.tit=["系统管理","租户新增"];break;case"tenantEdit":this.tit=["系统管理","租户编辑"];break;case"clockSettings":this.tit=["考勤管理","考勤设置"];break;case"clockSettingsAdd":this.tit=["考勤管理","考勤设置新增"];break;case"clockSettingsEdit":this.tit=["考勤管理","考勤设置修改"];break;case"clock":this.tit=["考勤管理","考勤统计"];break;case"clockDetail":this.tit=["考勤管理","考勤统计详情"];break;case"evaluation":this.tit=["订单管理","评价管理"];break;case"reply":this.tit=["评价管理","商户回复"];break;case"evaluationDetail":this.tit=["评价管理","评价详情"];break;case"autoSalaryList":case"xzt":this.tit=["薪资管理","智能工资条"];break;case"columnCtrlList":case"columnCtrlAdd":case"columnCtrlEdit":this.tit=["内容管理","栏目管理"];break;case"contentCtrlList":case"contentCtrlAdd":case"contentCtrlEdit":this.tit=["内容管理","文章管理"];break;case"storeCode":this.tit=["核销管理","店铺二维码"];break;case"storeCodeAdd":this.tit=["核销管理","生成二维码"];break;case"storeCodeEdit":this.tit=["核销管理","编辑二维码"];break;case"storeCodeDetail":this.tit=["核销管理","二维码详情"];break;case"guideSetting":this.tit=["核销管理","设置引导页"];break;case"codeAnalysis":this.tit=["核销管理","统计分析"];break;case"coupon":case"couponAdd":case"couponEdit":case"Issue":this.tit=["营销管理","优惠券管理"];break;case"helpCenter":this.tit=["系统设置","帮助中心"];break;case"helpCenterAdd":this.tit=["帮助中心","新增"];break;case"helpCenterEdit":this.tit=["帮助中心","修改"];break;case"point":this.tit=["营销管理","积分查询"];break;case"pointsSetting":this.tit=["系统设置","积分设置"];break;case"pointsSign":this.tit=["系统设置","签到设置"];break;case"pointsExchange":this.tit=["积分兑换","列表"];break;case"pointsExchangeAdd":this.tit=["积分兑换","新增"];break;case"pointsExchangeDetail":this.tit=["积分兑换","详情"];break;case"distributionSetting":this.tit=["营销管理","营销设置"];break;case"distributionSettingTime":this.tit=["营销管理","分销设置时长次数"];break;case"distributionConfig":this.tit=["营销管理","分销配置"];break;case"distributionCommision":this.tit=["营销管理","佣金明细"];break;case"spec":case"specAdd":case"specEdit":this.tit=["商品管理","规格管理"];break;case"brand":case"brandAdd":case"brandEdit":this.tit=["品牌管理","品牌管理"];break;case"withdraw":this.tit=["财务管理","提现管理"];break;case"fundDetails":this.tit=["财务管理","资金明细"];break;case"fare":case"fareAdd":case"fareEdit":this.tit=["商品管理","运费模板"];break;case"installVideo":case"installVideoAdd":case"installVideoEdit":this.tit=["基础设置","安装视频"];break;case"invoice":this.tit=["商品管理","开票管理"];break;case"invoiceDetail":this.tit=["开票管理","详情"];break;case"refundOrder":this.tit=["订单管理","退款管理"];break;case"customerService":this.tit=["客服管理","客服管理"];break;case"give":case"giveAdd":case"giveEdit":this.tit=["营销管理","赠送规则"];break;case"mailOrder":this.tit=["订单管理","物流信息"];break;case"mailOrderDetail":this.tit=["物流信息","详情"];break;case"agentInvoice":this.tit=["发票分类","列表"];break;case"agentInvoiceAdd":this.tit=["发票分类","新增"];break;case"agentInvoiceEdit":this.tit=["发票分类","编辑"];break;case"agentCustomer":this.tit=["客户管理","列表"];break;case"agentCustomerAdd":this.tit=["客户管理","新增"];break;case"agentCustomerEdit":this.tit=["客户管理","编辑"];break;case"accountBook":this.tit=["账簿","账簿信息"];break;case"warrant":this.tit=["客户","授权"];break;case"assignUser":this.tit=["客户","指派"];break;case"agentBill":this.tit=["票据管理","列表"];break;case"agentBillAdd":this.tit=["票据管理","新增"];break;case"agentBillEdit":this.tit=["票据管理","修改"];break;case"agentReport":this.tit=["报表管理","列表"];break;case"agentReportAdd":this.tit=["报表管理","新增"];break;case"agentReportEdit":this.tit=["报表管理","编辑"];break;case"categoryAttr":this.tit=["分类管理","属性列表"];break;case"categoryAttrAdd":this.tit=["分类管理","增加属性"];break;case"categoryAttrEdit":this.tit=["分类管理","编辑属性"];break;case"agentUser":this.tit=["用户管理","用户列表"];break;case"agentUserAdd":this.tit=["用户管理","用户新增"];break;case"agentUserEdit":this.tit=["用户管理","用户编辑"];break;case"agentContract":this.tit=["合同管理","合同列表"];break;case"agentContractAdd":this.tit=["合同管理","合同新增"];break;case"agentContractEdit":this.tit=["合同管理","合同编辑"];break;case"agentMessage":this.tit=["合同管理","消息提醒"];break;case"agentMessageAdd":this.tit=["消息提醒","新增"];break;case"companyVerify":this.tit=["核名记录","列表"];break;case"shareSetting":this.tit=["基础设置","分享设置"];break;case"suit":case"suitAdd":case"suitEdit":this.tit=["图书管理","套装书管理"];break;case"version":case"versionAdd":case"versionEdit":this.tit=["系统管理","版本管理"];break;case"payscoreOrder":case"payScoreDetail":this.tit=["订单管理","支付分订单"];break;case"bookRecommend":this.tit=["图书管理","图书推荐"];break;case"bookRecommendAdd":this.tit=["图书管理","图书推荐新增"];break;case"bookRecommendEdit":this.tit=["图书管理","图书推荐修改"];break;case"seckill":case"seckillAdd":case"seckillEdit":this.tit=["营销管理","秒杀"];break;case"seckillDetail":this.tit=["营销管理","秒杀详情"];break;case"groupon":this.tit=["营销管理","拼团"];break;case"grouponAdd":this.tit=["营销管理","拼团新增"];break;case"grouponEdit":this.tit=["营销管理","拼团修改"];break;case"grouponDetail":this.tit=["营销管理","拼团详情"];break;case"grouponRecord":this.tit=["营销管理","拼团记录"];break;case"grouponRecordDetail":this.tit=["营销管理","记录详情"];break;case"earAudioList":this.tit=["音频管理","列表"];break;case"earAudioAdd":this.tit=["音频管理","新增"];break;case"earAudioEdit":this.tit=["音频管理","修改"];break;case"earAudioDetail":this.tit=["音频管理","详情"];break;case"columnList":this.tit=["官网模块","栏目管理"];break;case"columnAdd":this.tit=["栏目管理","栏目新增"];break;case"columnEdit":this.tit=["栏目管理","栏目编辑"];break;case"articleList":this.tit=["官网模块","文章管理"];break;case"articleAdd":this.tit=["文章管理","文章新增"];break;case"articleEdit":this.tit=["文章管理","文章修改"];break;case"recruitmentList":this.tit=["招聘管理","招聘列表"];break;case"recruitmentAdd":this.tit=["招聘管理","新增"];break;case"recruitmentEdit":this.tit=["招聘管理","修改"];break;case"applicantList":this.tit=["求职信息","列表"];break;case"applicantDetail":this.tit=["求职信息","详情"];break;case"userLog":this.tit=["用户日志","列表"];break;case"wechatAppAuth":this.tit=["小程序授权","小程序"];break;case"wechatAppAuthList":this.tit=["小程序管理","小程序"];break;case"online":this.tit=["在线客服","在线联系"];break;case"dataOverview":this.tit=["财务管理","数据概况"];break;case"flowOverview":this.tit=["财务管理","流量概况"];break;case"homeSet":this.tit=["系统管理","首页设置"];break;case"homeMenuAdd":case"homeMenuEdit":case"homeMenuList":this.tit=["系统管理","首页菜单"];break;case"storeHomeMenu":this.tit=["基础配置","首页菜单"];break;case"fullDiscountList":case"fullDiscountAdd":case"fullDiscountEdit":this.tit=["营销管理","满减管理"];break;case"addPrice":case"addPriceAdd":case"addPriceEdit":this.tit=["营销管理","加价管理"];break;case"pickLeakEdit":this.tit=["营销管理","捡漏管理"]}}}},dy={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-layout-content",{staticClass:"mycontent"},[n("a-breadcrumb",{staticStyle:{margin:"16px 0"}},e._l(e.tit,function(t,r){return n("a-breadcrumb-item",{key:r},[e._v(e._s(t))])}),1),e._v(" "),n(e.isChoiceStore?"choiceStore":e.tab,{tag:"component",staticClass:"content",attrs:{passData:e.passData}})],1)},staticRenderFns:[]};var fy=n("VU/8")(uy,dy,!1,function(e){n("GW2b")},"data-v-47bc3b32",null);t.a=fy.exports},"3+qe":function(e,t){},"3C/1":function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("qCoq"),n("UvrK"),n("Xjd4"),n("bqnK"),e.exports=n("FeBl").Map},"3CrP":function(e,t){},"3OCK":function(e,t){},"3OwB":function(e,t){},"3wNa":function(e,t){},"3xRo":function(e,t){},"4BaI":function(e,t){},"4FQh":function(e,t){},"4WTo":function(e,t,n){var r=n("NWt+");e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},"4XYh":function(e,t){},"4kt0":function(e,t){},"4ta8":function(e,t){},"55nQ":function(e,t){},"5I4A":function(e,t){},"5dpG":function(e,t){e.exports="data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ0cHgiIGhlaWdodD0iMzdweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgMSAtMjQ4IC0xODggKSI+DQogICAgPHBhdGggZD0iTSAzMy4zNDM3NSAxMi45NTUyNTU2ODE4MTgyICBDIDMzLjY3ODY4NTg5NzQzNTkgMTIuNjIyMzk1ODMzMzMzMyAgMzMuODQ2MTUzODQ2MTUzOCAxMi4yMjgyMTk2OTY5Njk3ICAzMy44NDYxNTM4NDYxNTM4IDExLjc3MjcyNzI3MjcyNzMgIEMgMzMuODQ2MTUzODQ2MTUzOCAxMS4zMTcyMzQ4NDg0ODQ4ICAzMy42Nzg2ODU4OTc0MzU5IDEwLjkyMzA1ODcxMjEyMTIgIDMzLjM0Mzc1IDEwLjU5MDE5ODg2MzYzNjQgIEMgMzMuMDA4ODE0MTAyNTY0MSAxMC4yNTczMzkwMTUxNTE1ICAzMi42MTIxNzk0ODcxNzk1IDEwLjA5MDkwOTA5MDkwOTEgIDMyLjE1Mzg0NjE1Mzg0NjIgMTAuMDkwOTA5MDkwOTA5MSAgQyAzMS42OTU1MTI4MjA1MTI4IDEwLjA5MDkwOTA5MDkwOTEgIDMxLjI5ODg3ODIwNTEyODIgMTAuMjU3MzM5MDE1MTUxNSAgMzAuOTYzOTQyMzA3NjkyMyAxMC41OTAxOTg4NjM2MzY0ICBMIDI3LjA3NjkyMzA3NjkyMzEgMTQuNDI2ODQ2NTkwOTA5MSAgTCAyNy4wNzY5MjMwNzY5MjMxIDYuNzI3MjcyNzI3MjcyNzMgIEMgMjcuMDc2OTIzMDc2OTIzMSA2LjI3MTc4MDMwMzAzMDMgIDI2LjkwOTQ1NTEyODIwNTEgNS44Nzc2MDQxNjY2NjY2NiAgMjYuNTc0NTE5MjMwNzY5MiA1LjU0NDc0NDMxODE4MTgyICBDIDI2LjIzOTU4MzMzMzMzMzMgNS4yMTE4ODQ0Njk2OTY5NyAgMjUuODQyOTQ4NzE3OTQ4NyA1LjA0NTQ1NDU0NTQ1NDU1ICAyNS4zODQ2MTUzODQ2MTU0IDUuMDQ1NDU0NTQ1NDU0NTUgIEMgMjQuOTI2MjgyMDUxMjgyMSA1LjA0NTQ1NDU0NTQ1NDU1ICAyNC41Mjk2NDc0MzU4OTc0IDUuMjExODg0NDY5Njk2OTcgIDI0LjE5NDcxMTUzODQ2MTUgNS41NDQ3NDQzMTgxODE4MiAgQyAyMy44NTk3NzU2NDEwMjU2IDUuODc3NjA0MTY2NjY2NjYgIDIzLjY5MjMwNzY5MjMwNzcgNi4yNzE3ODAzMDMwMzAzICAyMy42OTIzMDc2OTIzMDc3IDYuNzI3MjcyNzI3MjcyNzMgIEwgMjMuNjkyMzA3NjkyMzA3NyAxNC40MjY4NDY1OTA5MDkxICBMIDE5LjgwNTI4ODQ2MTUzODUgMTAuNTkwMTk4ODYzNjM2NCAgQyAxOS40NzAzNTI1NjQxMDI2IDEwLjI1NzMzOTAxNTE1MTUgIDE5LjA3MzcxNzk0ODcxNzkgMTAuMDkwOTA5MDkwOTA5MSAgMTguNjE1Mzg0NjE1Mzg0NiAxMC4wOTA5MDkwOTA5MDkxICBDIDE4LjE1NzA1MTI4MjA1MTMgMTAuMDkwOTA5MDkwOTA5MSAgMTcuNzYwNDE2NjY2NjY2NyAxMC4yNTczMzkwMTUxNTE1ICAxNy40MjU0ODA3NjkyMzA4IDEwLjU5MDE5ODg2MzYzNjQgIEMgMTcuMDkwNTQ0ODcxNzk0OSAxMC45MjMwNTg3MTIxMjEyICAxNi45MjMwNzY5MjMwNzY5IDExLjMxNzIzNDg0ODQ4NDggIDE2LjkyMzA3NjkyMzA3NjkgMTEuNzcyNzI3MjcyNzI3MyAgQyAxNi45MjMwNzY5MjMwNzY5IDEyLjIyODIxOTY5Njk2OTcgIDE3LjA5MDU0NDg3MTc5NDkgMTIuNjIyMzk1ODMzMzMzMyAgMTcuNDI1NDgwNzY5MjMwOCAxMi45NTUyNTU2ODE4MTgyICBMIDI0LjE5NDcxMTUzODQ2MTUgMTkuNjgyNTI4NDA5MDkwOSAgQyAyNC41Mjk2NDc0MzU4OTc0IDIwLjAxNTM4ODI1NzU3NTggIDI0LjkyNjI4MjA1MTI4MjEgMjAuMTgxODE4MTgxODE4MiAgMjUuMzg0NjE1Mzg0NjE1NCAyMC4xODE4MTgxODE4MTgyICBDIDI1Ljg0Mjk0ODcxNzk0ODcgMjAuMTgxODE4MTgxODE4MiAgMjYuMjM5NTgzMzMzMzMzMyAyMC4wMTUzODgyNTc1NzU4ICAyNi41NzQ1MTkyMzA3NjkyIDE5LjY4MjUyODQwOTA5MDkgIEwgMzMuMzQzNzUgMTIuOTU1MjU1NjgxODE4MiAgWiBNIDE1LjkzMTQ5MDM4NDYxNTQgMzEuMjU4MTY3NjEzNjM2NCAgQyAxNi41OTI1NDgwNzY5MjMxIDMxLjkxNTEyNzg0MDkwOTEgIDE2LjkyMzA3NjkyMzA3NjkgMzIuNzA3ODU5ODQ4NDg0OSAgMTYuOTIzMDc2OTIzMDc2OSAzMy42MzYzNjM2MzYzNjM2ICBDIDE2LjkyMzA3NjkyMzA3NjkgMzQuNTY0ODY3NDI0MjQyNCAgMTYuNTkyNTQ4MDc2OTIzMSAzNS4zNTc1OTk0MzE4MTgyICAxNS45MzE0OTAzODQ2MTU0IDM2LjAxNDU1OTY1OTA5MDkgIEMgMTUuMjcwNDMyNjkyMzA3NyAzNi42NzE1MTk4ODYzNjM2ICAxNC40NzI3NTY0MTAyNTY0IDM3ICAxMy41Mzg0NjE1Mzg0NjE1IDM3ICBDIDEyLjYwNDE2NjY2NjY2NjcgMzcgIDExLjgwNjQ5MDM4NDYxNTQgMzYuNjcxNTE5ODg2MzYzNiAgMTEuMTQ1NDMyNjkyMzA3NyAzNi4wMTQ1NTk2NTkwOTA5ICBDIDEwLjQ4NDM3NSAzNS4zNTc1OTk0MzE4MTgyICAxMC4xNTM4NDYxNTM4NDYyIDM0LjU2NDg2NzQyNDI0MjQgIDEwLjE1Mzg0NjE1Mzg0NjIgMzMuNjM2MzYzNjM2MzYzNiAgQyAxMC4xNTM4NDYxNTM4NDYyIDMyLjcwNzg1OTg0ODQ4NDkgIDEwLjQ4NDM3NSAzMS45MTUxMjc4NDA5MDkxICAxMS4xNDU0MzI2OTIzMDc3IDMxLjI1ODE2NzYxMzYzNjQgIEMgMTEuODA2NDkwMzg0NjE1NCAzMC42MDEyMDczODYzNjM2ICAxMi42MDQxNjY2NjY2NjY3IDMwLjI3MjcyNzI3MjcyNzMgIDEzLjUzODQ2MTUzODQ2MTUgMzAuMjcyNzI3MjcyNzI3MyAgQyAxNC40NzI3NTY0MTAyNTY0IDMwLjI3MjcyNzI3MjcyNzMgIDE1LjI3MDQzMjY5MjMwNzcgMzAuNjAxMjA3Mzg2MzYzNiAgMTUuOTMxNDkwMzg0NjE1NCAzMS4yNTgxNjc2MTM2MzY0ICBaIE0gMzkuNjIzNzk4MDc2OTIzMSAzMS4yNTgxNjc2MTM2MzY0ICBDIDQwLjI4NDg1NTc2OTIzMDggMzEuOTE1MTI3ODQwOTA5MSAgNDAuNjE1Mzg0NjE1Mzg0NiAzMi43MDc4NTk4NDg0ODQ5ICA0MC42MTUzODQ2MTUzODQ2IDMzLjYzNjM2MzYzNjM2MzYgIEMgNDAuNjE1Mzg0NjE1Mzg0NiAzNC41NjQ4Njc0MjQyNDI0ICA0MC4yODQ4NTU3NjkyMzA4IDM1LjM1NzU5OTQzMTgxODIgIDM5LjYyMzc5ODA3NjkyMzEgMzYuMDE0NTU5NjU5MDkwOSAgQyAzOC45NjI3NDAzODQ2MTU0IDM2LjY3MTUxOTg4NjM2MzYgIDM4LjE2NTA2NDEwMjU2NDEgMzcgIDM3LjIzMDc2OTIzMDc2OTIgMzcgIEMgMzYuMjk2NDc0MzU4OTc0NCAzNyAgMzUuNDk4Nzk4MDc2OTIzMSAzNi42NzE1MTk4ODYzNjM2ICAzNC44Mzc3NDAzODQ2MTU0IDM2LjAxNDU1OTY1OTA5MDkgIEMgMzQuMTc2NjgyNjkyMzA3NyAzNS4zNTc1OTk0MzE4MTgyICAzMy44NDYxNTM4NDYxNTM4IDM0LjU2NDg2NzQyNDI0MjQgIDMzLjg0NjE1Mzg0NjE1MzggMzMuNjM2MzYzNjM2MzYzNiAgQyAzMy44NDYxNTM4NDYxNTM4IDMyLjcwNzg1OTg0ODQ4NDkgIDM0LjE3NjY4MjY5MjMwNzcgMzEuOTE1MTI3ODQwOTA5MSAgMzQuODM3NzQwMzg0NjE1NCAzMS4yNTgxNjc2MTM2MzY0ICBDIDM1LjQ5ODc5ODA3NjkyMzEgMzAuNjAxMjA3Mzg2MzYzNiAgMzYuMjk2NDc0MzU4OTc0NCAzMC4yNzI3MjcyNzI3MjczICAzNy4yMzA3NjkyMzA3NjkyIDMwLjI3MjcyNzI3MjcyNzMgIEMgMzguMTY1MDY0MTAyNTY0MSAzMC4yNzI3MjcyNzI3MjczICAzOC45NjI3NDAzODQ2MTU0IDMwLjYwMTIwNzM4NjM2MzYgIDM5LjYyMzc5ODA3NjkyMzEgMzEuMjU4MTY3NjEzNjM2NCAgWiBNIDQzLjQ5NzU5NjE1Mzg0NjIgMy44NjI5MjYxMzYzNjM2NCAgQyA0My44MzI1MzIwNTEyODIxIDQuMTk1Nzg1OTg0ODQ4NDggIDQ0IDQuNTg5OTYyMTIxMjEyMTIgIDQ0IDUuMDQ1NDU0NTQ1NDU0NTUgIEwgNDQgMTguNSAgQyA0NCAxOC45MjA0NTQ1NDU0NTQ1ICA0My44NTg5NzQzNTg5NzQ0IDE5LjI5MjczMjAwNzU3NTggIDQzLjU3NjkyMzA3NjkyMzEgMTkuNjE2ODMyMzg2MzYzNiAgQyA0My4yOTQ4NzE3OTQ4NzE4IDE5Ljk0MDkzMjc2NTE1MTUgIDQyLjkzMzQ5MzU4OTc0MzYgMjAuMTI5MjYxMzYzNjM2NCAgNDIuNDkyNzg4NDYxNTM4NSAyMC4xODE4MTgxODE4MTgyICBMIDE0Ljg4NzAxOTIzMDc2OTIgMjMuMzg3Nzg0MDkwOTA5MSAgQyAxNC45MDQ2NDc0MzU4OTc0IDIzLjUxMDQxNjY2NjY2NjcgIDE0Ljk0NDMxMDg5NzQzNTkgMjMuNjk4NzQ1MjY1MTUxNSAgMTUuMDA2MDA5NjE1Mzg0NiAyMy45NTI3Njk4ODYzNjM2ICBDIDE1LjA2NzcwODMzMzMzMzMgMjQuMjA2Nzk0NTA3NTc1OCAgMTUuMTIwNTkyOTQ4NzE3OSAyNC40Mzg5MjA0NTQ1NDU1ICAxNS4xNjQ2NjM0NjE1Mzg1IDI0LjY0OTE0NzcyNzI3MjcgIEMgMTUuMjA4NzMzOTc0MzU5IDI0Ljg1OTM3NSAgMTUuMjMwNzY5MjMwNzY5MiAyNS4wNTIwODMzMzMzMzMzICAxNS4yMzA3NjkyMzA3NjkyIDI1LjIyNzI3MjcyNzI3MjcgIEMgMTUuMjMwNzY5MjMwNzY5MiAyNS41MDc1NzU3NTc1NzU4ICAxNS4wMTkyMzA3NjkyMzA4IDI2LjA2ODE4MTgxODE4MTggIDE0LjU5NjE1Mzg0NjE1MzggMjcgIEwgMzguOTIzMDc2OTIzMDc2OSAyNyAgQyAzOS4zODE0MTAyNTY0MTAzIDI2LjkwOTA5MDkwOTA5MDkgIDM5Ljc3ODA0NDg3MTc5NDkgMjcuMDc1NTIwODMzMzMzMyAgNDAuMTEyOTgwNzY5MjMwOCAyNy40MDgzODA2ODE4MTgyICBDIDQwLjQ0NzkxNjY2NjY2NjcgMjcuNzQxMjQwNTMwMzAzICA0MC42MTUzODQ2MTUzODQ2IDI4LjEzNTQxNjY2NjY2NjcgIDQwLjYxNTM4NDYxNTM4NDYgMjguNTkwOTA5MDkwOTA5MSAgQyA0MC42MTUzODQ2MTUzODQ2IDI5LjA0NjQwMTUxNTE1MTUgIDQwLjQ0NzkxNjY2NjY2NjcgMjkuNDQwNTc3NjUxNTE1MSAgNDAuMTEyOTgwNzY5MjMwOCAyOS43NzM0Mzc1ICBDIDM5Ljc3ODA0NDg3MTc5NDkgMzAuMTA2Mjk3MzQ4NDg0OSAgMzkuMzgxNDEwMjU2NDEwMyAzMC4yNzI3MjcyNzI3MjczICAzOC45MjMwNzY5MjMwNzY5IDMwICBMIDExLjg0NjE1Mzg0NjE1MzggMzAgIEMgMTEuMzg3ODIwNTEyODIwNSAzMC4yNzI3MjcyNzI3MjczICAxMC45OTExODU4OTc0MzU5IDMwLjEwNjI5NzM0ODQ4NDkgIDEwLjY1NjI1IDI5Ljc3MzQzNzUgIEMgMTAuMzIxMzE0MTAyNTY0MSAyOS40NDA1Nzc2NTE1MTUxICAxMC4xNTM4NDYxNTM4NDYyIDI5LjA0NjQwMTUxNTE1MTUgIDEwLjE1Mzg0NjE1Mzg0NjIgMjguNTkwOTA5MDkwOTA5MSAgQyAxMC4xNTM4NDYxNTM4NDYyIDI4LjM0NTY0MzkzOTM5MzkgIDEwLjI1MDgwMTI4MjA1MTMgMjcuOTk5NjQ0ODg2MzYzNiAgMTAuNDQ0NzExNTM4NDYxNSAyNy41NTI5MTE5MzE4MTgyICBDIDEwLjYzODYyMTc5NDg3MTggMjcuMTA2MTc4OTc3MjcyNyAgMTAuODk4NjM3ODIwNTEyOCAyNi41ODQ5OTA1MzAzMDMgIDExLjIyNDc1OTYxNTM4NDYgMjUuOTg5MzQ2NTkwOTA5MSAgQyAxMS41NTA4ODE0MTAyNTY0IDI1LjM5MzcwMjY1MTUxNTEgIDExLjczMTU3MDUxMjgyMDUgMjUuMDYwODQyODAzMDMwMyAgMTEuNzY2ODI2OTIzMDc2OSAyNC45OTA3NjcwNDU0NTQ1ICBMIDcuMDg2NTM4NDYxNTM4NDYgMy4zNjM2MzYzNjM2MzYzNiAgTCAxLjY5MjMwNzY5MjMwNzY5IDMuMzYzNjM2MzYzNjM2MzYgIEMgMS4yMzM5NzQzNTg5NzQzNiAzLjM2MzYzNjM2MzYzNjM2ICAwLjgzNzMzOTc0MzU4OTc0NCAzLjE5NzIwNjQzOTM5Mzk0ICAwLjUwMjQwMzg0NjE1Mzg0NiAyLjg2NDM0NjU5MDkwOTA5ICBDIDAuMTY3NDY3OTQ4NzE3OTQ5IDIuNTMxNDg2NzQyNDI0MjQgIDAgMi4xMzczMTA2MDYwNjA2MSAgMCAxLjY4MTgxODE4MTgxODE4ICBDIDAgMS4yMjYzMjU3NTc1NzU3NiAgMC4xNjc0Njc5NDg3MTc5NDkgMC44MzIxNDk2MjEyMTIxMTYgIDAuNTAyNDAzODQ2MTUzODQ2IDAuNDk5Mjg5NzcyNzI3Mjc1ICBDIDAuODM3MzM5NzQzNTg5NzQ0IDAuMTY2NDI5OTI0MjQyNDIxICAxLjIzMzk3NDM1ODk3NDM2IDAgIDEuNjkyMzA3NjkyMzA3NjkgMCAgTCA4LjQ2MTUzODQ2MTUzODQ2IDAgIEMgOC43NDM1ODk3NDM1ODk3NCAwICA4Ljk5NDc5MTY2NjY2NjY3IDAuMDU2OTM2NTUzMDMwMzAwNSAgOS4yMTUxNDQyMzA3NjkyMyAwLjE3MDgwOTY1OTA5MDkxICBDIDkuNDM1NDk2Nzk0ODcxOCAwLjI4NDY4Mjc2NTE1MTUxNSAgOS42MTE3Nzg4NDYxNTM4NCAwLjQyMDQ1NDU0NTQ1NDU0NSAgOS43NDM5OTAzODQ2MTUzOSAwLjU3ODEyNSAgQyA5Ljg3NjIwMTkyMzA3NjkyIDAuNzM1Nzk1NDU0NTQ1NDU1ICA5Ljk5MDc4NTI1NjQxMDI2IDAuOTUwNDAyNDYyMTIxMjA2ICAxMC4wODc3NDAzODQ2MTU0IDEuMjIxOTQ2MDIyNzI3MjcgIEMgMTAuMTg0Njk1NTEyODIwNSAxLjQ5MzQ4OTU4MzMzMzMzICAxMC4yNTA4MDEyODIwNTEzIDEuNzI1NjE1NTMwMzAzMDMgIDEwLjI4NjA1NzY5MjMwNzcgMS45MTgzMjM4NjM2MzYzNiAgQyAxMC4zMjEzMTQxMDI1NjQxIDIuMTExMDMyMTk2OTY5NyAgMTAuMzY5NzkxNjY2NjY2NyAyLjM2OTQzNjU1MzAzMDMgIDEwLjQzMTQ5MDM4NDYxNTQgMi42OTM1MzY5MzE4MTgxOCAgQyAxMC40OTMxODkxMDI1NjQxIDMuMDE3NjM3MzEwNjA2MDYgIDEwLjUzMjg1MjU2NDEwMjYgMy4yNDEwMDM3ODc4Nzg3OSAgMTAuNTUwNDgwNzY5MjMwOCA0ICBMIDQyLjMwNzY5MjMwNzY5MjMgNCAgQyA0Mi43NjYwMjU2NDEwMjU2IDMuMzYzNjM2MzYzNjM2MzYgIDQzLjE2MjY2MDI1NjQxMDMgMy41MzAwNjYyODc4Nzg3OSAgNDMuNDk3NTk2MTUzODQ2MiAzLjg2MjkyNjEzNjM2MzY0ICBaICIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgMjQ4IDE4OCApIiAvPg0KICA8L2c+DQo8L3N2Zz4="},"5eDb":function(e,t,n){(function(t){!function(){"use strict";var n=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},r=function(e){return{eq:e}},a=r(function(e,t){return e===t}),o=function(e){return r(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e.eq(t[a],n[a]))return!1;return!0})},i=function(e,t){return function(e,t){return r(function(n,r){return e.eq(t(n),t(r))})}(o(e),function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)})},s=function(e){return r(function(t,n){var r=Object.keys(t),o=Object.keys(n);if(!i(a).eq(r,o))return!1;for(var s=r.length,c=0;c<s;c++){var l=r[c];if(!e.eq(t[l],n[l]))return!1}return!0})},c=r(function(e,t){if(e===t)return!0;var r=n(e);return r===n(t)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(r)?e===t:"array"===r?o(c).eq(e,t):"object"===r&&s(c).eq(e,t))}),l=function(){},u=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},d=function(e){return function(){return e}},f=function(e){return e};function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=t.concat(n);return e.apply(null,a)}}var p=function(e){return function(t){return!e(t)}},h=function(e){return function(){throw new Error(e)}},v=function(e){e()},g=d(!1),b=d(!0),y=function(){return w},w=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:g,isSome:g,isNone:b,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:n,orThunk:t,map:y,each:l,bind:y,exists:g,forall:b,filter:y,equals:e,equals_:e,toArray:function(){return[]},toString:d("none()")}}(),x=function(e){var t=d(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:b,isNone:g,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return x(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:w},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(g,function(t){return n(e,t)})}};return a},k={some:x,none:y,from:function(e){return null===e||void 0===e?w:x(e)}},_=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},S=function(e){return function(t){return typeof t===e}},C=function(e){return function(t){return e===t}},N=_("string"),T=_("object"),D=_("array"),I=C(null),M=S("boolean"),O=C(void 0),A=function(e){return null===e||void 0===e},L=function(e){return!A(e)},E=S("function"),z=S("number"),R=Array.prototype.slice,V=Array.prototype.indexOf,B=Array.prototype.push,$=function(e,t){return V.call(e,t)},U=function(e,t){return $(e,t)>-1},P=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},F=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var o=e[a];r[a]=t(o,a)}return r},H=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},j=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},q=function(e,t){for(var n=[],r=[],a=0,o=e.length;a<o;a++){var i=e[a];(t(i,a)?n:r).push(i)}return{pass:n,fail:r}},W=function(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var o=e[r];t(o,r)&&n.push(o)}return n},Y=function(e,t,n){return j(e,function(e){n=t(n,e)}),n},G=function(e,t,n){return H(e,function(e){n=t(n,e)}),n},K=function(e,t){return function(e,t,n){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t(o,r))return k.some(o);if(n(o,r))break}return k.none()}(e,t,g)},Q=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return k.some(n)}return k.none()},X=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!D(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);B.apply(t,e[n])}return t}(F(e,t))},J=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},Z=function(e){var t=R.call(e,0);return t.reverse(),t},ee=function(e,t){return W(e,function(e){return!U(t,e)})},te=function(e,t){return t>=0&&t<e.length?k.some(e[t]):k.none()},ne=function(e){return te(e,0)},re=function(e){return te(e,e.length-1)},ae=E(Array.from)?Array.from:function(e){return R.call(e)},oe=Object.keys,ie=Object.hasOwnProperty,se=function(e,t){for(var n=oe(e),r=0,a=n.length;r<a;r++){var o=n[r];t(e[o],o)}},ce=function(e,t){return le(e,function(e,n){return{k:n,v:t(e,n)}})},le=function(e,t){var n={};return se(e,function(e,r){var a=t(e,r);n[a.k]=a.v}),n},ue=function(e){return function(t,n){e[n]=t}},de=function(e,t,n,r){return se(e,function(e,a){(t(e,a)?n:r)(e,a)}),{}},fe=function(e,t){var n={},r={};return de(e,t,ue(n),ue(r)),{t:n,f:r}},me=function(e,t){var n={};return de(e,t,ue(n),l),n},pe=function(e){return function(e,t){var n=[];return se(e,function(e,r){n.push(t(e,r))}),n}(e,function(e){return e})},he=function(e,t){return ve(e,t)?k.from(e[t]):k.none()},ve=function(e,t){return ie.call(e,t)},ge=function(e,t){return ve(e,t)&&void 0!==e[t]&&null!==e[t]},be=Array.isArray,ye=function(e,t,n){var r,a;if(!e)return!1;if(n=n||e,void 0!==e.length){for(r=0,a=e.length;r<a;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return!1;return!0},we=function(e,t){var n=[];return ye(e,function(r,a){n.push(t(r,a,e))}),n},xe=function(e,t){var n=[];return ye(e,function(r,a){t&&!t(r,a,e)||n.push(r)}),n},ke=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},_e=function(e,t,n,r){for(var a=O(n)?e[0]:n,o=0;o<e.length;o++)a=t.call(r,a,e[o],o);return a},Se=function(e,t,n){var r,a;for(r=0,a=e.length;r<a;r++)if(t.call(n,e[r],r,e))return r;return-1},Ce=function(e){return e[e.length-1]},Ne=function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Te(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}var De=function(){return Ie(0,0)},Ie=function(e,t){return{major:e,minor:t}},Me={nu:Ie,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?De():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Ie(r(1),r(2))}(e,n)},unknown:De},Oe=function(e,t){var n=String(t).toLowerCase();return K(e,function(e){return e.search(n)})},Ae=function(e,t){return Oe(e,t).map(function(e){var n=Me.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Le=function(e,t){return Oe(e,t).map(function(e){var n=Me.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ee=function(e,t){return-1!==e.indexOf(t)},ze=function(e,t){return function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,0)},Re=function(e){return function(t){return t.replace(e,"")}},Ve=Re(/^\s+|\s+$/g),Be=Re(/^\s+/g),$e=Re(/\s+$/g),Ue=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pe=function(e){return function(t){return Ee(t,e)}},Fe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ee(e,"edge/")&&Ee(e,"chrome")&&Ee(e,"safari")&&Ee(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ue],search:function(e){return Ee(e,"chrome")&&!Ee(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ee(e,"msie")||Ee(e,"trident")}},{name:"Opera",versionRegexes:[Ue,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pe("firefox")},{name:"Safari",versionRegexes:[Ue,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ee(e,"safari")||Ee(e,"mobile/"))&&Ee(e,"applewebkit")}}],He=[{name:"Windows",search:Pe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ee(e,"iphone")||Ee(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pe("linux"),versionRegexes:[]},{name:"Solaris",search:Pe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],je={browsers:d(Fe),oses:d(He)},qe=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r("Firefox"),isSafari:r("Safari")}},We={unknown:function(){return qe({current:void 0,version:Me.unknown()})},nu:qe,edge:d("Edge"),chrome:d("Chrome"),ie:d("IE"),opera:d("Opera"),firefox:d("Firefox"),safari:d("Safari")},Ye=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r("Windows"),isiOS:r("iOS"),isAndroid:r("Android"),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r("Solaris"),isFreeBSD:r("FreeBSD"),isChromeOS:r("ChromeOS")}},Ge={unknown:function(){return Ye({current:void 0,version:Me.unknown()})},nu:Ye,windows:d("Windows"),ios:d("iOS"),android:d("Android"),linux:d("Linux"),osx:d("OSX"),solaris:d("Solaris"),freebsd:d("FreeBSD"),chromeos:d("ChromeOS")},Ke=function(e,t){var n=je.browsers(),r=je.oses(),a=Ae(n,e).fold(We.unknown,We.nu),o=Le(r,e).fold(Ge.unknown,Ge.nu);return{browser:a,os:o,deviceType:function(e,t,n,r){var a=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!a,i=e.isiOS()||e.isAndroid(),s=i||r("(pointer:coarse)"),c=a||!o&&i&&r("(min-device-width:768px)"),l=o||i&&!c,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),f=!l&&!c&&!u;return{isiPad:d(a),isiPhone:d(o),isTablet:d(c),isPhone:d(l),isTouch:d(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:d(u),isDesktop:d(f)}}(o,a,e,t)}},Qe=function(e){return window.matchMedia(e).matches},Xe=function(e){var t,n=!1;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return n||(n=!0,t=e.apply(null,r)),t}}(function(){return Ke(navigator.userAgent,Qe)}),Je=function(){return Xe()},Ze=navigator.userAgent,et=Je(),tt=et.browser,nt=et.os,rt=et.deviceType,at=/WebKit/.test(Ze)&&!tt.isEdge(),ot="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,it=-1!==Ze.indexOf("Windows Phone"),st={opera:tt.isOpera(),webkit:at,ie:!(!tt.isIE()&&!tt.isEdge())&&tt.version.major,gecko:tt.isFirefox(),mac:nt.isOSX()||nt.isiOS(),iOS:rt.isiPad()||rt.isiPhone(),android:nt.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:tt.isIE()?document.documentMode||7:10,fileApi:ot,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!tt.isIE(),desktop:rt.isDesktop(),windowsPhone:it,browser:{current:tt.current,version:tt.version,isChrome:tt.isChrome,isEdge:tt.isEdge,isFirefox:tt.isFirefox,isIE:tt.isIE,isOpera:tt.isOpera,isSafari:tt.isSafari},os:{current:nt.current,version:nt.version,isAndroid:nt.isAndroid,isChromeOS:nt.isChromeOS,isFreeBSD:nt.isFreeBSD,isiOS:nt.isiOS,isLinux:nt.isLinux,isOSX:nt.isOSX,isSolaris:nt.isSolaris,isWindows:nt.isWindows},deviceType:{isDesktop:rt.isDesktop,isiPad:rt.isiPad,isiPhone:rt.isiPhone,isPhone:rt.isPhone,isTablet:rt.isTablet,isTouch:rt.isTouch,isWebView:rt.isWebView}},ct=/^\s*|\s*$/g,lt=function(e){return null===e||void 0===e?"":(""+e).replace(ct,"")},ut=function(e,t){return t?!("array"!==t||!be(e))||typeof e===t:void 0!==e},dt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),ye(e,function(e,a){if(!1===t.call(r,e,a,n))return!1;dt(e,t,n,r)}))},ft={trim:lt,isArray:be,is:ut,toArray:function(e){if(be(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:ye,map:we,grep:xe,inArray:ke,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var a=t[r];for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];void 0!==i&&(e[o]=i)}}return e},create:function(e,t,n){var r,a,o,i=0,s=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],c=this.createNS(e[3].replace(/\.\w+$/,""),n);if(!c[s]){if("static"===e[2])return c[s]=t,void(this.onCreate&&this.onCreate(e[2],e[3],c[s]));t[s]||(t[s]=function(){},i=1),c[s]=t[s],this.extend(c[s].prototype,t),e[5]&&(r=this.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],o=c[s],c[s]=i?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],o.apply(this,arguments)},c[s].prototype[s]=c[s],this.each(r,function(e,t){c[s].prototype[t]=r[t]}),this.each(t,function(e,t){r[t]?c[s].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==s&&(c[s].prototype[t]=e)})),this.each(t.static,function(e,t){c[s][t]=e})}},walk:dt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||ut(e,"array")?e:we(e.split(t||","),lt)},_addCacheSuffix:function(e){var t=st.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},mt=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},pt={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return mt(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return mt(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return mt(n)},fromDom:mt,fromPoint:function(e,t,n){return k.from(e.dom.elementFromPoint(t,n)).map(mt)}},ht=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},a=t(e);do{a=a.bind(r)}while(a.isSome());return n},vt=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},gt=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},bt=function(e,t){return e.dom===t.dom},yt=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},wt=function(e,t){return Je().browser.isIE()?yt(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)},xt=("undefined"!=typeof window?window:Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),kt=function(e){return e.dom.nodeType},_t=function(e){return function(t){return kt(t)===e}},St=_t(1),Ct=_t(3),Nt=_t(9),Tt=_t(11),Dt=function(e){return pt.fromDom(e.dom.ownerDocument)},It=function(e){return Nt(e)?e:Dt(e)},Mt=function(e){return pt.fromDom(It(e).dom.defaultView)},Ot=function(e){return k.from(e.dom.parentNode).map(pt.fromDom)},At=function(e){return k.from(e.dom.previousSibling).map(pt.fromDom)},Lt=function(e){return k.from(e.dom.nextSibling).map(pt.fromDom)},Et=function(e){return Z(ht(e,At))},zt=function(e){return ht(e,Lt)},Rt=function(e){return F(e.dom.childNodes,pt.fromDom)},Vt=function(e,t){var n=e.dom.childNodes;return k.from(n[t]).map(pt.fromDom)},Bt=function(e){return Vt(e,0)},$t=function(e){return Vt(e,e.dom.childNodes.length-1)},Ut=function(e){return Tt(e)},Pt=E(Element.prototype.attachShadow)&&E(Node.prototype.getRootNode),Ft=d(Pt),Ht=Pt?function(e){return pt.fromDom(e.dom.getRootNode())}:It,jt=function(e){return Ut(e)?e:function(e){var t=e.dom.head;if(null===t||void 0===t)throw new Error("Head is not available yet");return pt.fromDom(t)}(It(e))},qt=function(e){return pt.fromDom(e.dom.host)},Wt=function(e){return L(e.dom.shadowRoot)},Yt=function(e,t){Ot(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},Gt=function(e,t){Lt(e).fold(function(){Ot(e).each(function(e){Qt(e,t)})},function(e){Yt(e,t)})},Kt=function(e,t){Bt(e).fold(function(){Qt(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})},Qt=function(e,t){e.dom.appendChild(t.dom)},Xt=function(e,t){H(t,function(t){Qt(e,t)})},Jt=function(e){e.dom.textContent="",H(Rt(e),function(e){Zt(e)})},Zt=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},en=function(e){var t,n=Rt(e);n.length>0&&(t=e,H(n,function(e){Yt(t,e)})),Zt(e)},tn=function(e){var t=Ct(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n,r,a,o,i=t.ownerDocument;return(a=pt.fromDom(t),o=Ht(a),Ut(o)?k.some(o):k.none()).fold(function(){return i.body.contains(t)},(n=tn,r=qt,function(e){return n(r(e))}))},nn=function(e,t){return{left:e,top:t,translate:function(n,r){return nn(e+n,t+r)}}},rn=nn,an=function(e,t){return void 0!==e?e:void 0!==t?t:0},on=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?rn(n.offsetLeft,n.offsetTop):tn(e)?function(e){var t=e.getBoundingClientRect();return rn(t.left,t.top)}(t):rn(0,0)},sn=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return rn(n,r)},cn=function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},ln=function(e,t){Je().browser.isSafari()&&E(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},un=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},dn=function(e){var t=void 0===e?window:e,n=t.document,r=sn(pt.fromDom(n));return function(e){var t=void 0===e?window:e;return k.from(t.visualViewport)}(t).fold(function(){var e=t.document.documentElement,n=e.clientWidth,a=e.clientHeight;return un(r.left,r.top,n,a)},function(e){return un(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},fn=function(e){return function(t){return!!t&&t.nodeType===e}},mn=function(e){return!!e&&!Object.getPrototypeOf(e)},pn=fn(1),hn=function(e){var t=e.map(function(e){return e.toLowerCase()});return function(e){if(e&&e.nodeName){var n=e.nodeName.toLowerCase();return U(t,n)}return!1}},vn=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(pn(t))for(r=0;r<n.length;r++){var a=t.ownerDocument.defaultView.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===n[r])return!0}return!1}},gn=function(e){return function(t){return pn(t)&&t.hasAttribute(e)}},bn=function(e){return pn(e)&&e.hasAttribute("data-mce-bogus")},yn=function(e){return pn(e)&&"TABLE"===e.tagName},wn=function(e){return function(t){if(pn(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},xn=hn(["textarea","input"]),kn=fn(3),_n=fn(8),Sn=fn(9),Cn=fn(11),Nn=hn(["br"]),Tn=hn(["img"]),Dn=wn("true"),In=wn("false"),Mn=hn(["td","th"]),On=hn(["video","audio","object","embed"]),An=function(e){return void 0!==e.style&&E(e.style.getPropertyValue)},Ln=function(e,t,n){if(!(N(n)||M(n)||z(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},En=function(e,t,n){Ln(e.dom,t,n)},zn=function(e,t){var n=e.dom;se(t,function(e,t){Ln(n,t,e)})},Rn=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Vn=function(e,t){return k.from(Rn(e,t))},Bn=function(e,t){e.dom.removeAttribute(t)},$n=function(e,t){var n=e.dom;se(t,function(e,t){!function(e,t,n){if(!N(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);An(e)&&e.style.setProperty(t,n)}(n,t,e)})},Un=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||tn(e)?r:Pn(n,t)},Pn=function(e,t){return An(e)?e.style.getPropertyValue(t):""},Fn=function(e,t){var n=e.dom,r=Pn(n,t);return k.from(r).filter(function(e){return e.length>0})},Hn=function(e){var t={},n=e.dom;if(An(n))for(var r=0;r<n.style.length;r++){var a=n.style.item(r);t[a]=n.style[a]}return t},jn=Je().browser,qn=function(e){return K(e,St)},Wn=function(e,t){return e.children&&U(e.children,t)},Yn=function(e,t,n){var r,a,o=0,i=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Un(pt.fromDom(e),"position"))return{x:o=(a=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:i=a.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType&&!Wn(r,n);)o+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType&&!Wn(r,n);)o-=r.scrollLeft||0,i-=r.scrollTop||0,r=r.parentNode;i+=function(e){return jn.isFirefox()&&"table"===xt(e)?qn(Rt(e)).filter(function(e){return"caption"===xt(e)}).bind(function(e){return qn(zt(e)).map(function(t){var n=t.dom.offsetTop,r=e.dom.offsetTop,a=e.dom.offsetHeight;return n<=r?-a:0})}).getOr(0):0}(pt.fromDom(t))}return{x:o,y:i}},Gn={},Kn={exports:Gn};!function(e,n,r,a){!function(a){if("object"==typeof n&&void 0!==r)r.exports=a();else if("function"==typeof e&&e.amd)e([],a);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).EphoxContactWrapper=a()}}(function(){return function(){return function e(t,n,r){function o(s,c){if(!n[s]){if(!t[s]){var l="function"==typeof a&&a;if(!c&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}}()({1:[function(e,t,n){var r,a,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,u=[],d=!1,f=-1;function m(){d&&l&&(d=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!d){var e=c(m);d=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function a(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((r=n,a=t,function(){r.apply(a,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}var r,a}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(a);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){if(0===t.length)return e([]);var r=t.length;function a(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){a(o,e)},n)}t[o]=i,0==--r&&e(t)}catch(e){n(e)}}for(var o=0;o<t.length;o++)a(o,t[o])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,a=e.length;r<a;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=o:n.Promise||(n.Promise=o)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var a=e("process/browser.js").nextTick,o=Function.prototype.apply,i=Array.prototype.slice,s={},c=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=c++,r=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,a(function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),a="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:a.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)})}(void 0,Gn,Kn,void 0);var Qn=Kn.exports.boltExport,Xn=function(e){var t=k.none(),n=[],r=function(e){a()?i(e):n.push(e)},a=function(){return t.isSome()},o=function(e){H(e,i)},i=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(function(e){a()||(t=k.some(e),o(n),n=[])}),{get:r,map:function(e){return Xn(function(t){r(function(n){t(e(n))})})},isReady:a}},Jn={nu:Xn,pure:function(e){return Xn(function(t){t(e)})}},Zn=function(e){setTimeout(function(){throw e},0)},er=function(e){var t=function(t){e().then(t,Zn)};return{map:function(t){return er(function(){return e().then(t)})},bind:function(t){return er(function(){return e().then(function(e){return t(e).toPromise()})})},anonBind:function(t){return er(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return Jn.nu(t)},toCached:function(){var t=null;return er(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},tr={nu:function(e){return er(function(){return new Qn(e)})},pure:function(e){return er(function(){return Qn.resolve(e)})}},nr=function(e,t){return t(function(t){var n=[],r=0;0===e.length?t([]):H(e,function(a,o){a.get(function(a){return function(o){n[a]=o,++r>=e.length&&t(n)}}(o))})})},rr=function(e){return nr(e,tr.nu)},ar=function(e){return{is:function(t){return e===t},isValue:b,isError:g,getOr:d(e),getOrThunk:d(e),getOrDie:d(e),or:function(t){return ar(e)},orThunk:function(t){return ar(e)},fold:function(t,n){return n(e)},map:function(t){return ar(t(e))},mapError:function(t){return ar(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return k.some(e)}}},or=function(e){return{is:g,isValue:g,isError:b,getOr:f,getOrThunk:function(e){return e()},getOrDie:function(){return h(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return or(e)},mapError:function(t){return or(t(e))},each:l,bind:function(t){return or(e)},exists:g,forall:b,toOptional:k.none}},ir={value:ar,error:or,fromOption:function(e,t){return e.fold(function(){return or(t)},ar)}},sr=function(e){if(!D(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return H(e,function(r,a){var o=oe(r);if(1!==o.length)throw new Error("one and only one name per case");var i=o[0],s=r[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!D(s))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[a].apply(null,r)},match:function(e){var n=oe(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!J(t,function(e){return U(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:i,params:r})}}}}),n},cr=(sr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){return e.fold(f,f)});function lr(e,t,n,r,a){return e(n,r)?k.some(n):E(a)&&a(n)?k.none():t(n,r,a)}var ur,dr=function(e,t,n){for(var r=e.dom,a=E(n)?n:g;r.parentNode;){r=r.parentNode;var o=pt.fromDom(r);if(t(o))return k.some(o);if(a(o))break}return k.none()},fr=function(e,t,n){return lr(function(e,t){return t(e)},dr,e,t,n)},mr=function(e,t){return K(e.dom.childNodes,function(e){return t(pt.fromDom(e))}).map(pt.fromDom)},pr=function(e,t,n){return dr(e,function(e){return vt(e,t)},n)},hr=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return gt(n)?k.none():k.from(n.querySelector(e)).map(pt.fromDom)}(t,e)},vr=function(e,t,n){return lr(function(e,t){return vt(e,t)},pr,e,t,n)},gr=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(o,this),e(i,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function a(e){var t=this;null!==this._state?r(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(o,this),e(i,this))}this._state=!0,this._value=t,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)a.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n(function(n,o){a.call(r,new function(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(e,t,n,o))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===e.length)return t([]);var r=e.length;function a(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){a(o,e)},n)}e[o]=i,0==--r&&t(e)}catch(e){n(e)}}for(var o=0;o<e.length;o++)a(o,e[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,a=e.length;r<a;r++)e[r].then(t,n)})},n}(),br=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},yr=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},wr=function(e,t){var n,r=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];clearTimeout(n),n=br(function(){e.apply(this,r)},t)};return r.stop=function(){clearTimeout(n)},r},xr={requestAnimationFrame:function(e,t){ur?ur.then(e):ur=new gr(function(e){t||(t=document.body),function(e,t){var n,r=window.requestAnimationFrame,a=["ms","moz","webkit"];for(n=0;n<a.length&&!r;n++)r=window[a[n]+"RequestAnimationFrame"];r||(r=function(e){window.setTimeout(e,0)}),r(e,t)}(e,t)}).then(e)},setTimeout:br,setInterval:yr,setEditorTimeout:function(e,t,n){return br(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=yr(function(){e.removed?clearInterval(r):t()},n);return r},debounce:wr,throttle:wr,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}};function kr(e,t){void 0===t&&(t={});var n=0,r={},a=pt.fromDom(e),o=It(a),i=t.maxLoadTime||5e3,s=function(s,c,l){var u,d=ft._addCacheSuffix(s),f=function(e){return he(r,e).getOrThunk(function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}})}(d);r[d]=f,f.count++;var m=function(e,t){for(var n=e.length;n--;)e[n]();f.status=t,f.passed=[],f.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},p=function(){return m(f.passed,2)},h=function(){return m(f.failed,3)},v=function(){var t;t=v,function(){for(var t=e.styleSheets,n=t.length;n--;){var r=t[n].ownerNode;if(r&&r.id===u.id)return p(),!0}return!1}()||(Date.now()-y<i?xr.setTimeout(t):h())};if(c&&f.passed.push(c),l&&f.failed.push(l),1!==f.status)if(2!==f.status)if(3!==f.status){f.status=1;var g=pt.fromTag("link",o.dom);zn(g,{rel:"stylesheet",type:"text/css",id:f.id});var b,y=Date.now();t.contentCssCors&&En(g,"crossOrigin","anonymous"),t.referrerPolicy&&En(g,"referrerpolicy",t.referrerPolicy),(u=g.dom).onload=v,u.onerror=h,b=g,Qt(jt(a),b),En(g,"href",d)}else h();else p()},c=function(e){return tr.nu(function(t){s(e,u(t,d(ir.value(e))),u(t,d(ir.error(e))))})},l=function(e){var t=ft._addCacheSuffix(e);he(r,t).each(function(e){var n,o;0===--e.count&&(delete r[t],n=e.id,o=jt(a),hr(o,"#"+n).each(Zt))})};return{load:s,loadAll:function(e,t,n){rr(F(e,c)).get(function(e){var r=q(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(cr)):t(r.pass.map(cr))})},unload:l,unloadAll:function(e){H(e,function(e){l(e)})},_setReferrerPolicy:function(e){t.referrerPolicy=e}}}var _r,Sr,Cr=function(){var e=new WeakMap;return{forElement:function(t,n){var r=Ht(t).dom;return k.from(e.get(r)).getOrThunk(function(){var t=kr(r,n);return e.set(r,t),t})}}}(),Nr=function(){function e(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},e.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},e.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},e.prototype.findSibling=function(e,t,n,r){var a,o;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(a=e[n])return a;for(o=e.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(a=o[n])return a}}},e.prototype.findPreviousNode=function(e,t,n,r){var a,o,i;if(e){if(a=e[n],this.rootNode&&a===this.rootNode)return;if(a){if(!r)for(i=a[t];i;i=i[t])if(!i[t])return i;return a}if((o=e.parentNode)&&o!==this.rootNode)return o}},e}(),Tr=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},r=0,a=e.length;r<a;r++){var o=e[r];n[String(o)]=t(o,r)}return n}(e,b)).hasOwnProperty(xt(n))}},Dr=Tr(["h1","h2","h3","h4","h5","h6"]),Ir=Tr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Mr=function(e){return St(e)&&!Ir(e)},Or=function(e){return St(e)&&"br"===xt(e)},Ar=Tr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Lr=Tr(["ul","ol","dl"]),Er=Tr(["li","dd","dt"]),zr=Tr(["thead","tbody","tfoot"]),Rr=Tr(["td","th"]),Vr=Tr(["pre","script","textarea","style"]),Br="\ufeff",$r=function(e){return"\ufeff"===e},Ur=function(e){return e.replace(/\uFEFF/g,"")},Pr=pn,Fr=kn,Hr=function(e){return Fr(e)&&(e=e.parentNode),Pr(e)&&e.hasAttribute("data-mce-caret")},jr=function(e){return Fr(e)&&$r(e.data)},qr=function(e){return Hr(e)||jr(e)},Wr=function(e){return e.firstChild!==e.lastChild||!Nn(e.firstChild)},Yr=function(e){var t=e.container();return!!kn(t)&&(t.data.charAt(e.offset())===Br||e.isAtStart()&&jr(t.previousSibling))},Gr=function(e){var t=e.container();return!!kn(t)&&(t.data.charAt(e.offset()-1)===Br||e.isAtEnd()&&jr(t.nextSibling))},Kr=function(e,t,n){var r,a=t.ownerDocument.createElement(e);a.setAttribute("data-mce-caret",n?"before":"after"),a.setAttribute("data-mce-bogus","all"),a.appendChild(((r=document.createElement("br")).setAttribute("data-mce-bogus","1"),r));var o=t.parentNode;return n?o.insertBefore(a,t):t.nextSibling?o.insertBefore(a,t.nextSibling):o.appendChild(a),a},Qr=function(e){return Fr(e)&&e.data[0]===Br},Xr=function(e){return Fr(e)&&e.data[e.data.length-1]===Br},Jr=function(e){return e&&e.hasAttribute("data-mce-caret")?(t=e.getElementsByTagName("br"),n=t[t.length-1],bn(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},Zr=Dn,ea=In,ta=Nn,na=kn,ra=hn(["script","style","textarea"]),aa=hn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),oa=hn(["table"]),ia=qr,sa=function(e){return!ia(e)&&(na(e)?!ra(e.parentNode):aa(e)||ta(e)||oa(e)||ca(e))},ca=function(e){return!1===function(e){return pn(e)&&"true"===e.getAttribute("unselectable")}(e)&&ea(e)},la=function(e,t){return sa(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(ca(e))return!1;if(Zr(e))return!0}return!0}(e,t)},ua=/^[ \t\r\n]*$/,da=function(e){return ua.test(e)},fa=function(e,t){var n,r,a,o=pt.fromDom(t),i=pt.fromDom(e);return n=i,r="pre,code",a=m(bt,o),pr(n,r,a).isSome()},ma=function(e,t){return sa(e)&&!1===function(e,t){return kn(e)&&da(e.data)&&!1===fa(e,t)}(e,t)||function(e){return pn(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))}(e)||pa(e)},pa=gn("data-mce-bookmark"),ha=gn("data-mce-bogus"),va=(_r="data-mce-bogus",Sr="all",function(e){return pn(e)&&e.getAttribute(_r)===Sr}),ga=function(e,t){return void 0===t&&(t=!0),function(e,t){var n,r=0;if(ma(e,e))return!1;if(!(n=e.firstChild))return!0;var a=new Nr(n,e);do{if(t){if(va(n)){n=a.next(!0);continue}if(ha(n)){n=a.next();continue}}if(Nn(n))r++,n=a.next();else{if(ma(n,e))return!1;n=a.next()}}while(n);return r<=1}(e.dom,t)},ba=function(e,t){return L(e)&&(ma(e,t)||Mr(pt.fromDom(e)))},ya=function(e){return function(e){return"span"===e.nodeName.toLowerCase()}(e)&&"bookmark"===e.getAttribute("data-mce-type")},wa=function(e,t){return kn(e)&&e.data.length>0&&function(e,t){var n=new Nr(e,t).prev(!1),r=new Nr(e,t).next(!1),a=O(n)||ba(n,t),o=O(r)||ba(r,t);return a&&o}(e,t)},xa=function(e,t,n){var r=n||t;if(pn(t)&&ya(t))return t;for(var a=t.childNodes,o=a.length-1;o>=0;o--)xa(e,a[o],r);if(pn(t)){var i=t.childNodes;1===i.length&&ya(i[0])&&t.parentNode.insertBefore(i[0],t)}return function(e){return Cn(e)||Sn(e)}(t)||ma(t,r)||function(e){return!!pn(e)&&e.childNodes.length>0}(t)||wa(t,r)||e.remove(t),t},ka=ft.makeMap,_a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ca=/[<>&\"\']/g,Na=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ta={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Da={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ia={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ma=function(e,t){var n,r,a,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Da[r]||(a="&"+e[n+1]+";",o[r]=a,o[a]=r);return o}},Oa=Ma("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Aa=function(e,t){return e.replace(t?_a:Sa,function(e){return Da[e]||e})},La=function(e,t){return e.replace(t?_a:Sa,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Da[e]||"&#"+e.charCodeAt(0)+";"})},Ea=function(e,t,n){return n=n||Oa,e.replace(t?_a:Sa,function(e){return Da[e]||n[e]||e})},za={encodeRaw:Aa,encodeAllRaw:function(e){return(""+e).replace(Ca,function(e){return Da[e]||e})},encodeNumeric:La,encodeNamed:Ea,getEncodeFunc:function(e,t){var n=Ma(t)||Oa,r=ka(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?_a:Sa,function(e){return void 0!==Da[e]?Da[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:r.named?t?function(e,t){return Ea(e,t,n)}:Ea:r.numeric?La:Aa},decode:function(e){return e.replace(Na,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ta[t]||String.fromCharCode(t):Ia[e]||Oa[e]||(n=e,(r=pt.fromTag("div").dom).innerHTML=n,r.textContent||r.innerText||n);var n,r})}},Ra={},Va={},Ba=ft.makeMap,$a=ft.each,Ua=ft.extend,Pa=ft.explode,Fa=ft.inArray,Ha=function(e,t){return(e=ft.trim(e))?e.split(t||" "):[]},ja=function(e){var t,n,r,a,o,i,s={},c=function(e,n,r){var a,o,i,c=function(e,t){var n,r,a={};for(n=0,r=e.length;n<r;n++)a[e[n]]=t||{};return a};r=r||[],n=n||"","string"==typeof r&&(r=Ha(r));var l=Ha(e);for(a=l.length;a--;)i={attributes:c(o=Ha([t,n].join(" "))),attributesOrder:o,children:c(r,Va)},s[l[a]]=i},l=function(e,t){var n,r,a,o,i=Ha(e);n=i.length;for(var c=Ha(t);n--;)for(r=s[i[n]],a=0,o=c.length;a<o;a++)r.attributes[c[a]]={},r.attributesOrder.push(c[a])};return Ra[e]?Ra[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,i="acronym applet basefont big font strike tt"].join(" "),$a(Ha(i),function(e){c(e,"",r)}),n=[n,o="center dir isindex noframes"].join(" "),a=[n,r].join(" "),$a(Ha(o),function(e){c(e,"",a)})),a=a||[n,r].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),c("address dt dd div caption","",a),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),c("blockquote","cite",a),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",a),c("dl","","dt dd"),c("a","href target rel media hreflang type",r),c("q","cite",r),c("ins del","cite datetime",a),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",a),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),c("param","name value"),c("map","name",[a,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",a),c("th","colspan rowspan headers scope abbr",a),c("form","accept-charset action autocomplete enctype method name novalidate target",a),c("fieldset","disabled form name",[a,"legend"].join(" ")),c("label","form for",r),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?a:r),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[a,"li"].join(" ")),c("noscript","",a),"html4"!==e&&(c("wbr"),c("ruby","",[r,"rt rp"].join(" ")),c("figcaption","",a),c("mark rt rp summary bdi","",r),c("canvas","width height",a),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[r,"option"].join(" ")),c("article section nav aside main header footer","",a),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[a,"figcaption"].join(" ")),c("time","datetime",r),c("dialog","open",a),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",r),c("progress","value max",r),c("meter","value min max low high optimum",r),c("details","open",[a,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("img","loading"),l("iframe","sandbox seamless allowfullscreen loading")),$a(Ha("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Ra[e]=s,s)},qa=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),$a(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Ba(e,/[, ]/):Pa(e,/[, ]/)})),n};function Wa(e){var t={},n={},r=[],a={},o={},i=function(t,n,r){var a=e[t];return a?a=Ba(a,/[, ]/,Ba(a.toUpperCase(),/[, ]/)):(a=Ra[t])||(a=Ba(n," ",Ba(n.toUpperCase()," ")),a=Ua(a,r),Ra[t]=a),a},s=ja((e=e||{}).schema);!1===e.verify_html&&(e.valid_elements="*[*]");var c=qa(e.valid_styles),l=qa(e.invalid_styles,"map"),u=qa(e.valid_classes,"map"),d=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),m=i("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),h=i("non_empty_elements","td th iframe video audio object script code pre",m),v=i("move_caret_before_on_enter_elements","td th iframe video audio object script code table",m),g=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),b=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",g),y=i("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");$a((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(e){o[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},x=function(e){var n,a,o,i,s,c,l,u,d,f,m,p,h,v,g,b,y,x,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,_=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e){var C=Ha(e,",");for(t["@"]&&(b=t["@"].attributes,y=t["@"].attributesOrder),n=0,a=C.length;n<a;n++)if(s=k.exec(C[n])){if(v=s[1],d=s[2],g=s[3],u=s[5],c={attributes:p={},attributesOrder:h=[]},"#"===v&&(c.paddEmpty=!0),"-"===v&&(c.removeEmpty=!0),"!"===s[4]&&(c.removeEmptyAttrs=!0),b&&(se(b,function(e,t){p[t]=e}),h.push.apply(h,y)),u)for(o=0,i=(u=Ha(u,"|")).length;o<i;o++)if(s=_.exec(u[o])){if(l={},m=s[1],f=s[2].replace(/[\\:]:/g,":"),v=s[3],x=s[4],"!"===m&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(f),l.required=!0),"-"===m){delete p[f],h.splice(Fa(h,f),1);continue}v&&("="===v&&(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:f,value:x}),l.defaultValue=x),":"===v&&(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:f,value:x}),l.forcedValue=x),"<"===v&&(l.validValues=Ba(x,"?"))),S.test(f)?(c.attributePatterns=c.attributePatterns||[],l.pattern=w(f),c.attributePatterns.push(l)):(p[f]||h.push(f),p[f]=l)}b||"@"!==d||(b=p,y=h),g&&(c.outputName=d,t[g]=c),S.test(d)?(c.pattern=w(d),r.push(c)):t[d]=c}}},k=function(e){t={},r=[],x(e),$a(s,function(e,t){n[t]=e.children})},_=function(e){var r=/^(~)?(.+)$/;e&&(Ra.text_block_elements=Ra.block_elements=null,$a(Ha(e,","),function(e){var o=r.exec(e),i="~"===o[1],s=i?"span":"div",c=o[2];if(n[c]=n[s],a[c]=s,i||(b[c.toUpperCase()]={},b[c]={}),!t[c]){var l=t[s];delete(l=Ua({},l)).removeEmptyAttrs,delete l.removeEmpty,t[c]=l}$a(n,function(e,t){e[s]&&(n[t]=e=Ua({},n[t]),e[c]=e[s])})}))},S=function(t){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Ra[e.schema]=null,t&&$a(Ha(t,","),function(e){var t,a,o=r.exec(e);o&&(a=o[1],t=a?n[o[2]]:n[o[2]]={"#comment":{}},t=n[o[2]],$a(Ha(o[3],"|"),function(e){"-"===a?delete t[e]:t[e]={}}))})},C=function(e){var n,a=t[e];if(a)return a;for(n=r.length;n--;)if((a=r[n]).pattern.test(e))return a};e.valid_elements?k(e.valid_elements):($a(s,function(e,r){t[r]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[r]=e.children}),"html5"!==e.schema&&$a(Ha("strong/b em/i"),function(e){var n=Ha(e,"/");t[n[1]].outputName=n[0]}),$a(Ha("ol ul sub sup blockquote span font a table tbody strong em b i"),function(e){t[e]&&(t[e].removeEmpty=!0)}),$a(Ha("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){t[e].paddEmpty=!0}),$a(Ha("span"),function(e){t[e].removeEmptyAttrs=!0})),_(e.custom_elements),S(e.valid_children),x(e.extended_valid_elements),S("+ol[ul|ol],+ul[ul|ol]"),$a({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){t[n]&&(t[n].parentsRequired=Ha(e))}),e.invalid_elements&&$a(Pa(e.invalid_elements),function(e){t[e]&&delete t[e]}),C("span")||x("span[!data-mce-type|*]");return{children:n,elements:t,getValidStyles:function(){return c},getValidClasses:function(){return u},getBlockElements:function(){return b},getInvalidStyles:function(){return l},getShortEndedElements:function(){return m},getTextBlockElements:function(){return g},getTextInlineElements:function(){return y},getBoolAttrs:function(){return p},getElementRule:C,getSelfClosingElements:function(){return f},getNonEmptyElements:function(){return h},getMoveCaretBeforeOnEnterElements:function(){return v},getWhiteSpaceElements:function(){return d},getSpecialElements:function(){return o},isValidChild:function(e,t){var r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:function(e,t){var n,r,a=C(e);if(a){if(!t)return!0;if(a.attributes[t])return!0;if(n=a.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return a},addValidElements:x,setValidElements:k,addCustomElements:_,addValidChildren:S}}var Ya,Ga,Ka,Qa,Xa,Ja,Za,eo,to,no,ro,ao,oo,io,so,co,lo,uo=function(e,t,n,r){var a=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+a(t)+a(n)+a(r)},fo=function(e,t){var n,r,a,o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={};e=e||{},t&&(r=t.getValidStyles(),a=t.getInvalidStyles());var u="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(n=0;n<u.length;n++)l[u[n]]="\ufeff"+n,l["\ufeff"+n]=u[n];return{toHex:function(e){return e.replace(o,uo)},parse:function(t){var r,a,u,d,f,m,p,h,v={},g=e.url_converter,b=e.url_converter_scope||this,y=function(e,t,r){var a=v[e+"-top"+t];if(a){var o=v[e+"-right"+t];if(o){var i=v[e+"-bottom"+t];if(i){var s=v[e+"-left"+t];if(s){var c=[a,o,i,s];for(n=c.length-1;n--&&c[n]===c[n+1];);n>-1&&r||(v[e+t]=-1===n?c[0]:c.join(" "),delete v[e+"-top"+t],delete v[e+"-right"+t],delete v[e+"-bottom"+t],delete v[e+"-left"+t])}}}}},w=function(e){var t,n=v[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return v[e]=n[0],!0}},x=function(e){return d=!0,l[e]},k=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},_=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},S=function(e){return e.replace(/\\[0-9a-f]+/gi,_)},C=function(t,n,r,a,o,i){if(o=o||i)return"'"+(o=k(o)).replace(/\'/g,"\\'")+"'";if(n=k(n||r||a),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return g&&(n=g.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});r=s.exec(t);)if(s.lastIndex=r.index+r[0].length,a=r[1].replace(c,"").toLowerCase(),u=r[2].replace(c,""),a&&u){if(a=S(a),u=S(u),-1!==a.indexOf("\ufeff")||-1!==a.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===a||/expression\s*\(|\/\*|\*\//.test(u)))continue;"font-weight"===a&&"700"===u?u="bold":"color"!==a&&"background-color"!==a||(u=u.toLowerCase()),u=(u=u.replace(o,uo)).replace(i,C),v[a]=d?k(u,!0):u}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),f="border",p="border-style",h="border-color",w(m="border-width")&&w(p)&&w(h)&&(v[f]=v[m]+" "+v[p]+" "+v[h],delete v[m],delete v[p],delete v[h]),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(e,t){var n="",o=function(t){var a,o=r[t];if(o)for(var i=0,s=o.length;i<s;i++)t=o[i],(a=e[t])&&(n+=(n.length>0?" ":"")+t+": "+a+";")};return t&&r?(o("*"),o(t)):se(e,function(e,r){!e||a&&!function(e,t){var n=a["*"];return!(n&&n[e]||(n=a[t])&&n[e])}(r,t)||(n+=(n.length>0?" ":"")+r+": "+e+";")}),n}}},mo="mce-data-",po=/^(?:mouse|contextmenu)|click/,ho={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},vo=function(){return!1},go=function(){return!0},bo=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},yo=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},wo=function(e,t){var n,r=t||{};for(n in e)ho[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),r.composedPath&&(r.composedPath=function(){return e.composedPath()}),e&&function(e){return po.test(e.type)}(e)&&void 0===e.pageX&&void 0!==e.clientX){var a=r.target.ownerDocument||document,o=a.documentElement,i=a.body;r.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=go,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=go,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=go,r.stopPropagation()},!1===function(e){return e.isDefaultPrevented===go||e.isDefaultPrevented===vo}(r)&&(r.isDefaultPrevented=vo,r.isPropagationStopped=vo,r.isImmediatePropagationStopped=vo),void 0===r.metaKey&&(r.metaKey=!1),r},xo=function(e,t,n){var r=e.document,a={type:"ready"};if(n.domLoaded)t(a);else{var o=function(){yo(e,"DOMContentLoaded",o),yo(e,"load",o),n.domLoaded||(n.domLoaded=!0,t(a)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?o():bo(e,"DOMContentLoaded",o),n.domLoaded||bo(e,"load",o)}},ko=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando=mo+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(e,t,n,r){var a,o,i,s,c,l,u,d=this,f=window,m=function(e){d.executeHandlers(wo(e||f.event),a)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[d.expando]?a=e[d.expando]:(a=d.count++,e[d.expando]=a,d.events[a]={}),r=r||e;var p=t.split(" ");for(i=p.length;i--;)l=m,c=u=!1,"DOMContentLoaded"===(s=p[i])&&(s="ready"),d.domLoaded&&"ready"===s&&"complete"===e.readyState?n.call(r,wo({type:s})):(d.hasMouseEnterLeave||(c=d.mouseEnterLeave[s])&&(l=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=wo(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d.executeHandlers(e,a))}),d.hasFocusIn||"focusin"!==s&&"focusout"!==s||(u=!0,c="focusin"===s?"focus":"blur",l=function(e){(e=wo(e||f.event)).type="focus"===e.type?"focusin":"focusout",d.executeHandlers(e,a)}),(o=d.events[a][s])?"ready"===s&&d.domLoaded?n(wo({type:s})):o.push({func:n,scope:r}):(d.events[a][s]=o=[{func:n,scope:r}],o.fakeName=c,o.capture=u,o.nativeHandler=l,"ready"===s?xo(e,l,d):bo(e,c||s,l,u)));return e=o=null,n}},e.prototype.unbind=function(e,t,n){var r,a,o,i,s;if(!e||3===e.nodeType||8===e.nodeType)return this;var c=e[this.expando];if(c){if(s=this.events[c],t){var l=t.split(" ");for(a=l.length;a--;)if(r=s[i=l[a]]){if(n)for(o=r.length;o--;)if(r[o].func===n){var u=r.nativeHandler,d=r.fakeName,f=r.capture;(r=r.slice(0,o).concat(r.slice(o+1))).nativeHandler=u,r.fakeName=d,r.capture=f,s[i]=r}n&&0!==r.length||(delete s[i],yo(e,r.fakeName||i,r.nativeHandler,r.capture))}}else se(s,function(t,n){yo(e,t.fakeName||n,t.nativeHandler,t.capture)}),s={};for(i in s)if(ve(s,i))return this;delete this.events[c];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this},e.prototype.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return this;var a=wo(null,n);a.type=t,a.target=e;do{(r=e[this.expando])&&this.executeHandlers(a,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!a.isPropagationStopped());return this},e.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(e,t){var n=this.events[t],r=n&&n[e.type];if(r)for(var a=0,o=r.length;a<o;a++){var i=r[a];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},e.Event=new e,e}(),_o="sizzle"+-new Date,So=window.document,Co=0,No=0,To=ii(),Do=ii(),Io=ii(),Mo=function(e,t){return e===t&&(no=!0),0},Oo="undefined",Ao=1<<31,Lo={}.hasOwnProperty,Eo=[],zo=Eo.pop,Ro=Eo.push,Vo=Eo.push,Bo=Eo.slice,$o=Eo.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Uo="[\\x20\\t\\r\\n\\f]",Po="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Fo="\\["+Uo+"*("+Po+")(?:"+Uo+"*([*^$|!~]?=)"+Uo+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Po+"))|)"+Uo+"*\\]",Ho=":("+Po+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Fo+")*)|.*)\\)|)",jo=new RegExp("^"+Uo+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Uo+"+$","g"),qo=new RegExp("^"+Uo+"*,"+Uo+"*"),Wo=new RegExp("^"+Uo+"*([>+~]|"+Uo+")"+Uo+"*"),Yo=new RegExp("="+Uo+"*([^\\]'\"]*?)"+Uo+"*\\]","g"),Go=new RegExp(Ho),Ko=new RegExp("^"+Po+"$"),Qo={ID:new RegExp("^#("+Po+")"),CLASS:new RegExp("^\\.("+Po+")"),TAG:new RegExp("^("+Po+"|[*])"),ATTR:new RegExp("^"+Fo),PSEUDO:new RegExp("^"+Ho),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Uo+"*(even|odd|(([+-]|)(\\d*)n|)"+Uo+"*(?:([+-]|)"+Uo+"*(\\d+)|))"+Uo+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Uo+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Uo+"*((?:-\\d)?\\d*)"+Uo+"*\\)|)(?=[^-]|$)","i")},Xo=/^(?:input|select|textarea|button)$/i,Jo=/^h\d$/i,Zo=/^[^{]+\{\s*\[native \w/,ei=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ti=/[+~]/,ni=/'|\\/g,ri=new RegExp("\\\\([\\da-f]{1,6}"+Uo+"?|("+Uo+")|.)","ig"),ai=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Vo.apply(Eo=Bo.call(So.childNodes),So.childNodes),Eo[So.childNodes.length].nodeType}catch(e){Vo={apply:Eo.length?function(e,t){Ro.apply(e,Bo.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var oi=function(e,t,n,r){var a,o,i,s,c,l,u,d,f,m;if((t?t.ownerDocument||t:So)!==ao&&ro(t),t=t||ao,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(io&&!r){if(a=ei.exec(e))if(i=a[1]){if(9===s){if(!(o=t.getElementById(i))||!o.parentNode)return n;if(o.id===i)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(i))&&lo(t,o)&&o.id===i)return n.push(o),n}else{if(a[2])return Vo.apply(n,t.getElementsByTagName(e)),n;if((i=a[3])&&Ya.getElementsByClassName)return Vo.apply(n,t.getElementsByClassName(i)),n}if(Ya.qsa&&(!so||!so.test(e))){if(d=u=_o,f=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=Xa(e),(u=t.getAttribute("id"))?d=u.replace(ni,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",c=l.length;c--;)l[c]=d+fi(l[c]);f=ti.test(e)&&ui(t.parentNode)||t,m=l.join(",")}if(m)try{return Vo.apply(n,f.querySelectorAll(m)),n}catch(e){}finally{u||t.removeAttribute("id")}}}return Za(e.replace(jo,"$1"),t,n,r)};function ii(){var e=[];return function t(n,r){return e.push(n+" ")>Ga.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function si(e){return e[_o]=!0,e}function ci(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Ao)-(~e.sourceIndex||Ao);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function li(e){return si(function(t){return t=+t,si(function(n,r){for(var a,o=e([],n.length,t),i=o.length;i--;)n[a=o[i]]&&(n[a]=!(r[a]=n[a]))})})}function ui(e){return e&&typeof e.getElementsByTagName!==Oo&&e}function di(){}function fi(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function mi(e,t,n){var r=t.dir,a=n&&"parentNode"===r,o=No++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o)}:function(t,n,i){var s,c,l=[Co,o];if(i){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,i))return!0}else for(;t=t[r];)if(1===t.nodeType||a){if((s=(c=t[_o]||(t[_o]={}))[r])&&s[0]===Co&&s[1]===o)return l[2]=s[2];if(c[r]=l,l[2]=e(t,n,i))return!0}}}function pi(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function hi(e,t,n,r,a){for(var o,i=[],s=0,c=e.length,l=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,a)||(i.push(o),l&&t.push(s)));return i}function vi(e,t,n,r,a,o){return r&&!r[_o]&&(r=vi(r)),a&&!a[_o]&&(a=vi(a,o)),si(function(o,i,s,c){var l,u,d,f=[],m=[],p=i.length,h=o||function(e,t,n){for(var r=0,a=t.length;r<a;r++)oi(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?h:hi(h,f,e,s,c),g=n?a||(o?e:p||r)?[]:i:v;if(n&&n(v,g,s,c),r)for(l=hi(g,m),r(l,[],s,c),u=l.length;u--;)(d=l[u])&&(g[m[u]]=!(v[m[u]]=d));if(o){if(a||e){if(a){for(l=[],u=g.length;u--;)(d=g[u])&&l.push(v[u]=d);a(null,g=[],l,c)}for(u=g.length;u--;)(d=g[u])&&(l=a?$o.call(o,d):f[u])>-1&&(o[l]=!(i[l]=d))}}else g=hi(g===i?g.splice(p,g.length):g),a?a(null,i,g,c):Vo.apply(i,g)})}function gi(e){for(var t,n,r,a=e.length,o=Ga.relative[e[0].type],i=o||Ga.relative[" "],s=o?1:0,c=mi(function(e){return e===t},i,!0),l=mi(function(e){return $o.call(t,e)>-1},i,!0),u=[function(e,n,r){return!o&&(r||n!==eo)||((t=n).nodeType?c(e,n,r):l(e,n,r))}];s<a;s++)if(n=Ga.relative[e[s].type])u=[mi(pi(u),n)];else{if((n=Ga.filter[e[s].type].apply(null,e[s].matches))[_o]){for(r=++s;r<a&&!Ga.relative[e[r].type];r++);return vi(s>1&&pi(u),s>1&&fi(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(jo,"$1"),n,s<r&&gi(e.slice(s,r)),r<a&&gi(e=e.slice(r)),r<a&&fi(e))}u.push(n)}return pi(u)}Ya=oi.support={},Qa=oi.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},ro=oi.setDocument=function(e){var t,n=e?e.ownerDocument||e:So,r=n.defaultView;return n!==ao&&9===n.nodeType&&n.documentElement?(ao=n,oo=n.documentElement,io=!Qa(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){ro()},!1):r.attachEvent&&r.attachEvent("onunload",function(){ro()})),Ya.attributes=!0,Ya.getElementsByTagName=!0,Ya.getElementsByClassName=Zo.test(n.getElementsByClassName),Ya.getById=!0,Ga.find.ID=function(e,t){if(typeof t.getElementById!==Oo&&io){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Ga.filter.ID=function(e){var t=e.replace(ri,ai);return function(e){return e.getAttribute("id")===t}},Ga.find.TAG=Ya.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Oo)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],a=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[a++];)1===n.nodeType&&r.push(n);return r}return o},Ga.find.CLASS=Ya.getElementsByClassName&&function(e,t){if(io)return t.getElementsByClassName(e)},co=[],so=[],Ya.disconnectedMatch=!0,so=so.length&&new RegExp(so.join("|")),co=co.length&&new RegExp(co.join("|")),t=Zo.test(oo.compareDocumentPosition),lo=t||Zo.test(oo.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Mo=t?function(e,t){if(e===t)return no=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Ya.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===So&&lo(So,e)?-1:t===n||t.ownerDocument===So&&lo(So,t)?1:to?$o.call(to,e)-$o.call(to,t):0:4&r?-1:1)}:function(e,t){if(e===t)return no=!0,0;var r,a=0,o=e.parentNode,i=t.parentNode,s=[e],c=[t];if(!o||!i)return e===n?-1:t===n?1:o?-1:i?1:to?$o.call(to,e)-$o.call(to,t):0;if(o===i)return ci(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)c.unshift(r);for(;s[a]===c[a];)a++;return a?ci(s[a],c[a]):s[a]===So?-1:c[a]===So?1:0},n):ao},oi.matches=function(e,t){return oi(e,null,null,t)},oi.matchesSelector=function(e,t){if((e.ownerDocument||e)!==ao&&ro(e),t=t.replace(Yo,"='$1']"),Ya.matchesSelector&&io&&(!co||!co.test(t))&&(!so||!so.test(t)))try{var n=(void 0).call(e,t);if(n||Ya.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return oi(t,ao,null,[e]).length>0},oi.contains=function(e,t){return(e.ownerDocument||e)!==ao&&ro(e),lo(e,t)},oi.attr=function(e,t){(e.ownerDocument||e)!==ao&&ro(e);var n=Ga.attrHandle[t.toLowerCase()],r=n&&Lo.call(Ga.attrHandle,t.toLowerCase())?n(e,t,!io):void 0;return void 0!==r?r:Ya.attributes||!io?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},oi.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oi.uniqueSort=function(e){var t,n=[],r=0,a=0;if(no=!Ya.detectDuplicates,to=!Ya.sortStable&&e.slice(0),e.sort(Mo),no){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return to=null,e},Ka=oi.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Ka(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=Ka(t);return n},(Ga=oi.selectors={cacheLength:50,createPseudo:si,match:Qo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ri,ai),e[3]=(e[3]||e[4]||e[5]||"").replace(ri,ai),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oi.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oi.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Qo.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Go.test(n)&&(t=Xa(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ri,ai).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=To[e+" "];return t||(t=new RegExp("(^|"+Uo+")"+e+"("+Uo+"|$)"))&&To(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Oo&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=oi.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var o="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,f,m,p,h=o!==i?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),b=!c&&!s;if(v){if(o){for(;h;){for(d=t;d=d[h];)if(s?d.nodeName.toLowerCase()===g:1===d.nodeType)return!1;p=h="only"===e&&!p&&"nextSibling"}return!0}if(p=[i?v.firstChild:v.lastChild],i&&b){for(m=(l=(u=v[_o]||(v[_o]={}))[e]||[])[0]===Co&&l[1],f=l[0]===Co&&l[2],d=m&&v.childNodes[m];d=++m&&d&&d[h]||(f=m=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[Co,m,f];break}}else if(b&&(l=(t[_o]||(t[_o]={}))[e])&&l[0]===Co)f=l[1];else for(;(d=++m&&d&&d[h]||(f=m=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==g:1!==d.nodeType)||!++f||(b&&((d[_o]||(d[_o]={}))[e]=[Co,f]),d!==t)););return(f-=a)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,t){var n,r=Ga.pseudos[e]||Ga.setFilters[e.toLowerCase()]||oi.error("unsupported pseudo: "+e);return r[_o]?r(t):r.length>1?(n=[e,e,"",t],Ga.setFilters.hasOwnProperty(e.toLowerCase())?si(function(e,n){for(var a,o=r(e,t),i=o.length;i--;)e[a=$o.call(e,o[i])]=!(n[a]=o[i])}):function(e){return r(e,0,n)}):r}},pseudos:{not:si(function(e){var t=[],n=[],r=Ja(e.replace(jo,"$1"));return r[_o]?si(function(e,t,n,a){for(var o,i=r(e,null,a,[]),s=e.length;s--;)(o=i[s])&&(e[s]=!(t[s]=o))}):function(e,a,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:si(function(e){return function(t){return oi(e,t).length>0}}),contains:si(function(e){return e=e.replace(ri,ai),function(t){return(t.textContent||t.innerText||Ka(t)).indexOf(e)>-1}}),lang:si(function(e){return Ko.test(e||"")||oi.error("unsupported lang: "+e),e=e.replace(ri,ai).toLowerCase(),function(t){var n;do{if(n=io?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===oo},focus:function(e){return e===ao.activeElement&&(!ao.hasFocus||ao.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Ga.pseudos.empty(e)},header:function(e){return Jo.test(e.nodeName)},input:function(e){return Xo.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:li(function(){return[0]}),last:li(function(e,t){return[t-1]}),eq:li(function(e,t,n){return[n<0?n+t:n]}),even:li(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:li(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:li(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:li(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=Ga.pseudos.eq,H(["radio","checkbox","file","password","image"],function(e){var t;Ga.pseudos[e]=(t=e,function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})}),H(["submit","reset"],function(e){var t;Ga.pseudos[e]=(t=e,function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t})}),di.prototype=Ga.filters=Ga.pseudos,Ga.setFilters=new di,Xa=oi.tokenize=function(e,t){var n,r,a,o,i,s,c,l=Do[e+" "];if(l)return t?0:l.slice(0);for(i=e,s=[],c=Ga.preFilter;i;){for(o in n&&!(r=qo.exec(i))||(r&&(i=i.slice(r[0].length)||i),s.push(a=[])),n=!1,(r=Wo.exec(i))&&(n=r.shift(),a.push({value:n,type:r[0].replace(jo," ")}),i=i.slice(n.length)),Ga.filter)Ga.filter.hasOwnProperty(o)&&(!(r=Qo[o].exec(i))||c[o]&&!(r=c[o](r))||(n=r.shift(),a.push({value:n,type:o,matches:r}),i=i.slice(n.length)));if(!n)break}return t?i.length:i?oi.error(e):Do(e,s).slice(0)},Ja=oi.compile=function(e,t){var n,r=[],a=[],o=Io[e+" "];if(!o){for(t||(t=Xa(e)),n=t.length;n--;)(o=gi(t[n]))[_o]?r.push(o):a.push(o);(o=Io(e,function(e,t){var n=t.length>0,r=e.length>0,a=function(a,o,i,s,c){var l,u,d,f=0,m="0",p=a&&[],h=[],v=eo,g=a||r&&Ga.find.TAG("*",c),b=Co+=null==v?1:Math.random()||.1,y=g.length;for(c&&(eo=o!==ao&&o);m!==y&&null!=(l=g[m]);m++){if(r&&l){for(u=0;d=e[u++];)if(d(l,o,i)){s.push(l);break}c&&(Co=b)}n&&((l=!d&&l)&&f--,a&&p.push(l))}if(f+=m,n&&m!==f){for(u=0;d=t[u++];)d(p,h,o,i);if(a){if(f>0)for(;m--;)p[m]||h[m]||(h[m]=zo.call(s));h=hi(h)}Vo.apply(s,h),c&&!a&&h.length>0&&f+t.length>1&&oi.uniqueSort(s)}return c&&(Co=b,eo=v),p};return n?si(a):a}(a,r))).selector=e}return o},Za=oi.select=function(e,t,n,r){var a,o,i,s,c,l="function"==typeof e&&e,u=!r&&Xa(e=l.selector||e);if(n=n||[],1===u.length){if((o=u[0]=u[0].slice(0)).length>2&&"ID"===(i=o[0]).type&&Ya.getById&&9===t.nodeType&&io&&Ga.relative[o[1].type]){if(!(t=(Ga.find.ID(i.matches[0].replace(ri,ai),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=Qo.needsContext.test(e)?0:o.length;a--&&(i=o[a],!Ga.relative[s=i.type]);)if((c=Ga.find[s])&&(r=c(i.matches[0].replace(ri,ai),ti.test(o[0].type)&&ui(t.parentNode)||t))){if(o.splice(a,1),!(e=r.length&&fi(o)))return Vo.apply(n,r),n;break}}return(l||Ja(e,u))(r,t,!io,n,ti.test(e)&&ui(t.parentNode)||t),n},Ya.sortStable=_o.split("").sort(Mo).join("")===_o,Ya.detectDuplicates=!!no,ro(),Ya.sortDetached=!0;var bi=document,yi=Array.prototype.push,wi=Array.prototype.slice,xi=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ki=ko.Event,_i=ft.makeMap("children,contents,next,prev"),Si=function(e){return void 0!==e},Ci=function(e){return"string"==typeof e},Ni=function(e,t){var n,r=(t=t||bi).createElement("div"),a=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)a.appendChild(n);return a},Ti=function(e,t,n,r){var a;if(Ci(t))t=Ni(t,Pi(e[0]));else if(t.length&&!t.nodeType){if(t=qi.makeArray(t),r)for(a=t.length-1;a>=0;a--)Ti(e,t[a],n,r);else for(a=0;a<t.length;a++)Ti(e,t[a],n,r);return e}if(t.nodeType)for(a=e.length;a--;)n.call(e[a],t);return e},Di=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Ii=function(e,t,n){var r,a;return t=qi(t)[0],e.each(function(){n&&r===this.parentNode?a.appendChild(this):(r=this.parentNode,a=t.cloneNode(!1),this.parentNode.insertBefore(a,this),a.appendChild(this))}),e},Mi=ft.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Oi=ft.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ai={for:"htmlFor",class:"className",readonly:"readOnly"},Li={float:"cssFloat"},Ei={},zi={},Ri=function(e,t){return new qi.fn.init(e,t)},Vi=/^\s*|\s*$/g,Bi=function(e){return null===e||void 0===e?"":(""+e).replace(Vi,"")},$i=function(e,t){var n,r,a,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(a=0;a<n&&(o=e[a],!1!==t.call(o,a,o));a++);return e},Ui=function(e,t){var n=[];return $i(e,function(e,r){t(r,e)&&n.push(r)}),n},Pi=function(e){return e?9===e.nodeType?e:e.ownerDocument:bi};Ri.fn=Ri.prototype={constructor:Ri,selector:"",context:null,length:0,init:function(e,t){var n,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(t&&t.nodeType)this.context=t;else{if(t)return qi(e).attr(t);this.context=t=document}if(Ci(e)){if(this.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:xi.exec(e)))return qi(t).find(e);if(n[1])for(r=Ni(e,Pi(t)).firstChild;r;)yi.call(this,r),r=r.nextSibling;else{if(!(r=Pi(t).getElementById(n[2])))return this;if(r.id!==n[2])return this.find(e);this.length=1,this[0]=r}}else this.add(e,!1);return this},toArray:function(){return ft.toArray(this)},add:function(e,t){var n,r;if(Ci(e))return this.add(qi(e));if(!1!==t)for(n=qi.unique(this.toArray().concat(qi.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else yi.apply(this,qi.makeArray(e));return this},attr:function(e,t){var n,r=this;if("object"==typeof e)$i(e,function(e,t){r.attr(e,t)});else{if(!Si(t)){if(r[0]&&1===r[0].nodeType){if((n=Ei[e])&&n.get)return n.get(r[0],e);if(Oi[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Ei[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Ai[e]||e))$i(e,function(e,t){n.prop(e,t)});else{if(!Si(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,a=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},i=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)$i(e,function(e,t){a.css(e,t)});else if(Si(t))e=o(e),"number"!=typeof t||Mi[e]||(t=t.toString()+"px"),a.each(function(){var n=this.style;if((r=zi[e])&&r.set)r.set(this,t);else{try{this.style[Li[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(i(e)):n.removeAttribute(e))}});else{if(n=a[0],(r=zi[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(i(e))}catch(e){return}}return a},remove:function(){for(var e,t=this.length;t--;)e=this[t],ki.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t;if(Si(e)){t=this.length;try{for(;t--;)this[t].innerHTML=e}catch(n){qi(this[t]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(Si(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return Ti(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return Ti(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?Ti(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?Ti(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return qi(e).append(this),this},prependTo:function(e){return qi(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Ii(this,e)},wrapAll:function(e){return Ii(this,e,!0)},wrapInner:function(e){return this.each(function(){qi(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){qi(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),qi(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?$i(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var a=Di(r,e);if(a!==t){var o=r.className;a?r.className=Bi((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e}}),n)},hasClass:function(e){return Di(this[0],e)},each:function(e){return $i(this,e)},on:function(e,t){return this.each(function(){ki.bind(this,e,t)})},off:function(e,t){return this.each(function(){ki.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?ki.fire(this,e.type,e):ki.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new qi(wi.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)qi.find(e,this[t],r);return qi(r)},filter:function(e){return qi("function"==typeof e?Ui(this.toArray(),function(t,n){return e(n,t)}):qi.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof qi&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&qi(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),qi(t)},offset:function(e){var t,n,r,a,o=0,i=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(a=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,i=a.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:i})},push:yi,sort:Array.prototype.sort,splice:Array.prototype.splice},ft.extend(Ri,{extend:ft.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:ft.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:ft.isArray,each:$i,trim:Bi,grep:Ui,find:oi,expr:oi.selectors,unique:oi.uniqueSort,text:oi.getText,contains:oi.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?qi.find.matchesSelector(t[0],e)?[t[0]]:[]:qi.find.matches(e,t)}});var Fi=function(e,t,n){var r=[],a=e[t];for("string"!=typeof n&&n instanceof qi&&(n=n[0]);a&&9!==a.nodeType;){if(void 0!==n){if(a===n)break;if("string"==typeof n&&qi(a).is(n))break}1===a.nodeType&&r.push(a),a=a[t]}return r},Hi=function(e,t,n,r){var a=[];for(r instanceof qi&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&qi(e).is(r))break}a.push(e)}return a},ji=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};$i({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Fi(e,"parentNode")},next:function(e){return ji(e,"nextSibling",1)},prev:function(e){return ji(e,"previousSibling",1)},children:function(e){return Hi(e.firstChild,"nextSibling",1)},contents:function(e){return ft.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){Ri.fn[e]=function(n){var r=[];this.each(function(){var e=t.call(r,this,n,r);e&&(qi.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(_i[e]||(r=qi.unique(r)),0===e.indexOf("parents")&&(r=r.reverse()));var a=qi(r);return n?a.filter(n):a}}),$i({parentsUntil:function(e,t){return Fi(e,"parentNode",t)},nextUntil:function(e,t){return Hi(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return Hi(e,"previousSibling",1,t).slice(1)}},function(e,t){Ri.fn[e]=function(n,r){var a=[];this.each(function(){var e=t.call(a,this,n,a);e&&(qi.isArray(e)?a.push.apply(a,e):a.push(e))}),this.length>1&&(a=qi.unique(a),0!==e.indexOf("parents")&&"prevUntil"!==e||(a=a.reverse()));var o=qi(a);return r?o.filter(r):o}}),Ri.fn.is=function(e){return!!e&&this.filter(e).length>0},Ri.fn.init.prototype=Ri.fn,Ri.overrideDefaults=function(e){var t,n=function(r,a){return t=t||e(),0===arguments.length&&(r=t.element),a||(a=t.context),new n.fn.init(r,a)};return qi.extend(n,this),n},Ri.attrHooks=Ei,Ri.cssHooks=zi;var qi=Ri,Wi=ft.each,Yi=ft.grep,Gi=st.ie,Ki=/^([a-z0-9],?)+$/i,Qi=function(e,t,n){var r=t.keep_values,a={set:function(e,r,a){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,a,e[0])),e.attr("data-mce-"+a,r).attr(a,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},o={style:{set:function(t,n){null===n||"object"!=typeof n?(r&&t.attr("data-mce-style",n),null!==n&&"string"==typeof n?(t.removeAttr("style"),t.css(e.parse(n))):t.attr("style",n)):t.css(n)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}};return r&&(o.href=o.src=a),o},Xi=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},Ji=function(e,t){var n,r,a=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(a++,n=r);return a};function Zi(e,t){var n=this;void 0===t&&(t={});var r={},a=window,o={},i=0,s=Cr.forElement(pt.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),c=[],u=t.schema?t.schema:Wa({}),d=fo({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),f=t.ownEvents?new ko:ko.Event,m=u.getBlockElements(),p=qi.overrideDefaults(function(){return{context:e,element:q.getRoot()}}),h=function(t){return t&&e&&N(t)?e.getElementById(t):t},v=function(e){return p("string"==typeof e?h(e):e)},g=function(e,t,n){var r,a,o=v(e);return o.length&&(a=(r=W[t])&&r.get?r.get(o,t):o.attr(t)),void 0===a&&(a=n||""),a},b=function(e){var t=h(e);return t?t.attributes:[]},y=function(e,n,r){""===r&&(r=null);var a=v(e),o=a.attr(n);if(a.length){var i=W[n];i&&i.set?i.set(a,r,n):a.attr(n,r),o!==r&&t.onSetAttrib&&t.onSetAttrib({attrElm:a,attrName:n,attrValue:r})}},w=function(){return t.root_element||e.body},x=function(t,n){return Yn(e.body,h(t),n)},k=function(e,t,n){var r=v(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=st.browser.isIE()?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},_=function(e){var t,n;return e=h(e),t=k(e,"width"),n=k(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},S=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Ki.test(t)){var r=t.toLowerCase().split(/,/),a=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===a)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return oi(t,o[0].ownerDocument||o[0],null,o).length>0},C=function(e,t,n,r){var a,o=[],i=h(e);for(r=void 0===r,n=n||("BODY"!==w().nodeName?w().parentNode:null),ft.is(t,"string")&&(a=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return S(e,a)});i&&!(i===n||A(i.nodeType)||Sn(i)||Cn(i));){if(!t||"function"==typeof t&&t(i)){if(!r)return[i];o.push(i)}i=i.parentNode}return r?o:null},T=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return S(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},D=function(e,t,r){var a,o="string"==typeof e?h(e):e;if(!o)return!1;if(ft.isArray(o)&&(o.length||0===o.length))return a=[],Wi(o,function(e,n){e&&a.push(t.call(r,"string"==typeof e?h(e):e,n))}),a;var i=r||n;return t.call(i,o)},I=function(e,t){v(e).each(function(e,n){Wi(t,function(e,t){y(n,t,e)})})},M=function(e,t){var n=v(e);Gi?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){qi("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},O=function(t,n,r,a,o){return D(t,function(t){var i="string"==typeof n?e.createElement(n):n;return I(i,r),a&&("string"!=typeof a&&a.nodeType?i.appendChild(a):"string"==typeof a&&M(i,a)),o?i:t.appendChild(i)})},L=function(t,n,r){return O(e.createElement(t),t,n,r,!0)},E=za.decode,z=za.encodeAllRaw,R=function(e,t){var n=v(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},V=function(e,t,n){v(e).toggleClass(t,n).each(function(){""===this.className&&qi(this).attr("class",null)})},B=function(e,t,n){return D(t,function(t){return ft.is(t,"array")&&(e=e.cloneNode(!0)),n&&Wi(Yi(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},$=function(e){if(pn(e)){var t="a"===e.nodeName.toLowerCase()&&!g(e,"href")&&g(e,"id");if(g(e,"name")||g(e,"data-mce-bookmark")||t)return!0}return!1},U=function(){return e.createRange()},P=function(n,r,o,i){if(ft.isArray(n)){for(var s=n.length,l=[];s--;)l[s]=P(n[s],r,o,i);return l}return!t.collect||n!==e&&n!==a||c.push([n,r,o,i]),f.bind(n,r,o,i||q)},F=function(t,n,r){if(ft.isArray(t)){for(var o=t.length,i=[];o--;)i[o]=F(t[o],n,r);return i}if(c.length>0&&(t===e||t===a))for(o=c.length;o--;){var s=c[o];t!==s[0]||n&&n!==s[1]||r&&r!==s[2]||f.unbind(s[0],s[1],s[2])}return f.unbind(t,n,r)},j=function(e){if(e&&pn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},q={doc:e,settings:t,win:a,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:c,styles:d,schema:u,events:f,isBlock:function(e){if("string"==typeof e)return!!m[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!m[e.nodeName])}return!1},$:p,$$:v,root:null,clone:function(t,n){if(!Gi||1!==t.nodeType||n)return t.cloneNode(n);var r=e.createElement(t.nodeName);return Wi(b(t),function(e){y(r,e.nodeName,g(t,e.nodeName))}),r},getRoot:w,getViewPort:function(e){var t=dn(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:function(e){e=h(e);var t=x(e),n=_(e);return{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:_,getParent:function(e,t,n){var r=C(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:C,get:h,getNext:function(e,t){return T(e,t,"nextSibling")},getPrev:function(e,t){return T(e,t,"previousSibling")},select:function(n,r){return oi(n,h(r)||t.root_element||e,[])},is:S,add:O,create:L,createHTML:function(e,t,n){var r,a="";for(r in a+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(a+=" "+r+'="'+z(t[r])+'"');return void 0!==n?a+">"+n+"</"+e+">":a+" />"},createFragment:function(t){var n,r=e.createElement("div"),a=e.createDocumentFragment();for(a.appendChild(r),t&&(r.innerHTML=t);n=r.firstChild;)a.appendChild(n);return a.removeChild(r),a},remove:R,setStyle:function(e,n,r){var a=N(n)?v(e).css(n,r):v(e).css(n);t.update_styles&&Xi(d,a)},getStyle:k,setStyles:function(e,n){var r=v(e).css(n);t.update_styles&&Xi(d,r)},removeAllAttribs:function(e){return D(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:y,setAttribs:I,getAttrib:g,getPos:x,parseStyle:function(e){return d.parse(e)},serializeStyle:function(e,t){return d.serialize(e,t)},addStyle:function(t){var n,a;if(q!==Zi.DOM&&e===document){if(r[t])return;r[t]=!0}(a=e.getElementById("mceDefaultStyles"))||((a=e.createElement("style")).id="mceDefaultStyles",a.type="text/css",(n=e.getElementsByTagName("head")[0]).firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a)),a.styleSheet?a.styleSheet.cssText+=t:a.appendChild(e.createTextNode(t))},loadCSS:function(e){e||(e=""),H(e.split(","),function(e){o[e]=!0,s.load(e,l)})},addClass:function(e,t){v(e).addClass(t)},removeClass:function(e,t){V(e,t,!1)},hasClass:function(e,t){return v(e).hasClass(t)},toggleClass:V,show:function(e){v(e).show()},hide:function(e){v(e).hide()},isHidden:function(e){return"none"===v(e).css("display")},uniqueId:function(e){return(e||"mce_")+i++},setHTML:M,getOuterHTML:function(e){var t="string"==typeof e?h(e):e;return pn(t)?t.outerHTML:qi("<div></div>").append(qi(t).clone()).html()},setOuterHTML:function(e,t){v(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}R(qi(this).html(t),!0)})},decode:E,encode:z,insertAfter:function(e,t){var n=h(t);return D(e,function(e){var t=n.parentNode,r=n.nextSibling;return r?t.insertBefore(e,r):t.appendChild(e),e})},replace:B,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=L(t),Wi(b(e),function(t){y(n,t.nodeName,g(e,t.nodeName))}),B(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return d.toHex(ft.trim(e))},run:D,getAttribs:b,isEmpty:function(e,t){var n,r,a=0;if($(e))return!1;if(e=e.firstChild){var o=new Nr(e,e.parentNode),i=u?u.getWhiteSpaceElements():{};t=t||(u?u.getNonEmptyElements():null);do{if(n=e.nodeType,pn(e)){var s=e.getAttribute("data-mce-bogus");if(s){e=o.next("all"===s);continue}if(r=e.nodeName.toLowerCase(),t&&t[r]){if("br"===r){a++,e=o.next();continue}return!1}if($(e))return!1}if(8===n)return!1;if(3===n&&!da(e.nodeValue))return!1;if(3===n&&e.parentNode&&i[e.parentNode.nodeName]&&da(e.nodeValue))return!1;e=o.next()}while(e)}return a<=1},createRng:U,nodeIndex:Ji,split:function(e,t,n){var r,a,o,i=U();if(e&&t)return i.setStart(e.parentNode,Ji(e)),i.setEnd(t.parentNode,Ji(t)),r=i.extractContents(),(i=U()).setStart(t.parentNode,Ji(t)+1),i.setEnd(e.parentNode,Ji(e)+1),a=i.extractContents(),(o=e.parentNode).insertBefore(xa(q,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(xa(q,a),e),R(e),n||t},bind:P,unbind:F,fire:function(e,t,n){return f.fire(e,t,n)},getContentEditable:j,getContentEditableParent:function(e){for(var t=w(),n=null;e&&e!==t&&null===(n=j(e));e=e.parentNode);return n},destroy:function(){if(c.length>0)for(var e=c.length;e--;){var t=c[e];f.unbind(t[0],t[1],t[2])}se(o,function(e,t){s.unload(t),delete o[t]}),oi.setDocument&&oi.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},W=Qi(d,t,function(){return q});return q}!function(e){e.DOM=e(document),e.nodeIndex=Ji}(Zi||(Zi={}));var es=Zi,ts=es.DOM,ns=ft.each,rs=ft.grep,as=function(){function e(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}return e.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},e.prototype.loadScript=function(e,t,n){var r,a=ts,o=function(){a.remove(i),r&&(r.onerror=r.onload=r=null)},i=a.uniqueId();(r=document.createElement("script")).id=i,r.type="text/javascript",r.src=ft._addCacheSuffix(e),this.settings.referrerPolicy&&a.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=function(){o(),t()},r.onerror=function(){o(),E(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)},e.prototype.isDone=function(e){return 2===this.states[e]},e.prototype.markDone=function(e){this.states[e]=2},e.prototype.add=function(e,t,n,r){var a=this.states[e];this.queue.push(e),void 0===a&&(this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this}))},e.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)},e.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},e.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},e.prototype.loadScripts=function(e,t,n,r){var a=this,o=[],i=function(e,t){ns(a.scriptLoadedCallbacks[t],function(t){E(t[e])&&t[e].call(t.scope)}),a.scriptLoadedCallbacks[t]=void 0};a.queueLoadedCallbacks.push({success:t,failure:r,scope:n||this});var s=function(){var t=rs(e);if(e.length=0,ns(t,function(e){2!==a.states[e]?3!==a.states[e]?1!==a.states[e]&&(a.states[e]=1,a.loading++,a.loadScript(e,function(){a.states[e]=2,a.loading--,i("success",e),s()},function(){a.states[e]=3,a.loading--,o.push(e),i("failure",e),s()})):i("failure",e):i("success",e)}),!a.loading){var n=a.queueLoadedCallbacks.slice(0);a.queueLoadedCallbacks.length=0,ns(n,function(e){0===o.length?E(e.success)&&e.success.call(e.scope):E(e.failure)&&e.failure.call(e.scope,o)})}};s()},e.ScriptLoader=new e,e}(),os=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},is={},ss=os("en"),cs=function(){return he(is,ss.get())},ls={getData:function(){return ce(is,function(e){return Ne({},e)})},setCode:function(e){e&&ss.set(e)},getCode:function(){return ss.get()},add:function(e,t){var n=is[e];n||(is[e]=n={}),se(t,function(e,t){n[t.toLowerCase()]=e})},translate:function(e){var t,n=cs().getOr({}),r=function(e){return E(e)?Object.prototype.toString.call(e):a(e)?"":""+e},a=function(e){return""===e||null===e||void 0===e},o=function(e){var t=r(e);return he(n,t.toLowerCase()).map(r).getOr(t)},i=function(e){return e.replace(/{context:\w+}$/,"")};if(a(e))return"";if(T(t=e)&&ve(t,"raw"))return r(e.raw);if(function(e){return D(e)&&e.length>1}(e)){var s=e.slice(1);return i(o(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return ve(s,t)?r(s[t]):e}))}return i(o(e))},isRtl:function(){return cs().bind(function(e){return he(e,"_dir")}).exists(function(e){return"rtl"===e})},hasCode:function(e){return ve(is,e)}};function us(){var e=this,t=[],n={},r={},a=[],o=function(e,t){var n=W(a,function(n){return n.name===e&&n.state===t});H(n,function(e){return e.callback()})},i=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},s=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},c=function(e,t,a,l,u){if(!n[e]){var d="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=us.baseURL+"/"+d),n[e]=d.substring(0,d.lastIndexOf("/"));var f=function(){o(e,"loaded"),function(e,t,n,r){var a=i(e);H(a,function(e){var n=s(t,e);c(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(as))}(e,t,a,l)};r[e]?f():as.ScriptLoader.add(d,f,l,u)}},l=function(e,t,o){void 0===o&&(o="added"),ve(r,e)&&"added"===o?t():ve(n,e)&&"loaded"===o?t():a.push({name:e,state:o,callback:t})};return{items:t,urls:n,lookup:r,_listeners:a,get:function(e){if(r[e])return r[e].instance},dependencies:i,requireLangPack:function(e,t){!1!==us.languageLoad&&l(e,function(){var r=ls.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||as.ScriptLoader.add(n[e]+"/langs/"+r+".js")},"loaded")},add:function(e,n,a){var i=n;return t.push(i),r[e]={instance:i,dependencies:a},o(e,"added"),i},remove:function(e){delete n[e],delete r[e]},createUrl:s,addComponents:function(t,n){var r=e.urls[t];H(n,function(e){as.ScriptLoader.add(r+"/"+e)})},load:c,waitFor:l}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(us||(us={}));var ds=us,fs=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))}}},ms=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},ps=function(e,t){var n=Rn(e,t);return void 0===n||""===n?[]:n.split(" ")},hs=function(e){return void 0!==e.dom.classList},vs=function(e,t){return function(e,t,n){var r=ps(e,t).concat([n]);return En(e,t,r.join(" ")),!0}(e,"class",t)},gs=function(e,t){return function(e,t,n){var r=W(ps(e,t),function(e){return e!==n});return r.length>0?En(e,t,r.join(" ")):Bn(e,t),!1}(e,"class",t)},bs=function(e,t){hs(e)?e.dom.classList.add(t):vs(e,t)},ys=function(e){0===(hs(e)?e.dom.classList:function(e){return ps(e,"class")}(e)).length&&Bn(e,"class")},ws=function(e,t){return hs(e)&&e.dom.classList.contains(t)},xs=function(e,t){var n=[];return H(Rt(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(xs(e,t))}),n},ks=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return gt(n)?[]:F(n.querySelectorAll(e),pt.fromDom)}(t,e)},_s=d("mce-annotation"),Ss=d("data-mce-annotation"),Cs=d("data-mce-annotation-uid"),Ns=function(e,t){var n=e.selection.getRng(),r=pt.fromDom(n.startContainer),a=pt.fromDom(e.getBody()),o=t.fold(function(){return"."+_s()},function(e){return"["+Ss()+'="'+e+'"]'}),i=Vt(r,n.startOffset).getOr(r),s=function(e,t){return n=t,(r=e.dom)&&r.hasAttribute&&r.hasAttribute(n)?k.some(Rn(e,t)):k.none();var n,r};return vr(i,o,function(e){return bt(e,a)}).bind(function(t){return s(t,""+Cs()).bind(function(n){return s(t,""+Ss()).map(function(t){var r=Ts(e,n);return{uid:n,name:t,elements:r}})})})},Ts=function(e,t){var n=pt.fromDom(e.getBody());return ks(n,"["+Cs()+'="'+t+'"]')},Ds=function(e,t){var n=os({}),r=function(e,t){a(e,function(e){return t(e),e})},a=function(e,t){var r=n.get(),a=t(r.hasOwnProperty(e)?r[e]:{listeners:[],previous:os(k.none())});r[e]=a,n.set(r)},o=ms(function(){var t,o,i,s=n.get(),c=(t=oe(s),(i=R.call(t,0)).sort(o),i);H(c,function(t){a(t,function(n){var a=n.previous.get();return Ns(e,k.some(t)).fold(function(){a.isSome()&&(!function(e){r(e,function(t){H(t.listeners,function(t){return t(!1,e)})})}(t),n.previous.set(k.none()))},function(e){var t=e.uid,o=e.name,i=e.elements;a.is(t)||(!function(e,t,n){r(e,function(r){H(r.listeners,function(r){return r(!0,e,{uid:t,nodes:F(n,function(e){return e.dom})})})})}(o,t,i),n.previous.set(k.some(t)))}),{previous:n.previous,listeners:n.listeners}})})},30);e.on("remove",function(){o.cancel()}),e.on("NodeChange",function(){o.throttle()});return{addListener:function(e,t){a(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},Is=function(e,t){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){H(e,function(e){(function(e){return k.from(e.attr(Ss())).bind(t.lookup)})(e).each(function(t){!1===t.persistent&&e.unwrap()})})})})},Ms=0,Os=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Ms+String(t)},As=function(e,t){var n,r,a=Dt(e).dom,o=pt.fromDom(a.createDocumentFragment()),i=(n=t,(r=(a||document).createElement("div")).innerHTML=n,Rt(pt.fromDom(r)));Xt(o,i),Jt(e),Qt(e,o)},Ls=function(e,t){return pt.fromDom(e.dom.cloneNode(t))},Es=function(e){return Ls(e,!1)},zs=function(e){return Ls(e,!0)},Rs=function(e,t,n){void 0===n&&(n=g);var r=new Nr(e,t),a=function(e){var t;do{t=r[e]()}while(t&&!kn(t)&&!n(t));return k.from(t).filter(kn)};return{current:function(){return k.from(r.current()).filter(kn)},next:function(){return a("next")},prev:function(){return a("prev")},prev2:function(){return a("prev2")}}},Vs=function(e,t){var n=t||function(t){return e.isBlock(t)||Nn(t)||In(t)},r=function(e,t,n,a){if(kn(e)){var o=a(e,t,e.data);if(-1!==o)return k.some({container:e,offset:o})}return n().bind(function(e){return r(e.container,e.offset,n,a)})};return{backwards:function(e,t,a,o){var i=Rs(e,o,n);return r(e,t,function(){return i.prev().map(function(e){return{container:e,offset:e.length}})},a).getOrNull()},forwards:function(e,t,a,o){var i=Rs(e,o,n);return r(e,t,function(){return i.next().map(function(e){return{container:e,offset:0}})},a).getOrNull()}}},Bs=function(e,t,n){return e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none()},$s=Math.round,Us=function(e){return e?{left:$s(e.left),top:$s(e.top),bottom:$s(e.bottom),right:$s(e.right),width:$s(e.width),height:$s(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ps=function(e,t){return e=Us(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},Fs=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Hs=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Fs(t.top-e.bottom,e,t)},js=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Fs(t.bottom-e.top,e,t)},qs=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Ws=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ys=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Gs=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ks=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Gs.test(e)},Qs=pn,Xs=sa,Js=vn("display","block table"),Zs=vn("float","left right"),ec=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}(Qs,Xs,p(Zs)),tc=p(vn("white-space","pre pre-line pre-wrap")),nc=kn,rc=Nn,ac=es.nodeIndex,oc=Ys,ic=function(e){return"createRange"in e?e.createRange():es.DOM.createRng()},sc=function(e){return e&&/[\r\n\t ]/.test(e)},cc=function(e){return!!e.setStart&&!!e.setEnd},lc=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(sc(e.toString())&&tc(n.parentNode)&&kn(n)&&(t=n.data,sc(t[r-1])||sc(t[r+1])))},uc=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},dc=function(e){var t,n=e.getClientRects();return t=n.length>0?Us(n[0]):Us(e.getBoundingClientRect()),!cc(e)&&rc(e)&&uc(t)?function(e){var t=e.ownerDocument,n=ic(t),r=t.createTextNode(" "),a=e.parentNode;a.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);var o=Us(n.getBoundingClientRect());return a.removeChild(r),o}(e):uc(t)&&cc(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,a=e.endOffset;if(t===n&&kn(n)&&0===r&&1===a){var o=e.cloneRange();return o.setEndAfter(n),dc(o)}return null}(e):t},fc=function(e,t){var n=Ps(e,t);return n.width=1,n.right=n.left+1,n},mc=function(e){var t,n,r=[],a=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},o=function(e,t){var n=ic(e.ownerDocument);if(t<e.data.length){if(Ks(e.data[t]))return r;if(Ks(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!lc(n)))return a(fc(dc(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),lc(n)||a(fc(dc(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),lc(n)||a(fc(dc(n),!0)))};if(nc(e.container()))return o(e.container(),e.offset()),r;if(Qs(e.container()))if(e.isAtEnd())n=oc(e.container(),e.offset()),nc(n)&&o(n,n.data.length),ec(n)&&!rc(n)&&a(fc(dc(n),!1));else{if(n=oc(e.container(),e.offset()),nc(n)&&o(n,0),ec(n)&&e.isAtEnd())return a(fc(dc(n),!1)),r;t=oc(e.container(),e.offset()-1),ec(t)&&!rc(t)&&(Js(t)||Js(n)||!ec(n))&&a(fc(dc(t),!1)),ec(n)&&a(fc(dc(n),!0))}return r};function pc(e,t,n){var r=function(){return n||(n=mc(pc(e,t))),n};return{container:d(e),offset:d(t),toRange:function(){var n=ic(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return nc(e),0===t},isAtEnd:function(){return nc(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return oc(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,ac(t)+1)},e.before=function(t){return e(t.parentNode,ac(t))},e.isAbove=function(e,t){return Bs(ne(t.getClientRects()),re(e.getClientRects()),Hs).getOr(!1)},e.isBelow=function(e,t){return Bs(re(t.getClientRects()),ne(e.getClientRects()),js).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&kn(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(pc||(pc={}));var hc,vc=pc,gc=function(e,t){kn(t)&&0===t.data.length&&e.remove(t)},bc=function(e,t,n){Cn(n)?function(e,t,n){var r=k.from(n.firstChild),a=k.from(n.lastChild);t.insertNode(n),r.each(function(t){return gc(e,t.previousSibling)}),a.each(function(t){return gc(e,t.nextSibling)})}(e,t,n):function(e,t,n){t.insertNode(n),gc(e,n.previousSibling),gc(e,n.nextSibling)}(e,t,n)},yc=kn,wc=bn,xc=es.nodeIndex,kc=function(e){var t=e.parentNode;return wc(t)?kc(t):t},_c=function(e){return e?_e(e.childNodes,function(e,t){return wc(t)&&"BR"!==t.nodeName?e=e.concat(_c(t)):e.push(t),e},[]):[]},Sc=function(e){return function(t){return e===t}},Cc=function(e){return(yc(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n;t=_c(kc(e)),n=Se(t,Sc(e),e),t=t.slice(0,n+1);var r=_e(t,function(e,n,r){return yc(n)&&yc(t[r-1])&&e++,e},0);return t=xe(t,hn([e.nodeName])),(n=Se(t,Sc(e),e))-r}(e)+"]"},Nc=function(e,t){var n,r,a,o,i,s=[];return n=t.container(),r=t.offset(),yc(n)?a=function(e,t){for(;(e=e.previousSibling)&&yc(e);)t+=e.data.length;return t}(n,r):(r>=(o=n.childNodes).length?(a="after",r=o.length-1):a="before",n=o[r]),s.push(Cc(n)),i=function(e,t,n){var r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r}(e,n),i=xe(i,p(bn)),(s=s.concat(we(i,function(e){return Cc(e)}))).reverse().join("/")+","+a},Tc=function(e,t){var n;if(!t)return null;var r=t.split(","),a=r[0].split("/");n=r.length>1?r[1]:"before";var o=_e(a,function(e,t){var n,r,a,o,i=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return i?("text()"===i[1]&&(i[1]="#text"),n=e,r=i[1],a=parseInt(i[2],10),o=_c(n),o=xe(o,function(e,t){return!yc(e)||!yc(o[t-1])}),(o=xe(o,hn([r])))[a]):null},e);return o?yc(o)?function(e,t){for(var n,r=e,a=0;yc(r);){if(n=r.data.length,t>=a&&t<=a+n){e=r,t-=a;break}if(!yc(r.nextSibling)){e=r,t=n;break}a+=n,r=r.nextSibling}return yc(e)&&t>e.data.length&&(t=e.data.length),vc(e,t)}(o,parseInt(n,10)):(n="after"===n?xc(o)+1:xc(o),vc(o.parentNode,n)):null},Dc=In,Ic=function(e,t,n,r,a){var o,i=r[a?"startContainer":"endContainer"],s=r[a?"startOffset":"endOffset"],c=[],l=0,u=e.getRoot();for(kn(i)?c.push(n?function(e,t,n){var r,a;for(a=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&kn(r);r=r.previousSibling)a+=e(r.data).length;return a}(t,i,s):s):(s>=(o=i.childNodes).length&&o.length&&(l=1,s=Math.max(0,o.length-1)),c.push(e.nodeIndex(o[s],n)+l));i&&i!==u;i=i.parentNode)c.push(e.nodeIndex(i,n));return c},Mc=function(e,t,n){var r=0;return ft.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Oc=function(e,t){var n,r,a,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],pn(n)&&"TR"===n.nodeName&&(n=(a=n.childNodes)[Math.min(t?r:r-1,a.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Ac=function(e){return Oc(e,!0),Oc(e,!1),e},Lc=function(e,t){var n;if(pn(e)&&(e=Ys(e,t),Dc(e)))return e;if(qr(e)){if(kn(e)&&Hr(e)&&(e=e.parentNode),n=e.previousSibling,Dc(n))return n;if(n=e.nextSibling,Dc(n))return n}},Ec=function(e,t,n){var r=n.getNode(),a=r?r.nodeName:null,o=n.getRng();if(Dc(r)||"IMG"===a)return{name:a,index:Mc(n.dom,a,r)};var i=function(e){return Lc(e.startContainer,e.startOffset)||Lc(e.endContainer,e.endOffset)}(o);return i?{name:a=i.tagName,index:Mc(n.dom,a,i)}:function(e,t,n,r){var a=t.dom,o={};return o.start=Ic(a,e,n,r,!0),t.isCollapsed()||(o.end=Ic(a,e,n,r,!1)),o}(e,n,t,o)},zc=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Rc=function(e,t){var n=e.dom,r=e.getRng(),a=n.uniqueId(),o=e.isCollapsed(),i=e.getNode(),s=i.nodeName;if("IMG"===s)return{name:s,index:Mc(n,s,i)};var c=Ac(r.cloneRange());if(!o){c.collapse(!1);var l=zc(n,a+"_end",t);bc(n,c,l)}(r=Ac(r)).collapse(!0);var u=zc(n,a+"_start",t);return bc(n,r,u),e.moveToBookmark({id:a,keep:!0}),{id:a}},Vc=function(e,t,n){return 2===t?Ec(Ur,n,e):3===t?function(e){var t=e.getRng();return{start:Nc(e.dom.getRoot(),vc.fromRangeStart(t)),end:Nc(e.dom.getRoot(),vc.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):Rc(e,!1)},Bc=m(Ec,f,!0),$c=es.DOM,Uc=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var a=e.getParam(t,"","hash");return a.hasOwnProperty(e.id)?a[e.id]:n}return r},Pc=function(e){return e.getParam("content_security_policy","")},Fc=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},Hc=function(e){return e.getParam("forced_root_block_attrs",{})},jc=function(e){return e.getParam("automatic_uploads",!0,"boolean")},qc=function(e){return e.getParam("icons","","string")},Wc=function(e){return e.getParam("referrer_policy","","string")},Yc=function(e){return e.getParam("language","en","string")},Gc=function(e){return e.getParam("indent_use_margin",!1)},Kc=function(e){var t=e.getParam("object_resizing");return!1!==t&&!st.iOS&&(N(t)?t:"table,img,figure.image,div")},Qc=function(e){return e.getParam("event_root")},Xc=function(e){return e.getParam("service_message")},Jc=function(e){return e.getParam("theme")},Zc=function(e){return!1!==e.getParam("inline_boundaries")},el=function(e){return e.getParam("formats")},tl=function(e){return e.getParam("plugins","","string")},nl=pn,rl=kn,al=function(e){var t=e.parentNode;t&&t.removeChild(e)},ol=function(e){var t=Ur(e);return{count:e.length-t.length,text:t}},il=function(e){for(var t;-1!==(t=e.data.lastIndexOf(Br));)e.deleteData(t,1)},sl=function(e,t){return dl(e),t},cl=function(e,t){var n,r,a,o=t.container(),i=(n=ae(o.childNodes),r=e,a=$(n,r),-1===a?k.none():k.some(a)).map(function(e){return e<t.offset()?vc(o,t.offset()-1):t}).getOr(t);return dl(e),i},ll=function(e,t){return rl(e)&&t.container()===e?function(e,t){var n=ol(e.data.substr(0,t.offset())),r=ol(e.data.substr(t.offset()));return(n.text+r.text).length>0?(il(e),vc(e,t.offset()-n.count)):t}(e,t):sl(e,t)},ul=function(e,t){return vc.isTextPosition(t)?ll(e,t):function(e,t){return t.container()===e.parentNode?cl(e,t):sl(e,t)}(e,t)},dl=function(e){nl(e)&&qr(e)&&(Wr(e)?e.removeAttribute("data-mce-caret"):al(e)),rl(e)&&(il(e),0===e.data.length&&al(e))},fl=Je().browser,ml=In,pl=On,hl=Mn,vl=function(e,t,n){var r,a,o,i,s,c=Ps(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,a=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),a=e.scrollLeft-s.left,o=e.scrollTop-s.top),c.left+=a,c.right+=a,c.top+=o,c.bottom+=o,c.width=1,(i=t.offsetWidth-t.clientWidth)>0&&(n&&(i*=-1),c.left+=i,c.right+=i),c},gl=function(e,t,n,r){var a,o,i=os(k.none()),s=Fc(e),c=s.length>0?s:"p",l=function(){!function(e){for(var t=ks(pt.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),n=0;n<t.length;n++){var r,a=t[n].dom,o=a.previousSibling;Xr(o)&&(1===(r=o.data).length?o.parentNode.removeChild(o):o.deleteData(r.length-1,1)),o=a.nextSibling,Qr(o)&&(1===(r=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1))}}(t),o&&(dl(o),o=null),i.get().each(function(e){qi(e.caret).remove(),i.set(k.none())}),a&&(xr.clearInterval(a),a=null)},u=function(){a=xr.setInterval(function(){r()?qi("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):qi("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")},500)};return{show:function(e,r){var a,s;if(l(),hl(r))return null;if(!n(r))return o=function(e,t){var n,r=e.ownerDocument.createTextNode(Br),a=e.parentNode;if(t){if(n=e.previousSibling,Fr(n)){if(qr(n))return n;if(Xr(n))return n.splitText(n.data.length-1)}a.insertBefore(r,e)}else{if(n=e.nextSibling,Fr(n)){if(qr(n))return n;if(Qr(n))return n.splitText(1),n}e.nextSibling?a.insertBefore(r,e.nextSibling):a.appendChild(r)}return r}(r,e),s=r.ownerDocument.createRange(),yl(o.nextSibling)?(s.setStart(o,0),s.setEnd(o,0)):(s.setStart(o,1),s.setEnd(o,1)),s;o=Kr(c,r,e),a=vl(t,r,e),qi(o).css("top",a.top);var d=qi('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(t)[0];return i.set(k.some({caret:d,element:r,before:e})),i.get().each(function(t){e&&qi(t.caret).addClass("mce-visual-caret-before")}),u(),(s=r.ownerDocument.createRange()).setStart(o,0),s.setEnd(o,0),s},hide:l,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){i.get().each(function(e){var n=vl(t,e.element,e.before);qi(e.caret).css(Ne({},n))})},destroy:function(){return xr.clearInterval(a)}}},bl=function(){return fl.isIE()||fl.isEdge()||fl.isFirefox()},yl=function(e){return ml(e)||pl(e)},wl=function(e){return yl(e)||yn(e)&&bl()},xl=In,kl=On,_l=vn("display","block table table-cell table-caption list-item"),Sl=qr,Cl=Hr,Nl=pn,Tl=sa,Dl=function(e){return e>0},Il=function(e){return e<0},Ml=function(e,t){for(var n;n=e(t);)if(!Cl(n))return n;return null},Ol=function(e,t,n,r,a){var o=new Nr(e,r),i=xl(e)||Cl(e);if(Il(t)){if(i&&n(e=Ml(o.prev,!0)))return e;for(;e=Ml(o.prev,a);)if(n(e))return e}if(Dl(t)){if(i&&n(e=Ml(o.next,!0)))return e;for(;e=Ml(o.next,a);)if(n(e))return e}return null},Al=function(e,t){for(;e&&e!==t;){if(_l(e))return e;e=e.parentNode}return null},Ll=function(e,t,n){return Al(e.container(),n)===Al(t.container(),n)},El=function(e,t){if(!t)return null;var n=t.container(),r=t.offset();return Nl(n)?n.childNodes[r+e]:null},zl=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Rl=function(e,t,n){return Al(t,e)===Al(n,e)},Vl=function(e,t,n){var r,a;for(a=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[a],Sl(r)&&(r=r[a]),xl(r)||kl(r)){if(Rl(t,r,n))return r;break}if(Tl(r))break;n=n.parentNode}return null},Bl=m(zl,!0),$l=m(zl,!1),Ul=function(e,t,n){var r,a,o,i=m(Vl,!0,t),s=m(Vl,!1,t);a=n.startContainer;var c=n.startOffset;if(Hr(a)){if(Nl(a)||(a=a.parentNode),"before"===(o=a.getAttribute("data-mce-caret"))&&(r=a.nextSibling,wl(r)))return Bl(r);if("after"===o&&(r=a.previousSibling,wl(r)))return $l(r)}if(!n.collapsed)return n;if(kn(a)){if(Sl(a)){if(1===e){if(r=s(a))return Bl(r);if(r=i(a))return $l(r)}if(-1===e){if(r=i(a))return $l(r);if(r=s(a))return Bl(r)}return n}if(Xr(a)&&c>=a.data.length-1)return 1===e&&(r=s(a))?Bl(r):n;if(Qr(a)&&c<=1)return-1===e&&(r=i(a))?$l(r):n;if(c===a.data.length)return(r=s(a))?Bl(r):n;if(0===c)return(r=i(a))?$l(r):n}return n},Pl=function(e,t){return k.from(El(e?0:-1,t)).filter(xl)},Fl=function(e,t,n){var r=Ul(e,t,n);return-1===e?pc.fromRangeStart(r):pc.fromRangeEnd(r)},Hl=function(e){return k.from(e.getNode()).map(pt.fromDom)},jl=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},ql=function(e,t){var n=Ll(e,t);return!(n||!Nn(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(hc||(hc={}));var Wl,Yl=In,Gl=kn,Kl=pn,Ql=Nn,Xl=sa,Jl=function(e){return aa(e)||function(e){return!!ca(e)&&!0!==G(ae(e.getElementsByTagName("*")),function(e,t){return e||Zr(t)},!1)}(e)},Zl=la,eu=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},tu=function(e,t){if(Dl(e)){if(Xl(t.previousSibling)&&!Gl(t.previousSibling))return vc.before(t);if(Gl(t))return vc(t,0)}if(Il(e)){if(Xl(t.nextSibling)&&!Gl(t.nextSibling))return vc.after(t);if(Gl(t))return vc(t,t.data.length)}return Il(e)?Ql(t)?vc.before(t):vc.after(t):vc.before(t)},nu=function(e,t,n){var r,a,o,i;if(!Kl(n)||!t)return null;if(t.isEqual(vc.after(n))&&n.lastChild){if(i=vc.after(n.lastChild),Il(e)&&Xl(n.lastChild)&&Kl(n.lastChild))return Ql(n.lastChild)?vc.before(n.lastChild):i}else i=t;var s=i.container(),c=i.offset();if(Gl(s)){if(Il(e)&&c>0)return vc(s,--c);if(Dl(e)&&c<s.length)return vc(s,++c);r=s}else{if(Il(e)&&c>0&&(a=eu(s,c-1),Xl(a)))return!Jl(a)&&(o=Ol(a,e,Zl,a))?Gl(o)?vc(o,o.data.length):vc.after(o):Gl(a)?vc(a,a.data.length):vc.before(a);if(Dl(e)&&c<s.childNodes.length&&(a=eu(s,c),Xl(a)))return Ql(a)?function(e,t){var n=t.nextSibling;return n&&Xl(n)?Gl(n)?vc(n,0):vc.before(n):nu(hc.Forwards,vc.after(t),e)}(n,a):!Jl(a)&&(o=Ol(a,e,Zl,a))?Gl(o)?vc(o,0):vc.before(o):Gl(a)?vc(a,0):vc.after(a);r=a||i.getNode()}if((Dl(e)&&i.isAtEnd()||Il(e)&&i.isAtStart())&&(r=Ol(r,e,b,n,!0),Zl(r,n)))return tu(e,r);a=Ol(r,e,Zl,n);var l=Ce(W(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(s,n),Yl));return!l||a&&l.contains(a)?a?tu(e,a):null:i=Dl(e)?vc.after(l):vc.before(l)},ru=function(e){return{next:function(t){return nu(hc.Forwards,t,e)},prev:function(t){return nu(hc.Backwards,t,e)}}},au=function(e){return vc.isTextPosition(e)?0===e.offset():sa(e.getNode())},ou=function(e){if(vc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return sa(e.getNode(!0))},iu=function(e,t){return!vc.isTextPosition(e)&&!vc.isTextPosition(t)&&e.getNode()===t.getNode(!0)},su=function(e,t,n){return e?!iu(t,n)&&(r=t,!(!vc.isTextPosition(r)&&Nn(r.getNode())))&&ou(t)&&au(n):!iu(n,t)&&au(t)&&ou(n);var r},cu=function(e,t,n){var r=ru(t);return k.from(e?r.next(n):r.prev(n))},lu=function(e,t,n){return cu(e,t,n).bind(function(r){return Ll(n,r,t)&&su(e,n,r)?cu(e,t,r):k.some(r)})},uu=function(e,t,n,r){return lu(e,t,n).bind(function(n){return r(n)?uu(e,t,n,r):k.some(n)})},du=function(e,t){var n,r=e?t.firstChild:t.lastChild;return kn(r)?k.some(vc(r,e?0:r.data.length)):r?sa(r)?k.some(e?vc.before(r):Nn(n=r)?vc.before(n):vc.after(n)):function(e,t,n){var r=e?vc.before(n):vc.after(n);return cu(e,t,r)}(e,t,r):k.none()},fu=m(cu,!0),mu=m(cu,!1),pu=m(du,!0),hu=m(du,!1),vu=function(e){return pn(e)&&"_mce_caret"===e.id},gu=function(e,t){for(;t&&t!==e;){if("_mce_caret"===t.id)return t;t=t.parentNode}return null},bu=function(e,t){return pn(t)&&e.isBlock(t)&&!t.innerHTML&&!st.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},yu=function(e,t){return hu(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},wu=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!gu(e,t))&&(function(e,t){var n=e.ownerDocument.createTextNode(Br);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),!0)},xu=function(e,t,n,r){var a,o,i,s,c=n[t?"start":"end"],l=e.getRoot();if(c){for(i=c[0],o=l,a=c.length-1;a>=1;a--){if(s=o.childNodes,wu(l,o,r))return!0;if(c[a]>s.length-1)return!!wu(l,o,r)||yu(o,r);o=s[c[a]]}3===o.nodeType&&(i=Math.min(c[0],o.nodeValue.length)),1===o.nodeType&&(i=Math.min(c[0],o.childNodes.length)),t?r.setStart(o,i):r.setEnd(o,i)}return!0},ku=function(e){return kn(e)&&e.data.length>0},_u=function(e,t,n){var r,a,o,i,s,c,l=e.get(n.id+"_"+t),u=n.keep;if(l){if(r=l.parentNode,"start"===t?(u?l.hasChildNodes()?(r=l.firstChild,a=1):ku(l.nextSibling)?(r=l.nextSibling,a=0):ku(l.previousSibling)?(r=l.previousSibling,a=l.previousSibling.data.length):(r=l.parentNode,a=e.nodeIndex(l)+1):a=e.nodeIndex(l),s=r,c=a):(u?l.hasChildNodes()?(r=l.firstChild,a=1):ku(l.previousSibling)?(r=l.previousSibling,a=l.previousSibling.data.length):(r=l.parentNode,a=e.nodeIndex(l)):a=e.nodeIndex(l),s=r,c=a),!u){for(i=l.previousSibling,o=l.nextSibling,ft.each(ft.grep(l.childNodes),function(e){kn(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);i&&o&&i.nodeType===o.nodeType&&kn(i)&&!st.opera&&(a=i.nodeValue.length,i.appendData(o.nodeValue),e.remove(o),s=i,c=a)}return k.some(vc(s,c))}return k.none()},Su=function(e,t){var n=e.dom;if(t){if(function(e){return ft.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return xu(e,!0,t,n)&&xu(e,!1,t,n)?k.some(n):k.none()}(n,t);if(function(e){return"string"==typeof e.start}(t))return k.some(function(e,t){var n,r=e.createRng();return n=Tc(e.getRoot(),t.start),r.setStart(n.container(),n.offset()),n=Tc(e.getRoot(),t.end),r.setEnd(n.container(),n.offset()),r}(n,t));if(function(e){return e.hasOwnProperty("id")}(t))return function(e,t){var n=_u(e,"start",t),r=_u(e,"end",t);return Bs(n,r.or(n),function(t,n){var r=e.createRng();return r.setStart(bu(e,t.container()),t.offset()),r.setEnd(bu(e,n.container()),n.offset()),r})}(n,t);if(function(e){return e.hasOwnProperty("name")}(t))return function(e,t){return k.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})}(n,t);if(function(e){return e.hasOwnProperty("rng")}(t))return k.some(t.rng)}return k.none()},Cu=function(e,t,n){return Vc(e,t,n)},Nu=function(e,t){Su(e,t).each(function(t){e.setRng(t)})},Tu=function(e){return pn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Du=(Wl=" ",function(e){return Wl===e}),Iu=function(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},Mu=function(e){return!Iu(e)&&!Du(e)},Ou=function(e){return!!e.nodeType},Au=function(e,t,n){var r,a,o,i=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!function(e){return e&&/^(IMG)$/.test(e.nodeName)}(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(i<(o=s.childNodes).length?(s=o[i],r=new Nr(s,e.getParent(s,e.isBlock))):(s=o[o.length-1],(r=new Nr(s,e.getParent(s,e.isBlock))).next(!0)),a=r.current();a;a=r.next())if(3===a.nodeType&&!Ru(a))return n.setStart(a,0),void t.setRng(n)},Lu=function(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(1===e.nodeType||!Ru(e))return e}},Eu=function(e,t){return Ou(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},zu=function(e,t,n){return e.schema.isValidChild(t,n)},Ru=function(e,t){if(void 0===t&&(t=!1),L(e)&&kn(e)){var n=t?e.data.replace(/ /g," "):e.data;return da(n)}return!1},Vu=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},Bu=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},$u=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},Uu=function(e,t,n){return $u(e,e.getStyle(t,n),n)},Pu=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},Fu=function(e,t,n){return e.getParents(t,n,e.getRoot())},Hu=function(e,t,n){var r=["inline","block","selector","attributes","styles","classes"],a=function(e){return me(e,function(e,t){return P(r,function(e){return e===t})})};return P(e.formatter.get(t),function(t){var r=a(t);return P(e.formatter.get(n),function(e){var t,n,o,i=a(e);return t=r,n=i,void 0===o&&(o=c),s(o).eq(t,n)})})},ju=function(e){return ge(e,"block")},qu=function(e){return ge(e,"selector")},Wu=function(e){return ge(e,"inline")},Yu=Tu,Gu=Fu,Ku=Ru,Qu=Eu,Xu=function(e,t){for(var n=t;n;){if(pn(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Ju=function(e,t,n,r){for(var a=t.data,o=n;e?o>=0:o<a.length;e?o--:o++)if(r(a.charAt(o)))return e?o+1:o;return-1},Zu=function(e,t,n){return Ju(e,t,n,function(e){return Du(e)||Iu(e)})},ed=function(e,t,n){return Ju(e,t,n,Mu)},td=function(e,t,n,r,a,o){var i,s=e.getParent(n,e.isBlock)||t,c=function(t,n,r){var o=Vs(e),c=a?o.backwards:o.forwards;return k.from(c(t,n,function(e,t){return Yu(e.parentNode)?-1:(i=e,r(a,e,t))},s))};return c(n,r,Zu).bind(function(e){return o?c(e.container,e.offset+(a?-1:0),ed):k.some(e)}).orThunk(function(){return i?k.some({container:i,offset:a?0:i.length}):k.none()})},nd=function(e,t,n,r,a){kn(r)&&0===r.nodeValue.length&&r[a]&&(r=r[a]);for(var o=Gu(e,r),i=0;i<o.length;i++)for(var s=0;s<t.length;s++){var c=t[s];if(!("collapsed"in c&&c.collapsed!==n.collapsed)&&e.is(o[i],c.selector))return o[i]}return r},rd=function(e,t,n,r){var a,o=e.dom,i=o.getRoot();if(t[0].wrapper||(a=o.getParent(n,t[0].block,i)),!a){var s=o.getParent(n,"LI,TD,TH");a=o.getParent(kn(n)?n.parentNode:n,function(t){return t!==i&&Qu(e,t)},s)}if(a&&t[0].wrapper&&(a=Gu(o,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a[r]&&!o.isBlock(a[r])&&(a=a[r],!Bu(a,"br")););return a||n},ad=function(e,t,n,r){var a=n.parentNode;return!L(n[r])&&(!(a!==t&&!A(a)&&!e.isBlock(a))||ad(e,t,a,r))},od=function(e,t,n,r,a){var o,i,s=n,c=a?"previousSibling":"nextSibling",l=e.getRoot();if(kn(n)&&!Ku(n)&&(a?r>0:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(s))return s;for(o=s[c];o;o=o[c]){var u=kn(o)&&!ad(e,l,o,c);if(!Yu(o)&&(!Nn(i=o)||!i.getAttribute("data-mce-bogus")||i.nextSibling)&&!Ku(o,u))return s}if(s===l||s.parentNode===l){n=s;break}s=s.parentNode}return n},id=function(e){return Yu(e.parentNode)||Yu(e)},sd=function(e,t,n,r){void 0===r&&(r=!1);var a=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,c=e.dom;(pn(a)&&a.hasChildNodes()&&(a=Ys(a,o),kn(a)&&(o=0)),pn(i)&&i.hasChildNodes()&&(i=Ys(i,t.collapsed?s:s-1),kn(i)&&(s=i.nodeValue.length)),a=Xu(c,a),i=Xu(c,i),id(a)&&(a=Yu(a)?a:a.parentNode,a=t.collapsed?a.previousSibling||a:a.nextSibling||a,kn(a)&&(o=t.collapsed?a.length:0)),id(i)&&(i=Yu(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,kn(i)&&(s=t.collapsed?0:i.length)),t.collapsed)&&(td(c,e.getBody(),a,o,!0,r).each(function(e){var t=e.container,n=e.offset;a=t,o=n}),td(c,e.getBody(),i,s,!1,r).each(function(e){var t=e.container,n=e.offset;i=t,s=n}));return(n[0].inline||n[0].block_expand)&&(n[0].inline&&kn(a)&&0!==o||(a=od(c,n,a,o,!0)),n[0].inline&&kn(i)&&s!==i.nodeValue.length||(i=od(c,n,i,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(a=nd(c,n,t,a,"previousSibling"),i=nd(c,n,t,i,"nextSibling")),(n[0].block||n[0].selector)&&(a=rd(e,n,a,"previousSibling"),i=rd(e,n,i,"nextSibling"),n[0].block&&(c.isBlock(a)||(a=od(c,n,a,o,!0)),c.isBlock(i)||(i=od(c,n,i,s,!1)))),pn(a)&&(o=c.nodeIndex(a),a=a.parentNode),pn(i)&&(s=c.nodeIndex(i)+1,i=i.parentNode),{startContainer:a,startOffset:o,endContainer:i,endOffset:s}},cd=function(e,t){var n=e.childNodes;return t>=n.length?t=n.length-1:t<0&&(t=0),n[t]||e},ld=function(e,t,n){var r=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,s=function(e){var t;return 3===(t=e[0]).nodeType&&t===r&&a>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===i&&e.length>0&&t===o&&3===t.nodeType&&e.splice(e.length-1,1),e},c=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},l=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},u=function(e,t,r){for(var a=r?"nextSibling":"previousSibling",o=e,i=o.parentNode;o&&o!==t;o=i){i=o.parentNode;var l=c(o===e?o:o[a],a);l.length&&(r||l.reverse(),n(s(l)))}};if(1===r.nodeType&&r.hasChildNodes()&&(r=cd(r,a)),1===o.nodeType&&o.hasChildNodes()&&(o=cd(o,i-1)),r===o)return n(s([r]));for(var d=e.findCommonAncestor(r,o),f=r;f;f=f.parentNode){if(f===o)return u(r,d,!0);if(f===d)break}for(f=o;f;f=f.parentNode){if(f===r)return u(o,d);if(f===d)break}var m=l(r,d)||r,p=l(o,d)||o;u(r,m,!0);var h=c(m===r?m:m.nextSibling,"nextSibling",p===o?p.nextSibling:p);h.length&&n(s(h)),u(o,p)},ud=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},dd=function(e){return W(function(e){return X(e,function(e){var t=Ws(e);return t?[pt.fromDom(t)]:[]})}(e),Rr)},fd=function(e,t){var n=ks(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:dd(e)},md=function(e){return fd(ud(e.selection.getSel()),pt.fromDom(e.getBody()))},pd=function(e){return Bt(e).fold(d([e]),function(t){return[e].concat(pd(t))})},hd=function(e){return $t(e).fold(d([e]),function(t){return"br"===xt(t)?At(t).map(function(t){return[e].concat(hd(t))}).getOr([]):[e].concat(hd(t))})},vd=function(e,t){return Bs(function(e){var t=e.startContainer,n=e.startOffset;return kn(t)?0===n?k.some(pt.fromDom(t)):k.none():k.from(t.childNodes[n]).map(pt.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return kn(t)?n===t.data.length?k.some(pt.fromDom(t)):k.none():k.from(t.childNodes[n-1]).map(pt.fromDom)}(t),function(t,n){var r=K(pd(e),m(bt,t)),a=K(hd(e),m(bt,n));return r.isSome()&&a.isSome()}).getOr(!1)},gd=function(e,t,n,r){var a=n,o=new Nr(n,a),i=me(e.schema.getMoveCaretBeforeOnEnterElements(),function(e,t){return!U(["td","th","table"],t.toLowerCase())});do{if(kn(n)&&0!==ft.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(i[n.nodeName])return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=r?o.next():o.prev());"BODY"===a.nodeName&&(r?t.setStart(a,0):t.setEnd(a,a.childNodes.length))},bd=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},yd=function(e,t){var n=md(e);n.length>0?H(n,function(n){var r=n.dom,a=e.dom.createRng();a.setStartBefore(r),a.setEndAfter(r),t(a,!0)}):t(e.selection.getRng(),!1)},wd=function(e,t,n){var r=Rc(e,t);n(r),e.moveToBookmark(r)};var xd=function(e,t){var n=function(t){return e(t)?k.from(t.dom.nodeValue):k.none()};return{get:function(r){if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}}(Ct,"text"),kd=function(e){return xd.get(e)},_d=function(e,t,n,r){return Ot(t).fold(function(){return"skipping"},function(a){return"br"===r||function(e){return Ct(e)&&kd(e)===Br}(t)?"valid":function(e){return St(e)&&ws(e,_s())}(t)?"existing":vu(t.dom)?"caret":zu(e,n,r)&&zu(e,xt(a),n)?"valid":"invalid-child"})},Sd=function(e,t,n,r){var a=t.uid,o=void 0===a?Os("mce-annotation"):a,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["uid"]),s=pt.fromTag("span",e);bs(s,_s()),En(s,""+Cs(),o),En(s,""+Ss(),n);var c=r(o,i),l=c.attributes,u=void 0===l?{}:l,d=c.classes,f=void 0===d?[]:d;return zn(s,u),function(e,t){H(t,function(t){bs(e,t)})}(s,f),s},Cd=function(e,t,n,r,a){var o=[],i=Sd(e.getDoc(),a,n,r),s=os(k.none()),c=function(){s.set(k.none())},l=function(e){H(e,u)},u=function(t){var n,r;switch(_d(e,t,"span",xt(t))){case"invalid-child":c();var a=Rt(t);l(a),c();break;case"valid":var s=r.get().getOrThunk(function(){var e=Es(i);return o.push(e),r.set(k.some(e)),e});Yt(n=t,r=s),Qt(r,n)}};return ld(e.dom,t,function(e){c(),function(e){var t=F(e,pt.fromDom);l(t)}(e)}),o},Nd=function(e,t,n,r){e.undoManager.transact(function(){var a=e.selection,o=a.getRng(),i=md(e).length>0;if(o.collapsed&&!i&&function(e,t){var n=sd(e,t,[{inline:!0}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,o),a.getRng().collapsed&&!i){var s=Sd(e.getDoc(),r,t,n.decorate);As(s," "),a.getRng().insertNode(s.dom),a.select(s.dom)}else wd(a,!1,function(){yd(e,function(a){Cd(e,a,t,n.decorate,r)})})})},Td=function(e){var t,n=(t={},{register:function(e,n){t[e]={name:e,settings:n}},lookup:function(e){return t.hasOwnProperty(e)?k.from(t[e]).map(function(e){return e.settings}):k.none()}});Is(e,n);var r=Ds(e);return{register:function(e,t){n.register(e,t)},annotate:function(t,r){n.lookup(t).each(function(n){Nd(e,t,n,r)})},annotationChanged:function(e,t){r.addListener(e,t)},remove:function(t){Ns(e,k.some(t)).each(function(e){var t=e.elements;H(t,en)})},getAll:function(t){var n=function(e,t){var n=pt.fromDom(e.getBody()),r=ks(n,"["+Ss()+'="'+t+'"]'),a={};return H(r,function(e){var t=Rn(e,Cs()),n=a.hasOwnProperty(t)?a[t]:[];a[t]=n.concat([e])}),a}(e,t);return ce(n,function(e){return F(e,function(e){return e.dom})})}}};function Dd(e){return{getBookmark:m(Cu,e),moveToBookmark:m(Nu,e)}}!function(e){e.isBookmarkNode=Tu}(Dd||(Dd={}));var Id=Dd,Md=function(e,t){for(;t&&t!==e;){if(Dn(t)||In(t))return t;t=t.parentNode}return null},Od=function(e,t,n){if(n.collapsed)return!1;if(st.browser.isIE()&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(pn(r))return P(r.getClientRects(),function(n){return qs(n,e,t)})}return P(n.getClientRects(),function(n){return qs(n,e,t)})},Ad={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return st.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Ld=In,Ed=function(e,t){var n,r,a,o,i,s,c,l,u,d,f,m,p,h,v=t.dom,g=ft.each,b=t.getDoc(),y=document,w=Math.abs,x=Math.round,k=t.getBody(),_={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},S=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},C=function(e){var n=e.target;(function(e,t){if("longpress"===e.type||0===e.type.indexOf("touch")){var n=e.touches[0];return S(e.target)&&!Od(n.clientX,n.clientY,t)}return S(e.target)&&!Od(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},N=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},T=function(e){var n=Kc(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&vt(pt.fromDom(e),n)))},D=function(e,t,n){v.setStyles(N(e),{width:t,height:n})},I=function(e){var g,b,y,_;g=e.screenX-i,b=e.screenY-s,f=g*o[2]+c,m=b*o[3]+l,f=f<5?5:f,m=m<5?5:m,(S(n)&&!1!==function(e){return e.getParam("resize_img_proportional",!0,"boolean")}(t)?!Ad.modifierPressed(e):Ad.modifierPressed(e))&&(w(g)>w(b)?(m=x(f*u),f=x(m/u)):(f=x(m/u),m=x(f*u))),D(r,f,m),y=o.startPos.x+g,_=o.startPos.y+b,y=y>0?y:0,_=_>0?_:0,v.setStyles(a,{left:y,top:_,display:"block"}),a.innerHTML=f+" &times; "+m,o[2]<0&&r.clientWidth<=f&&v.setStyle(r,"left",void 0+(c-f)),o[3]<0&&r.clientHeight<=m&&v.setStyle(r,"top",void 0+(l-m)),(g=k.scrollWidth-p)+(b=k.scrollHeight-h)!==0&&v.setStyles(a,{left:y-g,top:_-b}),d||(!function(e,t,n,r,a){e.fire("ObjectResizeStart",{target:t,width:n,height:r,origin:a})}(t,n,c,l,"corner-"+o.name),d=!0)},M=function(){var e=d;d=!1;var i=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?v.setStyle(N(n),e,r):v.setAttrib(N(n),e,""+r))};e&&(i("width",f),i("height",m)),v.unbind(b,"mousemove",I),v.unbind(b,"mouseup",M),y!==b&&(v.unbind(y,"mousemove",I),v.unbind(y,"mouseup",M)),v.remove(r),v.remove(a),O(n),e&&(!function(e,t,n,r,a){e.fire("ObjectResized",{target:t,width:n,height:r,origin:a})}(t,n,f,m,"corner-"+o.name),v.setAttrib(n,"style",v.getAttrib(n,"style"))),t.nodeChanged()},O=function(e){A(),z();var d=v.getPos(e,k),w=d.x,x=d.y,S=e.getBoundingClientRect(),C=S.width||S.right-S.left,O=S.height||S.bottom-S.top;n!==e&&(n=e,f=m=0);var L=t.fire("ObjectSelected",{target:e});T(e)&&!L.isDefaultPrevented()?g(_,function(e,t){var d;(d=v.get("mceResizeHandle"+t))&&v.remove(d),d=v.add(k,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===st.ie&&(d.contentEditable=!1),v.bind(d,"mousedown",function(d){d.stopImmediatePropagation(),d.preventDefault(),function(d){i=d.screenX,s=d.screenY,c=N(n).clientWidth,l=N(n).clientHeight,u=l/c,(o=e).name=t,o.startPos={x:C*e[0]+w,y:O*e[1]+x},p=k.scrollWidth,h=k.scrollHeight,r=n.cloneNode(!0),v.addClass(r,"mce-clonedresizable"),v.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,v.setStyles(r,{left:w,top:x,margin:0}),D(r,C,O),r.removeAttribute("data-mce-selected"),k.appendChild(r),v.bind(b,"mousemove",I),v.bind(b,"mouseup",M),y!==b&&(v.bind(y,"mousemove",I),v.bind(y,"mouseup",M)),a=v.add(k,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},c+" &times; "+l)}(d)}),e.elm=d,v.setStyles(d,{left:C*e[0]+w-d.offsetWidth/2,top:O*e[1]+x-d.offsetHeight/2})}):A(),n.setAttribute("data-mce-selected","1")},A=function(){z(),n&&n.removeAttribute("data-mce-selected"),se(_,function(e,t){var n=v.get("mceResizeHandle"+t);n&&(v.unbind(n),v.remove(n))})},L=function(n){var r,a=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};d||t.removed||(g(v.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"===n.type?n.target:e.getNode(),a(r=v.$(r).closest("table,img,figure.image,hr")[0],k)&&(R(),a(e.getStart(!0),r)&&a(e.getEnd(!0),r))?O(r):A())},E=function(e){return Ld(Md(t.getBody(),e))},z=function(){se(_,function(e){e.elm&&(v.unbind(e.elm),delete e.elm)})},R=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",function(){if(R(),st.browser.isIE()||st.browser.isEdge()){t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;d||!/^(TABLE|IMG|HR)$/.test(r)||E(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())});var e=function(e){var n=function(e){xr.setEditorTimeout(t,function(){return t.selection.select(e)})};if(E(e.target)||On(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))};v.bind(k,"mscontrolselect",e),t.on("remove",function(){return v.unbind(k,"mscontrolselect",e)})}var r=xr.throttle(function(e){t.composing||L(e)});t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",r),t.on("keyup compositionend",function(e){n&&"TABLE"===n.nodeName&&r(e)}),t.on("hide blur",A),t.on("contextmenu longpress",C,!0)}),t.on("remove",z);return{isResizable:T,showResizeRect:O,hideResizeRect:A,updateResizeRect:L,destroy:function(){n=r=null}}},zd=function(e){return Dn(e)||In(e)},Rd=function(e,t,n){var r,a,o=n;if(o.caretPositionFromPoint)(a=o.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(a.offsetNode,a.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=function(e,t,n){var r,a=n.elementFromPoint(e,t),o=n.body.createTextRange();if(a&&"HTML"!==a.tagName||(a=n.body),o.moveToElementText(a),(r=(r=ft.toArray(o.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-(n=Math.abs(Math.max(n.top-t,n.bottom-t)))})).length>0){t=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return In(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,zd))?null:e}(r,n.body)}return r},Vd=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Bd=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},$d=function(e,t,n){return Bd(e,t,function(e){return e.nodeName===n})},Ud=function(e){return e&&"TABLE"===e.nodeName},Pd=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Fd=function(e,t){return qr(e)&&!1===Bd(e,t,vu)},Hd=function(e,t,n){for(var r=new Nr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Nn(t))return!0},jd=function(e,t,n,r,a){var o,i,s=e.getRoot(),c=e.schema.getNonEmptyElements(),l=e.getParent(a.parentNode,e.isBlock)||s;if(r&&Nn(a)&&t&&e.isEmpty(l))return k.some(pc(a.parentNode,e.nodeIndex(a)));for(var u=new Nr(a,l);i=u[r?"prev":"next"]();){if("false"===e.getContentEditableParent(i)||Fd(i,s))return k.none();if(kn(i)&&i.nodeValue.length>0)return!1===$d(i,s,"A")?k.some(pc(i,r?i.nodeValue.length:0)):k.none();if(e.isBlock(i)||c[i.nodeName.toLowerCase()])return k.none();o=i}return n&&o?k.some(pc(o,0)):k.none()},qd=function(e,t,n,r){var a,o,i,s,c=e.getRoot(),l=!1;a=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"];var u=pn(a)&&o===a.childNodes.length,d=e.schema.getNonEmptyElements();if(s=n,qr(a))return k.none();if(pn(a)&&o>a.childNodes.length-1&&(s=!1),Sn(a)&&(a=c,o=0),a===c){if(s&&(i=a.childNodes[o>0?o-1:0])){if(qr(i))return k.none();if(d[i.nodeName]||Ud(i))return k.none()}if(a.hasChildNodes()){if(o=Math.min(!s&&o>0?o-1:o,a.childNodes.length-1),a=a.childNodes[o],o=kn(a)&&u?a.data.length:0,!t&&a===c.lastChild&&Ud(a))return k.none();if(function(e,t){for(;t&&t!==e;){if(In(t))return!0;t=t.parentNode}return!1}(c,a)||qr(a))return k.none();if(a.hasChildNodes()&&!1===Ud(a)){i=a;var f=new Nr(a,c);do{if(In(i)||qr(i)){l=!1;break}if(kn(i)&&i.nodeValue.length>0){o=s?0:i.nodeValue.length,a=i,l=!0;break}if(d[i.nodeName.toLowerCase()]&&!Pd(i)){o=e.nodeIndex(i),a=i.parentNode,s||o++,l=!0;break}}while(i=s?f.next():f.prev())}}}return t&&(kn(a)&&0===o&&jd(e,u,t,!0,a).each(function(e){a=e.container(),o=e.offset(),l=!0}),pn(a)&&((i=a.childNodes[o])||(i=a.childNodes[o-1]),!i||!Nn(i)||function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t}(i,"A")||Hd(e,i,!1)||Hd(e,i,!0)||jd(e,u,t,!0,i).each(function(e){a=e.container(),o=e.offset(),l=!0}))),s&&!t&&kn(a)&&o===a.nodeValue.length&&jd(e,u,t,!1,a).each(function(e){a=e.container(),o=e.offset(),l=!0}),l?k.some(pc(a,o)):k.none()},Wd=function(e,t){var n=t.collapsed,r=t.cloneRange(),a=pc.fromRangeStart(t);return qd(e,n,!0,r).each(function(e){n&&pc.isAbove(a,e)||r.setStart(e.container(),e.offset())}),n||qd(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Vd(t,r)?k.none():k.some(r)},Yd=function(e,t){return e.splitText(t)},Gd=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,a=e.endOffset;return t===r&&kn(t)?n>0&&n<t.nodeValue.length&&(t=(r=Yd(t,n)).previousSibling,a>n?(t=r=Yd(r,a-=n).previousSibling,a=r.nodeValue.length,n=0):a=0):(kn(t)&&n>0&&n<t.nodeValue.length&&(t=Yd(t,n),n=0),kn(r)&&a>0&&a<r.nodeValue.length&&(a=(r=Yd(r,a).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:a}};function Kd(e){return{walk:function(t,n){return ld(e,t,n)},split:Gd,normalize:function(t){return Wd(e,t).fold(g,function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}!function(e){e.compareRanges=Vd,e.getCaretRangeFromPoint=Rd,e.getSelectedNode=Ws,e.getNode=Ys}(Kd||(Kd={}));var Qd=Kd;var Xd,Jd=function(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var a=Un(n,e);return parseFloat(a)||0}return r},r=function(e,t){return G(t,function(t,n){var r=Un(e,n),a=void 0===r?0:parseInt(r,10);return isNaN(a)?t:t+a},0)};return{set:function(t,n){if(!z(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;An(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var a=r(e,n);return t>a?t-a:0}}}("height",function(e){var t=e.dom;return tn(e)?t.getBoundingClientRect().height:t.offsetHeight}),Zd=function(e,t){return e.view(t).fold(d([]),function(t){var n=e.owner(t),r=Zd(e,n);return[t].concat(r)})},ef=Object.freeze({__proto__:null,view:function(e){var t;return(e.dom===document?k.none():k.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(pt.fromDom)},owner:function(e){return It(e)}}),tf=function(e){var t=pt.fromDom(document),n=sn(t),r=function(e,t){var n=t.owner(e);return Zd(t,n)}(e,ef),a=on(e),o=Y(r,function(e,t){var n=on(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return rn(o.left+a.left+n.left,o.top+a.top+n.top)},nf=function(e){return"textarea"===xt(e)},rf=function(e,t){var n=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,a=t.documentElement;if(n===e.dom)return rn(n.offsetLeft,n.offsetTop);var o=an(null===r||void 0===r?void 0:r.pageYOffset,a.scrollTop),i=an(null===r||void 0===r?void 0:r.pageXOffset,a.scrollLeft),s=an(a.clientTop,n.clientTop),c=an(a.clientLeft,n.clientLeft);return on(e).translate(i-c,o-s)}(e),r=function(e){return Jd.get(e)}(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},af=function(e,t){var n=function(e,t){var n=Rt(e);if(0===n.length||nf(e))return{element:e,offset:t};if(t<n.length&&!nf(n[t]))return{element:n[t],offset:0};var r=n[n.length-1];return nf(r)?{element:e,offset:t}:"img"===xt(r)?{element:r,offset:1}:Ct(r)?{element:r,offset:kd(r).length}:{element:r,offset:Rt(r).length}}(e,t),r=pt.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return Yt(n.element,r),rf(r,function(){return Zt(r)})},of=function(e,t,n,r){uf(e,function(a,o){return cf(e,t,n,r)},n)},sf=function(e,t,n,r,a){var o={elm:r.element.dom,alignToTop:a};(function(e,t){return e.fire("ScrollIntoView",t).isDefaultPrevented()})(e,o)||(n(t,sn(t).top,r,a),function(e,t){e.fire("AfterScrollIntoView",t)}(e,o))},cf=function(e,t,n,r){var a=pt.fromDom(e.getBody()),o=pt.fromDom(e.getDoc());a.dom.offsetWidth;var i=af(pt.fromDom(n.startContainer),n.startOffset);sf(e,o,t,i,r),i.cleanup()},lf=function(e,t,n,r){var a=pt.fromDom(e.getDoc());sf(e,a,n,function(e){return rf(pt.fromDom(e),l)}(t),r)},uf=function(e,t,n){var r=n.startContainer,a=n.startOffset,o=n.endContainer,i=n.endOffset;t(pt.fromDom(r),pt.fromDom(o));var s=e.dom.createRng();s.setStart(r,a),s.setEnd(o,i),e.selection.setRng(n)},df=function(e,t,n,r){var a=e.pos;if(n)cn(a.left,a.top,r);else{var o=a.top-t+e.height;cn(a.left,o,r)}},ff=function(e,t,n,r,a){var o=n+t,i=r.pos.top,s=r.bottom,c=s-i>=n;if(i<t)df(r,n,!1!==a,e);else if(i>o){df(r,n,c?!1!==a:!0===a,e)}else s>o&&!c&&df(r,n,!0===a,e)},mf=function(e,t,n,r){var a=e.dom.defaultView.innerHeight;ff(e,t,a,n,r)},pf=function(e,t,n,r){var a=e.dom.defaultView.innerHeight;ff(e,t,a,n,r);var o=tf(n.element),i=dn(window);o.top<i.y?ln(n.element,!1!==r):o.top>i.bottom&&ln(n.element,!0===r)},hf=function(e,t,n){return of(e,mf,t,n)},vf=function(e,t,n){return lf(e,t,mf,n)},gf=function(e,t,n){return of(e,pf,t,n)},bf=function(e,t,n){return lf(e,t,pf,n)},yf=function(e,t,n){(e.inline?hf:gf)(e,t,n)},wf=function(e){return e.dom.focus()},xf=function(e){var t=Ht(e).dom;return e.dom===t.activeElement},kf=function(e){return void 0===e&&(e=pt.fromDom(document)),k.from(e.dom.activeElement).map(pt.fromDom)},_f=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},Sf=sr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Cf=(Sf.before,Sf.on,Sf.after,function(e){return e.fold(f,f,f)}),Nf=sr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tf={domRange:Nf.domRange,relative:Nf.relative,exact:Nf.exact,exactFromRange:function(e){return Nf.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return pt.fromDom(e.startContainer)},relative:function(e,t){return Cf(e)},exact:function(e,t,n,r){return e}})}(e);return Mt(t)},range:_f},Df=Je().browser,If=function(e,t){var n=Ct(t)?kd(t).length:Rt(t).length+1;return e>n?n:e<0?0:e},Mf=function(e){return Tf.range(e.start,If(e.soffset,e.start),e.finish,If(e.foffset,e.finish))},Of=function(e,t){return!mn(t.dom)&&(wt(e,t)||bt(e,t))},Af=function(e){return function(t){return Of(e,t.start)&&Of(e,t.finish)}},Lf=function(e){return!0===e.inline||Df.isIE()},Ef=function(e){return Tf.range(pt.fromDom(e.startContainer),e.startOffset,pt.fromDom(e.endContainer),e.endOffset)},zf=function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?k.from(t.getRangeAt(0)):k.none()).map(Ef)}(Mt(e).dom).filter(Af(e))},Rf=function(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),k.some(t)}catch(e){return k.none()}},Vf=function(e){var t=Lf(e)?zf(pt.fromDom(e.getBody())):k.none();e.bookmark=t.isSome()?t:e.bookmark},Bf=function(e){return(e.bookmark?e.bookmark:k.none()).bind(function(t){return n=pt.fromDom(e.getBody()),r=t,k.from(r).filter(Af(n)).map(Mf);var n,r}).bind(Rf)},$f={isEditorUIElement:function(e){var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Uf=function(e,t){Je().browser.isIE()?function(e){e.on("focusout",function(){Vf(e)})}(e):function(e,t){e.on("mouseup touchend",function(e){t.throttle()})}(e,t),e.on("keyup NodeChange",function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||Vf(e)})},Pf=function(e){var t=fs(function(){Vf(e)},0);e.on("init",function(){e.inline&&function(e,t){var n=function(){t.throttle()};es.DOM.bind(document,"mouseup",n),e.on("remove",function(){es.DOM.unbind(document,"mouseup",n)})}(e,t),Uf(e,t)}),e.on("remove",function(){t.cancel()})},Ff=es.DOM,Hf=function(e,t){var n=function(e){return e.getParam("custom_ui_selector","","string")}(e);return null!==Ff.getParent(t,function(t){return function(e){return $f.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},jf=function(e,t){var n=t.editor;Pf(n),n.on("focusin",function(){var t=e.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),e.setActive(this),e.focusedEditor=this,this.fire("focus",{blurredEditor:t}),this.focus(!0))}),n.on("focusout",function(){var t=this;xr.setEditorTimeout(t,function(){var n=e.focusedEditor;Hf(t,function(e){try{var t=Ht(pt.fromDom(e.getElement()));return kf(t).fold(function(){return document.body},function(e){return e.dom})}catch(e){return document.body}}(t))||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Xd||(Xd=function(t){var n=e.activeEditor;n&&function(e){if(Ft()&&L(e.target)){var t=pt.fromDom(e.target);if(St(t)&&Wt(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return ne(n)}}return k.from(e.target)}(t).each(function(t){t.ownerDocument===document&&(t===document.body||Hf(n,t)||e.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))})},Ff.bind(document,"focusin",Xd))},qf=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Ff.unbind(document,"focusin",Xd),Xd=null)},Wf=function(e,t){return function(e){return e.collapsed?k.from(Ys(e.startContainer,e.startOffset)).map(pt.fromDom):k.none()}(t).bind(function(t){return zr(t)?k.some(t):!1===wt(e,t)?k.some(e):k.none()})},Yf=function(e,t){Wf(pt.fromDom(e.getBody()),t).bind(function(e){return pu(e.dom)}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},Gf=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Kf=function(e){return xf(e)||(t=e,kf(Ht(t)).filter(function(e){return t.dom.contains(e.dom)})).isSome();var t},Qf=function(e){return e.inline?function(e){var t=e.getBody();return t&&Kf(pt.fromDom(t))}(e):function(e){return e.iframeElement&&xf(pt.fromDom(e.iframeElement))}(e)},Xf=function(e){return Qf(e)||function(e){return kf().filter(function(t){return n=t.dom,!(void 0!==(r=n.classList)&&(r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body")))&&Hf(e,t.dom);var n,r}).isSome()}(e)},Jf=function(e){return e.editorManager.setActive(e)},Zf=function(e,t){e.removed||(t?Jf(e):function(e){var t=e.selection,n=e.getBody(),r=t.getRng();e.quirks.refreshContentEditable(),void 0!==e.bookmark&&!1===Qf(e)&&Bf(e).each(function(t){e.selection.setRng(t),r=t});var a=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})}(e,t.getNode());if(e.$.contains(n,a))return Gf(a),Yf(e,r),void Jf(e);e.inline||(st.opera||Gf(n),e.getWin().focus()),(st.gecko||e.inline)&&(Gf(n),Yf(e,r)),Jf(e)}(e))},em=function(e,t,n,r,a){var o=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return k.from(o).map(pt.fromDom).map(function(e){return r&&t.collapsed?e:Vt(e,a(e,i)).getOr(e)}).bind(function(e){return St(e)?k.some(e):Ot(e).filter(St)}).map(function(e){return e.dom}).getOr(e)},tm=function(e,t,n){return em(e,t,!0,n,function(e,t){return Math.min(e.dom.childNodes.length,t)})},nm=function(e,t,n){return em(e,t,!1,n,function(e,t){return t>0?t-1:t})},rm=function(e,t){for(var n=e;e&&kn(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},am=function(e,t){return F(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},om=function(e){return E(e)?e:g},im=function(e,t,n){var r=t(e),a=om(n);return r.orThunk(function(){return a(e)?k.none():function(e,t,n){for(var r=e.dom,a=om(n);r.parentNode;){r=r.parentNode;var o=pt.fromDom(r),i=t(o);if(i.isSome())return i;if(a(o))break}return k.none()}(e,t,a)})},sm=Bu,cm=function(e,t,n){var r=e.formatter.get(n);if(r)for(var a=0;a<r.length;a++)if(!1===r[a].inherit&&e.dom.is(t,r[a].selector))return!0;return!1},lm=function(e,t,n,r){var a=e.dom.getRoot();return t!==a&&(t=e.dom.getParent(t,function(t){return!!cm(e,t,n)||(t.parentNode===a||!!fm(e,t,n,r,!0))}),fm(e,t,n,r))},um=function(e,t,n){return!!sm(t,n.inline)||(!!sm(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},dm=function(e,t,n,r,a,o){var i,s,c,l=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(l)if(void 0===l.length){for(i in l)if(l.hasOwnProperty(i)){if(s="attributes"===r?e.getAttrib(t,i):Uu(e,t,i),a&&!s&&!n.exact)return;if((!a||n.exact)&&!sm(s,$u(e,Vu(l[i],o),i)))return}}else for(c=0;c<l.length;c++)if("attributes"===r?e.getAttrib(t,l[c]):Uu(e,t,l[c]))return n;return n},fm=function(e,t,n,r,a){var o,i,s,c,l=e.formatter.get(n),u=e.dom;if(l&&t)for(i=0;i<l.length;i++)if(o=l[i],um(e.dom,t,o)&&dm(u,t,o,"attributes",a,r)&&dm(u,t,o,"styles",a,r)){if(c=o.classes)for(s=0;s<c.length;s++)if(!e.dom.hasClass(t,c[s]))return;return o}},mm=function(e,t,n,r){if(r)return lm(e,r,t,n);if(r=e.selection.getNode(),lm(e,r,t,n))return!0;var a=e.selection.getStart();return!(a===r||!lm(e,a,t,n))},pm=function(e,t){var n=function(t){return bt(t,pt.fromDom(e.getBody()))};return k.from(e.selection.getStart(!0)).bind(function(r){return im(pt.fromDom(r),function(n){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return k.none()}(t,function(t){return function(t,n){return fm(e,t.dom,n)?k.some(n):k.none()}(n,t)})},n)}).getOrNull()},hm=function(e,t,n){return G(n,function(n,r){var a=function(e,t){return P(e.formatter.get(t),function(e){var t=function(e){return e.length>1&&"%"===e.charAt(0)};return P(["styles","attributes"],function(n){return he(e,n).exists(function(e){var n=D(e)?e:pe(e);return P(n,t)})})})}(e,r);return e.formatter.matchNode(t,r,{},a)?n.concat([r]):n},[])},vm={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},gm=function(e,t,n){var r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){var o=e[a];if(o)return o;for(var i=e.parent;i&&i!==t;i=i.parent)if(o=i[a])return o}},bm=function(e){if(!da(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},ym=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},wm=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r=new e(t,vm[t]||1);return n&&se(n,function(e,t){r.attr(t,e)}),r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e)return void 0!==e&&null!==e&&se(e,function(e,t){r.attr(t,e)}),r;if(n=r.attributes){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var a=n.length;a--;)if(n[a].name===e)return n.splice(a,1),r}return r}if(e in n.map){for(a=n.length;a--;)if(n[a].name===e){n[a].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},e.prototype.clone=function(){var t,n=new e(this.name,this.type);if(t=this.attributes){var r=[];r.map={};for(var a=0,o=t.length;a<o;a++){var i=t[a];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=this.value,n.shortEnded=this.shortEnded,n},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){for(var e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){e.parent&&e.remove();var t=this.lastChild;return t?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=gm(n,this))n.name===e&&t.push(n);return t},e.prototype.empty=function(){if(this.firstChild){for(var e=[],t=this.firstChild;t;t=gm(t,this))e.push(t);for(var n=e.length;n--;){(t=e[n]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this.firstChild;if(ym(this))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(ym(r))return!1}if(8===r.type)return!1;if(3===r.type&&!bm(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&da(r.value))return!1;if(n&&n(r))return!1}while(r=gm(r,this));return!0},e.prototype.walk=function(e){return gm(this,null,e)},e}(),xm=ft.makeMap,km=function(e){var t=[],n=(e=e||{}).indent,r=xm(e.indent_before||""),a=xm(e.indent_after||""),o=za.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="html"===e.element_format;return{start:function(e,s,c){var l,u,d,f;if(n&&r[e]&&t.length>0&&(f=t[t.length-1]).length>0&&"\n"!==f&&t.push("\n"),t.push("<",e),s)for(l=0,u=s.length;l<u;l++)d=s[l],t.push(" ",d.name,'="',o(d.value,!0),'"');t[t.length]=!c||i?">":" />",c&&n&&a[e]&&t.length>0&&(f=t[t.length-1]).length>0&&"\n"!==f&&t.push("\n")},end:function(e){var r;t.push("</",e,">"),n&&a[e]&&t.length>0&&(r=t[t.length-1]).length>0&&"\n"!==r&&t.push("\n")},text:function(e,n){e.length>0&&(t[t.length]=n?e:o(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("\x3c!--",e,"--\x3e")},pi:function(e,r){r?t.push("<?",e," ",o(r),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},_m=function(e,t){void 0===t&&(t=Wa());var n=km(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:function(r){var a=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{i(e)}while(e=e.next)}};n.reset();var i=function(e){var r,s,c,l,u,d,f,m,p,h=o[e.type];if(h)h(e);else{if(r=e.name,s=e.shortEnded,c=e.attributes,a&&c&&c.length>1&&((d=[]).map={},p=t.getElementRule(e.name))){for(f=0,m=p.attributesOrder.length;f<m;f++)(l=p.attributesOrder[f])in c.map&&(u=c.map[l],d.map[l]=u,d.push({name:l,value:u}));for(f=0,m=c.length;f<m;f++)(l=c[f].name)in d.map||(u=c.map[l],d.map[l]=u,d.push({name:l,value:u}));c=d}if(n.start(e.name,c,s),!s){if(e=e.firstChild)do{i(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?o[11](r):i(r),n.getContent()}}},Sm=function(e){for(var t,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,r=[],a={},o=Os("img"),i=0,s=0;t=n.exec(e);){var c=t[0],l=o+"_"+s++;a[l]=c,i<t.index&&r.push(e.substr(i,t.index-i)),r.push(l),i=t.index+c.length}return 0===i?{prefix:o,uris:a,html:e}:(i<e.length&&r.push(e.substr(i)),{prefix:o,uris:a,html:r.join("")})},Cm=function(e,t){return e.replace(new RegExp(t.prefix+"_[0-9]+","g"),function(e){return he(t.uris,e).getOr(e)})},Nm=["img","video"],Tm=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},Dm=function(e,t,n){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?function(e,t){return!(A(e)?U(Nm,t):e)}(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},Im=function(e,t,n){var r,a,o=1,i=e.getShortEndedElements(),s=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(s.lastIndex=r=n;a=s.exec(t);){if(r=s.lastIndex,"/"===a[1])o--;else if(!a[1]){if(a[2]in i)continue;o++}if(0===o)break}return r},Mm=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&function(e,t){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t))}(r,n)){var a=r.indexOf("[endif]",n);return r.indexOf(">",a)}if(t){var o=r.indexOf(">",n);return-1!==o?o:r.length}var i=/--!?>/;i.lastIndex=n;var s=i.exec(e);return s?s.index+s[0].length:r.length},Om=function(e,t){var n=e.exec(t);if(n){var r=n[1],a=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?a:null}return null};function Am(e,t){void 0===t&&(t=Wa());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,a=e.cdata?e.cdata:n,o=e.text?e.text:n,i=e.start?e.start:n,s=e.end?e.end:n,c=e.pi?e.pi:n,l=e.doctype?e.doctype:n,u=function(n,u){void 0===u&&(u="html");for(var d,f,m,p,h,v,g,b,y,w,x,k,_,S,C,N,T,D,I,M=n.html,O=0,A=[],L=0,E=za.decode,z=ft.makeMap("src,href,data,background,formaction,poster,xlink:href"),R=/((java|vb)script|mhtml):/i,V="html"===u?0:1,B=function(e){var t,n;for(t=A.length;t--&&A[t].name!==e;);if(t>=0){for(n=A.length-1;n>=t;n--)(e=A[n]).valid&&s(e.name);A.length=t}},$=function(e,t){return o(Cm(e,n),t)},U=function(t){""!==t&&(">"===t.charAt(0)&&(t=" "+t),e.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),r(Cm(t,n)))},P=function(e,t){var n=e||"",r=!ze(n,"--"),a=Mm(M,r,t);return e=M.substr(t,a-t),U(r?n+e:e),a+1},F=function(t,r,a,o,i){var s,c;if(a=function(e){return he(n.uris,e).getOr(e)}((r=r.toLowerCase())in Y?r:E(a||o||i||"")),G&&!b&&!1===Tm(r)){if(!(s=S[r])&&C){for(c=C.length;c--&&!(s=C[c]).pattern.test(r););-1===c&&(s=null)}if(!s)return;if(s.validValues&&!(a in s.validValues))return}if(z[r]&&!e.allow_script_urls){var l=a.replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(R.test(l))return;if(Dm(e,l,t))return}b&&(r in z||0===r.indexOf("on"))||(p.map[r]=a,p.push({name:r,value:a}))},H=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),j=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,q=t.getShortEndedElements(),W=e.self_closing_elements||t.getSelfClosingElements(),Y=t.getBoolAttrs(),G=e.validate,K=e.remove_internals,Q=e.fix_self_closing,X=t.getSpecialElements(),J=M+">";d=H.exec(J);){var Z=d[0];if(O<d.index&&$(E(M.substr(O,d.index-O))),f=d[7])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),B(f);else if(f=d[8]){if(d.index+Z.length>M.length){$(E(M.substr(d.index))),O=d.index+Z.length;continue}":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),y=f in q,Q&&W[f]&&A.length>0&&A[A.length-1].name===f&&B(f);var ee=Om(j,d[9]);if(null!==ee){if("all"===ee){O=Im(t,M,H.lastIndex),H.lastIndex=O;continue}x=!1}if(!G||(w=t.getElementRule(f))){if(x=!0,G&&(S=w.attributes,C=w.attributePatterns),(_=d[9])?((b=-1!==_.indexOf("data-mce-type"))&&K&&(x=!1),(p=[]).map={},_.replace(j,function(e,t,n,r,a){return F(f,t,n,r,a),""})):(p=[]).map={},G&&!b){if(N=w.attributesRequired,T=w.attributesDefault,D=w.attributesForced,w.removeEmptyAttrs&&!p.length&&(x=!1),D)for(h=D.length;h--;)g=(k=D[h]).name,"{$uid}"===(I=k.value)&&(I="mce_"+L++),p.map[g]=I,p.push({name:g,value:I});if(T)for(h=T.length;h--;)(g=(k=T[h]).name)in p.map||("{$uid}"===(I=k.value)&&(I="mce_"+L++),p.map[g]=I,p.push({name:g,value:I}));if(N){for(h=N.length;h--&&!(N[h]in p.map););-1===h&&(x=!1)}if(k=p.map["data-mce-bogus"]){if("all"===k){O=Im(t,M,H.lastIndex),H.lastIndex=O;continue}x=!1}}x&&i(f,p,y)}else x=!1;if(m=X[f]){m.lastIndex=O=d.index+Z.length,(d=m.exec(M))?(x&&(v=M.substr(O,d.index-O)),O=d.index+d[0].length):(v=M.substr(O),O=M.length),x&&(v.length>0&&$(v,!0),s(f)),H.lastIndex=O;continue}y||(_&&_.indexOf("/")===_.length-1?x&&s(f):A.push({name:f,valid:x}))}else if(f=d[1])U(f);else if(f=d[2]){if(!(1===V||e.preserve_cdata||A.length>0&&t.isValidChild(A[A.length-1].name,"#cdata"))){O=P("",d.index+2),H.lastIndex=O;continue}a(f)}else if(f=d[3])l(f);else{if((f=d[4])||"<!"===Z){O=P(f,d.index+Z.length),H.lastIndex=O;continue}if(f=d[5]){if(1!==V){O=P("?",d.index+2),H.lastIndex=O;continue}c(f,d[6])}}O=d.index+Z.length}for(O<M.length&&$(E(M.substr(O))),h=A.length-1;h>=0;h--)(f=A[h]).valid&&s(f.name)};return{parse:function(e,t){void 0===t&&(t="html"),u(Sm(e),t)}}}!function(e){e.findEndTag=Im}(Am||(Am={}));var Lm=Am,Em=function(e,t){var n,r,a,o,i=t,s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,c=e.schema;i=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")}(e.getTempAttrs(),i);for(var l=c.getShortEndedElements();o=s.exec(i);)r=s.lastIndex,a=o[0].length,n=l[o[1]]?r:Lm.findEndTag(c,i,r),i=i.substring(0,r-a)+i.substring(n),s.lastIndex=r-a;return Ur(i)},zm=Em,Rm=function(e,t,n,r){var a;return t.format=n,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),a="raw"===t.format?ft.trim(zm(e.serializer,r.innerHTML)):"text"===t.format?e.dom.isEmpty(r)?"":Ur(r.innerText||r.textContent):"tree"===t.format?e.serializer.serialize(r,t):function(e,t){var n=Fc(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")}(e,e.serializer.serialize(r,t)),U(["text","tree"],t.format)||Vr(pt.fromDom(r))?t.content=a:t.content=ft.trim(a),t.no_events||e.fire("GetContent",t),t.content},Vm=ft.each,Bm=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Vm(e.getAttribs(t),function(r){var a=r.nodeName.toLowerCase();0!==a.indexOf("_")&&"style"!==a&&0!==a.indexOf("data-")&&(n[a]=e.getAttrib(t,a))}),n},a=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!a(r(t),r(n))&&(!!a(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!Tu(t)&&!Tu(n)))}},$m=function(e,t,n){return k.from(n.container()).filter(kn).exists(function(r){var a=e?0:-1;return t(r.data.charAt(n.offset()+a))})},Um=m($m,!0,Iu),Pm=m($m,!1,Iu),Fm=function(e){var t=e.container();return kn(t)&&(0===t.data.length||$r(t.data)&&Id.isBookmarkNode(t.parentNode))},Hm=function(e,t){return function(n){return k.from(El(e?0:-1,n)).filter(t).isSome()}},jm=function(e){return Tn(e)&&"block"===Un(pt.fromDom(e),"display")},qm=function(e){return In(e)&&!function(e){return pn(e)&&"all"===e.getAttribute("data-mce-bogus")}(e)},Wm=Hm(!0,jm),Ym=Hm(!1,jm),Gm=Hm(!0,On),Km=Hm(!1,On),Qm=Hm(!0,yn),Xm=Hm(!1,yn),Jm=Hm(!0,qm),Zm=Hm(!1,qm),ep=function(e){var t=ks(e,"br"),n=W(function(e){for(var t=[],n=e.dom;n;)t.push(pt.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Or);t.length===n.length&&H(n,Zt)},tp=function(e){Jt(e),Qt(e,pt.fromHtml('<br data-mce-bogus="1">'))},np=function(e){$t(e).each(function(t){At(t).each(function(n){Ir(e)&&Or(t)&&Ir(n)&&Zt(t)})})},rp=function(e,t,n){return wt(t,e)?function(e,t){for(var n=E(t)?t:g,r=e.dom,a=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,i=pt.fromDom(o);if(a.push(i),!0===n(i))break;r=o}return a}(e,function(e){return n(e)||bt(e,t)}).slice(0,-1):[]},ap=function(e,t){return rp(e,t,g)},op=function(e,t){return[e].concat(ap(e,t))},ip=function(e,t,n){return uu(e,t,n,Fm)},sp=function(e,t){return K(op(pt.fromDom(t.container()),e),Ir)},cp=function(e,t,n){return ip(e,t.dom,n).forall(function(e){return sp(t,n).fold(function(){return!1===Ll(e,n,t.dom)},function(r){return!1===Ll(e,n,t.dom)&&wt(r,pt.fromDom(e.container()))})})},lp=function(e,t,n){return sp(t,n).fold(function(){return ip(e,t.dom,n).forall(function(e){return!1===Ll(e,n,t.dom)})},function(t){return ip(e,t.dom,n).isNone()})},up=m(lp,!1),dp=m(lp,!0),fp=m(cp,!1),mp=m(cp,!0),pp=function(e){return Hl(e).exists(Or)},hp=function(e,t,n){var r=W(op(pt.fromDom(n.container()),t),Ir),a=ne(r).getOr(t);return cu(e,a.dom,n).filter(pp)},vp=function(e,t){return Hl(t).exists(Or)||hp(!0,e,t).isSome()},gp=function(e,t){return function(e){return k.from(e.getNode(!0)).map(pt.fromDom)}(t).exists(Or)||hp(!1,e,t).isSome()},bp=m(hp,!1),yp=m(hp,!0),wp=function(e){return pc.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},xp=function(e,t){var n=W(op(pt.fromDom(t.container()),e),Ir);return ne(n).getOr(e)},kp=function(e,t){return wp(t)?Pm(t):Pm(t)||mu(xp(e,t).dom,t).exists(Pm)},_p=function(e,t){return wp(t)?Um(t):Um(t)||fu(xp(e,t).dom,t).exists(Um)},Sp=function(e){return Hl(e).bind(function(e){return fr(e,St)}).exists(function(e){return t=Un(e,"white-space"),U(["pre","pre-wrap"],t);var t})},Cp=function(e,t){return function(e,t){return mu(e.dom,t).isNone()}(e,t)||function(e,t){return fu(e.dom,t).isNone()}(e,t)||up(e,t)||dp(e,t)||gp(e,t)||vp(e,t)},Np=function(e,t){return!Sp(t)&&(up(e,t)||fp(e,t)||gp(e,t)||kp(e,t))},Tp=function(e,t){return!Sp(t)&&(dp(e,t)||mp(e,t)||vp(e,t)||_p(e,t))},Dp=function(e,t){return Np(e,t)||Tp(e,function(e){var t=e.container(),n=e.offset();return kn(t)&&n<t.data.length?pc(t,n+1):e}(t))},Ip=function(e,t){return Du(e.charAt(t))},Mp=function(e){var t=e.container();return kn(t)&&Ee(t.data," ")},Op=function(e){var t=e.data,n=function(e){var t=e.split("");return F(t,function(e,n){return Du(e)&&n>0&&n<t.length-1&&Mu(t[n-1])&&Mu(t[n+1])?" ":e}).join("")}(t);return n!==t&&(e.data=n,!0)},Ap=function(e,t){return k.some(t).filter(Mp).bind(function(t){var n=t.container();return function(e,t){var n=t.data,r=pc(t,0);return!(!Ip(n,0)||Dp(e,r)||(t.data=" "+n.slice(1),0))}(e,n)||Op(n)||function(e,t){var n=t.data,r=pc(t,n.length-1);return!(!Ip(n,n.length-1)||Dp(e,r)||(t.data=n.slice(0,-1)+" ",0))}(e,n)?k.some(t):k.none()})},Lp=function(e){var t=pt.fromDom(e.getBody());e.selection.isCollapsed()&&Ap(t,pc.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},Ep=function(e,t,n){if(0!==n){var r=pt.fromDom(e),a=dr(r,Ir).getOr(r),o=e.data.slice(t,t+n),i=t+n>=e.data.length&&Tp(a,vc(e,e.data.length)),s=0===t&&Np(a,vc(e,0));e.replaceData(t,n,function(e,t,n){return G(e,function(r,a){return Iu(a)||Du(a)?r.previousCharIsSpace||""===r.str&&t||r.str.length===e.length-1&&n?{previousCharIsSpace:!1,str:r.str+" "}:{previousCharIsSpace:!0,str:r.str+" "}:{previousCharIsSpace:!1,str:r.str+a}},{previousCharIsSpace:!1,str:""}).str}(o,s,i))}},zp=function(e,t){var n=e.data.slice(t),r=n.length-Be(n).length;return Ep(e,t,r)},Rp=function(e,t){var n=e.data.slice(0,t),r=n.length-$e(n).length;return Ep(e,t-r,r)},Vp=function(e,t,n,r){void 0===r&&(r=!0);var a=$e(e.data).length,o=r?e:t,i=r?t:e;return r?o.appendData(i.data):o.insertData(0,i.data),Zt(pt.fromDom(i)),n&&zp(o,a),o},Bp=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===vc.isTextPosition(e)&&n===t.parentNode&&r>vc.before(t).offset()}(t,e)?vc(t.container(),t.offset()-1):t},$p=function(e){return sa(e.previousSibling)?k.some((t=e.previousSibling,kn(t)?vc(t,t.data.length):vc.after(t))):e.previousSibling?hu(e.previousSibling):k.none();var t},Up=function(e){return sa(e.nextSibling)?k.some((t=e.nextSibling,kn(t)?vc(t,0):vc.before(t))):e.nextSibling?pu(e.nextSibling):k.none();var t},Pp=function(e,t){return $p(t).orThunk(function(){return Up(t)}).orThunk(function(){return function(e,t){var n=vc.before(t.previousSibling?t.previousSibling:t.parentNode);return mu(e,n).fold(function(){return fu(e,vc.after(t))},k.some)}(e,t)})},Fp=function(e,t){return Up(t).orThunk(function(){return $p(t)}).orThunk(function(){return function(e,t){return fu(e,vc.after(t)).fold(function(){return mu(e,vc.before(t))},k.some)}(e,t)})},Hp=function(e,t,n){return function(e,t,n){return e?Fp(t,n):Pp(t,n)}(e,t,n).map(m(Bp,n))},jp=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},qp=function(e,t){return t&&ve(e.schema.getBlockElements(),xt(t))},Wp=function(e){if(ga(e)){var t=pt.fromHtml('<br data-mce-bogus="1">');return Jt(e),Qt(e,t),k.some(vc.before(t.dom))}return k.none()},Yp=function(e,t,n){var r,a,o,i,s=At(e).filter(Ct),c=Lt(e).filter(Ct);return Zt(e),(r=s,a=c,o=t,i=function(e,t,r){var a=e.dom,o=t.dom,i=a.data.length;return Vp(a,o,n),r.container()===o?vc(a,i):r},r.isSome()&&a.isSome()&&o.isSome()?k.some(i(r.getOrDie(),a.getOrDie(),o.getOrDie())):k.none()).orThunk(function(){return n&&(s.each(function(e){return Rp(e.dom,e.dom.length)}),c.each(function(e){return zp(e.dom,0)})),t})},Gp=function(e,t,n,r){void 0===r&&(r=!0);var a,o=Hp(t,e.getBody(),n.dom),i=dr(n,m(qp,e),(a=e.getBody(),function(e){return e.dom===a})),s=Yp(n,o,function(e,t){return ve(e.schema.getTextInlineElements(),xt(t))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(Wp).fold(function(){r&&jp(e,t,s)},function(n){r&&jp(e,t,k.some(n))})},Kp=function(e,t){return{start:e,end:t}},Qp=sr([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),Xp=function(e,t){return vr(pt.fromDom(e),"td,th",t)},Jp=function(e,t){return pr(e,"table",t)},Zp=function(e){return!bt(e.start,e.end)},eh=function(e,t){return Jp(e.start,t).bind(function(n){return Jp(e.end,t).bind(function(e){return t=bt(n,e),r=n,t?k.some(r):k.none();var t,r})})},th=function(e){return ks(e,"td,th")},nh=function(e,t){var n=Xp(t.startContainer,e),r=Xp(t.endContainer,e);return t.collapsed?k.none():Bs(n,r,Kp).fold(function(){return n.fold(function(){return r.bind(function(t){return Jp(t,e).bind(function(e){return ne(th(e)).map(function(e){return Kp(e,t)})})})},function(t){return Jp(t,e).bind(function(e){return re(th(e)).map(function(e){return Kp(t,e)})})})},function(t){return rh(e,t)?k.none():function(e,t){return Jp(e.start,t).bind(function(t){return re(th(t)).map(function(t){return Kp(e.start,t)})})}(t,e)})},rh=function(e,t){return eh(t,e).isSome()},ah=function(e,t,n){return e.filter(function(e){return Zp(e)&&rh(n,e)}).orThunk(function(){return nh(n,t)}).bind(function(e){return function(e,t){return eh(e,t).map(function(t){return function(e,t,n){return{rng:e,table:t,cells:n}}(e,t,th(t))})}(e,n)})},oh=function(e,t){return Q(e,function(e){return bt(e,t)})},ih=function(e,t,n){return e.filter(function(e){return function(e,t){return!Zp(e)&&eh(e,t).exists(function(e){var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})}(e,n)&&vd(e.start,t)}).map(function(e){return e.start})},sh=function(e){return function(e){return Bs(oh(e.cells,e.rng.start),oh(e.cells,e.rng.end),function(t,n){return e.cells.slice(t,n+1)})}(e).map(function(t){var n=e.cells;return t.length===n.length?Qp.removeTable(e.table):Qp.emptyCells(t)})},ch=function(e,t){var n=function(e){return function(t){return bt(e,t)}}(e),r=function(e,t){var n=Xp(e.startContainer,t),r=Xp(e.endContainer,t);return Bs(n,r,Kp)}(t,n);return ih(r,t,n).map(function(e){return Qp.deleteCellSelection(t,e)}).orThunk(function(){return ah(r,t,n).bind(sh)})},lh=function(e){var t;return(8===kt(t=e)||"#comment"===xt(t)?At(e):$t(e)).bind(lh).orThunk(function(){return k.some(e)})},uh=function(e,t){return H(t,tp),e.selection.setCursorLocation(t[0].dom,0),!0},dh=function(e,t,n){t.deleteContents();var r,a=lh(n).getOr(n),o=pt.fromDom(e.dom.getParent(a.dom,e.dom.isBlock));if(ga(o)&&(tp(o),e.selection.setCursorLocation(o.dom,0)),!bt(n,o)){var i=Ot(o).is(n)?[]:Ot(r=o).map(Rt).map(function(e){return W(e,function(e){return!bt(r,e)})}).getOr([]);H(i.concat(Rt(n)),function(e){bt(e,o)||wt(e,o)||Zt(e)})}return!0},fh=function(e,t){return Gp(e,!1,t),!0},mh=function(e,t,n,r){return hh(t,r).fold(function(){return function(e,t,n){return ch(t,n).map(function(t){return t.fold(m(fh,e),m(uh,e),m(dh,e))})}(e,t,n)},function(t){return function(e,t){return vh(e,t)}(e,t)}).getOr(!1)},ph=function(e,t){return K(op(t,e),Rr)},hh=function(e,t){return K(op(t,e),function(e){return"caption"===xt(e)})},vh=function(e,t){return tp(t),e.selection.setCursorLocation(t.dom,0),k.some(!0)},gh=function(e,t,n,r,a){return lu(n,e.getBody(),a).bind(function(o){return function(e,t,n,r){return pu(e.dom).bind(function(a){return hu(e.dom).map(function(e){return t?n.isEqual(a)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(a)})}).getOr(!0)}(r,n,a,o)?function(e,t){return vh(e,t)}(e,r):function(e,t,n){return hh(e,pt.fromDom(n.getNode())).map(function(e){return!1===bt(e,t)})}(t,r,o)}).or(k.some(!0))},bh=function(e,t,n,r){var a=vc.fromRangeStart(e.selection.getRng());return ph(n,r).bind(function(r){return ga(r)?vh(e,r):function(e,t,n,r,a){return lu(n,e.getBody(),a).bind(function(e){return ph(t,pt.fromDom(e.getNode())).map(function(e){return!1===bt(e,r)})})}(e,n,t,r,a)}).getOr(!1)},yh=function(e,t){return e?Qm(t):Xm(t)},wh=function(e,t,n){var r=pt.fromDom(e.getBody());return hh(r,n).fold(function(){return bh(e,t,r,n)||function(e,t){var n=vc.fromRangeStart(e.selection.getRng());return yh(t,n)||cu(t,e.getBody(),n).exists(function(e){return yh(t,e)})}(e,t)},function(n){return function(e,t,n,r){var a=vc.fromRangeStart(e.selection.getRng());return ga(r)?vh(e,r):gh(e,n,t,r,a)}(e,t,r,n).getOr(!1)})},xh=function(e,t){var n=pt.fromDom(e.selection.getStart(!0)),r=md(e);return e.selection.isCollapsed()&&0===r.length?wh(e,t,n):function(e,t){var n=pt.fromDom(e.getBody()),r=e.selection.getRng(),a=md(e);return 0!==a.length?uh(e,a):mh(e,n,r,t)}(e,n)},kh=function(e){var t=vc.fromRangeStart(e),n=vc.fromRangeEnd(e),r=e.commonAncestorContainer;return cu(!1,r,n).map(function(a){return!Ll(t,n,r)&&Ll(t,a,r)?function(e,t,n,r){var a=document.createRange();return a.setStart(e,t),a.setEnd(n,r),a}(t.container(),t.offset(),a.container(),a.offset()):e}).getOr(e)},_h=function(e){return e.collapsed?e:kh(e)},Sh=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return" "===e.data||Nn(e)}(e.firstChild)},Ch=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||Sh(t))?e.slice(0,-1):e;var t},Nh=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Th=function(e,t){var n=vc.after(e),r=ru(t).prev(n);return r?r.toRange():null},Dh=function(e,t,n){var r=e.parentNode;return ft.each(t,function(t){r.insertBefore(t,e)}),function(e,t){var n=vc.before(e),r=ru(t).next(n);return r?r.toRange():null}(e,n)},Ih=function(e,t,n,r){var a,o=function(e,t,n){var r=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(r))}(t,e,r),i=Nh(t,n.startContainer),s=Ch((a=o.firstChild,ft.grep(a.childNodes,function(e){return"LI"===e.nodeName}))),c=t.getRoot(),l=function(e){var r=vc.fromRangeStart(n),a=ru(t.getRoot()),o=1===e?a.prev(r):a.next(r);return!o||Nh(t,o.getNode())!==i};return l(1)?Dh(i,s,c):l(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),Th(t[0],n)}(i,s,c,t):function(e,t,n,r){var a=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),o=e.parentNode;return o.insertBefore(a[0],e),ft.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(a[1],e),o.removeChild(e),Th(t[t.length-1],n)}(i,s,c,n)},Mh=Mn,Oh=function(e){var t=e.dom,n=_h(e.selection.getRng());e.selection.setRng(n);var r=t.getParent(n.startContainer,Mh);!function(e,t,n){return null!==n&&n===e.getParent(t.endContainer,Mh)&&vd(pt.fromDom(n),t)}(t,n,r)?e.getDoc().execCommand("Delete",!1,null):dh(e,n,pt.fromDom(r))},Ah=function(e,t,n){var r,a,o,i,s,c,l=e.selection,u=e.dom;/^ | $/.test(t)&&(t=function(e,t,n){var r=pt.fromDom(e.getRoot());return n=Np(r,vc.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),n=Tp(r,vc.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(u,l.getRng(),t));var d=e.parser,f=n.merge,m=_m({validate:function(e){return e.getParam("validate")}(e)},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';if(o={content:t,format:"html",selection:!0,paste:n.paste},(o=e.fire("BeforeSetContent",o)).isDefaultPrevented())e.fire("SetContent",{content:o.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=o.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p);var h=(s=l.getRng()).startContainer||(s.parentElement?s.parentElement():null),v=e.getBody();h===v&&l.isCollapsed()&&u.isBlock(v.firstChild)&&function(e,t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(e,v.firstChild)&&u.isEmpty(v.firstChild)&&((s=u.createRng()).setStart(v.firstChild,0),s.setEnd(v.firstChild,0),l.setRng(s)),l.isCollapsed()||Oh(e);var g,b={context:(r=l.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},y=d.parse(t,b);if(!0===n.paste&&function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||" "===e.value}(t.firstChild)}(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)}(e.schema,y)&&function(e,t){return!!Nh(e,t)}(u,r))return s=Ih(m,u,l.getRng(),y),l.setRng(s),void e.fire("SetContent",o);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(y),"mce_marker"===(c=y.lastChild).attr("id"))for(i=c,c=c.prev;c;c=c.walk(!0))if(3===c.type||!u.isBlock(c.name)){e.schema.isValidChild(c.parent.name,"span")&&c.parent.insert(i,c,"br"===c.name);break}if(e._selectionOverrides.showBlockCaretContainer(r),b.invalid){for(e.selection.setContent(p),r=l.getNode(),a=e.getBody(),9===r.nodeType?r=c=a:c=r;c!==a;)r=c,c=c.parentNode;t=r===a?a.innerHTML:u.getOuterHTML(r),t=m.serialize(d.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return m.serialize(y)}))),r===a?u.setHTML(a,t):u.setOuterHTML(r,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,a=n.lastChild;!r||r===a&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(e,t=m.serialize(y),r);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var a=e.getBody(),o=new Bm(r);ft.each(r.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!==a;t=t.parentNode)n[e.nodeName.toLowerCase()]&&o.compare(t,e)&&r.remove(e,!0)})}}(e,f),function(e,t){var n,r,a=e.dom,o=e.selection;if(t){o.scrollIntoView(t);var i=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===a.getContentEditable(t))return t;return null}(t);if(i)return a.remove(t),void o.select(i);var s=a.createRng(),c=t.previousSibling;c&&3===c.nodeType?(s.setStart(c,c.nodeValue.length),st.ie||(r=t.nextSibling)&&3===r.nodeType&&(c.appendData(r.data),r.parentNode.removeChild(r))):(s.setStartBefore(t),s.setEndBefore(t));var l=a.getParent(t,a.isBlock);a.remove(t),l&&a.isEmpty(l)&&(e.$(l).empty(),s.setStart(l,0),s.setEnd(l,0),Mh(l)||function(e){return!!e.getAttribute("data-mce-fragment")}(l)||!(n=function(t){var n=vc.fromRangeStart(t);if(n=ru(e.getBody()).next(n))return n.toRange()}(s))?a.add(l,a.create("br",{"data-mce-bogus":"1"})):(s=n,a.remove(l))),o.setRng(s)}}(e,u.get("mce_marker")),g=e.getBody(),ft.each(g.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),function(e,t){k.from(e.getParent(t,"td,th")).map(pt.fromDom).each(np)}(u,l.getStart()),e.fire("SetContent",o),e.addVisual()}},Lh=function(e,t){t(e),e.firstChild&&Lh(e.firstChild,t),e.next&&Lh(e.next,t)},Eh=function(e,t,n){var r=function(e,t,n){var r={},a={},o=[];for(var i in n.firstChild&&Lh(n.firstChild,function(n){H(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),H(t,function(e){"string"==typeof n.attr(e.name)&&(a[e.name]?a[e.name].nodes.push(n):a[e.name]={filter:e,nodes:[n]})})}),r)r.hasOwnProperty(i)&&o.push(r[i]);for(var s in a)a.hasOwnProperty(s)&&o.push(a[s]);return o}(e,t,n);H(r,function(e){H(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},zh=function(e){return e instanceof wm},Rh=function(e,t){e.dom.setHTML(e.getBody(),t),function(e){Qf(e)&&pu(e.getBody()).each(function(t){var n=t.getNode(),r=yn(n)?pu(n).getOr(t):t;e.selection.setRng(r.toRange())})}(e)},Vh=function(e,t,n){return n.format=n.format?n.format:"html",n.set=!0,n.content=zh(t)?"":t,n.no_events||e.fire("BeforeSetContent",n),zh(t)||(t=n.content),k.from(e.getBody()).fold(d(t),function(r){return zh(t)?function(e,t,n,r){Eh(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var a=_m({validate:e.validate},e.schema).serialize(n);return r.content=Vr(pt.fromDom(t))?a:ft.trim(a),Rh(e,r.content),r.no_events||e.fire("SetContent",r),n}(e,r,t,n):function(e,t,n,r){var a,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),(a=Fc(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(n=o,n=e.dom.createHTML(a,Hc(e),n)):n||(n='<br data-mce-bogus="1">'),Rh(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=_m({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=Vr(pt.fromDom(t))?n:ft.trim(n),Rh(e,r.content),r.no_events||e.fire("SetContent",r)),r.content}(e,r,t,n)})},Bh=function(e,t){return function(e,t){var n=e.dom;return n.parentNode?mr(pt.fromDom(n.parentNode),function(n){return!bt(e,n)&&t(n)}):k.none()}(e,t).isSome()},$h=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&"\ufeff"!==e.nodeValue||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},Uh=function(e){if(e){var t=new Nr(e,e);for(e=t.current();e;e=t.next())if(kn(e))return e}return null},Ph=function(e){var t=pt.fromTag("span");return zn(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Qt(t,pt.fromText("\ufeff")),t},Fh=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,a=e.selection;if($h(t))Gp(e,!1,pt.fromDom(t),n);else{var o=a.getRng(),i=r.getParent(t,r.isBlock),s=o.startContainer,c=o.startOffset,l=o.endContainer,u=o.endOffset,d=function(e){var t=Uh(e);return t&&"\ufeff"===t.nodeValue.charAt(0)&&t.deleteData(0,1),t}(t);r.remove(t,!0),s===d&&c>0&&o.setStart(d,c-1),l===d&&u>0&&o.setEnd(d,u-1),i&&r.isEmpty(i)&&tp(pt.fromDom(i)),a.setRng(o)}},Hh=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,a=e.selection;if(t)Fh(e,t,n);else if(!(t=gu(e.getBody(),a.getStart())))for(;t=r.get("_mce_caret");)Fh(e,t,!1)},jh=function(e,t){return e.appendChild(t),t},qh=function(e,t){var n=Y(e,function(e,t){return jh(e,t.cloneNode(!1))},t);return jh(n,n.ownerDocument.createTextNode("\ufeff"))},Wh=function(e,t,n,r){var a,o,i,s=e.dom,c=e.selection,l=[],u=c.getRng(),d=u.startContainer,f=u.startOffset;for(o=d,3===d.nodeType&&(f!==d.nodeValue.length&&(a=!0),o=o.parentNode);o;){if(fm(e,o,t,n,r)){i=o;break}o.nextSibling&&(a=!0),l.push(o),o=o.parentNode}if(i)if(a){var p=c.getBookmark();u.collapse(!0);var h=sd(e,u,e.formatter.get(t),!0);h=Gd(h),e.formatter.remove(t,n,h,r),c.moveToBookmark(p)}else{var v=gu(e.getBody(),i),g=Ph(!1).dom;!function(e,t,n){var r=e.dom,a=r.getParent(n,m(Eu,e));a&&r.isEmpty(a)?n.parentNode.replaceChild(t,n):(ep(pt.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))}(e,g,null!==v?v:i);var b=function(e,t,n,r,a,o){var i=e.formatter,s=e.dom,c=W(oe(i.get()),function(e){return e!==r&&!Ee(e,"removeformat")}),l=hm(e,n,c);if(W(l,function(t){return!Hu(e,t,r)}).length>0){var u=n.cloneNode(!1);return s.add(t,u),i.remove(r,a,u,o),s.remove(u),k.some(u)}return k.none()}(e,g,i,t,n,r),y=qh(l.concat(b.toArray()),g);Fh(e,v,!1),c.setCursorLocation(y,1),s.isEmpty(i)&&s.remove(i)}},Yh=function(e){e.on("mouseup keydown",function(t){!function(e,t){var n=e.selection,r=e.getBody();Hh(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||"\ufeff"!==n.getStart().innerHTML||Hh(e,gu(r,n.getStart())),37!==t&&39!==t||Hh(e,gu(r,n.getStart()))}(e,t.keyCode)})},Gh=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(xt(t))&&!vu(t.dom)&&!bn(t.dom)},Kh={},Qh=xe,Xh=ye;!function(e,t){Kh[e]||(Kh[e]=[]),Kh[e].push(t)}("pre",function(e){var t,n=e.selection.getRng(),r=hn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),Xh(Qh(Qh(t,r),function(e){return r(e.previousSibling)&&-1!==ke(t,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,qi(n=e).remove(),qi(t).append("<br><br>").append(n.childNodes)}))});var Jh=ft.each,Zh=function(e){return pn(e)&&!Tu(e)&&!vu(e)&&!bn(e)},ev=function(e,t){var n;for(n=e;n;n=n[t]){if(kn(n)&&0!==n.nodeValue.length)return e;if(pn(n)&&!Tu(n))return n}return e},tv=function(e,t,n){var r,a,o=new Bm(e);if(t&&n&&(t=ev(t,"previousSibling"),n=ev(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)a=r,r=r.nextSibling,t.appendChild(a);return e.remove(n),ft.each(ft.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},nv=function(e,t,n,r){if(r&&!1!==t.merge_siblings){var a=tv(e,Lu(r),r);tv(e,a,Lu(a,!0))}},rv=function(e,t,n){Jh(e.childNodes,function(e){Zh(e)&&(t(e)&&n(e),e.hasChildNodes()&&rv(e,t,n))})},av=function(e,t){return function(n){return!(!n||!Uu(e,n,t))}},ov=function(e,t,n){return function(r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)}(e,r)}},iv=sr([{keep:[]},{rename:["name"]},{removed:[]}]),sv=/^(src|href|style)$/,cv=ft.each,lv=Bu,uv=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},dv=function(e,t,n){var r,a;if(r=t[n?"startContainer":"endContainer"],a=t[n?"startOffset":"endOffset"],pn(r)){var o=r.childNodes.length-1;!n&&a&&a--,r=r.childNodes[a>o?o:a]}return kn(r)&&n&&a>=r.nodeValue.length&&(r=new Nr(r,e.getBody()).next()||r),kn(r)&&!n&&0===a&&(r=new Nr(r,e.getBody()).prev()||r),r},fv=function(e,t){var n=t?"firstChild":"lastChild";if(function(e){return/^(TR|TH|TD)$/.test(e.nodeName)}(e)&&e[n]){var r=e[n];return"TR"===e.nodeName&&r[n]||r}return e},mv=function(e,t,n,r){var a=e.create(n,r);return t.parentNode.insertBefore(a,t),a.appendChild(t),a},pv=function(e,t,n,r,a){var o=pt.fromDom(t),i=pt.fromDom(e.create(r,a)),s=n?zt(o):Et(o);return Xt(i,s),n?(Yt(o,i),Kt(i,o)):(Gt(o,i),Qt(i,o)),i.dom},hv=function(e,t,n,r){return!(t=Lu(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},vv=function(e,t,n,r,a){var o,i=e.dom;if(!function(e,t,n){return!!lv(t,n.inline)||!!lv(t,n.block)||(n.selector?pn(t)&&e.is(t,n.selector):void 0)}(i,r,t)&&!function(e,t){return t.links&&"A"===e.nodeName}(r,t))return iv.keep();var s=r;if(t.inline&&"all"===t.remove&&D(t.preserve_attributes)){var c=W(i.getAttribs(s),function(e){return U(t.preserve_attributes,e.name.toLowerCase())});if(i.removeAllAttribs(s),H(c,function(e){return i.setAttrib(s,e.name,e.value)}),c.length>0)return iv.rename("span")}if("all"!==t.remove){cv(t.styles,function(e,r){e=$u(i,Vu(e,n),r+""),z(r)&&(r=e,a=null),(t.remove_similar||!a||lv(Uu(i,a,r),e))&&i.setStyle(s,r,""),o=!0}),o&&""===i.getAttrib(s,"style")&&(s.removeAttribute("style"),s.removeAttribute("data-mce-style")),cv(t.attributes,function(e,r){var o;if(e=Vu(e,n),z(r)&&(r=e,a=null),t.remove_similar||!a||lv(i.getAttrib(a,r),e)){if("class"===r&&(e=i.getAttrib(s,r))&&(o="",H(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void i.setAttrib(s,r,o);"class"===r&&s.removeAttribute("className"),sv.test(r)&&s.removeAttribute("data-mce-"+r),s.removeAttribute(r)}}),cv(t.classes,function(e){e=Vu(e,n),a&&!i.hasClass(a,e)||i.removeClass(s,e)});for(var l=i.getAttribs(s),u=0;u<l.length;u++){var d=l[u].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return iv.keep()}}return"none"!==t.remove?(function(e,t,n){var r,a=t.parentNode,o=e.dom,i=Fc(e);n.block&&(i?a===o.getRoot()&&(n.list_block&&lv(t,n.list_block)||H(ae(t.childNodes),function(t){zu(e,i,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=mv(o,t,i),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(a)&&(hv(o,t,!1)||hv(o,t.firstChild,!0,!0)||t.insertBefore(o.create("br"),t.firstChild),hv(o,t,!0)||hv(o,t.lastChild,!1,!0)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!lv(n.inline,t)||o.remove(t,!0)}(e,s,t),iv.removed()):iv.keep()},gv=function(e,t,n,r,a){return vv(e,t,n,r,a).fold(g,function(t){return e.dom.rename(r,t),!0},b)},bv=function(e,t,n,r){return vv(e,t,n,r,r).fold(d(r),function(t){return e.dom.createFragment().appendChild(r),e.dom.rename(r,t)},d(null))},yv=function(e,t,n,r,a){var o=e.formatter.get(t),i=o[0],s=!0,c=e.dom,l=e.selection,u=function(r){var s=function(e,t,n,r,a){var o;return H(Fu(e.dom,t.parentNode).reverse(),function(t){if(!o&&"_start"!==t.id&&"_end"!==t.id){var i=fm(e,t,n,r,a);i&&!1!==i.split&&(o=t)}}),o}(e,r,t,n,a);return function(e,t,n,r,a,o,i,s){var c,l,u,d=e.dom;if(n){for(var f=n.parentNode,m=r.parentNode;m&&m!==f;m=m.parentNode){c=d.clone(m,!1);for(var p=0;p<t.length&&null!==(c=bv(e,t[p],s,c));p++);c&&(l&&c.appendChild(l),u||(u=c),l=c)}!o||i.mixed&&d.isBlock(n)||(r=d.split(n,r)),l&&(a.parentNode.insertBefore(l,a),u.appendChild(a),i.inline&&nv(d,i,0,l))}return r}(e,o,s,r,r,!0,i,n)},d=function(t){var r,a;pn(t)&&c.getContentEditable(t)&&(r=s,s="true"===c.getContentEditable(t),a=!0);var l=ae(t.childNodes);if(s&&!a)for(var u=0;u<o.length&&!gv(e,o[u],n,t,t);u++);if(i.deep&&l.length){for(u=0;u<l.length;u++)d(l[u]);a&&(s=r)}},f=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return function(e){return Tu(e)&&pn(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),kn(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n},m=function(t){var n,r,a=sd(e,t,o,t.collapsed);if(i.split){if(a=Gd(a),(n=dv(e,a,!0))!==(r=dv(e,a))){if(n=fv(n,!0),r=fv(r,!1),uv(c,n,r)){var s=k.from(n.firstChild).getOr(n);return u(pv(c,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0)}if(uv(c,r,n)){s=k.from(r.lastChild).getOr(r);return u(pv(c,s,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1)}n=mv(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=mv(c,r,"span",{id:"_end","data-mce-type":"bookmark"});var l=c.createRng();l.setStartAfter(n),l.setEndBefore(r),ld(c,l,function(e){H(e,function(e){Tu(e)||Tu(e.parentNode)||u(e)})}),u(n),u(r),n=f(!0),r=f()}else n=r=u(n);a.startContainer=n.parentNode?n.parentNode:n,a.startOffset=c.nodeIndex(n),a.endContainer=r.parentNode?r.parentNode:r,a.endOffset=c.nodeIndex(r)+1}ld(c,a,function(t){H(t,function(t){d(t);H(["underline","line-through","overline"],function(n){pn(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&Pu(c,t.parentNode)===n&&gv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)})})})};if(r)if(Ou(r)){var p=c.createRng();p.setStartBefore(r),p.setEndAfter(r),m(p)}else m(r);else if("false"!==c.getContentEditable(l.getNode()))l.isCollapsed()&&i.inline&&!md(e).length?Wh(e,t,n,a):(wd(l,!0,function(){yd(e,m)}),i.inline&&mm(e,t,n,l.getStart())&&Au(c,l,l.getRng()),e.nodeChanged());else{r=l.getNode();for(var h=0;h<o.length&&(!o[h].ceFalseOverride||!gv(e,o[h],n,r,r));h++);}},wv=ft.each,xv=function(e,t,n,r){wv(t,function(t){wv(e.dom.select(t.inline,r),function(r){Zh(r)&&gv(e,t,n,r,t.exact?r:null)}),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Jh(e.select(r,n),function(n){Zh(n)&&Jh(t.styles,function(t,r){e.setStyle(n,r,"")})})}}(e.dom,t,r)})},kv=ft.each,_v=function(e,t){return ge(e,t)},Sv=function(e,t,n,r){var a=e.formatter.get(t),o=a[0],i=!r&&e.selection.isCollapsed(),s=e.dom,c=e.selection,l=function(e,t){if(t=t||o,e){if(t.onformat&&t.onformat(e,t,n,r),kv(t.styles,function(t,r){s.setStyle(e,r,Vu(t,n))}),t.styles){var a=s.getAttrib(e,"style");a&&s.setAttrib(e,"data-mce-style",a)}kv(t.attributes,function(t,r){s.setAttrib(e,r,Vu(t,n))}),kv(t.classes,function(t){t=Vu(t,n),s.hasClass(e,t)||s.addClass(e,t)})}},u=function(e,t){var n=!1;return!!qu(o)&&(kv(e,function(e){if(!("collapsed"in e&&e.collapsed!==i))return s.is(t,e.selector)&&!vu(t)?(l(t,e),n=!0,!1):void 0}),n)},d=function(r,i,s,c){var d=[],f=!0,m=o.inline||o.block,p=r.create(m);l(p),ld(r,i,function(i){var s,h=function(i){var v=!1,g=f,b=i.nodeName.toLowerCase(),y=i.parentNode.nodeName.toLowerCase();if(pn(i)&&r.getContentEditable(i)&&(g=f,f="true"===r.getContentEditable(i),v=!0),Nn(i)&&!function(e,t,n,r){if(function(e){return e.getParam("format_empty_lines",!1,"boolean")}(e)&&Wu(t)){var a=Ne(Ne({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),o=Bh(pt.fromDom(n),function(e){return vu(e.dom)});return ge(a,r)&&ga(pt.fromDom(n.parentNode),!1)&&!o}return!1}(e,o,i,y))return s=null,void(ju(o)&&r.remove(i));if(o.wrapper&&fm(e,i,t,n))s=null;else{if(f&&!v&&ju(o)&&!o.wrapper&&Eu(e,b)&&zu(e,y,m)){var w=r.rename(i,m);return l(w),d.push(w),void(s=null)}if(qu(o)){var x=u(a,i);if(!_v(o,"inline")||x)return void(s=null)}!f||v||!zu(e,m,b)||!zu(e,y,m)||!c&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||vu(i)||_v(o,"inline")&&r.isBlock(i)?(s=null,kv(ft.grep(i.childNodes),h),v&&(f=g),s=null):(s||(s=r.clone(p,!1),i.parentNode.insertBefore(s,i),d.push(s)),s.appendChild(i))}};kv(i,h)}),!0===o.links&&kv(d,function(e){var t=function(e){"A"===e.nodeName&&l(e,o),kv(ft.grep(e.childNodes),t)};t(e)}),kv(d,function(i){var s=function(e){var t=!1;return kv(e.childNodes,function(e){if(function(e){return e&&1===e.nodeType&&!Tu(e)&&!vu(e)&&!bn(e)}(e))return t=e,!1}),t},c=function(e){var t=0;return kv(e.childNodes,function(e){(function(e){return L(e)&&kn(e)&&0===e.length})(e)||Tu(e)||t++}),t}(i);!(d.length>1)&&r.isBlock(i)||0!==c?(Wu(o)||o.wrapper)&&(o.exact||1!==c||(i=function(e){var t,n=s(e);return n&&!Tu(n)&&um(r,n,o)&&(t=r.clone(n,!1),l(t),r.replace(t,e,!0),r.remove(n,!0)),t||e}(i)),xv(e,a,n,i),function(e,t,n,r,a){fm(e,a.parentNode,n,r)&&gv(e,t,r,a)||t.merge_with_parents&&e.dom.getParent(a.parentNode,function(o){if(fm(e,o,n,r))return gv(e,t,r,a),!0})}(e,o,t,n,i),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&rv(r,av(e,"fontSize"),ov(e,"backgroundColor",Vu(t.styles.backgroundColor,n)))}(r,o,n,i),function(e,t,n,r){var a=function(t){if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){var n=Pu(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(ft.walk(r,a,"childNodes"),a(r))}(r,o,0,i),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(rv(r,av(e,"fontSize"),ov(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,o,0,i),nv(r,o,0,i)):r.remove(i,!0)})};if("false"!==s.getContentEditable(c.getNode())){if(o){if(r)if(Ou(r)){if(!u(a,r)){var f=s.createRng();f.setStartBefore(r),f.setEndAfter(r),d(s,sd(e,f,a),0,!0)}}else d(s,r,0,!0);else if(i&&Wu(o)&&!md(e).length)!function(e,t,n){var r,a,o=e.selection,i=o.getRng(),s=i.startOffset,c=i.startContainer.nodeValue;(r=gu(e.getBody(),o.getStart()))&&(a=Uh(r));var l,u,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(c&&s>0&&s<c.length&&d.test(c.charAt(s))&&d.test(c.charAt(s-1))){var f=o.getBookmark();i.collapse(!0);var m=sd(e,i,e.formatter.get(t));m=Gd(m),e.formatter.apply(t,n,m),o.moveToBookmark(f)}else r&&"\ufeff"===a.nodeValue?e.formatter.apply(t,n,r):(l=e.getDoc(),u=Ph(!0).dom,a=(r=l.importNode(u,!0)).firstChild,i.insertNode(r),s=1,e.formatter.apply(t,n,r)),o.setCursorLocation(a,s)}(e,t,n);else{var m=c.getNode(),p=a[0];e.settings.forced_root_block||!p.defaultBlock||s.getParent(m,s.isBlock)||Sv(e,p.defaultBlock),c.setRng(_h(c.getRng())),wd(c,!0,function(t){yd(e,function(t,n){var r=n?t:sd(e,t,a);d(s,r)})}),Au(s,c,c.getRng()),e.nodeChanged()}!function(e,t){Xh(Kh[e],function(e){e(t)})}(t,e)}}else{r=c.getNode();for(var h=0,v=a.length;h<v;h++){var g=a[h];if(g.ceFalseOverride&&qu(g)&&s.is(r,g.selector))return void l(r,g)}}},Cv=function(e,t,n,r){var a=oe(n.get()),o={},i={},s=W(Fu(e.dom,t),function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")});se(r,function(t,n){ft.each(s,function(r){return e.formatter.matchNode(r,n,{},t.similar)?(-1===a.indexOf(n)&&(H(t.callbacks,function(e){e(!0,{node:r,format:n,parents:s})}),o[n]=t.callbacks),i[n]=t.callbacks,!1):!cm(e,r,n)&&void 0})});var c=Nv(n.get(),i,t,s);n.set(Ne(Ne({},o),c))},Nv=function(e,t,n,r){return fe(e,function(e,a){return!!ve(t,a)||(H(e,function(e){e(!1,{node:n,format:a,parents:r})}),!1)}).t},Tv=function(e,t,n,r,a){return null===t.get()&&function(e,t){var n=os({});e.set({}),t.on("NodeChange",function(r){Cv(t,r.element,n,e.get())})}(t,e),function(e,t,n,r){var a=e.get();H(t.split(","),function(e){a[e]||(a[e]={similar:r,callbacks:[]}),a[e].callbacks.push(n)}),e.set(a)}(t,n,r,a),{unbind:function(){return function(e,t,n){var r=e.get();H(t.split(","),function(e){r[e].callbacks=W(r[e].callbacks,function(e){return e!==n}),0===r[e].callbacks.length&&delete r[e]}),e.set(r)}(t,n,r)}}},Dv=function(e,t){var n=(t||document).createDocumentFragment();return H(e,function(e){n.appendChild(e.dom)}),pt.fromDom(n)},Iv=function(e,t,n){return{element:e,width:t,rows:n}},Mv=function(e,t){return{element:e,cells:t}},Ov=function(e,t){return{x:e,y:t}},Av=function(e,t){var n=parseInt(Rn(e,t),10);return isNaN(n)?1:n},Lv=function(e,t,n){var r=e.rows;return!!(r[n]?r[n].cells:[])[t]},Ev=function(e){return G(e,function(e,t){return t.cells.length>e?t.cells.length:e},0)},zv=function(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var a=n[r].cells,o=0;o<a.length;o++)if(bt(a[o],t))return k.some(Ov(o,r));return k.none()},Rv=function(e,t,n,r,a){for(var o=[],i=e.rows,s=n;s<=a;s++){var c=i[s].cells,l=t<r?c.slice(t,r+1):c.slice(r,t+1);o.push(Mv(i[s].element,l))}return o},Vv=function(e){var t=Iv(Es(e),0,[]);return H(ks(e,"tr"),function(e,n){H(ks(e,"td,th"),function(r,a){!function(e,t,n,r,a){for(var o=Av(a,"rowspan"),i=Av(a,"colspan"),s=e.rows,c=n;c<n+o;c++){s[c]||(s[c]=Mv(zs(r),[]));for(var l=t;l<t+i;l++)s[c].cells[l]=c===n&&l===t?a:Es(a)}}(t,function(e,t,n){for(;Lv(e,t,n);)t++;return t}(t,a,n),n,e,r)})}),Iv(t.element,Ev(t.rows),t.rows)},Bv=function(e){return function(e,t){var n=Es(e.element),r=pt.fromTag("tbody");return Xt(r,t),Qt(n,r),n}(e,function(e){return F(e.rows,function(e){var t=F(e.cells,function(e){var t=zs(e);return Bn(t,"colspan"),Bn(t,"rowspan"),t}),n=Es(e.element);return Xt(n,t),n})}(e))},$v=function(e,t,n){return zv(e,t).bind(function(t){return zv(e,n).map(function(n){return function(e,t,n){var r=t.x,a=t.y,o=n.x,i=n.y,s=a<i?Rv(e,r,a,o,i):Rv(e,r,i,o,a);return Iv(e.element,Ev(s),s)}(e,t,n)})})},Uv=function(e,t){return K(e,function(e){return"li"===xt(e)&&vd(e,t)}).fold(d([]),function(t){return function(e){return K(e,function(e){return"ul"===xt(e)||"ol"===xt(e)})}(e).map(function(e){var t=pt.fromTag(xt(e)),n=me(Hn(e),function(e,t){return ze(t,"list-style")});return $n(t,n),[pt.fromTag("li"),t]}).getOr([])})},Pv=function(e,t){var n=pt.fromDom(t.commonAncestorContainer),r=op(n,e),a=W(r,function(e){return Mr(e)||Dr(e)}),o=Uv(r,t),i=a.concat(o.length?o:function(e){return Er(e)?Ot(e).filter(Lr).fold(d([]),function(t){return[e,t]}):Lr(e)?[e]:[]}(n));return F(i,Es)},Fv=function(){return Dv([])},Hv=function(e,t){return n=pt.fromDom(t.cloneContents()),r=Pv(e,t),a=G(r,function(e,t){return Qt(t,e),t},n),r.length>0?Dv([a]):a;var n,r,a},jv=function(e,t){return(n=e,r=t[0],pr(r,"table",m(bt,n))).bind(function(e){var n=t[0],r=t[t.length-1],a=Vv(e);return $v(a,n,r).map(function(e){return Dv([Bv(e)])})}).getOrThunk(Fv);var n,r},qv=function(e,t){var n=fd(t,e);return n.length>0?jv(e,n):function(e,t){return t.length>0&&t[0].collapsed?Fv():Hv(e,t[0])}(e,t)},Wv=function(e,t){return t>=0&&t<e.length&&Iu(e.charAt(t))},Yv=function(e,t){var n=Ur(e.innerText);return t?function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")}(n):n},Gv=function(e,t,n){if(void 0===n&&(n={}),n.get=!0,n.format=t,n.selection=!0,(n=e.fire("BeforeGetContent",n)).isDefaultPrevented())return e.fire("GetContent",n),n.content;if("text"===n.format)return function(e){return k.from(e.selection.getRng()).map(function(t){var n=k.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),a=function(e){return e.map(function(e){return e.nodeName}).getOr("div").toLowerCase()}(n),o=st.browser.isIE()&&"pre"!==a,i=e.dom.add(r,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),s=Yv(i,o),c=Ur(i.textContent);if(e.dom.remove(i),Wv(c,0)||Wv(c,c.length-1)){var l=n.getOr(r),u=Yv(l,o),d=u.indexOf(s);if(-1===d)return s;var f=Wv(u,d-1),m=Wv(u,d+s.length);return(f?" ":"")+s+(m?" ":"")}return s}).getOr("")}(e);n.getInner=!0;var r=function(e,t){var n=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),o=am(e,ud(a)),i=t.contextual?qv(pt.fromDom(e.getBody()),o).dom:n.cloneContents();return i&&r.appendChild(i),e.selection.serializer.serialize(r,t)}(e,n);return"tree"===n.format?r:(n.content=e.selection.isCollapsed()?"":r,e.fire("GetContent",n),n.content)},Kv=function(e){return pn(e)?e.outerHTML:kn(e)?za.encodeRaw(e.data,!1):_n(e)?"\x3c!--"+e.data+"--\x3e":""},Qv=function(e,t,n){var r=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var a=e.childNodes[n];a.parentNode.insertBefore(r,a)}else e.appendChild(r)},Xv=function(e,t){var n,r,a,o,i,s,c,l,u,d=F(ae(t.childNodes),Kv);return function(e,t){var n=0;H(e,function(e){0===e[0]?n++:1===e[0]?(Qv(t,e[1],n),n++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)})}((r=e,a=(n=d).length+r.length+2,o=new Array(a),i=new Array(a),s=function(e,t,a,o,i){var c=l(e,t,a,o);if(null===c||c.start===t&&c.diag===t-o||c.end===e&&c.diag===e-a)for(var u=e,d=a;u<t||d<o;)u<t&&d<o&&n[u]===r[d]?(i.push([0,n[u]]),++u,++d):t-e>o-a?(i.push([2,n[u]]),++u):(i.push([1,r[d]]),++d);else{s(e,c.start,a,c.start-c.diag,i);for(var f=c.start;f<c.end;++f)i.push([0,n[f]]);s(c.end,t,c.end-c.diag,o,i)}},c=function(e,t,a,o){for(var i=e;i-t<o&&i<a&&n[i]===r[i-t];)++i;return function(e,t,n){return{start:e,end:t,diag:n}}(e,i,t)},l=function(e,t,a,s){var l=t-e,u=s-a;if(0===l||0===u)return null;var d,f,m,p,h,v=l-u,g=u+l,b=(g%2==0?g:g+1)/2;for(o[1+b]=e,i[1+b]=t+1,d=0;d<=b;++d){for(f=-d;f<=d;f+=2){for(m=f+b,f===-d||f!==d&&o[m-1]<o[m+1]?o[m]=o[m+1]:o[m]=o[m-1]+1,h=(p=o[m])-e+a-f;p<t&&h<s&&n[p]===r[h];)o[m]=++p,++h;if(v%2!=0&&v-d<=f&&f<=v+d&&i[m-v]<=o[m])return c(i[m-v],f+e-a,t,s)}for(f=v-d;f<=v+d;f+=2){for(m=f+b-v,f===v-d||f!==v+d&&i[m+1]<=i[m-1]?i[m]=i[m+1]-1:i[m]=i[m-1],h=(p=i[m]-1)-e+a-f;p>=e&&h>=a&&n[p]===r[h];)i[m]=p--,h--;if(v%2==0&&-d<=f&&f<=d&&i[m]<=o[m+v])return c(i[m],f+e-a,t,s)}}},u=[],s(0,n.length,0,r.length,u),u),t),t},Jv=os(k.none()),Zv=function(e){var t,n=(t=e.getBody(),W(F(ae(t.childNodes),Kv),function(e){return e.length>0})),r=X(n,function(t){var n=Em(e.serializer,t);return n.length>0?[n]:[]}),a=r.join("");return-1!==a.indexOf("</iframe>")?function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(r):function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(a)},eg=function(e,t,n){"fragmented"===t.type?Xv(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},tg=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},ng=function(e){var t=pt.fromTag("body",Jv.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return Jv.set(k.some(e)),e}));return As(t,tg(e)),H(ks(t,"*[data-mce-bogus]"),en),t.dom.innerHTML},rg=function(e,t){return!(!e||!t)&&(!!function(e,t){return tg(e)===tg(t)}(e,t)||function(e,t){return ng(e)===ng(t)}(e,t))},ag=function(e){return 0===e.get()},og=function(e,t,n){ag(n)&&(e.typing=t)},ig=function(e,t){e.typing&&(og(e,!1,t),e.add())},sg=function(e){return e instanceof wm},cg=function(e,t){Eh(e.serializer.getNodeFilters(),e.serializer.getAttributeFilters(),t)},lg=function(e){return{undoManager:{beforeChange:function(t,n){return function(e,t,n){ag(t)&&n.set(k.some(Bc(e.selection)))}(e,t,n)},addUndoLevel:function(t,n,r,a,o,i){return function(e,t,n,r,a,o,i){var s=Zv(e);if(o=o||{},o=ft.extend(o,s),!1===ag(r)||e.removed)return null;var c=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:o,lastLevel:c,originalEvent:i}).isDefaultPrevented())return null;if(c&&rg(c,o))return null;t.data[n.get()]&&a.get().each(function(e){t.data[n.get()].beforeBookmark=e});var l=function(e){return e.getParam("custom_undo_redo_levels",0,"number")}(e);if(l&&t.data.length>l){for(var u=0;u<t.data.length-1;u++)t.data[u]=t.data[u+1];t.data.length--,n.set(t.data.length)}o.bookmark=Bc(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(o),n.set(t.data.length-1);var d={level:o,lastLevel:c,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.fire("AddUndo",d),e.fire("change",d)):e.fire("AddUndo",d),o}(e,t,n,r,a,o,i)},undo:function(t,n,r){return function(e,t,n,r){var a;return t.typing&&(t.add(),t.typing=!1,og(t,!1,n)),r.get()>0&&(r.set(r.get()-1),a=t.data[r.get()],eg(e,a,!0),e.setDirty(!0),e.fire("Undo",{level:a})),a}(e,t,n,r)},redo:function(t,n){return function(e,t,n){var r;return t.get()<n.length-1&&(t.set(t.get()+1),r=n[t.get()],eg(e,r,!1),e.setDirty(!0),e.fire("Redo",{level:r})),r}(e,t,n)},clear:function(t,n){return function(e,t,n){t.data=[],n.set(0),t.typing=!1,e.fire("ClearUndos")}(e,t,n)},reset:function(e){return function(e){e.clear(),e.add()}(e)},hasUndo:function(t,n){return function(e,t,n){return n.get()>0||t.typing&&t.data[0]&&!rg(Zv(e),t.data[0])}(e,t,n)},hasRedo:function(e,t){return function(e,t){return t.get()<e.data.length-1&&!e.typing}(e,t)},transact:function(e,t,n){return function(e,t,n){return ig(e,t),e.beforeChange(),e.ignore(n),e.add()}(e,t,n)},ignore:function(e,t){return function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}}(e,t)},extra:function(t,n,r,a){return function(e,t,n,r,a){if(t.transact(r)){var o=t.data[n.get()].bookmark,i=t.data[n.get()-1];eg(e,i,!0),t.transact(a)&&(t.data[n.get()-1].beforeBookmark=o)}}(e,t,n,r,a)}},formatter:{match:function(t,n,r){return mm(e,t,n,r)},matchAll:function(t,n){return function(e,t,n){var r=[],a={},o=e.selection.getStart();return e.dom.getParent(o,function(o){for(var i=0;i<t.length;i++){var s=t[i];!a[s]&&fm(e,o,s,n)&&(a[s]=!0,r.push(s))}},e.dom.getRoot()),r}(e,t,n)},matchNode:function(t,n,r,a){return fm(e,t,n,r,a)},canApply:function(t){return function(e,t){var n,r,a,o,i,s=e.formatter.get(t),c=e.dom;if(s)for(n=e.selection.getStart(),r=Fu(c,n),o=s.length-1;o>=0;o--){if(!(i=s[o].selector)||s[o].defaultBlock)return!0;for(a=r.length-1;a>=0;a--)if(c.is(r[a],i))return!0}return!1}(e,t)},closest:function(t){return pm(e,t)},apply:function(t,n,r){return Sv(e,t,n,r)},remove:function(t,n,r,a){return yv(e,t,n,r,a)},toggle:function(t,n,r){return function(e,t,n,r){var a=e.formatter.get(t);!mm(e,t,n,r)||"toggle"in a[0]&&!a[0].toggle?Sv(e,t,n,r):yv(e,t,n,r)}(e,t,n,r)},formatChanged:function(t,n,r,a){return Tv(e,t,n,r,a)}},editor:{getContent:function(t,n){return function(e,t,n){return k.from(e.getBody()).fold(d("tree"===t.format?new wm("body",11):""),function(r){return Rm(e,t,n,r)})}(e,t,n)},setContent:function(t,n){return Vh(e,t,n)},insertContent:function(t,n){return Ah(e,t,n)},addVisual:function(t){return function(e,t){var n=e.dom,r=L(t)?t:e.getBody();O(e.hasVisual)&&(e.hasVisual=function(e){return e.getParam("visual",!0,"boolean")}(e)),H(n.select("table,a",r),function(t){switch(t.nodeName){case"TABLE":var r=function(e){return e.getParam("visual_table_class","mce-item-table","string")}(e),a=n.getAttrib(t,"border");a&&"0"!==a||!e.hasVisual?n.removeClass(t,r):n.addClass(t,r);break;case"A":if(!n.getAttrib(t,"href")){var o=n.getAttrib(t,"name")||t.id,i=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")}(e);o&&e.hasVisual?n.addClass(t,i):n.removeClass(t,i)}}}),e.fire("VisualAid",{element:t,hasVisual:e.hasVisual})}(e,t)}},selection:{getContent:function(t,n){return Gv(e,t,n)}},raw:{getModel:function(){return k.none()}}}},ug=function(e,t){var n=function(e){return T(e)?e:{}},r=h("Unimplemented feature for rtc");return{undoManager:{beforeChange:l,addUndoLevel:r,undo:function(){return t.undo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},redo:function(){return t.redo(),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},clear:r,reset:r,hasUndo:function(){return t.hasUndo()},hasRedo:function(){return t.hasRedo()},transact:function(e,n,r){return t.transact(r),{type:"complete",fragments:[],content:"",bookmark:null,beforeBookmark:null}},ignore:r,extra:r},formatter:{match:function(e,r,a){return t.matchFormat(e,n(r))},matchAll:r,matchNode:r,canApply:function(e){return t.canApplyFormat(e)},closest:function(e){return t.closestFormat(e)},apply:function(e,r,a){return t.applyFormat(e,n(r))},remove:function(e,r,a,o){return t.removeFormat(e,n(r))},toggle:function(e,r,a){return t.toggleFormat(e,n(r))},formatChanged:function(e,n,r,a){return t.formatChanged(n,r,a)}},editor:{getContent:function(n,r){if("html"===r||"tree"===r){var a=t.getContent(),o=_m({inner:!0});return cg(e,a),"tree"===r?a:o.serialize(a)}return lg(e).editor.getContent(n,r)},setContent:function(n,r){var a=sg(n)?n:e.parser.parse(n,{isRootContent:!0,insert:!0});return t.setContent(a),n},insertContent:function(n,r){var a,o=(a=e,k.from(a.selection.getStart(!0)).map(function(e){return e.nodeName.toLowerCase()})).fold(function(){return{}},function(e){return{context:e}}),i=sg(n)?n:e.parser.parse(n,Ne(Ne({},o),{insert:!0}));t.insertContent(i)},addVisual:function(e){}},selection:{getContent:function(n,r){if("html"===n||"tree"===n){var a=t.getSelectedContent(),o=_m({});return cg(e,a),"tree"===n?a:o.serialize(a)}return lg(e).selection.getContent(n,r)}},raw:{getModel:function(){return k.some(t.getRawModel())}}}},dg=function(e){return ve(e.plugins,"rtc")},fg=function(e){return e.rtcInstance?e.rtcInstance:lg(e)},mg=function(e){var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},pg=function(e,t){return void 0===t&&(t={}),function(e,t,n){return mg(e).selection.getContent(t,n)}(e,t.format?t.format:"html",t)},hg=function(e){return 0===e.dom.length?(Zt(e),k.none()):k.some(e)},vg=function(e,t,n,r){e.bind(function(e){return(r?Rp:zp)(e.dom,r?e.dom.length:0),t.filter(Ct).map(function(t){return function(e,t,n,r){var a=e.dom,o=t.dom,i=r?a.length:o.length;r?(Vp(a,o,!1,!r),n.setStart(o,i)):(Vp(o,a,!1,!r),n.setEnd(o,i))}(e,t,n,r)})}).orThunk(function(){return function(e,t){return e.filter(function(e){return Id.isBookmarkNode(e.dom)}).bind(t?Lt:At)}(t,r).or(t).filter(Ct).map(function(e){return function(e,t){Ot(e).each(function(n){var r=e.dom;t&&Np(n,vc(r,0))?zp(r,0):!t&&Tp(n,vc(r,r.length))&&Rp(r,r.length)})}(e,r)})})},gg=function(e,t,n){void 0===n&&(n={});var r=function(e,t){return Ne(Ne({format:"html"},e),{set:!0,selection:!0,content:t})}(n,t);if(r.no_events||!(r=e.fire("BeforeSetContent",r)).isDefaultPrevented()){n.content=function(e,t){if("raw"!==t.format){var n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},o=e.parser.parse(t.content,Ne(Ne({isRootContent:!0,forced_root_block:!1},a),t));return _m({validate:e.validate},e.schema).serialize(o)}return t.content}(e,r);var a=e.selection.getRng();!function(e,t){var n=k.from(t.firstChild).map(pt.fromDom),r=k.from(t.lastChild).map(pt.fromDom);e.deleteContents(),e.insertNode(t);var a=n.bind(At).filter(Ct).bind(hg),o=r.bind(Lt).filter(Ct).bind(hg);vg(a,n,e,!0),vg(o,r,e,!1),e.collapse(!1)}(a,a.createContextualFragment(n.content)),e.selection.setRng(a),yf(e,a),r.no_events||e.fire("SetContent",r)}else e.fire("SetContent",r)},bg=function(e,t,n){if(e&&e.hasOwnProperty(t)){var r=W(e[t],function(e){return e!==n});0===r.length?delete e[t]:e[t]=r}};var yg=function(e){return!!e.select},wg=function(e){return!(!e||!e.ownerDocument)&&wt(pt.fromDom(e.ownerDocument),pt.fromDom(e))},xg=function(e,t,n,r){var a,o,i=function(e,t){var n,r;return{selectorChangedWithUnbind:function(a,o){return n||(n={},r={},t.on("NodeChange",function(t){var a=t.element,o=e.getParents(a,null,e.getRoot()),i={};ft.each(n,function(t,n){ft.each(o,function(a){if(e.is(a,n))return r[n]||(ft.each(t,function(e){e(!0,{node:a,selector:n,parents:o})}),r[n]=t),i[n]=t,!1})}),ft.each(r,function(e,t){i[t]||(delete r[t],ft.each(e,function(e){e(!1,{node:a,selector:t,parents:o})}))})})),n[a]||(n[a]=[]),n[a].push(o),{unbind:function(){bg(n,a,o),bg(r,a,o)}}}}}(e,r).selectorChangedWithUnbind,s=function(e,t){return gg(r,e,t)},c=function(e){var t=u();t.collapse(!!e),d(t)},l=function(){return t.getSelection?t.getSelection():t.document.selection},u=function(){var n,i,s,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;var u=t.document;if(void 0===u||null===u)return null;if(void 0!==r.bookmark&&!1===Qf(r)){var d=Bf(r);if(d.isSome())return d.map(function(e){return am(r,[e])[0]}).getOr(u.createRange())}try{(n=l())&&!mn(n.anchorNode)&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():u.createRange(),i=am(r,[i])[0])}catch(e){}return i||(i=u.createRange?u.createRange():u.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(s=e.getRoot(),i.setStart(s,0),i.setEnd(s,0)),a&&o&&(0===c(i.START_TO_START,i,a)&&0===c(i.END_TO_END,i,a)?i=o:(a=null,o=null)),i},d=function(e,t){var n;if(function(e){return!!e&&(!!yg(e)||wg(e.startContainer)&&wg(e.endContainer))}(e)){var i=yg(e)?e:null;if(i){o=null;try{i.select()}catch(e){}}else{var s=l();if(e=r.fire("SetSelectionRange",{range:e,forward:t}).range,s){o=e;try{s.removeAllRanges(),s.addRange(e)}catch(e){}!1===t&&s.extend&&(s.collapse(e.endContainer,e.endOffset),s.extend(e.startContainer,e.startOffset)),a=s.rangeCount>0?s.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!s.setBaseAndExtent||st.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(s.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),s.anchorNode===e.startContainer&&s.focusNode===e.endContainer||s.setBaseAndExtent(n,0,n,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},f=function(){var t=l(),n=null===t||void 0===t?void 0:t.anchorNode,r=null===t||void 0===t?void 0:t.focusNode;if(!t||!n||!r||mn(n)||mn(r))return!0;var a=e.createRng();a.setStart(n,t.anchorOffset),a.collapse(!0);var o=e.createRng();return o.setStart(r,t.focusOffset),o.collapse(!0),a.compareBoundaryPoints(a.START_TO_START,o)<=0},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:c,setCursorLocation:function(t,n){var a=e.createRng();t?(a.setStart(t,n),a.setEnd(t,n),d(a),c(!1)):(gd(e,a,r.getBody(),!0),d(a))},getContent:function(e){return pg(r,e)},setContent:s,getBookmark:function(e,t){return p.getBookmark(e,t)},moveToBookmark:function(e){return p.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return k.from(t).map(function(t){var r=e.nodeIndex(t),a=e.createRng();return a.setStart(t.parentNode,r),a.setEnd(t.parentNode,r+1),n&&(gd(e,a,t,!0),gd(e,a,t,!1)),a})}(e,t,n).each(d),t},isCollapsed:function(){var e=u(),t=l();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:f,setNode:function(t){return s(e.getOuterHTML(t)),t},getNode:function(){return function(e,t){var n,r,a;if(!t)return e;r=t.startContainer,a=t.endContainer;var o=t.startOffset,i=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(r===a&&i-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===a.nodeType&&(r=r.length===o?rm(r.nextSibling,!0):r.parentNode,a=0===i?rm(a.previousSibling,!1):a.parentNode,r&&r===a))?r:n&&3===n.nodeType?n.parentNode:n}(r.getBody(),u())},getSel:l,setRng:d,getRng:u,getStart:function(e){return tm(r.getBody(),u(),e)},getEnd:function(e){return nm(r.getBody(),u(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var a,o=[],i=e.getRoot();if(n=e.getParent(n||tm(i,t,t.collapsed),e.isBlock),r=e.getParent(r||nm(i,t,t.collapsed),e.isBlock),n&&n!==i&&o.push(n),n&&r&&n!==r){a=n;for(var s=new Nr(n,i);(a=s.next())&&a!==r;)e.isBlock(a)&&o.push(a)}return r&&n!==r&&r!==i&&o.push(r),o}(e,u(),t,n)},normalize:function(){var t=u(),n=l();if(!(ud(n).length>1)&&bd(r)){var a=Wd(e,t);return a.each(function(e){d(e,f())}),a.getOr(t)}return t},selectorChanged:function(e,t){return i(e,t),m},selectorChangedWithUnbind:i,getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){(e.inline?vf:bf)(e,t,n)}(r,e,t)},placeCaretAt:function(e,t){return d(Rd(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=u();return e.collapsed?vc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=o=null,h.destroy()}},p=Id(m),h=Ed(m,r);return m.bookmarkManager=p,m.controlSelection=h,m},kg=function(e,t,n){e.addNodeFilter("font",function(e){H(e,function(e){var r=t.parse(e.attr("style")),a=e.attr("color"),o=e.attr("face"),i=e.attr("size");a&&(r.color=a),o&&(r["font-family"]=o),i&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){H(t,function(t){e.attr(t,null)})}(e,["color","face","size"])})})},_g=function(e,t){var n=fo();t.convert_fonts_to_spans&&kg(e,n,ft.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",function(e){H(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})}(e,n)},Sg=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},Cg=function(e,t){var n;try{n=atob(t)}catch(e){return k.none()}for(var r=new Uint8Array(n.length),a=0;a<r.length;a++)r[a]=n.charCodeAt(a);return k.some(new Blob([r],{type:e}))},Ng=function(e){return 0===e.indexOf("blob:")?function(e){return new gr(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(){200===this.status?t(this.response):r()},a.onerror=r,a.send()}catch(e){r()}})}(e):0===e.indexOf("data:")?(t=e,new gr(function(e){var n=Sg(t),r=n.type,a=n.data;Cg(r,a).fold(function(){return e(new Blob([]))},e)})):null;var t},Tg=0,Dg=function(e){return(e||"blobid")+Tg++},Ig=function(e,t,n,r){var a,o;if(0!==t.src.indexOf("blob:")){var i=Sg(t.src),s=i.data,c=i.type;a=s,(o=e.getByData(a,c))?n({image:t,blobInfo:o}):Ng(t.src).then(function(r){o=e.create(Dg(),r,a),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})}else(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):Ng(t.src).then(function(r){(function(e){return new gr(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(r).then(function(i){a=Sg(i).data,o=e.create(Dg(),r,a),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)})},Mg=function(e){return e?ae(e.getElementsByTagName("img")):[]};var Og,Ag,Lg=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new wm("br",1)).shortEnded=!0:r.empty().append(new wm("#text",3)).value=" "},Eg=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},zg=function(e,t,n,r){return r.isEmpty(t,n,function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)})},Rg=function(e,t){var n=t.blob_cache,r=function(e){var r,a,o=e.attr("src");(function(e){return e.attr("src")===st.transparentSrc||e.attr("data-mce-placeholder")})(e)||function(e){return e.attr("data-mce-bogus")}(e)||(r=o,a=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(r),a?k.some({type:a[1],data:decodeURIComponent(a[2])}):k.none()).filter(function(){return function(e,t){if(t.images_dataimg_filter){var n=new Image;return n.src=e.attr("src"),se(e.attributes.map,function(e,t){n.setAttribute(t,e)}),t.images_dataimg_filter(n)}return!0}(e,t)}).bind(function(e){var t=e.type,r=e.data;return k.from(n.getByData(r,t)).orThunk(function(){return Cg(t,r).map(function(e){var t=n.create(Dg(),e,r);return n.add(t),t})})}).each(function(t){e.attr("src",t.blobUri())})};n&&e.addAttributeFilter("src",function(e){return H(e,r)})},Vg=ft.makeMap,Bg=ft.each,$g=ft.explode,Ug=ft.extend,Pg=function(e,t){void 0===t&&(t=Wa());var n={},r=[],a={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var i=function(e){var t,i,s;(i=e.name)in n&&((s=a[i])?s.push(e):a[i]=[e]),t=r.length;for(;t--;)(i=r[t].name)in e.attributes.map&&((s=o[i])?s.push(e):o[i]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){Bg($g(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){Bg($g(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:i,parse:function(s,c){var l,u,d,f,m,p,h,v,g,b=[];c=c||{},a={},o={};var y=Ug(Vg("script,style,head,html,body,title,meta,param"),t.getBlockElements()),w=t.getNonEmptyElements(),x=t.children,k=e.validate,_=function(e){return!1===e?"":!0===e?"p":e}("forced_root_block"in c?c.forced_root_block:e.forced_root_block),S=t.getWhiteSpaceElements(),C=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,T=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/;v=S.hasOwnProperty(c.context)||S.hasOwnProperty(e.root_name);var I=function(e,t){var r,o=new wm(e,t);return e in n&&((r=a[e])?r.push(o):a[e]=[o]),o},M=function(e){var n,r,a,o,i=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((a=n.value.replace(N,"")).length>0)return void(n.value=a);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!i[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}},O=Lm({validate:k,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){g.append(I("#cdata",4)).value=e},text:function(e,t){var n;v||(e=e.replace(T," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(g.lastChild,y)&&(e=e.replace(C,""))),0!==e.length&&((n=I("#text",3)).raw=!!t,g.append(n).value=e)},comment:function(e){g.append(I("#comment",8)).value=e},pi:function(e,t){g.append(I(e,7)).value=t,M(g)},doctype:function(e){g.append(I("#doctype",10)).value=e,M(g)},start:function(e,n,a){var i,s,c,l,u=k?t.getElementRule(e):{};if(u){for((i=I(u.outputName||e,1)).attributes=n,i.shortEnded=a,g.append(i),(l=x[g.name])&&x[i.name]&&!l[i.name]&&b.push(i),s=r.length;s--;)(c=r[s].name)in n.map&&((p=o[c])?p.push(i):o[c]=[i]);y[e]&&M(i),a||(g=i),!v&&S[e]&&(v=!0)}},end:function(n){var r,a,o,i,s=k?t.getElementRule(n):{};if(s){if(y[n]&&!v){if((r=g.firstChild)&&3===r.type)if((a=r.value.replace(C,"")).length>0)r.value=a,r=r.next;else for(o=r.next,r.remove(),r=o;r&&3===r.type;)a=r.value,o=r.next,(0===a.length||D.test(a))&&(r.remove(),r=o),r=o;if((r=g.lastChild)&&3===r.type)if((a=r.value.replace(N,"")).length>0)r.value=a,r=r.prev;else for(o=r.prev,r.remove(),r=o;r&&3===r.type;)a=r.value,o=r.prev,(0===a.length||D.test(a))&&(r.remove(),r=o),r=o}if(v&&S[n]&&(v=!1),s.removeEmpty&&zg(t,w,S,g))return i=g.parent,y[g.name]?g.empty().remove():g.unwrap(),void(g=i);s.paddEmpty&&(function(e){return Eg(e,"#text")&&" "===e.firstChild.value}(g)||zg(t,w,S,g))&&Lg(e,c,y,g),g=g.parent}}},t),A=g=new wm(c.context||e.root_name,11);if(O.parse(s,c.format),k&&b.length&&(c.context?c.invalid=!0:function(e){var n,r,a,o,s,c,l,u,d,f,m,p=Vg("tr,td,th,tbody,thead,tfoot,table"),h=t.getNonEmptyElements(),v=t.getWhiteSpaceElements(),g=t.getTextBlockElements(),b=t.getSpecialElements();for(n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(g[r.name]&&"li"===r.parent.name){for(f=r.next;f&&g[f.name];)f.name="li",f.fixed=!0,r.parent.insert(f,r.parent),f=f.next;r.unwrap(r)}else{for(o=[r],a=r.parent;a&&!t.isValidChild(a.name,r.name)&&!p[a.name];a=a.parent)o.push(a);if(a&&o.length>1){for(o.reverse(),s=c=i(o[0].clone()),d=0;d<o.length-1;d++){for(t.isValidChild(c.name,o[d].name)?(l=i(o[d].clone()),c.append(l)):l=c,u=o[d].firstChild;u&&u!==o[d+1];)m=u.next,l.append(u),u=m;c=l}zg(t,h,v,s)?a.insert(r,o[0],!0):(a.insert(s,o[0],!0),a.insert(r,s)),a=o[0],(zg(t,h,v,a)||Eg(a,"br"))&&a.empty().remove()}else if(r.parent){if("li"===r.name){if((f=r.prev)&&("ul"===f.name||"ol"===f.name)){f.append(r);continue}if((f=r.next)&&("ul"===f.name||"ol"===f.name)){f.insert(r,f.firstChild,!0);continue}r.wrap(i(new wm("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(i(new wm("div",1))):b[r.name]?r.empty().remove():r.unwrap()}}}(b)),_&&("body"===A.name||c.isRootContent)&&function(){var n,r,a=A.firstChild,o=function(e){e&&((a=e.firstChild)&&3===a.type&&(a.value=a.value.replace(C,"")),(a=e.lastChild)&&3===a.type&&(a.value=a.value.replace(N,"")))};if(t.isValidChild(A.name,_.toLowerCase())){for(;a;)n=a.next,3===a.type||1===a.type&&"p"!==a.name&&!y[a.name]&&!a.attr("data-mce-type")?r?r.append(a):((r=I(_,1)).attr(e.forced_root_block_attrs),A.insert(r,a),r.append(a)):(o(r),r=null),a=n;o(r)}}(),!c.invalid){for(h in a)if(a.hasOwnProperty(h)){for(p=n[h],f=(l=a[h]).length;f--;)l[f].parent||l.splice(f,1);for(u=0,d=p.length;u<d;u++)p[u](l,h,c)}for(u=0,d=r.length;u<d;u++)if((p=r[u]).name in o){for(f=(l=o[p.name]).length;f--;)l[f].parent||l.splice(f,1);for(f=0,m=p.callbacks.length;f<m;f++)p.callbacks[f](l,p.name,c)}}return A}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,a){var o,i,s,c,l,u,d,f,m=e.length,p=ft.extend({},n.getBlockElements()),h=n.getNonEmptyElements(),v=n.getWhiteSpaceElements();for(p.body=1,o=0;o<m;o++)if(s=(i=e[o]).parent,p[i.parent.name]&&i===s.lastChild){for(l=i.prev;l;){if("span"!==(u=l.name)||"bookmark"!==l.attr("data-mce-type")){"br"===u&&(i=null);break}l=l.prev}i&&(i.remove(),zg(n,h,v,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&Lg(t,a,p,s)))}else{for(c=i;s&&s.firstChild===c&&s.lastChild===c&&(c=s,!p[s.name]);)s=s.parent;c===s&&!0!==t.padd_empty_with_br&&((f=new wm("#text",3)).value=" ",i.replace(f))}}),e.addAttributeFilter("href",function(e){var n,r,a=e.length;if(!t.allow_unsafe_link_target)for(;a--;){var o=e[a];"a"===o.name&&"_blank"===o.attr("target")&&o.attr("rel",(n=o.attr("rel"),r=n?ft.trim(n):"",/\b(noopener)\b/g.test(r)?r:function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")}(r)))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,a,o=e.length;o--;)if("a"===(a=e[o]).name&&a.firstChild&&!a.attr("href")){r=a.parent,t=a.lastChild;do{n=t.prev,r.insert(t,a),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var a=new wm("li",1);a.attr("style","list-style-type: none"),t.wrap(a)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,a,o,i,s,c,l=e.length,u=n.getValidClasses();l--;){for(r=(t=e[l]).attr("class").split(" "),i="",a=0;a<r.length;a++)o=r[a],c=!1,(s=u["*"])&&s[o]&&(c=!0),s=u[t.name],!c&&s&&s[o]&&(c=!0),c&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}}),Rg(e,t)}(s,e),function(e,t){t.inline_styles&&_g(e,t)}(s,e),s},Fg=function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var r,a,o=e.dom;t=t.cloneNode(!0);var i=document.implementation;return i.createHTMLDocument&&(r=i.createHTMLDocument(""),ft.each("BODY"===t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!==t.nodeName?r.body.firstChild:r.body,a=o.doc,o.doc=r),function(e,t){e.fire("PreProcess",t)}(e,Ne(Ne({},n),{node:t})),a&&(o.doc=a),t}(e,t,n):t},Hg=function(e,t,n){-1===ft.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},jg=function(e,t,n,r,a){return function(e,t,n){return!t.no_events&&e?function(e,t){return e.fire("PostProcess",t)}(e,Ne(Ne({},t),{content:n})).content:n}(e,a,function(e,t,n){return _m(e,t).serialize(n)}(t,n,r))},qg=function(e,t){var n=["data-mce-selected"],r=t&&t.dom?t.dom:es.DOM,a=t&&t.schema?t.schema:Wa(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;var o=Pg(e,a);!function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var a,o,i=e.length,s="data-mce-"+r,c=t.url_converter,l=t.url_converter_scope;i--;)void 0!==(o=(a=e[i]).attr(s))?(a.attr(r,o.length>0?o:null),a.attr(s,null)):(o=a.attr(r),"style"===r?o=n.serializeStyle(n.parseStyle(o),a.name):c&&(o=c.call(l,o,r,a.name)),a.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,a=e.length;a--;)"bookmark"!==(r=e[a]).attr("data-mce-type")||n.cleanup||(k.from(r.firstChild).exists(function(e){return!$r(e.value)})?r.unwrap():r.remove())}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=za.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,a,o,i=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)a=(r=e[i]).firstChild?r.firstChild.value:"","script"===n?((o=r.attr("type"))&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&a.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(a)+"\n// ]]>")):"xhtml"===t.element_format&&a.length>0&&(r.firstChild.value="\x3c!--\n"+s(a)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var r,a=e.length;a--;)r=e[a],t.preserve_cdata&&0===r.value.indexOf("[CDATA[")?(r.name="#cdata",r.type=4,r.value=n.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===r.value.indexOf("mce:protected ")&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){H(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}(o,e,r);return{schema:a,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(n,i){void 0===i&&(i={});var s=Ne({format:"html"},i),c=Fg(t,n,s),l=function(e,t,n){var r=Ur(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Vr(pt.fromDom(t))?r:ft.trim(r)}(r,c,s),u=function(e,t,n){var r=n.selection?Ne({forced_root_block:!1},n):n,a=e.parse(t,r);return function(e){var t=function(e){return e&&"br"===e.name},n=e.lastChild;if(t(n)){var r=n.prev;t(r)&&(n.remove(),r.remove())}}(a),a}(o,l,s);return"tree"===s.format?u:jg(t,e,a,u,s)},addRules:function(e){a.addValidElements(e)},setRules:function(e){a.setValidElements(e)},addTempAttr:m(Hg,o,n),getTempAttrs:function(){return n},getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters}},Wg=function(e,t){var n=qg(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},Yg=function(e,t){return void 0===t&&(t={}),function(e,t,n){return fg(e).editor.getContent(t,n)}(e,t,t.format?t.format:"html")},Gg=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){return fg(e).editor.setContent(t,n)}(e,t,n)},Kg=es.DOM,Qg=function(e){return k.from(e).each(function(e){return e.destroy()})},Xg=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&a&&Kg.remove(a.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&r&&function(e){Kg.setStyle(e.id,"display",e.orgDisplay)}(e),function(e){e.fire("detach")}(e),Kg.remove(e.getContainer()),Qg(t),Qg(n),e.destroy()}},Jg=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Qg(n),Qg(r)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),Kg.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())},Zg=Object.prototype.hasOwnProperty,eb=(Og=function(e,t){return T(e)&&T(t)?eb(e,t):t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var a=e[r];for(var o in a)Zg.call(a,o)&&(n[o]=Og(n[o],a[o]))}return n}),tb=Je().deviceType,nb=tb.isTouch(),rb=tb.isPhone(),ab=tb.isTablet(),ob=["lists","autolink","autosave"],ib={table_grid:!1,object_resizing:!1,resize:!1},sb=function(e){var t=D(e)?e.join(" "):e,n=F(N(t)?t.split(" "):[],Ve);return W(n,function(e){return e.length>0})},cb=function(e,t){var n=fe(t,function(t,n){return U(e,n)});return function(e,t){return{sections:d(e),settings:d(t)}}(n.t,n.f)},lb=function(e,t){return e.sections().hasOwnProperty(t)},ub=function(e,t){return he(e,"toolbar_mode").orThunk(function(){return he(e,"toolbar_drawer").map(function(e){return!1===e?"wrap":e})}).getOr(t)},db=function(e,t,n,r){return e&&function(e,t,n){var r=e.sections();return lb(e,t)&&r[t].theme===n}(t,"mobile","mobile")?W(r,m(U,ob)):e&&lb(t,"mobile")?r:n},fb=function(e,t,n,r){var a=sb(n.forced_plugins),o=sb(r.plugins),i=function(e,t){return lb(e,t)?e.sections()[t]:{}}(t,"mobile"),s=i.plugins?sb(i.plugins):o,c=function(e,t){return[].concat(sb(e)).concat(sb(t))}(a,db(e,t,o,s));if(st.browser.isIE()&&U(c,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return ft.extend(r,{plugins:c.join(" ")})},mb=function(e,t,n,r,a){var o=e?{mobile:function(e,t){var n={resize:!1,toolbar_mode:ub(e,"scrolling"),toolbar_sticky:!1};return Ne(Ne(Ne({},ib),n),t?{menubar:!1}:{})}(a.mobile||{},t)}:{},i=cb(["mobile"],eb(o,a)),s=ft.extend(n,r,i.settings(),function(e,t){return e&&lb(t,"mobile")}(e,i)?function(e,t,n){void 0===n&&(n={});var r=e.sections(),a=r.hasOwnProperty(t)?r[t]:{};return ft.extend({},n,a)}(i,"mobile"):{},{validate:!0,external_plugins:function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?ft.extend({},e.external_plugins,n):n}(r,i.settings())});return fb(e,i,r,s)},pb=function(e,t,n,r,a){var o=function(e,t,n,r,a){var o={id:t,theme:"silver",toolbar_mode:ub(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a};return Ne(Ne({},o),r?ib:{})}(a,t,n,nb,e);return mb(rb||ab,rb,o,r,a)},hb=function(e,t,n){return k.from(t.settings[n]).filter(e)},vb=function(e,t,n,r){var a,o=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var t={};return"string"==typeof e?H(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[ft.trim(n[0])]=ft.trim(n[1]):t[ft.trim(n[0])]=ft.trim(n[0])}):t=e,t}(o):"string"===r?hb(N,e,t).getOr(n):"number"===r?hb(z,e,t).getOr(n):"boolean"===r?hb(M,e,t).getOr(n):"object"===r?hb(T,e,t).getOr(n):"array"===r?hb(D,e,t).getOr(n):"string[]"===r?hb((a=N,function(e){return D(e)&&J(e,a)}),e,t).getOr(n):"function"===r?hb(E,e,t).getOr(n):o},gb=(Ag={},{add:function(e,t){Ag[e]=t},get:function(e){return Ag[e]?Ag[e]:{icons:{}}},has:function(e){return ve(Ag,e)}}),bb=function(e,t){return t.dom[e]},yb=function(e,t){return parseInt(Un(t,e),10)},wb=m(bb,"clientWidth"),xb=m(bb,"clientHeight"),kb=m(yb,"margin-top"),_b=m(yb,"margin-left"),Sb=function(e,t,n){var r,a=pt.fromDom(e.getBody()),o=e.inline?a:(r=a,pt.fromDom(It(r).dom.documentElement)),i=function(e,t,n,r){var a=function(e){return e.dom.getBoundingClientRect()}(t);return{x:n-(e?a.left+t.dom.clientLeft+_b(t):0),y:r-(e?a.top+t.dom.clientTop+kb(t):0)}}(e.inline,o,t,n);return function(e,t,n){var r=wb(e),a=xb(e);return t>=0&&n>=0&&t<=r&&n<=a}(o,i.x,i.y)},Cb=function(e){var t,n=e.inline?e.getBody():e.getContentAreaContainer();return(t=n,k.from(t).map(pt.fromDom)).map(tn).getOr(!1)};function Nb(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},r=function(){return k.from(t[0])},a=function(){t.length>0&&n().reposition(t)},o=function(e){Q(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},i=function(i,s){if(void 0===s&&(s=!0),!e.removed&&Cb(e))return s&&e.fire("BeforeOpenNotification",{notification:i}),K(t,function(e){return t=n().getArgs(e),r=i,!(t.type!==r.type||t.text!==r.text||t.progressBar||t.timeout||r.progressBar||r.timeout);var t,r}).getOrThunk(function(){e.editorManager.setActive(e);var s=n().open(i,function(){o(s),a(),r().fold(function(){return e.focus()},function(e){return wf(pt.fromDom(e.getEl()))})});return function(e){t.push(e)}(s),a(),e.fire("OpenNotification",Ne({},s)),s})};return function(e){e.on("SkinLoaded",function(){var t=Xc(e);t&&i({text:t,type:"warning",timeout:0},!1)}),e.on("ResizeEditor ResizeWindow NodeChange",function(){xr.requestAnimationFrame(a)}),e.on("remove",function(){H(t.slice(),function(e){n().close(e)})})}(e),{open:i,close:function(){r().each(function(e){n().close(e),o(e),a()})},getNotifications:function(){return t}}}var Tb=ds.PluginManager,Db=ds.ThemeManager;var Ib=function(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},a=function(n){t.push(n),function(t){e.fire("OpenWindow",{dialog:t})}(n)},o=function(n){!function(t){e.fire("CloseWindow",{dialog:t})}(n),0===(t=W(t,function(e){return e!==n})).length&&e.focus()},i=function(t){e.editorManager.setActive(e),Vf(e);var n=t();return a(n),n};return e.on("remove",function(){H(t,function(e){n().close(e)})}),{open:function(e,t){return i(function(){return n().open(e,t,o)})},openUrl:function(e){return i(function(){return n().openUrl(e,o)})},alert:function(e,t,a){n().alert(e,r(a||this,t))},confirm:function(e,t,a){n().confirm(e,r(a||this,t))},close:function(){k.from(t[t.length-1]).each(function(e){n().close(e),o(e)})}}},Mb=function(e,t){e.notificationManager.open({type:"error",text:t})},Ob=function(e,t){e._skinLoaded?Mb(e,t):e.on("SkinLoaded",function(){Mb(e,t)})},Ab=function(e,t,n){!function(e,t,n){e.fire(t,n)}(e,t,{message:n}),console.error(n)},Lb=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},Eb=function(e,t,n){Ab(e,"PluginLoadError",Lb("plugin",t,n))},zb=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,Te([e],t)):r.log.apply(r,Te([e],t)))},Rb=function(e){var t=function(e){var t=e.getParam("content_css");return N(t)?F(t.split(","),Ve):D(t)?t:!1===t||e.inline?[]:["default"]}(e),n=e.editorManager.baseURL+"/skins/content",r="content"+e.editorManager.suffix+".css",a=!0===e.inline;return F(t,function(t){return function(e){return/^[a-z0-9\-]+$/i.test(e)}(t)&&!a?n+"/"+t+"/"+r:e.documentBaseURI.toAbsolute(t)})};function Vb(e,t){var n={},r=function(e,n,r,a){var o=new XMLHttpRequest;o.open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=function(e){a(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){if(o.status<200||o.status>=300)r("HTTP Error: "+o.status);else{var e,a,i=JSON.parse(o.responseText);if(i&&"string"==typeof i.location)n((e=t.basePath,a=i.location,e?e.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a));else r("Invalid JSON: "+o.responseText)}};var i=new FormData;i.append("file",e.blob(),e.filename()),o.send(i)},a=function(e,t){return{url:t,blobInfo:e,status:!0}},o=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},i=function(e,t){ft.each(n[e],function(e){e(t)}),delete n[e]},s=function(r,s){return r=ft.grep(r,function(t){return!e.isUploaded(t.blobUri())}),gr.all(ft.map(r,function(r){return e.isPending(r.blobUri())?function(e){var t=e.blobUri();return new gr(function(e){n[t]=n[t]||[],n[t].push(e)})}(r):function(t,n,r){return e.markPending(t.blobUri()),new gr(function(s){var c;try{var l=function(){c&&c.close()};n(t,function(n){l(),e.markUploaded(t.blobUri(),n),i(t.blobUri(),a(t,n)),s(a(t,n))},function(n,r){var a=r||{};l(),e.removeFailed(t.blobUri()),i(t.blobUri(),o(t,n,a)),s(o(t,n,a))},function(e){e<0||e>100||(c||(c=r()),c.progressBar.value(e))})}catch(e){s(o(t,e.message,{}))}})}(r,t.handler,s)}))};return!1===E(t.handler)&&(t.handler=r),{upload:function(e,n){return t.url||t.handler!==r?s(e,n):new gr(function(e){e([])})}}}var Bb=0,$b=function(e){return e+Bb+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t},Ub=function(e){var t=os(null);e.on("change AddUndo",function(e){t.set(Ne({},e.level))});return{fireIfChanged:function(){var n=e.undoManager.data;re(n).filter(function(e){return!rg(t.get(),e)}).each(function(t){e.setDirty(!0),e.fire("change",{level:t,lastLevel:te(n,n.length-2).getOrNull()})})}}},Pb=function(e){var t,n,r,a,o,i,s,c,l,u=(t=[],n=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,n=e.id||$b("blobid"),r=e.name||n,a=e.blob;return{id:d(n),name:d(r),filename:d(e.filename||r+"."+(t=a.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat")),blob:d(a),base64:d(e.base64),blobUri:d(e.blobUri||URL.createObjectURL(a)),uri:d(e.uri)}},{create:function(e,t,r,a,o){if(N(e))return n({id:e,name:a,filename:o,blob:t,base64:r});if(T(e))return n(e);throw new Error("Unknown input type")},add:function(e){a(e.id())||t.push(e)},get:a=function(e){return r(function(t){return t.id()===e})},getByUri:function(e){return r(function(t){return t.blobUri()===e})},getByData:function(e,t){return r(function(n){return n.base64()===e&&n.blob().type===t})},findFirst:r=function(e){return K(t,e).getOrUndefined()},removeByUri:function(e){t=W(t,function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){H(t,function(e){URL.revokeObjectURL(e.blobUri())}),t=[]}}),f=(s={},c=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:l=function(e){return e in s},getResultUri:function(e){var t=s[e];return t?t.resultUri:null},isPending:function(e){return!!l(e)&&1===s[e].status},isUploaded:function(e){return!!l(e)&&2===s[e].status},markPending:function(e){s[e]=c(1,null)},markUploaded:function(e,t){s[e]=c(2,t)},removeFailed:function(e){delete s[e]},destroy:function(){s={}}}),m=[],p=Ub(e),h=function(t){return function(n){return e.selection?t(n):[]}},v=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},g=function(e,t,n){var r='src="'+n+'"'+(n===st.transparentSrc?' data-mce-placeholder="1"':"");return e=v(e,'src="'+t+'"',r),e=v(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},y=function(t,n){H(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=F(e.fragments,function(e){return g(e,t,n)}):e.content=g(e.content,t,n)})},w=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},x=function(t,n){var r,a=e.convertURL(n,"src");y(t.src,n),e.$(t).attr({src:function(e){return e.getParam("images_reuse_filename",!1,"boolean")}(e)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":a})},k=function(t){return o||(o=Vb(f,{url:function(e){return e.getParam("images_upload_url","","string")}(e),basePath:function(e){return e.getParam("images_upload_base_path","","string")}(e),credentials:function(e){return e.getParam("images_upload_credentials",!1,"boolean")}(e),handler:function(e){return e.getParam("images_upload_handler",null,"function")}(e)})),C().then(h(function(n){var r=F(n,function(e){return e.blobInfo});return o.upload(r,w).then(h(function(r){var a=[],o=F(r,function(t,r){var o=n[r].blobInfo,i=n[r].image;return t.status&&function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")}(e)?(u.removeByUri(i.src),x(i,t.url)):t.error&&(t.error.options.remove&&(y(i.getAttribute("src"),st.transparentSrc),a.push(i)),function(e,t){Ob(e,ls.translate(["Failed to upload image: {0}",t]))}(e,t.error.message)),{element:i,status:t.status,uploadUri:t.url,blobInfo:o}});return o.length>0&&p.fireIfChanged(),a.length>0&&(dg(e)?console.error("Removing images on failed uploads is currently unsupported for RTC"):e.undoManager.transact(function(){H(a,function(t){e.dom.remove(t),u.removeByUri(t.src)})})),t&&t(o),o}))}))},_=function(t){if(jc(e))return k(t)},S=function(t){return!1!==J(m,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||function(e){return e.getParam("images_dataimg_filter",b,"function")}(e)(t))},C=function(){return i||(i=function(e,t){var n={};return{findAll:function(r,a){a||(a=b);var o=W(Mg(r),function(t){var n=t.src;return!!st.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===st.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&a(t):0===n.indexOf("data:")&&a(t))}),i=F(o,function(e){if(void 0!==n[e.src])return new gr(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var r=new gr(function(n,r){Ig(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return gr.all(i)}}}(f,u)),i.findAll(e.getBody(),S).then(h(function(t){return t=W(t,function(t){return"string"!=typeof t||(Ob(e,t),!1)}),H(t,function(e){y(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},D=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=f.getResultUri(n);if(r)return'src="'+r+'"';var a=u.getByUri(n);return a||(a=G(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':t})};return e.on("SetContent",function(){jc(e)?_():C()}),e.on("RawSaveContent",function(e){e.content=D(e.content)}),e.on("GetContent",function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=D(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){H(e,function(e){var t=e.attr("src");if(!u.getByUri(t)){var n=f.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:u,addFilter:function(e){m.push(e)},uploadImages:k,uploadImagesAuto:_,scanForImages:C,destroy:function(){u.destroy(),f.destroy(),i=o=null}}},Fb=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return pn(e)&&e.hasAttribute("href")},onformat:function(t,n,r){ft.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ft.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t};var Hb,jb=ft.each,qb=es.DOM,Wb=function(e,t){var n,r,a,o=t&&t.schema||Wa({}),i=function(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t=qb.create(r.name);return function(e,t){t.classes.length&&qb.addClass(e,t.classes.join(" ")),qb.setAttribs(e,t.attrs)}(t,r),t},s=function(e,t,n){var r,a,c=t.length>0&&t[0],l=c&&c.name,u=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),a=r&&r.parentsRequired;return!(!a||!a.length)&&(t&&-1!==ft.inArray(a,t)?t:a[0])}(e,l);if(u)l===u?(a=t[0],t=t.slice(1)):a=u;else if(c)a=t[0],t=t.slice(1);else if(!n)return e;return a&&(r=i(a)).appendChild(e),n&&(r||(r=qb.create("div")).appendChild(e),ft.each(n,function(t){var n=i(t);r.insertBefore(n,e)})),s(r,t,a&&a.siblings)};return e&&e.length?(r=e[0],n=i(r),(a=qb.create("div")).appendChild(s(n,e.slice(1),r.siblings)),a):""},Yb=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=ft.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,a,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==ft.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===a){var i=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(n.attrs[i[1]]=i[2])}return""})),n.name=t||"div",n},Gb=function(e,t){var n,r,a,o="",i=function(e){var t=e.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return N(t)?t:""}(e);if(""===i)return"";var s=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){var c=he(t,"preview");if(c.is(!1))return"";i=c.getOr(i)}n=t.block||t.inline||"span";var l,u=(l=t.selector)&&"string"==typeof l?(l=(l=l.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ft.map(l.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=ft.map(e.split(/(?:~\+|~|\+)/),Yb),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[];u.length?(u[0].name||(u[0].name=n),n=t.selector,r=Wb(u,e)):r=Wb([n],e);var d=qb.select(n,r)[0]||r.firstChild;return jb(t.styles,function(e,t){var n=s(e);n&&qb.setStyle(d,t,n)}),jb(t.attributes,function(e,t){var n=s(e);n&&qb.setAttrib(d,t,n)}),jb(t.classes,function(e){var t=s(e);qb.hasClass(d,t)||qb.addClass(d,t)}),e.fire("PreviewFormats"),qb.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=qb.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,jb(i.split(" "),function(t){var n=qb.getStyle(d,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=qb.getStyle(e.getBody(),t,!0),"#ffffff"===qb.toHex(n).toLowerCase())||"color"===t&&"#000000"===qb.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(o+="padding:0 2px;"),o+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),qb.remove(r),o},Kb=function(e){var t=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?ft.each(e,function(e,t){n(t,e)}):(D(r)||(r=[r]),ft.each(r,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=r))};return n(Fb(e.dom)),n(el(e)),{get:function(e){return e?t[e]:t},has:function(e){return ve(t,e)},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}(e),n=os(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),Yh(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function(t,n,r){!function(e,t,n,r){mg(e).formatter.apply(t,n,r)}(e,t,n,r)},remove:function(t,n,r,a){!function(e,t,n,r,a){mg(e).formatter.remove(t,n,r,a)}(e,t,n,r,a)},toggle:function(t,n,r){!function(e,t,n,r){mg(e).formatter.toggle(t,n,r)}(e,t,n,r)},match:function(t,n,r){return function(e,t,n,r){return mg(e).formatter.match(t,n,r)}(e,t,n,r)},closest:function(t){return function(e,t){return mg(e).formatter.closest(t)}(e,t)},matchAll:function(t,n){return function(e,t,n){return mg(e).formatter.matchAll(t,n)}(e,t,n)},matchNode:function(t,n,r,a){return function(e,t,n,r,a){return mg(e).formatter.matchNode(t,n,r,a)}(e,t,n,r,a)},canApply:function(t){return function(e,t){return mg(e).formatter.canApply(t)}(e,t)},formatChanged:function(t,r,a){return function(e,t,n,r,a){return void 0===a&&(a=!1),mg(e).formatter.formatChanged(t,n,r,a)}(e,n,t,r,a)},getCssText:m(Gb,e)}},Qb=function(e){var t=os(k.none()),n=os(0),r=os(0),a={data:[],typing:!1,beforeChange:function(){!function(e,t,n){mg(e).undoManager.beforeChange(t,n)}(e,n,t)},add:function(o,i){return function(e,t,n,r,a,o,i){return mg(e).undoManager.addUndoLevel(t,n,r,a,o,i)}(e,a,r,n,t,o,i)},undo:function(){return function(e,t,n,r){return mg(e).undoManager.undo(t,n,r)}(e,a,n,r)},redo:function(){return function(e,t,n){return mg(e).undoManager.redo(t,n)}(e,r,a.data)},clear:function(){!function(e,t,n){mg(e).undoManager.clear(t,n)}(e,a,r)},reset:function(){!function(e,t){mg(e).undoManager.reset(t)}(e,a)},hasUndo:function(){return function(e,t,n){return mg(e).undoManager.hasUndo(t,n)}(e,a,r)},hasRedo:function(){return function(e,t,n){return mg(e).undoManager.hasRedo(t,n)}(e,a,r)},transact:function(t){return function(e,t,n,r){return mg(e).undoManager.transact(t,n,r)}(e,a,n,t)},ignore:function(t){!function(e,t,n){mg(e).undoManager.ignore(t,n)}(e,n,t)},extra:function(t,n){!function(e,t,n,r,a){mg(e).undoManager.extra(t,n,r,a)}(e,a,r,t,n)}};return dg(e)||function(e,t,n){var r=os(!1),a=function(e){og(t,!1,n),t.add({},e)};e.on("init",function(){t.add()}),e.on("BeforeExecCommand",function(e){var r=e.command.toLowerCase();"undo"!==r&&"redo"!==r&&"mcerepaint"!==r&&(ig(t,n),t.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command.toLowerCase();"undo"!==t&&"redo"!==t&&"mcerepaint"!==t&&a(e)}),e.on("ObjectResizeStart cut",function(){t.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",function(n){var o=n.keyCode;n.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey)&&(a(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),r.get()&&t.typing&&!1===rg(Zv(e),t.data[0])&&(!1===e.isDirty()&&(e.setDirty(!0),e.fire("change",{level:t.data[0],lastLevel:null})),e.fire("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",function(e){var o=e.keyCode;if(!e.isDefaultPrevented())if(o>=33&&o<=36||o>=37&&o<=40||45===o)t.typing&&a(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;!(o<16||o>20)||224===o||91===o||t.typing||i||(t.beforeChange(),og(t,!0,n),t.add({},e),r.set(!0))}}),e.on("mousedown",function(e){t.typing&&a(e)});e.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||function(e){return"insertText"===e.inputType&&null===e.data}(e)||function(e){return"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType}(e))&&a(e)}),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()})}(e,a,n),function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")}(e),a},Xb=[9,27,Ad.HOME,Ad.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ad.DOWN,Ad.UP,Ad.LEFT,Ad.RIGHT].concat(st.browser.isFirefox()?[224]:[]),Jb=function(e){return"keydown"===e.type||"keyup"===e.type},Zb=function(e){var t=e.keyCode;return t===Ad.BACKSPACE||t===Ad.DELETE},ey=function(e){var t=e.dom,n=Fc(e),r=function(e){return e.getParam("placeholder",$c.getAttrib(e.getElement(),"placeholder"),"string")}(e),a=function(o,i){if(!function(e){if(Jb(e)){var t=e.keyCode;return!Zb(e)&&(Ad.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||U(Xb,t))}return!1}(o)){var s=e.getBody(),c=!function(e){return Jb(e)&&!(Zb(e)||"keyup"===e.type&&229===e.keyCode)}(o)&&function(e,t,n){if(ga(pt.fromDom(t),!1)){var r=""===n,a=t.firstElementChild;return!a||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(r?!e.isBlock(a):n===a.nodeName.toLowerCase())}return!1}(t,s,n);(""!==t.getAttrib(s,"data-mce-placeholder")!==c||i)&&(t.setAttrib(s,"data-mce-placeholder",c?r:null),t.setAttrib(s,"aria-placeholder",c?r:null),function(e,t){e.fire("PlaceholderToggle",{state:t})}(e,c),e.on(c?"keydown":"keyup",a),e.off(c?"keyup":"keydown",a))}};r&&e.on("init",function(t){a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",function(t){return xr.setEditorTimeout(e,function(){return a(t)})})})},ty=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ny=function(e,t){return vt(pt.fromDom(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},ry=function(e){return"rtl"===es.DOM.getStyle(e,"direction",!0)||(t=e.textContent,ty.test(t));var t},ay=function(e,t,n){var r=function(e,t,n){return W(es.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return k.from(r[r.length-1])},oy=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?jr(n)?kn(n.nextSibling)?vc(n.nextSibling,0):vc.after(n):Yr(t)?vc(n,r+1):t:jr(n)?kn(n.previousSibling)?vc(n.previousSibling,n.previousSibling.data.length):vc.before(n):Gr(t)?vc(n,r-1):t},iy=m(oy,!0),sy=m(oy,!1),cy=function(e,t){return wt(e,t)?fr(t,function(e){return Ar(e)||Er(e)},function(e){return function(t){return bt(e,pt.fromDom(t.dom.parentNode))}}(e)):k.none()},ly=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},uy=function(e,t){return{from:e,to:t}},dy=function(e,t){var n=pt.fromDom(e),r=pt.fromDom(t.container());return cy(n,r).map(function(e){return function(e,t){return{block:e,position:t}}(e,t)})},fy=function(e,t,n){var r=dy(e,vc.fromRangeStart(n)),a=r.bind(function(n){return cu(t,e,n.position).bind(function(n){return dy(e,n).map(function(n){return function(e,t,n){return Nn(n.position.getNode())&&!1===ga(n.block)?du(!1,n.block.dom).bind(function(r){return r.isEqual(n.position)?cu(t,e,r).bind(function(t){return dy(e,t)}):k.some(n)}).getOr(n):n}(e,t,n)})})});return Bs(r,a,uy).filter(function(e){return function(e){return!1===bt(e.from.block,e.to.block)}(e)&&function(e){return Ot(e.from.block).bind(function(t){return Ot(e.to.block).filter(function(e){return bt(t,e)})}).isSome()}(e)&&function(e){return!1===In(e.from.block.dom)&&!1===In(e.to.block.dom)}(e)})},my=function(e){var t=Rt(e);return Q(t,Ir).fold(function(){return t},function(e){return t.slice(0,e)})},py=function(e){var t=my(e);return H(t,Zt),t},hy=function(e,t){var n=op(t,e);return K(n.reverse(),function(e){return ga(e)}).each(Zt)},vy=function(e,t,n,r){if(ga(n))return tp(n),pu(n.dom);0===W(Et(r),function(e){return!ga(e)}).length&&ga(t)&&Yt(r,pt.fromTag("br"));var a=mu(n.dom,vc.before(r.dom));return H(py(t),function(e){Yt(r,e)}),hy(e,t),a},gy=function(e,t,n){if(ga(n))return Zt(n),ga(t)&&tp(t),pu(t.dom);var r=hu(n.dom);return H(py(t),function(e){Qt(n,e)}),hy(e,t),r},by=function(e,t){return wt(t,e)?function(e,t){var n=op(t,e);return k.from(n[n.length-1])}(t,e):k.none()},yy=function(e,t){du(e,t.dom).map(function(e){return e.getNode()}).map(pt.fromDom).filter(Or).each(Zt)},wy=function(e,t,n){return yy(!0,t),yy(!1,n),by(t,n).fold(m(gy,e,t,n),m(vy,e,t,n))},xy=function(e,t,n,r){return t?wy(e,r,n):wy(e,n,r)},ky=function(e,t){var n=pt.fromDom(e.getBody()),r=function(e,t,n){return n.collapsed?fy(e,t,n):k.none()}(n.dom,t,e.selection.getRng()).bind(function(e){return xy(n,t,e.from.block,e.to.block)});return r.each(function(t){e.selection.setRng(t.toRange())}),r.isSome()},_y=function(e,t){var n=pt.fromDom(t),r=m(bt,e);return dr(n,Rr,r).isSome()},Sy=function(e,t){var n=mu(e.dom,vc.fromRangeStart(t)).isNone(),r=fu(e.dom,vc.fromRangeEnd(t)).isNone();return!function(e,t){return _y(e,t.startContainer)||_y(e,t.endContainer)}(e,t)&&n&&r},Cy=function(e){var t=pt.fromDom(e.getBody()),n=e.selection.getRng();return Sy(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Bs(cy(e,pt.fromDom(n.startContainer)),cy(e,pt.fromDom(n.endContainer)),function(r,a){return!1===bt(r,a)&&(n.deleteContents(),xy(e,!0,r,a).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)}(t,e.selection)},Ny=function(e,t){return!e.selection.isCollapsed()&&Cy(e)},Ty=Dn,Dy=In,Iy=function(e,t,n,r,a){return k.from(t._selectionOverrides.showCaret(e,n,r,a))},My=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?k.none():k.some(function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t))},Oy=function(e,t,n){var r=Ul(1,e.getBody(),t),a=vc.fromRangeStart(r),o=a.getNode();if(yl(o))return Iy(1,e,o,!a.isAtEnd(),!1);var i=a.getNode(!0);if(yl(i))return Iy(1,e,i,!1,!1);var s=e.dom.getParent(a.getNode(),function(e){return Dy(e)||Ty(e)});return yl(s)?Iy(1,e,s,!1,n):k.none()},Ay=function(e,t,n){return t.collapsed?Oy(e,t,n).getOr(t):t},Ly=function(e){return Jm(e)||Gm(e)},Ey=function(e){return Zm(e)||Km(e)},zy=function(e,t,n,r,a,o){return Iy(r,e,o.getNode(!a),a,!0).each(function(n){if(t.collapsed){var r=t.cloneRange();a?r.setEnd(n.startContainer,n.startOffset):r.setStart(n.endContainer,n.endOffset),r.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),function(e,t){kn(t)&&0===t.data.length&&e.remove(t)}(e.dom,n),!0},Ry=function(e,t){return function(e,t){var n=e.selection.getRng();if(!kn(n.commonAncestorContainer))return!1;var r=t?hc.Forwards:hc.Backwards,a=ru(e.getBody()),o=m(jl,t?a.next:a.prev),i=t?Ly:Ey,s=Fl(r,e.getBody(),n),c=oy(t,o(s));if(!c||!ql(s,c))return!1;if(i(c))return zy(e,n,s.getNode(),r,t,c);var l=o(c);return!!(l&&i(l)&&ql(c,l))&&zy(e,n,s.getNode(),r,t,l)}(e,t)},Vy=sr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),By=function(e,t,n,r){var a=r.getNode(!1===t);return cy(pt.fromDom(e),pt.fromDom(n.getNode())).map(function(e){return ga(e)?Vy.remove(e.dom):Vy.moveToElement(a)}).orThunk(function(){return k.some(Vy.moveToElement(a))})},$y=function(e,t,n){return cu(t,e,n).bind(function(r){return a=r.getNode(),Rr(pt.fromDom(a))||Er(pt.fromDom(a))?k.none():function(e,t,n,r){var a=function(t){return Mr(pt.fromDom(t))&&!Ll(n,r,e)};return Pl(!t,n).fold(function(){return Pl(t,r).fold(g,a)},a)}(e,t,n,r)?k.none():t&&In(r.getNode())?By(e,t,n,r):!1===t&&In(r.getNode(!0))?By(e,t,n,r):t&&Zm(n)?k.some(Vy.moveToPosition(r)):!1===t&&Jm(n)?k.some(Vy.moveToPosition(r)):k.none();var a})},Uy=function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return pn(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&In(t.nextSibling)?k.some(Vy.moveToElement(t.nextSibling)):!1===e&&In(t.previousSibling)?k.some(Vy.moveToElement(t.previousSibling)):k.none()}(t,n.getNode(!1===t)).fold(function(){return $y(e,t,n)},k.some):$y(e,t,n).bind(function(t){return function(e,t,n){return n.fold(function(e){return k.some(Vy.remove(e))},function(e){return k.some(Vy.moveToElement(e))},function(n){return Ll(t,n,e)?k.none():k.some(Vy.moveToPosition(n))})}(e,n,t)})},Py=function(e,t){return k.from(Md(e.getBody(),t))},Fy=function(e,t){var n=e.selection.getNode();return Py(e,n).filter(In).fold(function(){return function(e,t,n){var r=Ul(t?1:-1,e,n),a=vc.fromRangeStart(r),o=pt.fromDom(e);return!1===t&&Zm(a)?k.some(Vy.remove(a.getNode(!0))):t&&Jm(a)?k.some(Vy.remove(a.getNode())):!1===t&&Jm(a)&&gp(o,a)?bp(o,a).map(function(e){return Vy.remove(e.getNode())}):t&&Zm(a)&&vp(o,a)?yp(o,a).map(function(e){return Vy.remove(e.getNode())}):Uy(e,t,a)}(e.getBody(),t,e.selection.getRng()).exists(function(n){return n.fold(function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Gp(e,t,pt.fromDom(n)),!0}}(e,t),function(e,t){return function(n){var r=t?vc.before(n):vc.after(n);return e.selection.setRng(r.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))})},b)},Hy=function(e,t){var n=e.selection.getNode();return!!In(n)&&Py(e,n.parentNode).filter(In).fold(function(){var n;return n=pt.fromDom(e.getBody()),H(ks(n,".mce-offscreen-selection"),Zt),Gp(e,t,pt.fromDom(e.selection.getNode())),ly(e),!0},function(){return!0})},jy=function(e){var t=e.dom,n=e.selection,r=Md(e.getBody(),n.getNode());if(Dn(r)&&t.isBlock(r)&&t.isEmpty(r)){var a=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(a),n.setRng(vc.before(a).toRange())}return!0},qy=function(e,t){return e.selection.isCollapsed()?Fy(e,t):Hy(e,t)},Wy=function(e,t){return!!e.selection.isCollapsed()&&function(e,t){var n=vc.fromRangeStart(e.selection.getRng());return cu(t,e.getBody(),n).filter(function(e){return t?Wm(e):Ym(e)}).bind(function(e){return k.from(El(t?0:-1,e))}).exists(function(t){return e.selection.select(t),!0})}(e,t)},Yy=kn,Gy=function(e){return Yy(e)&&e.data[0]===Br},Ky=function(e){return Yy(e)&&e.data[e.data.length-1]===Br},Qy=function(e){return e.ownerDocument.createTextNode(Br)},Xy=function(e,t){return e?function(e){if(Yy(e.previousSibling))return Ky(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(Br),e.previousSibling);if(Yy(e))return Gy(e)?e:(e.insertData(0,Br),e);var t=Qy(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(Yy(e.nextSibling))return Gy(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,Br),e.nextSibling);if(Yy(e))return Ky(e)?e:(e.appendData(Br),e);var t=Qy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},Jy=m(Xy,!0),Zy=m(Xy,!1),ew=function(e,t){return kn(e.container())?Xy(t,e.container()):Xy(t,e.getNode())},tw=function(e,t){var n=t.get();return n&&e.container()===n&&jr(n)},nw=function(e,t){return t.fold(function(t){dl(e.get());var n=Jy(t);return e.set(n),k.some(vc(n,n.length-1))},function(t){return pu(t).map(function(t){if(tw(t,e))return vc(e.get(),1);dl(e.get());var n=ew(t,!0);return e.set(n),vc(n,1)})},function(t){return hu(t).map(function(t){if(tw(t,e))return vc(e.get(),e.get().length-1);dl(e.get());var n=ew(t,!1);return e.set(n),vc(n,n.length-1)})},function(t){dl(e.get());var n=Zy(t);return e.set(n),k.some(vc(n,1))})},rw=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return k.none()},aw=sr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ow=function(e,t){var n=Al(t,e);return n||e},iw=function(e,t,n){var r=iy(n),a=ow(t,r.container());return ay(e,a,r).fold(function(){return fu(a,r).bind(m(ay,e,a)).map(function(e){return aw.before(e)})},k.none)},sw=function(e,t){return null===gu(e,t)},cw=function(e,t,n){return ay(e,t,n).filter(m(sw,t))},lw=function(e,t,n){var r=sy(n);return cw(e,t,r).bind(function(e){return mu(e,r).isNone()?k.some(aw.start(e)):k.none()})},uw=function(e,t,n){var r=iy(n);return cw(e,t,r).bind(function(e){return fu(e,r).isNone()?k.some(aw.end(e)):k.none()})},dw=function(e,t,n){var r=sy(n),a=ow(t,r.container());return ay(e,a,r).fold(function(){return mu(a,r).bind(m(ay,e,a)).map(function(e){return aw.after(e)})},k.none)},fw=function(e){return!1===ry(pw(e))},mw=function(e,t,n){return rw([iw,lw,uw,dw],[e,t,n]).filter(fw)},pw=function(e){return e.fold(f,f,f,f)},hw=function(e){return e.fold(d("before"),d("start"),d("end"),d("after"))},vw=function(e){return e.fold(aw.before,aw.before,aw.after,aw.after)},gw=function(e){return e.fold(aw.start,aw.start,aw.end,aw.end)},bw=function(e,t,n,r,a,o){return Bs(ay(t,n,r),ay(t,n,a),function(t,r){return t!==r&&function(e,t,n){var r=Al(t,e),a=Al(n,e);return r&&r===a}(n,t,r)?aw.after(e?t:r):o}).getOr(o)},yw=function(e,t){return e.fold(b,function(e){return r=t,!(hw(n=e)===hw(r)&&pw(n)===pw(r));var n,r})},ww=function(e,t){return e?t.fold(u(k.some,aw.start),k.none,u(k.some,aw.after),k.none):t.fold(k.none,u(k.some,aw.before),k.none,u(k.some,aw.end))},xw=function(e,t,n,r){var a=oy(e,r),o=mw(t,n,a);return mw(t,n,a).bind(m(ww,e)).orThunk(function(){return function(e,t,n,r,a){var o=oy(e,a);return cu(e,n,o).map(m(oy,e)).fold(function(){return r.map(vw)},function(a){return mw(t,n,a).map(m(bw,e,t,n,o,a)).filter(m(yw,r))}).filter(fw)}(e,t,n,o,r)})},kw=(m(xw,!1),m(xw,!0),function(e,t,n){var r=e?1:-1;return t.setRng(vc(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}),_w=function(e,t){var n=t.selection.getRng(),r=e?vc.fromRangeEnd(n):vc.fromRangeStart(n);return!!function(e){return E(e.selection.getSel().modify)}(t)&&(e&&Yr(r)?kw(!0,t.selection,r):!(e||!Gr(r))&&kw(!1,t.selection,r))},Sw=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Cw=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Nw=function(e,t,n){return nw(t,n).map(function(t){return Sw(e,t),n})},Tw=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=vc.fromRangeStart(e.selection.getRng());vc.isTextPosition(n)&&!1===function(e){return Yr(e)||Gr(e)}(n)&&(Sw(e,ul(t.get(),n)),t.set(null))}},Dw=function(e,t,n){return!!Zc(e)&&function(e,t,n){var r=e.getBody(),a=vc.fromRangeStart(e.selection.getRng()),o=m(ny,e);return xw(n,o,r,a).bind(function(n){return Nw(e,t,n)})}(e,t,n).isSome()},Iw=function(e,t,n){return!!Zc(t)&&_w(e,t)},Mw=function(e){var t=os(null),n=m(ny,e);return e.on("NodeChange",function(r){var a,o,i,s,c,l;!Zc(e)||st.browser.isIE()&&r.initial||(a=n,o=e.dom,i=r.parents,s=F(ks(pt.fromDom(o.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(e){return e.dom}),c=W(s,a),l=W(i,a),H(ee(c,l),m(Cw,!1)),H(ee(l,c),m(Cw,!0)),Tw(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var a=W(r,e);H(a,function(r){var a=vc.fromRangeStart(t.selection.getRng());mw(e,t.getBody(),a).bind(function(e){return Nw(t,n,e)})})}}(n,e,t,r.parents))}),t},Ow=m(Iw,!0),Aw=m(Iw,!1),Lw=function(e,t){return function(n){return nw(t,n).exists(function(t){return Sw(e,t),!0})}},Ew=function(e,t,n,r){var a=e.getBody(),o=m(ny,e);e.undoManager.ignore(function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,r)),e.execCommand("Delete"),mw(o,a,vc.fromRangeStart(e.selection.getRng())).map(gw).map(Lw(e,t))}),e.nodeChanged()},zw=function(e,t,n,r){var a=function(e,t){var n=Al(t,e);return n||e}(e.getBody(),r.container()),o=m(ny,e),i=mw(o,a,r);return i.bind(function(e){return n?e.fold(d(k.some(gw(e))),k.none,d(k.some(vw(e))),k.none):e.fold(k.none,d(k.some(vw(e))),k.none,d(k.some(gw(e))))}).map(Lw(e,t)).getOrThunk(function(){var s=lu(n,a,r),c=s.bind(function(e){return mw(o,a,e)});return Bs(i,c,function(){return ay(o,a,r).exists(function(t){return!!function(e){return Bs(pu(e),hu(e),function(t,n){var r=oy(!0,t),a=oy(!1,n);return fu(e,r).forall(function(e){return e.isEqual(a)})}).getOr(!0)}(t)&&(Gp(e,n,pt.fromDom(t)),!0)})}).orThunk(function(){return c.bind(function(a){return s.map(function(a){return n?Ew(e,t,r,a):Ew(e,t,a,r),!0})})}).getOr(!1)})},Rw=function(e,t,n){if(e.selection.isCollapsed()&&Zc(e)){var r=vc.fromRangeStart(e.selection.getRng());return zw(e,t,n,r)}return!1},Vw=function(e){return 1===Rt(e).length},Bw=function(e,t,n,r){var a=m(Gh,t),o=F(W(r,a),function(e){return e.dom});if(0===o.length)Gp(t,e,n);else{var i=function(e,t){var n=Ph(!1),r=qh(t,n.dom);return Yt(pt.fromDom(e),n),Zt(pt.fromDom(e)),vc(r,0)}(n.dom,o);t.selection.setRng(i.toRange())}},$w=function(e,t){var n=pt.fromDom(e.getBody()),r=pt.fromDom(e.selection.getStart()),a=W(function(e,t){var n=op(t,e);return Q(n,Ir).fold(d(n),function(e){return n.slice(0,e)})}(n,r),Vw);return re(a).exists(function(n){var r,o=vc.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return Bs(pu(n),hu(n),function(r,a){var o=oy(!0,r),i=oy(!1,a),s=oy(!1,t);return e?fu(n,s).exists(function(e){return e.isEqual(i)&&t.isEqual(o)}):mu(n,s).exists(function(e){return e.isEqual(o)&&t.isEqual(i)})}).getOr(!0)}(t,o,n.dom)||(r=n,vu(r.dom)&&$h(r.dom)))&&(Bw(t,e,n,a),!0)})},Uw=function(e,t){return!!e.selection.isCollapsed()&&$w(e,t)},Pw=function(e,t,n){return e._selectionOverrides.hideFakeCaret(),Gp(e,t,pt.fromDom(n)),!0},Fw=function(e,t){return e.selection.isCollapsed()?function(e,t){var n=t?Gm:Km,r=t?hc.Forwards:hc.Backwards,a=Fl(r,e.getBody(),e.selection.getRng());return n(a)?Pw(e,t,a.getNode(!t)):k.from(oy(t,a)).filter(function(e){return n(e)&&ql(a,e)}).exists(function(n){return Pw(e,t,n.getNode(!t))})}(e,t):function(e,t){var n=e.selection.getNode();return!!On(n)&&Pw(e,t,n)}(e,t)},Hw=function(e){var t=parseInt(e,10);return isNaN(t)?0:t},jw=function(e,t){return(e||"table"===xt(t)?"margin":"padding")+("rtl"===Un(t,"direction")?"-right":"-left")},qw=function(e){var t=Yw(e);return!e.mode.isReadOnly()&&(t.length>1||function(e,t){return J(t,function(t){var n=jw(Gc(e),t),r=Fn(t,n).map(Hw).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&r>0})}(e,t))},Ww=function(e){return Lr(e)||Er(e)},Yw=function(e){return W(F(e.selection.getSelectedBlocks(),pt.fromDom),function(e){return!Ww(e)&&!function(e){return Ot(e).map(Ww).getOr(!1)}(e)&&fr(e,function(e){return Dn(e.dom)||In(e.dom)}).exists(function(e){return Dn(e.dom)})})},Gw=function(e,t){var n=e.dom,r=e.selection,a=e.formatter,o=function(e){return e.getParam("indentation","40px","string")}(e),i=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),c=Gc(e),l=Fc(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==l||n.getParent(r.getNode(),n.isBlock)||a.apply("div"),H(Yw(e),function(e){!function(e,t,n,r,a,o){var i=jw(n,pt.fromDom(o));if("outdent"===t){var s=Math.max(0,Hw(o.style[i])-r);e.setStyle(o,i,s?s+a:"")}else s=Hw(o.style[i])+r+a,e.setStyle(o,i,s)}(n,t,c,s,i,e.dom)})},Kw=function(e,t){if(e.selection.isCollapsed()&&qw(e)){var n=e.dom,r=e.selection.getRng(),a=vc.fromRangeStart(r),o=n.getParent(r.startContainer,n.isBlock);if(null!==o&&up(pt.fromDom(o),a))return Gw(e,"outdent"),!0}return!1},Qw=function(e,t){e.getDoc().execCommand(t,!1,null)},Xw=function(e,t){e.addCommand("delete",function(){!function(e,t){Kw(e)||qy(e,!1)||Ry(e,!1)||Rw(e,t,!1)||ky(e,!1)||xh(e)||Wy(e,!1)||Fw(e,!1)||Ny(e)||Uw(e,!1)||(Qw(e,"Delete"),ly(e))}(e,t)}),e.addCommand("forwardDelete",function(){!function(e,t){qy(e,!0)||Ry(e,!0)||Rw(e,t,!0)||ky(e,!0)||xh(e)||Wy(e,!0)||Fw(e,!0)||Ny(e)||Uw(e,!0)||Qw(e,"ForwardDelete")}(e,t)})},Jw=function(e){return void 0===e.touches||1!==e.touches.length?k.none():k.some(e.touches[0])},Zw=function(e){var t=os(k.none()),n=os(!1),r=ms(function(t){e.fire("longpress",Ne(Ne({},t),{type:"longpress"})),n.set(!0)},400);e.on("touchstart",function(e){Jw(e).each(function(a){r.cancel();var o={x:a.clientX,y:a.clientY,target:e.target};r.throttle(e),n.set(!1),t.set(k.some(o))})},!0),e.on("touchmove",function(a){r.cancel(),Jw(a).each(function(r){t.get().each(function(a){(function(e,t){var n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(r,a)&&(t.set(k.none()),n.set(!1),e.fire("longpresscancel"))})})},!0),e.on("touchend touchcancel",function(a){r.cancel(),"touchcancel"!==a.type&&t.get().filter(function(e){return e.target.isEqualNode(a.target)}).each(function(){n.get()?a.preventDefault():e.fire("tap",Ne(Ne({},a),{type:"tap"}))})},!0)},ex=function(e,t){return e.hasOwnProperty(t.nodeName)},tx=function(e,t){return!!kn(t)||!!pn(t)&&(!ex(e,t)&&!Tu(t))},nx=function(e,t){if(kn(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||ex(e,t.nextSibling)))return!0}return!1},rx=function(e){var t,n,r,a=e.dom,o=e.selection,i=e.schema,s=i.getBlockElements(),c=o.getStart(),l=e.getBody(),u=Fc(e);if(c&&pn(c)&&u){var d=l.nodeName.toLowerCase();if(i.isValidChild(d,u.toLowerCase())&&!function(e,t,n){return P(ap(pt.fromDom(n),pt.fromDom(t)),function(t){return ex(e,t.dom)})}(s,l,c)){var f=o.getRng(),m=f.startContainer,p=f.startOffset,h=f.endContainer,v=f.endOffset,g=Qf(e);for(c=l.firstChild;c;)if(tx(s,c)){if(nx(s,c)){n=c,c=c.nextSibling,a.remove(n);continue}t||(t=a.create(u,Hc(e)),c.parentNode.insertBefore(t,c),r=!0),n=c,c=c.nextSibling,t.appendChild(n)}else t=null,c=c.nextSibling;r&&g&&(f.setStart(m,p),f.setEnd(h,v),o.setRng(f),e.nodeChanged())}}},ax=function(e,t){t.hasAttribute("data-mce-caret")&&(Jr(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},ox=function(e,t){var n=function(e){return hr(pt.fromDom(e.getBody()),"*[data-mce-caret]").fold(d(null),function(e){return e.dom})}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void ax(e,n)):void(Wr(n)&&(ax(e,n),e.undoManager.add()))};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Hb||(Hb={}));var ix,sx=function(e,t){return e===hc.Backwards?Z(t):t},cx=function(e,t,n){return e===hc.Forwards?t.next(n):t.prev(n)},lx=function(e,t,n,r){return Nn(r.getNode(t===hc.Forwards))?Hb.Br:!1===Ll(n,r)?Hb.Block:Hb.Wrap},ux=function(e,t,n,r){for(var a,o=ru(n),i=r,s=[];i&&(a=cx(t,o,i));){if(Nn(a.getNode(!1)))return t===hc.Forwards?{positions:sx(t,s).concat([a]),breakType:Hb.Br,breakAt:k.some(a)}:{positions:sx(t,s),breakType:Hb.Br,breakAt:k.some(a)};if(a.isVisible()){if(e(i,a)){var c=lx(0,t,i,a);return{positions:sx(t,s),breakType:c,breakAt:k.some(a)}}s.push(a),i=a}else i=a}return{positions:sx(t,s),breakType:Hb.Eol,breakAt:k.none()}},dx=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var a=t(n,r).positions;return e===hc.Backwards?a.concat(r):[r].concat(a)}).getOr([])},fx=function(e,t){return G(e,function(e,n){return e.fold(function(){return k.some(n)},function(r){return Bs(ne(r.getClientRects()),ne(n.getClientRects()),function(e,a){var o=Math.abs(t-e.left);return Math.abs(t-a.left)<=o?n:r}).or(e)})},k.none())},mx=function(e,t){return ne(t.getClientRects()).bind(function(t){return fx(e,t.left)})},px=m(ux,pc.isAbove,-1),hx=m(ux,pc.isBelow,1),vx=m(dx,-1,px),gx=m(dx,1,hx),bx=function(e){var t=function(t){return F(t,function(t){return(t=Us(t)).node=e,t})};if(pn(e))return t(e.getClientRects());if(kn(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},yx=function(e){return X(e,bx)};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(ix||(ix={}));var wx,xx,kx=function(e,t,n,r,a,o){var i=0,s=[],c=function(r){var o,c,u;for(u=yx([r]),-1===e&&(u=u.reverse()),o=0;o<u.length;o++)if(c=u[o],!n(c,l)){if(s.length>0&&t(c,Ce(s))&&i++,c.line=i,a(c))return!0;s.push(c)}},l=Ce(o.getClientRects());if(!l)return s;var u=o.getNode();return c(u),function(e,t,n,r){for(;r=Ol(r,e,la,t);)if(n(r))return}(e,r,c,u),s},_x=m(kx,ix.Up,Hs,js),Sx=m(kx,ix.Down,js,Hs),Cx=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},Nx=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Tx=In,Dx=Ol,Ix=function(e,t){return Math.abs(e.left-t)},Mx=function(e,t){return Math.abs(e.right-t)},Ox=function(e,t){return e>=t.left&&e<=t.right},Ax=function(e,t){return e>=t.top&&e<=t.bottom},Lx=function(e,t){return _e(e,function(e,n){var r=Math.min(Ix(e,t),Mx(e,t)),a=Math.min(Ix(n,t),Mx(n,t));return Ox(t,n)?n:Ox(t,e)?e:a===r&&Tx(n.node)?n:a<r?n:e})},Ex=function(e,t,n,r,a){var o=Dx(r,e,la,t,!a);do{if(!o||n(o))return}while(o=Dx(o,e,la,t))},zx=function(e,t,n){var r=yx(function(e){return W(ae(e.getElementsByTagName("*")),wl)}(e)),a=W(r,m(Ax,n)),o=Lx(a,t);if(o){var i=!yn(o.node)&&!On(o.node);if((o=Lx(function(e,t,n){void 0===n&&(n=!0);var r=[],a=function(e,n){var a=W(yx([n]),function(n){return!e(n,t)});return r=r.concat(a),0===a.length};return r.push(t),Ex(ix.Up,e,m(a,Hs),t.node,n),Ex(ix.Down,e,m(a,js),t.node,n),r}(e,o,i),t))&&wl(o.node))return function(e,t){return{node:e.node,before:Ix(e,t)<Mx(e,t)}}(o,t)}return null},Rx=function(e,t){e.selection.setRng(t),yf(e,e.selection.getRng())},Vx=function(e,t,n){return k.some(Ay(e,t,n))},Bx=function(e,t,n,r,a,o){var i=t===hc.Forwards,s=ru(e.getBody()),c=m(jl,i?s.next:s.prev),l=i?r:a;if(!n.collapsed){var u=Ws(n);if(o(u))return Iy(t,e,u,t===hc.Backwards,!1)}var d=Fl(t,e.getBody(),n);if(l(d))return My(e,d.getNode(!i));var f=oy(i,c(d)),p=function(e){return Hr(e.startContainer)}(n);if(!f)return p?k.some(n):k.none();if(l(f))return Iy(t,e,f.getNode(!i),i,!1);var h=c(f);return h&&l(h)&&ql(f,h)?Iy(t,e,h.getNode(!i),i,!1):p?Vx(e,f.toRange(),!1):k.none()},$x=function(e,t,n,r,a,o){var i=Fl(t,e.getBody(),n),s=Ce(i.getClientRects()),c=t===ix.Down;if(!s)return k.none();var l,u=(c?Sx:_x)(e.getBody(),Cx(1),i),d=W(u,Nx(1)),f=s.left,m=Lx(d,f);if(m&&o(m.node)){var p=Math.abs(f-m.left),h=Math.abs(f-m.right);return Iy(t,e,m.node,p<h,!1)}if(l=r(i)?i.getNode():a(i)?i.getNode(!0):Ws(n)){var v=function(e,t,n,r){var a,o,i,s,c,l=ru(t),u=[],d=0,f=function(e){return Ce(e.getClientRects())};1===e?(a=l.next,o=js,i=Hs,s=vc.after(r)):(a=l.prev,o=Hs,i=js,s=vc.before(r));var m=f(s);do{if(s.isVisible()&&!i(c=f(s),m)){if(u.length>0&&o(c,Ce(u))&&d++,(c=Us(c)).position=s,c.line=d,n(c))return u;u.push(c)}}while(s=a(s));return u}(t,e.getBody(),Cx(1),l),g=Lx(W(v,Nx(1)),f);if(g)return Vx(e,g.position.toRange(),!1);if(g=Ce(W(v,Nx(0))))return Vx(e,g.position.toRange(),!1)}return 0===d.length?Ux(e,c).filter(c?a:r).map(function(t){return Ay(e,t.toRange(),!1)}):k.none()},Ux=function(e,t){var n=e.selection.getRng(),r=e.getBody();if(t){var a=vc.fromRangeEnd(n),o=hx(r,a);return re(o.positions)}a=vc.fromRangeStart(n),o=px(r,a);return ne(o.positions)},Px=function(e,t,n){return Ux(e,t).filter(n).exists(function(t){return e.selection.setRng(t.toRange()),!0})},Fx=In,Hx=function(e,t,n){var r=ru(e.getBody()),a=m(jl,1===t?r.next:r.prev);if(n.collapsed&&function(e){return""!==Fc(e)}(e)){var o=e.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!a(vc.fromRangeStart(n))){var i=function(e){var t=e.dom.create(Fc(e));return(!st.ie||st.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e);1===t?e.$(o).after(i):e.$(o).before(i),e.selection.select(i,!0),e.selection.collapse()}}},jx=function(e,t){var n=t?hc.Forwards:hc.Backwards,r=e.selection.getRng();return function(e,t,n){return Bx(t,e,n,Jm,Zm,Fx)}(n,e,r).orThunk(function(){return Hx(e,n,r),k.none()})},qx=function(e,t){var n=t?1:-1,r=e.selection.getRng();return function(e,t,n){return $x(t,e,n,function(e){return Jm(e)||Qm(e)},function(e){return Zm(e)||Xm(e)},Fx)}(n,e,r).orThunk(function(){return Hx(e,n,r),k.none()})},Wx=function(e,t){return jx(e,t).exists(function(t){return Rx(e,t),!0})},Yx=function(e,t){return qx(e,t).exists(function(t){return Rx(e,t),!0})},Gx=function(e,t){return Px(e,t,t?Zm:Jm)},Kx=function(e){return U(["figcaption"],xt(e))},Qx=function(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},Xx=function(e,t,n){n?Qt(e,t):Kt(e,t)},Jx=function(e,t,n,r){return""===t?function(e,t){var n=pt.fromTag("br");return Xx(e,n,t),Qx(n)}(e,r):function(e,t,n,r){var a=pt.fromTag(n),o=pt.fromTag("br");return zn(a,r),Qt(a,o),Xx(e,a,t),Qx(o)}(e,r,t,n)},Zx=function(e,t,n){return t?function(e,t){return hx(e,t).breakAt.isNone()}(e.dom,n):function(e,t){return px(e,t).breakAt.isNone()}(e.dom,n)},ek=function(e,t){var n=pt.fromDom(e.getBody()),r=vc.fromRangeStart(e.selection.getRng()),a=Fc(e),o=Hc(e);return function(e,t){var n=m(bt,t);return fr(pt.fromDom(e.container()),Ir,n).filter(Kx)}(r,n).exists(function(){if(Zx(n,t,r)){var i=Jx(n,a,o,t);return e.selection.setRng(i),!0}return!1})},tk=function(e,t){return!!e.selection.isCollapsed()&&ek(e,t)},nk=function(e,t){return X(function(e){return F(e,function(e){return Ne({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:l},e)})}(e),function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]})},rk=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},ak=function(e,t){return K(nk(e,t),function(e){return e.action()})},ok=function(e,t){var n=t?hc.Forwards:hc.Backwards,r=e.selection.getRng();return Bx(e,n,r,Gm,Km,On).exists(function(t){return Rx(e,t),!0})},ik=function(e,t){var n=t?1:-1,r=e.selection.getRng();return $x(e,n,r,Gm,Km,On).exists(function(t){return Rx(e,t),!0})},sk=function(e,t){return Px(e,t,t?Km:Gm)},ck=function(e,t,n,r,a){var o=ks(pt.fromDom(n),"td,th,caption").map(function(e){return e.dom});return function(e,t,n){return G(e,function(e,r){return e.fold(function(){return k.some(r)},function(e){var a=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return k.some(o<a?r:e)})},k.none())}(W(function(e,t){return X(t,function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}}(Us(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})}(e,o),function(e){return t(e,a)}),r,a).map(function(e){return e.cell})},lk=m(ck,function(e){return e.bottom},function(e,t){return e.y<t}),uk=m(ck,function(e){return e.top},function(e,t){return e.y>t}),dk=function(e,t){return ne(t.getClientRects()).bind(function(t){return lk(e,t.left,t.top)}).bind(function(e){return mx(hu(n=e).map(function(e){return px(n,e).positions.concat(e)}).getOr([]),t);var n})},fk=function(e,t){return re(t.getClientRects()).bind(function(t){return uk(e,t.left,t.top)}).bind(function(e){return mx(pu(n=e).map(function(e){return[e].concat(hx(n,e).positions)}).getOr([]),t);var n})},mk=function(e,t,n){var r=e(t,n);return function(e){return e.breakType===Hb.Wrap&&0===e.positions.length}(r)||!Nn(n.getNode())&&function(e){return e.breakType===Hb.Br&&1===e.positions.length}(r)?!function(e,t,n){return n.breakAt.exists(function(n){return e(t,n).breakAt.isSome()})}(e,t,r):r.breakAt.isNone()},pk=m(mk,px),hk=m(mk,hx),vk=function(e,t,n,r){var a=e.selection.getRng(),o=t?1:-1;return!(!bl()||!function(e,t,n){var r=vc.fromRangeStart(t);return du(!e,n).exists(function(e){return e.isEqual(r)})}(t,a,n))&&(Iy(o,e,n,!t,!1).each(function(t){Rx(e,t)}),!0)},gk=function(e,t){var n=t.getNode(e);return pn(n)&&"TABLE"===n.nodeName?k.some(n):k.none()},bk=function(e,t,n){var r=gk(!!t,n),a=!1===t;r.fold(function(){return Rx(e,n.toRange())},function(r){return du(a,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Rx(e,n.toRange())},function(a){return function(e,t,n,r){var a=Fc(t);a?t.undoManager.transact(function(){var r=pt.fromTag(a);zn(r,Hc(t)),Qt(r,pt.fromTag("br")),e?Gt(pt.fromDom(n),r):Yt(pt.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom,0),o.setEnd(r.dom,0),Rx(t,o)}):Rx(t,r.toRange())}(t,e,r,n)})})},yk=function(e,t,n,r){var a=e.selection.getRng(),o=vc.fromRangeStart(a),i=e.getBody();if(!t&&pk(r,o)){var s=function(e,t,n){return dk(t,n).orThunk(function(){return ne(n.getClientRects()).bind(function(n){return fx(vx(e,vc.before(t)),n.left)})}).getOr(vc.before(t))}(i,n,o);return bk(e,t,s),!0}if(t&&hk(r,o)){s=function(e,t,n){return fk(t,n).orThunk(function(){return ne(n.getClientRects()).bind(function(n){return fx(gx(e,vc.after(t)),n.left)})}).getOr(vc.after(t))}(i,n,o);return bk(e,t,s),!0}return!1},wk=function(e,t,n){return k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(r){return k.from(e.dom.getParent(r,"table")).map(function(a){return n(e,t,a,r)})}).getOr(!1)},xk=function(e,t){return wk(e,t,vk)},kk=function(e,t){return wk(e,t,yk)},_k=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=Je().os;ak([{keyCode:Ad.RIGHT,action:rk(Wx,e,!0)},{keyCode:Ad.LEFT,action:rk(Wx,e,!1)},{keyCode:Ad.UP,action:rk(Yx,e,!1)},{keyCode:Ad.DOWN,action:rk(Yx,e,!0)},{keyCode:Ad.RIGHT,action:rk(xk,e,!0)},{keyCode:Ad.LEFT,action:rk(xk,e,!1)},{keyCode:Ad.UP,action:rk(kk,e,!1)},{keyCode:Ad.DOWN,action:rk(kk,e,!0)},{keyCode:Ad.RIGHT,action:rk(ok,e,!0)},{keyCode:Ad.LEFT,action:rk(ok,e,!1)},{keyCode:Ad.UP,action:rk(ik,e,!1)},{keyCode:Ad.DOWN,action:rk(ik,e,!0)},{keyCode:Ad.RIGHT,action:rk(Dw,e,t,!0)},{keyCode:Ad.LEFT,action:rk(Dw,e,t,!1)},{keyCode:Ad.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:rk(Ow,e,t)},{keyCode:Ad.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:rk(Aw,e,t)},{keyCode:Ad.UP,action:rk(tk,e,!1)},{keyCode:Ad.DOWN,action:rk(tk,e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)})},Sk=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){ak([{keyCode:Ad.BACKSPACE,action:rk(Kw,e,!1)},{keyCode:Ad.BACKSPACE,action:rk(qy,e,!1)},{keyCode:Ad.DELETE,action:rk(qy,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Ry,e,!1)},{keyCode:Ad.DELETE,action:rk(Ry,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Rw,e,t,!1)},{keyCode:Ad.DELETE,action:rk(Rw,e,t,!0)},{keyCode:Ad.BACKSPACE,action:rk(xh,e,!1)},{keyCode:Ad.DELETE,action:rk(xh,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Wy,e,!1)},{keyCode:Ad.DELETE,action:rk(Wy,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Fw,e,!1)},{keyCode:Ad.DELETE,action:rk(Fw,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Ny,e,!1)},{keyCode:Ad.DELETE,action:rk(Ny,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(ky,e,!1)},{keyCode:Ad.DELETE,action:rk(ky,e,!0)},{keyCode:Ad.BACKSPACE,action:rk(Uw,e,!1)},{keyCode:Ad.DELETE,action:rk(Uw,e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&function(e,t){ak([{keyCode:Ad.BACKSPACE,action:rk(jy,e)},{keyCode:Ad.DELETE,action:rk(jy,e)}],t)}(e,t)})},Ck=function(e,t){var n,r=t,a=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var i=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}var s=a.createRng();if(t.normalize(),t.hasChildNodes()){for(var c=new Nr(t,t);n=c.current();){if(kn(n)){s.setStart(n,0),s.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){s.setStartBefore(n),s.setEndBefore(n);break}r=n,n=c.next()}n||(s.setStart(r,0),s.setEnd(r,0))}else Nn(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)):(s.setStart(t,0),s.setEnd(t,0));e.selection.setRng(s),yf(e,s)}},Nk=function(e){return k.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Tk=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},Dk=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Ik=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Mk=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!pn(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},Ok=function(e,t,n,r,a){var o=e.dom,i=e.selection.getRng();if(n!==e.getBody()){var s;Dk(s=n)&&Dk(s.parentNode)&&(a="LI");var c=a?t(a):o.create("BR");if(Mk(n,r,!0)&&Mk(n,r,!1))Tk(n,"LI")?o.insertAfter(c,Ik(n)):o.replace(c,n);else if(Mk(n,r,!0))Tk(n,"LI")?(o.insertAfter(c,Ik(n)),c.appendChild(o.doc.createTextNode(" ")),c.appendChild(n)):n.parentNode.insertBefore(c,n);else if(Mk(n,r,!1))o.insertAfter(c,Ik(n));else{n=Ik(n);var l=i.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var u=l.extractContents();"LI"===a&&function(e,t){return e.firstChild&&e.firstChild.nodeName===t}(u,"LI")?(c=u.firstChild,o.insertAfter(u,n)):(o.insertAfter(u,n),o.insertAfter(c,n))}o.remove(r),Ck(e,c)}},Ak=function(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},Lk=function(e){e.innerHTML='<br data-mce-bogus="1">'},Ek=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},zk=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},Rk=function(e,t,n){return!1===kn(t)?n:e?1===n&&t.data.charAt(n-1)===Br?0:n:n===t.data.length-1&&t.data.charAt(n)===Br?t.data.length:n},Vk=function(e,t){var n,r,a=e.getRoot();for(n=t;n!==a&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==a?r:a},Bk=function(e,t){var n=Fc(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,t,n){var r=e.dom;k.from(n.style).map(r.parseStyle).each(function(e){var n=Hn(pt.fromDom(t)),a=Ne(Ne({},n),e);r.setStyles(t,a)});var a=k.from(n.class).map(function(e){return e.split(/\s+/)}),o=k.from(t.className).map(function(e){return W(e.split(/\s+/),function(e){return""!==e})});Bs(a,o,function(e,n){var a=W(n,function(t){return!U(e,t)}),o=Te(e,a);r.setAttrib(t,"class",o.join(" "))});var i=["style","class"],s=me(n,function(e,t){return!U(i,t)});r.setAttribs(t,s)}(e,t,Hc(e))},$k=function(e,t){var n,r,a,o,i,s,c,l,u,d,f=e.dom,m=e.schema,p=m.getNonEmptyElements(),h=e.selection.getRng(),v=function(t){var n,a,i,s=r,c=m.getTextInlineElements();if(i=n=t||"TABLE"===l||"HR"===l?f.create(t||u):o.cloneNode(!1),!1===function(e){return e.getParam("keep_styles",!0)}(e))f.setAttrib(n,"style",null),f.setAttrib(n,"class",null);else do{if(c[s.nodeName]){if(vu(s)||Tu(s))continue;a=s.cloneNode(!1),f.setAttrib(a,"id",""),n.hasChildNodes()?(a.appendChild(n.firstChild),n.appendChild(a)):(i=a,n.appendChild(a))}}while((s=s.parentNode)&&s!==x);return Bk(e,n),Lk(i),n},g=function(e){var t,n,i=Rk(e,r,a);if(kn(r)&&(e?i>0:i<r.nodeValue.length))return!1;if(r.parentNode===o&&d&&!e)return!0;if(e&&pn(r)&&r===o.firstChild)return!0;if(Ek(r,"TABLE")||Ek(r,"HR"))return d&&!e||!d&&e;var s=new Nr(r,o);for(kn(r)&&(e&&0===i?s.prev():e||i!==r.nodeValue.length||s.next());t=s.current();){if(pn(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),p[n]&&"br"!==n))return!1}else if(kn(t)&&!da(t.nodeValue))return!1;e?s.prev():s.next()}return!0},b=function(){i=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==k?v(u):v(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&zk(f,c)&&f.isEmpty(o)?i=f.split(c,o):f.insertAfter(i,o),Ck(e,i)};Wd(f,h).each(function(e){h.setStart(e.startContainer,e.startOffset),h.setEnd(e.endContainer,e.endOffset)}),r=h.startContainer,a=h.startOffset,u=Fc(e);var y=!(!t||!t.shiftKey),w=!(!t||!t.ctrlKey);pn(r)&&r.hasChildNodes()&&(d=a>r.childNodes.length-1,r=r.childNodes[Math.min(a,r.childNodes.length-1)]||r,a=d&&kn(r)?r.nodeValue.length:0);var x=Vk(f,r);if(x){(u&&!y||!u&&y)&&(r=function(e,t,n,r,a){var o,i,s,c,l,u,d=t||"P",f=e.dom,m=Vk(f,r);if(!(i=f.getParent(r,f.isBlock))||!zk(f,i)){if(u=(i=i||m)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(i)?i.nodeName.toLowerCase():i.parentNode.nodeName.toLowerCase(),!i.hasChildNodes())return o=f.create(d),Bk(e,o),i.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(c=r;c.parentNode!==i;)c=c.parentNode;for(;c&&!f.isBlock(c);)s=c,c=c.previousSibling;if(s&&e.schema.isValidChild(u,d.toLowerCase())){for(o=f.create(d),Bk(e,o),s.parentNode.insertBefore(o,s),c=s;c&&!f.isBlock(c);)l=c.nextSibling,o.appendChild(c),c=l;n.setStart(r,a),n.setEnd(r,a)}}return r}(e,u,h,r,a)),o=f.getParent(r,f.isBlock),c=o?f.getParent(o.parentNode,f.isBlock):null,l=o?o.nodeName.toUpperCase():"";var k=c?c.nodeName.toUpperCase():"";"LI"!==k||w||(o=c,c=c.parentNode,l=k),/^(LI|DT|DD)$/.test(l)&&f.isEmpty(o)?Ok(e,v,c,o,u):u&&o===e.getBody()||(u=u||"P",Hr(o)?(i=Jr(o),f.isEmpty(o)&&Lk(o),Bk(e,i),Ck(e,i)):g()?b():g(!0)?(i=o.parentNode.insertBefore(v(),o),Ck(e,Ek(o,"HR")?i:o)):((n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,Rk(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Rk(!1,e.endContainer,e.endOffset)),t}(h).cloneRange()).setEndAfter(o),function(e){H(xs(pt.fromDom(e),Ct),function(e){var t=e.dom;t.nodeValue=Ur(t.nodeValue)})}(s=n.extractContents()),function(e){do{kn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(s),i=s.firstChild,f.insertAfter(s,o),function(e,t,n){var r,a=n,o=[];if(a){for(;a=a.firstChild;){if(e.isBlock(a))return;pn(a)&&!t[a.nodeName.toLowerCase()]&&o.push(a)}for(r=o.length;r--;)!(a=o[r]).hasChildNodes()||a.firstChild===a.lastChild&&""===a.firstChild.nodeValue?e.remove(a):Ak(e,a)&&e.remove(a)}}(f,p,i),function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(f,o),f.isEmpty(o)&&Lk(o),i.normalize(),f.isEmpty(i)?(f.remove(i),b()):(Bk(e,i),Ck(e,i))),f.setAttrib(i,"id",""),e.fire("NewBlock",{newBlock:i}))}},Uk=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Pk=function(e,t,n,r){var a=e.createRng();r?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),t.setRng(a)},Fk=function(e,t){var n,r,a=e.selection,o=e.dom,i=a.getRng();Wd(o,i).each(function(e){i.setStart(e.startContainer,e.startOffset),i.setEnd(e.endContainer,e.endOffset)});var s=i.startOffset,c=i.startContainer;if(1===c.nodeType&&c.hasChildNodes()){var l=s>c.childNodes.length-1;c=c.childNodes[Math.min(s,c.childNodes.length-1)]||c,s=l&&3===c.nodeType?c.nodeValue.length:0}var u=o.getParent(c,o.isBlock),d=u?o.getParent(u.parentNode,o.isBlock):null,f=d?d.nodeName.toUpperCase():"",m=!(!t||!t.ctrlKey);"LI"!==f||m||(u=d),c&&3===c.nodeType&&s>=c.nodeValue.length&&(function(e,t,n){for(var r,a=new Nr(t,n),o=e.getNonEmptyElements();r=a.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema,c,u)||(n=o.create("br"),i.insertNode(n),i.setStartAfter(n),i.setEndAfter(n),r=!0)),n=o.create("br"),bc(o,i,n),Uk(o,a,n),Pk(o,a,n,r),e.undoManager.add()},Hk=function(e,t){var n=pt.fromTag("br");Yt(pt.fromDom(t),n),e.undoManager.add()},jk=function(e,t){qk(e.getBody(),t)||Gt(pt.fromDom(t),pt.fromTag("br"));var n=pt.fromTag("br");Gt(pt.fromDom(t),n),Uk(e.dom,e.selection,n.dom),Pk(e.dom,e.selection,n.dom,!1),e.undoManager.add()},qk=function(e,t){return n=vc.after(t),!!Nn(n.getNode())||fu(e,vc.after(t)).map(function(e){return Nn(e.getNode())}).getOr(!1);var n},Wk=function(e){return e&&"A"===e.nodeName&&"href"in e},Yk=function(e){return e.fold(g,Wk,Wk,g)},Gk=function(e,t){t.fold(l,m(Hk,e),m(jk,e),l)},Kk=function(e,t){var n=function(e){var t=m(ny,e),n=vc.fromRangeStart(e.selection.getRng());return mw(t,e.getBody(),n).filter(Yk)}(e);n.isSome()?n.each(m(Gk,e)):Fk(e,t)},Qk=function(e,t){return Nk(e).filter(function(e){return t.length>0&&vt(pt.fromDom(e),t)}).isSome()},Xk=sr([{br:[]},{block:[]},{none:[]}]),Jk=function(e,t){return function(e){return Qk(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Zk=function(e){return function(t,n){return""===Fc(t)===e}},e_=function(e){return function(t,n){return function(e){return Nk(e).filter(function(e){return Er(pt.fromDom(e))}).isSome()}(t)===e}},t_=function(e,t){return function(n,r){return function(e){return Nk(e).fold(d(""),function(e){return e.nodeName.toUpperCase()})}(n)===e.toUpperCase()===t}},n_=function(e){return t_("pre",e)},r_=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},a_=function(e,t){return function(e){return Qk(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},o_=function(e,t){return t},i_=function(e){var t=Fc(e),n=function(e,t){var n,r,a=e.getRoot();for(n=t;n!==a&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==a?r:a}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},s_=function(e,t){return function(n,r){return G(e,function(e,t){return e&&t(n,r)},!0)?k.some(t):k.none()}},c_=function(e,t){return rw([s_([Jk],Xk.none()),s_([t_("summary",!0)],Xk.br()),s_([n_(!0),r_(!1),o_],Xk.br()),s_([n_(!0),r_(!1)],Xk.block()),s_([n_(!0),r_(!0),o_],Xk.block()),s_([n_(!0),r_(!0)],Xk.br()),s_([e_(!0),o_],Xk.br()),s_([e_(!0)],Xk.block()),s_([Zk(!0),o_,i_],Xk.block()),s_([Zk(!0)],Xk.br()),s_([a_],Xk.br()),s_([Zk(!1),o_],Xk.br()),s_([i_],Xk.block())],[e,!(!t||!t.shiftKey)]).getOr(Xk.none())},l_=function(e,t){c_(e,t).fold(function(){Kk(e,t)},function(){$k(e,t)},l)},u_=function(e){e.on("keydown",function(t){t.keyCode===Ad.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),l_(e,t)}))}(e,t)})},d_=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){ak([{keyCode:Ad.END,action:rk(Gx,e,!0)},{keyCode:Ad.HOME,action:rk(Gx,e,!1)},{keyCode:Ad.END,action:rk(sk,e,!0)},{keyCode:Ad.HOME,action:rk(sk,e,!1)}],t).each(function(e){t.preventDefault()})}(e,t)})},f_=Je().browser,m_=function(e){!function(e){var t=fs(function(){e.composing||Lp(e)},0);f_.isIE()&&(e.on("keypress",function(e){t.throttle()}),e.on("remove",function(e){t.cancel()}))}(e),e.on("input",function(t){!1===t.isComposing&&Lp(e)})},p_=function(e,t){var n=t.container(),r=t.offset();return kn(n)?(n.insertData(r,e),k.some(pc(n,r+e.length))):Hl(t).map(function(n){var r=pt.fromText(e);return t.isAtEnd()?Gt(n,r):Yt(n,r),pc(r.dom,e.length)})},h_=m(p_," "),v_=m(p_," "),g_=function(e,t){return function(n){return function(e,t){return!Sp(t)&&(Cp(e,t)||kp(e,t)||_p(e,t))}(e,n)?h_(t):v_(t)}},b_=function(e){var t=vc.fromRangeStart(e.selection.getRng()),n=pt.fromDom(e.getBody());if(e.selection.isCollapsed()){var r=m(ny,e),a=vc.fromRangeStart(e.selection.getRng());return mw(r,e.getBody(),a).bind(function(e){return function(t){return t.fold(function(t){return mu(e.dom,vc.before(t))},function(e){return pu(e)},function(e){return hu(e)},function(t){return fu(e.dom,vc.after(t))})}}(n)).bind(g_(n,t)).exists(function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}}(e))}return!1},y_=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){ak([{keyCode:Ad.SPACEBAR,action:rk(b_,e)}],t).each(function(e){t.preventDefault()})}(e,t)})},w_=function(e){var t=Mw(e);return function(e){e.on("keyup compositionstart",m(ox,e))}(e),_k(e,t),Sk(e,t),u_(e),y_(e),m_(e),d_(e),t},x_=function(){function e(e){var t;this.lastPath=[],this.editor=e;var n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",function(n){var r=e.selection.getRng(),a={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&Vd(a,t)||e.fire("SelectionChange"),t=a}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!st.range&&e.selection.isCollapsed()||bd(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",function(t){!t.isDefaultPrevented()&&bd(e)&&("IMG"===e.selection.getNode().nodeName?xr.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())})}return e.prototype.nodeChanged=function(e){var t,n,r,a=this.editor.selection;this.editor.initialized&&a&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(r=this.editor.getBody(),(t=a.getStart(!0)||r).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,r)||(t=r),n=[],this.editor.dom.getParent(t,function(e){if(e===r)return!0;n.push(e)}),(e=e||{}).element=t,e.parents=n,this.editor.fire("NodeChange",e))},e.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},e}(),k_=function(e){!function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})}(e),function(e){e.parser.addNodeFilter("details",function(e){H(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){H(e,function(e){var t=e.attr("data-mce-open");e.attr("open",N(t)?t:null),e.attr("data-mce-open",null)})})}(e)},__=function(e){return pn(e)&&Ar(pt.fromDom(e))},S_=function(e){e.on("click",function(t){t.detail>=3&&function(e){var t=e.selection.getRng(),n=pc.fromRangeStart(t),r=pc.fromRangeEnd(t);if(pc.isElementPosition(n)){var a=n.container();__(a)&&pu(a).each(function(e){return t.setStart(e.container(),e.offset())})}pc.isElementPosition(r)&&(a=n.container(),__(a)&&hu(a).each(function(e){return t.setEnd(e.container(),e.offset())}));e.selection.setRng(_h(t))}(e)})},C_=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,a=n.defaultView;return{top:t.top+a.pageYOffset-r.clientTop,left:t.left+a.pageXOffset-r.clientLeft}},N_=function(e,t){return n=function(e){return e.inline?C_(e.getBody()):{left:0,top:0}}(e),r=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),{pageX:(a=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=C_(e.getContentAreaContainer()),r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},a={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:a}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:a.top-n.top+r.top};var n,r,a},T_=In,D_=Dn,I_=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},M_=function(e,t){return function(n){if(function(e){return 0===e.button}(n)){var r=K(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}(T_,D_)).getOr(null);if(s=t.getBody(),T_(c=r)&&c!==s){var a=t.dom.getPos(r),o=t.getBody(),i=t.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?o.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?o.scrollHeight:i.offsetHeight)-2,relX:n.pageX-a.x,relY:n.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:function(e,t,n,r){var a=e.dom,o=t.cloneNode(!0);a.setStyles(o,{width:n,height:r}),a.setAttrib(o,"data-mce-selected",null);var i=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),a.setStyles(o,{margin:0,boxSizing:"border-box"}),i.appendChild(o),i}(t,r,r.offsetWidth,r.offsetHeight)})}}var s,c}},O_=function(e,t){return function(n){e.on(function(e){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!T_(t)}(t,(i=t.selection,3===(s=i.getSel().getRangeAt(0).startContainer).nodeType?s.parentNode:s),e.element)){var r=(a=e.element,(o=a.cloneNode(!0)).removeAttribute("data-mce-selected"),o);t.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact(function(){I_(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()})}var a,o,i,s}),A_(e)}},A_=function(e){e.on(function(e){I_(e.ghost)}),e.clear()},L_=function(e){var t,n=(t=os(k.none()),{clear:function(){return t.set(k.none())},set:function(e){return t.set(k.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}),r=es.DOM,a=document,o=M_(n,e),i=function(e,t){var n=xr.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return t.on("remove",n.stop),function(r){return e.on(function(e){var a,o,i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&i>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var s=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,N_(t,r));a=e.ghost,o=t.getBody(),a.parentNode!==o&&o.appendChild(a),function(e,t,n,r,a,o){var i=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>a&&(i=t.pageX+n-a),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-i+"px",e.style.height=r-s+"px"}(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}})}}(n,e),s=O_(n,e),c=function(e,t){return function(){e.on(function(e){e.dragging&&t.fire("dragend")}),A_(e)}}(n,e);e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",s),r.bind(a,"mousemove",i),r.bind(a,"mouseup",c),e.on("remove",function(){r.unbind(a,"mousemove",i),r.unbind(a,"mouseup",c)})},E_=function(e){L_(e),function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(T_(n)||"false"===e.dom.getContentEditableParent(n))&&t.preventDefault()})}(e),function(e){return e.getParam("block_unsupported_drop",!0,"boolean")}(e)&&function(e){var t=function(t){if(!t.defaultPrevented){var n=t.dataTransfer;n&&(U(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Ob(e,"Dropped file type is not supported"))}},n=function(n){Hf(e,n.target)&&t(n)},r=function(){var r=es.DOM,a=e.dom,o=document,i=e.inline?e.getBody():e.getDoc(),s=["drop","dragover"];H(s,function(e){r.bind(o,e,n),a.bind(i,e,t)}),e.on("remove",function(){H(s,function(e){r.unbind(o,e,n),a.unbind(i,e,t)})})};e.on("init",function(){xr.setEditorTimeout(e,r,0)})}(e)},z_=Dn,R_=In,V_=function(e,t){return Md(e.getBody(),t)},B_=function(e){var t,n=e.selection,r=e.dom,a=r.isBlock,o=e.getBody(),i=gl(e,o,a,function(){return Qf(e)}),s="sel-"+r.uniqueId(),c=function(e){return e!==o&&(R_(e)||On(e))&&r.isChildOf(e,o)},l=function(e){e&&n.setRng(e)},u=n.getRng,d=function(t,r,a,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:r,direction:t,before:a}).isDefaultPrevented()?null:(o&&n.scrollIntoView(r,-1===t),i.show(a,r))},f=function(e){return qr(e)||Qr(e)||Xr(e)},m=function(e){return f(e.startContainer)||f(e.endContainer)},p=function(t){var n=e.schema.getShortEndedElements(),a=r.createRng(),o=t.startContainer,i=t.startOffset,s=t.endContainer,c=t.endOffset;return ve(n,o.nodeName.toLowerCase())?0===i?a.setStartBefore(o):a.setStartAfter(o):a.setStart(o,i),ve(n,s.nodeName.toLowerCase())?0===c?a.setEndBefore(s):a.setEndAfter(s):a.setEnd(s,c),a},h=function(a){var o=a.cloneNode(!0),i=e.fire("ObjectSelected",{target:a,targetClone:o});if(i.isDefaultPrevented())return null;var c=function(t,a,o){var i=e.$,c=hr(pt.fromDom(e.getBody()),"#"+s).fold(function(){return i([])},function(e){return i([e.dom])});0===c.length&&(c=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",s)).appendTo(e.getBody());var l=r.createRng();a===o&&st.ie?(c.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(a),l.setStartAfter(c[0].firstChild.firstChild),l.setEndAfter(a)):(c.empty().append(" ").append(a).append(" "),l.setStart(c[0].firstChild,1),l.setEnd(c[0].lastChild,0)),c.css({top:r.getPos(t,e.getBody()).y}),c[0].focus();var u=n.getSel();return u.removeAllRanges(),u.addRange(l),l}(a,i.targetClone,o),l=pt.fromDom(a);return H(ks(pt.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){bt(l,e)||Bn(e,"data-mce-selected")}),r.getAttrib(a,"data-mce-selected")||a.setAttribute("data-mce-selected","1"),t=a,b(),c},v=function(e,t){if(!e)return null;if(e.collapsed){if(!m(e)){var n=t?1:-1,a=Fl(n,o,e),i=a.getNode(!t);if(wl(i))return d(n,i,!!t&&!a.isAtEnd(),!1);var s=a.getNode(t);if(wl(s))return d(n,s,!t&&!a.isAtEnd(),!1)}return null}var l=e.startContainer,u=e.startOffset,f=e.endOffset;if(3===l.nodeType&&0===u&&R_(l.parentNode)&&(l=l.parentNode,u=r.nodeIndex(l),l=l.parentNode),1!==l.nodeType)return null;if(f===u+1&&l===e.endContainer){var p=l.childNodes[u];if(c(p))return h(p)}return null},g=function(){t&&t.removeAttribute("data-mce-selected"),hr(pt.fromDom(e.getBody()),"#"+s).each(Zt),t=null},b=function(){i.hide()};return st.ceFalse&&function(){e.on("mouseup",function(t){var n=u();n.collapsed&&Sb(e,t.clientX,t.clientY)&&Oy(e,n,!1).each(l)}),e.on("click",function(t){var a=V_(e,t.target);a&&(R_(a)&&(t.preventDefault(),e.focus()),z_(a)&&r.isChildOf(a,n.getNode())&&g())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",i.reposition);var f=function(e){var t=ru(e);if(!e.firstChild)return!1;var n,r=vc.before(e.firstChild),a=t.next(r);return a&&!(Jm(n=a)||Zm(n)||Gm(n)||Km(n))},h=function(t,n){var o,i,s=r.getParent(t,a),c=r.getParent(n,a);return!(!s||t===c||!r.isChildOf(s,c)||!1!==R_(V_(e,s)))||s&&(o=s,i=c,!(r.getParent(o,a)===r.getParent(i,a)))&&f(s)};e.on("tap",function(t){var n=t.target,r=V_(e,n);R_(r)?(t.preventDefault(),My(e,r).each(v)):c(n)&&My(e,n).each(v)},!0),e.on("mousedown",function(t){var a=t.target;if((a===o||"HTML"===a.nodeName||r.isChildOf(a,o))&&!1!==Sb(e,t.clientX,t.clientY)){var i=V_(e,a);if(i)R_(i)?(t.preventDefault(),My(e,i).each(v)):(g(),z_(i)&&t.shiftKey||Od(t.clientX,t.clientY,n.getRng())||(b(),n.placeCaretAt(t.clientX,t.clientY)));else if(c(a))My(e,a).each(v);else if(!1===wl(a)){g(),b();var s=zx(o,t.clientX,t.clientY);if(s&&!h(a,s.node)){t.preventDefault();var u=d(1,s.node,s.before,!1);e.getBody().focus(),l(u)}}}}),e.on("keypress",function(e){Ad.modifierPressed(e)||R_(n.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("SetSelectionRange",function(e){e.range=p(e.range);var t=v(e.range,e.forward);t&&(e.range=t)});e.on("AfterSetSelectionRange",function(e){var t=e.range,n=t.startContainer.parentNode;m(t)||"mcepastebin"===n.id||b(),function(e){return r.hasClass(e,"mce-offscreen-selection")}(n)||g()}),e.on("copy",function(e){var t,n=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!st.ie){var a=(t=r.get(s))?t.getElementsByTagName("*")[0]:t;a&&(e.preventDefault(),n.clearData(),n.setData("text/html",a.outerHTML),n.setData("text/plain",a.outerText||a.innerText))}}),E_(e),function(e){var t=fs(function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var n=Ay(e,t,!1);e.selection.setRng(n)}}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})}(e),function(e){e.on("init",function(){e.on("focusin",function(t){var n=t.target;if(On(n)){var r=Md(e.getBody(),n),a=In(r)?r:n;e.selection.getNode()!==a&&My(e,a).each(function(t){return e.selection.setRng(t)})}})})}(e)}(),{showCaret:d,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(Jr(e),l(u()),n.scrollIntoView(e))},hideFakeCaret:b,destroy:function(){i.destroy(),t=null}}},$_=function(e){var t,n,r,a=ft.each,o=Ad.BACKSPACE,i=Ad.DELETE,s=e.dom,c=e.selection,l=e.parser,u=st.gecko,d=st.ie,f=st.webkit,m=d?"Text":"URL",p=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},h=function(e){return e.isDefaultPrevented()},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},g=function(){e.on("keydown",function(e){if(!h(e)&&e.keyCode===o&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(st.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))};return e.on("keydown",function(t){var n,r;if(!h(t)&&t.keyCode===Ad.BACKSPACE){var a=(n=c.getRng()).startContainer,o=n.startOffset,i=s.getRoot();if(r=a,n.collapsed&&0===o){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==i;)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(e.formatter.toggle("blockquote",null,r),(n=s.createRng()).setStart(a,0),n.setEnd(a,0),c.setRng(n))}}}),t=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),c.serializer.serialize(t,{format:"html"})},e.on("keydown",function(n){var r,a,c,l,u,d=n.keyCode;if(!h(n)&&(d===i||d===o)){if(r=e.selection.isCollapsed(),a=e.getBody(),r&&!s.isEmpty(a))return;if(!r&&(c=e.selection.getRng(),l=t(c),(u=s.createRng()).selectNode(e.getBody()),l!==t(u)))return;n.preventDefault(),e.setContent(""),a.firstChild&&s.isBlock(a.firstChild)?e.selection.setCursorLocation(a.firstChild,0):e.selection.setCursorLocation(a,0),e.nodeChanged()}}),st.windowsPhone||e.on("keyup focusin mouseup",function(e){Ad.modifierPressed(e)||c.normalize()},!0),f&&(e.inline||s.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=c.getRng(),e.getBody().focus(),"mousedown"===t.type){if(qr(n.startContainer))return;c.placeCaretAt(t.clientX,t.clientY)}else c.setRng(n)}),e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),c.select(n))}),Fc(e)&&e.on("init",function(){p("DefaultParagraphSeparator",Fc(e))}),e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})}),g(),l.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),st.iOS?(e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()}),b(),e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),st.ie>=11&&(b(),g()),st.ie&&(v(),p("AutoUrlDetect",!1),e.on("dragstart",function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&c.select(t.target),(n=e.selection.getContent()).length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(m,r)))}(t)}),e.on("drop",function(t){if(!h(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(m))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=Rd(t.x,t.y,e.getDoc());c.setRng(r),a=n.html,o=!0,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:a,internal:o}):e.execCommand("mceInsertContent",!1,a)}}var a,o})),u&&(e.on("keydown",function(t){if(!h(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){var n=c.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),t.preventDefault())}}}),Range.prototype.getClientRects||e.on("mousedown",function(t){if(!h(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),xr.setEditorTimeout(e,function(){n.focus()})}}),n=function(){var t=s.getAttribs(c.getStart().cloneNode(!1));return function(){var n=c.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),a(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)},e.on("keypress",function(t){var a;if(!h(t)&&(8===t.keyCode||46===t.keyCode)&&r())return a=n(),e.getDoc().execCommand("delete",!1,null),a(),t.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(t){var a;!h(t)&&r()&&(a=n(),xr.setEditorTimeout(e,function(){a()}))}),function(e){return e.getParam("readonly")}(e)||e.on("BeforeExecCommand mousedown",function(){p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),Kc(e)||p("enableObjectResizing",!1)}),e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||a(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})}),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),st.mac&&e.on("keydown",function(t){!Ad.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),g()),{refreshContentEditable:function(){},isHidden:function(){if(!u||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},U_=es.DOM,P_=function(e){return me(e,function(e){return!1===O(e)})},F_=function(e){var t=e.settings,n=e.editorUpload.blobCache;return P_({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0}(e),validate:!0,blob_cache:n,images_dataimg_filter:t.images_dataimg_filter})},H_=function(e){var t=e.dom.getRoot();e.inline||bd(e)&&e.selection.getStart(!0)!==t||pu(t).each(function(t){var n=t.getNode(),r=yn(n)?pu(n).getOr(t):t;st.browser.isIE()?function(e,t){var n=pt.fromDom(e.getBody()),r=(Lf(e)?k.from(t):k.none()).map(Ef).filter(Af(n));e.bookmark=r.isSome()?r:e.bookmark}(e,r.toRange()):e.selection.setRng(r.toRange())})},j_=function(e){e.bindPendingEventDelegates(),e.initialized=!0,function(e){e.fire("Init")}(e),e.focus(!0),H_(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&xr.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)}(e)},q_=function(e,t){var n=e.settings,r=e.getDoc(),a=e.getBody();n.browser_spellcheck||n.gecko_spellcheck||(r.body.spellcheck=!1,U_.setAttrib(a,"spellcheck","false")),e.quirks=$_(e),function(e){e.fire("PostRender")}(e);var o=function(e){return e.getParam("directionality",ls.isRtl()?"rtl":void 0)}(e);if(void 0!==o&&(a.dir=o),n.protect&&e.on("BeforeSetContent",function(e){ft.each(n.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),!1===t&&e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0){var i="";ft.each(e.contentStyles,function(e){i+=e+"\r\n"}),e.dom.addStyle(i)}!function(e,t){var n=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader}(e),r=function(){e.on("remove",function(){return n.unloadAll(t)}),j_(e)};n.loadAll(t,r,r)}(e,e.contentCSS),n.content_style&&function(e,t){var n=pt.fromDom(e.getBody()),r=jt(Ht(n)),a=pt.fromTag("style");En(a,"type","text/css"),Qt(a,pt.fromText(t)),Qt(r,a),e.on("remove",function(){Zt(a)})}(e,n.content_style)},W_=function(e,t){var n=e.settings,r=e.getElement(),a=e.getDoc();n.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline||(a.open(),a.write(e.iframeHTML),a.close()),e.inline&&(U_.addClass(r,"mce-content-body"),e.contentDocument=a=document,e.contentWindow=window,e.bodyElement=r,e.contentAreaContainer=r);var o=e.getBody();o.disabled=!0,e.readonly=!!n.readonly,e.readonly||(e.inline&&"static"===U_.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=e.getParam("content_editable_state",!0)),o.disabled=!1,e.editorUpload=Pb(e),e.schema=Wa(n),e.dom=es(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:function(e){return e.getParam("content_css_cors",!1,"boolean")}(e),referrerPolicy:Wc(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=Pg(F_(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,a,o=t.length,i=e.dom,s="data-mce-"+n;o--;)if((a=(r=t[o]).attr(n))&&!r.attr(s)){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===n?((a=i.serializeStyle(i.parseStyle(a),r.name)).length||(a=null),r.attr(s,a),r.attr(n,a)):"tabindex"===n?(r.attr(s,a),r.attr(n,null)):r.attr(s,e.convertURL(a,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),e.settings.preserve_cdata&&t.addNodeFilter("#cdata",function(t){for(var n=t.length;n--;){var r=t[n];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(r.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n=t.length,r=e.schema.getNonEmptyElements();n--;){var a=t[n];a.isEmpty(r)&&0===a.getAll("br").length&&(a.append(new wm("br",1)).shortEnded=!0)}}),t}(e),e.serializer=Wg(function(e){var t=e.settings;return Ne(Ne({},F_(e)),P_({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,element_format:t.element_format,entities:t.entities,entity_encoding:t.entity_encoding,indent:t.indent,indent_after:t.indent_after,indent_before:t.indent_before,block_elements:t.block_elements,boolean_attributes:t.boolean_attributes,custom_elements:t.custom_elements,extended_valid_elements:t.extended_valid_elements,invalid_elements:t.invalid_elements,invalid_styles:t.invalid_styles,move_caret_before_on_enter_elements:t.move_caret_before_on_enter_elements,non_empty_elements:t.non_empty_elements,schema:t.schema,self_closing_elements:t.self_closing_elements,short_ended_elements:t.short_ended_elements,special:t.special,text_block_elements:t.text_block_elements,text_inline_elements:t.text_inline_elements,valid_children:t.valid_children,valid_classes:t.valid_classes,valid_elements:t.valid_elements,valid_styles:t.valid_styles,verify_html:t.verify_html,whitespace_elements:t.whitespace_elements}))}(e),e),e.selection=xg(e.dom,e.getWin(),e.serializer,e),e.annotator=Td(e),e.formatter=Kb(e),e.undoManager=Qb(e),e._nodeChangeDispatcher=new x_(e),e._selectionOverrides=B_(e),Zw(e),k_(e),dg(e)||S_(e);var i=function(e){return dg(e)?os(null):w_(e)}(e);Xw(e,i),function(e){Fc(e)&&e.on("NodeChange",m(rx,e))}(e),ey(e),function(e){e.fire("PreInit")}(e),function(e){var t=e;return he(e.plugins,"rtc").fold(function(){return t.rtcInstance=lg(e),k.none()},function(n){return k.some(n.setup().then(function(n){return t.rtcInstance=ug(e,n),n.isRemote}))})}(e).fold(function(){q_(e,!1)},function(t){e.setProgressState(!0),t.then(function(t){e.setProgressState(!1),q_(e,t)})})},Y_=es.DOM,G_=function(e){var t=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(e)+"<html><head>";(function(e){return e.getParam("document_base_url","")})(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=function(e){return Uc(e,"body_id","tinymce")}(e),r=function(e){return Uc(e,"body_class","")}(e);return Pc(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Pc(e)+'" />'),t+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>'},K_=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),r=function(e,t,n,r){var a=pt.fromTag("iframe");return zn(a,r),zn(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),bs(a,"tox-edit-area__iframe"),a}(e.id,n,t.height,function(e){return e.getParam("iframe_attrs",{})}(e)).dom;r.onload=function(){r.onload=null,e.fire("load")};var a=function(e,t){if(document.domain!==window.location.hostname&&st.browser.isIE()){var n=$b("mce");e[n]=function(){W_(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Y_.setAttrib(t,"src",r),!0}return!1}(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=G_(e),Y_.add(t.iframeContainer,r),a},Q_=es.DOM,X_=function(e,t,n){var r=Tb.get(n),a=Tb.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=ft.trim(n),r&&-1===ft.inArray(t,n)){if(ft.each(Tb.dependencies(n),function(n){X_(e,t,n)}),e.plugins[n])return;try{var o=new r(e,a,e.$);e.plugins[n]=o,o.init&&(o.init(e,a),t.push(n))}catch(t){!function(e,t,n){var r=ls.translate(["Failed to initialize plugin: {0}",t]);zb(r,n),Ob(e,r)}(e,n,t)}}},J_=function(e){return e.replace(/^\-/,"")},Z_=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},eS=function(e){var t=e.getElement();return e.inline?Z_(null):function(e){var t=Q_.create("div");return Q_.insertAfter(t,e),Z_(t)}(t)},tS=function(e){var t=e.getElement();return e.orgDisplay=t.style.display,N(Jc(e))?function(e){return e.theme.renderUI()}(e):E(Jc(e))?function(e){var t=e.getElement(),n=Jc(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n}(e):eS(e)},nS=function(e){e.fire("ScriptsLoaded"),function(e){var t=ft.trim(qc(e)),n=e.ui.registry.getAll().icons,r=Ne(Ne({},gb.get("default").icons),gb.get(t).icons);se(r,function(t,r){ve(n,r)||e.ui.registry.addIcon(r,t)})}(e),function(e){var t=Jc(e);if(N(t)){e.settings.theme=J_(t);var n=Db.get(t);e.theme=new n(e,Db.urls[t]),e.theme.init&&e.theme.init(e,Db.urls[t]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}}(e),function(e){var t=[];ft.each(tl(e).split(/[ ,]/),function(n){X_(e,t,J_(n))})}(e);var t=tS(e);!function(e,t){var n={show:k.from(t.show).getOr(l),hide:k.from(t.hide).getOr(l),disable:k.from(t.disable).getOr(l),isDisabled:k.from(t.isDisabled).getOr(g),enable:function(){e.mode.isReadOnly()||k.from(t.enable).map(v)}};e.ui=Ne(Ne({},e.ui),n)}(e,k.from(t.api).getOr({}));var n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,function(e){e.contentCSS=e.contentCSS.concat(Rb(e))}(e),e.inline?W_(e):function(e,t){var n=K_(e,t);t.editorContainer&&(Y_.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Y_.isHidden(t.editorContainer)),e.getElement().style.display="none",Y_.setAttrib(e.id,"aria-hidden","true"),n||W_(e)}(e,n)},rS=es.DOM,aS=function(e){return"-"===e.charAt(0)},oS=function(e,t){var n=Yc(t),r=function(e){return e.getParam("language_url","","string")}(t);if(!1===ls.hasCode(n)&&"en"!==n){var a=""!==r?r:t.editorManager.baseURL+"/langs/"+n+".js";e.add(a,l,void 0,function(){!function(e,t,n){Ab(e,"LanguageLoadError",Lb("language",t,n))}(t,a,n)})}},iS=function(e,t,n){return k.from(t).filter(function(e){return e.length>0&&!gb.has(e)}).map(function(t){return{url:e.editorManager.baseURL+"/icons/"+t+"/icons"+n+".js",name:k.some(t)}})},sS=function(e,t,n){var r=iS(t,"default",n),a=function(e){return k.from(function(e){return e.getParam("icons_url","","string")}(e)).filter(function(e){return e.length>0}).map(function(e){return{url:e,name:k.none()}})}(t).orThunk(function(){return iS(t,qc(t),"")});H(function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([r,a]),function(n){e.add(n.url,l,void 0,function(){!function(e,t,n){Ab(e,"IconsLoadError",Lb("icons",t,n))}(t,n.url,n.name.getOrUndefined())})})},cS=function(e,t){var n=as.ScriptLoader;!function(e,t,n,r){var a=Jc(t);if(N(a)){if(!aS(a)&&!Db.urls.hasOwnProperty(a)){var o=function(e){return e.getParam("theme_url")}(t);o?Db.load(a,t.documentBaseURI.toAbsolute(o)):Db.load(a,"themes/"+a+"/theme"+n+".js")}e.loadQueue(function(){Db.waitFor(a,r)})}else r()}(n,e,t,function(){oS(n,e),sS(n,e,t),function(e,t){ft.each(function(e){return e.getParam("external_plugins")}(e),function(t,n){Tb.load(n,t,l,void 0,function(){Eb(e,t,n)}),e.settings.plugins+=" "+n}),ft.each(tl(e).split(/[ ,]/),function(n){if((n=ft.trim(n))&&!Tb.urls[n])if(aS(n)){n=n.substr(1,n.length);var r=Tb.dependencies(n);ft.each(r,function(n){var r={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"},a=Tb.createUrl(r,n);Tb.load(a.resource,a,l,void 0,function(){Eb(e,a.prefix+a.resource+a.suffix,a.resource)})})}else{var a={prefix:"plugins/",resource:n,suffix:"/plugin"+t+".js"};Tb.load(n,a,l,void 0,function(){Eb(e,a.prefix+a.resource+a.suffix,n)})}})}(e,t),n.loadQueue(function(){e.removed||nS(e)},e,function(){e.removed||nS(e)})})},lS=function(e){var t=e.id;ls.setCode(Yc(e));var n=function(){rS.unbind(window,"ready",n),e.render()};if(ko.Event.domLoaded){if(e.getElement()&&st.contentEditable){var r=pt.fromDom(e.getElement()),a=function(e){return G(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}(r);e.on("remove",function(){j(r.dom.attributes,function(e){return Bn(r,e.name)}),zn(r,a)}),e.ui.styleSheetLoader=function(e,t){return Cr.forElement(e,{contentCssCors:function(e){return e.getParam("content_css_cors")}(t),referrerPolicy:Wc(t)})}(r,e),!function(e){return e.getParam("inline")}(e)?(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden"):e.inline=!0;var o=e.getElement().form||rS.getParent(t,"form");o&&(e.formElement=o,function(e){return e.getParam("hidden_input")}(e)&&!xn(e.getElement())&&(rS.insertAfter(rS.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},rS.bind(o,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),!function(e){return e.getParam("submit_patch")}(e)||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),o._mceOldSubmit(o)})),e.windowManager=Ib(e),e.notificationManager=Nb(e),function(e){return"xml"===e.getParam("encoding")}(e)&&e.on("GetContent",function(e){e.save&&(e.content=rS.encode(e.content))}),function(e){return e.getParam("add_form_submit_trigger")}(e)&&e.on("submit",function(){e.initialized&&e.save()}),function(e){return e.getParam("add_unload_trigger")}(e)&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),cS(e,e.suffix)}}else rS.bind(window,"ready",n)},uS=function(e,t){return function(e,t){return mg(e).editor.addVisual(t)}(e,t)},dS={"font-size":"size","font-family":"face"},fS=function(e,t,n){return im(pt.fromDom(n),function(t){return function(t){return Fn(t,e).orThunk(function(){return"font"===xt(t)?he(dS,e).bind(function(e){return Vn(t,e)}):k.none()})}(t)},function(e){return bt(pt.fromDom(t),e)})},mS=function(e){return function(t,n){return k.from(n).map(pt.fromDom).filter(St).bind(function(n){return fS(e,t,n.dom).or(function(e,t){return k.from(es.DOM.getStyle(t,e,!0))}(e,n.dom))}).getOr("")}},pS=mS("font-size"),hS=u(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},mS("font-family")),vS=function(e){return pu(e.getBody()).map(function(e){var t=e.container();return kn(t)?t.parentNode:t})},gS=function(e,t){return function(e){return k.from(e.selection.getRng()).bind(function(t){var n=e.getBody();return t.startContainer===n&&0===t.startOffset?k.none():k.from(e.selection.getStart(!0))})}(e).orThunk(m(vS,e)).map(pt.fromDom).filter(St).map(t)},bS=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=function(e){return ft.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))}(e),a=function(e){return ft.explode(e.getParam("font_size_classes",""))}(e);return a?a[n-1]||t:r[n-1]||t}return t}return t},yS=function(e,t){var n=bS(e,t);e.formatter.toggle("fontname",{value:function(e){var t=e.split(/\s*,\s*/);return F(t,function(e){return-1===e.indexOf(" ")||ze(e,'"')||ze(e,"'")?e:"'"+e+"'"}).join(",")}(n)}),e.nodeChanged()},wS=function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=ft.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);!function(e,t,n){fg(e).editor.insertContent(t,n)}(e,n.content,n.details)},xS=ft.each,kS=ft.map,_S=ft.inArray,SS=function(){function e(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}return e.prototype.execCommand=function(e,t,n,r){var a,o=!1,i=this;if(!i.editor.removed){var s;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus?(s=i.editor,Bf(s).each(function(e){return s.selection.setRng(e)})):i.editor.focus(),(r=i.editor.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented())return!1;var c=e.toLowerCase();if(a=i.commands.exec[c])return a(c,t,n),i.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(xS(this.editor.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return i.editor.fire("ExecCommand",{command:e,ui:t,value:n}),o=!0,!1}),o)return o;if(i.editor.theme&&i.editor.theme.execCommand&&i.editor.theme.execCommand(e,t,n))return i.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{o=i.editor.getDoc().execCommand(e,t,n)}catch(e){}return!!o&&(i.editor.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}},e.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(e){}return!1}},e.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(e){}}},e.prototype.addCommands=function(e,t){void 0===t&&(t="exec");var n=this;xS(e,function(e,r){xS(r.toLowerCase().split(","),function(r){n.commands[t][r]=e})})},e.prototype.addCommand=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,a,o,i){return t.call(n||r.editor,a,o,i)}},e.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(e){}return!1},e.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||r.editor)}},e.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||r.editor)}},e.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},e.prototype.execNativeCommand=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),this.editor.getDoc().execCommand(e,t,n)},e.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},e.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t?{value:t}:void 0),this.editor.nodeChanged()},e.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(e){var t=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(n){var r,a=e.getDoc();try{t.execNativeCommand(n)}catch(e){r=!0}if("paste"!==n||a.queryCommandEnabled(n)||(r=!0),r||!a.queryCommandSupported(n)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");st.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var r=n.substring(7);"full"===r&&(r="justify"),xS("left,center,right,justify".split(","),function(t){r!==t&&e.formatter.remove("align"+t)}),"none"!==r&&t.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(n){var r;t.execNativeCommand(n);var a=e.dom.getParent(e.selection.getNode(),"ol,ul");a&&(r=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)&&(t.storeSelection(),e.dom.split(r,a),t.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){t.toggleFormat(e)},"ForeColor,HiliteColor":function(e,n,r){t.toggleFormat(e,r)},FontName:function(t,n,r){yS(e,r)},FontSize:function(t,n,r){!function(e,t){e.formatter.toggle("fontsize",{value:bS(e,t)}),e.nodeChanged()}(e,r)},LineHeight:function(t,n,r){!function(e,t){e.undoManager.transact(function(){e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})}(e,r)},RemoveFormat:function(t){e.formatter.remove(t)},mceBlockQuote:function(){t.toggleFormat("blockquote")},FormatBlock:function(e,n,r){return t.toggleFormat(r||"p")},mceCleanup:function(){var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},mceRemoveNode:function(n,r,a){var o=a||e.selection.getNode();o!==e.getBody()&&(t.storeSelection(),e.dom.remove(o,!0),t.restoreSelection())},mceSelectNodeDepth:function(t,n,r){var a=0;e.dom.getParent(e.selection.getNode(),function(t){if(1===t.nodeType&&a++===r)return e.selection.select(t),!1},e.getBody())},mceSelectNode:function(t,n,r){e.selection.select(r)},mceInsertContent:function(t,n,r){wS(e,r)},mceInsertRawHTML:function(t,n,r){e.selection.setContent("tiny_mce_marker");var a=e.getContent();e.setContent(a.replace(/tiny_mce_marker/g,function(){return r}))},mceInsertNewLine:function(t,n,r){l_(e,r)},mceToggleFormat:function(e,n,r){t.toggleFormat(r)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Gw(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,n,r){e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceInsertLink:function(t,n,r){"string"==typeof r&&(r={href:r});var a=e.dom.getParent(e.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20"),a&&r.href||e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,a)},selectAll:function(){var t=e.dom.getParent(e.selection.getStart(),Dn);if(t){var n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Kk(e,r),!0}});var n=function(t){return function(){var n=e.selection,r=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks(),a=kS(r,function(n){return!!e.formatter.matchNode(n,t)});return-1!==_S(a,!0)}};t.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return t.isFormatMatch(e)},mceBlockQuote:function(){return t.isFormatMatch("blockquote")},Outdent:function(){return qw(e)},"InsertUnorderedList,InsertOrderedList":function(t){var n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state"),t.addCommands({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),t.addQueryValueHandler("FontName",function(){return function(e){return gS(e,function(t){return hS(e.getBody(),t.dom)}).getOr("")}(e)},this),t.addQueryValueHandler("FontSize",function(){return function(e){return gS(e,function(t){return pS(e.getBody(),t.dom)}).getOr("")}(e)},this),t.addQueryValueHandler("LineHeight",function(){return function(e){return gS(e,function(t){var n=pt.fromDom(e.getBody());return im(t,function(e){return Fn(e,"line-height")},m(bt,n)).getOrThunk(function(){var e=parseFloat(Un(t,"line-height")),n=parseFloat(Un(t,"font-size"));return String(e/n)})}).getOr("")}(e)},this)},e}(),CS=function(e,t,n){ws(e,t)&&!1===n?function(e,t){hs(e)?e.dom.classList.remove(t):gs(e,t);ys(e)}(e,t):n&&bs(e,t)},NS=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},TS=function(e,t){e.dom.contentEditable=t?"true":"false"},DS=function(e,t){var n=pt.fromDom(e.getBody());CS(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),function(e){k.from(e.selection.getNode()).each(function(e){e.removeAttribute("data-mce-selected")})}(e),e.readonly=!0,TS(n,!1),H(ks(n,'*[contenteditable="true"]'),function(e){En(e,"data-mce-contenteditable","true"),TS(e,!1)})):(e.readonly=!1,TS(n,!0),function(e){H(ks(e,'*[data-mce-contenteditable="true"]'),function(e){Bn(e,"data-mce-contenteditable"),TS(e,!0)})}(n),NS(e,"StyleWithCSS",!1),NS(e,"enableInlineTableEditing",!1),NS(e,"enableObjectResizing",!1),Xf(e)&&e.focus(),function(e){e.selection.setRng(e.selection.getRng())}(e),e.nodeChanged())},IS=function(e){return e.readonly},MS=function(e){e.parser.addAttributeFilter("contenteditable",function(t){IS(e)&&H(t,function(e){e.attr("data-mce-contenteditable",e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter("data-mce-contenteditable",function(t){IS(e)&&H(t,function(e){e.attr("contenteditable",e.attr("data-mce-contenteditable"))})}),e.serializer.addTempAttr("data-mce-contenteditable")},OS=function(e,t){if(function(e){return"click"===e.type}(t)&&!Ad.metaKeyPressed(t)){var n=pt.fromDom(t.target);(function(e,t){return vr(t,"a",function(t){return bt(t,pt.fromDom(e.getBody()))}).bind(function(e){return Vn(e,"href")})})(e,n).each(function(n){if(t.preventDefault(),/^#/.test(n)){var r=e.dom.select(n+',[name="'+(ze(a=n,o="#")?function(e,t){return e.substring(t)}(a,o.length):a)+'"]');r.length&&e.selection.scrollIntoView(r[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var a,o})}},AS=ft.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),LS=function(){function e(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||g}return e.isNative=function(e){return!!AS[e.toLowerCase()]},e.prototype.fire=function(e,t){var n=e.toLowerCase(),r=t||{};r.type=n,r.target||(r.target=this.scope),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=b},r.stopPropagation=function(){r.isPropagationStopped=b},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=b},r.isDefaultPrevented=g,r.isPropagationStopped=g,r.isImmediatePropagationStopped=g),this.settings.beforeFire&&this.settings.beforeFire(r);var a=this.bindings[n];if(a)for(var o=0,i=a.length;o<i;o++){var s=a[o];if(s.once&&this.off(n,s.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===s.func.call(this.scope,r))return r.preventDefault(),r}return r},e.prototype.on=function(e,t,n,r){if(!1===t&&(t=g),t){var a={func:t};r&&ft.extend(a,r);for(var o=e.toLowerCase().split(" "),i=o.length;i--;){var s=o[i],c=this.bindings[s];c||(c=this.bindings[s]=[],this.toggleEvent(s,!0)),n?c.unshift(a):c.push(a)}}return this},e.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),a=r.length;a--;){var o=r[a],i=this.bindings[o];if(!o)return se(this.bindings,function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]}),this;if(i){if(t)for(var s=i.length;s--;)i[s].func===t&&(i=i.slice(0,s).concat(i.slice(s+1)),this.bindings[o]=i);else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}else se(this.bindings,function(e,t){n.toggleEvent(t,!1)}),this.bindings={};return this},e.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},e.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},e}(),ES=function(e){return e._eventDispatcher||(e._eventDispatcher=new LS({scope:e,toggleEvent:function(t,n){LS.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},zS={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;var r=ES(this).fire(e,t);if(!1!==n&&this.parent)for(var a=this.parent();a&&!r.isPropagationStopped();)a.fire(e,r,!1),a=a.parent();return r},on:function(e,t,n){return ES(this).on(e,t,n)},off:function(e,t){return ES(this).off(e,t)},once:function(e,t){return ES(this).once(e,t)},hasEventListeners:function(e){return ES(this).has(e)}},RS=es.DOM,VS=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;var n=Qc(e);return n?(e.eventRoot||(e.eventRoot=RS.select(n)[0]),e.eventRoot):e.getBody()},BS=function(e,t,n){!function(e){return!e.hidden&&!IS(e)}(e)?IS(e)&&OS(e,n):e.fire(t,n)},$S=function(e,t){var n;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var r=VS(e,t);if(Qc(e)){if(wx||(wx={},e.editorManager.on("removeEditor",function(){e.editorManager.activeEditor||wx&&(se(wx,function(t,n){e.dom.unbind(VS(e,n))}),wx=null)})),wx[t])return;n=function(n){for(var r=n.target,a=e.editorManager.get(),o=a.length;o--;){var i=a[o].getBody();(i===r||RS.isChildOf(r,i))&&BS(a[o],t,n)}},wx[t]=n,RS.bind(r,t,n)}else n=function(n){BS(e,t,n)},RS.bind(r,t,n),e.delegates[t]=n}},US=Ne(Ne({},zS),{bindPendingEventDelegates:function(){var e=this;ft.each(e._pendingNativeEvents,function(t){$S(e,t)})},toggleNativeEvent:function(e,t){"focus"!==e&&"blur"!==e&&(t?this.initialized?$S(this,e):this._pendingNativeEvents?this._pendingNativeEvents.push(e):this._pendingNativeEvents=[e]:this.initialized&&(this.dom.unbind(VS(this,e),e,this.delegates[e]),delete this.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t=e.getBody(),n=e.dom;e.delegates&&(se(e.delegates,function(t,n){e.dom.unbind(VS(e,n),n,t)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),PS=["design","readonly"],FS=function(e,t,n,r){var a=n[t.get()],o=n[r];try{o.activate()}catch(e){return void console.error("problem while activating editor mode "+r+":",e)}a.deactivate(),a.editorReadOnly!==o.editorReadOnly&&DS(e,o.editorReadOnly),t.set(r),function(e,t){e.fire("SwitchMode",{mode:t})}(e,r)},HS=function(e){var t=os("design"),n=os({design:{activate:l,deactivate:l,editorReadOnly:!1},readonly:{activate:l,deactivate:l,editorReadOnly:!0}});return function(e){e.serializer?MS(e):e.on("PreInit",function(){MS(e)})}(e),function(e){e.on("ShowCaret",function(t){IS(e)&&t.preventDefault()}),e.on("ObjectSelected",function(t){IS(e)&&t.preventDefault()})}(e),{isReadOnly:function(){return IS(e)},set:function(r){return function(e,t,n,r){if(r!==n.get()){if(!ve(t,r))throw new Error("Editor mode '"+r+"' is invalid");e.initialized?FS(e,n,t,r):e.on("init",function(){return FS(e,n,t,r)})}}(e,n.get(),t,r)},get:function(){return t.get()},register:function(e,t){n.set(function(e,t,n){var r;if(U(PS,t))throw new Error("Cannot override default mode "+t);return Ne(Ne({},e),((r={})[t]=Ne(Ne({},n),{deactivate:function(){try{n.deactivate()}catch(e){console.error("problem while deactivating editor mode "+t+":",e)}}}),r))}(n.get(),e,t))}}},jS=ft.each,qS=ft.explode,WS={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},YS=ft.makeMap("alt,ctrl,shift,meta,access"),GS=function(){function e(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",function(e){!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(jS(t.shortcuts,function(n){if(t.matchShortcut(e,n))return t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n),!0}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}return e.prototype.add=function(e,t,n,r){var a=this,o=a.normalizeCommandFunc(n);return jS(qS(ft.trim(e)),function(e){var n=a.createShortcut(e,t,o,r);a.shortcuts[n.id]=n}),!0},e.prototype.remove=function(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)},e.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:ft.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},e.prototype.parseShortcut=function(e){var t,n={};jS(qS(e.toLowerCase(),"+"),function(e){e in YS?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=WS[e]||e.toUpperCase().charCodeAt(0))});var r=[n.keyCode];for(t in YS)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,st.mac?n.ctrl=!0:n.shift=!0),n.meta&&(st.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},e.prototype.createShortcut=function(e,t,n,r){var a=ft.map(qS(e,">"),this.parseShortcut);return a[a.length-1]=ft.extend(a[a.length-1],{func:n,scope:r||this.editor}),ft.extend(a[0],{desc:this.editor.translate(t),subpatterns:a.slice(1)})},e.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},e.prototype.isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},e.prototype.matchShortcut=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},e.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},e}(),KS=function(){var e,t,n,r,a,o,i,s,c=(t={},n={},r={},a={},o={},i={},{addButton:(s=function(e,t){return function(n,r){return e[n.toLowerCase()]=Ne(Ne({},r),{type:t})}})(e={},"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(a,"contextmenu"),addContextToolbar:s(o,"contexttoolbar"),addContextForm:s(o,"contextform"),addSidebar:s(i,"sidebar"),addIcon:function(e,t){return r[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:a,contextToolbars:o,sidebars:i}}});return{addAutocompleter:c.addAutocompleter,addButton:c.addButton,addContextForm:c.addContextForm,addContextMenu:c.addContextMenu,addContextToolbar:c.addContextToolbar,addIcon:c.addIcon,addMenuButton:c.addMenuButton,addMenuItem:c.addMenuItem,addNestedMenuItem:c.addNestedMenuItem,addSidebar:c.addSidebar,addSplitButton:c.addSplitButton,addToggleButton:c.addToggleButton,addGroupToolbarButton:c.addGroupToolbarButton,addToggleMenuItem:c.addToggleMenuItem,getAll:c.getAll}},QS=ft.each,XS=ft.trim,JS="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ZS={ftp:21,http:80,https:443,mailto:25},eC=function(){function e(t,n){t=XS(t),this.settings=n||{};var r=this.settings.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))a.source=t;else{var o=0===t.indexOf("//");if(0!==t.indexOf("/")||o||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){var i=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+a.toAbsPath(i,t);else{var s=/([^#?]*)([#?]?.*)/.exec(t);t=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(i,s[1])+s[2]}}t=t.replace(/@@/g,"(mce_at)");var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);QS(JS,function(e,t){var n=c[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),a[e]=n}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),a.port||"mce_host"!==a.host||(a.port=r.port),a.host&&"mce_host"!==a.host||(a.host=r.host),a.source=""),o&&(a.protocol="")}}return e.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},e.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},e.prototype.setPath=function(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0],this.directory=t[1],this.file=t[2],this.source="",this.getURI()},e.prototype.toRelative=function(t){var n;if("./"===t)return t;var r=new e(t,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();var a=this.getURI(),o=r.getURI();return a===o||"/"===a.charAt(a.length-1)&&a.substr(0,a.length-1)===o?a:(n=this.toRelPath(this.path,r.path),r.query&&(n+="?"+r.query),r.anchor&&(n+="#"+r.anchor),n)},e.prototype.toAbsolute=function(t,n){var r=new e(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))},e.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=ZS[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},e.prototype.toRelPath=function(e,t){var n,r,a=0,o="",i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(n=0,r=i.length;n<r;n++)if(n>=s.length||i[n]!==s[n]){a=n+1;break}if(i.length<s.length)for(n=0,r=s.length;n<r;n++)if(n>=i.length||i[n]!==s[n]){a=n+1;break}if(1===a)return t;for(n=0,r=i.length-(a-1);n<r;n++)o+="../";for(n=a-1,r=s.length;n<r;n++)o+=n!==a-1?"/"+s[n]:s[n];return o},e.prototype.toAbsPath=function(e,t){var n,r,a=0,o=[],i=/\/$/.test(t)?"/":"",s=e.split("/"),c=t.split("/");for(QS(s,function(e){e&&o.push(e)}),s=o,n=c.length-1,o=[];n>=0;n--)0!==c[n].length&&"."!==c[n]&&(".."!==c[n]?a>0?a--:o.push(c[n]):a++);return 0!==(r=(n=s.length-a)<=0?Z(o).join("/"):s.slice(0,n).join("/")+"/"+Z(o).join("/")).indexOf("/")&&(r="/"+r),i&&r.lastIndexOf("/")!==r.length-1&&(r+=i),r},e.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},e}(),tC=es.DOM,nC=ft.extend,rC=ft.each,aC=ft.resolve,oC=st.ie,iC=function(){function e(e,t,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,nC(this,US),this.settings=pb(this,e,this.documentBaseUrl,n.defaultSettings,t),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(as.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),es.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),ds.languageLoad=this.settings.language_load,ds.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new eC(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new GS(this),this.editorCommands=new SS(this),this.settings.cache_suffix&&(st.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:KS(),styleSheetLoader:void 0,show:l,hide:l,enable:l,disable:l,isDisabled:g};var a=HS(this);this.mode=a,this.setMode=a.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=qi.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}return e.prototype.render=function(){lS(this)},e.prototype.focus=function(e){Zf(this,e)},e.prototype.hasFocus=function(){return Qf(this)},e.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,a=this.settings[e];if(a)return this.callbackLookup&&(r=this.callbackLookup[e])&&(a=r.func,r=r.scope),"string"==typeof a&&(r=(r=a.replace(/\.\w+$/,""))?aC(r):0,a=aC(a),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:a,scope:r}),a.apply(r||this,t)},e.prototype.translate=function(e){return ls.translate(e)},e.prototype.getParam=function(e,t,n){return vb(this,e,t,n)},e.prototype.hasPlugin=function(e,t){return!!U(tl(this).split(/[ ,]/),e)&&(!t||void 0!==Tb.get(e))},e.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},e.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},e.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},e.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},e.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)},e.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},e.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},e.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},e.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},e.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(tC.show(this.getContainer()),tC.hide(this.id)),this.load(),this.fire("show"))},e.prototype.hide=function(){var e=this.getDoc();this.hidden||(oC&&e&&!this.inline&&e.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(tC.hide(this.getContainer()),tC.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},e.prototype.load=function(e){var t,n=this.getElement();if(this.removed)return"";if(n){(e=e||{}).load=!0;var r=xn(n)?n.value:n.innerHTML;return t=this.setContent(r,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t}},e.prototype.save=function(e){var t,n,r=this,a=r.getElement();if(a&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=a,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,xn(a)?a.value=t:(!e.is_removing&&r.inline||(a.innerHTML=t),(n=tC.getParent(r.id,"form"))&&rC(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=a=null,!1!==e.set_dirty&&r.setDirty(!1),t},e.prototype.setContent=function(e,t){return Gg(this,e,t)},e.prototype.getContent=function(e){return Yg(this,e)},e.prototype.insertContent=function(e,t){t&&(e=nC({content:e},t)),this.execCommand("mceInsertContent",!1,e)},e.prototype.resetContent=function(e){void 0===e?Gg(this,this.startContent,{format:"raw"}):Gg(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},e.prototype.getContainer=function(){return this.container||(this.container=tC.get(this.editorContainer||this.id+"_parent")),this.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=tC.get(this.id)),this.targetElm},e.prototype.getWin=function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},e.prototype.getDoc=function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},e.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},e.prototype.convertURL=function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},e.prototype.addVisual=function(e){uS(this,e)},e.prototype.remove=function(){Xg(this)},e.prototype.destroy=function(e){Jg(this,e)},e.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),sC=es.DOM,cC=ft.explode,lC=ft.each,uC=ft.extend,dC=0,fC=!1,mC=[],pC=[],hC=function(e){var t=e.type;lC(yC.get(),function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}})},vC=function(e){e!==fC&&(e?qi(window).on("resize scroll",hC):qi(window).off("resize scroll",hC),fC=e)},gC=function(e){var t=pC;delete mC[e.id];for(var n=0;n<mC.length;n++)if(mC[n]===e){mC.splice(n,1);break}return pC=W(pC,function(t){return e!==t}),yC.activeEditor===e&&(yC.activeEditor=pC.length>0?pC[0]:null),yC.focusedEditor===e&&(yC.focusedEditor=null),t.length!==pC.length},bC="CSS1Compat"!==document.compatMode,yC=Ne(Ne({},zS),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:qi,majorVersion:"5",minorVersion:"6.2",releaseDate:"2020-12-08",editors:mC,i18n:ls,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t,n="";t=eC.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"));var r,a=window.tinymce||window.tinyMCEPreInit;if(a)e=a.base||a.baseURL,n=a.suffix;else{for(var o=document.getElementsByTagName("script"),i=0;i<o.length;i++){var s;if(""!==(s=o[i].src||"")){var c=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==c.indexOf(".min")&&(n=".min"),e=s.substring(0,s.lastIndexOf("/"));break}}}if(!e&&document.currentScript)-1!==(s=document.currentScript.src).indexOf(".min")&&(n=".min"),e=s.substring(0,s.lastIndexOf("/"))}this.baseURL=new eC(t).toAbsolute(e),this.documentBaseURL=t,this.baseURI=new eC(this.baseURL),this.suffix=n,(r=this).on("AddEditor",m(jf,r)),r.on("RemoveEditor",m(qf,r))},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);var n=e.suffix;e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;void 0!==r&&se(r,function(e,t){ds.PluginManager.urls[t]=e})},init:function(e){var t,n=this,r=ft.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=function(e){var t=e.id;return t||(t=he(e,"name").filter(function(e){return!sC.get(e)}).getOrThunk(sC.uniqueId),e.setAttribute("id",t)),t},o=function(e,t){return t.constructor===RegExp?t.test(e.className):sC.hasClass(e,t)},i=function(e){t=e},s=function(){var t,c=0,l=[],u=function(e,r,a){var o=new iC(e,r,n);l.push(o),o.on("init",function(){++c===t.length&&i(l)}),o.targetElm=o.targetElm||a,o.render()};sC.unbind(window,"ready",s),function(t){var r=e[t];if(r)r.apply(n,Array.prototype.slice.call(arguments,2))}("onpageload"),t=qi.unique(function(e){var t=[];if(st.browser.isIE()&&st.browser.version.major<11)return zb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(bC)return zb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(e.types)return lC(e.types,function(e){t=t.concat(sC.select(e.selector))}),t;if(e.selector)return sC.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":var n=e.elements||"";n.length>0&&lC(cC(n),function(e){var n=sC.get(e);n?t.push(n):lC(document.forms,function(n){lC(n.elements,function(n){n.name===e&&(e="mce_editor_"+dC++,sC.setAttrib(n,"id",e),t.push(n))})})});break;case"textareas":case"specific_textareas":lC(sC.select("textarea"),function(n){e.editor_deselector&&o(n,e.editor_deselector)||e.editor_selector&&!o(n,e.editor_selector)||t.push(n)})}return t}(e)),e.types?lC(e.types,function(n){ft.each(t,function(t){return!sC.is(t,n.selector)||(u(a(t),uC({},e,n),t),!1)})}):(ft.each(t,function(e){var t;(t=n.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(gC(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(t=ft.grep(t,function(e){return!n.get(e.id)})).length?i([]):lC(t,function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in r}(e,t)?u(a(t),e,t):zb("Could not initialize inline editor on invalid inline target element",t)}))};return n.settings=e,sC.bind(window,"ready",s),new gr(function(e){t?e(t):i=function(t){e(t)}})},get:function(e){return 0===arguments.length?pC.slice(0):N(e)?K(pC,function(t){return t.id===e}).getOr(null):z(e)&&pC[e]?pC[e]:null},add:function(e){var t=this;return mC[e.id]===e?e:(null===t.get(e.id)&&("length"!==e.id&&(mC[e.id]=e),mC.push(e),pC.push(e)),vC(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),xx||(xx=function(e){var n=t.fire("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",xx)),e)},createEditor:function(e,t){return this.add(new iC(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!N(e))return n=e,I(r.get(n.id))?null:(gC(n)&&r.fire("RemoveEditor",{editor:n}),0===pC.length&&window.removeEventListener("beforeunload",xx),n.remove(),vC(pC.length>0),n);lC(sC.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=pC.length-1;t>=0;t--)r.remove(pC[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new iC(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){lC(pC,function(e){e.save()})},addI18n:function(e,t){ls.add(e,t)},translate:function(e){return ls.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new eC(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new eC(this.baseURL)}});yC.setup();var wC,xC,kC,_C,SC=Math.min,CC=Math.max,NC=Math.round,TC=function(e,t,n){var r=t.x,a=t.y,o=e.w,i=e.h,s=t.w,c=t.h,l=(n||"").split("");return"b"===l[0]&&(a+=c),"r"===l[1]&&(r+=s),"c"===l[0]&&(a+=NC(c/2)),"c"===l[1]&&(r+=NC(s/2)),"b"===l[3]&&(a-=i),"r"===l[4]&&(r-=o),"c"===l[3]&&(a-=NC(i/2)),"c"===l[4]&&(r-=NC(o/2)),DC(r,a,o,i)},DC=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},IC={inflate:function(e,t,n){return DC(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:TC,findBestRelativePosition:function(e,t,n,r){var a,o;for(o=0;o<r.length;o++)if((a=TC(e,t,r[o])).x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return r[o];return null},intersect:function(e,t){var n=CC(e.x,t.x),r=CC(e.y,t.y),a=SC(e.x+e.w,t.x+t.w),o=SC(e.y+e.h,t.y+t.h);return a-n<0||o-r<0?null:DC(n,r,a-n,o-r)},clamp:function(e,t,n){var r=e.x,a=e.y,o=e.x+e.w,i=e.y+e.h,s=t.x+t.w,c=t.y+t.h,l=CC(0,t.x-r),u=CC(0,t.y-a),d=CC(0,o-s),f=CC(0,i-c);return r+=l,a+=u,n&&(o+=l,i+=u,r-=d,a-=f),DC(r,a,(o-=d)-r,(i-=f)-a)},create:DC,fromClientRect:function(e){return DC(e.left,e.top,e.width,e.height)}},MC=(wC={},xC={},{load:function(e,t){var n='Script at URL "'+t+'" failed to load',r='Script at URL "'+t+"\" did not call `tinymce.Resource.add('"+e+"', data)` within 1 second";if(void 0!==wC[e])return wC[e];var a=new gr(function(a,o){var i=function(e,t,n){void 0===n&&(n=1e3);var r=!1,a=null,o=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r||(r=!0,null!==a&&(clearTimeout(a),a=null),e.apply(null,t))}},i=o(e),s=o(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==a||(a=setTimeout(function(){return s.apply(null,e)},n))},resolve:i,reject:s}}(a,o);xC[e]=i.resolve,as.ScriptLoader.loadScript(t,function(){return i.start(r)},function(){return i.reject(n)})});return wC[e]=a,a},add:function(e,t){void 0!==xC[e]&&(xC[e](t),delete xC[e]),wC[e]=gr.resolve(t)}}),OC=ft.each,AC=ft.extend,LC=function(){};LC.extend=kC=function(e){var t=this.prototype,n=function(){var e,t,n;if(!_C&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},r=function(){return this};_C=!0;var a=new this;return _C=!1,e.Mixins&&(OC(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),t.Mixins&&(e.Mixins=t.Mixins.concat(e.Mixins))),e.Methods&&OC(e.Methods.split(","),function(t){e[t]=r}),e.Properties&&OC(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&OC(e.Statics,function(e,t){n[t]=e}),e.Defaults&&t.Defaults&&(e.Defaults=AC({},t.Defaults,e.Defaults)),se(e,function(e,n){"function"==typeof e&&t[n]?a[n]=function(e,n){return function(){var r=this._super;this._super=t[e];var a=n.apply(this,arguments);return this._super=r,a}}(n,e):a[n]=e}),n.prototype=a,n.constructor=n,n.extend=kC,n};var EC,zC=Math.min,RC=Math.max,VC=Math.round,BC={serialize:function(e){var t=JSON.stringify(e);return N(t)?t.replace(/[\u0080-\uFFFF]/g,function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t}):t},parse:function(e){try{return JSON.parse(e)}catch(e){}}},$C={callbacks:{},count:0,send:function(e){var t=this,n=es.DOM,r=void 0!==e.count?e.count:t.count,a="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(a),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:a,src:e.url,type:"text/javascript"}),t.count++}},UC=Ne(Ne({},zS),{send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):xr.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",UC.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&ft.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=UC.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();xr.setTimeout(r,10)}}),PC=ft.extend,FC=function(){function e(e){this.settings=PC({},e),this.count=0}return e.sendRPC=function(t){return(new e).send(t)},e.prototype.send=function(e){var t=e.error,n=e.success,r=PC(this.settings,e);r.success=function(e,a){void 0===(e=BC.parse(e))&&(e={error:"JSON Parse error."}),e.error?t.call(r.error_scope||r.scope,e.error,a):n.call(r.success_scope||r.scope,e.result)},r.error=function(e,n){t&&t.call(r.error_scope||r.scope,e,n)},r.data=BC.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),r.content_type="application/json",UC.send(r)},e}();try{var HC="__storage_test__";(EC=window.localStorage).setItem(HC,HC),EC.removeItem(HC)}catch(e){EC=function(){return e={},t=[],n={getItem:function(t){var n=e[t];return n||null},setItem:function(n,r){t.push(n),e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter(function(e){return e===n}),delete e[n]},clear:function(){t=[],e={}},length:0},Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n;var e,t,n}()}var jC={geom:{Rect:IC},util:{Promise:gr,Delay:xr,Tools:ft,VK:Ad,URI:eC,Class:LC,EventDispatcher:LS,Observable:zS,I18n:ls,XHR:UC,JSON:BC,JSONRequest:FC,JSONP:$C,LocalStorage:EC,Color:function(e){var t={},n=0,r=0,a=0,o=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,a=e.b):"v"in e&&function(e,t,o){if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=RC(0,zC(t,1)),o=RC(0,zC(o,1)),0!==t){var i=e/60,s=o*t,c=s*(1-Math.abs(i%2-1)),l=o-s;switch(Math.floor(i)){case 0:n=s,r=c,a=0;break;case 1:n=c,r=s,a=0;break;case 2:n=0,r=s,a=c;break;case 3:n=0,r=c,a=s;break;case 4:n=c,r=0,a=s;break;case 5:n=s,r=0,a=c;break;default:n=r=a=0}n=VC(255*(n+l)),r=VC(255*(r+l)),a=VC(255*(a+l))}else n=r=a=VC(255*o)}(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),a=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),a=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),a=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,a=a<0?0:a>255?255:a,t};return e&&o(e),t.toRgb=function(){return{r:n,g:r,b:a}},t.toHsv=function(){return function(e,t,n){var r,a;a=0;var o=zC(e/=255,zC(t/=255,n/=255)),i=RC(e,RC(t,n));return o===i?{h:0,s:0,v:100*(a=o)}:(r=(i-o)/i,a=i,{h:VC(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/(i-o))),s:VC(100*r),v:VC(100*a)})}(n,r,a)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(a)},t.parse=o,t}},dom:{EventUtils:ko,Sizzle:oi,DomQuery:qi,TreeWalker:Nr,TextSeeker:Vs,DOMUtils:es,ScriptLoader:as,RangeUtils:Qd,Serializer:Wg,StyleSheetLoader:kr,ControlSelection:Ed,BookmarkManager:Id,Selection:xg,Event:ko.Event},html:{Styles:fo,Entities:za,Node:wm,Schema:Wa,SaxParser:Lm,DomParser:Pg,Writer:km,Serializer:_m},Env:st,AddOnManager:ds,Annotator:Td,Formatter:Kb,UndoManager:Qb,EditorCommands:SS,WindowManager:Ib,NotificationManager:Nb,EditorObservable:US,Shortcuts:GS,Editor:iC,FocusManager:$f,EditorManager:yC,DOM:es.DOM,ScriptLoader:as.ScriptLoader,PluginManager:Tb,ThemeManager:Db,IconManager:gb,Resource:MC,trim:ft.trim,isArray:ft.isArray,is:ft.is,toArray:ft.toArray,makeMap:ft.makeMap,each:ft.each,map:ft.map,grep:ft.grep,inArray:ft.inArray,extend:ft.extend,create:ft.create,walk:ft.walk,createNS:ft.createNS,resolve:ft.resolve,explode:ft.explode,_addCacheSuffix:ft._addCacheSuffix,isOpera:st.opera,isWebKit:st.webkit,isIE:st.ie,isGecko:st.gecko,isMac:st.mac},qC=ft.extend(yC,jC);!function(e){window.tinymce=e,window.tinyMCE=e}(qC),function(t){try{e.exports=t}catch(e){}}(qC)}()}).call(t,n("DuR2"))},"5qmP":function(e,t){},"6+GR":function(e,t){},"67JE":function(e,t){},"6WZA":function(e,t){},"6Y/t":function(e,t){},"6YwY":function(e,t){},"6s9+":function(e,t){},"7Doy":function(e,t,n){var r=n("EqjI"),a=n("7UMu"),o=n("dSzd")("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"7koX":function(e,t){},"7lOs":function(e,t){},"80Q3":function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement;return(this._self._c||e)("a-layout-footer",{staticClass:"myfooter"},[this._v("\n  小耳朵平台 ©2019-2020 Created by xiaoerd.com\n")])},staticRenderFns:[]};var a=n("VU/8")({name:"myfooter"},r,!1,function(e){n("iVmp")},"data-v-ce302fac",null);t.a=a.exports},"8vsi":function(e,t){},"8xIt":function(e,t){},"981K":function(e,t){},"9Bbf":function(e,t,n){"use strict";var r=n("kM2E");e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,n){"use strict";var r=n("evD5").f,a=n("Yobk"),o=n("xH/j"),i=n("+ZMJ"),s=n("2KxR"),c=n("NWt+"),l=n("vIB/"),u=n("EGZi"),d=n("bRrM"),f=n("+E39"),m=n("06OY").fastKey,p=n("LIJb"),h=f?"_s":"size",v=function(e,t){var n,r=m(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=r&&c(r,n,e[l],e)});return o(u.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var n=p(this,t),r=v(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[h]--}return!!r},forEach:function(e){p(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),f&&r(u.prototype,"size",{get:function(){return p(this,t)[h]}}),u},def:function(e,t,n){var r,a,o=v(e,t);return o?o.v=n:(e._l=o={i:a=m(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[h]++,"F"!==a&&(e._i[a]=o)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},"9Q4h":function(e,t){},"9uo1":function(e,t){},A429:function(e,t){},AHki:function(e,t){},ALrJ:function(e,t,n){var r=n("+ZMJ"),a=n("MU5D"),o=n("sB3e"),i=n("QRG4"),s=n("oeOm");e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,d=6==e,f=5==e||d,m=t||s;return function(t,s,p){for(var h,v,g=o(t),b=a(g),y=r(s,p,3),w=i(b.length),x=0,k=n?m(t,w):c?m(t,0):void 0;w>x;x++)if((f||x in b)&&(v=y(h=b[x],x,g),e))if(n)k[x]=v;else if(v)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:k.push(h)}else if(u)return!1;return d?-1:l||u?u:k}}},Abny:function(e,t,n){n("tfhO")},Aenb:function(e,t,n){(function(e){!function(){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},r=function(e){return function(){return e}},a=function(e){return e};function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=t.concat(n);return e.apply(null,a)}}var i=function(e){return function(t){return!e(t)}},s=function(e){return function(){throw new Error(e)}},c=r(!1),l=r(!0),u=tinymce.util.Tools.resolve("tinymce.ThemeManager"),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}var p,h=function(){return v},v=function(){var e=function(e){return e.isNone()},n=function(e){return e()},a=function(e){return e};return{fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:a,getOrThunk:n,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:a,orThunk:n,map:h,each:t,bind:h,exists:c,forall:l,filter:h,equals:e,equals_:e,toArray:function(){return[]},toString:r("none()")}}(),g=function(e){var t=r(e),n=function(){return o},a=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},each:function(t){t(e)},bind:a,exists:a,forall:a,filter:function(t){return t(e)?o:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,function(t){return n(e,t)})}};return o},b={some:g,none:h,from:function(e){return null===e||void 0===e?v:g(e)}},y=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},w=function(e){return function(t){return typeof t===e}},x=y("string"),k=y("object"),_=y("array"),S=w("boolean"),C=function(e){return function(t){return e===t}}(void 0),N=function(e){return!function(e){return null===e||void 0===e}(e)},T=w("function"),D=w("number"),I=function(e,t){if(_(e)){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},M=Array.prototype.slice,O=Array.prototype.indexOf,A=Array.prototype.push,L=function(e,t){return O.call(e,t)},E=function(e,t){var n=L(e,t);return-1===n?b.none():b.some(n)},z=function(e,t){return L(e,t)>-1},R=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},V=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},B=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var a=M.call(e,r,r+t);n.push(a)}return n},$=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var o=e[a];r[a]=t(o,a)}return r},U=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},P=function(e,t){for(var n=[],r=[],a=0,o=e.length;a<o;a++){var i=e[a];(t(i,a)?n:r).push(i)}return{pass:n,fail:r}},F=function(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var o=e[r];t(o,r)&&n.push(o)}return n},H=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,function(e){n=t(n,e)}),n},j=function(e,t,n){return U(e,function(e){n=t(n,e)}),n},q=function(e,t){return function(e,t,n){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t(o,r))return b.some(o);if(n(o,r))break}return b.none()}(e,t,c)},W=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return b.some(n)}return b.none()},Y=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!_(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);A.apply(t,e[n])}return t},G=function(e,t){return Y($(e,t))},K=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},Q=function(e){var t=M.call(e,0);return t.reverse(),t},X=function(e,t){return F(e,function(e){return!z(t,e)})},J=function(e,t){var n=M.call(e,0);return n.sort(t),n},Z=function(e,t){return t>=0&&t<e.length?b.some(e[t]):b.none()},ee=function(e){return Z(e,0)},te=function(e){return Z(e,e.length-1)},ne=T(Array.from)?Array.from:function(e){return M.call(e)},re=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return b.none()},ae=function(e){return{is:function(t){return e===t},isValue:l,isError:c,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(t){return ae(e)},orThunk:function(t){return ae(e)},fold:function(t,n){return n(e)},map:function(t){return ae(t(e))},mapError:function(t){return ae(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return b.some(e)}}},oe=function(e){return{is:c,isValue:c,isError:l,getOr:a,getOrThunk:function(e){return e()},getOrDie:function(){return s(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return oe(e)},mapError:function(t){return oe(t(e))},each:t,bind:function(t){return oe(e)},exists:c,forall:l,toOptional:b.none}},ie={value:ae,error:oe,fromOption:function(e,t){return e.fold(function(){return oe(t)},ae)}};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(p||(p={}));var se=function(e,t,n){return e.stype===p.Error?t(e.serror):n(e.svalue)},ce=function(e){return{stype:p.Value,svalue:e}},le=function(e){return{stype:p.Error,serror:e}},ue=function(e){return e.fold(le,ce)},de=function(e){return se(e,ie.error,ie.value)},fe=ce,me=function(e){var t=[],n=[];return U(e,function(e){se(e,function(e){return n.push(e)},function(e){return t.push(e)})}),{values:t,errors:n}},pe=le,he=function(e,t){return e.stype===p.Value?t(e.svalue):e},ve=function(e,t){return e.stype===p.Error?t(e.serror):e},ge=function(e,t){return e.stype===p.Value?{stype:p.Value,svalue:t(e.svalue)}:e},be=function(e,t){return e.stype===p.Error?{stype:p.Error,serror:t(e.serror)}:e},ye=Object.keys,we=Object.hasOwnProperty,xe=function(e,t){for(var n=ye(e),r=0,a=n.length;r<a;r++){var o=n[r];t(e[o],o)}},ke=function(e,t){return _e(e,function(e,n){return{k:n,v:t(e,n)}})},_e=function(e,t){var n={};return xe(e,function(e,r){var a=t(e,r);n[a.k]=a.v}),n},Se=function(e,n){var r,a={};return function(e,t,n,r){xe(e,function(e,a){(t(e,a)?n:r)(e,a)})}(e,n,(r=a,function(e,t){r[t]=e}),t),a},Ce=function(e,t){var n=[];return xe(e,function(e,r){n.push(t(e,r))}),n},Ne=function(e,t){for(var n=ye(e),r=0,a=n.length;r<a;r++){var o=n[r],i=e[o];if(t(i,o,e))return b.some(i)}return b.none()},Te=function(e){return Ce(e,function(e){return e})},De=function(e,t){return Ie(e,t)?b.from(e[t]):b.none()},Ie=function(e,t){return we.call(e,t)},Me=function(e,t){return Ie(e,t)&&void 0!==e[t]&&null!==e[t]},Oe=function(e){if(!_(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return U(e,function(r,a){var o=ye(r);if(1!==o.length)throw new Error("one and only one name per case");var i=o[0],s=r[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!_(s))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[a].apply(null,r)},match:function(e){var n=ye(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!K(t,function(e){return z(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:i,params:r})}}}}),n},Ae=Object.prototype.hasOwnProperty,Le=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},a=0;a<t.length;a++){var o=t[a];for(var i in o)Ae.call(o,i)&&(r[i]=e(r[i],o[i]))}return r}},Ee=Le(function(e,t){return k(e)&&k(t)?Ee(e,t):t}),ze=Le(function(e,t){return t}),Re=function(e){var t,n=!1;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return n||(n=!0,t=e.apply(null,r)),t}},Ve=Oe([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Be=function(e){return Ve.defaultedThunk(r(e))},$e=Ve.strict,Ue=Ve.asOption,Pe=Ve.defaultedThunk,Fe=(Ve.asDefaultedOptionThunk,Ve.mergeWithThunk),He=(Oe([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e,t){var n;return(n={})[e]=t,n}),je=function(e,t){return function(e,t){var n={};return xe(e,function(e,r){z(t,r)||(n[r]=e)}),n}(e,t)},qe=function(e,t){return He(e,t)},We=function(e){return function(e){var t={};return U(e,function(e){t[e.key]=e.value}),t}(e)},Ye=function(e,t){var n,r,a=(n=[],r=[],U(e,function(e){e.fold(function(e){n.push(e)},function(e){r.push(e)})}),{errors:n,values:r});return a.errors.length>0?function(e){return ie.error(Y(e))}(a.errors):function(e,t){return 0===e.length?ie.value(t):ie.value(Ee(t,ze.apply(void 0,e)))}(a.values,t)},Ge=function(e){return n(pe,Y)(e)},Ke=function(e,t){var n=me(e);return n.errors.length>0?Ge(n.errors):function(e,t){return e.length>0?fe(Ee(t,ze.apply(void 0,e))):fe(t)}(n.values,t)},Qe=function(e){var t=me(e);return t.errors.length>0?Ge(t.errors):fe(t.values)},Xe=function(e){return k(e)&&ye(e).length>100?" removed due to size":JSON.stringify(e,null,2)},Je=function(e,t){return pe([{path:e,getErrorInfo:t}])},Ze=Oe([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),et=function(e,t,n){return De(t,n).fold(function(){return function(e,t,n){return Je(e,function(){return'Could not find valid *strict* value for "'+t+'" in '+Xe(n)})}(e,n,t)},fe)},tt=function(e,t,n){var r=De(e,t).fold(function(){return n(e)},a);return fe(r)},nt=function(e,t,n,a){return n.fold(function(n,o,i,s){var c=function(t){var r=s.extract(e.concat([n]),a,t);return ge(r,function(e){return He(o,a(e))})},l=function(t){return t.fold(function(){var e=He(o,a(b.none()));return fe(e)},function(t){var r=s.extract(e.concat([n]),a,t);return ge(r,function(e){return He(o,a(b.some(e)))})})};return i.fold(function(){return he(et(e,t,n),c)},function(e){return he(tt(t,n,e),c)},function(){return he(function(e,t){return fe(De(e,t))}(t,n),l)},function(e){return he(function(e,t,n){var r=De(e,t).map(function(t){return!0===t?n(e):t});return fe(r)}(t,n,e),l)},function(e){var a=e(t),o=ge(tt(t,n,r({})),function(e){return Ee(a,e)});return he(o,c)})},function(e,n){var r=n(t);return fe(He(e,a(r)))})},rt=function(e){return{extract:function(t,n,r){return ve(e(r,n),function(e){return function(e,t){return Je(e,function(){return t})}(t,e)})},toString:function(){return"val"}}},at=function(e){return ye(Se(e,function(e){return void 0!==e&&null!==e}))},ot=function(e){var t=it(e),n=H(e,function(e,t){return t.fold(function(t){return Ee(e,qe(t,!0))},r(e))},{});return{extract:function(e,r,a){var o=S(a)?[]:at(a),i=F(o,function(e){return!Me(n,e)});return 0===i.length?t.extract(e,r,a):function(e,t){return Je(e,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})}(e,i)},toString:t.toString}},it=function(e){return{extract:function(t,n,r){return function(e,t,n,r){var a=$(n,function(n){return nt(e,t,n,r)});return Ke(a,{})}(t,r,e,n)},toString:function(){return"obj{\n"+$(e,function(e){return e.fold(function(e,t,n,r){return e+" -> "+r.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"}}},st=function(e){return{extract:function(t,n,r){var a=$(r,function(r,a){return e.extract(t.concat(["["+a+"]"]),n,r)});return Qe(a)},toString:function(){return"array("+e.toString()+")"}}},ct=function(e){return{extract:function(t,n,r){for(var a=[],o=0,i=e;o<i.length;o++){var s=i[o].extract(t,n,r);if(s.stype===p.Value)return s;a.push(s)}return Qe(a)},toString:function(){return"oneOf("+$(e,function(e){return e.toString()}).join(", ")+")"}}},lt=function(e,t){return{extract:function(n,r,o){var i=ye(o),s=function(t,n){return st(rt(e)).extract(t,a,n)}(n,i);return he(s,function(e){var a=$(e,function(e){return Ze.field(e,e,$e(),t)});return it(a).extract(n,r,o)})},toString:function(){return"setOf("+t.toString()+")"}}},ut=r(rt(fe)),dt=n(st,it),ft=Ze.state,mt=Ze.field,pt=function(e,t,n,r,a){return De(r,a).fold(function(){return function(e,t,n){return Je(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Xe(t)})}(e,r,a)},function(r){return r.extract(e.concat(["branch: "+a]),t,n)})},ht=function(e,t){return{extract:function(n,r,a){return De(a,e).fold(function(){return function(e,t){return Je(e,function(){return'Choice schema did not contain choice key: "'+t+'"'})}(n,e)},function(e){return pt(n,r,a,t,e)})},toString:function(){return"chooseOn("+e+"). Possible values: "+ye(t)}}},vt=rt(fe),gt=function(e){return dt(e)},bt=function(e){return{extract:function(t,n,r){return e().extract(t,n,r)},toString:function(){return e().toString()}}},yt=function(e){return rt(function(t){return e(t).fold(pe,fe)})},wt=function(e,t){return lt(function(t){return ue(e(t))},t)},xt=function(e,t,n){return de(function(e,t,n,r){var a=t.extract([e],n,r);return be(a,function(e){return{input:r,errors:e}})}(e,t,a,n))},kt=function(e){return e.fold(function(e){throw new Error(St(e))},a)},_t=function(e,t,n){return kt(xt(e,t,n))},St=function(e){return"Errors: \n"+(t=e.errors,n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,$(n,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()})).join("\n")+"\n\nInput object: "+Xe(e.input);var t,n},Ct=function(e,t){return ht(e,t)},Nt=function(e,t){return ht(e,ke(t,it))},Tt=r(vt),Dt=function(e,t){return rt(function(n){var r=typeof n;return e(n)?fe(n):pe("Expected type: "+t+" but got: "+r)})},It=Dt(D,"number"),Mt=Dt(x,"string"),Ot=Dt(S,"boolean"),At=Dt(T,"function"),Lt=function(e){var t=function(e,t){for(var n=e.next();!n.done;){if(!t(n.value))return!1;n=e.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(function(t){return Lt(e[t])});case"Map":return t(e.keys(),Lt)&&t(e.values(),Lt);case"Set":return t(e.keys(),Lt);default:return!1}},Et=rt(function(e){return Lt(e)?fe(e):pe("Expected value to be acceptable for sending via postMessage")}),zt=function(e){return yt(function(t){return z(e,t)?ie.value(t):ie.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')})},Rt=function(e){return mt(e,e,$e(),ut())},Vt=function(e,t){return mt(e,e,$e(),t)},Bt=function(e){return Vt(e,Mt)},$t=function(e,t){return mt(e,e,$e(),zt(t))},Ut=function(e){return Vt(e,At)},Pt=function(e,t){return mt(e,e,$e(),it(t))},Ft=function(e,t){return mt(e,e,$e(),dt(t))},Ht=function(e,t){return mt(e,e,$e(),st(t))},jt=function(e){return mt(e,e,Ue(),ut())},qt=function(e,t){return mt(e,e,Ue(),t)},Wt=function(e){return qt(e,It)},Yt=function(e){return qt(e,Mt)},Gt=function(e){return qt(e,At)},Kt=function(e,t){return qt(e,it(t))},Qt=function(e,t){return mt(e,e,Be(t),ut())},Xt=function(e,t,n){return mt(e,e,Be(t),n)},Jt=function(e,t){return Xt(e,t,It)},Zt=function(e,t){return Xt(e,t,Mt)},en=function(e,t,n){return Xt(e,t,zt(n))},tn=function(e,t){return Xt(e,t,Ot)},nn=function(e,t){return Xt(e,t,At)},rn=function(e,t,n){return Xt(e,t,st(n))},an=function(e,t,n){return Xt(e,t,it(n))},on=function(e,t){return ft(e,t)},sn=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},cn=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},ln={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return cn(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return cn(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return cn(n)},fromDom:cn,fromPoint:function(e,t,n){return b.from(e.dom.elementFromPoint(t,n)).map(cn)}},un=function(){return dn(0,0)},dn=function(e,t){return{major:e,minor:t}},fn={nu:dn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?un():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return dn(r(1),r(2))}(e,n)},unknown:un},mn=function(e,t){var n=String(t).toLowerCase();return q(e,function(e){return e.search(n)})},pn=function(e,t){return mn(e,t).map(function(e){var n=fn.detect(e.versionRegexes,t);return{current:e.name,version:n}})},hn=function(e,t){return mn(e,t).map(function(e){var n=fn.detect(e.versionRegexes,t);return{current:e.name,version:n}})},vn=function(e,t){return-1!==e.indexOf(t)},gn=function(e,t){return function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,e.length-t.length)},bn=function(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),yn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wn=function(e){return function(t){return vn(t,e)}},xn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return vn(e,"edge/")&&vn(e,"chrome")&&vn(e,"safari")&&vn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yn],search:function(e){return vn(e,"chrome")&&!vn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return vn(e,"msie")||vn(e,"trident")}},{name:"Opera",versionRegexes:[yn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wn("firefox")},{name:"Safari",versionRegexes:[yn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(vn(e,"safari")||vn(e,"mobile/"))&&vn(e,"applewebkit")}}],kn=[{name:"Windows",search:wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return vn(e,"iphone")||vn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:wn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wn("linux"),versionRegexes:[]},{name:"Solaris",search:wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_n={browsers:r(xn),oses:r(kn)},Sn=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r("Firefox"),isSafari:r("Safari")}},Cn={unknown:function(){return Sn({current:void 0,version:fn.unknown()})},nu:Sn,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r("Firefox"),safari:r("Safari")},Nn=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r("Windows"),isiOS:r("iOS"),isAndroid:r("Android"),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r("Solaris"),isFreeBSD:r("FreeBSD"),isChromeOS:r("ChromeOS")}},Tn={unknown:function(){return Nn({current:void 0,version:fn.unknown()})},nu:Nn,windows:r("Windows"),ios:r("iOS"),android:r("Android"),linux:r("Linux"),osx:r("OSX"),solaris:r("Solaris"),freebsd:r("FreeBSD"),chromeos:r("ChromeOS")},Dn=function(e,t){var n=_n.browsers(),a=_n.oses(),o=pn(n,e).fold(Cn.unknown,Cn.nu),i=hn(a,e).fold(Tn.unknown,Tn.nu);return{browser:o,os:i,deviceType:function(e,t,n,a){var o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,s=e.isiOS()||e.isAndroid(),c=s||a("(pointer:coarse)"),l=o||!i&&s&&a("(min-device-width:768px)"),u=i||s&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),f=!u&&!l&&!d;return{isiPad:r(o),isiPhone:r(i),isTablet:r(l),isPhone:r(u),isTouch:r(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:r(d),isDesktop:r(f)}}(i,o,e,t)}},In=function(e){return window.matchMedia(e).matches},Mn=Re(function(){return Dn(navigator.userAgent,In)}),On=function(){return Mn()},An=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ln=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},En=function(e,t){return e.dom===t.dom},zn=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},Rn=function(e,t){return On().browser.isIE()?zn(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)},Vn=function(e){return T(e)?e:c},Bn=function(e,t,n){for(var r=e.dom,a=Vn(n);r.parentNode;){r=r.parentNode;var o=ln.fromDom(r),i=t(o);if(i.isSome())return i;if(a(o))break}return b.none()},$n=function(e,t,n){var r=t(e),a=Vn(n);return r.orThunk(function(){return a(e)?b.none():Bn(e,t,a)})},Un=function(e,t){return En(e.element,t.event.target)},Pn=function(e){if(!Me(e,"can")&&!Me(e,"abort")&&!Me(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return _t("Extracting event.handler",ot([Qt("can",l),Qt("abort",c),Qt("run",t)]),e)},Fn=function(e){var t=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return j(e,function(e,r){return e&&t(r).apply(void 0,n)},!0)}}(e,function(e){return e.can}),n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return j(e,function(e,r){return e||t(r).apply(void 0,n)},!1)}}(e,function(e){return e.abort});return Pn({can:t,abort:n,run:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];U(e,function(e){e.run.apply(void 0,t)})}})},Hn=r,jn=Hn("touchstart"),qn=Hn("touchmove"),Wn=Hn("touchend"),Yn=Hn("touchcancel"),Gn=Hn("mousedown"),Kn=Hn("mousemove"),Qn=Hn("mouseout"),Xn=Hn("mouseup"),Jn=Hn("mouseover"),Zn=Hn("focusin"),er=Hn("focusout"),tr=Hn("keydown"),nr=Hn("keyup"),rr=Hn("input"),ar=Hn("change"),or=Hn("click"),ir=Hn("transitionend"),sr=Hn("selectstart"),cr=function(e){return r("alloy."+e)},lr={tap:cr("tap")},ur=cr("focus"),dr=cr("blur.post"),fr=cr("paste.post"),mr=cr("receive"),pr=cr("execute"),hr=cr("focus.item"),vr=lr.tap,gr=cr("longpress"),br=cr("sandbox.close"),yr=cr("typeahead.cancel"),wr=cr("system.init"),xr=cr("system.touchmove"),kr=cr("system.touchend"),_r=cr("system.scroll"),Sr=cr("system.resize"),Cr=cr("system.attached"),Nr=cr("system.detached"),Tr=cr("system.dismissRequested"),Dr=cr("system.repositionRequested"),Ir=cr("focusmanager.shifted"),Mr=cr("slotcontainer.visibility"),Or=cr("change.tab"),Ar=cr("dismiss.tab"),Lr=cr("highlight"),Er=cr("dehighlight"),zr=function(e,t){$r(e,e.element,t,{})},Rr=function(e,t,n){$r(e,e.element,t,n)},Vr=function(e){zr(e,pr())},Br=function(e,t,n){$r(e,t,n,{})},$r=function(e,t,n,r){var a=d({target:t},r);e.getSystem().triggerEvent(n,t,a)},Ur=function(e,t,n,r){e.getSystem().triggerEvent(n,t,r.event)},Pr=function(e){return We(e)},Fr=function(e,t){return{key:e,value:Pn({abort:t})}},Hr=function(e){return{key:e,value:Pn({run:function(e,t){t.event.prevent()}})}},jr=function(e,t){return{key:e,value:Pn({run:t})}},qr=function(e,t,n){return{key:e,value:Pn({run:function(e,r){t.apply(void 0,[e,r].concat(n))}})}},Wr=function(e){return function(t){return{key:e,value:Pn({run:function(e,n){Un(e,n)&&t(e,n)}})}}},Yr=function(e,t,n){return function(e,t){return jr(e,function(n,r){n.getSystem().getByUid(t).each(function(t){Ur(t,t.element,e,r)})})}(e,t.partUids[n])},Gr=function(e,t){return jr(e,function(e,n){var r=n.event,a=e.getSystem().getByDom(r.target).fold(function(){return $n(r.target,function(t){return e.getSystem().getByDom(t).toOptional()},c).getOr(e)},function(e){return e});t(e,a,n)})},Kr=function(e){return jr(e,function(e,t){t.cut()})},Qr=function(e,t){return Wr(e)(t)},Xr=Wr(Cr()),Jr=Wr(Nr()),Zr=Wr(wr()),ea=function(e){return function(t){return jr(e,t)}}(pr()),ta=("undefined"!=typeof window?window:Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),na=function(e){return function(t){return function(e){return e.dom.nodeType}(t)===e}},ra=na(1),aa=na(3),oa=na(9),ia=na(11),sa=function(e){return ln.fromDom(e.dom.ownerDocument)},ca=function(e){return oa(e)?e:sa(e)},la=function(e){return ln.fromDom(ca(e).dom.documentElement)},ua=function(e){return ln.fromDom(ca(e).dom.defaultView)},da=function(e){return b.from(e.dom.parentNode).map(ln.fromDom)},fa=function(e){return b.from(e.dom.offsetParent).map(ln.fromDom)},ma=function(e){return $(e.dom.childNodes,ln.fromDom)},pa=function(e,t){var n=e.dom.childNodes;return b.from(n[t]).map(ln.fromDom)},ha=function(e,t){da(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},va=function(e,t){(function(e){return b.from(e.dom.nextSibling).map(ln.fromDom)})(e).fold(function(){da(e).each(function(e){ba(e,t)})},function(e){ha(e,t)})},ga=function(e,t){(function(e){return pa(e,0)})(e).fold(function(){ba(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})},ba=function(e,t){e.dom.appendChild(t.dom)},ya=function(e,t){U(t,function(t){ba(e,t)})},wa=function(e){e.dom.textContent="",U(ma(e),function(e){xa(e)})},xa=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ka=function(e){var t,n=ma(e);n.length>0&&(t=e,U(n,function(e){ha(t,e)})),xa(e)},_a=function(e){return e.dom.innerHTML},Sa=function(e,t){var n,r,a=sa(e).dom,o=ln.fromDom(a.createDocumentFragment()),i=(n=t,(r=(a||document).createElement("div")).innerHTML=n,ma(ln.fromDom(r)));ya(o,i),wa(e),ba(e,o)},Ca=function(e,t,n){if(!(x(n)||S(n)||D(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Na=function(e,t,n){Ca(e.dom,t,n)},Ta=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Da=function(e,t){return b.from(Ta(e,t))},Ia=function(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Ma=function(e,t){e.dom.removeAttribute(t)},Oa=function(e){return function(e,t){return ln.fromDom(e.dom.cloneNode(t))}(e,!1)},Aa=function(e){return function(e){var t=ln.fromTag("div"),n=ln.fromDom(e.dom.cloneNode(!0));return ba(t,n),_a(t)}(Oa(e))},La=function(e){return Aa(e)},Ea=Pr([function(e,t){return{key:e,value:Pn({can:t})}}(ur(),function(e,t){var n=t.event,r=n.originator,a=n.target;return!function(e,t,n){return En(t,e.element)&&!En(t,n)}(e,r,a)||(console.warn(ur()+" did not get interpreted by the desired target. \nOriginator: "+La(r)+"\nTarget: "+La(a)+"\nCheck the "+ur()+" event handlers"),!1)})]),za=Object.freeze({__proto__:null,events:Ea}),Ra=0,Va=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Ra+String(t)},Ba=r("alloy-id-"),$a=r("data-alloy-id"),Ua=Ba(),Pa=$a(),Fa=function(e,t){var n=Va(Ua+e);return Ha(t,n),n},Ha=function(e,t){Object.defineProperty(e.dom,Pa,{value:t,writable:!0})},ja=function(e){var t=ra(e)?e.dom[Pa]:null;return b.from(t)},qa=function(e){return Va(e)},Wa=a,Ya=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+(e?"\n"+La(e().element)+" is not in context.":""))}};return{debugInfo:r("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:c}},Ga=Ya(),Ka=function(e){return $(e,function(e){return gn(e,"/*")?e.substring(0,e.length-"/*".length):e})},Qa=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,a=n.indexOf("("),o=n.substring(a+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ka(o)}},e},Xa=Va("alloy-premade"),Ja=function(e){return qe(Xa,e)},Za=function(e){return function(e,t){var n=t.toString(),r=n.indexOf(")")+1,a=n.indexOf("("),o=n.substring(a+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Ka(o.slice(1))}},e}(function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e.apply(void 0,m([t.getApis(),t],n))},e)},eo={init:function(){return to({readState:function(){return"No State required"}})}},to=function(e){return e},no=function(e,t){var n={};return xe(e,function(e,r){xe(e,function(e,a){var o=De(n,a).getOr([]);n[a]=o.concat([t(r,e)])})}),n},ro=function(e){return{classes:void 0!==e.classes?e.classes:[],attributes:void 0!==e.attributes?e.attributes:{},styles:void 0!==e.styles?e.styles:{}}},ao=function(e,t){return n=o.apply(void 0,[e.handler].concat(t)),r=e.purpose,{cHandler:n,purpose:r};var n,r},oo=function(e){return e.cHandler},io=function(e,t){return{name:e,handler:t}},so=function(e,t,n){var r=d(d({},n),function(e,t){var n={};return U(e,function(e){n[e.name()]=e.handlers(t)}),n}(t,e));return no(r,io)},co=function(e){var t=function(e){return T(e)?{can:r(!0),abort:r(!1),run:e}:e}(e);return function(e,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var o=[e,n].concat(r);t.abort.apply(void 0,o)?n.stop():t.can.apply(void 0,o)&&t.run.apply(void 0,o)}},lo=function(e,t,n){var r=t[n];return r?function(e,t,n,r){try{var a=J(n,function(n,a){var o=n[t],i=a[t],s=r.indexOf(o),c=r.indexOf(i);if(-1===s)throw new Error("The ordering for "+e+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===c)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));return s<c?-1:c<s?1:0});return ie.value(a)}catch(e){return ie.error([e])}}("Event: "+n,"name",e,r).map(function(e){var t=$(e,function(e){return e.handler});return Fn(t)}):function(e,t){return ie.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify($(t,function(e){return e.name}),null,2)])}(n,e)},uo=function(e,t){var n=Ce(e,function(e,n){return(1===e.length?ie.value(e[0].handler):lo(e,t,n)).map(function(r){var a=co(r),o=e.length>1?F(t[n],function(t){return R(e,function(e){return e.name===t})}).join(" > "):e[0].name;return qe(n,function(e,t){return{handler:e,purpose:t}}(a,o))})});return Ye(n,{})},fo="alloy.base.behaviour",mo=function(e){var t,n;return xt("custom.definition",it([mt("dom","dom",$e(),it([Rt("tag"),Qt("styles",{}),Qt("classes",[]),Qt("attributes",{}),jt("value"),jt("innerHtml")])),Rt("components"),Rt("uid"),Qt("events",{}),Qt("apis",{}),mt("eventOrder","eventOrder",(t={},t[pr()]=["disabling",fo,"toggling","typeaheadevents"],t[ur()]=[fo,"focusing","keying"],t[wr()]=[fo,"disabling","toggling","representing"],t[rr()]=[fo,"representing","streaming","invalidating"],t[Nr()]=[fo,"representing","item-events","tooltipping"],t[Gn()]=["focusing",fo,"item-type-events"],t[jn()]=["focusing",fo,"item-type-events"],t[Jn()]=["item-type-events","tooltipping"],t[mr()]=["receiving","reflecting","tooltipping"],n=t,Ve.mergeWithThunk(r(n))),Tt()),jt("domModification")]),e)},po=function(e,t){var n=Ta(e,t);return void 0===n||""===n?[]:n.split(" ")},ho=function(e){return void 0!==e.dom.classList},vo=function(e,t){return function(e,t,n){var r=po(e,t).concat([n]);return Na(e,t,r.join(" ")),!0}(e,"class",t)},go=function(e,t){return function(e,t,n){var r=F(po(e,t),function(e){return e!==n});return r.length>0?Na(e,t,r.join(" ")):Ma(e,t),!1}(e,"class",t)},bo=function(e,t){ho(e)?e.dom.classList.add(t):vo(e,t)},yo=function(e){0===(ho(e)?e.dom.classList:function(e){return po(e,"class")}(e)).length&&Ma(e,"class")},wo=function(e,t){ho(e)?e.dom.classList.remove(t):go(e,t);yo(e)},xo=function(e,t){return ho(e)&&e.dom.classList.contains(t)},ko=function(e,t){U(t,function(t){bo(e,t)})},_o=function(e,t){U(t,function(t){wo(e,t)})},So=function(e){return void 0!==e.style&&T(e.style.getPropertyValue)},Co=function(e){return ia(e)},No=T(Element.prototype.attachShadow)&&T(Node.prototype.getRootNode),To=r(No),Do=No?function(e){return ln.fromDom(e.dom.getRootNode())}:ca,Io=function(e){return Co(e)?e:ln.fromDom(ca(e).dom.body)},Mo=function(e){var t=Do(e);return Co(t)?b.some(t):b.none()},Oo=function(e){return ln.fromDom(e.dom.host)},Ao=function(e){return N(e.dom.shadowRoot)},Lo=function(e){var t=aa(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n,r,a=t.ownerDocument;return Mo(ln.fromDom(t)).fold(function(){return a.body.contains(t)},(n=Lo,r=Oo,function(e){return n(r(e))}))},Eo=function(){return zo(ln.fromDom(document))},zo=function(e){var t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return ln.fromDom(t)},Ro=function(e,t,n){if(!x(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);So(e)&&e.style.setProperty(t,n)},Vo=function(e,t){So(e)&&e.style.removeProperty(t)},Bo=function(e,t,n){var r=e.dom;Ro(r,t,n)},$o=function(e,t){var n=e.dom;xe(t,function(e,t){Ro(n,t,e)})},Uo=function(e,t){var n=e.dom;xe(t,function(e,t){e.fold(function(){Vo(n,t)},function(e){Ro(n,t,e)})})},Po=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Lo(e)?r:Fo(n,t)},Fo=function(e,t){return So(e)?e.style.getPropertyValue(t):""},Ho=function(e,t){var n=e.dom,r=Fo(n,t);return b.from(r).filter(function(e){return e.length>0})},jo=function(e,t,n){var r=ln.fromTag(e);return Bo(r,t,n),Ho(r,t).isSome()},qo=function(e,t){var n=e.dom;Vo(n,t),Da(e,"style").map(bn).is("")&&Ma(e,"style")},Wo=function(e){return e.dom.offsetWidth},Yo=function(e){return e.dom.value},Go=function(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},Ko=function(e){var t,n,r,a=ln.fromTag(e.tag);t=a,n=e.attributes,r=t.dom,xe(n,function(e,t){Ca(r,t,e)}),ko(a,e.classes),$o(a,e.styles),e.innerHtml.each(function(e){return Sa(a,e)});var o=e.domChildren;return ya(a,o),e.value.each(function(e){Go(a,e)}),e.uid,Ha(a,e.uid),a},Qo=function(e,t){return function(e,t){var n=$(t,function(e){return Kt(e.name(),[Rt("config"),Qt("state",eo)])}),r=xt("component.behaviours",it(n),e.behaviours).fold(function(t){throw new Error(St(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},function(e){return e});return{list:t,data:ke(r,function(e){var t=e.map(function(e){return{config:e.config,state:e.state.init(e.config)}});return function(){return t}})}}(e,t)},Xo=function(e){var t=function(e){var t=De(e,"behaviours").getOr({}),n=F(ye(t),function(e){return void 0!==t[e]});return $(n,function(e){return t[e].me})}(e);return Qo(e,t)},Jo=function(e,t,n){var r,a,o,i=d(d({},(r=e).dom),{uid:r.uid,domChildren:$(r.components,function(e){return e.element})}),s=function(e){return e.domModification.fold(function(){return ro({})},ro)}(e),c={"alloy.base.modification":s},l=t.length>0?function(e,t,n,r){var a=d({},t);U(n,function(t){a[t.name()]=t.exhibit(e,r)});var o=no(a,function(e,t){return{name:e,modification:t}}),i=function(e){return H(e,function(e,t){return d(d({},t.modification),e)},{})},s=H(o.classes,function(e,t){return t.modification.concat(e)},[]),c=i(o.attributes),l=i(o.styles);return ro({classes:s,attributes:c,styles:l})}(n,c,t,i):s;return o=l,d(d({},a=i),{attributes:d(d({},a.attributes),o.attributes),styles:d(d({},a.styles),o.styles),classes:a.classes.concat(o.classes)})},Zo=function(e,t,n){var r={"alloy.base.behaviour":function(e){return e.events}(e)};return function(e,t,n,r){var a=so(e,n,r);return uo(a,t)}(n,e.eventOrder,t,r).getOrDie()},ei=function(e){var t=Wa(e),n=t.events,r=f(t,["events"]),a=function(e){var t=De(e,"components").getOr([]);return $(t,ai)}(r),o=d(d({},r),{events:d(d({},za),n),components:a});return ie.value(function(e){var t=function(){return d},n=sn(Ga),r=kt(mo(e)),a=Xo(e),o=function(e){return e.list}(a),i=function(e){return e.data}(a),s=Jo(r,o,i),c=Ko(s),l=Zo(r,o,i),u=sn(r.components),d={getSystem:n.get,config:function(t){var n=i;return(T(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(e){return T(i[e.name()])},spec:e,readState:function(e){return i[e]().map(function(e){return e.state.readState()}).getOr("not enabled")},getApis:function(){return r.apis},connect:function(e){n.set(e)},disconnect:function(){n.set(Ya(t))},element:c,syncComponents:function(){var e=ma(c),t=G(e,function(e){return n.get().getByDom(e).fold(function(){return[]},function(e){return[e]})});u.set(t)},components:u.get,events:l};return d}(o))},ti=function(e){var t=ln.fromText(e);return ni({element:t})},ni=function(e){var n=_t("external.component",ot([Rt("element"),jt("uid")]),e),a=sn(Ya());n.uid.each(function(e){Ha(n.element,e)});var o={getSystem:a.get,config:b.none,hasConfigured:c,connect:function(e){a.set(e)},disconnect:function(){a.set(Ya(function(){return o}))},getApis:function(){return{}},element:n.element,spec:e,readState:r("No state"),syncComponents:t,components:r([]),events:{}};return Ja(o)},ri=qa,ai=function(e){return function(e){return De(e,Xa)}(e).fold(function(){var t=e.hasOwnProperty("uid")?e:d({uid:ri("")},e);return ei(t).getOrDie()},function(e){return e})},oi=Ja;function ii(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var a=Po(n,e);return parseFloat(a)||0}return r},r=function(e,t){return j(t,function(t,n){var r=Po(e,n),a=void 0===r?0:parseInt(r,10);return isNaN(a)?t:t+a},0)};return{set:function(t,n){if(!D(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;So(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var a=r(e,n);return t>a?t-a:0}}}var si=ii("height",function(e){var t=e.dom;return Lo(e)?t.getBoundingClientRect().height:t.offsetHeight}),ci=function(e){return si.get(e)},li=function(e){return si.getOuter(e)},ui=function(e,t){return{left:e,top:t,translate:function(n,r){return ui(e+n,t+r)}}},di=ui,fi=function(e,t){return void 0!==e?e:void 0!==t?t:0},mi=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,a=t.documentElement;if(n===e.dom)return di(n.offsetLeft,n.offsetTop);var o=fi(null===r||void 0===r?void 0:r.pageYOffset,a.scrollTop),i=fi(null===r||void 0===r?void 0:r.pageXOffset,a.scrollLeft),s=fi(a.clientTop,n.clientTop),c=fi(a.clientLeft,n.clientLeft);return pi(e).translate(i-c,o-s)},pi=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?di(n.offsetLeft,n.offsetTop):Lo(e)?function(e){var t=e.getBoundingClientRect();return di(t.left,t.top)}(t):di(0,0)},hi=ii("width",function(e){return e.dom.offsetWidth}),vi=function(e){return hi.get(e)},gi=function(e){return hi.getOuter(e)},bi=function(e){var t=ln.fromDom(function(e){if(To()&&N(e.target)){var t=ln.fromDom(e.target);if(ra(t)&&Ao(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return ee(n)}}return b.from(e.target)}(e).getOr(e.target)),r=function(){return e.stopPropagation()},a=function(){return e.preventDefault()},o=n(a,r);return function(e,t,n,r,a,o,i){return{target:e,x:t,y:n,stop:r,prevent:a,kill:o,raw:i}}(t,e.clientX,e.clientY,r,a,o,e)},yi=function(e,t,n,r,a){var i=function(e,t){return function(n){e(n)&&t(bi(n))}}(n,r);return e.dom.addEventListener(t,i,a),{unbind:o(wi,e,t,i,a)}},wi=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},xi=function(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return di(n,r)},ki=function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},_i=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Si=function(e){var t=void 0===e?window:e,n=t.document,r=xi(ln.fromDom(n));return function(e){var t=void 0===e?window:e;return b.from(t.visualViewport)}(t).fold(function(){var e=t.document.documentElement,n=e.clientWidth,a=e.clientHeight;return _i(r.left,r.top,n,a)},function(e){return _i(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},Ci=function(e,t){return e.view(t).fold(r([]),function(t){var n=e.owner(t),r=Ci(e,n);return[t].concat(r)})},Ni=Object.freeze({__proto__:null,view:function(e){var t;return(e.dom===document?b.none():b.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(ln.fromDom)},owner:function(e){return sa(e)}}),Ti=function(e){var t=ln.fromDom(document),n=xi(t);return function(e,t){var n=t.owner(e),r=Ci(t,n);return b.some(r)}(e,Ni).fold(o(mi,e),function(t){var r=pi(e),a=H(t,function(e,t){var n=pi(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return di(a.left+r.left+n.left,a.top+r.top+n.top)})},Di=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},Ii=function(e){var t=mi(e),n=gi(e),r=li(e);return Di(t.left,t.top,n,r)},Mi=function(e){var t=Ti(e),n=gi(e),r=li(e);return Di(t.left,t.top,n,r)},Oi=function(){return Si(window)};function Ai(e,t,n,r,a){return e(n,r)?b.some(n):T(a)&&a(n)?b.none():t(n,r,a)}var Li,Ei=function(e,t,n){for(var r=e.dom,a=T(n)?n:c;r.parentNode;){r=r.parentNode;var o=ln.fromDom(r);if(t(o))return b.some(o);if(a(o))break}return b.none()},zi=function(e,t,n){return Ai(function(e,t){return t(e)},Ei,e,t,n)},Ri=function(e,t,n){return zi(e,t,n).isSome()},Vi=function(e,t,n){return Ei(e,function(e){return An(e,t)},n)},Bi=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ln(n)?b.none():b.from(n.querySelector(e)).map(ln.fromDom)}(t,e)},$i=function(e,t,n){return Ai(function(e,t){return An(e,t)},Vi,e,t,n)},Ui=function(){var e=Va("aria-owns");return{id:e,link:function(t){Na(t,"aria-owns",e)},unlink:function(e){Ma(e,"aria-owns")}}},Pi=function(e,t){return function(e){return zi(e,function(e){if(!ra(e))return!1;var t=Ta(e,"id");return void 0!==t&&t.indexOf("aria-owns")>-1}).bind(function(e){var t=Ta(e,"id"),n=Do(e);return Bi(n,'[aria-owns="'+t+'"]')})}(t).exists(function(t){return Fi(e,t)})},Fi=function(e,t){return Ri(t,function(t){return En(t,e.element)},c)||Pi(e,t)};!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Li||(Li={}));var Hi,ji=sn({}),qi=function(e,t,n){switch(De(ji.get(),e).orThunk(function(){var t=ye(ji.get());return re(t,function(t){return e.indexOf(t)>-1?b.some(ji.get()[t]):b.none()})}).getOr(Li.NORMAL)){case Li.NORMAL:return n(Gi());case Li.LOGGING:var r=function(e,t){var n=[],r=(new Date).getTime();return{logEventCut:function(e,t,r){n.push({outcome:"cut",target:t,purpose:r})},logEventStopped:function(e,t,r){n.push({outcome:"stopped",target:t,purpose:r})},logNoParent:function(e,t,r){n.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:function(e,t){n.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,r){n.push({outcome:"response",purpose:r,target:t})},write:function(){var a=(new Date).getTime();z(["mousemove","mouseover","mouseout",wr()],e)||console.log(e,{event:e,time:a-r,target:t.dom,sequence:$(n,function(e){return z(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+La(e.target)+")":e.outcome})})}}}(e,t),a=n(r);return r.write(),a;case Li.STOP:return!0}},Wi=["alloy/data/Fields","alloy/debugging/Debugging"],Yi=function(e,t,n){return qi(e,t,n)},Gi=r({logEventCut:t,logEventStopped:t,logNoParent:t,logEventNoHandlers:t,logEventResponse:t,write:t}),Ki=r([Rt("menu"),Rt("selectedMenu")]),Qi=r([Rt("item"),Rt("selectedItem")]),Xi=(r(it(Qi().concat(Ki()))),r(it(Qi()))),Ji=Pt("initSize",[Rt("numColumns"),Rt("numRows")]),Zi=function(){return Pt("markers",[Rt("backgroundMenu")].concat(Ki()).concat(Qi()))},es=function(e){return Pt("markers",$(e,Rt))},ts=function(e,t,n){!function(){var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");return q(t,function(e){return e.indexOf("alloy")>0&&!R(Wi,function(t){return e.indexOf(t)>-1})}).getOr("unknown")}}();return mt(t,t,n,yt(function(e){return ie.value(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)})}))},ns=function(e){return ts(0,e,Be(t))},rs=function(e){return ts(0,e,Be(b.none))},as=function(e){return ts(0,e,$e())},os=function(e){return ts(0,e,$e())},is=function(e,t){return on(e,r(t))},ss=function(e){return on(e,a)},cs=r(Ji),ls=function(e,t,n,r,a,o){return{x:e,y:t,bubble:n,direction:r,boundsRestriction:a,label:o}},us=Oe([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),ds=us.southeast,fs=us.southwest,ms=us.northeast,ps=us.northwest,hs=us.south,vs=us.north,gs=us.east,bs=us.west,ys=function(e,t){return function(e,t){for(var n={},r=0,a=e.length;r<a;r++){var o=e[r];n[String(o)]=t(o,r)}return n}(["left","right","top","bottom"],function(n){return De(t,n).map(function(t){return function(e,t){switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}}(e,t)})})},ws=function(e){return e.x},xs=function(e,t){return e.x+e.width/2-t.width/2},ks=function(e,t){return e.x+e.width-t.width},_s=function(e,t){return e.y-t.height},Ss=function(e){return e.y+e.height},Cs=function(e,t){return e.y+e.height/2-t.height/2},Ns=function(e,t,n){return ls(ws(e),Ss(e),n.southeast(),ds(),ys(e,{left:1,top:3}),"layout-se")},Ts=function(e,t,n){return ls(ks(e,t),Ss(e),n.southwest(),fs(),ys(e,{right:0,top:3}),"layout-sw")},Ds=function(e,t,n){return ls(ws(e),_s(e,t),n.northeast(),ms(),ys(e,{left:1,bottom:2}),"layout-ne")},Is=function(e,t,n){return ls(ks(e,t),_s(e,t),n.northwest(),ps(),ys(e,{right:0,bottom:2}),"layout-nw")},Ms=function(e,t,n){return ls(xs(e,t),_s(e,t),n.north(),vs(),ys(e,{bottom:2}),"layout-n")},Os=function(e,t,n){return ls(xs(e,t),Ss(e),n.south(),hs(),ys(e,{top:3}),"layout-s")},As=function(e,t,n){return ls(function(e){return e.x+e.width}(e),Cs(e,t),n.east(),gs(),ys(e,{left:0}),"layout-e")},Ls=function(e,t,n){return ls(function(e,t){return e.x-t.width}(e,t),Cs(e,t),n.west(),bs(),ys(e,{right:1}),"layout-w")},Es=function(){return[Ns,Ts,Ds,Is,Os,Ms,As,Ls]},zs=function(){return[Ts,Ns,Is,Ds,Os,Ms,As,Ls]},Rs=function(){return[Ds,Is,Ns,Ts,Ms,Os]},Vs=function(){return[Is,Ds,Ts,Ns,Ms,Os]},Bs=function(){return[Ns,Ts,Ds,Is,Os,Ms]},$s=function(){return[Ts,Ns,Is,Ds,Os,Ms]},Us=Object.freeze({__proto__:null,events:function(e){return Pr([jr(mr(),function(t,n){var r=e.channels,a=n,o=function(e,t){return t.universal?e:F(e,function(e){return z(t.channels,e)})}(ye(r),a);U(o,function(e){var n=r[e],o=n.schema,i=_t("channel["+e+"] data\nReceiver: "+La(t.element),o,a.data);n.onReceive(t,i)})})])}}),Ps=[Vt("channels",wt(ie.value,ot([as("onReceive"),Qt("schema",Tt())])))],Fs=function(e,t,n){return Zr(function(r,a){n(r,e,t)})},Hs=function(e,t,n,r,a,o){var i,s,c=ot(e),l=Kt(t,[(i="config",s=e,qt(i,ot(s)))]);return Ws(c,l,t,n,r,a,o)},js=function(e,t,n){return function(e,t,n){var r=n.toString(),a=r.indexOf(")")+1,o=r.indexOf("("),i=r.substring(o+1,a-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:Ka(i.slice(0,1).concat(i.slice(3)))}},e}(function(a){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var s=[a].concat(o);return a.config({name:r(e)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)},function(e){var n=Array.prototype.slice.call(s,1);return t.apply(void 0,[a,e.config,e.state].concat(n))})},n,t)},qs=function(e){return{key:e,value:void 0}},Ws=function(e,t,n,r,a,i,s){var c=function(e){return Me(e,n)?e[n]():b.none()},l=ke(a,function(e,t){return js(n,e,t)}),u=ke(i,function(e,t){return Qa(e,t)}),f=d(d(d({},u),l),{revoke:o(qs,n),config:function(t){var r=_t(n+"-config",e,t);return{key:n,value:{config:r,me:f,configAsRaw:Re(function(){return _t(n+"-config",e,t)}),initialConfig:t,state:s}}},schema:function(){return t},exhibit:function(e,t){return c(e).bind(function(e){return De(r,"exhibit").map(function(n){return n(t,e.config,e.state)})}).getOr(ro({}))},name:function(){return n},handlers:function(e){return c(e).map(function(e){return De(r,"events").getOr(function(){return{}})(e.config,e.state)}).getOr({})}});return f},Ys=function(e){return We(e)},Gs=ot([Rt("fields"),Rt("name"),Qt("active",{}),Qt("apis",{}),Qt("state",eo),Qt("extra",{})]),Ks=function(e){var t=_t("Creating behaviour: "+e.name,Gs,e);return Hs(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Qs=ot([Rt("branchKey"),Rt("branches"),Rt("name"),Qt("active",{}),Qt("apis",{}),Qt("state",eo),Qt("extra",{})]),Xs=function(e){var t,n,r,a,o,i,s,c,l=_t("Creating behaviour: "+e.name,Qs,e);return t=Nt(l.branchKey,l.branches),n=l.name,r=l.active,a=l.apis,o=l.extra,i=l.state,s=t,c=Kt(n,[qt("config",t)]),Ws(s,c,n,r,a,o,i)},Js=r(void 0),Zs=Ks({fields:Ps,name:"receiving",active:Us}),ec=Object.freeze({__proto__:null,exhibit:function(e,t){return ro({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),tc=function(e){return e.dom.focus()},nc=function(e){return void 0===e&&(e=ln.fromDom(document)),b.from(e.dom.activeElement).map(ln.fromDom)},rc=function(e){return nc(Do(e)).filter(function(t){return e.dom.contains(t.dom)})},ac=function(e,n){var r=Do(n),a=nc(r).bind(function(e){var t,r,a=function(t){return En(e,t)};return a(n)?b.some(n):(t=a,(r=function(e){for(var n=0;n<e.childNodes.length;n++){var a=ln.fromDom(e.childNodes[n]);if(t(a))return b.some(a);var o=r(e.childNodes[n]);if(o.isSome())return o}return b.none()})(n.dom))}),o=e(n);return a.each(function(e){nc(r).filter(function(t){return En(t,e)}).fold(function(){tc(e)},t)}),o},oc=function(e,t,n,r,a){return{position:e,left:t,top:n,right:r,bottom:a}},ic=function(e,t){var n=function(e){return e+"px"};Uo(e,{position:b.some(t.position),left:t.left.map(n),top:t.top.map(n),right:t.right.map(n),bottom:t.bottom.map(n)})},sc=Oe([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),cc=function(e,t,n,r,a,o){var i,s,c,l,u,d,f,m,p,h=t.x-n,v=t.y-r,g=a-(h+t.width),y=o-(v+t.height),w=b.some(h),x=b.some(v),k=b.some(g),_=b.some(y),S=b.none();return i=t.direction,s=function(){return oc(e,w,x,S,S)},c=function(){return oc(e,S,x,k,S)},l=function(){return oc(e,w,S,S,_)},u=function(){return oc(e,S,S,k,_)},d=function(){return oc(e,w,x,S,S)},f=function(){return oc(e,w,S,S,_)},m=function(){return oc(e,w,x,S,S)},p=function(){return oc(e,S,x,k,S)},i.fold(s,c,l,u,d,f,m,p)},lc=function(e,t){var n=o(Ti,t),r=e.fold(n,n,function(){var e=xi();return Ti(t).translate(-e.left,-e.top)}),a=gi(t),i=li(t);return Di(r.left,r.top,a,i)},uc=function(e,t,n){var a=di(t,n);return e.fold(r(a),r(a),function(){var e=xi();return a.translate(-e.left,-e.top)})},dc=(sc.none,sc.relative),fc=sc.fixed,mc=function(e,t,n,r){var a=e+t;return a>r?n:a<n?r:a},pc=function(e,t,n){return Math.min(Math.max(e,t),n)},hc=Oe([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),vc=function(e,t,n,o){var i,s,c,l,u=e.x,d=e.y,f=e.bubble.offset,m=f.left,p=f.top,h=function(e,t,n){var r=function(e,r){var o="top"===e||"bottom"===e?n.top:n.left;return De(t,e).bind(a).bind(function(t){return"left"===e||"top"===e?t>=r?b.some(t):b.none():t<=r?b.some(t):b.none()}).map(function(e){return e+o}).getOr(r)},o=r("left",e.x),i=r("top",e.y),s=r("right",e.right),c=r("bottom",e.bottom);return Di(o,i,s-o,c-i)}(o,e.boundsRestriction,f),v=h.y,g=h.bottom,y=h.x,w=h.right,x=d+p,k=function(e,t,n,r,a){var o=a.x,i=a.y,s=a.width,c=a.height,l=e>=o,u=t>=i,d=l&&u,f=e+n<=o+s&&t+r<=i+c,m=Math.abs(Math.min(n,l?o+s-e:o-(e+n))),p=Math.abs(Math.min(r,u?i+c-t:i-(t+r))),h=Math.max(a.x,a.right-n),v=Math.max(a.y,a.bottom-r);return{originInBounds:d,sizeInBounds:f,limitX:pc(e,a.x,h),limitY:pc(t,a.y,v),deltaW:m,deltaH:p}}(u+m,x,t,n,h),_=k.originInBounds,S=k.sizeInBounds,C=k.limitX,N=k.limitY,T=k.deltaW,D=k.deltaH,I=r(N+D-v),M=r(g-N),O=(i=e.direction,s=M,c=M,l=I,i.fold(s,s,l,l,s,l,c,c)),A=r(C+T-y),L=r(w-C),E={x:C,y:N,width:T,height:D,maxHeight:O,maxWidth:function(e,t,n,r){return e.fold(t,r,t,r,n,n,t,r)}(e.direction,L,L,A),direction:e.direction,classes:{on:e.bubble.classesOn,off:e.bubble.classesOff},label:e.label,candidateYforTest:x};return _&&S?hc.fit(E):hc.nofit(E,T,D)},gc=function(e,t,n,r){qo(t,"max-height"),qo(t,"max-width");var i,s={width:gi(i=t),height:li(i)};return function(e,t,n,r,i){var s=n.width,c=n.height,l=function(e,a,o,l){var u=e(t,n,r);return vc(u,s,c,i).fold(hc.fit,function(e,t,n){return n>l||t>o?hc.nofit(e,t,n):hc.nofit(a,o,l)})};return j(e,function(e,t){var n=o(l,t);return e.fold(hc.fit,n)},hc.nofit({x:t.x,y:t.y,width:n.width,height:n.height,maxHeight:n.height,maxWidth:n.width,direction:ds(),classes:{on:[],off:[]},label:"none",candidateYforTest:t.y},-1,-1)).fold(a,a)}(r.preference,e,s,n,r.bounds)},bc=function(e,t,n){ic(e,function(e,t){return e.fold(function(){return oc("absolute",b.some(t.x),b.some(t.y),b.none(),b.none())},function(e,n,r,a){return cc("absolute",t,e,n,r,a)},function(e,n,r,a){return cc("fixed",t,e,n,r,a)})}(n.origin,t))},yc=function(e,t){!function(e,t){var n=si.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Bo(e,"max-height",n+"px")}(e,Math.floor(t))},wc=r(function(e,t){yc(e,t),$o(e,{"overflow-x":"hidden","overflow-y":"auto"})}),xc=r(function(e,t){yc(e,t)}),kc=function(e,t,n){return void 0===e[t]?n:e[t]},_c=function(e,n,r,a,o,i){var s=kc(i,"maxHeightFunction",wc()),c=kc(i,"maxWidthFunction",t),l=e.anchorBox,u=e.origin,d={bounds:function(e,t){return t.fold(function(){return e.fold(Oi,Oi,Di)},function(t){return e.fold(t,t,function(){var n=t(),r=uc(e,n.x,n.y);return Di(r.left,r.top,n.width,n.height)})})}(u,o),origin:u,preference:a,maxHeightFunction:s,maxWidthFunction:c};Sc(l,n,r,d)},Sc=function(e,t,n,r){var a=gc(e,t,n,r);bc(t,a,r),function(e,t){var n=t.classes;_o(e,n.off),ko(e,n.on)}(t,a),function(e,t,n){(0,n.maxHeightFunction)(e,t.maxHeight)}(t,a,r),function(e,t,n){(0,n.maxWidthFunction)(e,t.maxWidth)}(t,a,r)},Cc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Nc=function(e,t,n){var r=function(e){return De(n,e).getOr([])},a=function(e,t,n){var a=X(Cc,n);return{offset:di(e,t),classesOn:G(n,r),classesOff:G(a,r)}};return{southeast:function(){return a(-e,t,["top","alignLeft"])},southwest:function(){return a(e,t,["top","alignRight"])},south:function(){return a(-e/2,t,["top","alignCentre"])},northeast:function(){return a(-e,-t,["bottom","alignLeft"])},northwest:function(){return a(e,-t,["bottom","alignRight"])},north:function(){return a(-e/2,-t,["bottom","alignCentre"])},east:function(){return a(e,-t/2,["valignCentre","left"])},west:function(){return a(-e,-t/2,["valignCentre","right"])},innerNorthwest:function(){return a(-e,t,["top","alignRight"])},innerNortheast:function(){return a(e,t,["top","alignLeft"])},innerNorth:function(){return a(-e/2,t,["top","alignCentre"])},innerSouthwest:function(){return a(-e,-t,["bottom","alignRight"])},innerSoutheast:function(){return a(e,-t,["bottom","alignLeft"])},innerSouth:function(){return a(-e/2,-t,["bottom","alignCentre"])},innerWest:function(){return a(e,-t/2,["valignCentre","right"])},innerEast:function(){return a(-e,-t/2,["valignCentre","left"])}}},Tc=function(){return Nc(0,0,{})},Dc=function(e){return e},Ic=function(e,t){return function(n){return"rtl"===Mc(n)?t:e}},Mc=function(e){return"rtl"===Po(e,"direction")?"rtl":"ltr"};!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Hi||(Hi={}));var Oc="data-alloy-vertical-dir",Ac=function(e){return Ri(e,function(e){return ra(e)&&Ta(e,"data-alloy-vertical-dir")===Hi.BottomToTop})},Lc=function(){return Kt("layouts",[Rt("onLtr"),Rt("onRtl"),jt("onBottomLtr"),jt("onBottomRtl")])},Ec=function(e,t,n,r,a,o,i){var s=i.map(Ac).getOr(!1),c=t.layouts.map(function(t){return t.onLtr(e)}),l=t.layouts.map(function(t){return t.onRtl(e)}),u=s?t.layouts.bind(function(t){return t.onBottomLtr.map(function(t){return t(e)})}).or(c).getOr(a):c.getOr(n),d=s?t.layouts.bind(function(t){return t.onBottomRtl.map(function(t){return t(e)})}).or(l).getOr(o):l.getOr(r);return Ic(u,d)(e)},zc=[Rt("hotspot"),jt("bubble"),Qt("overrides",{}),Lc(),is("placement",function(e,t,n){var r=t.hotspot,a=lc(n,r.element),o=Ec(e.element,t,Bs(),$s(),Rs(),Vs(),b.some(t.hotspot.element));return b.some(Dc({anchorBox:a,bubble:t.bubble.getOr(Tc()),overrides:t.overrides,layouts:o,placer:b.none()}))})],Rc=[Rt("x"),Rt("y"),Qt("height",0),Qt("width",0),Qt("bubble",Tc()),Qt("overrides",{}),Lc(),is("placement",function(e,t,n){var r=uc(n,t.x,t.y),a=Di(r.left,r.top,t.width,t.height),o=Ec(e.element,t,Es(),zs(),Es(),zs(),b.none());return b.some(Dc({anchorBox:a,bubble:t.bubble,overrides:t.overrides,layouts:o,placer:b.none()}))})],Vc=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},Bc=Oe([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$c=(Bc.before,Bc.on,Bc.after,function(e){return e.fold(a,a,a)}),Uc=Oe([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pc={domRange:Uc.domRange,relative:Uc.relative,exact:Uc.exact,exactFromRange:function(e){return Uc.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t=function(e){return e.match({domRange:function(e){return ln.fromDom(e.startContainer)},relative:function(e,t){return $c(e)},exact:function(e,t,n,r){return e}})}(e);return ua(t)},range:Vc},Fc=function(e,t,n){var r,a=e.document.createRange();return r=a,t.fold(function(e){r.setStartBefore(e.dom)},function(e,t){r.setStart(e.dom,t)},function(e){r.setStartAfter(e.dom)}),function(e,t){t.fold(function(t){e.setEndBefore(t.dom)},function(t,n){e.setEnd(t.dom,n)},function(t){e.setEndAfter(t.dom)})}(a,n),a},Hc=function(e,t,n,r,a){var o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(r.dom,a),o},jc=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},qc=Oe([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Wc=function(e,t,n){return t(ln.fromDom(n.startContainer),n.startOffset,ln.fromDom(n.endContainer),n.endOffset)},Yc=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return qc.rtl(ln.fromDom(e.endContainer),e.endOffset,ln.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return Wc(0,qc.ltr,n)}):Wc(0,qc.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:r(e),rtl:b.none}},relative:function(t,n){return{ltr:Re(function(){return Fc(e,t,n)}),rtl:Re(function(){return b.some(Fc(e,n,t))})}},exact:function(t,n,r,a){return{ltr:Re(function(){return Hc(e,t,n,r,a)}),rtl:Re(function(){return b.some(Hc(e,r,a,t,n))})}}})}(e,t))};qc.ltr,qc.rtl;var Gc=function(e,t){var n=function(t){return e(t)?b.from(t.dom.nodeValue):b.none()};return{get:function(r){if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}}(aa,"text"),Kc=function(e){return Gc.getOption(e)},Qc=["img","br"],Xc=function(e){return Kc(e).filter(function(e){return 0!==e.trim().length||e.indexOf(" ")>-1}).isSome()||z(Qc,ta(e))},Jc=function(e,t){var n=function(e){for(var r=ma(e),a=r.length-1;a>=0;a--){var o=r[a];if(t(o))return b.some(o);var i=n(o);if(i.isSome())return i}return b.none()};return n(e)},Zc=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return Ln(n)?[]:$(n.querySelectorAll(e),ln.fromDom)}(t,e)},el=function(e,t,n,r){var a=function(e,t,n,r){var a=sa(e).dom.createRange();return a.setStart(e.dom,t),a.setEnd(n.dom,r),a}(e,t,n,r),o=En(e,n)&&t===r;return a.collapsed&&!o},tl=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return b.some(Vc(ln.fromDom(t.startContainer),t.startOffset,ln.fromDom(n.endContainer),n.endOffset))}return b.none()},nl=function(e){if(null===e.anchorNode||null===e.focusNode)return tl(e);var t=ln.fromDom(e.anchorNode),n=ln.fromDom(e.focusNode);return el(t,e.anchorOffset,n,e.focusOffset)?b.some(Vc(t,e.anchorOffset,n,e.focusOffset)):tl(e)},rl=function(e){return function(e){return b.from(e.getSelection())}(e).filter(function(e){return e.rangeCount>0}).bind(nl)},al=function(e,t){return function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?b.some(n).map(jc):b.none()}(function(e,t){return Yc(e,t).match({ltr:function(t,n,r,a){var o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(r.dom,a),o},rtl:function(t,n,r,a){var o=e.document.createRange();return o.setStart(r.dom,a),o.setEnd(t.dom,n),o}})}(e,t))},ol=function(e,t){return{element:e,offset:t}},il=function(e,t){var n=ma(e);if(0===n.length)return ol(e,t);if(t<n.length)return ol(n[t],0);var r=n[n.length-1],a=aa(r)?function(e){return Gc.get(e)}(r).length:ma(r).length;return ol(r,a)},sl=Oe([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),cl=function(e){return e.fold(a,function(e,t,n){return e.translate(-t,-n)})},ll=function(e){return e.fold(a,a)},ul=function(e){return j(e,function(e,t){return e.translate(t.left,t.top)},di(0,0))},dl=function(e){var t=$(e,ll);return ul(t)},fl=sl.screen,ml=sl.absolute,pl=function(e,t,n){var r=sa(e.element),a=xi(r),o=function(e,t,n){var r=ua(n.root).dom;return b.from(r.frameElement).map(ln.fromDom).filter(function(t){var n=sa(t),r=sa(e.element);return En(n,r)}).map(mi)}(e,0,n).getOr(a);return ml(o,a.left,a.top)},hl=function(e,t,n,r){var a=e,o=t,i=n,s=r;e<0&&(a=0,i=n+e),t<0&&(o=0,s=r+t);var c=fl(di(a,o));return b.some(function(e,t,n){return{point:e,width:t,height:n}}(c,i,s))},vl=function(e,t,n,r,a){return e.map(function(e){var o,i,s,c,l,u,d,f=[t,e.point],m=(o=function(){return dl(f)},i=function(){return dl(f)},s=function(){return function(e){var t=$(e,cl);return ul(t)}(f)},r.fold(o,i,s)),p=(c=m.left,l=m.top,u=e.width,d=e.height,{x:c,y:l,width:u,height:d}),h=n.showAbove?Rs():Bs(),v=n.showAbove?Vs():$s(),g=Ec(a,n,h,v,h,v,b.none());return Dc({anchorBox:p,bubble:n.bubble.getOr(Tc()),overrides:n.overrides,layouts:g,placer:b.none()})})},gl=function(e,t){return aa(e)?ol(e,t):il(e,t)},bl=function(e,t){return t.getSelection.getOrThunk(function(){return function(){return rl(e)}})().map(function(e){var t=gl(e.start,e.soffset),n=gl(e.finish,e.foffset);return Pc.range(t.element,t.offset,n.element,n.offset)})},yl=[jt("getSelection"),Rt("root"),jt("bubble"),Lc(),Qt("overrides",{}),Qt("showAbove",!1),is("placement",function(e,t,n){var r=ua(t.root).dom,a=pl(e,0,t),o=bl(r,t).bind(function(e){return al(r,Pc.exactFromRange(e)).orThunk(function(){var t=ln.fromText("\ufeff");return ha(e.start,t),al(r,Pc.exact(t,0,t,1)).map(function(e){return xa(t),e})}).bind(function(e){return hl(e.left,e.top,e.width,e.height)})}),i=bl(r,t).bind(function(e){return ra(e.start)?b.some(e.start):(t=e.start,da(t));var t}).getOr(e.element);return vl(o,a,t,n,i)})],wl=[Rt("node"),Rt("root"),jt("bubble"),Lc(),Qt("overrides",{}),Qt("showAbove",!1),is("placement",function(e,t,n){var r=pl(e,0,t);return t.node.bind(function(a){var o=a.dom.getBoundingClientRect(),i=hl(o.left,o.top,o.width,o.height),s=t.node.getOr(e.element);return vl(i,r,t,n,s)})})],xl=function(e){return e.x+e.width},kl=function(e,t){return e.x-t.width},_l=function(e,t){return e.y-t.height+e.height},Sl=function(e){return e.y},Cl=function(e,t,n){return ls(xl(e),Sl(e),n.southeast(),ds(),ys(e,{left:0,top:2}),"link-layout-se")},Nl=function(e,t,n){return ls(kl(e,t),Sl(e),n.southwest(),fs(),ys(e,{right:1,top:2}),"link-layout-sw")},Tl=function(e,t,n){return ls(xl(e),_l(e,t),n.northeast(),ms(),ys(e,{left:0,bottom:3}),"link-layout-ne")},Dl=function(e,t,n){return ls(kl(e,t),_l(e,t),n.northwest(),ps(),ys(e,{right:1,bottom:3}),"link-layout-nw")},Il=function(){return[Cl,Nl,Tl,Dl]},Ml=function(){return[Nl,Cl,Dl,Tl]},Ol=[Rt("item"),Lc(),Qt("overrides",{}),is("placement",function(e,t,n){var r=lc(n,t.item.element),a=Ec(e.element,t,Il(),Ml(),Il(),Ml(),b.none());return b.some(Dc({anchorBox:r,bubble:Tc(),overrides:t.overrides,layouts:a,placer:b.none()}))})],Al=Nt("anchor",{selection:yl,node:wl,hotspot:zc,submenu:Ol,makeshift:Rc}),Ll=function(e,t,n,r,a){var o=function(e,t){return function(e,t){return{anchorBox:e,origin:t}}(e,t)}(n.anchorBox,t);_c(o,a.element,n.bubble,n.layouts,r,n.overrides)},El=function(e,t,n,r,a,o){var i=o.map(Ii);return zl(e,t,n,r,a,i)},zl=function(e,t,n,a,o,i){var s=_t("positioning anchor.info",Al,a);ac(function(){Bo(o.element,"position","fixed");var n=Ho(o.element,"visibility");Bo(o.element,"visibility","hidden");var a,c=t.useFixed()?(a=document.documentElement,fc(0,0,a.clientWidth,a.clientHeight)):function(e){var t=mi(e.element),n=e.element.dom.getBoundingClientRect();return dc(t.left,t.top,n.width,n.height)}(e),l=s.placement,u=i.map(r).or(t.getBounds);l(e,s,c).each(function(t){t.placer.getOr(Ll)(e,c,t,u,o)}),n.fold(function(){qo(o.element,"visibility")},function(e){Bo(o.element,"visibility",e)}),Ho(o.element,"left").isNone()&&Ho(o.element,"top").isNone()&&Ho(o.element,"right").isNone()&&Ho(o.element,"bottom").isNone()&&Ho(o.element,"position").is("fixed")&&qo(o.element,"position")},o.element)},Rl=Object.freeze({__proto__:null,position:function(e,t,n,r,a){El(e,t,n,r,a,b.none())},positionWithin:El,positionWithinBounds:zl,getMode:function(e,t,n){return t.useFixed()?"fixed":"absolute"}}),Vl=[Qt("useFixed",c),jt("getBounds")],Bl=Ks({fields:Vl,name:"positioning",active:ec,apis:Rl}),$l=function(e){zr(e,Nr());var t=e.components();U(t,$l)},Ul=function(e){var t=e.components();U(t,Ul),zr(e,Cr())},Pl=function(e,t){ba(e.element,t.element)},Fl=function(e,t){var n=e.components();!function(e){U(e.components(),function(e){return xa(e.element)}),wa(e.element),e.syncComponents()}(e);var r=X(n,t);U(r,function(t){$l(t),e.getSystem().removeFromWorld(t)}),U(t,function(t){t.getSystem().isConnected()?Pl(e,t):(e.getSystem().addToWorld(t),Pl(e,t),Lo(e.element)&&Ul(t)),e.syncComponents()})},Hl=function(e,t){jl(e,t,ba)},jl=function(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),Lo(e.element)&&Ul(t),e.syncComponents()},ql=function(e){$l(e),xa(e.element),e.getSystem().removeFromWorld(e)},Wl=function(e){var t=da(e.element).bind(function(t){return e.getSystem().getByDom(t).toOptional()});ql(e),t.each(function(e){e.syncComponents()})},Yl=function(e){var t=e.components();U(t,ql),wa(e.element),e.syncComponents()},Gl=function(e,t){Kl(e,t,ba)},Kl=function(e,t,n){n(e,t.element);var r=ma(t.element);U(r,function(e){t.getByDom(e).each(Ul)})},Ql=function(e){var t=ma(e.element);U(t,function(t){e.getByDom(t).each($l)}),xa(e.element)},Xl=function(e,t,n,r){n.get().each(function(t){Yl(e)});var a=t.getAttachPoint(e);Hl(a,e);var o=e.getSystem().build(r);return Hl(e,o),n.set(o),o},Jl=function(e,t,n,r){var a=Xl(e,t,n,r);return t.onOpen(e,a),a},Zl=function(e,t,n){n.get().each(function(r){Yl(e),Wl(e),t.onClose(e,r),n.clear()})},eu=function(e,t,n){return n.isOpen()},tu=function(e,t,n){var r=t.getAttachPoint(e);Bo(e.element,"position",Bl.getMode(r)),function(e,t,n,r){Ho(e.element,t).fold(function(){Ma(e.element,n)},function(t){Na(e.element,n,t)}),Bo(e.element,t,r)}(e,"visibility",t.cloakVisibilityAttr,"hidden")},nu=function(e,t,n){var r;r=e.element,R(["top","left","right","bottom"],function(e){return Ho(r,e).isSome()})||qo(e.element,"position"),function(e,t,n){Da(e.element,n).fold(function(){return qo(e.element,t)},function(n){return Bo(e.element,t,n)})}(e,"visibility",t.cloakVisibilityAttr)},ru=Object.freeze({__proto__:null,cloak:tu,decloak:nu,open:Jl,openWhileCloaked:function(e,t,n,r,a){tu(e,t),Jl(e,t,n,r),a(),nu(e,t)},close:Zl,isOpen:eu,isPartOf:function(e,t,n,r){return eu(0,0,n)&&n.get().exists(function(n){return t.isPartOf(e,n,r)})},getState:function(e,t,n){return n.get()},setContent:function(e,t,n,r){return n.get().map(function(){return Xl(e,t,n,r)})}}),au=Object.freeze({__proto__:null,events:function(e,t){return Pr([jr(br(),function(n,r){Zl(n,e,t)})])}}),ou=[ns("onOpen"),ns("onClose"),Rt("isPartOf"),Rt("getAttachPoint"),Qt("cloakVisibilityAttr","data-precloak-visibility")],iu=Ks({fields:ou,name:"sandboxing",active:au,apis:ru,state:Object.freeze({__proto__:null,init:function(){var e=sn(b.none()),t=r("not-implemented");return to({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(b.none())},set:function(t){e.set(b.some(t))},get:function(){return e.get()}})}})}),su=r("dismiss.popups"),cu=r("reposition.popups"),lu=r("mouse.released"),uu=ot([Qt("isExtraPart",c),Kt("fireEventInstead",[Qt("event",Tr())])]),du=function(e){var t,n=_t("Dismissal",uu,e);return(t={})[su()]={schema:ot([Rt("target")]),onReceive:function(e,t){iu.isOpen(e)&&(iu.isPartOf(e,t.target)||n.isExtraPart(e,t.target)||n.fireEventInstead.fold(function(){return iu.close(e)},function(t){return zr(e,t.event)}))}},t},fu=ot([Kt("fireEventInstead",[Qt("event",Dr())]),Ut("doReposition")]),mu=function(e){var t,n=_t("Reposition",fu,e);return(t={})[cu()]={onReceive:function(e){iu.isOpen(e)&&n.fireEventInstead.fold(function(){return n.doReposition(e)},function(t){return zr(e,t.event)})}},t},pu=function(e,t,n){t.store.manager.onLoad(e,t,n)},hu=function(e,t,n){t.store.manager.onUnload(e,t,n)},vu=Object.freeze({__proto__:null,onLoad:pu,onUnload:hu,setValue:function(e,t,n,r){t.store.manager.setValue(e,t,n,r)},getValue:function(e,t,n){return t.store.manager.getValue(e,t,n)},getState:function(e,t,n){return n}}),gu=Object.freeze({__proto__:null,events:function(e,t){var n=e.resetOnDom?[Xr(function(n,r){pu(n,e,t)}),Jr(function(n,r){hu(n,e,t)})]:[Fs(e,t,pu)];return Pr(n)}}),bu=function(){var e=sn(null);return to({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})},yu=function(){var e=sn({}),t=sn({});return to({readState:function(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},lookup:function(n){return De(e.get(),n).orThunk(function(){return De(t.get(),n)})},update:function(n){var r=e.get(),a=t.get(),o={},i={};U(n,function(e){o[e.value]=e,De(e,"meta").each(function(t){De(t,"text").each(function(t){i[t]=e})})}),e.set(d(d({},r),o)),t.set(d(d({},a),i))},clear:function(){e.set({}),t.set({})}})},wu=Object.freeze({__proto__:null,memory:bu,dataset:yu,manual:function(){return to({readState:function(){}})},init:function(e){return e.store.manager.state(e)}}),xu=function(e,t,n,r){var a=t.store;n.update([r]),a.setValue(e,r),t.onSetValue(e,r)},ku=[jt("initialValue"),Rt("getFallbackEntry"),Rt("getDataKey"),Rt("setValue"),is("manager",{setValue:xu,getValue:function(e,t,n){var r=t.store,a=r.getDataKey(e);return n.lookup(a).fold(function(){return r.getFallbackEntry(a)},function(e){return e})},onLoad:function(e,t,n){t.store.initialValue.each(function(r){xu(e,t,n,r)})},onUnload:function(e,t,n){n.clear()},state:yu})],_u=[Rt("getValue"),Qt("setValue",t),jt("initialValue"),is("manager",{setValue:function(e,t,n,r){t.store.setValue(e,r),t.onSetValue(e,r)},getValue:function(e,t,n){return t.store.getValue(e)},onLoad:function(e,t,n){t.store.initialValue.each(function(n){t.store.setValue(e,n)})},onUnload:t,state:eo.init})],Su=[jt("initialValue"),is("manager",{setValue:function(e,t,n,r){n.set(r),t.onSetValue(e,r)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store.initialValue.each(function(e){n.isNotSet()&&n.set(e)})},onUnload:function(e,t,n){n.clear()},state:bu})],Cu=[Xt("store",{mode:"memory"},Nt("mode",{memory:Su,manual:_u,dataset:ku})),ns("onSetValue"),Qt("resetOnDom",!1)],Nu=Ks({fields:Cu,name:"representing",active:gu,apis:vu,extra:{setValueFrom:function(e,t){var n=Nu.getValue(t);Nu.setValue(e,n)}},state:wu}),Tu=function(e,t){return an(e,{},$(t,function(t){return n=t.name(),r="Cannot configure "+t.name()+" for "+e,mt(n,n,Ue(),rt(function(e){return pe("The field: "+n+" is forbidden. "+r)}));var n,r}).concat([on("dump",a)]))},Du=function(e){return e.dump},Iu=function(e,t){return d(d({},e.dump),Ys(t))},Mu=Tu,Ou=Iu,Au=Oe([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Lu=function(e){return Ie(e,"uiType")},Eu=function(e,t,n,a){return Lu(n)&&"placeholder"===n.uiType?function(e,t,n,a){return e.exists(function(e){return e!==n.owner})?Au.single(!0,r(n)):De(a,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+ye(a)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},function(e){return e.replace()})}(e,0,n,a):Au.single(!1,r(n))},zu=function(e,t,n,r){return Eu(e,0,n,r).fold(function(a,o){var i=Lu(n)?o(t,n.config,n.validated):o(t),s=De(i,"components").getOr([]),c=G(s,function(n){return zu(e,t,n,r)});return[d(d({},i),{components:c})]},function(e,r){if(Lu(n)){var o=r(t,n.config,n.validated);return n.validated.preprocess.getOr(a)(o)}return r(t)})},Ru=function(e,t,n,a){var o=ke(a,function(e,t){return a=e,o=!1,{name:r(n=t),required:function(){return a.fold(function(e,t){return e},function(e,t){return e})},used:function(){return o},replace:function(){if(o)throw new Error("Trying to use the same placeholder more than once: "+n);return o=!0,a}};var n,a,o}),i=function(e,t,n,r){return G(n,function(n){return zu(e,t,n,r)})}(e,t,n,o);return xe(o,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))}),i},Vu=Au.single,Bu=Au.multiple,$u=r("placeholder"),Uu=Oe([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Pu=Qt("factory",{sketch:a}),Fu=Qt("schema",[]),Hu=Rt("name"),ju=mt("pname","pname",Pe(function(e){return"<alloy."+Va(e.name)+">"}),Tt()),qu=on("schema",function(){return[jt("preprocess")]}),Wu=Qt("defaults",r({})),Yu=Qt("overrides",r({})),Gu=it([Pu,Fu,Hu,ju,Wu,Yu]),Ku=it([Pu,Fu,Hu,Wu,Yu]),Qu=it([Pu,Fu,Hu,ju,Wu,Yu]),Xu=it([Pu,qu,Hu,Rt("unit"),ju,Wu,Yu]),Ju=function(e){return e.fold(b.some,b.none,b.some,b.some)},Zu=function(e){var t=function(e){return e.name};return e.fold(t,t,t,t)},ed=function(e,t){return function(n){var r=_t("Converting part type",t,n);return e(r)}},td=ed(Uu.required,Gu),nd=ed(Uu.external,Ku),rd=ed(Uu.optional,Qu),ad=ed(Uu.group,Xu),od=r("entirety"),id=Object.freeze({__proto__:null,required:td,external:nd,optional:rd,group:ad,asNamedPart:Ju,name:Zu,asCommon:function(e){return e.fold(a,a,a,a)},original:od}),sd=function(e,t,n,r){return Ee(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r))},cd=function(e,t){var n={};return U(t,function(t){Ju(t).each(function(t){var r=ld(e,t.pname);n[t.name]=function(n){var a=_t("Part: "+t.name+" in "+e,it(t.schema),n);return d(d({},r),{config:n,validated:a})}})}),n},ld=function(e,t){return{uiType:$u(),owner:e,name:t}},ud=function(e,t,n){return{uiType:$u(),owner:e,name:t,config:n,validated:{}}},dd=function(e){return G(e,function(e){return e.fold(b.none,b.some,b.none,b.none).map(function(e){return Pt(e.name,e.schema.concat([ss(od())]))}).toArray()})},fd=function(e){return $(e,Zu)},md=function(e,t,n){return function(e,t,n){var a={},o={};return U(n,function(e){e.fold(function(e){a[e.pname]=Vu(!0,function(t,n,r){return e.factory.sketch(sd(t,e,n,r))})},function(e){var n=t.parts[e.name];o[e.name]=r(e.factory.sketch(sd(t,e,n[od()]),n))},function(e){a[e.pname]=Vu(!1,function(t,n,r){return e.factory.sketch(sd(t,e,n,r))})},function(e){a[e.pname]=Bu(!0,function(t,n,r){var a=t[e.name];return $(a,function(n){return e.factory.sketch(Ee(e.defaults(t,n,r),n,e.overrides(t,n)))})})})}),{internals:r(a),externals:r(o)}}(0,t,n)},pd=function(e,t,n){return Ru(b.some(e),t,t.components,n)},hd=function(e,t,n){var r=t.partUids[n];return e.getSystem().getByUid(r).toOptional()},vd=function(e,t,n){return hd(e,t,n).getOrDie("Could not find part: "+n)},gd=function(e,t,n){var a={},o=t.partUids,i=e.getSystem();return U(n,function(e){a[e]=r(i.getByUid(o[e]))}),a},bd=function(e,t){var n=e.getSystem();return ke(t.partUids,function(e,t){return r(n.getByUid(e))})},yd=function(e){return ye(e.partUids)},wd=function(e,t,n){var a={},o=t.partUids,i=e.getSystem();return U(n,function(e){a[e]=r(i.getByUid(o[e]).getOrDie())}),a},xd=function(e,t){var n=fd(t);return We($(n,function(t){return{key:t,value:e+"-"+t}}))},kd=function(e){return mt("partUids","partUids",Fe(function(t){return xd(t.uid,e)}),Tt())},_d=Object.freeze({__proto__:null,generate:cd,generateOne:ud,schemas:dd,names:fd,substitutes:md,components:pd,defaultUids:xd,defaultUidsSchema:kd,getAllParts:bd,getAllPartNames:yd,getPart:hd,getPartOrDie:vd,getParts:gd,getPartsOrDie:wd}),Sd=function(e,t,n,r,a){var o=function(e,t){return(e.length>0?[Pt("parts",e)]:[]).concat([Rt("uid"),Qt("dom",{}),Qt("components",[]),ss("originalSpec"),Qt("debug.sketcher",{})]).concat(t)}(r,a);return _t(e+" [SpecSchema]",ot(o.concat(t)),n)},Cd=function(e,t,n,r,a){var o=Nd(a),i=dd(n),s=kd(n),c=Sd(e,t,o,i,[s]),l=md(0,c,n);return r(c,pd(e,c,l.internals()),o,l.externals())},Nd=function(e){return function(e){return Ie(e,"uid")}(e)?e:d(d({},e),{uid:qa("uid")})};var Td,Dd=ot([Rt("name"),Rt("factory"),Rt("configFields"),Qt("apis",{}),Qt("extraApis",{})]),Id=ot([Rt("name"),Rt("factory"),Rt("configFields"),Rt("partFields"),Qt("apis",{}),Qt("extraApis",{})]),Md=function(e){var t=_t("Sketcher for "+e.name,Dd,e),n=ke(t.apis,Za),r=ke(t.extraApis,function(e,t){return Qa(e,t)});return d(d({name:t.name,configFields:t.configFields,sketch:function(e){return function(e,t,n,r){var a=Nd(r);return n(Sd(e,t,a,[],[]),a)}(t.name,t.configFields,t.factory,e)}},n),r)},Od=function(e){var t=_t("Sketcher for "+e.name,Id,e),n=cd(t.name,t.partFields),r=ke(t.apis,Za),a=ke(t.extraApis,function(e,t){return Qa(e,t)});return d(d({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:function(e){return Cd(t.name,t.configFields,t.partFields,t.factory,e)},parts:n},r),a)},Ad=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Ld=function(e,t){return e?b.some(t):b.none()},Ed=function(e){return"input"===ta(e)&&"radio"!==Ta(e,"type")||"textarea"===ta(e)},zd=Object.freeze({__proto__:null,getCurrent:function(e,t,n){return t.find(e)}}),Rd=[Rt("find")],Vd=Ks({fields:Rd,name:"composing",apis:zd}),Bd=function(e,t,n,r){var a=Zc(e.element,"."+t.highlightClass);U(a,function(n){R(r,function(e){return e.element===n})||(wo(n,t.highlightClass),e.getSystem().getByDom(n).each(function(n){t.onDehighlight(e,n),zr(n,Er())}))})},$d=function(e,t,n,r){Bd(e,t,0,[r]),Ud(e,t,n,r)||(bo(r.element,t.highlightClass),t.onHighlight(e,r),zr(r,Lr()))},Ud=function(e,t,n,r){return xo(r.element,t.highlightClass)},Pd=function(e,t,n,r){var a=Zc(e.element,"."+t.itemClass);return b.from(a[r]).fold(function(){return ie.error("No element found with index "+r)},e.getSystem().getByDom)},Fd=function(e,t,n){return Bi(e.element,"."+t.itemClass).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},Hd=function(e,t,n){var r=Zc(e.element,"."+t.itemClass);return(r.length>0?b.some(r[r.length-1]):b.none()).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},jd=function(e,t,n,r){var a=Zc(e.element,"."+t.itemClass);return W(a,function(e){return xo(e,t.highlightClass)}).bind(function(t){var n=mc(t,r,0,a.length-1);return e.getSystem().getByDom(a[n]).toOptional()})},qd=function(e,t,n){var r=Zc(e.element,"."+t.itemClass);return Ad($(r,function(t){return e.getSystem().getByDom(t).toOptional()}))},Wd=Object.freeze({__proto__:null,dehighlightAll:function(e,t,n){return Bd(e,t,0,[])},dehighlight:function(e,t,n,r){Ud(e,t,n,r)&&(wo(r.element,t.highlightClass),t.onDehighlight(e,r),zr(r,Er()))},highlight:$d,highlightFirst:function(e,t,n){Fd(e,t).each(function(r){$d(e,t,n,r)})},highlightLast:function(e,t,n){Hd(e,t).each(function(r){$d(e,t,n,r)})},highlightAt:function(e,t,n,r){Pd(e,t,n,r).fold(function(e){throw new Error(e)},function(r){$d(e,t,n,r)})},highlightBy:function(e,t,n,r){var a=qd(e,t);q(a,r).each(function(r){$d(e,t,n,r)})},isHighlighted:Ud,getHighlighted:function(e,t,n){return Bi(e.element,"."+t.highlightClass).bind(function(t){return e.getSystem().getByDom(t).toOptional()})},getFirst:Fd,getLast:Hd,getPrevious:function(e,t,n){return jd(e,t,0,-1)},getNext:function(e,t,n){return jd(e,t,0,1)},getCandidates:qd}),Yd=[Rt("highlightClass"),Rt("itemClass"),ns("onHighlight"),ns("onDehighlight")],Gd=Ks({fields:Yd,name:"highlighting",apis:Wd}),Kd=[8],Qd=[9],Xd=[13],Jd=[27],Zd=[32],ef=[37],tf=[38],nf=[39],rf=[40],af=function(e,t,n){var r=Q(e.slice(0,t)),a=Q(e.slice(t+1));return q(r.concat(a),n)},of=function(e,t,n){var r=Q(e.slice(0,t));return q(r,n)},sf=function(e,t,n){var r=e.slice(0,t),a=e.slice(t+1);return q(a.concat(r),n)},cf=function(e,t,n){var r=e.slice(t+1);return q(r,n)},lf=function(e){return function(t){var n=t.raw;return z(e,n.which)}},uf=function(e){return function(t){return K(e,function(e){return e(t)})}},df=function(e){return!0===e.raw.shiftKey},ff=function(e){return!0===e.raw.ctrlKey},mf=i(df),pf=function(e,t){return{matches:e,classification:t}},hf=function(e,t,n){t.exists(function(e){return n.exists(function(t){return En(t,e)})})||Rr(e,Ir(),{prevFocus:t,newFocus:n})},vf=function(){var e=function(e){return rc(e.element)};return{get:e,set:function(t,n){var r=e(t);t.getSystem().triggerFocus(n,t.element);var a=e(t);hf(t,r,a)}}},gf=function(){var e=function(e){return Gd.getHighlighted(e).map(function(e){return e.element})};return{get:e,set:function(n,r){var a=e(n);n.getSystem().getByDom(r).fold(t,function(e){Gd.highlight(n,e)});var o=e(n);hf(n,a,o)}}};!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Td||(Td={}));var bf,yf=function(e,t,n,r,a){var o=function(e,t,n,r,a){var o,i,s=n(e,t,r,a);return(o=s,i=t.event,q(o,function(e){return e.matches(i)}).map(function(e){return e.classification})).bind(function(n){return n(e,t,r,a)})},i={schema:function(){return e.concat([Qt("focusManager",vf()),Xt("focusInside","onFocus",yt(function(e){return z(["onFocus","onEnterOrSpace","onApi"],e)?ie.value(e):ie.error("Invalid value for focusInside")})),is("handler",i),is("state",t),is("sendFocusIn",a)])},processKey:o,toEvents:function(e,t){var i=e.focusInside!==Td.OnFocusMode?b.none():a(e).map(function(n){return jr(ur(),function(r,a){n(r,e,t),a.stop()})}),s=[jr(tr(),function(r,i){o(r,i,n,e,t).fold(function(){!function(n,r){var o=lf(Zd.concat(Xd))(r.event);e.focusInside===Td.OnEnterOrSpaceMode&&o&&Un(n,r)&&a(e).each(function(a){a(n,e,t),r.stop()})}(r,i)},function(e){i.stop()})}),jr(nr(),function(n,a){o(n,a,r,e,t).each(function(e){a.stop()})})];return Pr(i.toArray().concat(s))}};return i},wf=function(e){var t=[jt("onEscape"),jt("onEnter"),Qt("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Qt("firstTabstop",0),Qt("useTabstopAt",l),jt("visibilitySelector")].concat([e]),n=function(e,t){var n=e.visibilitySelector.bind(function(e){return $i(t,e)}).getOr(t);return ci(n)>0},a=function(e,t,r){(function(e,t){var r=Zc(e.element,t.selector),a=F(r,function(e){return n(t,e)});return b.from(a[t.firstTabstop])})(e,t).each(function(n){t.focusManager.set(e,n)})},i=function(e,t,r,a,o){return o(t,r,function(e){return function(e,t){return n(e,t)&&e.useTabstopAt(t)}(a,e)}).fold(function(){return a.cyclic?b.some(!0):b.none()},function(t){return a.focusManager.set(e,t),b.some(!0)})},s=function(e,t,n,r){var a=Zc(e.element,n.selector);return function(e,t){return t.focusManager.get(e).bind(function(e){return $i(e,t.selector)})}(e,n).bind(function(t){return W(a,o(En,t)).bind(function(t){return i(e,a,t,n,r)})})},c=r([pf(uf([df,lf(Qd)]),function(e,t,n){var r=n.cyclic?af:of;return s(e,0,n,r)}),pf(lf(Qd),function(e,t,n){var r=n.cyclic?sf:cf;return s(e,0,n,r)}),pf(lf(Jd),function(e,t,n){return n.onEscape.bind(function(n){return n(e,t)})}),pf(uf([mf,lf(Xd)]),function(e,t,n){return n.onEnter.bind(function(n){return n(e,t)})})]),u=r([]);return yf(t,eo.init,c,u,function(){return b.some(a)})},xf=wf(on("cyclic",c)),kf=wf(on("cyclic",l)),_f=function(e,t,n){return Ed(n)&&lf(Zd)(t.event)?b.none():function(e,t,n){return Br(e,n,pr()),b.some(!0)}(e,0,n)},Sf=function(e,t){return b.some(!0)},Cf=[Qt("execute",_f),Qt("useSpace",!1),Qt("useEnter",!0),Qt("useControlEnter",!1),Qt("useDown",!1)],Nf=function(e,t,n){return n.execute(e,t,e.element)},Tf=yf(Cf,eo.init,function(e,t,n,r){var a=n.useSpace&&!Ed(e.element)?Zd:[],o=n.useEnter?Xd:[],i=n.useDown?rf:[],s=a.concat(o).concat(i);return[pf(lf(s),Nf)].concat(n.useControlEnter?[pf(uf([ff,lf(Xd)]),Nf)]:[])},function(e,t,n,r){return n.useSpace&&!Ed(e.element)?[pf(lf(Zd),Sf)]:[]},function(){return b.none()}),Df=function(){var e=sn(b.none());return to({readState:function(){return e.get().map(function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,n){e.set(b.some({numRows:t,numColumns:n}))},getNumRows:function(){return e.get().map(function(e){return e.numRows})},getNumColumns:function(){return e.get().map(function(e){return e.numColumns})}})},If=Object.freeze({__proto__:null,flatgrid:Df,init:function(e){return e.state(e)}}),Mf=function(e){return function(t,n,r,a){var o=e(t.element);return Ef(o,t,n,r,a)}},Of=function(e,t){var n=Ic(e,t);return Mf(n)},Af=function(e,t){var n=Ic(t,e);return Mf(n)},Lf=function(e){return function(t,n,r,a){return Ef(e,t,n,r,a)}},Ef=function(e,t,n,r,a){return r.focusManager.get(t).bind(function(n){return e(t.element,n,r,a)}).map(function(e){return r.focusManager.set(t,e),!0})},zf=Lf,Rf=Lf,Vf=Lf,Bf=function(e){return!((t=e.dom).offsetWidth<=0&&t.offsetHeight<=0);var t},$f=function(e,t,n){var r=Zc(e,n);return function(e,t){return W(e,t).map(function(t){return{index:t,candidates:e}})}(F(r,Bf),function(e){return En(e,t)})},Uf=function(e,t){return W(e,function(e){return En(t,e)})},Pf=function(e,t,n,r){return r(Math.floor(t/n),t%n).bind(function(t){var r=t.row*n+t.column;return r>=0&&r<e.length?b.some(e[r]):b.none()})},Ff=function(e,t,n,r,a){return Pf(e,t,r,function(t,o){var i=t===n-1?e.length-t*r:r,s=mc(o,a,0,i-1);return b.some({row:t,column:s})})},Hf=function(e,t,n,r,a){return Pf(e,t,r,function(t,o){var i=mc(t,a,0,n-1),s=i===n-1?e.length-i*r:r,c=pc(o,0,s-1);return b.some({row:i,column:c})})},jf=[Rt("selector"),Qt("execute",_f),rs("onEscape"),Qt("captureTab",!1),cs()],qf=function(e,t,n){Bi(e.element,t.selector).each(function(n){t.focusManager.set(e,n)})},Wf=function(e){return function(t,n,r,a){return $f(t,n,r.selector).bind(function(t){return e(t.candidates,t.index,a.getNumRows().getOr(r.initSize.numRows),a.getNumColumns().getOr(r.initSize.numColumns))})}},Yf=function(e,t,n){return n.captureTab?b.some(!0):b.none()},Gf=Wf(function(e,t,n,r){return Ff(e,t,n,r,-1)}),Kf=Wf(function(e,t,n,r){return Ff(e,t,n,r,1)}),Qf=Wf(function(e,t,n,r){return Hf(e,t,n,r,-1)}),Xf=Wf(function(e,t,n,r){return Hf(e,t,n,r,1)}),Jf=r([pf(lf(ef),Of(Gf,Kf)),pf(lf(nf),Af(Gf,Kf)),pf(lf(tf),zf(Qf)),pf(lf(rf),Rf(Xf)),pf(uf([df,lf(Qd)]),Yf),pf(uf([mf,lf(Qd)]),Yf),pf(lf(Jd),function(e,t,n){return n.onEscape(e,t)}),pf(lf(Zd.concat(Xd)),function(e,t,n,r){return function(e,t){return t.focusManager.get(e).bind(function(e){return $i(e,t.selector)})}(e,n).bind(function(r){return n.execute(e,t,r)})})]),Zf=r([pf(lf(Zd),Sf)]),em=yf(jf,Df,Jf,Zf,function(){return b.some(qf)}),tm=function(e,t,n,r){var a=function(e,t,n){var o,i=mc(t,r,0,n.length-1);return i===e?b.none():(o=n[i],"button"===ta(o)&&"disabled"===Ta(o,"disabled")?a(e,i,n):b.from(n[i]))};return $f(e,n,t).bind(function(e){var t=e.index,n=e.candidates;return a(t,t,n)})},nm=[Rt("selector"),Qt("getInitial",b.none),Qt("execute",_f),rs("onEscape"),Qt("executeOnMove",!1),Qt("allowVertical",!0)],rm=function(e,t,n){return function(e,t){return t.focusManager.get(e).bind(function(e){return $i(e,t.selector)})}(e,n).bind(function(r){return n.execute(e,t,r)})},am=function(e,t,n){t.getInitial(e).orThunk(function(){return Bi(e.element,t.selector)}).each(function(n){t.focusManager.set(e,n)})},om=function(e,t,n){return tm(e,n.selector,t,-1)},im=function(e,t,n){return tm(e,n.selector,t,1)},sm=function(e){return function(t,n,r,a){return e(t,n,r,a).bind(function(){return r.executeOnMove?rm(t,n,r):b.some(!0)})}},cm=function(e,t,n){return n.onEscape(e,t)},lm=r([pf(lf(Zd),Sf)]),um=yf(nm,eo.init,function(e,t,n,r){var a=ef.concat(n.allowVertical?tf:[]),o=nf.concat(n.allowVertical?rf:[]);return[pf(lf(a),sm(Of(om,im))),pf(lf(o),sm(Af(om,im))),pf(lf(Xd),rm),pf(lf(Zd),rm),pf(lf(Jd),cm)]},lm,function(){return b.some(am)}),dm=function(e,t,n){return b.from(e[t]).bind(function(e){return b.from(e[n]).map(function(e){return{rowIndex:t,columnIndex:n,cell:e}})})},fm=function(e,t,n,r){var a=e[t].length,o=mc(n,r,0,a-1);return dm(e,t,o)},mm=function(e,t,n,r){var a=mc(n,r,0,e.length-1),o=e[a].length,i=pc(t,0,o-1);return dm(e,a,i)},pm=function(e,t,n,r){var a=e[t].length,o=pc(n+r,0,a-1);return dm(e,t,o)},hm=function(e,t,n,r){var a=pc(n+r,0,e.length-1),o=e[a].length,i=pc(t,0,o-1);return dm(e,a,i)},vm=[Pt("selectors",[Rt("row"),Rt("cell")]),Qt("cycles",!0),Qt("previousSelector",b.none),Qt("execute",_f)],gm=function(e,t,n){t.previousSelector(e).orThunk(function(){var n=t.selectors;return Bi(e.element,n.cell)}).each(function(n){t.focusManager.set(e,n)})},bm=function(e,t){return function(n,r,a){var o=a.cycles?e:t;return $i(r,a.selectors.row).bind(function(e){var t=Zc(e,a.selectors.cell);return Uf(t,r).bind(function(t){var r=Zc(n,a.selectors.row);return Uf(r,e).bind(function(e){var n=function(e,t){return $(e,function(e){return Zc(e,t.selectors.cell)})}(r,a);return o(n,e,t).map(function(e){return e.cell})})})})}},ym=bm(function(e,t,n){return fm(e,t,n,-1)},function(e,t,n){return pm(e,t,n,-1)}),wm=bm(function(e,t,n){return fm(e,t,n,1)},function(e,t,n){return pm(e,t,n,1)}),xm=bm(function(e,t,n){return mm(e,n,t,-1)},function(e,t,n){return hm(e,n,t,-1)}),km=bm(function(e,t,n){return mm(e,n,t,1)},function(e,t,n){return hm(e,n,t,1)}),_m=r([pf(lf(ef),Of(ym,wm)),pf(lf(nf),Af(ym,wm)),pf(lf(tf),zf(xm)),pf(lf(rf),Rf(km)),pf(lf(Zd.concat(Xd)),function(e,t,n){return rc(e.element).bind(function(r){return n.execute(e,t,r)})})]),Sm=r([pf(lf(Zd),Sf)]),Cm=yf(vm,eo.init,_m,Sm,function(){return b.some(gm)}),Nm=[Rt("selector"),Qt("execute",_f),Qt("moveOnTab",!1)],Tm=function(e,t,n){return n.focusManager.get(e).bind(function(r){return n.execute(e,t,r)})},Dm=function(e,t,n){Bi(e.element,t.selector).each(function(n){t.focusManager.set(e,n)})},Im=function(e,t,n){return tm(e,n.selector,t,-1)},Mm=function(e,t,n){return tm(e,n.selector,t,1)},Om=r([pf(lf(tf),Vf(Im)),pf(lf(rf),Vf(Mm)),pf(uf([df,lf(Qd)]),function(e,t,n,r){return n.moveOnTab?Vf(Im)(e,t,n,r):b.none()}),pf(uf([mf,lf(Qd)]),function(e,t,n,r){return n.moveOnTab?Vf(Mm)(e,t,n,r):b.none()}),pf(lf(Xd),Tm),pf(lf(Zd),Tm)]),Am=r([pf(lf(Zd),Sf)]),Lm=yf(Nm,eo.init,Om,Am,function(){return b.some(Dm)}),Em=[rs("onSpace"),rs("onEnter"),rs("onShiftEnter"),rs("onLeft"),rs("onRight"),rs("onTab"),rs("onShiftTab"),rs("onUp"),rs("onDown"),rs("onEscape"),Qt("stopSpaceKeyup",!1),jt("focusIn")],zm=yf(Em,eo.init,function(e,t,n){return[pf(lf(Zd),n.onSpace),pf(uf([mf,lf(Xd)]),n.onEnter),pf(uf([df,lf(Xd)]),n.onShiftEnter),pf(uf([df,lf(Qd)]),n.onShiftTab),pf(uf([mf,lf(Qd)]),n.onTab),pf(lf(tf),n.onUp),pf(lf(rf),n.onDown),pf(lf(ef),n.onLeft),pf(lf(nf),n.onRight),pf(lf(Zd),n.onSpace),pf(lf(Jd),n.onEscape)]},function(e,t,n){return n.stopSpaceKeyup?[pf(lf(Zd),Sf)]:[]},function(e){return e.focusIn}),Rm=xf.schema(),Vm=kf.schema(),Bm=um.schema(),$m=em.schema(),Um=Cm.schema(),Pm=Tf.schema(),Fm=Lm.schema(),Hm=zm.schema(),jm=Xs({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Rm,cyclic:Vm,flow:Bm,flatgrid:$m,matrix:Um,execution:Pm,menu:Fm,special:Hm}),name:"keying",active:{events:function(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function(e,t,n){t.sendFocusIn(t).fold(function(){e.getSystem().triggerFocus(e.element,e.element)},function(r){r(e,t,n)})},setGridSize:function(e,t,n,r,a){!function(e){return Me(e,"setGridSize")}(n)?console.error("Layout does not support setGridSize"):n.setGridSize(r,a)}},state:If}),qm=function(e,t,n,r){var a=e.getSystem().build(r);jl(e,a,n)},Wm=function(e,t,n,r){var a=Ym(e);q(a,function(e){return En(r.element,e.element)}).each(Wl)},Ym=function(e,t){return e.components()},Gm=function(e,t,n,r,a){var o=Ym(e);return b.from(o[r]).map(function(t){return Wm(e,0,0,t),a.each(function(t){qm(e,0,function(e,t){var n,a;a=t,pa(n=e,r).fold(function(){ba(n,a)},function(e){ha(e,a)})},t)}),t})},Km=Ks({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(e,t,n,r){qm(e,0,ba,r)},prepend:function(e,t,n,r){qm(e,0,ga,r)},remove:Wm,replaceAt:Gm,replaceBy:function(e,t,n,r,a){var o=Ym(e);return W(o,r).bind(function(t){return Gm(e,0,0,t,a)})},set:function(e,t,n,r){ac(function(){var t=$(r,e.getSystem().build);Fl(e,t)},e.element)},contents:Ym})}),Qm=function(e,t){return{key:e,value:{config:{},me:function(e,t){var n=Pr(t);return Ks({fields:[Rt("enabled")],name:e,active:{events:r(n)}})}(e,t),configAsRaw:r({}),initialConfig:{},state:eo}}},Xm=function(e,t){t.ignore||(tc(e.element),t.onFocus(e))},Jm=Object.freeze({__proto__:null,focus:Xm,blur:function(e,t){t.ignore||e.element.dom.blur()},isFocused:function(e){return t=e.element,n=Do(t).dom,t.dom===n.activeElement;var t,n}}),Zm=Object.freeze({__proto__:null,exhibit:function(e,t){var n=t.ignore?{}:{attributes:{tabindex:"-1"}};return ro(n)},events:function(e){return Pr([jr(ur(),function(t,n){Xm(t,e),n.stop()})].concat(e.stopMousedown?[jr(Gn(),function(e,t){t.event.prevent()})]:[]))}}),ep=[ns("onFocus"),Qt("stopMousedown",!1),Qt("ignore",!1)],tp=Ks({fields:ep,name:"focusing",active:Zm,apis:Jm}),np=function(e,t,n){var r=t.aria;r.update(e,r,n.get())},rp=function(e,t,n){t.toggleClass.each(function(t){n.get()?bo(e.element,t):wo(e.element,t)})},ap=function(e,t,n){sp(e,t,n,!n.get())},op=function(e,t,n){n.set(!0),rp(e,t,n),np(e,t,n)},ip=function(e,t,n){n.set(!1),rp(e,t,n),np(e,t,n)},sp=function(e,t,n,r){(r?op:ip)(e,t,n)},cp=function(e,t,n){sp(e,t,n,t.selected)},lp=Object.freeze({__proto__:null,onLoad:cp,toggle:ap,isOn:function(e,t,n){return n.get()},on:op,off:ip,set:sp}),up=Object.freeze({__proto__:null,exhibit:function(){return ro({})},events:function(e,t){var n,r,a,o=(n=e,r=t,a=ap,ea(function(e){a(e,n,r)})),i=Fs(e,t,cp);return Pr(Y([e.toggleOnExecute?[o]:[],[i]]))}}),dp=function(e,t,n){Na(e.element,"aria-expanded",n)},fp=[Qt("selected",!1),jt("toggleClass"),Qt("toggleOnExecute",!0),Xt("aria",{mode:"none"},Nt("mode",{pressed:[Qt("syncWithExpanded",!1),is("update",function(e,t,n){Na(e.element,"aria-pressed",n),t.syncWithExpanded&&dp(e,t,n)})],checked:[is("update",function(e,t,n){Na(e.element,"aria-checked",n)})],expanded:[is("update",dp)],selected:[is("update",function(e,t,n){Na(e.element,"aria-selected",n)})],none:[is("update",t)]}))],mp=Ks({fields:fp,name:"toggling",active:up,apis:lp,state:(bf=!1,{init:function(){var e=sn(bf);return{get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(bf)},readState:function(){return e.get()}}}})}),pp=function(){var e=function(e,t){t.stop(),Vr(e)};return[jr(or(),e),jr(vr(),e),Kr(jn()),Kr(Gn())]},hp=function(e){return Pr(Y([e.map(function(e){return ea(function(t,n){e(t),n.stop()})}).toArray(),pp()]))},vp=function(e){(rc(e.element).isNone()||tp.isFocused(e))&&(tp.isFocused(e)||tp.focus(e),Rr(e,"alloy.item-hover",{item:e}))},gp=function(e){Rr(e,"alloy.item-focus",{item:e})},bp=r("alloy.item-hover"),yp=r("alloy.item-focus"),wp=[Rt("data"),Rt("components"),Rt("dom"),Qt("hasSubmenu",!1),jt("toggling"),Mu("itemBehaviours",[mp,tp,jm,Nu]),Qt("ignoreFocus",!1),Qt("domModification",{}),is("builder",function(e){return{dom:e.dom,domModification:d(d({},e.domModification),{attributes:d(d(d({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Ou(e.itemBehaviours,[e.toggling.fold(mp.revoke,function(e){return mp.config(d({aria:{mode:"checked"}},e))}),tp.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(e){gp(e)}}),jm.config({mode:"execution"}),Nu.config({store:{mode:"memory",initialValue:e.data}}),Qm("item-type-events",m(pp(),[jr(Jn(),vp),jr(hr(),tp.focus)]))]),components:e.components,eventOrder:e.eventOrder}}),Qt("eventOrder",{})],xp=[Rt("dom"),Rt("components"),is("builder",function(e){return{dom:e.dom,components:e.components,events:Pr([(t=hr(),jr(t,function(e,t){t.stop()}))])};var t})],kp=r([td({name:"widget",overrides:function(e){return{behaviours:Ys([Nu.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:function(){}}})])}}})]),_p=[Rt("uid"),Rt("data"),Rt("components"),Rt("dom"),Qt("autofocus",!1),Qt("ignoreFocus",!1),Mu("widgetBehaviours",[Nu,tp,jm]),Qt("domModification",{}),kd(kp()),is("builder",function(e){var t=md(0,e,kp()),n=pd("item-widget",e,t.internals()),r=function(t){return hd(t,e,"widget").map(function(e){return jm.focusIn(e),e})},a=function(t,n){return Ed(n.event.target)?b.none():e.autofocus?(n.setSource(t.element),b.none()):b.none()};return{dom:e.dom,components:n,domModification:e.domModification,events:Pr([ea(function(e,t){r(e).each(function(e){t.stop()})}),jr(Jn(),vp),jr(hr(),function(t,n){e.autofocus?r(t):tp.focus(t)})]),behaviours:Ou(e.widgetBehaviours,[Nu.config({store:{mode:"memory",initialValue:e.data}}),tp.config({ignore:e.ignoreFocus,onFocus:function(e){gp(e)}}),jm.config({mode:"special",focusIn:e.autofocus?function(e){r(e)}:Js(),onLeft:a,onRight:a,onEscape:function(t,n){return tp.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),b.none()):b.none():(tp.focus(t),b.some(!0))}})])}})],Sp=Nt("type",{widget:_p,item:wp,separator:xp}),Cp=r([ad({factory:{sketch:function(e){var t=_t("menu.spec item",Sp,e);return t.builder(t)}},name:"items",unit:"item",defaults:function(e,t){return t.hasOwnProperty("uid")?t:d(d({},t),{uid:qa("item")})},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),Np=r([Rt("value"),Rt("items"),Rt("dom"),Rt("components"),Qt("eventOrder",{}),Tu("menuBehaviours",[Gd,Nu,Vd,jm]),Xt("movement",{mode:"menu",moveOnTab:!0},Nt("mode",{grid:[cs(),is("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}})],matrix:[is("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}}),Rt("rowSelector")],menu:[Qt("moveOnTab",!0),is("config",function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}})]})),Vt("markers",Xi()),Qt("fakeFocus",!1),Qt("focusManager",vf()),ns("onHighlight")]),Tp=r("alloy.menu-focus"),Dp=Od({name:"Menu",configFields:Np(),partFields:Cp(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Iu(e.menuBehaviours,[Gd.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),Nu.config({store:{mode:"memory",initialValue:e.value}}),Vd.config({find:b.some}),jm.config(e.movement.config(e,e.movement))]),events:Pr([jr(yp(),function(e,t){var n=t.event;e.getSystem().getByDom(n.target).each(function(n){Gd.highlight(e,n),t.stop(),Rr(e,Tp(),{menu:e,item:n})})}),jr(bp(),function(e,t){var n=t.event.item;Gd.highlight(e,n)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Ip=function(e,t,n,r){return De(n,r).bind(function(r){return De(e,r).bind(function(r){var a=Ip(e,t,n,r);return b.some([r].concat(a))})}).getOr([])},Mp=function(e,t){var n={};xe(e,function(e,t){U(e,function(e){n[e]=t})});var r=t,a=_e(t,function(e,t){return{k:e,v:t}}),o=ke(a,function(e,t){return[t].concat(Ip(n,r,a,t))});return ke(n,function(e){return De(o,e).getOr([e])})},Op=function(e){return"prepared"===e.type?b.some(e.menu):b.none()},Ap={init:function(){var e=sn({}),t=sn({}),n=sn({}),r=sn(b.none()),a=sn({}),o=function(t,n,r){return i(t).bind(function(a){return function(t){return Ne(e.get(),function(e,n){return e===t})}(t).bind(function(e){return n(e).map(function(e){return{triggeredMenu:a,triggeringItem:e,triggeringPath:r}})})})},i=function(e){return s(e).bind(Op)},s=function(e){return De(t.get(),e)},c=function(t){return De(e.get(),t)};return{setMenuBuilt:function(e,n){var r;t.set(d(d({},t.get()),((r={})[e]={type:"prepared",menu:n},r)))},setContents:function(o,i,s,c){r.set(b.some(o)),e.set(s),t.set(i),a.set(c);var l=Mp(c,s);n.set(l)},expand:function(t){return De(e.get(),t).map(function(e){var r=De(n.get(),t).getOr([]);return[e].concat(r)})},refresh:function(e){return De(n.get(),e)},collapse:function(e){return De(n.get(),e).bind(function(e){return e.length>1?b.some(e.slice(1)):b.none()})},lookupMenu:s,lookupItem:c,otherMenus:function(e){var t=a.get();return X(ye(t),e)},getPrimary:function(){return r.get().bind(i)},getMenus:function(){return t.get()},clear:function(){e.set({}),t.set({}),n.set({}),r.set(b.none())},isClear:function(){return r.get().isNone()},getTriggeringPath:function(e,t){var a=F(c(e).toArray(),function(e){return i(e).isSome()});return De(n.get(),e).bind(function(e){var n=Q(a.concat(e));return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.isSome())return b.none();t.push(r.getOrDie())}return b.some(t)}(G(n,function(e,a){return o(e,t,n.slice(0,a+1)).fold(function(){return r.get().is(e)?[]:[b.none()]},function(e){return[b.some(e)]})}))})}}},extractPreparedMenu:Op},Lp=r("collapse-item"),Ep=Md({name:"TieredMenu",configFields:[os("onExecute"),os("onEscape"),as("onOpenMenu"),as("onOpenSubmenu"),ns("onRepositionMenu"),ns("onCollapseMenu"),Qt("highlightImmediately",!0),Pt("data",[Rt("primary"),Rt("menus"),Rt("expansions")]),Qt("fakeFocus",!1),ns("onHighlight"),ns("onHover"),Zi(),Rt("dom"),Qt("navigateOnHover",!0),Qt("stayInDom",!1),Tu("tmenuBehaviours",[jm,Gd,Vd,Km]),Qt("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)},repositionMenus:function(e,t){e.repositionMenus(t)}},factory:function(e,t){var n,r=sn(b.none()),a=Ap.init(),o=function(t){var n=function(t,n,r){return ke(r,function(r,a){var o=function(){return Dp.sketch(d(d({},r),{value:a,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?gf():vf()}))};return a===n?{type:"prepared",menu:t.getSystem().build(o())}:{type:"notbuilt",nbMenu:o}})}(t,e.data.primary,e.data.menus),r=s();return a.setContents(e.data.primary,n,e.data.expansions,r),a.getPrimary()},i=function(e){return Nu.getValue(e).value},s=function(t){return ke(e.data.menus,function(e,t){return G(e.items,function(e){return"separator"===e.type?[]:[e.data.value]})})},c=function(e,t){Gd.highlight(e,t),Gd.getHighlighted(t).orThunk(function(){return Gd.getFirst(t)}).each(function(t){Br(e,t.element,hr())})},l=function(e,t){return Ad($(t,function(t){return e.lookupMenu(t).bind(function(e){return"prepared"===e.type?b.some(e.menu):b.none()})}))},u=function(t,n,r){var a=l(n,n.otherMenus(r));U(a,function(n){_o(n.element,[e.markers.backgroundMenu]),e.stayInDom||Km.remove(t,n)})},f=function(t,n){var a=function(t){return r.get().getOrThunk(function(){var n={},a=Zc(t.element,"."+e.markers.item),o=F(a,function(e){return"true"===Ta(e,"aria-haspopup")});return U(o,function(e){t.getSystem().getByDom(e).each(function(e){var t=i(e);n[t]=e})}),r.set(b.some(n)),n})}(t);xe(a,function(e,t){var r=z(n,t);Na(e.element,"aria-expanded",r)})},m=function(t,n,r){return b.from(r[0]).bind(function(a){return n.lookupMenu(a).bind(function(a){if("notbuilt"===a.type)return b.none();var o=a.menu,i=l(n,r.slice(1));return U(i,function(t){bo(t.element,e.markers.backgroundMenu)}),Lo(o.element)||Km.append(t,oi(o)),_o(o.element,[e.markers.backgroundMenu]),c(t,o),u(t,n,r),b.some(o)})})};!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(n||(n={}));var p=function(t,r,o){void 0===o&&(o=n.HighlightSubmenu);var s=i(r);return a.expand(s).bind(function(i){return f(t,i),b.from(i[0]).bind(function(s){return a.lookupMenu(s).bind(function(c){var l=function(e,t,n){if("notbuilt"===n.type){var r=e.getSystem().build(n.nbMenu());return a.setMenuBuilt(t,r),r}return n.menu}(t,s,c);return Lo(l.element)||Km.append(t,oi(l)),e.onOpenSubmenu(t,r,l,Q(i)),o===n.HighlightSubmenu?(Gd.highlightFirst(l),m(t,a,i)):(Gd.dehighlightAll(l),b.some(r))})})})},h=function(t,n){var r=i(n);return a.collapse(r).bind(function(r){return f(t,r),m(t,a,r).map(function(r){return e.onCollapseMenu(t,n,r),r})})},v=function(t){return function(n,r){return $i(r.getSource(),"."+e.markers.item).bind(function(e){return n.getSystem().getByDom(e).toOptional().bind(function(e){return t(n,e).map(function(){return!0})})})}},g=Pr([jr(Tp(),function(e,t){var n=t.event.item;a.lookupItem(i(n)).each(function(){var n=t.event.menu;Gd.highlight(e,n);var r=i(t.event.item);a.refresh(r).each(function(t){return u(e,a,t)})})}),ea(function(t,r){var a=r.event.target;t.getSystem().getByDom(a).each(function(r){0===i(r).indexOf("collapse-item")&&h(t,r),p(t,r,n.HighlightSubmenu).fold(function(){e.onExecute(t,r)},function(){})})}),Xr(function(t,n){o(t).each(function(n){Km.append(t,oi(n)),e.onOpenMenu(t,n),e.highlightImmediately&&c(t,n)})})].concat(e.navigateOnHover?[jr(bp(),function(t,r){var o=r.event.item;!function(e,t){var n=i(t);a.refresh(n).bind(function(t){return f(e,t),m(e,a,t)})}(t,o),p(t,o,n.HighlightParent),e.onHover(t,o)})]:[])),y=function(e){return Gd.getHighlighted(e).bind(Gd.getHighlighted)},w={collapseMenu:function(e){y(e).each(function(t){h(e,t)})},highlightPrimary:function(e){a.getPrimary().each(function(t){c(e,t)})},repositionMenus:function(t){a.getPrimary().bind(function(e){return y(t).bind(function(e){var t=i(e),n=Te(a.getMenus()),r=Ad($(n,Ap.extractPreparedMenu));return a.getTriggeringPath(t,function(e){return t=e,re(r,function(e){if(!e.getSystem().isConnected())return b.none();var n=Gd.getCandidates(e);return q(n,function(e){return i(e)===t})});var t})}).map(function(t){return{primary:e,triggeringPath:t}})}).fold(function(){(function(e){return b.from(e.components()[0]).filter(function(e){return"menu"===Ta(e.element,"role")})})(t).each(function(n){e.onRepositionMenu(t,n,[])})},function(n){var r=n.primary,a=n.triggeringPath;e.onRepositionMenu(t,r,a)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Iu(e.tmenuBehaviours,[jm.config({mode:"special",onRight:v(function(e,t){return Ed(t.element)?b.none():p(e,t,n.HighlightSubmenu)}),onLeft:v(function(e,t){return Ed(t.element)?b.none():h(e,t)}),onEscape:v(function(t,n){return h(t,n).orThunk(function(){return e.onEscape(t,n).map(function(){return t})})}),focusIn:function(e,t){a.getPrimary().each(function(t){Br(e,t.element,hr())})}}),Gd.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Vd.config({find:function(e){return Gd.getHighlighted(e)}}),Km.config({})]),eventOrder:e.eventOrder,apis:w,events:g}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:qe(e,t),expansions:{}}},collapseItem:function(e){return{value:Va(Lp()),meta:{text:e}}}}}),zp=Md({name:"InlineView",configFields:[Rt("lazySink"),ns("onShow"),ns("onHide"),Gt("onEscape"),Tu("inlineBehaviours",[iu,Nu,Zs]),Kt("fireDismissalEventInstead",[Qt("event",Tr())]),Kt("fireRepositionEventInstead",[Qt("event",Dr())]),Qt("getRelated",b.none),Qt("isExtraPart",c),Qt("eventOrder",b.none)],factory:function(e,t){var n=function(e,t,n,a){r(e,t,n,function(){return a.map(function(e){return Ii(e)})})},r=function(t,n,r,a){var o=e.lazySink(t).getOrDie();iu.openWhileCloaked(t,r,function(){return Bl.positionWithinBounds(o,n,t,a())}),Nu.setValue(t,b.some({mode:"position",anchor:n,getBounds:a}))},a=function(t,n,r,a){var o=function(e,t,n,r,a){var o=function(){return e.lazySink(t)},i="horizontal"===r.type?{layouts:{onLtr:function(){return Bs()},onRtl:function(){return $s()}}}:{},s=function(e){return function(e){return 2===e.length}(e)?i:{}};return Ep.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:function(){return iu.close(t),e.onEscape.map(function(e){return e(t)}),b.some(!0)},onExecute:function(){return b.some(!0)},onOpenMenu:function(e,t){Bl.positionWithinBounds(o().getOrDie(),n,t,a())},onOpenSubmenu:function(e,t,n,r){var a=o().getOrDie();Bl.position(a,d({anchor:"submenu",item:t},s(r)),n)},onRepositionMenu:function(e,t,r){var i=o().getOrDie();Bl.positionWithinBounds(i,n,t,a()),U(r,function(e){var t=s(e.triggeringPath);Bl.position(i,d({anchor:"submenu",item:e.triggeringItem},t),e.triggeredMenu)})}})}(e,t,n,r,a);iu.open(t,o),Nu.setValue(t,b.some({mode:"menu",menu:o}))},o=function(t){iu.isOpen(t)&&Nu.getValue(t).each(function(n){switch(n.mode){case"menu":iu.getState(t).each(function(e){Ep.repositionMenus(e)});break;case"position":var r=e.lazySink(t).getOrDie();Bl.positionWithinBounds(r,n.anchor,t,n.getBounds())}})},i={setContent:function(e,t){iu.setContent(e,t)},showAt:function(e,t,r){n(e,t,r,b.none())},showWithin:n,showWithinBounds:r,showMenuAt:function(e,t,n){a(e,t,n,function(){return b.none()})},showMenuWithinBounds:a,hide:function(e){iu.isOpen(e)&&(Nu.setValue(e,b.none()),iu.close(e))},getContent:function(e){return iu.getState(e)},reposition:o,isOpen:iu.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Iu(e.inlineBehaviours,[iu.config({isPartOf:function(t,n,r){return Fi(n,r)||function(t,n){return e.getRelated(t).exists(function(e){return Fi(e,n)})}(t,r)},getAttachPoint:function(t){return e.lazySink(t).getOrDie()},onOpen:function(t){e.onShow(t)},onClose:function(t){e.onHide(t)}}),Nu.config({store:{mode:"memory",initialValue:b.none()}}),Zs.config({channels:d(d({},du(d({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})))),mu(d(d({},e.fireRepositionEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})),{doReposition:o})))})]),eventOrder:e.eventOrder,apis:i}},apis:{showAt:function(e,t,n,r){e.showAt(t,n,r)},showWithin:function(e,t,n,r,a){e.showWithin(t,n,r,a)},showWithinBounds:function(e,t,n,r,a){e.showWithinBounds(t,n,r,a)},showMenuAt:function(e,t,n,r){e.showMenuAt(t,n,r)},showMenuWithinBounds:function(e,t,n,r,a){e.showMenuWithinBounds(t,n,r,a)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)},reposition:function(e,t){e.reposition(t)}}}),Rp=function(e){return e.x},Vp=function(e,t){return e.x+e.width/2-t.width/2},Bp=function(e,t){return e.x+e.width-t.width},$p=function(e){return e.y},Up=function(e,t){return e.y+e.height-t.height},Pp=function(e,t,n){return ls(Bp(e,t),Up(e,t),n.innerSoutheast(),ps(),ys(e,{right:0,bottom:3}),"layout-inner-se")},Fp=function(e,t,n){return ls(Rp(e),Up(e,t),n.innerSouthwest(),ms(),ys(e,{left:1,bottom:3}),"layout-inner-sw")},Hp=function(e,t,n){return ls(Bp(e,t),$p(e),n.innerNortheast(),fs(),ys(e,{right:0,top:2}),"layout-inner-ne")},jp=function(e,t,n){return ls(Rp(e),$p(e),n.innerNorthwest(),ds(),ys(e,{left:1,top:2}),"layout-inner-nw")},qp=function(e,t,n){return ls(Vp(e,t),$p(e),n.innerNorth(),hs(),ys(e,{top:2}),"layout-inner-n")},Wp=function(e,t,n){return ls(Vp(e,t),Up(e,t),n.innerSouth(),vs(),ys(e,{bottom:3}),"layout-inner-s")},Yp=tinymce.util.Tools.resolve("tinymce.util.Delay"),Gp=Md({name:"Button",factory:function(e){var t=hp(e.action),n=e.dom.tag,r=function(t){return De(e.dom,"attributes").bind(function(e){return De(e,t)})};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Ou(e.buttonBehaviours,[tp.config({}),jm.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===n){var e=r("type").getOr("button"),t=r("role").map(function(e){return{role:e}}).getOr({});return d({type:e},t)}return{role:r("role").getOr("button")}}()},eventOrder:e.eventOrder}},configFields:[Qt("uid",void 0),Rt("dom"),Qt("components",[]),Mu("buttonBehaviours",[tp,jm]),jt("action"),jt("role"),Qt("eventOrder",{})]}),Kp=function(e){var t=function(e){return void 0!==e.uid}(e)&&Me(e,"uid")?e.uid:qa("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).toOptional()},asSpec:function(){return d(d({},e),{uid:t})}}},Qp=function(e){return b.from(e()["temporary-placeholder"]).getOr("!not found!")},Xp=function(e,t){return b.from(t()[e.toLowerCase()]).getOrThunk(function(){return Qp(t)})},Jp={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Zp=Md({name:"Notification",factory:function(e){var t,n,r=Kp({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Ys([Km.config({})])}),a=function(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}},o=function(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}},i=Kp({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},o(0)],behaviours:Ys([Km.config({})])}),s={updateProgress:function(e,t){e.getSystem().isConnected()&&i.getOpt(e).each(function(e){Km.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(t)]},o(t)])})},updateText:function(e,t){if(e.getSystem().isConnected()){var n=r.get(e);Km.set(n,[ti(t)])}}},c=Y([e.icon.toArray(),e.level.toArray(),e.level.bind(function(e){return b.from(Jp[e])}).toArray()]),l=Kp(Gp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Xp("close",e.iconProvider),attributes:{"aria-label":e.translationProvider("Close")}}}],action:function(t){e.onAction(t)}})),u=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=c,n=e.iconProvider,re(t,function(e){return b.from(n()[e.toLowerCase()])}).getOrThunk(function(){return Qp(n)}))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Ys([Km.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Ys([tp.config({}),Qm("notification-events",[jr(Zn(),function(e){l.getOpt(e).each(tp.focus)})])]),components:u.concat(e.progress?[i.asSpec()]:[]).concat(e.closeButton?[l.asSpec()]:[]),apis:s}},configFields:[jt("level"),Rt("progress"),Rt("icon"),Rt("onAction"),Rt("text"),Rt("iconProvider"),Rt("translationProvider"),tn("closeButton",!0)],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function eh(e,t,n){var r=t.backstage;return{open:function(e,a){var o=!e.closeButton&&e.timeout&&(e.timeout>0||e.timeout<0),i=function(){a(),zp.hide(c)},s=ai(Zp.sketch({text:e.text,level:z(["success","error","warning","warn","info"],e.type)?e.type:void 0,progress:!0===e.progressBar,icon:b.from(e.icon),closeButton:!o,onAction:i,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),c=ai(zp.sketch(d({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:t.backstage.shared.getSink,fireDismissalEventInstead:{}},r.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),e.timeout>0&&Yp.setTimeout(function(){i()},e.timeout),{close:i,moveTo:function(e,t){zp.showAt(c,{anchor:"makeshift",x:e,y:t},oi(s))},moveRel:function(e,n){if("banner"!==n){var r=function(e){switch(e){case"bc-bc":return Wp;case"tc-tc":return qp;case"tc-bc":return Ms;case"bc-tc":default:return Os}}(n),a={anchor:"node",root:Eo(),node:b.some(ln.fromDom(e)),layouts:{onRtl:function(){return[r]},onLtr:function(){return[r]}}};zp.showAt(c,a,oi(s))}else zp.showAt(c,t.backstage.shared.anchors.banner(),oi(s))},text:function(e){Zp.updateText(s,e)},settings:e,getEl:function(){return s.element.dom},progressBar:{value:function(e){Zp.updateProgress(s,e)}}}},close:function(e){e.close()},reposition:function(e){!function(e){U(e,function(e){return e.moveTo(0,0)})}(e),function(e){e.length>0&&(ee(e).each(function(e){return e.moveRel(null,"banner")}),U(e,function(t,n){n>0&&t.moveRel(e[n-1].getEl(),"bc-tc")}))}(e)},getArgs:function(e){return e.settings}}}var th,nh=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},rh=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),ah=function(e,t,n,r,a){var o=rh(e,function(t){return function(e,t){return e.isBlock(t)||z(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t)}(e,t)});return b.from(o.backwards(t,n,r,a))},oh=function(e,t){return ih(ln.fromDom(e.selection.getNode())).getOrThunk(function(){var n,r=ln.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return ba(r,ln.fromDom(t.extractContents())),t.insertNode(r.dom),da(r).each(function(e){return e.dom.normalize()}),(n=r,Jc(n,Xc)).map(function(t){var n;e.selection.setCursorLocation(t.dom,"img"===ta(n=t)?1:Kc(n).fold(function(){return ma(n).length},function(e){return e.length}))}),r})},ih=function(e){return $i(e,"[data-mce-autocompleter]")},sh=function(e){return e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},ch=function(e){return""!==e&&-1!=="  \f\n\r\t\v".indexOf(e)},lh=function(e,t){return e.substring(t.length)},uh=function(e,t,n,r){if(void 0===r&&(r=0),!(a=t).collapsed||3!==a.startContainer.nodeType)return b.none();var a,o=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return ah(e,t.startContainer,t.startOffset,function(e,t,r){return function(e,t,n){var r;for(r=t-1;r>=0;r--){var a=e.charAt(r);if(ch(a))return b.none();if(a===n)break}return b.some(r)}(r,t,n).getOr(t)},o).bind(function(e){var a=t.cloneRange();if(a.setStart(e.container,e.offset),a.setEnd(t.endContainer,t.endOffset),a.collapsed)return b.none();var o=sh(a);return 0!==o.lastIndexOf(n)||lh(o,n).length<r?b.none():b.some({text:lh(o,n),range:a,triggerChar:n})})},dh=function(e,t,n,r){return void 0===r&&(r=0),ih(ln.fromDom(t.startContainer)).fold(function(){return uh(e,t,n,r)},function(t){var r=e.createRng();r.selectNode(t.dom);var a=sh(r);return b.some({range:r,text:lh(a,n),triggerChar:n})})},fh=function(e,t){t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel);var n=function(e,t){Rr(e,tr(),{raw:t})};t.on("keydown",function(t){var r=function(){return e.getView().bind(Gd.getHighlighted)};8===t.which&&e.onKeypress.throttle(t),e.isActive()&&(27===t.which&&e.cancelIfNecessary(),e.isMenuOpen()?13===t.which?(r().each(Vr),t.preventDefault()):40===t.which?(r().fold(function(){e.getView().each(Gd.highlightFirst)},function(e){n(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||r().each(function(e){n(e,t),t.preventDefault(),t.stopImmediatePropagation()}):13!==t.which&&38!==t.which&&40!==t.which||e.cancelIfNecessary())}),t.on("NodeChange",function(t){e.isActive()&&!e.isProcessingAction()&&ih(ln.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})},mh=tinymce.util.Tools.resolve("tinymce.util.Promise"),ph=function(e,t){return{container:e,offset:t}},hh=function(e){if(function(e){return 3===e.nodeType}(e))return ph(e,e.data.length);var t=e.childNodes;return t.length>0?hh(t[t.length-1]):ph(e,t.length)},vh=function(e,t){var n=e.childNodes;return n.length>0&&t<n.length?vh(n[t],0):n.length>0&&function(e){return 1===e.nodeType}(e)&&n.length===t?hh(n[n.length-1]):ph(e,t)},gh=function(e){return function(t){var n=vh(t.startContainer,t.startOffset);return!function(e,t){return ah(e,t.container,t.offset,function(e,t){return 0===t?-1:t},e.getRoot()).filter(function(e){var t=e.container.data.charAt(e.offset-1);return!ch(t)}).isSome()}(e,n)}},bh=function(e,t){var n=t(),r=e.selection.getRng();return function(e,t,n){return re(n.triggerChars,function(n){return dh(e,t,n)})}(e.dom,r,n).bind(function(n){return yh(e,t,n)})},yh=function(e,t,n,r){void 0===r&&(r={});var a=t(),o=e.selection.getRng().startContainer.nodeValue,i=F(a.lookupByChar(n.triggerChar),function(t){return n.text.length>=t.minChars&&t.matches.getOrThunk(function(){return gh(e.dom)})(n.range,o,n.text)});if(0===i.length)return b.none();var s=mh.all($(i,function(e){return e.fetch(n.text,e.maxResults,r).then(function(t){return{matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}})}));return b.some({lookupData:s,context:n})},wh=it([Bt("type"),Yt("text")]),xh=it([Qt("type","autocompleteitem"),Qt("active",!1),Qt("disabled",!1),Qt("meta",{}),Bt("value"),Yt("text"),Yt("icon")]),kh=it([Bt("type"),Bt("ch"),Jt("minChars",1),Qt("columns",1),Jt("maxResults",10),Gt("matches"),Ut("fetch"),Ut("onAction"),rn("highlightOn",[],Mt)]),_h=[tn("disabled",!1),Yt("tooltip"),Yt("icon"),Yt("text"),nn("onSetup",function(){return t})],Sh=it([Bt("type"),Ut("onAction")].concat(_h)),Ch=function(e){return xt("toolbarbutton",Sh,e)},Nh=[tn("active",!1)].concat(_h),Th=it(Nh.concat([Bt("type"),Ut("onAction")])),Dh=function(e){return xt("ToggleButton",Th,e)},Ih=[nn("predicate",function(){return!1}),en("scope","node",["node","editor"]),en("position","selection",["node","selection","line"])],Mh=_h.concat([Qt("type","contextformbutton"),Qt("primary",!1),Ut("onAction"),on("original",a)]),Oh=Nh.concat([Qt("type","contextformbutton"),Qt("primary",!1),Ut("onAction"),on("original",a)]),Ah=_h.concat([Qt("type","contextformbutton")]),Lh=Nh.concat([Qt("type","contextformtogglebutton")]),Eh=Nt("type",{contextformbutton:Mh,contextformtogglebutton:Oh}),zh=it([Qt("type","contextform"),nn("initValue",function(){return""}),Yt("label"),Ht("commands",Eh),qt("launch",Nt("type",{contextformbutton:Ah,contextformtogglebutton:Lh}))].concat(Ih)),Rh=it([Qt("type","contexttoolbar"),Bt("items")].concat(Ih)),Vh=function(e){var t,n,r=e.ui.registry.getAll().popups,a=ke(r,function(e){return(t=e,xt("Autocompleter",kh,t)).fold(function(e){throw new Error(St(e))},function(e){return e});var t}),o=(t=Ce(a,function(e){return e.ch}),n={},U(t,function(e){n[e]={}}),ye(n)),i=Te(a);return{dataset:a,triggerChars:o,lookupByChar:function(e){return F(i,function(t){return t.ch===e})}}};!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(th||(th={}));var Bh,$h=th,Uh="tox-menu-nav__js",Ph="tox-collection__item",Fh={normal:Uh,color:"tox-swatch"},Hh="tox-collection__item-label",jh="tox-collection__item--active",qh=function(e){return De(Fh,e).getOr(Uh)},Wh=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:function(e){return"color"===e?"tox-swatches":"tox-menu"}(e),tieredMenu:"tox-tiered-menu"}},Yh=function(e){var t=Wh(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:qh(e)}},Gh=[Dp.parts.items({})],Kh=function(e,t,n){var r=Wh(n);return{dom:{tag:"div",classes:Y([[r.tieredMenu]])},markers:Yh(n)}},Qh=function(e,t){return function(n){var r=B(n,t);return $(r,function(t){return{dom:e,components:t}})}},Xh=function(e,t){var n=[],r=[];return U(e,function(e,a){t(e,a)?(r.length>0&&n.push(r),r=[],Ie(e.dom,"innerHtml")&&r.push(e)):r.push(e)}),r.length>0&&n.push(r),$(n,function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}})},Jh=function(e,t,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Dp.parts.items({preprocess:function(n){return"auto"!==e&&e>1?Qh({tag:"div",classes:["tox-collection__group"]},e)(n):Xh(n,function(e,n){return"separator"===t[n].type})}})]}},Zh=function(e){return R(e,function(e){return"icon"in e&&void 0!==e.icon})},ev=function(e){return console.error(St(e)),console.log(e),b.none()},tv=function(e,t,n,r,a){var o,i=(o=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Dp.parts.items({preprocess:function(e){return Xh(e,function(e,t){return"separator"===o[t].type})}})]});return{value:e,dom:i.dom,components:i.components,items:n}},nv=function(e,t,n,r,o){var i;return"color"===o?{value:e,dom:(i=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Dp.parts.items({preprocess:"auto"!==e?Qh({tag:"div",classes:["tox-swatches__row"]},e):a})]}]}}(r)).dom,components:i.components,items:n}:"normal"===o&&"auto"===r?{value:e,dom:(i=Jh(r,n)).dom,components:i.components,items:n}:"normal"===o&&1===r?{value:e,dom:(i=Jh(1,n)).dom,components:i.components,items:n}:"normal"===o?{value:e,dom:(i=Jh(r,n)).dom,components:i.components,items:n}:"listpreview"===o&&"auto"!==r?{value:e,dom:(i=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Dp.parts.items({preprocess:Qh({tag:"div",classes:["tox-collection__group"]},e)})]}}(r)).dom,components:i.components,items:n}:{value:e,dom:function(e,t,n){var r=Wh(n);return{tag:"div",classes:Y([[r.menu,"tox-menu-"+t+"-column"],e?[r.hasIcons]:[]])}}(t,r,o),components:Gh,items:n}},rv=[Bt("type"),Bt("src"),Yt("alt"),rn("classes",[],Mt)],av=it(rv),ov=[Bt("type"),Bt("text"),Yt("name"),rn("classes",["tox-collection__item-label"],Mt)],iv=it(ov),sv=bt(function(){return Ct("type",{cardimage:av,cardtext:iv,cardcontainer:cv})}),cv=it([Bt("type"),Zt("direction","horizontal"),Zt("align","left"),Zt("valign","middle"),Ht("items",sv)]),lv=[tn("disabled",!1),Yt("text"),Yt("shortcut"),mt("value","value",Pe(function(){return Va("menuitem-value")}),Tt()),Qt("meta",{})],uv=it([Bt("type"),Yt("label"),Ht("items",sv),nn("onSetup",function(){return t}),nn("onAction",t)].concat(lv)),dv=it([Bt("type"),tn("active",!1),Yt("icon")].concat(lv)),fv=it([Bt("type"),$t("fancytype",["inserttable","colorswatch"]),nn("onAction",t)]),mv=it([Bt("type"),nn("onSetup",function(){return t}),nn("onAction",t),Yt("icon")].concat(lv)),pv=it([Bt("type"),Ut("getSubmenuItems"),nn("onSetup",function(){return t}),Yt("icon")].concat(lv)),hv=it([Bt("type"),Yt("icon"),tn("active",!1),nn("onSetup",function(){return t}),Ut("onAction")].concat(lv)),vv=function(e,t,n){var r=Zc(e.element,"."+n);if(r.length>0){var a=W(r,function(e){var n=e.dom.getBoundingClientRect().top,a=r[0].dom.getBoundingClientRect().top;return Math.abs(n-a)>t}).getOr(r.length);return b.some({numColumns:a,numRows:Math.ceil(r.length/a)})}return b.none()},gv=function(e,t){return Ys([Qm(e,t)])},bv=function(e){return gv(Va("unnamed-events"),e)},yv=[Rt("lazySink"),Rt("tooltipDom"),Qt("exclusive",!0),Qt("tooltipComponents",[]),Qt("delay",300),en("mode","normal",["normal","follow-highlight"]),Qt("anchor",function(e){return{anchor:"hotspot",hotspot:e,layouts:{onLtr:r([Os,Ms,Ns,Ds,Ts,Is]),onRtl:r([Os,Ms,Ns,Ds,Ts,Is])}}}),ns("onHide"),ns("onShow")],wv=Object.freeze({__proto__:null,init:function(){var e=sn(b.none()),t=sn(b.none()),n=function(){e.get().each(function(e){clearTimeout(e)})},a=r("not-implemented");return to({getTooltip:function(){return t.get()},isShowing:function(){return t.get().isSome()},setTooltip:function(e){t.set(b.some(e))},clearTooltip:function(){t.set(b.none())},clearTimer:n,resetTimer:function(t,r){n(),e.set(b.some(setTimeout(function(){t()},r)))},readState:a})}}),xv=Va("tooltip.exclusive"),kv=Va("tooltip.show"),_v=Va("tooltip.hide"),Sv=function(e,t,n){e.getSystem().broadcastOn([xv],{})},Cv=Object.freeze({__proto__:null,hideAllExclusive:Sv,setComponents:function(e,t,n,r){n.getTooltip().each(function(e){e.getSystem().isConnected()&&Km.set(e,r)})}}),Nv=Ks({fields:yv,name:"tooltipping",active:Object.freeze({__proto__:null,events:function(e,t){var n=function(n){t.getTooltip().each(function(r){Wl(r),e.onHide(n,r),t.clearTooltip()}),t.clearTimer()};return Pr(Y([[jr(kv,function(n){t.resetTimer(function(){!function(n){if(!t.isShowing()){Sv(n);var r=e.lazySink(n).getOrDie(),a=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Pr("normal"===e.mode?[jr(Jn(),function(e){zr(n,kv)}),jr(Qn(),function(e){zr(n,_v)})]:[]),behaviours:Ys([Km.config({})])});t.setTooltip(a),Hl(r,a),e.onShow(n,a),Bl.position(r,e.anchor(n),a)}}(n)},e.delay)}),jr(_v,function(r){t.resetTimer(function(){n(r)},e.delay)}),jr(mr(),function(e,t){var r=t;r.universal||z(r.channels,xv)&&n(e)}),Jr(function(e){n(e)})],"normal"===e.mode?[jr(Zn(),function(e){zr(e,kv)}),jr(dr(),function(e){zr(e,_v)}),jr(Jn(),function(e){zr(e,kv)}),jr(Qn(),function(e){zr(e,_v)})]:[jr(Lr(),function(e,t){zr(e,kv)}),jr(Er(),function(e){zr(e,_v)})]]))}}),state:wv,apis:Cv}),Tv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Dv=tinymce.util.Tools.resolve("tinymce.util.I18n"),Iv=["input","button","textarea","select"],Mv=function(e,t,n){(t.disabled()?Rv:Vv)(e,t)},Ov=function(e,t){return!0===t.useNative&&z(Iv,ta(e.element))},Av=function(e){Na(e.element,"disabled","disabled")},Lv=function(e){Ma(e.element,"disabled")},Ev=function(e){Na(e.element,"aria-disabled","true")},zv=function(e){Na(e.element,"aria-disabled","false")},Rv=function(e,t,n){t.disableClass.each(function(t){bo(e.element,t)}),(Ov(e,t)?Av:Ev)(e),t.onDisabled(e)},Vv=function(e,t,n){t.disableClass.each(function(t){wo(e.element,t)}),(Ov(e,t)?Lv:zv)(e),t.onEnabled(e)},Bv=function(e,t){return Ov(e,t)?function(e){return Ia(e.element,"disabled")}(e):function(e){return"true"===Ta(e.element,"aria-disabled")}(e)},$v=Object.freeze({__proto__:null,enable:Vv,disable:Rv,isDisabled:Bv,onLoad:Mv,set:function(e,t,n,r){(r?Rv:Vv)(e,t)}}),Uv=Object.freeze({__proto__:null,exhibit:function(e,t){return ro({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(e,t){return Pr([Fr(pr(),function(t,n){return Bv(t,e)}),Fs(e,t,Mv)])}}),Pv=[nn("disabled",c),Qt("useNative",!0),jt("disableClass"),ns("onDisabled"),ns("onEnabled")],Fv=Ks({fields:Pv,name:"disabling",active:Uv,apis:$v}),Hv=tinymce.util.Tools.resolve("tinymce.EditorManager"),jv=function(e){return e.getParam("height",Math.max(e.getElement().offsetHeight,200))},qv=function(e){return e.getParam("width",Tv.DOM.getStyle(e.getElement(),"width"))},Wv=function(e){return b.from(e.getParam("min_width")).filter(D)},Yv=function(e){return b.from(e.getParam("min_height")).filter(D)},Gv=function(e){return b.from(e.getParam("max_width")).filter(D)},Kv=function(e){return b.from(e.getParam("max_height")).filter(D)},Qv=function(e){return!1!==e.getParam("menubar",!0,"boolean")},Xv=function(e){var t=e.getParam("toolbar",!0),n=!0===t,r=x(t),a=_(t)&&t.length>0;return!Zv(e)&&(a||r||n)},Jv=function(e){var t=V(9,function(t){return e.getParam("toolbar"+(t+1),!1,"string")}),n=F(t,function(e){return"string"==typeof e});return n.length>0?b.some(n):b.none()},Zv=function(e){return Jv(e).fold(function(){return e.getParam("toolbar",[],"string[]").length>0},function(){return!0})};!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(Bh||(Bh={}));var eg,tg=function(e){return e.getParam("toolbar_mode","","string")};!function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(eg||(eg={}));var ng,rg,ag=function(e){return e.getParam("toolbar_location",eg.auto,"string")},og=function(e){return ag(e)===eg.bottom},ig=function(e){var t=function(e){return e.getParam("fixed_toolbar_container","","string")}(e);return t.length>0&&e.inline?Bi(Eo(),t):b.none()},sg=function(e){return e.inline&&ig(e).isSome()},cg=function(e){return ig(e).getOrThunk(function(){return Io(Do(ln.fromDom(e.getElement())))})},lg=function(e){return e.inline&&!Qv(e)&&!Xv(e)&&!Zv(e)},ug=function(e){return(e.getParam("toolbar_sticky",!1,"boolean")||e.inline)&&!sg(e)&&!lg(e)},dg=it([(ng="readonly",Vt(ng,Ot))]),fg=function(e,t){var n=e.outerContainer.element;t&&(e.mothership.broadcastOn([su()],{target:n}),e.uiMothership.broadcastOn([su()],{target:n})),e.mothership.broadcastOn(["silver.readonly"],{readonly:t}),e.uiMothership.broadcastOn(["silver.readonly"],{readonly:t})},mg=function(e,t){e.on("init",function(){e.mode.isReadOnly()&&fg(t,!0)}),e.on("SwitchMode",function(){return fg(t,e.mode.isReadOnly())}),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly")},pg=function(){var e;return Zs.config({channels:(e={},e["silver.readonly"]={schema:dg,onReceive:function(e,t){Fv.set(e,t.readonly)}},e)})},hg=function(e){return Fv.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},vg=function(e){return Fv.config({disabled:e})},gg=function(e){return Fv.config({disabled:e,disableClass:"tox-tbtn--disabled"})},bg=function(e){return Fv.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},yg=function(e,t){var n=e.getApi(t);return function(e){e(n)}},wg=function(e,t){return Xr(function(n){yg(e,n)(function(n){var r=e.onSetup(n);null!==r&&void 0!==r&&t.set(r)})})},xg=function(e,t){return Jr(function(n){return yg(e,n)(t.get())})},kg=((rg={})[pr()]=["disabling","alloy.base.behaviour","toggling","item-events"],rg),_g=function(e){return G(e,function(e){return e.toArray()})},Sg=function(e,n,r,a){var o=sn(t);return{type:"item",dom:n.dom,components:_g(n.optComponents),data:e.data,eventOrder:kg,hasSubmenu:e.triggersSubmenu,itemBehaviours:Ys([Qm("item-events",[function(e,t){return ea(function(n,r){yg(e,n)(e.onAction),e.triggersSubmenu||t!==$h.CLOSE_ON_EXECUTE||(zr(n,br()),r.stop())})}(e,r),wg(e,o),xg(e,o)]),hg(function(){return e.disabled||a.isDisabled()}),pg(),Km.config({})].concat(e.itemBehaviours))}},Cg=function(e){return{value:e.value,meta:d({text:e.text.getOr("")},e.meta)}},Ng=tinymce.util.Tools.resolve("tinymce.Env"),Tg=function(e){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:e}}},Dg=function(e){return{dom:{tag:"div",classes:[Hh]},components:[ti(Dv.translate(e))]}},Ig=function(e,t){return{dom:{tag:"div",classes:t,innerHtml:e}}},Mg=function(e,t){return{dom:{tag:"div",classes:[Hh]},components:[{dom:{tag:e.tag,styles:e.styles},components:[ti(Dv.translate(t))]}]}},Og=function(e){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:function(e){var t=Ng.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=e.split("+"),r=$(n,function(e){var n=e.toLowerCase().trim();return Ie(t,n)?t[n]:e});return Ng.mac?r.join(""):r.join("+")}(e)}}},Ag=function(e){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:Xp("checkmark",e)}}},Lg=function(e,t){var n=t.map(function(e){return{attributes:{title:Dv.translate(e)}}}).getOr({});return d({tag:"div",classes:[Uh,Ph].concat(e?["tox-collection__item-icon-rtl"]:[])},n)},Eg=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],zg=["list-bull-circle","list-bull-default","list-bull-square"],Rg=function(e,t,n,r){void 0===r&&(r=b.none());var a,i=Dv.isRtl()&&e.iconContent.exists(function(e){return z(zg,e)}),s=(a=e.iconContent,a.map(function(e){return Dv.isRtl()&&z(Eg,e)?e+"-rtl":e})).map(function(e){return n=e,a=t.icons,o=r,b.from(a()[n.toLowerCase()]).or(o).getOrThunk(function(){return Qp(a)});var n,a,o}),c=b.from(e.meta).fold(function(){return Dg},function(e){return Ie(e,"style")?o(Mg,e.style):Dg});return"color"===e.presets?function(e,t,n,r){var a,o;return{dom:(a=n.getOr(""),o={tag:"div",attributes:e.map(function(e){return{title:r.translate(e)}}).getOr({}),classes:["tox-swatch"]},d(d({},o),"custom"===t?{tag:"button",classes:m(o.classes,["tox-swatches__picker-btn"]),innerHtml:a}:"remove"===t?{classes:m(o.classes,["tox-swatch--remove"]),innerHtml:a}:{attributes:d(d({},o.attributes),{"data-mce-color":t}),styles:{"background-color":t}})),optComponents:[]}}(e.ariaLabel,e.value,s,t):function(e,t,n,r,a){var o=n?t.or(b.some("")).map(Tg):b.none(),i=e.checkMark,s=e.htmlContent.fold(function(){return e.textContent.map(r)},function(e){return b.some(Ig(e,[Hh]))});return{dom:Lg(a,e.ariaLabel),optComponents:[o,s,e.shortcutContent.map(Og),i,e.caret]}}(e,s,n,c,i)},Vg=function(e,t){return De(e,"tooltipWorker").map(function(e){return[Nv.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(e){return{anchor:"submenu",item:e,overrides:{maxHeightFunction:xc}}},mode:"follow-highlight",onShow:function(t,n){e(function(e){Nv.setComponents(t,[ni({element:ln.fromDom(e)})])})}})]}).getOr([])},Bg=function(e,t){var n=function(e){return Tv.DOM.encode(e)}(Dv.translate(e));if(t.length>0){var r=new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"gi");return n.replace(r,function(e){return'<span class="tox-autocompleter-highlight">'+e+"</span>"})}return n},$g=cd("item-widget",kp()),Ug=function(e){return{value:e}},Pg=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Fg=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Hg=function(e){return Pg.test(e)||Fg.test(e)},jg=function(e){var t=function(e){return{value:e.value.replace(Pg,function(e,t,n,r){return t+t+n+n+r+r})}}(e),n=Fg.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},qg=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},Wg=function(e){var t=qg(e.red)+qg(e.green)+qg(e.blue);return Ug(t)},Yg=Math.min,Gg=Math.max,Kg=Math.round,Qg=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Xg=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Jg=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},Zg=function(e){var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},eb=function(e){var t,n,r,a=(e.hue||0)%360,o=e.saturation/100,i=e.value/100;if(o=Gg(0,Yg(o,1)),i=Gg(0,Yg(i,1)),0===o)return t=n=r=Kg(255*i),Jg(t,n,r,1);var s=a/60,c=i*o,l=c*(1-Math.abs(s%2-1)),u=i-c;switch(Math.floor(s)){case 0:t=c,n=l,r=0;break;case 1:t=l,n=c,r=0;break;case 2:t=0,n=c,r=l;break;case 3:t=0,n=l,r=c;break;case 4:t=l,n=0,r=c;break;case 5:t=c,n=0,r=l;break;default:t=n=r=0}return t=Kg(255*(t+u)),n=Kg(255*(n+u)),r=Kg(255*(r+u)),Jg(t,n,r,1)},tb=function(e){var t=jg(e),n=parseInt(t[1],16),r=parseInt(t[2],16),a=parseInt(t[3],16);return Jg(n,r,a,1)},nb=function(e,t,n,r){var a=parseInt(e,10),o=parseInt(t,10),i=parseInt(n,10),s=parseFloat(r);return Jg(a,o,i,s)},rb=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"},ab=Jg(255,0,0,1),ob=function(e,t){return e.fire("ResizeContent",t)},ib=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),sb="tinymce-custom-colors";var cb="choiceitem",lb=[{type:cb,text:"Light Green",value:"#BFEDD2"},{type:cb,text:"Light Yellow",value:"#FBEEB8"},{type:cb,text:"Light Red",value:"#F8CAC6"},{type:cb,text:"Light Purple",value:"#ECCAFA"},{type:cb,text:"Light Blue",value:"#C2E0F4"},{type:cb,text:"Green",value:"#2DC26B"},{type:cb,text:"Yellow",value:"#F1C40F"},{type:cb,text:"Red",value:"#E03E2D"},{type:cb,text:"Purple",value:"#B96AD9"},{type:cb,text:"Blue",value:"#3598DB"},{type:cb,text:"Dark Turquoise",value:"#169179"},{type:cb,text:"Orange",value:"#E67E23"},{type:cb,text:"Dark Red",value:"#BA372A"},{type:cb,text:"Dark Purple",value:"#843FA1"},{type:cb,text:"Dark Blue",value:"#236FA1"},{type:cb,text:"Light Gray",value:"#ECF0F1"},{type:cb,text:"Medium Gray",value:"#CED4D9"},{type:cb,text:"Gray",value:"#95A5A6"},{type:cb,text:"Dark Gray",value:"#7E8C8D"},{type:cb,text:"Navy Blue",value:"#34495E"},{type:cb,text:"Black",value:"#000000"},{type:cb,text:"White",value:"#ffffff"}],ub=function(e){void 0===e&&(e=10);var t,n=ib.getItem(sb),r=x(n)?JSON.parse(n):[],a=e-(t=r).length<0?t.slice(0,e):t,o=function(e){a.splice(e,1)};return{add:function(t){E(a,t).each(o),a.unshift(t),a.length>e&&a.pop(),ib.setItem(sb,JSON.stringify(a))},state:function(){return a.slice(0)}}}(10),db=function(e){return!1!==e.getParam("custom_colors")},fb=function(e){var t=function(e){return e.getParam("color_map")}(e);return void 0!==t?function(e){var t=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var r=n.getContext("2d"),a=function(e,t){var n=t/255;return("0"+Math.round(e*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},o=function(e){if(/^[0-9A-Fa-f]{6}$/.test(e))return"#"+e.toUpperCase();r.clearRect(0,0,n.width,n.height),r.fillStyle="#FFFFFF",r.fillStyle=e,r.fillRect(0,0,1,1);var t=r.getImageData(0,0,1,1).data,o=t[0],i=t[1],s=t[2],c=t[3];return"#"+a(o,c)+a(i,c)+a(s,c)},i=0;i<e.length;i+=2)t.push({text:e[i+1],value:o(e[i]),type:"choiceitem"});return t}(t):lb},mb=function(e){ub.add(e)},pb=function(e){return function(e,t){return e.getParam("color_cols",t,"number")}(e,function(e){return Math.max(5,Math.ceil(Math.sqrt(e)))}(fb(e).length))},hb=function(e,t,n,r){"custom"===n?xb(e)(function(n){n.each(function(n){mb(n),e.execCommand("mceApplyTextcolor",t,n),r(n)})},"#000000"):"remove"===n?(r(""),e.execCommand("mceRemoveTextcolor",t)):(r(n),e.execCommand("mceApplyTextcolor",t,n))},vb=function(e,t){return e.concat($(ub.state(),function(e){return{type:cb,text:e,value:e}}).concat(function(e){var t={type:"choiceitem",text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[t,{type:"choiceitem",text:"Custom color",icon:"color-picker",value:"custom"}]:[t]}(t)))},gb=function(e,t){return function(n){n(vb(e,t))}},bb=function(e,t,n){var r,a;r="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",a=n,e.setIconFill(r,a),e.setIconStroke(r,a)},yb=function(e,t,n,r,a){e.ui.registry.addSplitButton(t,{tooltip:r,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:function(t){return b.from(function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)}),n}(e,n)).bind(function(e){return function(e){if("transparent"===e)return b.some(Jg(0,0,0,0));var t=Qg.exec(e);if(null!==t)return b.some(nb(t[1],t[2],t[3],"1"));var n=Xg.exec(e);return null!==n?b.some(nb(n[1],n[2],n[3],n[4])):b.none()}(e).map(function(e){var n=Wg(e).value;return vn(t.toLowerCase(),n)})}).getOr(!1)},columns:pb(e),fetch:gb(fb(e),db(e)),onAction:function(t){null!==a.get()&&hb(e,n,a.get(),function(){})},onItemAction:function(r,o){hb(e,n,o,function(n){a.set(n),function(e,t){e.fire("TextColorChange",t)}(e,{name:t,color:n})})},onSetup:function(n){null!==a.get()&&bb(n,t,a.get());var r=function(e){e.name===t&&bb(n,e.name,e.color)};return e.on("TextColorChange",r),function(){e.off("TextColorChange",r)}}})},wb=function(e,n,r,a){e.ui.registry.addNestedMenuItem(n,{text:a,icon:"forecolor"===n?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(n){hb(e,r,n.value,t)}}]}})},xb=function(e){return function(t,n){var r={colorpicker:n},a=function(e){return function(t){var n=t.getData();e(b.from(n.colorpicker)),t.close()}}(t);e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:function(e,t){"hex-valid"===t.name&&(t.value?e.enable("ok"):e.disable("ok"))},onSubmit:a,onClose:function(){},onCancel:function(){t(b.none())}})}},kb=function(e,t,n,r,a,o,i,s){var c=Zh(t),l=_b(t,n,r,"color"!==a?"normal":"color",o,i,s);return nv(e,c,l,r,a)},_b=function(e,t,n,r,a,o,i){return Ad($(e,function(s){return"choiceitem"===s.type?(c=s,xt("choicemenuitem",dv,c)).fold(ev,function(c){return b.some(function(e,t,n,r,a,o,i,s){void 0===s&&(s=!0);var c=Rg({presets:n,textContent:t?e.text:b.none(),htmlContent:b.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:b.none(),checkMark:t?b.some(Ag(i.icons)):b.none(),caret:b.none(),value:e.value},i,s);return Ee(Sg({data:Cg(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){mp.set(e,t)},isActive:function(){return mp.isOn(e)},isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},onAction:function(t){return r(e.value)},onSetup:function(e){return e.setActive(a),function(){}},triggersSubmenu:!1,itemBehaviours:[]},c,o,i),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:e.active}})}(c,1===n,r,t,o(s.value),a,i,Zh(e)))}):b.none();var c}))},Sb=function(e,t){var n=Yh(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}};var Cb,Nb=Va("cell-over"),Tb=Va("cell-execute"),Db=function(e,t,n){var r,a=function(n){return Rr(n,Tb,{row:e,col:t})},o=function(e,t){t.stop(),a(e)};return ai({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=n,r)},behaviours:Ys([Qm("insert-table-picker-cell",[jr(Jn(),tp.focus),jr(pr(),a),jr(or(),o),jr(vr(),o)]),mp.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),tp.config({onFocus:function(n){return Rr(n,Nb,{row:e,col:t})}})])})},Ib={inserttable:function(e){var t=Va("size-label"),n=function(e,t,n){for(var r=[],a=0;a<t;a++){for(var o=[],i=0;i<n;i++)o.push(Db(a,i,e));r.push(o)}return r}(t,10,10),r=Kp({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[ti("0x0")],behaviours:Ys([Km.config({})])});return{type:"widget",data:{value:Va("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$g.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:function(e){return G(e,function(e){return $(e,oi)})}(n).concat(r.asSpec()),behaviours:Ys([Qm("insert-table-picker",[Gr(Nb,function(e,t,a){var o=a.event.row,i=a.event.col;!function(e,t,n,r,a){for(var o=0;o<r;o++)for(var i=0;i<a;i++)mp.set(e[o][i],o<=t&&i<=n)}(n,o,i,10,10),Km.set(r.get(e),[function(e,t){return ti(t+1+"x"+(e+1))}(o,i)])}),Gr(Tb,function(t,n,r){e.onAction({numRows:r.event.row+1,numColumns:r.event.col+1}),zr(t,br())})]),jm.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(e,t){var n=vb(t.colorinput.getColors(),t.colorinput.hasCustomColors()),r=t.colorinput.getColorCols(),a=kb(Va("menu-value"),n,function(t){e.onAction({value:t})},r,"color",$h.CLOSE_ON_EXECUTE,function(){return!1},t.shared.providers),o=d(d({},a),{markers:Yh("color"),movement:Sb(r,"color")});return{type:"widget",data:{value:Va("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$g.widget(Dp.sketch(o))]}}},Mb=function(e,t){return $(e,function(e){switch(e.type){case"cardcontainer":return i=e,s=Mb(e.items,t),{dom:{tag:"div",classes:["tox-collection__item-container","vertical"===i.direction?"tox-collection__item-container--column":"tox-collection__item-container--row","left"===i.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",function(){switch(i.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:s};case"cardimage":return r=e.src,a=e.classes,o=e.alt,{dom:{tag:"img",classes:a,attributes:{src:r,alt:o.getOr("")}}};case"cardtext":var n=e.name.exists(function(e){return z(t.cardText.highlightOn,e)})?b.from(t.cardText.matchText).getOr(""):"";return Ig(Bg(e.text,n),e.classes)}var r,a,o,i,s})},Ob=function(e,t,n,r,a,o,i,s){void 0===s&&(s=!0);var c=Rg({presets:r,textContent:b.none(),htmlContent:n?e.text.map(function(e){return Bg(e,t)}):b.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:b.none(),checkMark:b.none(),caret:b.none(),value:e.value},i.providers,s,e.icon);return Sg({data:Cg(e),disabled:e.disabled,getApi:function(){return{}},onAction:function(t){return a(e.value,e.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:Vg(e.meta,i)},c,o,i.providers)},Ab=function(e){var t=e.text.fold(function(){return{}},function(e){return{innerHtml:e}});return{type:"separator",dom:d({tag:"div",classes:[Ph,"tox-collection__group-heading"]},t),components:[]}},Lb=function(e,t,n,r){void 0===r&&(r=!0);var a=Rg({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:b.none(),ariaLabel:e.text,caret:b.none(),checkMark:b.none(),shortcutContent:e.shortcut},n,r);return Sg({data:Cg(e),getApi:function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n)},Eb=function(e,n,r,a,o){void 0===a&&(a=!0),void 0===o&&(o=!1);var i,s=o?(i=r.icons,{dom:{tag:"div",classes:["tox-collection__item-caret"],innerHtml:Xp("chevron-down",i)}}):function(e){return{dom:{tag:"div",classes:["tox-collection__item-caret"],innerHtml:Xp("chevron-right",e)}}}(r.icons),c=Rg({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:b.none(),ariaLabel:e.text,caret:b.some(s),checkMark:b.none(),shortcutContent:e.shortcut},r,a);return Sg({data:Cg(e),getApi:function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},disabled:e.disabled,onAction:t,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},c,n,r)},zb=function(e,t,n,r){void 0===r&&(r=!0);var a=Rg({iconContent:e.icon,textContent:e.text,htmlContent:b.none(),ariaLabel:e.text,checkMark:b.some(Ag(n.icons)),caret:b.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,r);return Ee(Sg({data:Cg(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){mp.set(e,t)},isActive:function(){return mp.isOn(e)},isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},a,t,n),{toggling:{toggleClass:"tox-collection__item--enabled",toggleOnExecute:!1,selected:e.active}})},Rb=function(e,t){return(n=Ib,r=e.fancytype,Object.prototype.hasOwnProperty.call(n,r)?b.some(n[r]):b.none()).map(function(n){return n(e,t)});var n,r},Vb=function(e,t,n,r){var a={dom:Lg(!1,e.label),optComponents:[b.some({dom:{tag:"div",classes:["tox-collection__item-container","tox-collection__item-container--row"]},components:Mb(e.items,r)})]};return Sg({data:Cg(d({text:b.none()},e)),disabled:e.disabled,getApi:function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){Fv.set(e,t),U(Zc(e.element,"*"),function(n){e.getSystem().getByDom(n).each(function(e){e.hasConfigured(Fv)&&Fv.set(e,t)})})}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:b.from(r.itemBehaviours).getOr([])},a,t,n.providers)};!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(Cb||(Cb={}));var Bb=function(e,t,n,r,a){var o,i=n.shared.providers,s=function(e){return a?d(d({},e),{shortcut:b.none(),icon:e.text.isSome()?b.none():e.icon}):e};switch(e.type){case"menuitem":return(o=e,xt("menuitem",mv,o)).fold(ev,function(e){return b.some(Lb(s(e),t,i,r))});case"nestedmenuitem":return function(e){return xt("nestedmenuitem",pv,e)}(e).fold(ev,function(e){return b.some(Eb(s(e),t,i,r,a))});case"togglemenuitem":return function(e){return xt("togglemenuitem",hv,e)}(e).fold(ev,function(e){return b.some(zb(s(e),t,i,r))});case"separator":return function(e){return xt("separatormenuitem",wh,e)}(e).fold(ev,function(e){return b.some(Ab(e))});case"fancymenuitem":return function(e){return xt("fancymenuitem",fv,e)}(e).fold(ev,function(e){return Rb(s(e),n)});default:return console.error("Unknown item in general menu",e),b.none()}},$b=function(e,t,n,r,a,o,i){var s=1===r,c=!s||Zh(e);return Ad($(e,function(e){switch(e.type){case"separator":return(r=e,xt("Autocompleter.Separator",wh,r)).fold(ev,function(e){return b.some(Ab(e))});case"cardmenuitem":return function(e){return xt("cardmenuitem",uv,e)}(e).fold(ev,function(e){return b.some(Vb(d(d({},e),{onAction:function(t){e.onAction(t),n(e.value,e.meta)}}),a,o,{itemBehaviours:Vg(e.meta,o),cardText:{matchText:t,highlightOn:i}}))});case"autocompleteitem":default:return function(e){return xt("Autocompleter.Item",xh,e)}(e).fold(ev,function(e){return b.some(Ob(e,t,s,"normal",n,a,o,c))})}var r}))},Ub=function(e,t,n,r,a){var o=Zh(t),i=Ad($(t,function(e){var t=function(e){return Bb(e,n,r,function(e){return a?!e.hasOwnProperty("text"):o}(e),a)};return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(d(d({},e),{disabled:!0})):t(e)}));return(a?tv:nv)(e,o,i,1,"normal")},Pb=function(e){return Ep.singleData(e.value,e)},Fb={register:function(e,t){var n=sn(b.none()),r=sn(!1),a=ai(zp.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ys([Qm("dismissAutocompleter",[jr(Tr(),function(){return s()})])]),lazySink:t.getSink})),o=function(){return n.get().isSome()},i=function(){o()&&zp.hide(a)},s=function(){if(o()){var t=n.get().map(function(e){return e.element});ih(t.getOr(ln.fromDom(e.selection.getNode()))).each(ka),i(),n.set(b.none()),r.set(!1)}},c=Re(function(){return Vh(e)}),l=function(t,n,r,o){t.matchLength=n.text.length;var i=re(r,function(e){return b.from(e.columns)}).getOr(1);zp.showAt(a,{anchor:"node",root:ln.fromDom(e.getBody()),node:b.from(t.element)},Dp.sketch(function(e,t,n,r){var a=n===Cb.ContentFocus?gf():vf(),o=Sb(t,r),i=Yh(r);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:i.selectedItem,item:i.item},movement:o,fakeFocus:n===Cb.ContentFocus,focusManager:a,menuBehaviours:bv("auto"!==t?[]:[Xr(function(e,t){vv(e,4,i.item).each(function(t){var n=t.numColumns,r=t.numRows;jm.setGridSize(e,r,n)})})])}}(nv("autocompleter-value",!0,o,i,"normal"),i,Cb.ContentFocus,"normal"))),zp.getContent(a).each(Gd.highlightFirst)},u=function(a){(function(t){return n.get().map(function(n){return dh(e.dom,e.selection.getRng(),n.triggerChar).bind(function(n){return yh(e,c,n,t)})}).getOrThunk(function(){return bh(e,c)})})(a).fold(s,function(a){!function(t){if(!o()){var a=oh(e,t.range);n.set(b.some({triggerChar:t.triggerChar,element:a,matchLength:t.text.length})),r.set(!1)}}(a.context),a.lookupData.then(function(o){n.get().map(function(n){var c,d,f,m=a.context;if(n.triggerChar===m.triggerChar){var p=(c=m.triggerChar,f=re(d=o,function(e){return b.from(e.columns)}).getOr(1),G(d,function(n){var a=n.items;return $b(a,n.matchText,function(t,a){var o=e.selection.getRng();dh(e.dom,o,c).fold(function(){return console.error("Lost context. Cursor probably moved")},function(e){var o=e.range,c={hide:function(){s()},reload:function(e){i(),u(e)}};r.set(!0),n.onAction(c,o,t,a),r.set(!1)})},f,$h.BUBBLE_TO_SANDBOX,t,n.highlightOn)}));p.length>0?l(n,m,o,p):m.text.length-n.matchLength>=10?s():i()}})})})},d={onKeypress:nh(function(e){27!==e.which&&u()},50),cancelIfNecessary:s,isMenuOpen:function(){return zp.isOpen(a)},isActive:o,isProcessingAction:r.get,getView:function(){return zp.getContent(a)}};!1===e.hasPlugin("rtc")&&fh(d,e)}},Hb=l,jb=function(e,t,n){return function(e,t,n,r){return yi(e,t,n,r,!1)}(e,t,Hb,n)},qb=function(e,t,n){return function(e,t,n,r){return yi(e,t,n,r,!0)}(e,t,Hb,n)},Wb=bi,Yb=function(e,t,n){return $i(e,t,n).isSome()};function Gb(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];n=setTimeout(function(){e.apply(null,r),n=null},t)}}}var Kb=function(e){var t=e.raw;return void 0===t.touches||1!==t.touches.length?b.none():b.some(t.touches[0])},Qb=function(e){var t=sn(b.none()),n=sn(!1),r=Gb(function(t){e.triggerEvent(gr(),t),n.set(!0)},400),a=We([{key:jn(),value:function(e){return Kb(e).each(function(a){r.cancel();var o={x:a.clientX,y:a.clientY,target:e.target};r.schedule(e),n.set(!1),t.set(b.some(o))}),b.none()}},{key:qn(),value:function(e){return r.cancel(),Kb(e).each(function(e){t.get().each(function(n){(function(e,t){var n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(e,n)&&t.set(b.none())})}),b.none()}},{key:Wn(),value:function(a){r.cancel();return t.get().filter(function(e){return En(e.target,a.target)}).map(function(t){return n.get()?(a.prevent(),!1):e.triggerEvent(vr(),a)})}}]);return{fireIfReady:function(e,t){return De(a,t).bind(function(t){return t(e)})}}},Xb=function(){return On().browser.isFirefox()},Jb=ot([Ut("triggerEvent"),Qt("stopBackspace",!0)]),Zb=function(e,t){var n=_t("Getting GUI events settings",Jb,t),r=Qb(n),a=$(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return jb(e,t,function(e){r.fireIfReady(e,t).each(function(t){t&&e.kill()}),n.triggerEvent(t,e)&&e.kill()})}),o=sn(b.none()),i=jb(e,"paste",function(e){r.fireIfReady(e,"paste").each(function(t){t&&e.kill()}),n.triggerEvent("paste",e)&&e.kill(),o.set(b.some(setTimeout(function(){n.triggerEvent(fr(),e)},0)))}),s=jb(e,"keydown",function(e){n.triggerEvent("keydown",e)?e.kill():!0===n.stopBackspace&&function(e){return e.raw.which===Kd[0]&&!z(["input","textarea"],ta(e.target))&&!Yb(e.target,'[contenteditable="true"]')}(e)&&e.prevent()}),c=function(e,t){return Xb()?qb(e,"focus",t):jb(e,"focusin",t)}(e,function(e){n.triggerEvent("focusin",e)&&e.kill()}),l=sn(b.none()),u=function(e,t){return Xb()?qb(e,"blur",t):jb(e,"focusout",t)}(e,function(e){n.triggerEvent("focusout",e)&&e.kill(),l.set(b.some(setTimeout(function(){n.triggerEvent(dr(),e)},0)))});return{unbind:function(){U(a,function(e){e.unbind()}),s.unbind(),c.unbind(),u.unbind(),i.unbind(),o.get().each(clearTimeout),l.get().each(clearTimeout)}}},ey=function(e,t){var n=De(e,"target").getOr(t);return sn(n)},ty=Oe([{stopped:[]},{resume:["element"]},{complete:[]}]),ny=function(e,t,n,r,a,o){var i=e(t,r),s=function(e,t){var n=sn(!1),r=sn(!1);return{stop:function(){n.set(!0)},cut:function(){r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}}(n,a);return i.fold(function(){return o.logEventNoHandlers(t,r),ty.complete()},function(e){var n=e.descHandler;return oo(n)(s),s.isStopped()?(o.logEventStopped(t,e.element,n.purpose),ty.stopped()):s.isCut()?(o.logEventCut(t,e.element,n.purpose),ty.complete()):da(e.element).fold(function(){return o.logNoParent(t,e.element,n.purpose),ty.complete()},function(r){return o.logEventResponse(t,e.element,n.purpose),ty.resume(r)})})},ry=function(e,t,n,r,a,o){return ny(e,t,n,r,a,o).fold(function(){return!0},function(r){return ry(e,t,n,r,a,o)},function(){return!1})},ay=function(e,n,r){var a,o,i=(a=n,o=sn(!1),{stop:function(){o.set(!0)},cut:t,isStopped:o.get,isCut:c,event:a,setSource:s("Cannot set source of a broadcasted event"),getSource:s("Cannot get source of a broadcasted event")});return U(e,function(e){var t=e.descHandler;oo(t)(i)}),i.isStopped()},oy=function(e,t,n,r,a){var o=ey(n,r);return ry(e,t,n,r,o,a)},iy=function(e,t){return{element:e,descHandler:t}},sy=function(e,t){return{id:e,descHandler:t}};function cy(){var e={};return{registerId:function(t,n,r){xe(r,function(r,a){var o=void 0!==e[a]?e[a]:{};o[n]=ao(r,t),e[a]=o})},unregisterId:function(t){xe(e,function(e,n){e.hasOwnProperty(t)&&delete e[t]})},filterByType:function(t){return De(e,t).map(function(e){return Ce(e,function(e,t){return sy(t,e)})}).getOr([])},find:function(t,n,r){var a=De(e,n);return $n(r,function(e){return function(e,t){return ja(t).fold(function(){return b.none()},function(n){return e.bind(function(e){return De(e,n)}).map(function(e){return iy(t,e)})})}(a,e)},t)}}}function ly(){var e=cy(),t={},n=function(n){ja(n.element).each(function(n){delete t[n],e.unregisterId(n)})};return{find:function(t,n,r){return e.find(t,n,r)},filter:function(t){return e.filterByType(t)},register:function(r){var a=function(e){var t=e.element;return ja(t).fold(function(){return Fa("uid-",e.element)},function(e){return e})}(r);Me(t,a)&&function(e,r){var a=t[r];if(a!==e)throw new Error('The tagId "'+r+'" is already used by: '+La(a.element)+"\nCannot use it for: "+La(e.element)+"\nThe conflicting element is"+(Lo(a.element)?" ":" not ")+"already in the DOM");n(e)}(r,a);var o=[r];e.registerId(o,a,r.events),t[a]=r},unregister:n,getById:function(e){return De(t,e)}}}var uy=Md({name:"Container",factory:function(e){var t=e.dom,n=t.attributes,r=f(t,["attributes"]);return{uid:e.uid,dom:d({tag:"div",attributes:d({role:"presentation"},n)},r),components:e.components,behaviours:Du(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[Qt("components",[]),Tu("containerBehaviours",[]),Qt("events",{}),Qt("domModification",{}),Qt("eventOrder",{})]}),dy=function(e){var n=function(t){return da(e.element).fold(function(){return!0},function(e){return En(t,e)})},a=ly(),o=function(e,t){return a.find(n,e,t)},i=Zb(e.element,{triggerEvent:function(e,t){return Yi(e,t.target,function(n){return function(e,t,n,r){return oy(e,t,n,n.target,r)}(o,e,t,n)})}}),s={debugInfo:r("real"),triggerEvent:function(e,t,n){Yi(e,t,function(r){return oy(o,e,n,t,r)})},triggerFocus:function(e,n){ja(e).fold(function(){tc(e)},function(r){Yi(ur(),e,function(r){return function(e,t,n,r,a){var o=ey(n,r);ny(e,t,n,r,o,a)}(o,ur(),{originator:n,kill:t,prevent:t,target:e},e,r),!1})})},triggerEscape:function(e,t){s.triggerEvent("keydown",e.element,t.event)},getByUid:function(e){return g(e)},getByDom:function(e){return b(e)},build:ai,addToGui:function(e){d(e)},removeFromGui:function(e){f(e)},addToWorld:function(e){c(e)},removeFromWorld:function(e){u(e)},broadcast:function(e){p(e)},broadcastOn:function(e,t){h(e,t)},broadcastEvent:function(e,t){v(e,t)},isConnected:l},c=function(e){e.connect(s),aa(e.element)||(a.register(e),U(e.components(),c),s.triggerEvent(wr(),e.element,{target:e.element}))},u=function(e){aa(e.element)||(U(e.components(),u),a.unregister(e)),e.disconnect()},d=function(t){Hl(e,t)},f=function(e){Wl(e)},m=function(e){var t=a.filter(mr());U(t,function(t){var n=t.descHandler;oo(n)(e)})},p=function(e){m({universal:!0,data:e})},h=function(e,t){m({universal:!1,channels:e,data:t})},v=function(e,t){var n=a.filter(e);return ay(n,t)},g=function(e){return a.getById(e).fold(function(){return ie.error(new Error('Could not find component with uid: "'+e+'" in system.'))},ie.value)},b=function(e){var t=ja(e).getOr("not found");return g(t)};return c(e),{root:e,element:e.element,destroy:function(){i.unbind(),xa(e.element)},add:d,remove:f,getByUid:g,getByDom:b,addToWorld:c,removeFromWorld:u,broadcast:p,broadcastOn:h,broadcastEvent:v}},fy=r([Qt("prefix","form-field"),Tu("fieldBehaviours",[Vd,Nu])]),my=r([rd({schema:[Rt("dom")],name:"label"}),rd({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Rt("text")],name:"aria-descriptor"}),td({factory:{sketch:function(e){var t=je(e,["factory"]);return e.factory.sketch(t)}},schema:[Rt("factory")],name:"field"})]),py=Od({name:"FormField",configFields:fy(),partFields:my(),factory:function(e,t,n,r){var a=Iu(e.fieldBehaviours,[Vd.config({find:function(t){return hd(t,e,"field")}}),Nu.config({store:{mode:"manual",getValue:function(e){return Vd.getCurrent(e).bind(Nu.getValue)},setValue:function(e,t){Vd.getCurrent(e).each(function(e){Nu.setValue(e,t)})}}})]),o=Pr([Xr(function(t,n){var r=gd(t,e,["label","field","aria-descriptor"]);r.field().each(function(t){var n=Va(e.prefix);r.label().each(function(e){Na(e.element,"for",n),Na(t.element,"id",n)}),r["aria-descriptor"]().each(function(n){var r=Va(e.prefix);Na(n.element,"id",r),Na(t.element,"aria-describedby",r)})})})]),i={getField:function(t){return hd(t,e,"field")},getLabel:function(t){return hd(t,e,"label")}};return{uid:e.uid,dom:e.dom,components:t,behaviours:a,events:o,apis:i}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),hy=Object.freeze({__proto__:null,exhibit:function(e,t){return ro({attributes:We([{key:t.tabAttr,value:"true"}])})}}),vy=[Qt("tabAttr","data-alloy-tabstop")],gy=Ks({fields:vy,name:"tabstopping",active:hy}),by=tinymce.util.Tools.resolve("tinymce.html.Entities"),yy=function(e,t,n,r){var a=wy(e,t,n,r);return py.sketch(a)},wy=function(e,t,n,r){return{dom:xy(n),components:e.toArray().concat([t]),fieldBehaviours:Ys(r)}},xy=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},ky=function(e,t){return py.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}})},_y=Va("form-component-change"),Sy=Va("form-close"),Cy=Va("form-cancel"),Ny=Va("form-action"),Ty=Va("form-submit"),Dy=Va("form-block"),Iy=Va("form-unblock"),My=Va("form-tabchange"),Oy=Va("form-resize"),Ay=function(e,t){var n,r,o,i=e.label.map(function(e){return ky(e,t)}),s=function(e){return function(t,n){$i(n.event.target,"[data-collection-item-value]").each(function(r){e(t,n,r,Ta(r,"data-collection-item-value"))})}},c=s(function(n,r,a,o){r.stop(),t.isDisabled()||Rr(n,Ny,{name:e.name,value:o})}),l=[jr(Jn(),s(function(e,t,n){tc(n)})),jr(or(),c),jr(vr(),c),jr(Zn(),s(function(e,t,n){Bi(e.element,"."+jh).each(function(e){wo(e,jh)}),bo(n,jh)})),jr(er(),s(function(e){Bi(e.element,"."+jh).each(function(e){wo(e,jh)})})),ea(s(function(t,n,r,a){Rr(t,Ny,{name:e.name,value:a})}))],u=function(e,t){return $(Zc(e.element,".tox-collection__item"),t)},d=py.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:a},behaviours:Ys([Fv.config({disabled:t.isDisabled,onDisabled:function(e){u(e,function(e){bo(e,"tox-collection__item--state-disabled"),Na(e,"aria-disabled",!0)})},onEnabled:function(e){u(e,function(e){wo(e,"tox-collection__item--state-disabled"),Ma(e,"aria-disabled")})}}),pg(),Km.config({}),Nu.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,r){!function(n,r){var a=$(r,function(n){var r=Dv.translate(n.text),a=1===e.columns?'<div class="tox-collection__item-label">'+r+"</div>":"",o='<div class="tox-collection__item-icon">'+n.icon+"</div>",i={_:" "," - ":" ","-":" "},s=r.replace(/\_| \- |\-/g,function(e){return i[e]});return'<div class="tox-collection__item'+(t.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+by.encodeAllRaw(n.value)+'" title="'+s+'" aria-label="'+s+'">'+o+a+"</div>"}),o="auto"!==e.columns&&e.columns>1?B(a,e.columns):[a],i=$(o,function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"});Sa(n.element,i.join(""))}(n,r),"auto"===e.columns&&vv(n,5,"tox-collection__item").each(function(e){var t=e.numRows,r=e.numColumns;jm.setGridSize(n,t,r)}),zr(n,Oy)}}),gy.config({}),jm.config((r=e.columns,o="normal",1===r?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===r?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===o?".tox-swatches__row":".tox-collection__group",cell:"color"===o?".tox-swatch":"."+Ph}})),Qm("collection-events",l)]),eventOrder:(n={},n[pr()]=["disabling","alloy.base.behaviour","collection-events"],n)});return yy(i,d,["tox-form__group--collection"],[])},Ly=r([jt("data"),Qt("inputAttributes",{}),Qt("inputStyles",{}),Qt("tag","input"),Qt("inputClasses",[]),ns("onSetValue"),Qt("styles",{}),Qt("eventOrder",{}),Tu("inputBehaviours",[Nu,tp]),Qt("selectOnFocus",!0)]),Ey=function(e){return Ys([tp.config({onFocus:e.selectOnFocus?function(e){var t=e.element,n=Yo(t);t.dom.setSelectionRange(0,n.length)}:t})])},zy=function(e){return{tag:e.tag,attributes:d({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}},Ry=Md({name:"Input",configFields:Ly(),factory:function(e,t){return{uid:e.uid,dom:zy(e),components:[],behaviours:function(e){return d(d({},Ey(e)),Iu(e.inputBehaviours,[Nu.config({store:d(d({mode:"manual"},e.data.map(function(e){return{initialValue:e}}).getOr({})),{getValue:function(e){return Yo(e.element)},setValue:function(e,t){Yo(e.element)!==t&&Go(e.element,t)}}),onSetValue:e.onSetValue})]))}(e),eventOrder:e.eventOrder}}}),Vy={},By={exports:Vy};!function(t,n,r,a){!function(a){if("object"==typeof n&&void 0!==r)r.exports=a();else if("function"==typeof t&&t.amd)t([],a);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).EphoxContactWrapper=a()}}(function(){return function(){return function e(t,n,r){function o(s,c){if(!n[s]){if(!t[s]){var l="function"==typeof a&&a;if(!c&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}}()({1:[function(e,t,n){var r,a,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,u=[],d=!1,f=-1;function m(){d&&l&&(d=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!d){var e=c(m);d=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function a(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((r=n,a=t,function(){r.apply(a,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}var r,a}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(a);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){if(0===t.length)return e([]);var r=t.length;function a(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){a(o,e)},n)}t[o]=i,0==--r&&e(t)}catch(e){n(e)}}for(var o=0;o<t.length;o++)a(o,t[o])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,a=e.length;r<a;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=o:n.Promise||(n.Promise=o)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var a=e("process/browser.js").nextTick,o=Function.prototype.apply,i=Array.prototype.slice,s={},c=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=c++,r=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,a(function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),a="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:a.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)})}(void 0,Vy,By,void 0);var $y,Uy=By.exports.boltExport,Py=function(e){var t=b.none(),n=[],r=function(e){a()?i(e):n.push(e)},a=function(){return t.isSome()},o=function(e){U(e,i)},i=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(function(e){a()||(t=b.some(e),o(n),n=[])}),{get:r,map:function(e){return Py(function(t){r(function(n){t(e(n))})})},isReady:a}},Fy={nu:Py,pure:function(e){return Py(function(t){t(e)})}},Hy=function(e){setTimeout(function(){throw e},0)},jy=function(e){var t=function(t){e().then(t,Hy)};return{map:function(t){return jy(function(){return e().then(t)})},bind:function(t){return jy(function(){return e().then(function(e){return t(e).toPromise()})})},anonBind:function(t){return jy(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return Fy.nu(t)},toCached:function(){var t=null;return jy(function(){return null===t&&(t=e()),t})},toPromise:e,get:t}},qy=function(e){return jy(function(){return new Uy(e)})},Wy=function(e){return jy(function(){return Uy.resolve(e)})},Yy=["input","textarea"],Gy=function(e){var t=ta(e);return z(Yy,t)},Ky=function(e,t){var n=t.getRoot(e).getOr(e.element);wo(n,t.invalidClass),t.notify.each(function(t){Gy(e.element)&&Na(e.element,"aria-invalid",!1),t.getContainer(e).each(function(e){Sa(e,t.validHtml)}),t.onValid(e)})},Qy=function(e,t,n,r){var a=t.getRoot(e).getOr(e.element);bo(a,t.invalidClass),t.notify.each(function(t){Gy(e.element)&&Na(e.element,"aria-invalid",!0),t.getContainer(e).each(function(e){Sa(e,r)}),t.onInvalid(e,r)})},Xy=function(e,t,n){return t.validator.fold(function(){return Wy(ie.value(!0))},function(t){return t.validate(e)})},Jy=function(e,t,n){return t.notify.each(function(t){t.onValidate(e)}),Xy(e,t).map(function(n){return e.getSystem().isConnected()?n.fold(function(n){return Qy(e,t,0,n),ie.error(n)},function(n){return Ky(e,t),ie.value(n)}):ie.error("No longer in system")})},Zy=Object.freeze({__proto__:null,markValid:Ky,markInvalid:Qy,query:Xy,run:Jy,isInvalid:function(e,t){var n=t.getRoot(e).getOr(e.element);return xo(n,t.invalidClass)}}),ew=Object.freeze({__proto__:null,events:function(e,n){return e.validator.map(function(n){return Pr([jr(n.onEvent,function(t){Jy(t,e).get(a)})].concat(n.validateOnLoad?[Xr(function(n){Jy(n,e).get(t)})]:[]))}).getOr({})}}),tw=[Rt("invalidClass"),Qt("getRoot",b.none),Kt("notify",[Qt("aria","alert"),Qt("getContainer",b.none),Qt("validHtml",""),ns("onValid"),ns("onInvalid"),ns("onValidate")]),Kt("validator",[Rt("validate"),Qt("onEvent","input"),Qt("validateOnLoad",!0)])],nw=Ks({fields:tw,name:"invalidating",active:ew,apis:Zy,extra:{validation:function(e){return function(t){var n=Nu.getValue(t);return Wy(e(n))}}}}),rw=Object.freeze({__proto__:null,getCoupled:function(e,t,n,r){return n.getOrCreate(e,t,r)}}),aw=[Vt("others",wt(ie.value,Tt()))],ow=Ks({fields:aw,name:"coupling",apis:rw,state:Object.freeze({__proto__:null,init:function(){var e={},t=r({});return to({readState:t,getOrCreate:function(t,n,r){var a=ye(n.others);if(a)return De(e,r).getOrThunk(function(){var a=De(n.others,r).getOrDie("No information found for coupled component: "+r)(t),o=t.getSystem().build(a);return e[r]=o,o});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(a,null,2))}})}})}),iw=r("sink"),sw=r(rd({name:iw(),overrides:r({dom:{tag:"div"},behaviours:Ys([Bl.config({useFixed:l})]),events:Pr([Kr(tr()),Kr(Gn()),Kr(or())])})}));!function(e){e[e.HighlightFirst=0]="HighlightFirst",e[e.HighlightNone=1]="HighlightNone"}($y||($y={}));var cw=function(e,t){var n=e.getHotspot(t).getOr(t),r=e.getAnchorOverrides();return e.layouts.fold(function(){return{anchor:"hotspot",hotspot:n,overrides:r}},function(e){return{anchor:"hotspot",hotspot:n,overrides:r,layouts:e}})},lw=function(e,t,n,r,a,o,i){return function(e,t,n,r,a,o,i){var s=function(e,t,n){return(0,e.fetch)(n).map(t)}(e,t,r),c=mw(r,e);return s.map(function(e){return e.bind(function(e){return b.from(Ep.sketch(d(d({},o.menu()),{uid:qa(""),data:e,highlightImmediately:i===$y.HighlightFirst,onOpenMenu:function(e,t){var r=c().getOrDie();Bl.position(r,n,t),iu.decloak(a)},onOpenSubmenu:function(e,t,n){var r=c().getOrDie();Bl.position(r,{anchor:"submenu",item:t},n),iu.decloak(a)},onRepositionMenu:function(e,t,r){var a=c().getOrDie();Bl.position(a,n,t),U(r,function(e){Bl.position(a,{anchor:"submenu",item:e.triggeringItem},e.triggeredMenu)})},onEscape:function(){return tp.focus(r),iu.close(a),b.some(!0)}})))})})}(e,t,cw(e,n),n,r,a,i).map(function(e){return e.fold(function(){iu.isOpen(r)&&iu.close(r)},function(e){iu.cloak(r),iu.open(r,e),o(r)}),r})},uw=function(e,t,n,r,a,o,i){return iu.close(r),Wy(r)},dw=function(e,t,n,r,a,o){var i=ow.getCoupled(n,"sandbox");return(iu.isOpen(i)?uw:lw)(e,t,n,i,r,a,o)},fw=function(e,t,n){var r,a,o=Vd.getCurrent(t).getOr(t),i=vi(e.element);n?Bo(o.element,"min-width",i+"px"):(r=o.element,a=i,hi.set(r,a))},mw=function(e,t){return e.getSystem().getByUid(t.uid+"-"+iw()).map(function(e){return function(){return ie.value(e)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return ie.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(e)}})})},pw=function(e){iu.getState(e).each(function(e){Ep.repositionMenus(e)})},hw=function(e,t,n){var r=Ui(),a=mw(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:r.id,role:"listbox"}},behaviours:Ou(e.sandboxBehaviours,[Nu.config({store:{mode:"memory",initialValue:t}}),iu.config({onOpen:function(a,o){var i=cw(e,t);r.link(t.element),e.matchWidth&&fw(i.hotspot,o,e.useMinWidth),e.onOpen(i,a,o),void 0!==n&&void 0!==n.onOpen&&n.onOpen(a,o)},onClose:function(e,a){r.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,a)},isPartOf:function(e,n,r){return Fi(n,r)||Fi(t,r)},getAttachPoint:function(){return a().getOrDie()}}),Vd.config({find:function(e){return iu.getState(e).bind(function(e){return Vd.getCurrent(e)})}}),Zs.config({channels:d(d({},du({isExtraPart:c})),mu({doReposition:pw}))})])}},vw=function(e){var t=ow.getCoupled(e,"sandbox");pw(t)},gw=function(){return[Qt("sandboxClasses",[]),Mu("sandboxBehaviours",[Vd,Zs,iu,Nu])]},bw=r([Rt("dom"),Rt("fetch"),ns("onOpen"),rs("onExecute"),Qt("getHotspot",b.some),Qt("getAnchorOverrides",r({})),Lc(),Tu("dropdownBehaviours",[mp,ow,jm,tp]),Rt("toggleClass"),Qt("eventOrder",{}),jt("lazySink"),Qt("matchWidth",!1),Qt("useMinWidth",!1),jt("role")].concat(gw())),yw=r([nd({schema:[Zi()],name:"menu",defaults:function(e){return{onExecute:e.onExecute}}}),sw()]),ww=Od({name:"Dropdown",configFields:bw(),partFields:yw(),factory:function(e,n,r,a){var o,i,s=function(e){iu.getState(e).each(function(e){Ep.highlightPrimary(e)})},c={expand:function(n){mp.isOn(n)||dw(e,function(e){return e},n,a,t,$y.HighlightNone).get(t)},open:function(n){mp.isOn(n)||dw(e,function(e){return e},n,a,t,$y.HighlightFirst).get(t)},isOpen:mp.isOn,close:function(n){mp.isOn(n)&&dw(e,function(e){return e},n,a,t,$y.HighlightFirst).get(t)},repositionMenus:function(e){mp.isOn(e)&&vw(e)}},l=function(e,t){return Vr(e),b.some(!0)};return{uid:e.uid,dom:e.dom,components:n,behaviours:Iu(e.dropdownBehaviours,[mp.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),ow.config({others:{sandbox:function(t){return hw(e,t,{onOpen:function(){mp.on(t)},onClose:function(){mp.off(t)}})}}}),jm.config({mode:"special",onSpace:l,onEnter:l,onDown:function(e,t){if(ww.isOpen(e)){var n=ow.getCoupled(e,"sandbox");s(n)}else ww.open(e);return b.some(!0)},onEscape:function(e,t){return ww.isOpen(e)?(ww.close(e),b.some(!0)):b.none()}}),tp.config({})]),events:hp(b.some(function(n){dw(e,function(e){return e},n,a,s,$y.HighlightFirst).get(t)})),eventOrder:d(d({},e.eventOrder),(o={},o[pr()]=["disabling","toggling","alloy.base.behaviour"],o)),apis:c,domModification:{attributes:d(d({"aria-haspopup":"true"},e.role.fold(function(){return{}},function(e){return{role:e}})),"button"===e.dom.tag?{type:(i="type",De(e.dom,"attributes").bind(function(e){return De(e,i)})).getOr("button")}:{})}}},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)},repositionMenus:function(e,t){return e.repositionMenus(t)}}}),xw=Ks({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Pr([Fr(sr(),l)])},exhibit:function(){return ro({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),kw=Va("color-input-change"),_w=Va("color-swatch-change"),Sw=Va("color-picker-cancel"),Cw=function(e,t,n){var r=py.parts.field({factory:Ry,inputClasses:["tox-textfield"],onSetValue:function(e){return nw.run(e).get(function(){})},inputBehaviours:Ys([Fv.config({disabled:t.providers.isDisabled}),pg(),gy.config({}),nw.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return da(e.element)},notify:{onValid:function(e){var t=Nu.getValue(e);Rr(e,kw,{color:t})}},validator:{validateOnLoad:!1,validate:function(e){var t=Nu.getValue(e);if(0===t.length)return Wy(ie.value(!0));var n=ln.fromTag("span");Bo(n,"background-color",t);var r=Ho(n,"background-color").fold(function(){return ie.error("blah")},function(e){return ie.value(t)});return Wy(r)}}})]),selectOnFocus:!1}),a=e.label.map(function(e){return ky(e,t.providers)}),o=function(e,t){Rr(e,_w,{value:t})},i=Kp(function(e,t){return ww.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Ys([vg(t.providers.isDisabled),pg(),xw.config({}),gy.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function(n){return qy(function(t){return e.fetch(t)}).map(function(r){return b.from(Pb(Ee(kb(Va("menu-value"),r,function(t){e.onItemAction(n,t)},e.columns,e.presets,$h.CLOSE_ON_EXECUTE,function(){return!1},t.providers),{movement:Sb(e.columns,e.presets)})))})},parts:{menu:Kh(0,0,e.presets)}})}({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Ts,Ns,Os]},onLtr:function(){return[Ns,Ts,Os]}},components:[],fetch:gb(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:function(e,t){i.getOpt(e).each(function(e){"custom"===t?n.colorPicker(function(t){t.fold(function(){return zr(e,Sw)},function(t){o(e,t),mb(t)})},"#ffffff"):o(e,"remove"===t?"":t)})}},t));return py.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,i.asSpec()]}]),fieldBehaviours:Ys([Qm("form-field-events",[jr(kw,function(t,n){i.getOpt(t).each(function(e){Bo(e.element,"background-color",n.event.color)}),Rr(t,_y,{name:e.name})}),jr(_w,function(e,t){py.getField(e).each(function(n){Nu.setValue(n,t.event.value),Vd.getCurrent(e).each(tp.focus)})}),jr(Sw,function(e,t){py.getField(e).each(function(t){Vd.getCurrent(e).each(tp.focus)})})])])})},Nw=function(e,t,n){return{hue:e,saturation:t,value:n}},Tw=Va("rgb-hex-update"),Dw=Va("slider-update"),Iw=Va("palette-update"),Mw=rd({schema:[Rt("dom")],name:"label"}),Ow=function(e){return rd({name:e+"-edge",overrides:function(t){return t.model.manager.edgeActions[e].fold(function(){return{}},function(e){return{events:Pr([qr(jn(),function(t,n,r){return e(t,r)},[t]),qr(Gn(),function(t,n,r){return e(t,r)},[t]),qr(Kn(),function(t,n,r){r.mouseIsDown.get()&&e(t,r)},[t])])}})}})},Aw=Ow("top-left"),Lw=Ow("top"),Ew=Ow("top-right"),zw=Ow("right"),Rw=Ow("bottom-right"),Vw=Ow("bottom"),Bw=Ow("bottom-left"),$w=[Mw,Ow("left"),zw,Lw,Vw,Aw,Ew,Bw,Rw,td({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:Pr([Yr(jn(),e,"spectrum"),Yr(qn(),e,"spectrum"),Yr(Wn(),e,"spectrum"),Yr(Gn(),e,"spectrum"),Yr(Kn(),e,"spectrum"),Yr(Xn(),e,"spectrum")])}}}),td({schema:[on("mouseIsDown",function(){return sn(!1)})],name:"spectrum",overrides:function(e){var t=e.model.manager,n=function(n,r){return t.getValueFromEvent(r).map(function(r){return t.setValueFrom(n,e,r)})};return{behaviours:Ys([jm.config({mode:"special",onLeft:function(n){return t.onLeft(n,e)},onRight:function(n){return t.onRight(n,e)},onUp:function(n){return t.onUp(n,e)},onDown:function(n){return t.onDown(n,e)}}),tp.config({})]),events:Pr([jr(jn(),n),jr(qn(),n),jr(Gn(),n),jr(Kn(),function(t,r){e.mouseIsDown.get()&&n(t,r)})])}}})],Uw=r("slider.change.value"),Pw=function(e){var t=e.event.raw;if(function(e){return-1!==e.type.indexOf("touch")}(t)){var n=t;return void 0!==n.touches&&1===n.touches.length?b.some(n.touches[0]).map(function(e){return di(e.clientX,e.clientY)}):b.none()}var r=t;return void 0!==r.clientX?b.some(r).map(function(e){return di(e.clientX,e.clientY)}):b.none()},Fw=function(e){return e.model.minX},Hw=function(e){return e.model.minY},jw=function(e){return e.model.minX-1},qw=function(e){return e.model.minY-1},Ww=function(e){return e.model.maxX},Yw=function(e){return e.model.maxY},Gw=function(e){return e.model.maxX+1},Kw=function(e){return e.model.maxY+1},Qw=function(e,t,n){return t(e)-n(e)},Xw=function(e){return Qw(e,Ww,Fw)},Jw=function(e){return Qw(e,Yw,Hw)},Zw=function(e){return Xw(e)/2},ex=function(e){return Jw(e)/2},tx=function(e){return e.stepSize},nx=function(e){return e.snapToGrid},rx=function(e){return e.snapStart},ax=function(e){return e.rounded},ox=function(e,t){return void 0!==e[t+"-edge"]},ix=function(e){return ox(e,"left")},sx=function(e){return ox(e,"right")},cx=function(e){return ox(e,"top")},lx=function(e){return ox(e,"bottom")},ux=function(e){return e.model.value.get()},dx=function(e){return{x:e}},fx=function(e){return{y:e}},mx=function(e,t){return{x:e,y:t}},px=function(e,t){Rr(e,Uw(),{value:t})},hx=function(e,t,n,r){return e<t?e:e>n?n:e===t?t-1:Math.max(t,e-r)},vx=function(e,t,n,r){return e>n?e:e<t?t:e===n?n+1:Math.min(n,e+r)},gx=function(e,t,n){return Math.max(t,Math.min(n,e))},bx=function(e){var t=e.min,n=e.max,r=e.range,a=e.value,o=e.step,i=e.snap,s=e.snapStart,c=e.rounded,l=e.hasMinEdge,u=e.hasMaxEdge,d=e.minBound,f=e.maxBound,m=e.screenRange,p=l?t-1:t,h=u?n+1:n;if(a<d)return p;if(a>f)return h;var v=function(e,t,n){return Math.min(n,Math.max(e,t))-t}(a,d,f),g=gx(v/m*r+t,p,h);return i&&g>=t&&g<=n?function(e,t,n,r,a){return a.fold(function(){var a=e-t,o=Math.round(a/r)*r;return gx(t+o,t-1,n+1)},function(t){var a=(e-t)%r,o=Math.round(a/r),i=Math.floor((e-t)/r),s=Math.floor((n-t)/r),c=t+Math.min(s,i+o)*r;return Math.max(t,c)})}(g,t,n,o,s):c?Math.round(g):g},yx=function(e){var t=e.min,n=e.max,r=e.range,a=e.value,o=e.hasMinEdge,i=e.hasMaxEdge,s=e.maxBound,c=e.maxOffset,l=e.centerMinEdge,u=e.centerMaxEdge;return a<t?o?0:l:a>n?i?s:u:(a-t)/r*c},wx=function(e){return e.element.dom.getBoundingClientRect()},xx=function(e,t){return e[t]},kx=function(e){var t=wx(e);return xx(t,"left")},_x=function(e){var t=wx(e);return xx(t,"right")},Sx=function(e){var t=wx(e);return xx(t,"top")},Cx=function(e){var t=wx(e);return xx(t,"bottom")},Nx=function(e){var t=wx(e);return xx(t,"width")},Tx=function(e){var t=wx(e);return xx(t,"height")},Dx=function(e,t,n){return(e+t)/2-n},Ix=function(e,t){var n=wx(e),r=wx(t),a=xx(n,"left"),o=xx(n,"right"),i=xx(r,"left");return Dx(a,o,i)},Mx=function(e,t){var n=wx(e),r=wx(t),a=xx(n,"top"),o=xx(n,"bottom"),i=xx(r,"top");return Dx(a,o,i)},Ox=function(e,t){Rr(e,Uw(),{value:t})},Ax=function(e){return{x:e}},Lx=function(e,t,n){var r={min:Fw(t),max:Ww(t),range:Xw(t),value:n,step:tx(t),snap:nx(t),snapStart:rx(t),rounded:ax(t),hasMinEdge:ix(t),hasMaxEdge:sx(t),minBound:kx(e),maxBound:_x(e),screenRange:Nx(e)};return bx(r)},Ex=function(e){return function(t,n){return function(e,t,n){var r=(e>0?vx:hx)(ux(n).x,Fw(n),Ww(n),tx(n));return Ox(t,Ax(r)),b.some(r)}(e,t,n).map(function(){return!0})}},zx=function(e,t,n,r,a,o){var i=function(e,t,n,r,a){var o=Nx(e),i=r.bind(function(t){return b.some(Ix(t,e))}).getOr(0),s=a.bind(function(t){return b.some(Ix(t,e))}).getOr(o),c={min:Fw(t),max:Ww(t),range:Xw(t),value:n,hasMinEdge:ix(t),hasMaxEdge:sx(t),minBound:kx(e),minOffset:0,maxBound:_x(e),maxOffset:o,centerMinEdge:i,centerMaxEdge:s};return yx(c)}(t,o,n,r,a);return kx(t)-kx(e)+i},Rx=Ex(-1),Vx=Ex(1),Bx=b.none,$x=b.none,Ux={"top-left":b.none(),top:b.none(),"top-right":b.none(),right:b.some(function(e,t){px(e,dx(Gw(t)))}),"bottom-right":b.none(),bottom:b.none(),"bottom-left":b.none(),left:b.some(function(e,t){px(e,dx(jw(t)))})},Px=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=Lx(e,t,n),a=Ax(r);return Ox(e,a),r},setToMin:function(e,t){var n=Fw(t);Ox(e,Ax(n))},setToMax:function(e,t){var n=Ww(t);Ox(e,Ax(n))},findValueOfOffset:Lx,getValueFromEvent:function(e){return Pw(e).map(function(e){return e.left})},findPositionOfValue:zx,setPositionFromValue:function(e,t,n,r){var a=ux(n),o=zx(e,r.getSpectrum(e),a.x,r.getLeftEdge(e),r.getRightEdge(e),n),i=vi(t.element)/2;Bo(t.element,"left",o-i+"px")},onLeft:Rx,onRight:Vx,onUp:Bx,onDown:$x,edgeActions:Ux}),Fx=function(e,t){Rr(e,Uw(),{value:t})},Hx=function(e){return{y:e}},jx=function(e,t,n){var r={min:Hw(t),max:Yw(t),range:Jw(t),value:n,step:tx(t),snap:nx(t),snapStart:rx(t),rounded:ax(t),hasMinEdge:cx(t),hasMaxEdge:lx(t),minBound:Sx(e),maxBound:Cx(e),screenRange:Tx(e)};return bx(r)},qx=function(e){return function(t,n){return function(e,t,n){var r=(e>0?vx:hx)(ux(n).y,Hw(n),Yw(n),tx(n));return Fx(t,Hx(r)),b.some(r)}(e,t,n).map(function(){return!0})}},Wx=function(e,t,n,r,a,o){var i=function(e,t,n,r,a){var o=Tx(e),i=r.bind(function(t){return b.some(Mx(t,e))}).getOr(0),s=a.bind(function(t){return b.some(Mx(t,e))}).getOr(o),c={min:Hw(t),max:Yw(t),range:Jw(t),value:n,hasMinEdge:cx(t),hasMaxEdge:lx(t),minBound:Sx(e),minOffset:0,maxBound:Cx(e),maxOffset:o,centerMinEdge:i,centerMaxEdge:s};return yx(c)}(t,o,n,r,a);return Sx(t)-Sx(e)+i},Yx=b.none,Gx=b.none,Kx=qx(-1),Qx=qx(1),Xx={"top-left":b.none(),top:b.some(function(e,t){px(e,fx(qw(t)))}),"top-right":b.none(),right:b.none(),"bottom-right":b.none(),bottom:b.some(function(e,t){px(e,fx(Kw(t)))}),"bottom-left":b.none(),left:b.none()},Jx=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=jx(e,t,n),a=Hx(r);return Fx(e,a),r},setToMin:function(e,t){var n=Hw(t);Fx(e,Hx(n))},setToMax:function(e,t){var n=Yw(t);Fx(e,Hx(n))},findValueOfOffset:jx,getValueFromEvent:function(e){return Pw(e).map(function(e){return e.top})},findPositionOfValue:Wx,setPositionFromValue:function(e,t,n,r){var a=ux(n),o=Wx(e,r.getSpectrum(e),a.y,r.getTopEdge(e),r.getBottomEdge(e),n),i=ci(t.element)/2;Bo(t.element,"top",o-i+"px")},onLeft:Yx,onRight:Gx,onUp:Kx,onDown:Qx,edgeActions:Xx}),Zx=function(e,t){Rr(e,Uw(),{value:t})},ek=function(e,t){return{x:e,y:t}},tk=function(e,t){return function(n,r){return function(e,t,n,r){var a=e>0?vx:hx,o=t?ux(r).x:a(ux(r).x,Fw(r),Ww(r),tx(r)),i=t?a(ux(r).y,Hw(r),Yw(r),tx(r)):ux(r).y;return Zx(n,ek(o,i)),b.some(o)}(e,t,n,r).map(function(){return!0})}},nk=tk(-1,!1),rk=tk(1,!1),ak=tk(-1,!0),ok=tk(1,!0),ik={"top-left":b.some(function(e,t){px(e,mx(jw(t),qw(t)))}),top:b.some(function(e,t){px(e,mx(Zw(t),qw(t)))}),"top-right":b.some(function(e,t){px(e,mx(Gw(t),qw(t)))}),right:b.some(function(e,t){px(e,mx(Gw(t),ex(t)))}),"bottom-right":b.some(function(e,t){px(e,mx(Gw(t),Kw(t)))}),bottom:b.some(function(e,t){px(e,mx(Zw(t),Kw(t)))}),"bottom-left":b.some(function(e,t){px(e,mx(jw(t),Kw(t)))}),left:b.some(function(e,t){px(e,mx(jw(t),ex(t)))})},sk=Object.freeze({__proto__:null,setValueFrom:function(e,t,n){var r=Lx(e,t,n.left),a=jx(e,t,n.top),o=ek(r,a);return Zx(e,o),o},setToMin:function(e,t){var n=Fw(t),r=Hw(t);Zx(e,ek(n,r))},setToMax:function(e,t){var n=Ww(t),r=Yw(t);Zx(e,ek(n,r))},getValueFromEvent:function(e){return Pw(e)},setPositionFromValue:function(e,t,n,r){var a=ux(n),o=zx(e,r.getSpectrum(e),a.x,r.getLeftEdge(e),r.getRightEdge(e),n),i=Wx(e,r.getSpectrum(e),a.y,r.getTopEdge(e),r.getBottomEdge(e),n),s=vi(t.element)/2,c=ci(t.element)/2;Bo(t.element,"left",o-s+"px"),Bo(t.element,"top",i-c+"px")},onLeft:nk,onRight:rk,onUp:ak,onDown:ok,edgeActions:ik}),ck=Od({name:"Slider",configFields:[Qt("stepSize",1),Qt("onChange",t),Qt("onChoose",t),Qt("onInit",t),Qt("onDragStart",t),Qt("onDragEnd",t),Qt("snapToGrid",!1),Qt("rounded",!0),jt("snapStart"),Vt("model",Nt("mode",{x:[Qt("minX",0),Qt("maxX",100),on("value",function(e){return sn(e.mode.minX)}),Rt("getInitialValue"),is("manager",Px)],y:[Qt("minY",0),Qt("maxY",100),on("value",function(e){return sn(e.mode.minY)}),Rt("getInitialValue"),is("manager",Jx)],xy:[Qt("minX",0),Qt("maxX",100),Qt("minY",0),Qt("maxY",100),on("value",function(e){return sn({x:e.mode.minX,y:e.mode.minY})}),Rt("getInitialValue"),is("manager",sk)]})),Tu("sliderBehaviours",[jm,Nu]),on("mouseIsDown",function(){return sn(!1)})],partFields:$w,factory:function(e,t,n,r){var a,o=function(t){return vd(t,e,"thumb")},i=function(t){return vd(t,e,"spectrum")},s=function(t){return hd(t,e,"left-edge")},c=function(t){return hd(t,e,"right-edge")},u=function(t){return hd(t,e,"top-edge")},d=function(t){return hd(t,e,"bottom-edge")},f=e.model,m=f.manager,p=function(t,n){m.setPositionFromValue(t,n,e,{getLeftEdge:s,getRightEdge:c,getTopEdge:u,getBottomEdge:d,getSpectrum:i})},h=function(t,n){f.value.set(n);var r=o(t);return p(t,r),e.onChange(t,r,n),b.some(!0)},v=function(t){var n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&hd(t,e,"thumb").each(function(n){var r=f.value.get();e.onChoose(t,n,r)})},g=function(t,n){n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,o(t))},y=function(t,n){n.stop(),e.onDragEnd(t,o(t)),v(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.sliderBehaviours,[jm.config({mode:"special",focusIn:function(t){return hd(t,e,"spectrum").map(jm.focusIn).map(l)}}),Nu.config({store:{mode:"manual",getValue:function(e){return f.value.get()}}}),Zs.config({channels:(a={},a[lu()]={onReceive:v},a)})]),events:Pr([jr(Uw(),function(e,t){h(e,t.event.value)}),Xr(function(t,n){var r=f.getInitialValue();f.value.set(r);var a=o(t);p(t,a);var s=i(t);e.onInit(t,a,s,f.value.get())}),jr(jn(),g),jr(Wn(),y),jr(Gn(),g),jr(Xn(),y)]),apis:{resetToMin:function(t){m.setToMin(t,e)},resetToMax:function(t){m.setToMax(t,e)},changeValue:h,refresh:p},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),lk=[Tu("formBehaviours",[Nu])],uk=function(e){return"<alloy.field."+e+">"},dk=function(e,t){return{uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.formBehaviours,[Nu.config({store:{mode:"manual",getValue:function(t){var n=bd(t,e);return ke(n,function(e,t){return e().bind(function(e){var n,r,a=Vd.getCurrent(e);return n=a,r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+La(e.element)),n.fold(function(){return ie.error(r)},ie.value)}).map(Nu.getValue)})},setValue:function(t,n){xe(n,function(n,r){hd(t,e,r).each(function(e){Vd.getCurrent(e).each(function(e){Nu.setValue(e,n)})})})}}})]),apis:{getField:function(t,n){return hd(t,e,n).bind(Vd.getCurrent)}}}},fk={getField:Za(function(e,t,n){return e.getField(t,n)}),sketch:function(e){var t,n=(t=[],{field:function(e,n){return t.push(e),ud("form",uk(e),n)},record:function(){return t}}),r=e(n),a=n.record(),o=$(a,function(e){return td({name:e,pname:uk(e)})});return Cd("form",lk,o,dk,r)}},mk=Va("valid-input"),pk=Va("invalid-input"),hk=Va("validating-input"),vk=function(e,n,r,a){var o=function(r,a,o,i,s){var c=e("colorcustom.rgb.range"),l=[py.parts.label({dom:{tag:"label",innerHtml:o,attributes:{"aria-label":i}}}),py.parts.field({data:s,factory:Ry,inputAttributes:d({type:"text"},"hex"===a?{"aria-live":"polite"}:{}),inputClasses:[n("textfield")],inputBehaviours:Ys([function(t,r){return nw.config({invalidClass:n("invalid"),notify:{onValidate:function(e){Rr(e,hk,{type:t})},onValid:function(e){Rr(e,mk,{type:t,value:Nu.getValue(e)})},onInvalid:function(e){Rr(e,pk,{type:t,value:Nu.getValue(e)})}},validator:{validate:function(t){var n=Nu.getValue(t),a=r(n)?ie.value(!0):ie.error(e("aria.input.invalid"));return Wy(a)},validateOnLoad:!1}})}(a,r),gy.config({})]),onSetValue:function(e){nw.isInvalid(e)&&nw.run(e).get(t)}})],u="hex"!==a?[py.parts["aria-descriptor"]({text:c})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:l.concat(u)}},i=function(e,t){var n=t.red,r=t.green,a=t.blue;Nu.setValue(e,{red:n,green:r,blue:a})},s=Kp({dom:{tag:"div",classes:[n("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(e,t){s.getOpt(e).each(function(e){Bo(e.element,"background-color","#"+t.value)})};return Md({factory:function(){var t={red:sn(b.some(255)),green:sn(b.some(255)),blue:sn(b.some(255)),hex:sn(b.some("ffffff"))},l=function(e){return t[e].get()},u=function(e,n){t[e].set(n)},d=function(e){var t=e.red,n=e.green,r=e.blue;u("red",b.some(t)),u("green",b.some(n)),u("blue",b.some(r))},f=function(e,t){var n=t.event;"hex"!==n.type?u(n.type,b.none()):a(e)},m=function(e,t,n){var r=parseInt(n,10);u(t,b.some(r)),l("red").bind(function(e){return l("green").bind(function(t){return l("blue").map(function(n){return Jg(e,t,n,1)})})}).each(function(t){var n=function(e,t){var n=Wg(t);return fk.getField(e,"hex").each(function(t){tp.isFocused(t)||Nu.setValue(e,{hex:n.value})}),n}(e,t);c(e,n)})},p=function(e,t){var n=t.event;!function(e){return"hex"===e.type}(n)?m(e,n.type,n.value):function(e,t){r(e);var n=Ug(t);u("hex",b.some(t));var a=tb(n);i(e,a),d(a),Rr(e,Tw,{hex:n}),c(e,n)}(e,n.value)},h=function(t){return{label:e("colorcustom.rgb."+t+".label"),description:e("colorcustom.rgb."+t+".description")}},v=h("red"),g=h("green"),y=h("blue"),w=h("hex");return Ee(fk.sketch(function(t){return{dom:{tag:"form",classes:[n("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[t.field("red",py.sketch(o(Zg,"red",v.label,v.description,255))),t.field("green",py.sketch(o(Zg,"green",g.label,g.description,255))),t.field("blue",py.sketch(o(Zg,"blue",y.label,y.description,255))),t.field("hex",py.sketch(o(Hg,"hex",w.label,w.description,"ffffff"))),s.asSpec()],formBehaviours:Ys([nw.config({invalidClass:n("form-invalid")}),Qm("rgb-form-events",[jr(mk,p),jr(pk,f),jr(hk,f)])])}}),{apis:{updateHex:function(e,t){Nu.setValue(e,{hex:t.value}),function(e,t){var n=tb(t);i(e,n),d(n)}(e,t),c(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,t,n){e.updateHex(t,n)}},extraApis:{}})},gk=function(e,t){var n=ck.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),a=ck.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class="+t("sv-palette-inner-thumb")+' role="presentation"></div>'}}),o=function(e,t){var n=e.width,r=e.height,a=e.getContext("2d");if(null!==a){a.fillStyle=t,a.fillRect(0,0,n,r);var o=a.createLinearGradient(0,0,n,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),a.fillStyle=o,a.fillRect(0,0,n,r);var i=a.createLinearGradient(0,0,0,r);i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),a.fillStyle=i,a.fillRect(0,0,n,r)}};return Md({factory:function(e){var i=r({x:0,y:0}),s=Ys([Vd.config({find:b.some}),tp.config({})]);return ck.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:i},rounded:!1,components:[n,a],onChange:function(e,t,n){Rr(e,Iw,{value:n})},onInit:function(e,t,n,r){o(n.element.dom,rb(ab))},sliderBehaviours:s})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(e,t,n){!function(e,t){var n=e.components()[0].element.dom;o(n,rb(t))}(t,n)}},extraApis:{}})},bk=function(e,n){return Md({name:"ColourPicker",configFields:[Rt("dom"),Qt("onValidHex",t),Qt("onInvalidHex",t)],factory:function(t){var a,o=vk(e,n,t.onValidHex,t.onInvalidHex),i=gk(0,n),s={paletteRgba:sn(ab)},c=Kp(i.sketch({})),l=Kp(o.sketch({})),u=function(e,t){c.getOpt(e).each(function(e){var n=tb(t);s.paletteRgba.set(n),i.setRgba(e,n)})},d=function(e,t){l.getOpt(e).each(function(e){o.updateHex(e,t)})},f=function(e,t,n){U(n,function(n){n(e,t)})};return{uid:t.uid,dom:t.dom,components:[c.asSpec(),function(e,t){var n=ck.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),a=ck.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return ck.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[n,a],sliderBehaviours:Ys([tp.config({})]),onChange:function(e,t,n){Rr(e,Dw,{value:n})}})}(0,n),l.asSpec()],behaviours:Ys([Qm("colour-picker-events",[jr(Iw,(a=[d],function(e,t){var n,r,o,i,c,l,u,d,m,p=t.event.value,h=s.paletteRgba.get(),v=(o=0,i=0,c=(n=h).red/255,l=n.green/255,u=n.blue/255,d=Math.min(c,Math.min(l,u)),m=Math.max(c,Math.max(l,u)),d===m?Nw(0,0,100*(i=d)):(o=60*((o=c===d?3:u===d?1:5)-(c===d?l-u:u===d?c-l:u-c)/(m-d)),r=(m-d)/m,i=m,Nw(Math.round(o),Math.round(100*r),Math.round(100*i)))),g=Nw(v.hue,p.x,100-p.y),b=eb(g),y=Wg(b);f(e,y,a)})),jr(Dw,function(){var e=[u,d];return function(t,n){var r=function(e){var t=Nw((100-e)/100*360,100,100),n=eb(t);return Wg(n)}(n.event.value.y);f(t,r,e)}}())]),Vd.config({find:function(e){return l.getOpt(e)}}),jm.config({mode:"acyclic"})])}}})},yk=function(){return Vd.config({find:b.some})},wk=function(e){return Vd.config({find:e.getOpt})},xk=function(e){return Vd.config({find:function(t){return pa(t.element,e).bind(function(e){return t.getSystem().getByDom(e).toOptional()})}})},kk={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},_k=function(e){return function(e){return kk[e]}(e)},Sk=tinymce.util.Tools.resolve("tinymce.Resource"),Ck=tinymce.util.Tools.resolve("tinymce.util.Tools"),Nk=it([Qt("preprocess",a),Qt("postprocess",a)]),Tk=function(e,t,n){return Nu.config(Ee({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(e){return{store:{initialValue:e}}}).getOr({})))},Dk=function(e,t,n){return Tk(e,function(e){return t(e.element)},function(e,t){return n(e.element,t)})},Ik=function(e,t){var n=_t("RepresentingConfigs.memento processors",Nk,t);return Nu.config({store:{mode:"manual",getValue:function(t){var r=e.get(t),a=Nu.getValue(r);return n.postprocess(a)},setValue:function(t,r){var a=n.preprocess(r),o=e.get(t);Nu.setValue(o,a)}}})},Mk=Tk,Ok=function(e){return Dk(e,_a,Sa)},Ak=function(e){return Nu.config({store:{mode:"memory",initialValue:e}})},Lk=function(e,t){var n=function(e,t){t.stop()},r=function(e){return function(t,n){U(e,function(e){e(t,n)})}},a=function(e,t){if(!Fv.isDisabled(e)){var n=t.event.raw;i(e,n.dataTransfer.files)}},o=function(e,t){var n=t.event.raw.target;i(e,n.files)},i=function(n,r){Nu.setValue(n,function(e,t){var n=Ck.explode(t.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"));return F(ne(e),function(e){return R(n,function(t){return gn(e.name,"."+t)})})}(r,t)),Rr(n,_y,{name:e.name})},s=Kp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ys([Qm("input-file-events",[Kr(or()),Kr(vr())])])}),c=e.label.map(function(e){return ky(e,t)}),l=py.parts.field({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ys([Ak([]),yk(),Fv.config({}),mp.config({toggleClass:"dragenter",toggleOnExecute:!1}),Qm("dropzone-events",[jr("dragenter",r([n,mp.toggle])),jr("dragleave",r([n,mp.toggle])),jr("dragover",n),jr("drop",r([n,a])),jr(ar(),o)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},Gp.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[s.asSpec()],action:function(e){s.get(e).element.dom.click()},buttonBehaviours:Ys([gy.config({}),vg(t.isDisabled),pg()])})]}]}}}});return yy(c,l,["tox-form__group--stretched"],[])},Ek=Va("alloy-fake-before-tabstop"),zk=Va("alloy-fake-after-tabstop"),Rk=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Ys([tp.config({ignore:!0}),gy.config({})])}},Vk=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Rk([Ek]),e,Rk([zk])],behaviours:Ys([xk(1)])}},Bk=function(e,t){Rr(e,tr(),{raw:{which:9,shiftKey:t}})},$k=function(e,t){var n=t.element;xo(n,Ek)?Bk(e,!0):xo(n,zk)&&Bk(e,!1)},Uk=function(e){return Yb(e,["."+Ek,"."+zk].join(","),c)},Pk=!(On().browser.isIE()||On().browser.isEdge()),Fk=function(e,t){var n=Pk&&e.sandboxed,r=d(d({},e.label.map(function(e){return{title:e}}).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),a=function(e){var t=sn("");return{getValue:function(e){return t.get()},setValue:function(n,r){if(e)Na(n.element,"srcdoc",r);else{Na(n.element,"src","javascript:''");var a=n.element.dom.contentWindow.document;a.open(),a.write(r),a.close()}t.set(r)}}}(n),o=e.label.map(function(e){return ky(e,t)}),i=py.parts.field({factory:{sketch:function(e){return Vk({uid:e.uid,dom:{tag:"iframe",attributes:r},behaviours:Ys([gy.config({}),tp.config({}),Mk(b.none(),a.getValue,a.setValue)])})}}});return yy(o,i,["tox-form__group--stretched"],[])};function Hk(e,t){return Wk(document.createElement("canvas"),e,t)}function jk(e){var t=Hk(e.width,e.height);return qk(t).drawImage(e,0,0),t}function qk(e){return e.getContext("2d")}function Wk(e,t,n){return e.width=t,e.height=n,e}function Yk(e){return e.naturalWidth||e.width}function Gk(e){return e.naturalHeight||e.height}var Kk=window.Promise?window.Promise:function(){var e=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(i,this),r(s,this))},t=window,n=e.immediateFn||"function"==typeof t.setImmediate&&t.setImmediate||function(e){setTimeout(e,1)};function r(e,t){return function(){return e.apply(t,arguments)}}var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e){var t=this;null!==this._state?n(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(i,this),r(s,this))}this._state=!0,this._value=e,c.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,c.call(this)}function c(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];o.call(this,n)}this._deferreds=[]}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(t,n){var r=this;return new e(function(e,a){o.call(r,new function(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(t,n,e,a))})},e.all=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Array.prototype.slice.call(1===t.length&&a(t[0])?t[0]:t);return new e(function(e,t){if(0===r.length)return e([]);var n=r.length;function a(o,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){a(o,e)},t)}r[o]=i,0==--n&&e(r)}catch(e){t(e)}}for(var o=0;o<r.length;o++)a(o,r[o])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=0,a=t;r<a.length;r++)a[r].then(e,n)})},e}();function Qk(e){return new Kk(function(t,n){(function(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return b.none();for(var r=n[1],a=t[1],o=atob(a),i=o.length,s=Math.ceil(i/1024),c=new Array(s),l=0;l<s;++l){for(var u=1024*l,d=Math.min(u+1024,i),f=new Array(d-u),m=u,p=0;m<d;++p,++m)f[p]=o[m].charCodeAt(0);c[l]=new Uint8Array(f)}return b.some(new Blob(c,{type:r}))})(e).fold(function(){n("uri is not base64: "+e)},t)})}function Xk(e,t,n){return t=t||"image/png",T(HTMLCanvasElement.prototype.toBlob)?new Kk(function(r,a){e.toBlob(function(e){e?r(e):a()},t,n)}):Qk(e.toDataURL(t,n))}function Jk(e){return function(e){return new Kk(function(t,n){var r=URL.createObjectURL(e),a=new Image,o=function(){a.removeEventListener("load",i),a.removeEventListener("error",s)};function i(){o(),t(a)}function s(){o(),n("Unable to load data of type "+e.type+": "+r)}a.addEventListener("load",i),a.addEventListener("error",s),a.src=r,a.complete&&i()})}(e).then(function(e){!function(e){URL.revokeObjectURL(e.src)}(e);var t=Hk(Yk(e),Gk(e));return qk(t).drawImage(e,0,0),t})}function Zk(e,t,n){var a=t.type;function o(t,n){return e.then(function(e){return function(e,t,n){return t=t||"image/png",e.toDataURL(t,n)}(e,t,n)})}return{getType:r(a),toBlob:function(){return Kk.resolve(t)},toDataURL:r(n),toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then(function(e){return Xk(e,t,n)})},toAdjustedDataURL:o,toAdjustedBase64:function(e,t){return o(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function(){return e.then(jk)}}}function e_(e){return function(e){return new Kk(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}(e).then(function(t){return Zk(Jk(e),e,t)})}function t_(e,t){return Xk(e,t).then(function(t){return Zk(Kk.resolve(e),t,e.toDataURL())})}function n_(e,t,n){var r="string"==typeof e?parseFloat(e):e;return r>n?r=n:r<t&&(r=t),r}var r_=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function a_(e,t){for(var n,r=[],a=new Array(25),o=0;o<5;o++){for(var i=0;i<5;i++)r[i]=t[i+5*o];for(i=0;i<5;i++){n=0;for(var s=0;s<5;s++)n+=e[i+5*s]*r[s];a[i+5*o]=n}}return a}function o_(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=qk(e);var a=function(e,t){for(var n,r,a,o,i=e.data,s=t[0],c=t[1],l=t[2],u=t[3],d=t[4],f=t[5],m=t[6],p=t[7],h=t[8],v=t[9],g=t[10],b=t[11],y=t[12],w=t[13],x=t[14],k=t[15],_=t[16],S=t[17],C=t[18],N=t[19],T=0;T<i.length;T+=4)n=i[T],r=i[T+1],a=i[T+2],o=i[T+3],i[T]=n*s+r*c+a*l+o*u+d,i[T+1]=n*f+r*m+a*p+o*h+v,i[T+2]=n*g+r*b+a*y+o*w+x,i[T+3]=n*k+r*_+a*S+o*C+N;return e}(r.getImageData(0,0,e.width,e.height),n);return r.putImageData(a,0,0),t_(e,t)}(n,e.getType(),t)})}function i_(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=qk(e);var a=r.getImageData(0,0,e.width,e.height),o=r.getImageData(0,0,e.width,e.height);return o=function(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}for(var a=Math.round(Math.sqrt(n.length)),o=Math.floor(a/2),i=e.data,s=t.data,c=e.width,l=e.height,u=0;u<l;u++)for(var d=0;d<c;d++){for(var f=0,m=0,p=0,h=0;h<a;h++)for(var v=0;v<a;v++){var g=r(d+v-o,0,c-1),b=r(u+h-o,0,l-1),y=4*(b*c+g),w=n[h*a+v];f+=i[y]*w,m+=i[y+1]*w,p+=i[y+2]*w}var x=4*(u*c+d);s[x]=r(f,0,255),s[x+1]=r(m,0,255),s[x+2]=r(p,0,255)}return t}(a,o,n),r.putImageData(o,0,0),t_(e,t)}(n,e.getType(),t)})}function s_(e){return function(t,n){return o_(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}var c_,l_,u_=function(e){return function(t){return o_(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),d_=s_(function(e,t){return a_(e,[1,0,0,0,t=n_(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}),f_=s_(function(e,t){var n;return t=n_(t,-1,1),a_(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?r_[t]:r_[Math.floor(t)]*(1-n)+r_[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}),m_=function(e,t,n,r){return o_(e,function(e,t,n,r){return a_(e,[t=n_(t,0,2),0,0,0,0,0,n=n_(n,0,2),0,0,0,0,0,r=n_(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t,n,r))},p_=(c_=[0,-1,0,-1,5,-1,0,-1,0],function(e){return i_(e,c_)}),h_=(l_=function(e,t){return 255*Math.pow(e/255,1-t)},function(e,t){return e.toCanvas().then(function(n){return function(e,t,n){for(var r=qk(e),a=new Array(256),o=0;o<a.length;o++)a[o]=l_(o,n);var i=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(r.getImageData(0,0,e.width,e.height),a);return r.putImageData(i,0,0),t_(e,t)}(n,e.getType(),t)})});function v_(e,t,n){var r=Yk(e),a=Gk(e),o=t/r,i=n/a,s=!1;(o<.5||o>2)&&(o=o<.5?.5:2,s=!0),(i<.5||i>2)&&(i=i<.5?.5:2,s=!0);var c=function(e,t,n){return new Kk(function(r){var a=Yk(e),o=Gk(e),i=Math.floor(a*t),s=Math.floor(o*n),c=Hk(i,s),l=qk(c);l.drawImage(e,0,0,a,o,0,0,i,s),r(c)})}(e,o,i);return s?c.then(function(e){return v_(e,t,n)}):c}function g_(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=Hk(e.width,e.height),a=qk(r),o=0,i=0;90!==(n=n<0?360+n:n)&&270!==n||Wk(r,r.height,r.width);90!==n&&180!==n||(o=r.width);270!==n&&180!==n||(i=r.height);return a.translate(o,i),a.rotate(n*Math.PI/180),a.drawImage(e,0,0),t_(r,t)}(n,e.getType(),t)})}function b_(e,t){return e.toCanvas().then(function(n){return function(e,t,n){var r=Hk(e.width,e.height),a=qk(r);"v"===n?(a.scale(1,-1),a.drawImage(e,0,-r.height)):(a.scale(-1,1),a.drawImage(e,-r.width,0));return t_(r,t)}(n,e.getType(),t)})}function y_(e,t,n,r,a){return e.toCanvas().then(function(o){return function(e,t,n,r,a,o){var i=Hk(a,o);return qk(i).drawImage(e,-n,-r),t_(i,t)}(o,e.getType(),t,n,r,a)})}var w_,x_=function(e){return u_(e)},k_=function(e){return p_(e)},__=function(e,t){return h_(e,t)},S_=function(e,t){return d_(e,t)},C_=function(e,t){return f_(e,t)},N_=function(e,t){return b_(e,t)},T_=function(e,t,n){return function(e,t,n){return e.toCanvas().then(function(r){return v_(r,t,n).then(function(t){return t_(t,e.getType())})})}(e,t,n)},D_=function(e,t){return g_(e,t)},I_=function(e,t){return d({dom:{tag:"span",innerHtml:e,classes:["tox-icon","tox-tbtn__icon-wrap"]}},t)},M_=function(e,t){return I_(Xp(e,t),{})},O_=function(e,t){return I_(Xp(e,t),{behaviours:Ys([Km.config({})])})},A_=function(e,t,n){return{dom:{tag:"span",innerHtml:n.translate(e),classes:[t+"__select-label"]},behaviours:Ys([Km.config({})])}},L_=Va("toolbar.button.execute"),E_=((w_={})[pr()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],w_),z_=Va("update-menu-text"),R_=Va("update-menu-icon"),V_=function(e,n,r){var a=sn(t),i=e.text.map(function(e){return Kp(A_(e,n,r.providers))}),s=e.icon.map(function(e){return Kp(O_(e,r.providers.icons))}),c=function(e,t){var n=Nu.getValue(e);return tp.focus(n),Rr(n,"keydown",{raw:t.event.raw}),ww.close(n),b.some(!0)},l=e.role.fold(function(){return{}},function(e){return{role:e}}),u=e.tooltip.fold(function(){return{}},function(e){var t=r.providers.translate(e);return{title:t,"aria-label":t}});return Kp(ww.sketch(d(d(d({},e.uid?{uid:e.uid}:{}),l),{dom:{tag:"button",classes:[n,n+"--select"].concat($(e.classes,function(e){return n+"--"+e})),attributes:d({},u)},components:_g([s.map(function(e){return e.asSpec()}),i.map(function(e){return e.asSpec()}),b.some({dom:{tag:"div",classes:[n+"__select-chevron"],innerHtml:Xp("chevron-down",r.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Ys(m(e.dropdownBehaviours,[vg(function(){return e.disabled||r.providers.isDisabled()}),pg(),xw.config({}),Km.config({}),Qm("dropdown-events",[wg(e,a),xg(e,a)]),Qm("menubutton-update-display-text",[jr(z_,function(e,t){i.bind(function(t){return t.getOpt(e)}).each(function(e){Km.set(e,[ti(r.providers.translate(t.event.text))])})}),jr(R_,function(e,t){s.bind(function(t){return t.getOpt(e)}).each(function(e){Km.set(e,[O_(t.event.icon,r.providers.icons)])})})])])),eventOrder:Ee(E_,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Ys([jm.config({mode:"special",onLeft:c,onRight:c})]),lazySink:r.getSink,toggleClass:n+"--active",parts:{menu:Kh(0,e.columns,e.presets)},fetch:function(t){return qy(o(e.fetch,t))}}))).asSpec()},B_=function(e){return"separator"===e.type},$_={type:"separator"},U_=function(e,t){var n=j(e,function(e,n){return function(e){return x(e)}(n)?""===n?e:"|"===n?e.length>0&&!B_(e[e.length-1])?e.concat([$_]):e:Ie(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])},[]);return n.length>0&&B_(n[n.length-1])&&n.pop(),n},P_=function(e,t){return function(e){return Ie(e,"getSubmenuItems")}(e)?function(e,t){var n=e.getSubmenuItems(),r=F_(n,t);return{item:e,menus:Ee(r.menus,qe(e.value,r.items)),expansions:Ee(r.expansions,qe(e.value,e.value))}}(e,t):{item:e,menus:{},expansions:{}}},F_=function(e,t){var n=U_(x(e)?e.split(" "):e,t);return H(n,function(e,n){var r=function(e){if(B_(e))return e;var t=De(e,"value").getOrThunk(function(){return Va("generated-menu-item")});return Ee({value:t},e)}(n),a=P_(r,t);return{menus:Ee(e.menus,a.menus),items:[a.item].concat(e.items),expansions:Ee(e.expansions,a.expansions)}},{menus:{},expansions:{},items:[]})},H_=function(e,t,n,r){var a=Va("primary-menu"),o=F_(e,n.shared.providers.menuItems());if(0===o.items.length)return b.none();var i=Ub(a,o.items,t,n,r),s=ke(o.menus,function(e,r){return Ub(r,e,t,n,!1)}),c=Ee(s,qe(a,i));return b.from(Ep.tieredData(a,c,o.expansions))},j_=function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)},setActive:function(t){var n=e.element;t?(bo(n,"tox-tbtn--enabled"),Na(n,"aria-pressed",!0)):(wo(n,"tox-tbtn--enabled"),Ma(n,"aria-pressed"))},isActive:function(){return xo(e.element,"tox-tbtn--enabled")}}},q_=function(e,t,n,r){return V_({text:e.text,icon:e.icon,tooltip:e.tooltip,role:r,fetch:function(t,r){e.fetch(function(e){r(H_(e,$h.CLOSE_ON_EXECUTE,n,!1))})},onSetup:e.onSetup,getApi:j_,columns:1,presets:"normal",classes:[],dropdownBehaviours:[gy.config({})]},t,n.shared)},W_=function(e,t,n){return function(r){r($(e,function(e){var r=e.text.fold(function(){return{}},function(e){return{text:e}});return d(d({type:e.type,active:!1},r),{onAction:function(e){return function(r){var a=!r.isActive();r.setActive(a),e.storage.set(a),n.shared.getSink().each(function(n){t().getOpt(n).each(function(t){tc(t.element),Rr(t,Ny,{name:e.name,value:e.storage.get()})})})}}(e),onSetup:function(e){return function(t){t.setActive(e.storage.get())}}(e)})}))}},Y_=function(e,t,n,r,a,o){void 0===n&&(n=[]);var i=t.fold(function(){return{}},function(e){return{action:e}}),s=d({buttonBehaviours:Ys([vg(function(){return e.disabled||o.isDisabled()}),pg(),gy.config({}),Qm("button press",[Hr("click"),Hr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),c=Ee(s,{dom:r});return Ee(c,{components:a})},G_=function(e,t,n,r){void 0===r&&(r=[]);var a={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(function(e){return{"aria-label":n.translate(e),title:n.translate(e)}}).getOr({})},o=e.icon.map(function(e){return M_(e,n.icons)}),i=_g([o]);return Y_(e,t,r,a,i,n)},K_=function(e,t,n,r){void 0===r&&(r=[]);var a=G_(e,b.some(t),n,r);return Gp.sketch(a)},Q_=function(e,t,n,r,a){void 0===r&&(r=[]),void 0===a&&(a=[]);var o=n.translate(e.text),i=e.icon?e.icon.map(function(e){return M_(e,n.icons)}):b.none(),s=i.isSome()?_g([i]):[],c=i.isSome()?{}:{innerHtml:o},l=m(e.primary||e.borderless?["tox-button"]:["tox-button","tox-button--secondary"],i.isSome()?["tox-button--icon"]:[],e.borderless?["tox-button--naked"]:[],a),u=d(d({tag:"button",classes:l},c),{attributes:{title:o}});return Y_(e,t,r,u,s,n)},X_=function(e,t,n,r,a){void 0===r&&(r=[]),void 0===a&&(a=[]);var o=Q_(e,b.some(t),n,r,a);return Gp.sketch(o)},J_=function(e,t){return function(n){"custom"===t?Rr(n,Ny,{name:e,value:{}}):"submit"===t?zr(n,Ty):"cancel"===t?zr(n,Cy):console.error("Unknown button type: ",t)}},Z_=function(e,n,r){if(function(e,t){return"menu"===t}(0,n)){var a=e,o=d(d({},e),{onSetup:function(n){return n.setDisabled(e.disabled),t},fetch:W_(a.items,function(){return i},r)}),i=Kp(q_(o,"tox-tbtn",r,b.none()));return i.asSpec()}if(function(e,t){return"custom"===t||"cancel"===t||"submit"===t}(0,n)){var s=J_(e.name,n),c=d(d({},e),{borderless:!1});return X_(c,s,r.shared.providers,[])}console.error("Unknown footer button type: ",n)},eS=function(e,t){var n,r,a=J_(e.name,"custom");return n=b.none(),r=py.parts.field(d({factory:Gp},Q_(e,b.some(a),t,[Ak(""),yk()]))),yy(n,r,[],[])},tS=r([Qt("field1Name","field1"),Qt("field2Name","field2"),as("onLockedChange"),es(["lockClass"]),Qt("locked",!1),Mu("coupledFieldBehaviours",[Vd,Nu])]),nS=function(e,t){return td({factory:py,name:e,overrides:function(e){return{fieldBehaviours:Ys([Qm("coupled-input-behaviour",[jr(rr(),function(n){(function(e,t,n){return hd(e,t,n).bind(Vd.getCurrent)})(n,e,t).each(function(t){hd(n,e,"lock").each(function(r){mp.isOn(r)&&e.onLockedChange(n,t,r)})})})])])}}})},rS=r([nS("field1","field2"),nS("field2","field1"),td({factory:Gp,schema:[Rt("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:Ys([mp.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),aS=Od({name:"FormCoupledInputs",configFields:tS(),partFields:rS(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Ou(e.coupledFieldBehaviours,[Vd.config({find:b.some}),Nu.config({store:{mode:"manual",getValue:function(t){var n,r=wd(t,e,["field1","field2"]);return(n={})[e.field1Name]=Nu.getValue(r.field1()),n[e.field2Name]=Nu.getValue(r.field2()),n},setValue:function(t,n){var r=wd(t,e,["field1","field2"]);Me(n,e.field1Name)&&Nu.setValue(r.field1(),n[e.field1Name]),Me(n,e.field2Name)&&Nu.setValue(r.field2(),n[e.field2Name])}}})]),apis:{getField1:function(t){return hd(t,e,"field1")},getField2:function(t){return hd(t,e,"field2")},getLock:function(t){return hd(t,e,"lock")}}}},apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),oS=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){var n=parseFloat(t[1]),r=t[2];return ie.value({value:n,unit:r})}return ie.error(e)},iS=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=function(e){return Object.prototype.hasOwnProperty.call(n,e)};return e.unit===t?b.some(e.value):r(e.unit)&&r(t)?n[e.unit]===n[t]?b.some(e.value):b.some(e.value/n[e.unit]*n[t]):b.none()},sS=function(e){return b.none()},cS=function(e,t){var n,r,a,o=oS(e).toOptional(),i=oS(t).toOptional();return(n=o,r=i,a=function(e,t){return iS(e,t.unit).map(function(e){return t.value/e}).map(function(e){return n=e,r=t.unit,function(e){return iS(e,r).map(function(e){return{value:e*n,unit:r}})};var n,r}).getOr(sS)},n.isSome()&&r.isSome()?b.some(a(n.getOrDie(),r.getOrDie())):b.none()).getOr(sS)},lS=function(e,t){var n=sS,r=Va("ratio-event"),a=aS.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:Xp("lock",t.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:Xp("unlock",t.icons)}}],buttonBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()}}),pg(),gy.config({})])}),o=function(e){return{dom:{tag:"div",classes:["tox-form__group"]},components:e}},i=function(n){return py.parts.field({factory:Ry,inputClasses:["tox-textfield"],inputBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()}}),pg(),gy.config({}),Qm("size-input-events",[jr(Zn(),function(e,t){Rr(e,r,{isField1:n})}),jr(ar(),function(t,n){Rr(t,_y,{name:e.name})})])]),selectOnFocus:!1})},s=function(e){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}}},c=aS.parts.field1(o([py.parts.label(s("Width")),i(!0)])),l=aS.parts.field2(o([py.parts.label(s("Height")),i(!1)]));return aS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,l,o([s("&nbsp;"),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,t,r){oS(Nu.getValue(e)).each(function(e){n(e).each(function(e){var n,r,a,o;Nu.setValue(t,(a={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},-1!==(o=(n=e).value.toFixed((r=n.unit)in a?a[r]:1)).indexOf(".")&&(o=o.replace(/\.?0*$/,"")),o+n.unit))})})},coupledFieldBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){aS.getField1(e).bind(py.getField).each(Fv.disable),aS.getField2(e).bind(py.getField).each(Fv.disable),aS.getLock(e).each(Fv.disable)},onEnabled:function(e){aS.getField1(e).bind(py.getField).each(Fv.enable),aS.getField2(e).bind(py.getField).each(Fv.enable),aS.getLock(e).each(Fv.enable)}}),pg(),Qm("size-input-events2",[jr(r,function(e,t){var r=t.event.isField1,a=r?aS.getField1(e):aS.getField2(e),o=r?aS.getField2(e):aS.getField1(e),i=a.map(Nu.getValue).getOr(""),s=o.map(Nu.getValue).getOr("");n=cS(i,s)})])])})},uS={undo:r(Va("undo")),redo:r(Va("redo")),zoom:r(Va("zoom")),back:r(Va("back")),apply:r(Va("apply")),swap:r(Va("swap")),transform:r(Va("transform")),tempTransform:r(Va("temp-transform")),transformApply:r(Va("transform-apply"))},dS=r("save-state"),fS=r("disable"),mS=r("enable"),pS={formActionEvent:Ny,saveState:dS,disable:fS,enable:mS},hS=function(e,n){var a=function(e,t,r,a){return Kp(X_({name:e,text:e,disabled:r,primary:a,icon:b.none(),borderless:!1},t,n))},o=function(e,t,r,a){return Kp(K_({name:e,icon:b.some(e),tooltip:b.some(t),disabled:a,primary:!1,borderless:!1},r,n))},i=function(e,t){e.map(function(e){var n=e.get(t);n.hasConfigured(Fv)&&Fv.disable(n)})},s=function(e,t){e.map(function(e){var n=e.get(t);n.hasConfigured(Fv)&&Fv.enable(n)})},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},l=t,u=function(e,t,n){Rr(e,t,n)},d=function(e){return zr(e,pS.disable())},f=function(e){return zr(e,pS.enable())},m=function(e,t){d(e),u(e,uS.transform(),{transform:t}),f(e)},p=function(e){return function(){te.getOpt(e).each(function(e){Km.set(e,[Z])})}},h=function(e,t){d(e),u(e,uS.transformApply(),{transform:t,swap:p(e)}),f(e)},v=function(){return a("Back",function(e){return u(e,uS.back(),{swap:p(e)})},!1,!1)},g=function(){return Kp({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Ys([Fv.config({})])})},y=function(){return a("Apply",function(e){return u(e,uS.apply(),{swap:p(e)})},!0,!0)},w=function(){return function(t){var n=e.getRect();return function(e,t,n,r,a){return y_(e,t,n,r,a)}(t,n.x,n.y,n.w,n.h)}},x=[v(),g(),a("Apply",function(t){var n=w();h(t,n),e.hideCrop()},!1,!0)],k=uy.sketch({dom:c,components:x.map(function(e){return e.asSpec()}),containerBehaviours:Ys([Qm("image-tools-crop-buttons-events",[jr(pS.disable(),function(e,t){i(x,e)}),jr(pS.enable(),function(e,t){s(x,e)})])])}),_=Kp(lS({name:"size",label:b.none(),constrain:!0,disabled:!1},n)),S=[v(),g(),_,g(),a("Apply",function(e){_.getOpt(e).each(function(t){var n=Nu.getValue(t),r=function(e,t){return function(n){return T_(n,e,t)}}(parseInt(n.width,10),parseInt(n.height,10));h(e,r)})},!1,!0)],C=uy.sketch({dom:c,components:S.map(function(e){return e.asSpec()}),containerBehaviours:Ys([Qm("image-tools-resize-buttons-events",[jr(pS.disable(),function(e,t){i(S,e)}),jr(pS.enable(),function(e,t){s(S,e)})])])}),N=function(e,t){return function(n){return e(n,t)}},T=N(N_,"h"),D=N(N_,"v"),I=N(D_,-90),M=N(D_,90),O=function(e,t){!function(e,t){d(e),u(e,uS.tempTransform(),{transform:t}),f(e)}(e,t)},A=[v(),g(),o("flip-horizontally","Flip horizontally",function(e){O(e,T)},!1),o("flip-vertically","Flip vertically",function(e){O(e,D)},!1),o("rotate-left","Rotate counterclockwise",function(e){O(e,I)},!1),o("rotate-right","Rotate clockwise",function(e){O(e,M)},!1),g(),y()],L=uy.sketch({dom:c,components:A.map(function(e){return e.asSpec()}),containerBehaviours:Ys([Qm("image-tools-fliprotate-buttons-events",[jr(pS.disable(),function(e,t){i(A,e)}),jr(pS.enable(),function(e,t){s(A,e)})])])}),E=function(e,t,a,o,i){var s=ck.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(e)}}),c=ck.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),l=ck.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Kp(ck.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:a,maxX:i,getInitialValue:r({x:o})},components:[s,c,l],sliderBehaviours:Ys([tp.config({})]),onChoose:t}))},z=function(e,t,n,r,a){return[v(),function(e,t,n,r,a){return E(e,function(e,n,r){var a=N(t,r.x/100);m(e,a)},n,r,a)}(e,t,n,r,a),y()]},R=function(e,t,n,r,a){var o=z(e,t,n,r,a);return uy.sketch({dom:c,components:o.map(function(e){return e.asSpec()}),containerBehaviours:Ys([Qm("image-tools-filter-panel-buttons-events",[jr(pS.disable(),function(e,t){i(o,e)}),jr(pS.enable(),function(e,t){s(o,e)})])])})},V=[v(),g(),y()],B=uy.sketch({dom:c,components:V.map(function(e){return e.asSpec()})}),$=R("Brightness",S_,-100,0,100),U=R("Contrast",C_,-100,0,100),P=R("Gamma",__,-100,0,100),F=function(e,t,n){return function(r){return function(e,t,n,r){return m_(e,t,n,r)}(r,e,t,n)}},H=function(e){return E(e,function(e,t,n){var r=j.getOpt(e),a=W.getOpt(e),o=q.getOpt(e);r.each(function(t){a.each(function(n){o.each(function(r){var a=Nu.getValue(t).x/100,o=Nu.getValue(r).x/100,i=Nu.getValue(n).x/100,s=F(a,o,i);m(e,s)})})})},0,100,200)},j=H("R"),q=H("G"),W=H("B"),Y=[v(),j,q,W,y()],G=uy.sketch({dom:c,components:Y.map(function(e){return e.asSpec()})}),K=function(e,t,n){return function(r){u(r,uS.swap(),{transform:t,swap:function(){te.getOpt(r).each(function(t){Km.set(t,[e]),n(t)})}})}},Q=b.some(k_),X=b.some(x_),J=[o("crop","Crop",K(k,b.none(),function(t){e.showCrop()}),!1),o("resize","Resize",K(C,b.none(),function(t){_.getOpt(t).each(function(t){var n=e.getMeasurements(),r=n.width,a=n.height;Nu.setValue(t,{width:r,height:a})})}),!1),o("orientation","Orientation",K(L,b.none(),l),!1),o("brightness","Brightness",K($,b.none(),l),!1),o("sharpen","Sharpen",K(B,Q,l),!1),o("contrast","Contrast",K(U,b.none(),l),!1),o("color-levels","Color levels",K(G,b.none(),l),!1),o("gamma","Gamma",K(P,b.none(),l),!1),o("invert","Invert",K(B,X,l),!1)],Z=uy.sketch({dom:c,components:J.map(function(e){return e.asSpec()})}),ee=uy.sketch({dom:{tag:"div"},components:[Z],containerBehaviours:Ys([Km.config({})])}),te=Kp(ee);return{memContainer:te,getApplyButton:function(e){return te.getOpt(e).map(function(e){var t=e.components()[0];return t.components()[t.components().length-1]})}}},vS=tinymce.util.Tools.resolve("tinymce.geom.Rect"),gS=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),bS=tinymce.util.Tools.resolve("tinymce.util.Observable"),yS=tinymce.util.Tools.resolve("tinymce.util.VK");function wS(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function xS(e,t){var n,r,a,o,i=t.document||document,s=i.getElementById(t.handle||e),c=function(e){if(wS(e),e.button!==r)return l(e);e.deltaX=e.screenX-a,e.deltaY=e.screenY-o,e.preventDefault(),t.drag(e)},l=function(e){wS(e),gS(i).off("mousemove touchmove",c).off("mouseup touchend",l),n.remove(),t.stop&&t.stop(e)};this.destroy=function(){gS(s).off()},gS(s).on("mousedown touchstart",function(e){var u,d=function(e){var t=Math.max,n=e.documentElement,r=e.body,a=t(n.scrollWidth,r.scrollWidth),o=t(n.clientWidth,r.clientWidth),i=t(n.offsetWidth,r.offsetWidth),s=t(n.scrollHeight,r.scrollHeight),c=t(n.clientHeight,r.clientHeight),l=t(n.offsetHeight,r.offsetHeight);return{width:a<i?o:a,height:s<l?c:s}}(i);wS(e),e.preventDefault(),r=e.button;var f=s;a=e.screenX,o=e.screenY,u=window.getComputedStyle?window.getComputedStyle(f,null).getPropertyValue("cursor"):f.runtimeStyle.cursor,n=gS("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:u}).appendTo(i.body),gS(i).on("mousemove touchmove",c).on("mouseup touchend",l),t.start(e)})}var kS=0,_S=function(e,t,n,r,a){var o,i="tox-",s=i+"crid-"+kS++,c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],l=["top","right","bottom","left"],u=function(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},d=function(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}};function f(t,r,a,o){var i,s,c,l,u;i=r.x,s=r.y,c=r.w,l=r.h,i+=a*t.deltaX,s+=o*t.deltaY,c+=a*t.deltaW,l+=o*t.deltaH,c<20&&(c=20),l<20&&(l=20),u=e=vS.clamp({x:i,y:s,w:c,h:l},n,"move"===t.name),u=d(n,u),v.fire("updateRect",{rect:u}),h(u)}function m(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),gS("#"+s+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})}Ck.each(c,function(t){gS("#"+s+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function p(t){m(e=t)}function h(e){p(u(n,e))}gS('<div id="'+s+'" class="'+i+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),Ck.each(l,function(e){gS("#"+s,r).append('<div id="'+s+"-"+e+'"class="'+i+'croprect-block" style="display: none" data-mce-bogus="all">')}),Ck.each(c,function(e){gS("#"+s,r).append('<div id="'+s+"-"+e.name+'" class="'+i+"croprect-handle "+i+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false" title="'+e.label+'">')}),o=Ck.map(c,function(t){var n;return new xS(s,{document:r.ownerDocument,handle:s+"-"+t.name,start:function(){n=e},drag:function(e){f(t,n,e.deltaX,e.deltaY)}})}),m(e),gS(r).on("focusin focusout",function(e){gS(e.target).attr("aria-grabbed","focus"===e.type?"true":"false")}),gS(r).on("keydown",function(t){var n;function r(e,t,r,a,o){e.stopPropagation(),e.preventDefault(),f(n,r,a,o)}switch(Ck.each(c,function(e){if(t.target.id===s+"-"+e.name)return n=e,!1}),t.keyCode){case yS.LEFT:r(t,0,e,-10,0);break;case yS.RIGHT:r(t,0,e,10,0);break;case yS.UP:r(t,0,e,0,-10);break;case yS.DOWN:r(t,0,e,0,10);break;case yS.ENTER:case yS.SPACEBAR:t.preventDefault(),a()}});var v=Ck.extend({toggleVisibility:function(e){var t=Ck.map(c,function(e){return"#"+s+"-"+e.name}).concat(Ck.map(l,function(e){return"#"+s+"-"+e})).join(",");e?gS(t,r).show():gS(t,r).hide()},setClampRect:function(t){n=t,m(e)},setRect:p,getInnerRect:function(){return d(n,e)},setInnerRect:h,setViewPortRect:function(n){t=n,m(e)},destroy:function(){Ck.each(o,function(e){e.destroy()}),o=[]}},bS);return v},SS=function(e){var t=Kp({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=sn(1),r=sn(b.none()),a=sn({x:0,y:0,w:1,h:1}),o=sn({x:0,y:0,w:1,h:1}),i=function(e,o){l.getOpt(e).each(function(e){var i=n.get(),s=vi(e.element),c=ci(e.element),l=o.dom.naturalWidth*i,u=o.dom.naturalHeight*i,d=Math.max(0,s/2-l/2),f=Math.max(0,c/2-u/2),m={left:d.toString()+"px",top:f.toString()+"px",width:l.toString()+"px",height:u.toString()+"px",position:"absolute"};$o(o,m),t.getOpt(e).each(function(e){$o(e.element,m)}),r.get().each(function(e){var t=a.get();e.setRect({x:t.x*i+d,y:t.y*i+f,w:t.w*i,h:t.h*i}),e.setClampRect({x:d,y:f,w:l,h:u}),e.setViewPortRect({x:0,y:0,w:s,h:c})})})},s=function(e,t){var r,s=ln.fromTag("img");return Na(s,"src",t),(r=s.dom,new mh(function(e){var t=function(){r.removeEventListener("load",t),e(r)};r.complete?e(r):r.addEventListener("load",t)})).then(function(){return l.getOpt(e).map(function(e){var t=ni({element:s});Km.replaceAt(e,1,b.some(t));var r=o.get(),c={x:0,y:0,w:s.dom.naturalWidth,h:s.dom.naturalHeight};o.set(c);var u=vS.inflate(c,-20,-20);return a.set(u),r.w===c.w&&r.h===c.h||function(e,t){l.getOpt(e).each(function(e){var r=vi(e.element),a=ci(e.element),o=t.dom.naturalWidth,i=t.dom.naturalHeight,s=Math.min(r/o,a/i);s>=1?n.set(1):n.set(s)})}(e,s),i(e,s),s})})},c=uy.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[t.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:Ys([Qm("image-panel-crop-events",[Xr(function(e){l.getOpt(e).each(function(e){var t=e.element.dom,o=_S({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t,function(){});o.toggleVisibility(!1),o.on("updateRect",function(e){var t=e.rect,r=n.get(),o={x:Math.round(t.x/r),y:Math.round(t.y/r),w:Math.round(t.w/r),h:Math.round(t.h/r)};a.set(o)}),r.set(b.some(o))})})])])}],containerBehaviours:Ys([Km.config({}),Qm("image-panel-events",[Xr(function(t){s(t,e)})])])}),l=Kp(c);return{memContainer:l,updateSrc:s,zoom:function(e,t){var r=n.get(),a=t>0?Math.min(2,r+.1):Math.max(.1,r-.1);n.set(a),l.getOpt(e).each(function(e){var t=e.components()[1].element;i(e,t)})},showCrop:function(){r.get().each(function(e){e.toggleVisibility(!0)})},hideCrop:function(){r.get().each(function(e){e.toggleVisibility(!1)})},getRect:function(){return a.get()},getMeasurements:function(){var e=o.get();return{width:e.w,height:e.h}}}},CS=function(e,t,n,r,a){return K_({name:e,icon:b.some(t),disabled:n,tooltip:b.some(e),primary:!1,borderless:!1},r,a)},NS=function(e,t){t?Fv.enable(e):Fv.disable(e)};var TS,DS=function(e){var t=sn(e),n=sn(b.none()),r=function(){var e=[],t=-1;function n(){return t>0}function r(){return-1!==t&&t<e.length-1}return{data:e,add:function(n){var r=e.splice(++t);return e.push(n),{state:n,removed:r}},undo:function(){if(n())return e[--t]},redo:function(){if(r())return e[++t]},canUndo:n,canRedo:r}}();r.add(e);var a=function(e){t.set(e)},o=function(e){return{blob:e,url:URL.createObjectURL(e)}},i=function(e){URL.revokeObjectURL(e.url)},s=function(){n.get().each(i),n.set(b.none())},c=function(e){var t=o(e);a(t);var n,s=r.add(t).removed;return n=s,Ck.each(n,i),t.url};return{getBlobState:function(){return t.get()},setBlobState:a,addBlobState:c,getTempState:function(){return n.get().fold(function(){return t.get()},function(e){return e})},updateTempState:function(e){var t=o(e);return s(),n.set(b.some(t)),t.url},addTempState:function(e){var t=o(e);return n.set(b.some(t)),t.url},applyTempState:function(e){return n.get().fold(function(){},function(t){c(t.blob),e()})},destroyTempState:s,undo:function(){var e=r.undo();return a(e),e.url},redo:function(){var e=r.redo();return a(e),e.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},IS=function(e,n){var r=DS(e.currentState),a=function(e){var t=r.getHistoryStates();m.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),Rr(e,pS.formActionEvent,{name:pS.saveState(),value:t.undoEnabled})},o=function(e){return e.toBlob()},i=function(e){Rr(e,pS.formActionEvent,{name:pS.disable(),value:{}})},s=function(e){p.getApplyButton(e).each(function(e){Fv.enable(e)}),Rr(e,pS.formActionEvent,{name:pS.enable(),value:{}})},c=function(e,t){return i(e),f.updateSrc(e,t)},l=function(e,t,n,r,l){return i(e),function(e){return e_(e)}(t).then(n).then(o).then(r).then(function(t){return c(e,t).then(function(t){return a(e),l(),s(e),t})}).catch(function(t){return console.log(t),s(e),t})},u=function(e,t,n){var a=r.getBlobState().blob;l(e,a,t,function(e){return r.updateTempState(e)},n)},d=function(e){var t=r.getBlobState().url;return r.destroyTempState(),a(e),t},f=SS(e.currentState.url),m=function(e){var t=Kp(CS("Undo","undo",!0,function(e){Rr(e,uS.undo(),{direction:1})},e)),n=Kp(CS("Redo","redo",!0,function(e){Rr(e,uS.redo(),{direction:1})},e));return{container:uy.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[t.asSpec(),n.asSpec(),CS("Zoom in","zoom-in",!1,function(e){Rr(e,uS.zoom(),{direction:1})},e),CS("Zoom out","zoom-out",!1,function(e){Rr(e,uS.zoom(),{direction:-1})},e)]}),updateButtonUndoStates:function(e,r,a){t.getOpt(e).each(function(e){NS(e,r)}),n.getOpt(e).each(function(e){NS(e,a)})}}}(n),p=hS(f,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[p.memContainer.asSpec(),f.memContainer.asSpec(),m.container],behaviours:Ys([Nu.config({store:{mode:"manual",getValue:function(){return r.getBlobState()}}}),Qm("image-tools-events",[jr(uS.undo(),function(e,t){var n=r.undo();c(e,n).then(function(t){s(e),a(e)})}),jr(uS.redo(),function(e,t){var n=r.redo();c(e,n).then(function(t){s(e),a(e)})}),jr(uS.zoom(),function(e,t){var n=t.event.direction;f.zoom(e,n)}),jr(uS.back(),function(e,t){!function(e){var t=d(e);c(e,t).then(function(t){s(e)})}(e),(0,t.event.swap)(),f.hideCrop()}),jr(uS.apply(),function(e,t){r.applyTempState(function(){d(e),(0,t.event.swap)()})}),jr(uS.transform(),function(e,n){return u(e,n.event.transform,t)}),jr(uS.tempTransform(),function(e,n){return function(e,n){var a=r.getTempState().blob;l(e,a,n,function(e){return r.addTempState(e)},t)}(e,n.event.transform)}),jr(uS.transformApply(),function(e,t){return function(e,t,n){var a=r.getBlobState().blob;l(e,a,t,function(t){var n=r.addBlobState(t);return d(e),n},n)}(e,t.event.transform,t.event.swap)}),jr(uS.swap(),function(e,t){!function(e){m.updateButtonUndoStates(e,!1,!1)}(e);var n=t.event.transform,r=t.event.swap;n.fold(function(){r()},function(t){u(e,t,r)})})]),yk()])}},MS=function(e){return!Ie(e,"items")},OS=function(e,t,n,r){return $(n,function(n){return MS(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===r,onAction:function(){Nu.setValue(e,n.value),Rr(e,_y,{name:t}),tp.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function(){return OS(e,t,n.items,r)}}})},AS=function(e,t){return re(e,function(e){return MS(e)?Ld(e.value===t,e):AS(e.items,t)})},LS=Md({name:"HtmlSelect",configFields:[Rt("options"),Tu("selectBehaviours",[tp,Nu]),Qt("selectClasses",[]),Qt("selectAttributes",{}),jt("data")],factory:function(e,t){var n=$(e.options,function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}}),r=e.data.map(function(e){return qe("initialValue",e)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Iu(e.selectBehaviours,[tp.config({}),Nu.config({store:d({mode:"manual",getValue:function(e){return Yo(e.element)},setValue:function(t,n){q(e.options,function(e){return e.value===n}).isSome()&&Go(t.element,n)}},r)})])}}}),ES=function(e,t){var n=e.label.map(function(e){return ky(e,t)}),a=[Fv.config({disabled:function(){return e.disabled||t.isDisabled()}}),pg(),jm.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:function(e){return zr(e,Ty),b.some(!0)}}),Qm("textfield-change",[jr(rr(),function(t,n){Rr(t,_y,{name:e.name})}),jr(fr(),function(t,n){Rr(t,_y,{name:e.name})})]),gy.config({})],o=e.validation.map(function(e){return nw.config({getRoot:function(e){return da(e.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var n=Nu.getValue(t),r=e.validator(n);return Wy(!0===r?ie.value(n):ie.error(r))},validateOnLoad:e.validateOnLoad}})}).toArray(),i=e.placeholder.fold(r({}),function(e){return{placeholder:t.translate(e)}}),s=e.inputMode.fold(r({}),function(e){return{inputmode:e}}),c=d(d({},i),s),l=py.parts.field({tag:!0===e.multiline?"textarea":"input",inputAttributes:c,inputClasses:[e.classname],inputBehaviours:Ys(Y([a,o])),selectOnFocus:!1,factory:Ry}),u=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),f=[Fv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){py.getField(e).each(Fv.disable)},onEnabled:function(e){py.getField(e).each(Fv.enable)}}),pg()];return yy(n,l,u,f)},zS=Object.freeze({__proto__:null,events:function(e,t){var n=e.stream.streams.setup(e,t);return Pr([jr(e.event,n),Jr(function(){return t.cancel()})].concat(e.cancelEvent.map(function(e){return[jr(e,function(){return t.cancel()})]}).getOr([])))}}),RS=function(e){var t=sn(null);return to({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})},VS=Object.freeze({__proto__:null,throttle:RS,init:function(e){return e.stream.streams.state(e)}}),BS=[Vt("stream",Nt("mode",{throttle:[Rt("delay"),Qt("stopEvent",!0),is("streams",{setup:function(e,t){var n=e.stream,r=nh(e.onStream,n.delay);return t.setTimer(r),function(e,t){r.throttle(e,t),n.stopEvent&&t.stop()}},state:RS})]})),Qt("event","input"),jt("cancelEvent"),as("onStream")],$S=Ks({fields:BS,name:"streaming",active:zS,state:VS}),US=function(e,t,n){var r=Nu.getValue(n);Nu.setValue(t,r),FS(t)},PS=function(e,t){var n=e.element,r=Yo(n),a=n.dom;"number"!==Ta(n,"type")&&t(a,r)},FS=function(e){PS(e,function(e,t){return e.setSelectionRange(t.length,t.length)})},HS=function(e,t,n){if(e.selectsOver){var r=Nu.getValue(t),a=e.getDisplayText(r),o=Nu.getValue(n);return 0===e.getDisplayText(o).indexOf(a)?b.some(function(){US(0,t,n),function(e,t){PS(e,function(e,n){return e.setSelectionRange(t,n.length)})}(t,a.length)}):b.none()}return b.none()},jS=r("alloy.typeahead.itemexecute"),qS=r([jt("lazySink"),Rt("fetch"),Qt("minChars",5),Qt("responseTime",1e3),ns("onOpen"),Qt("getHotspot",b.some),Qt("getAnchorOverrides",r({})),Qt("layouts",b.none()),Qt("eventOrder",{}),an("model",{},[Qt("getDisplayText",function(e){return void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value}),Qt("selectsOver",!0),Qt("populateFromBrowse",!0)]),ns("onSetValue"),rs("onExecute"),ns("onItemExecute"),Qt("inputClasses",[]),Qt("inputAttributes",{}),Qt("inputStyles",{}),Qt("matchWidth",!0),Qt("useMinWidth",!1),Qt("dismissOnBlur",!0),es(["openClass"]),jt("initialData"),Tu("typeaheadBehaviours",[tp,Nu,$S,jm,mp,ow]),on("previewing",function(){return sn(!0)})].concat(Ly()).concat(gw())),WS=r([nd({schema:[Zi()],name:"menu",overrides:function(e){return{fakeFocus:!0,onHighlight:function(t,n){e.previewing.get()?t.getSystem().getByUid(e.uid).each(function(r){HS(e.model,r,n).fold(function(){return Gd.dehighlight(t,n)},function(e){return e()})}):t.getSystem().getByUid(e.uid).each(function(t){e.model.populateFromBrowse&&US(e.model,t,n)}),e.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(e.uid).toOptional().map(function(e){return Rr(e,jS(),{item:n}),!0})},onHover:function(t,n){e.previewing.set(!1),t.getSystem().getByUid(e.uid).each(function(t){e.model.populateFromBrowse&&US(e.model,t,n)})}}}})]),YS=Od({name:"Typeahead",configFields:qS(),partFields:WS(),factory:function(e,n,r,a){var o=function(n,r,o){e.previewing.set(!1);var i=ow.getCoupled(n,"sandbox");iu.isOpen(i)?Vd.getCurrent(i).each(function(e){Gd.getHighlighted(e).fold(function(){o(e)},function(){Ur(i,e.element,"keydown",r)})}):lw(e,s(n),n,i,a,function(e){Vd.getCurrent(e).each(o)},$y.HighlightFirst).get(t)},i=Ey(e),s=function(e){return function(t){return t.map(function(t){var n=Te(t.menus),r=G(n,function(e){return F(e.items,function(e){return"item"===e.type})});return Nu.getState(e).update($(r,function(e){return e.data})),t})}},c=[tp.config({}),Nu.config({onSetValue:e.onSetValue,store:d({mode:"dataset",getDataKey:function(e){return Yo(e.element)},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(t,n){Go(t.element,e.model.getDisplayText(n))}},e.initialData.map(function(e){return qe("initialValue",e)}).getOr({}))}),$S.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:function(n,r){var o=ow.getCoupled(n,"sandbox");if(tp.isFocused(n)&&Yo(n.element).length>=e.minChars){var i=Vd.getCurrent(o).bind(function(e){return Gd.getHighlighted(e).map(Nu.getValue)});e.previewing.set(!0),lw(e,s(n),n,o,a,function(t){Vd.getCurrent(o).each(function(t){i.fold(function(){e.model.selectsOver&&Gd.highlightFirst(t)},function(e){Gd.highlightBy(t,function(t){return Nu.getValue(t).value===e.value}),Gd.getHighlighted(t).orThunk(function(){return Gd.highlightFirst(t),b.none()})})})},$y.HighlightFirst).get(t)}},cancelEvent:yr()}),jm.config({mode:"special",onDown:function(e,t){return o(e,t,Gd.highlightFirst),b.some(!0)},onEscape:function(e){var t=ow.getCoupled(e,"sandbox");return iu.isOpen(t)?(iu.close(t),b.some(!0)):b.none()},onUp:function(e,t){return o(e,t,Gd.highlightLast),b.some(!0)},onEnter:function(t){var n=ow.getCoupled(t,"sandbox"),r=iu.isOpen(n);if(r&&!e.previewing.get())return Vd.getCurrent(n).bind(function(e){return Gd.getHighlighted(e)}).map(function(e){return Rr(t,jS(),{item:e}),!0});var a=Nu.getValue(t);return zr(t,yr()),e.onExecute(n,t,a),r&&iu.close(n),b.some(!0)}}),mp.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),ow.config({others:{sandbox:function(t){return hw(e,t,{onOpen:function(){return mp.on(t)},onClose:function(){return mp.off(t)}})}}}),Qm("typeaheadevents",[ea(function(n){var r=t;dw(e,s(n),n,a,r,$y.HighlightFirst).get(t)}),jr(jS(),function(t,n){var r=ow.getCoupled(t,"sandbox");US(e.model,t,n.event.item),zr(t,yr()),e.onItemExecute(t,r,n.event.item,Nu.getValue(t)),iu.close(r),FS(t)})].concat(e.dismissOnBlur?[jr(dr(),function(e){var t=ow.getCoupled(e,"sandbox");rc(t.element).isNone()&&iu.close(t)})]:[]))];return{uid:e.uid,dom:zy(Ee(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:d(d({},i),Iu(e.typeaheadBehaviours,c)),eventOrder:e.eventOrder}}}),GS=function(e){return d(d({},e),{toCached:function(){return GS(e.toCached())},bindFuture:function(t){return GS(e.bind(function(e){return e.fold(function(e){return Wy(ie.error(e))},function(e){return t(e)})}))},bindResult:function(t){return GS(e.map(function(e){return e.bind(t)}))},mapResult:function(t){return GS(e.map(function(e){return e.map(t)}))},mapError:function(t){return GS(e.map(function(e){return e.mapError(t)}))},foldResult:function(t,n){return e.map(function(e){return e.fold(t,n)})},withTimeout:function(t,n){return GS(qy(function(r){var a=!1,o=setTimeout(function(){a=!0,r(ie.error(n()))},t);e.get(function(e){a||(clearTimeout(o),r(e))})}))}})},KS=function(e){return GS(qy(e))},QS=KS,XS={type:"separator"},JS=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:function(){}}},ZS=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:function(){}}},eC=function(e,t){return function(e){return $(e,JS)}(function(e,t){return F(t,function(t){return t.type===e})}(e,t))},tC=function(e,t){var n=e.toLowerCase();return F(t,function(e){var t=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return vn(t.toLowerCase(),n)||vn(e.value.toLowerCase(),n)})},nC=function(e,t,n){var r=Nu.getValue(t),a=void 0!==r.meta.text?r.meta.text:r.value;return n.getLinkInformation().fold(function(){return[]},function(t){var r,o=tC(a,function(e){return $(e,function(e){return ZS(e,e)})}(n.getHistory(e)));return"file"===e?(r=[o,tC(a,function(e){return eC("header",e.targets)}(t)),tC(a,Y([function(e){return b.from(e.anchorTop).map(function(e){return ZS("<top>",e)}).toArray()}(t),function(e){return eC("anchor",e.targets)}(t),function(e){return b.from(e.anchorBottom).map(function(e){return ZS("<bottom>",e)}).toArray()}(t)]))],j(r,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(XS,t)},[])):o})},rC=Va("aria-invalid"),aC=function(e,n,r){var a,o,i,s,c,l=n.shared.providers,u=function(t){var n=Nu.getValue(t);r.addToHistory(n.value,e.filetype)},f=py.parts.field({factory:YS,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":rC,type:"url"},minChars:0,responseTime:0,fetch:function(t){var a=nC(e.filetype,t,r),o=H_(a,$h.BUBBLE_TO_SANDBOX,n,!1);return Wy(o)},getHotspot:function(e){return y.getOpt(e)},onSetValue:function(e,n){e.hasConfigured(nw)&&nw.run(e).get(t)},typeaheadBehaviours:Ys(Y([r.getValidationHandler().map(function(t){return nw.config({getRoot:function(e){return da(e.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(e,t){p.getOpt(e).each(function(e){Na(e.element,"title",l.translate(t))})}},validator:{validate:function(n){var r=Nu.getValue(n);return QS(function(n){t({type:e.filetype,url:r.value},function(e){if("invalid"===e.status){var t=ie.error(e.message);n(t)}else{var r=ie.value(e.message);n(r)}})})},validateOnLoad:!1}})}).toArray(),[Fv.config({disabled:function(){return e.disabled||l.isDisabled()}}),gy.config({}),Qm("urlinput-events",Y(["file"===e.filetype?[jr(rr(),function(t){Rr(t,_y,{name:e.name})})]:[],[jr(ar(),function(t){Rr(t,_y,{name:e.name}),u(t)}),jr(fr(),function(t){Rr(t,_y,{name:e.name}),u(t)})]]))]])),eventOrder:(a={},a[rr()]=["streaming","urlinput-events","invalidating"],a),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:n.shared.getSink,parts:{menu:Kh(0,0,"normal")},onExecute:function(e,t,n){Rr(t,Ty,{})},onItemExecute:function(t,n,r,a){u(t),Rr(t,_y,{name:e.name})}}),m=e.label.map(function(e){return ky(e,l)}),p=Kp((o="invalid",i=b.some(rC),void 0===(s="warning")&&(s=o),void 0===c&&(c=o),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+o],innerHtml:Xp(s,l.icons),attributes:d({title:l.translate(c),"aria-live":"polite"},i.fold(function(){return{}},function(e){return{id:e}}))}})),h=Kp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[p.asSpec()]}),v=r.getUrlPicker(e.filetype),g=Va("browser.url.event"),y=Kp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[f,h.asSpec()],behaviours:Ys([Fv.config({disabled:function(){return e.disabled||l.isDisabled()}})])}),w=Kp(X_({name:e.name,icon:b.some("browse"),text:e.label.getOr(""),disabled:e.disabled,primary:!1,borderless:!0},function(e){return zr(e,g)},l,[],["tox-browse-url"]));return py.sketch({dom:xy([]),components:m.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Y([[y.asSpec()],v.map(function(){return w.asSpec()}).toArray()])}]),fieldBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||l.isDisabled()},onDisabled:function(e){py.getField(e).each(Fv.disable),w.getOpt(e).each(Fv.disable)},onEnabled:function(e){py.getField(e).each(Fv.enable),w.getOpt(e).each(Fv.enable)}}),pg(),Qm("url-input-events",[jr(g,function(t){Vd.getCurrent(t).each(function(n){var r=Nu.getValue(n),a=d({fieldname:e.name},r);v.each(function(r){r(a).get(function(r){Nu.setValue(n,r),Rr(t,_y,{name:e.name})})})})})])])})},oC=function(e){return function(t,n,r){return De(n,"name").fold(function(){return e(n,r)},function(a){return t.field(a,e(n,r))})}},iC={bar:oC(function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$(e.items,t.interpreter)}}(e,t.shared)}),collection:oC(function(e,t){return Ay(e,t.shared.providers)}),alertbanner:oC(function(e,t){return function(e,t){return uy.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Xp(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:function(t){Rr(t,Ny,{name:"alert-banner",value:e.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})}(e,t.shared.providers)}),input:oC(function(e,t){return function(e,t){return ES({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:b.none(),maximized:e.maximized},t)}(e,t.shared.providers)}),textarea:oC(function(e,t){return function(e,t){return ES({name:e.name,multiline:!0,label:e.label,inputMode:b.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:b.none(),maximized:e.maximized},t)}(e,t.shared.providers)}),label:oC(function(e,t){return function(e,t){var n={dom:{tag:"label",innerHtml:t.providers.translate(e.label),classes:["tox-label"]}},r=$(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(r),behaviours:Ys([yk(),Km.config({}),Ok(b.none()),jm.config({mode:"acyclic"})])}}(e,t.shared)}),iframe:function(e){return function(t,n,r){var a=Ee(n,{source:"dynamic"});return oC(e)(t,a,r)}}(function(e,t){return Fk(e,t.shared.providers)}),button:oC(function(e,t){return eS(e,t.shared.providers)}),checkbox:oC(function(e,t){return function(e,t){var n=Nu.config({store:{mode:"manual",getValue:function(e){return e.element.dom.checked},setValue:function(e,t){e.element.dom.checked=t}}}),r=function(e){return e.element.dom.click(),b.some(!0)},o=py.parts.field({factory:{sketch:a},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ys([yk(),Fv.config({disabled:function(){return e.disabled||t.isDisabled()}}),gy.config({}),tp.config({}),n,jm.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),Qm("checkbox-events",[jr(ar(),function(t,n){Rr(t,_y,{name:e.name})})])])}),i=py.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(e.label)},behaviours:Ys([xw.config({})])}),s=function(e){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e],innerHtml:Xp("checked"===e?"selected":"unselected",t.icons)}}},c=Kp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[s("checked"),s("unchecked")]});return py.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[o,c.asSpec(),i],fieldBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(e){py.getField(e).each(Fv.disable)},onEnabled:function(e){py.getField(e).each(Fv.enable)}}),pg()])})}(e,t.shared.providers)}),colorinput:oC(function(e,t){return Cw(e,t.shared,t.colorinput)}),colorpicker:oC(function(e){var t=function(e){return"tox-"+e},n=bk(_k,t),r=Kp(n.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(e){Rr(e,Ny,{name:"hex-valid",value:!0})},onInvalidHex:function(e){Rr(e,Ny,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:Ys([Nu.config({store:{mode:"manual",getValue:function(e){var t=r.get(e);return Vd.getCurrent(t).bind(function(e){return Nu.getValue(e).hex}).map(function(e){return"#"+e}).getOr("")},setValue:function(e,t){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),a=r.get(e);Vd.getCurrent(a).fold(function(){console.log("Can not find form")},function(e){Nu.setValue(e,{hex:b.from(n[1]).getOr("")}),fk.getField(e,"hex").each(function(e){zr(e,rr())})})}}}),yk()])}}),dropzone:oC(function(e,t){return Lk(e,t.shared.providers)}),grid:oC(function(e,t){return function(e,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:$(e.items,t.interpreter)}}(e,t.shared)}),listbox:oC(function(e,n){return function(e,n){var a=n.shared.providers,o=ee(e.items).filter(MS),i=e.label.map(function(e){return ky(e,a)}),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[py.parts.field({dom:{},factory:{sketch:function(a){return V_({uid:a.uid,text:o.map(function(e){return e.text}),icon:b.none(),tooltip:e.label,role:b.none(),fetch:function(t,r){var a=OS(t,e.name,e.items,Nu.getValue(t));r(H_(a,$h.CLOSE_ON_EXECUTE,n,!1))},onSetup:r(t),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[gy.config({}),Nu.config({store:{mode:"manual",initialValue:o.map(function(e){return e.value}).getOr(""),getValue:function(e){return Ta(e.element,"data-value")},setValue:function(t,n){AS(e.items,n).each(function(e){Na(t.element,"data-value",e.value),Rr(t,z_,{text:e.text})})}}})]},"tox-listbox",n.shared)}}})]};return py.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Y([i.toArray(),[s]]),fieldBehaviours:Ys([Fv.config({disabled:r(e.disabled),onDisabled:function(e){py.getField(e).each(Fv.disable)},onEnabled:function(e){py.getField(e).each(Fv.enable)}})])})}(e,n)}),selectbox:oC(function(e,t){return function(e,t){var n=$(e.items,function(e){return{text:t.translate(e.text),value:e.value}}),r=e.label.map(function(e){return ky(e,t)}),a=py.parts.field({dom:{},selectAttributes:{size:e.size},options:n,factory:LS,selectBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()}}),gy.config({}),Qm("selectbox-change",[jr(ar(),function(t,n){Rr(t,_y,{name:e.name})})])])}),o=e.size>1?b.none():b.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:Xp("chevron-down",t.icons)}}),i={dom:{tag:"div",classes:["tox-selectfield"]},components:Y([[a],o.toArray()])};return py.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Y([r.toArray(),[i]]),fieldBehaviours:Ys([Fv.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(e){py.getField(e).each(Fv.disable)},onEnabled:function(e){py.getField(e).each(Fv.enable)}}),pg()])})}(e,t.shared.providers)}),sizeinput:oC(function(e,t){return lS(e,t.shared.providers)}),urlinput:oC(function(e,t){return aC(e,t,t.urlinput)}),customeditor:oC(function(e){var t=sn(b.none()),n=Kp({dom:{tag:e.tag}}),r=sn(b.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ys([Qm("custom-editor-events",[Xr(function(a){n.getOpt(a).each(function(n){(!function(e){return Object.prototype.hasOwnProperty.call(e,"init")}(e)?Sk.load(e.scriptId,e.scriptUrl).then(function(t){return t(n.element.dom,e.settings)}):e.init(n.element.dom)).then(function(e){r.get().each(function(t){e.setValue(t)}),r.set(b.none()),t.set(b.some(e))})})})]),Nu.config({store:{mode:"manual",getValue:function(){return t.get().fold(function(){return r.get().getOr("")},function(e){return e.getValue()})},setValue:function(e,n){t.get().fold(function(){r.set(b.some(n))},function(e){return e.setValue(n)})}}}),yk()]),components:[n.asSpec()]}}),htmlpanel:oC(function(e){return"presentation"===e.presets?uy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):uy.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Ys([gy.config({}),tp.config({})])})}),imagetools:oC(function(e,t){return IS(e,t.shared.providers)}),table:oC(function(e,t){return function(e,t){var n,r,a=function(e){return{dom:{tag:"th",innerHtml:t.translate(e)}}},o=function(e){return{dom:{tag:"td",innerHtml:t.translate(e)}}},i=function(e){return{dom:{tag:"tr"},components:$(e,o)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(r=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$(r,a)}]}),(n=e.cells,{dom:{tag:"tbody"},components:$(n,i)})],behaviours:Ys([gy.config({}),tp.config({})])}}(e,t.shared.providers)}),panel:oC(function(e,t){return function(e,t){return{dom:{tag:"div",classes:e.classes},components:$(e.items,t.shared.interpreter)}}(e,t)})},sC={field:function(e,t){return t}},cC=function(e,t,n){var r=Ee(n,{shared:{interpreter:function(t){return lC(e,t,r)}}});return lC(e,t,r)},lC=function(e,t,n){return De(iC,t.type).fold(function(){return console.error('Unknown factory type "'+t.type+'", defaulting to container: ',t),t},function(r){return r(e,t,n)})},uC={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dC=function(e,t,n){var r=Nc(-12,12,uC),a={maxHeightFunction:xc()};return function(){return n()?{anchor:"node",root:Io(e()),node:b.from(e()),bubble:r,layouts:{onRtl:function(){return[jp]},onLtr:function(){return[Hp]}},overrides:a}:{anchor:"hotspot",hotspot:t(),bubble:r,layouts:{onRtl:function(){return[Ns]},onLtr:function(){return[Ts]}},overrides:a}}},fC=function(e,t,n){return function(){return n()?{anchor:"node",root:Io(e()),node:b.from(e()),layouts:{onRtl:function(){return[qp]},onLtr:function(){return[qp]}}}:{anchor:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[Os]},onLtr:function(){return[Os]}}}}},mC=function(e,t,n){var r=sg(e),a=function(){return ln.fromDom(e.getBody())},o=function(){return ln.fromDom(e.getContentAreaContainer())},i=function(){return r||!n()};return{inlineDialog:dC(o,t,i),banner:fC(o,t,i),cursor:function(e,t){return function(){return{anchor:"selection",root:t(),getSelection:function(){var t=e.selection.getRng();return b.some(Pc.range(ln.fromDom(t.startContainer),t.startOffset,ln.fromDom(t.endContainer),t.endOffset))}}}}(e,a),node:function(e){return function(t){return{anchor:"node",root:e(),node:t}}}(a)}},pC=function(e){return{colorPicker:function(e){return function(t,n){xb(e)(t,n)}}(e),hasCustomColors:function(e){return function(){return db(e)}}(e),getColors:function(e){return function(){return fb(e)}}(e),getColorCols:function(e){return function(){return pb(e)}}(e)}},hC=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],vC=function(e){return j(e,function(e,t){if(Ie(t,"items")){var n=vC(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(function(e){return Ie(e,"inline")}(t)||function(e){return Ie(e,"block")}(t)||function(e){return Ie(e,"selector")}(t)){var r="custom-"+(x(t.name)?t.name:t.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:r,format:t}]),formats:e.formats.concat([{title:t.title,format:r,icon:t.icon}])}}return d(d({},e),{formats:e.formats.concat(t)})},{customFormats:[],formats:[]})},gC=function(e){return function(e){return b.from(e.getParam("style_formats")).filter(_)}(e).map(function(t){var n=function(e,t){var n=vC(t),r=function(t){U(t,function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})};return e.formatter?r(n.customFormats):e.on("init",function(){r(n.customFormats)}),n.formats}(e,t);return function(e){return e.getParam("style_formats_merge",!1,"boolean")}(e)?hC.concat(n):n}).getOr(hC)},bC=function(e,t,n){var r={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return Ee(e,r)},yC=function(e,t,n,r){var a=function(t){return $(t,function(t){var o=ye(t);if(Me(t,"items")){var i=a(t.items);return Ee(function(e){return Ee(e,{type:"submenu"})}(t),{getStyleItems:function(){return i}})}return Me(t,"format")?function(e){return bC(e,n,r)}(t):1===o.length&&z(o,"title")?Ee(t,{type:"separator"}):function(t){var a=x(t.name)?t.name:Va(t.title),o="custom-"+a,i={type:"formatter",format:o,isSelected:n(o),getStylePreview:r(o)},s=Ee(t,i);return e.formatter.register(a,s),s}(t)})};return a(t)},wC=Ck.trim,xC=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},kC=xC("true"),_C=xC("false"),SC=function(e,t,n,r,a){return{type:e,title:t,url:n,level:r,attach:a}},CC=function(e){return e.innerText||e.textContent},NC=function(e){return function(e){return e&&"A"===e.nodeName&&void 0!==(e.id||e.name)}(e)&&DC(e)},TC=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},DC=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return kC(e)}return!1}(e)&&!_C(e)},IC=function(e){return TC(e)&&DC(e)},MC=function(e){var t=function(e){return e.id?e.id:Va("h")}(e);return SC("header",CC(e),"#"+t,function(e){return TC(e)?parseInt(e.nodeName.substr(1),10):0}(e),function(){e.id=t})},OC=function(e){var n=e.id||e.name,r=CC(e);return SC("anchor",r||"#"+n,"#"+n,0,t)},AC=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,$(Zc(ln.fromDom(n),t),function(e){return e.dom})},LC=function(e){return wC(e.title).length>0},EC=function(e){var t=AC(e);return F(function(e){return $(F(e,IC),MC)}(t).concat(function(e){return $(F(e,NC),OC)}(t)),LC)},zC="tinymce-url-history",RC=function(e){return x(e)&&/^https?/.test(e)},VC=function(e){return k(e)&&Ne(e,function(e){return!(_(t=e)&&t.length<=5&&K(t,RC));var t}).isNone()},BC=function(){var e,t=ib.getItem(zC);if(null===t)return{};try{e=JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+zC+" was not valid JSON",e),{};throw e}return VC(e)?e:(console.log("Local storage "+zC+" was not valid format",e),{})},$C=function(e){var t=BC();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:[]},UC=function(e,t){if(RC(e)){var n=BC(),r=Object.prototype.hasOwnProperty.call(n,t)?n[t]:[],a=F(r,function(t){return t!==e});n[t]=[e].concat(a).slice(0,5),function(e){if(!VC(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));ib.setItem(zC,JSON.stringify(e))}(n)}},PC=function(e){return!!e},FC=function(e){return ke(Ck.makeMap(e,/[, ]/),PC)},HC=function(e){return b.from(function(e){return e.getParam("file_picker_callback")}(e)).filter(T)},jC=function(e,t){var n=function(e){var t=b.some(function(e){return e.getParam("file_picker_types")}(e)).filter(PC),n=b.some(function(e){return e.getParam("file_browser_callback_types")}(e)).filter(PC),r=t.or(n).map(FC);return HC(e).fold(function(){return!1},function(e){return r.fold(function(){return!0},function(e){return ye(e).length>0&&e})})}(e);return S(n)?n?HC(e):b.none():n[t]?HC(e):b.none()},qC=function(e){return b.from(e).filter(x).getOrUndefined()},WC=function(e){return{getHistory:$C,addToHistory:UC,getLinkInformation:function(){return function(e){return function(e){return!1===e.getParam("typeahead_urls")}(e)?b.none():b.some({targets:EC(e.getBody()),anchorTop:qC(function(e){return e.getParam("anchor_top","#top")}(e)),anchorBottom:qC(function(e){return e.getParam("anchor_bottom","#bottom")}(e))})}(e)},getValidationHandler:function(){return function(e){return b.from(function(e){var t=e.getParam("file_picker_validator_handler",void 0,"function");return void 0===t?e.getParam("filepicker_validator_handler",void 0,"function"):t}(e))}(e)},getUrlPicker:function(t){return function(e,t){return jC(e,t).map(function(n){return function(r){return qy(function(a){var o=d({filetype:t,fieldname:r.fieldname},b.from(r.meta).getOr({}));n.call(e,function(e,t){if(!x(e))throw new Error("Expected value to be string");if(void 0!==t&&!k(t))throw new Error("Expected meta to be a object");a({value:e,meta:t})},r.value,o)})}})}(e,t)}}},YC=function(e,t,n){var r=sn(!1),a=function(e){var t=sn(og(e)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===t.get()},getDockingMode:t.get,setDockingMode:t.set}}(t),o={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:Dv.translate,isDisabled:function(){return t.mode.isReadOnly()||t.ui.isDisabled()},getSetting:t.getParam.bind(t)},interpreter:function(e){return function(e,t){return lC(sC,e,t)}(e,o)},anchors:mC(t,n,a.isPositionedAtTop),header:a,getSink:function(){return ie.value(e)}},urlinput:WC(t),styleselect:function(e){var t=function(t){return function(){return e.formatter.match(t)}},n=function(t){return function(){var n=e.formatter.get(t);return void 0!==n?b.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):b.none()}},r=function(e){var t=e.items;return void 0!==t&&t.length>0?G(t,r):[e.format]},a=sn([]),o=sn([]),i=sn([]),s=sn([]),c=sn(!1);e.on("PreInit",function(i){var s=gC(e),c=yC(e,s,t,n);a.set(c),o.set(G(c,r))}),e.on("addStyleModifications",function(a){var o=yC(e,a.items,t,n);i.set(o),c.set(a.replace),s.set(G(o,r))});return{getData:function(){var e=c.get()?[]:a.get(),t=i.get();return e.concat(t)},getFlattenedKeys:function(){var e=c.get()?[]:o.get(),t=s.get();return e.concat(t)}}}(t),colorinput:pC(t),dialog:function(e){return{isDraggableModal:function(e){return function(){return function(e){return e.getParam("draggable_modal",!1,"boolean")}(e)}}(e)}}(t),isContextMenuOpen:function(){return r.get()},setContextMenuState:function(e){return r.set(e)}};return o},GC=r(function(e,t){!function(e,t){var n=hi.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Bo(e,"max-width",n+"px")}(e,Math.floor(t))}),KC=r([Rt("dom"),Qt("shell",!0),Tu("toolbarBehaviours",[Km])]),QC=r([rd({name:"groups",overrides:function(){return{behaviours:Ys([Km.config({})])}}})]),XC=Od({name:"Toolbar",configFields:KC(),partFields:QC(),factory:function(e,t,n,r){var a=function(t){return e.shell?b.some(t):hd(t,e,"groups")},o=e.shell?{behaviours:[Km.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:Iu(e.toolbarBehaviours,o.behaviours),apis:{setGroups:function(e,t){a(e).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){Km.set(e,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),JC=function(e,t,n){return{within:e,extra:t,withinWidth:n}},ZC=function(e,t,n){var a,o=(a=function(e,t){var r=n(e);return b.some({element:e,start:t,finish:t+r,width:r})},j(e,function(e,t){return a(t,e.len).fold(r(e),function(t){return{len:t.finish,list:e.list.concat([t])}})},{len:0,list:[]}).list),i=F(o,function(e){return e.finish<=t}),s=H(i,function(e,t){return e+t.width},0);return{within:i,extra:o.slice(i.length),withinWidth:s}},eN=function(e){return $(e,function(e){return e.element})},tN=function(e,t,n,r){var a=function(e,t,n){var r=ZC(t,e,n);return 0===r.extra.length?b.some(r):b.none()}(e,t,n).getOrThunk(function(){return ZC(t,e-n(r),n)}),o=a.within,i=a.extra,s=a.withinWidth;return 1===i.length&&i[0].width<=n(r)?function(e,t,n){var r=eN(e.concat(t));return JC(r,[],n)}(o,i,s):i.length>=1?function(e,t,n,r){var a=eN(e).concat([n]);return JC(a,eN(t),r)}(o,i,r,s):function(e,t,n){return JC(eN(e),[],n)}(o,0,s)},nN=function(e,t){var n=$(t,function(e){return oi(e)});XC.setGroups(e,n)},rN=function(e,t,n){var r=vd(e,t,"primary"),a=ow.getCoupled(e,"overflowGroup");Bo(r.element,"visibility","hidden");var o=t.builtGroups.get().concat([a]),i=re(o,function(e){return rc(e.element).bind(function(t){return e.getSystem().getByDom(t).toOptional()})});n([]),nN(r,o);var s=vi(r.element),c=tN(s,t.builtGroups.get(),function(e){return vi(e.element)},a);0===c.extra.length?(Km.remove(r,a),n([])):(nN(r,c.within),n(c.extra)),qo(r.element,"visibility"),Wo(r.element),i.each(tp.focus)},aN=r([Tu("splitToolbarBehaviours",[ow]),on("builtGroups",function(){return sn([])})]),oN=r([es(["overflowToggledClass"]),Gt("getOverflowBounds"),Rt("lazySink"),on("overflowGroups",function(){return sn([])})].concat(aN())),iN=r([td({factory:XC,schema:KC(),name:"primary"}),nd({schema:KC(),name:"overflow"}),nd({name:"overflow-button"}),nd({name:"overflow-group"})]),sN=r([es(["toggledClass"]),Rt("lazySink"),Ut("fetch"),Gt("getBounds"),Kt("fireDismissalEventInstead",[Qt("event",Tr())]),Lc()]),cN=r([nd({name:"button",overrides:function(e){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ys([mp.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),nd({factory:XC,schema:KC(),name:"toolbar",overrides:function(e){return{toolbarBehaviours:Ys([jm.config({mode:"cyclic",onEscape:function(t){return hd(t,e,"button").each(tp.focus),b.none()}})])}}})]),lN=function(e,t){var n=ow.getCoupled(e,"toolbarSandbox");iu.isOpen(n)?iu.close(n):iu.open(n,t.toolbar())},uN=function(e,t,n,r){var a=n.getBounds.map(function(e){return e()}),o=n.lazySink(e).getOrDie();Bl.positionWithinBounds(o,{anchor:"hotspot",hotspot:e,layouts:r,overrides:{maxWidthFunction:GC()}},t,a)},dN=function(e,t,n,r,a){XC.setGroups(t,a),uN(e,t,n,r),mp.on(e)},fN=Od({name:"FloatingToolbarButton",factory:function(e,t,n,r){return d(d({},Gp.sketch(d(d({},r.button()),{action:function(e){lN(e,r)},buttonBehaviours:Ou({dump:r.button().buttonBehaviours},[ow.config({others:{toolbarSandbox:function(t){return function(e,t,n){var r=Ui();return{dom:{tag:"div",attributes:{id:r.id}},behaviours:Ys([jm.config({mode:"special",onEscape:function(e){return iu.close(e),b.some(!0)}}),iu.config({onOpen:function(a,o){n.fetch().get(function(a){dN(e,o,n,t.layouts,a),r.link(e.element),jm.focusIn(o)})},onClose:function(){mp.off(e),tp.focus(e),r.unlink(e.element)},isPartOf:function(t,n,r){return Fi(n,r)||Fi(e,r)},getAttachPoint:function(){return n.lazySink(e).getOrDie()}}),Zs.config({channels:d(d({},du(d({isExtraPart:c},n.fireDismissalEventInstead.map(function(e){return{fireEventInstead:{event:e.event}}}).getOr({})))),mu({doReposition:function(){iu.getState(ow.getCoupled(e,"toolbarSandbox")).each(function(r){uN(e,r,n,t.layouts)})}}))})])}}(t,n,e)}}})])}))),{apis:{setGroups:function(t,r){iu.getState(ow.getCoupled(t,"toolbarSandbox")).each(function(a){dN(t,a,e,n.layouts,r)})},reposition:function(t){iu.getState(ow.getCoupled(t,"toolbarSandbox")).each(function(r){uN(t,r,e,n.layouts)})},toggle:function(e){lN(e,r)},getToolbar:function(e){return iu.getState(ow.getCoupled(e,"toolbarSandbox"))},isOpen:function(e){return iu.isOpen(ow.getCoupled(e,"toolbarSandbox"))}}})},configFields:sN(),partFields:cN(),apis:{setGroups:function(e,t,n){e.setGroups(t,n)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},getToolbar:function(e,t){return e.getToolbar(t)},isOpen:function(e,t){return e.isOpen(t)}}}),mN=r([Rt("items"),es(["itemSelector"]),Tu("tgroupBehaviours",[jm])]),pN=r([ad({name:"items",unit:"item"})]),hN=Od({name:"ToolbarGroup",configFields:mN(),partFields:pN(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.tgroupBehaviours,[jm.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),vN=function(e){return $(e,function(e){return oi(e)})},gN=function(e,t,n){rN(e,n,function(r){n.overflowGroups.set(r),t.getOpt(e).each(function(e){fN.setGroups(e,vN(r))})})},bN=Od({name:"SplitFloatingToolbar",configFields:oN(),partFields:iN(),factory:function(e,t,n,r){var a=Kp(fN.sketch({fetch:function(){return qy(function(t){t(vN(e.overflowGroups.get()))})},layouts:{onLtr:function(){return[Ts,Ns]},onRtl:function(){return[Ns,Ts]},onBottomLtr:function(){return[Is,Ds]},onBottomRtl:function(){return[Ds,Is]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.splitToolbarBehaviours,[ow.config({others:{overflowGroup:function(){return hN.sketch(d(d({},r["overflow-group"]()),{items:[a.asSpec()]}))}}})]),apis:{setGroups:function(t,n){e.builtGroups.set($(n,t.getSystem().build)),gN(t,a,e)},refresh:function(t){return gN(t,a,e)},toggle:function(e){a.getOpt(e).each(function(e){fN.toggle(e)})},isOpen:function(e){return a.getOpt(e).map(fN.isOpen).getOr(!1)},reposition:function(e){a.getOpt(e).each(function(e){fN.reposition(e)})},getOverflow:function(e){return a.getOpt(e).bind(fN.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)},getOverflow:function(e,t){return e.getOverflow(t)}}}),yN=function(e,t){return t.getAnimationRoot.fold(function(){return e.element},function(t){return t(e)})},wN=function(e){return e.dimension.property},xN=function(e,t){return e.dimension.getDimension(t)},kN=function(e,t){var n=yN(e,t);_o(n,[t.shrinkingClass,t.growingClass])},_N=function(e,t){wo(e.element,t.openClass),bo(e.element,t.closedClass),Bo(e.element,wN(t),"0px"),Wo(e.element)},SN=function(e,t){wo(e.element,t.closedClass),bo(e.element,t.openClass),qo(e.element,wN(t))},CN=function(e,t,n,r){n.setCollapsed(),Bo(e.element,wN(t),xN(t,e.element)),Wo(e.element),kN(e,t),_N(e,t),t.onStartShrink(e),t.onShrunk(e)},NN=function(e,t,n,r){var a=r.getOrThunk(function(){return xN(t,e.element)});n.setCollapsed(),Bo(e.element,wN(t),a),Wo(e.element);var o=yN(e,t);wo(o,t.growingClass),bo(o,t.shrinkingClass),_N(e,t),t.onStartShrink(e)},TN=function(e,t,n){var r=xN(t,e.element);("0px"===r?CN:NN)(e,t,n,b.some(r))},DN=function(e,t,n){var r=yN(e,t),a=xo(r,t.shrinkingClass),o=xN(t,e.element);SN(e,t);var i=xN(t,e.element);(a?function(){Bo(e.element,wN(t),o),Wo(e.element)}:function(){_N(e,t)})(),wo(r,t.shrinkingClass),bo(r,t.growingClass),SN(e,t),Bo(e.element,wN(t),i),n.setExpanded(),t.onStartGrow(e)},IN=function(e,t,n){var r=yN(e,t);return!0===xo(r,t.growingClass)},MN=function(e,t,n){var r=yN(e,t);return!0===xo(r,t.shrinkingClass)},ON=Object.freeze({__proto__:null,refresh:function(e,t,n){if(n.isExpanded()){qo(e.element,wN(t));var r=xN(t,e.element);Bo(e.element,wN(t),r)}},grow:function(e,t,n){n.isExpanded()||DN(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&TN(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&CN(e,t,n,b.none())},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:IN,isShrinking:MN,isTransitioning:function(e,t,n){return!0===IN(e,t)||!0===MN(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?TN:DN)(e,t,n)},disableTransitions:kN}),AN=Object.freeze({__proto__:null,exhibit:function(e,t,n){var r=t.expanded;return ro(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:qe(t.dimension.property,"0px")})},events:function(e,t){return Pr([Qr(ir(),function(n,r){r.event.raw.propertyName===e.dimension.property&&(kN(n,e),t.isExpanded()&&qo(n.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(n))})])}}),LN=[Rt("closedClass"),Rt("openClass"),Rt("shrinkingClass"),Rt("growingClass"),jt("getAnimationRoot"),ns("onShrunk"),ns("onStartShrink"),ns("onGrown"),ns("onStartGrow"),Qt("expanded",!1),Vt("dimension",Nt("property",{width:[is("property","width"),is("getDimension",function(e){return vi(e)+"px"})],height:[is("property","height"),is("getDimension",function(e){return ci(e)+"px"})]}))],EN=Ks({fields:LN,name:"sliding",active:AN,apis:ON,state:Object.freeze({__proto__:null,init:function(e){var t=sn(e.expanded);return to({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:o(t.set,!1),setExpanded:o(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),zN=r([es(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ns("onOpened"),ns("onClosed")].concat(aN())),RN=r([td({factory:XC,schema:KC(),name:"primary"}),td({factory:XC,schema:KC(),name:"overflow",overrides:function(e){return{toolbarBehaviours:Ys([EN.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:function(t){hd(t,e,"overflow-button").each(function(e){mp.off(e),tp.focus(e)}),e.onClosed(t)},onGrown:function(t){jm.focusIn(t),e.onOpened(t)},onStartGrow:function(t){hd(t,e,"overflow-button").each(mp.on)}}),jm.config({mode:"acyclic",onEscape:function(t){return hd(t,e,"overflow-button").each(tp.focus),b.some(!0)}})])}}}),nd({name:"overflow-button",overrides:function(e){return{buttonBehaviours:Ys([mp.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),nd({name:"overflow-group"})]),VN=function(e,t){hd(e,t,"overflow-button").bind(function(){return hd(e,t,"overflow")}).each(function(n){BN(e,t),EN.toggleGrow(n)})},BN=function(e,t){hd(e,t,"overflow").each(function(n){rN(e,t,function(e){var t=$(e,function(e){return oi(e)});XC.setGroups(n,t)}),hd(e,t,"overflow-button").each(function(e){EN.hasGrown(n)&&mp.on(e)}),EN.refresh(n)})},$N=Od({name:"SplitSlidingToolbar",configFields:zN(),partFields:RN(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.splitToolbarBehaviours,[ow.config({others:{overflowGroup:function(e){return hN.sketch(d(d({},r["overflow-group"]()),{items:[Gp.sketch(d(d({},r["overflow-button"]()),{action:function(t){zr(e,"alloy.toolbar.toggle")}}))]}))}}}),Qm("toolbar-toggle-events",[jr("alloy.toolbar.toggle",function(t){VN(t,e)})])]),apis:{setGroups:function(t,n){!function(t,n){var r=$(n,t.getSystem().build);e.builtGroups.set(r)}(t,n),BN(t,e)},refresh:function(t){return BN(t,e)},toggle:function(t){return VN(t,e)},isOpen:function(t){return function(e,t){return hd(e,t,"overflow").map(EN.hasGrown).getOr(!1)}(t,e)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)}}}),UN=r(Va("toolbar-height-change")),PN=function(e){var t=e.title.fold(function(){return{}},function(e){return{attributes:{title:e}}});return{dom:d({tag:"div",classes:["tox-toolbar__group"]},t),components:[hN.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Ys([gy.config({}),tp.config({})])}},FN=function(e){return hN.sketch(PN(e))},HN=function(e,t){var n=Xr(function(t){var n=$(e.initGroups,FN);XC.setGroups(t,n)});return Ys([bg(e.providers.isDisabled),pg(),jm.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),Qm("toolbar-events",[n])])},jN=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":PN({title:b.none(),items:[]}),"overflow-button":G_({name:"more",icon:b.some("more-drawer"),disabled:!1,tooltip:b.some("More..."),primary:!1,borderless:!1},b.none(),e.providers)},splitToolbarBehaviours:HN(e,t)}},qN=function(e){var t=jN(e),n=bN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return bN.sketch(d(d({},t),{lazySink:e.getSink,getOverflowBounds:function(){var t=e.moreDrawerData.lazyHeader().element,n=Mi(t),r=la(t),a=Mi(r),o=Math.max(r.dom.scrollHeight,a.height);return Di(n.x+4,a.y,n.width-8,o)},parts:d(d({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},WN=function(e){var t=$N.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=$N.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=jN(e);return $N.sketch(d(d({},r),{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(e){e.getSystem().broadcastOn([UN()],{type:"opened"})},onClosed:function(e){e.getSystem().broadcastOn([UN()],{type:"closed"})}}))},YN=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return XC.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Bh.scrolling?["tox-toolbar--scrolling"]:[])},components:[XC.parts.groups({})],toolbarBehaviours:HN(e,t)})},GN=it([Bt("type"),Vt("items",ct([gt([Bt("name"),Ht("items",Mt)]),Mt]))].concat(_h)),KN=[Yt("text"),Yt("tooltip"),Yt("icon"),Ut("fetch"),nn("onSetup",function(){return t})],QN=it(m([Bt("type")],KN)),XN=function(e){return xt("menubutton",QN,e)},JN=it([Bt("type"),Yt("tooltip"),Yt("icon"),Yt("text"),Gt("select"),Ut("fetch"),nn("onSetup",function(){return t}),en("presets","normal",["normal","color","listpreview"]),Qt("columns",1),Ut("onAction"),Ut("onItemAction")]),ZN=Object.freeze({__proto__:null,events:function(e,t){var n=function(n,r){e.updateState.each(function(e){var a=e(n,r);t.set(a)}),e.renderComponents.each(function(e){var a=e(r,t.get()),o=$(a,n.getSystem().build);Fl(n,o)})};return Pr([jr(mr(),function(t,r){var a=r;if(!a.universal){var o=e.channel;z(a.channels,o)&&n(t,a.data)}}),Xr(function(t,r){e.initialData.each(function(e){n(t,e)})})])}}),eT=Object.freeze({__proto__:null,getState:function(e,t,n){return n}}),tT=[Rt("channel"),jt("renderComponents"),jt("updateState"),jt("initialData")],nT=Ks({fields:tT,name:"reflecting",active:ZN,apis:eT,state:Object.freeze({__proto__:null,init:function(){var e=sn(b.none());return{readState:function(){return e.get().fold(function(){return"none"},function(e){return e})},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(b.none())}}}})}),rT=r([Rt("toggleClass"),Rt("fetch"),as("onExecute"),Qt("getHotspot",b.some),Qt("getAnchorOverrides",r({})),Lc(),as("onItemExecute"),jt("lazySink"),Rt("dom"),ns("onOpen"),Tu("splitDropdownBehaviours",[ow,jm,tp]),Qt("matchWidth",!1),Qt("useMinWidth",!1),Qt("eventOrder",{}),jt("role")].concat(gw())),aT=td({factory:Gp,schema:[Rt("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Ys([tp.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Vr)},buttonBehaviours:Ys([mp.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),oT=td({factory:Gp,schema:[Rt("dom")],name:"button",defaults:function(){return{buttonBehaviours:Ys([tp.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(function(n){e.onExecute(n,t)})}}}}),iT=r([aT,oT,rd({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Rt("text")],name:"aria-descriptor"}),nd({schema:[Zi()],name:"menu",defaults:function(e){return{onExecute:function(t,n){t.getSystem().getByUid(e.uid).each(function(r){e.onItemExecute(r,t,n)})}}}}),sw()]),sT=Od({name:"SplitDropdown",configFields:rT(),partFields:iT(),factory:function(e,n,r,a){var o,i=function(e){Vd.getCurrent(e).each(function(e){Gd.highlightFirst(e),jm.focusIn(e)})},s=function(n){dw(e,function(e){return e},n,a,i,$y.HighlightFirst).get(t)},c=function(t){var n=vd(t,e,"button");return Vr(n),b.some(!0)},l=d(d({},Pr([Xr(function(t,n){hd(t,e,"aria-descriptor").each(function(e){var n=Va("aria");Na(e.element,"id",n),Na(t.element,"aria-describedby",n)})})])),hp(b.some(s))),u={repositionMenus:function(e){mp.isOn(e)&&vw(e)}};return{uid:e.uid,dom:e.dom,components:n,apis:u,eventOrder:d(d({},e.eventOrder),(o={},o[pr()]=["disabling","toggling","alloy.base.behaviour"],o)),events:l,behaviours:Iu(e.splitDropdownBehaviours,[ow.config({others:{sandbox:function(t){var n=vd(t,e,"arrow");return hw(e,t,{onOpen:function(){mp.on(n),mp.on(t)},onClose:function(){mp.off(n),mp.off(t)}})}}}),jm.config({mode:"special",onSpace:c,onEnter:c,onDown:function(e){return s(e),b.some(!0)}}),tp.config({}),mp.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(e,t){return e.repositionMenus(t)}}}),cT=function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},lT=function(e){return{setActive:function(t){mp.set(e,t)},isActive:function(){return mp.isOn(e)},isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)}}},uT=function(e,t){return e.map(function(e){return{"aria-label":t.translate(e),title:t.translate(e)}}).getOr({})},dT=Va("focus-button"),fT=["checklist","ordered-list"],mT=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],pT=function(e,t,n,r,a,o){var i,s=function(e){return Dv.isRtl()&&z(fT,e)?e+"-rtl":e},c=Dv.isRtl()&&e.exists(function(e){return z(mT,e)});return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:uT(n,o)},components:_g([e.map(function(e){return M_(s(e),o.icons)}),t.map(function(e){return A_(e,"tox-tbtn",o)})]),eventOrder:(i={},i[Gn()]=["focusing","alloy.base.behaviour","common-button-display-events"],i),buttonBehaviours:Ys([bg(o.isDisabled),pg(),Qm("common-button-display-events",[jr(Gn(),function(e,t){t.event.prevent(),zr(e,dT)})])].concat(r.map(function(n){return nT.config({channel:n,initialData:{icon:e,text:t},renderComponents:function(e,t){return _g([e.icon.map(function(e){return M_(s(e),o.icons)}),e.text.map(function(e){return A_(e,"tox-tbtn",o)})])}})}).toArray()).concat(a.getOr([])))}},hT=function(e,n,r){var a,o=sn(t),i=pT(e.icon,e.text,e.tooltip,b.none(),b.none(),r);return Gp.sketch({dom:i.dom,components:i.components,eventOrder:E_,buttonBehaviours:Ys([Qm("toolbar-button-events",[(a={onAction:e.onAction,getApi:n.getApi},ea(function(e,t){yg(a,e)(function(t){Rr(e,L_,{buttonApi:t}),a.onAction(t)})})),wg(n,o),xg(n,o)]),bg(function(){return e.disabled||r.isDisabled()}),pg()].concat(n.toolbarButtonBehaviours))})},vT=function(e,t,n){return hT(e,{toolbarButtonBehaviours:[].concat(n.length>0?[Qm("toolbarButtonWith",n)]:[]),getApi:cT,onSetup:e.onSetup},t)},gT=function(e,t,n){return Ee(hT(e,{toolbarButtonBehaviours:[Km.config({}),mp.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[Qm("toolbarToggleButtonWith",n)]:[]),getApi:lT,onSetup:e.onSetup},t))},bT=function(e,n){var r,a=Va("channel-update-split-dropdown-display"),o=function(e){return{isDisabled:function(){return Fv.isDisabled(e)},setDisabled:function(t){return Fv.set(e,t)},setIconFill:function(t,n){Bi(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(e){Na(e,"fill",n)})},setIconStroke:function(t,n){Bi(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(e){Na(e,"stroke",n)})},setActive:function(t){Na(e.element,"aria-pressed",t),Bi(e.element,"span").each(function(n){e.getSystem().getByDom(n).each(function(e){return mp.set(e,t)})})},isActive:function(){return Bi(e.element,"span").exists(function(t){return e.getSystem().getByDom(t).exists(mp.isOn)})}}},i=sn(t),s={getApi:o,onSetup:e.onSetup};return sT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:d({"aria-pressed":!1},uT(e.tooltip,n.providers))},onExecute:function(t){e.onAction(o(t))},onItemExecute:function(e,t,n){},splitDropdownBehaviours:Ys([gg(n.providers.isDisabled),pg(),Qm("split-dropdown-events",[jr(dT,tp.focus),wg(s,i),xg(s,i)]),xw.config({})]),eventOrder:(r={},r[Cr()]=["alloy.base.behaviour","split-dropdown-events"],r),toggleClass:"tox-tbtn--enabled",lazySink:n.getSink,fetch:function(e,t,n){return function(r){return qy(function(e){return t.fetch(e)}).map(function(a){return b.from(Pb(Ee(kb(Va("menu-value"),a,function(n){t.onItemAction(e(r),n)},t.columns,t.presets,$h.CLOSE_ON_EXECUTE,t.select.getOr(function(){return!1}),n),{movement:Sb(t.columns,t.presets),menuBehaviours:bv("auto"!==t.columns?[]:[Xr(function(e,n){vv(e,4,qh(t.presets)).each(function(t){var n=t.numRows,r=t.numColumns;jm.setGridSize(e,n,r)})})])})))})}}(o,e,n.providers),parts:{menu:Kh(0,e.columns,e.presets)},components:[sT.parts.button(pT(e.icon,e.text,b.none(),b.some(a),b.some([mp.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),n.providers)),sT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Xp("chevron-down",n.providers.icons)},buttonBehaviours:Ys([gg(n.providers.isDisabled),pg()])}),sT.parts["aria-descriptor"]({text:n.providers.translate("To open the popup, press Shift+Enter")})]})},yT=function(e,t){return jr(L_,function(n,r){var a=function(e){return{hide:function(){return zr(e,br())},getValue:function(){return Nu.getValue(e)}}}(e.get(n));t.onAction(a,r.event.buttonApi)})},wT=function(e,t,n){var r={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?function(e,t,n){var r=t.original,a=(r.primary,f(r,["primary"])),o=kt(Dh(d(d({},a),{type:"togglebutton",onAction:function(){}})));return gT(o,n.backstage.shared.providers,[yT(e,t)])}(e,t,r):function(e,t,n){var r=t.original,a=(r.primary,f(r,["primary"])),o=kt(Ch(d(d({},a),{type:"button",onAction:function(){}})));return vT(o,n.backstage.shared.providers,[yT(e,t)])}(e,t,r)},xT=function(e,t){var n=e.label.fold(function(){return{}},function(e){return{"aria-label":e}}),r=Kp(Ry.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Ys([jm.config({mode:"special",onEnter:function(e){return a.findPrimary(e).map(function(e){return Vr(e),!0})},onLeft:function(e,t){return t.cut(),b.none()},onRight:function(e,t){return t.cut(),b.none()}})])})),a=function(e,t,n){var r=$(t,function(t){return Kp(wT(e,t,n))});return{asSpecs:function(){return $(r,function(e){return e.asSpec()})},findPrimary:function(e){return re(t,function(t,n){return t.primary?b.from(r[n]).bind(function(t){return t.getOpt(e)}).filter(i(Fv.isDisabled)):b.none()})}}}(r,e.commands,t);return[{title:b.none(),items:[r.asSpec()]},{title:b.none(),items:a.asSpecs()}]},kT=xT,_T=function(e,t){var n=Si(window),r=Ii(ln.fromDom(e.getContentAreaContainer())),a=Qv(e)||Xv(e)||Zv(e),o=function(e,t){var n=Math.max(t.x,e.x),r=e.right-n,a=t.width-(n-t.x);return{x:n,width:Math.min(r,a)}}(r,n),i=o.x,s=o.width;if(e.inline&&!a)return Di(i,n.y,s,n.height);var c=function(e,t,n,r){var a=ln.fromDom(e.getContainer()),o=Bi(a,".tox-editor-header").getOr(a),i=Ii(o),s=i.y>=t.bottom,c=r&&!s;if(e.inline&&c)return{y:Math.max(i.bottom,n.y),bottom:n.bottom};if(e.inline&&!c)return{y:n.y,bottom:Math.min(i.y,n.bottom)};var l=Ii(a);return c?{y:Math.max(i.bottom,n.y),bottom:Math.min(l.bottom,n.bottom)}:{y:Math.max(l.y,n.y),bottom:Math.min(i.y,n.bottom)}}(e,r,n,t.header.isPositionedAtTop()),l=c.y,u=c.bottom;return Di(i,l,s,u-l)},ST=function(e,t){var n=F(t,function(t){return t.predicate(e.dom)}),r=P(n,function(e){return"contexttoolbar"===e.type});return{contextToolbars:r.pass,contextForms:r.fail}},CT=function(e,t,n){var r=ST(e,t);if(r.contextForms.length>0)return b.some({elem:e,toolbars:[r.contextForms[0]]});var a=ST(e,n);if(a.contextForms.length>0)return b.some({elem:e,toolbars:[a.contextForms[0]]});if(r.contextToolbars.length>0||a.contextToolbars.length>0){var o=function(e){if(e.length<=1)return e;var t=function(t){return R(e,function(e){return e.position===t})},n=function(t){return F(e,function(e){return e.position===t})},r=t("selection"),a=t("node");if(r||a){if(a&&r){var o=n("node"),i=$(n("selection"),function(e){return d(d({},e),{position:"node"})});return o.concat(i)}return n(r?"selection":"node")}return n("line")}(r.contextToolbars.concat(a.contextToolbars));return b.some({elem:e,toolbars:o})}return b.none()},NT=function(e,t,n){return e(t)?b.none():Bn(t,function(e){var t=ST(e,n.inNodeScope),r=t.contextToolbars,a=t.contextForms,o=a.length>0?a:function(e){if(e.length<=1)return e;var t=function(t){return q(e,function(e){return e.position===t})};return t("selection").orThunk(function(){return t("node")}).orThunk(function(){return t("line")}).map(function(e){return e.position}).fold(function(){return[]},function(t){return F(e,function(e){return e.position===t})})}(r);return o.length>0?b.some({elem:e,toolbars:o}):b.none()},e)},TT=function(e,t){var n={},r=[],a=[],o={},i={},s=function(e,s){var c=kt(xt("ContextForm",zh,s));n[e]=c,c.launch.map(function(n){o["form:"+e]=d(d({},s.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){t(c)}})}),"editor"===c.scope?a.push(c):r.push(c),i[e]=c},c=function(e,t){var n;(n=t,xt("ContextToolbar",Rh,n)).each(function(n){"editor"===t.scope?a.push(n):r.push(n),i[e]=n})},l=ye(e);return U(l,function(t){var n=e[t];"contextform"===n.type?s(t,n):"contexttoolbar"===n.type&&c(t,n)}),{forms:n,inNodeScope:r,inEditorScope:a,lookupTable:i,formNavigators:o}},DT=Va("forward-slide"),IT=Va("backward-slide"),MT=Va("change-slide-event"),OT=function(e,t,n){var r=n.dataset,a="basic"===r.type?function(){return $(r.data,function(e){return bC(e,n.isSelectedFor,n.getPreviewFor)})}:r.getData;return{items:function(e,t,n){var r=function(e,r,o,i){var s=t.shared.providers.translate(e.title);if("separator"===e.type)return b.some({type:"separator",text:s});if("submenu"===e.type){var c=G(e.getStyleItems(),function(e){return a(e,r,i)});return 0===r&&c.length<=0?b.none():b.some({type:"nestedmenuitem",text:s,disabled:c.length<=0,getSubmenuItems:function(){return G(e.getStyleItems(),function(e){return a(e,r,i)})}})}return b.some(d({type:"togglemenuitem",text:s,icon:e.icon,active:e.isSelected(i),disabled:o,onAction:n.onAction(e)},e.getStylePreview().fold(function(){return{}},function(e){return{meta:{style:e}}})))},a=function(e,t,a){var o="formatter"===e.type&&n.isInvalid(e);return 0===t?o?[]:r(e,t,!1,a).toArray():r(e,t,o,a).toArray()},o=function(e){var t=n.getCurrentValue(),r=n.shouldHide?0:1;return G(e,function(e){return a(e,r,t)})};return{validateItems:o,getFetch:function(e,t){return function(n,r){var a=t(),i=o(a);r(H_(i,$h.CLOSE_ON_EXECUTE,e,!1))}}}}(0,t,n),getStyleItems:a}},AT=function(e,n,r){var a=OT(0,n,r),o=a.items,i=a.getStyleItems;return V_({text:r.icon.isSome()?b.none():b.some(""),icon:r.icon,tooltip:b.from(r.tooltip),role:b.none(),fetch:o.getFetch(n,i),onSetup:function(n){return r.setInitialValue.each(function(e){return e(n.getComponent())}),r.nodeChangeHandler.map(function(t){var r=t(n.getComponent());return e.on("NodeChange",r),function(){e.off("NodeChange",r)}}).getOr(t)},getApi:function(e){return{getComponent:function(){return e}}},columns:1,presets:"normal",classes:r.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",n.shared)};!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(TS||(TS={}));var LT,ET,zT,RT=function(e,t,n,r){return{type:"basic",data:function(e){return $(e,function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{title:t,format:n}})}(function(e,t){return t===TS.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")}(e.getParam(t,n,"string"),r))}},VT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],BT=function(e){var t=function(t){var n=q(VT,function(t){return e.formatter.match(t.format)}).fold(function(){return"left"},function(e){return e.title.toLowerCase()});Rr(t,R_,{icon:"align-"+n})},n=b.some(function(e){return function(){return t(e)}}),r=b.some(function(e){return t(e)}),a={type:"basic",data:VT};return{tooltip:"Align",icon:b.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:b.none,getPreviewFor:function(e){return function(){return b.none()}},onAction:function(t){return function(){return q(VT,function(e){return e.format===t.format}).each(function(t){return e.execCommand(t.command)})}},setInitialValue:r,nodeChangeHandler:n,dataset:a,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},$T=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],UT=function(e){var t=e.split(/\s*,\s*/);return $(t,function(e){return e.replace(/^['"]+|['"]+$/g,"")})},PT=function(e){var t=function(){var t=function(e){return e?UT(e)[0]:""},n=e.queryCommandValue("FontName"),r=o.data,a=n?n.toLowerCase():"";return{matchOpt:q(r,function(e){var n=e.format;return n.toLowerCase()===a||t(n).toLowerCase()===t(a).toLowerCase()}).orThunk(function(){return 0===(e=a).indexOf("-apple-system")&&(t=UT(e.toLowerCase()),K($T,function(e){return t.indexOf(e.toLowerCase())>-1}))?b.from({title:"System Font",format:a}):b.none();var e,t}),font:n}},n=function(e){var n=t(),r=n.matchOpt,a=n.font,o=r.fold(function(){return a},function(e){return e.title});Rr(e,z_,{text:o})},r=b.some(function(e){return function(){return n(e)}}),a=b.some(function(e){return n(e)}),o=RT(e,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",TS.SemiColon);return{tooltip:"Fonts",icon:b.none(),isSelectedFor:function(e){return function(t){return t.exists(function(t){return t.format===e})}},getCurrentValue:function(){return t().matchOpt},getPreviewFor:function(e){return function(){return b.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}})}},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontName",!1,t.format)})}},setInitialValue:a,nodeChangeHandler:r,dataset:o,shouldHide:!1,isInvalid:function(){return!1}}},FT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},HT={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},jT=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":De(HT,e).getOr(e)},qT=function(e){var t=function(){var t=b.none(),n=s.data,r=e.queryCommandValue("FontSize");if(r)for(var a=function(e){var a=jT(r,e),o=function(e){return De(FT,e).getOr("")}(a);t=q(n,function(e){return e.format===r||e.format===a||e.format===o})},o=3;t.isNone()&&o>=0;o--)a(o);return{matchOpt:t,size:r}},n=r(b.none),a=function(e){var n=t(),r=n.matchOpt,a=n.size,o=r.fold(function(){return a},function(e){return e.title});Rr(e,z_,{text:o})},o=b.some(function(e){return function(){return a(e)}}),i=b.some(function(e){return a(e)}),s=RT(e,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",TS.Space);return{tooltip:"Font sizes",icon:b.none(),isSelectedFor:function(e){return function(t){return t.exists(function(t){return t.format===e})}},getPreviewFor:n,getCurrentValue:function(){return t().matchOpt},onAction:function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontSize",!1,t.format)})}},setInitialValue:i,nodeChangeHandler:o,dataset:s,shouldHide:!1,isInvalid:function(){return!1}}},WT=function(e,t){var n=t(),r=$(n,function(e){return e.format});return b.from(e.formatter.closest(r)).bind(function(e){return q(n,function(t){return t.format===e})}).orThunk(function(){return Ld(e.formatter.match("p"),{title:"Paragraph",format:"p"})})},YT=function(e){var t=sn(b.none()),n=function(){return t.get().each(e)};return{clear:function(){n(),t.set(b.none())},isSet:function(){return t.get().isSome()},set:function(e){n(),t.set(b.some(e))}}},GT=function(){return YT(function(e){return e.destroy()})},KT=function(){return YT(function(e){return e.unbind()})},QT=function(e,t){return function(n){var r=KT(),a=function(){n.setActive(e.formatter.match(t));var a=e.formatter.formatChanged(t,n.setActive);r.set(a)};return e.initialized?a():e.on("init",a),r.clear}},XT=function(e){return function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})}}},JT=function(e){var t=function(t){var n=WT(e,function(){return a.data}).fold(function(){return"Paragraph"},function(e){return e.title});Rr(t,z_,{text:n})},n=b.some(function(e){return function(){return t(e)}}),r=b.some(function(e){return t(e)}),a=RT(e,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",TS.SemiColon);return{tooltip:"Blocks",icon:b.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:b.none,getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return b.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))})}},onAction:XT(e),setInitialValue:r,nodeChangeHandler:n,dataset:a,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}},ZT=function(e,t){var n=function(t){var n=function(e){var t=e.items;return void 0!==t&&t.length>0?G(t,n):[{title:e.title,format:e.format}]},r=G(gC(e),n),a=WT(e,function(){return r}).fold(function(){return"Paragraph"},function(e){return e.title});Rr(t,z_,{text:a})},r=b.some(function(e){return function(){return n(e)}}),a=b.some(function(e){return n(e)});return{tooltip:"Formats",icon:b.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:b.none,getPreviewFor:function(t){return function(){var n=e.formatter.get(t);return void 0!==n?b.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):b.none()}},onAction:XT(e),setInitialValue:a,nodeChangeHandler:r,shouldHide:e.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!e.formatter.canApply(t.format)},dataset:t}},eD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],tD=function(e,t){return function(n,r,a){var o=e(n).mapError(function(e){return St(e)}).getOrDie();return t(o,r,a)}},nD={button:tD(Ch,function(e,t){return n=e,r=t.backstage.shared.providers,vT(n,r,[]);var n,r}),togglebutton:tD(Dh,function(e,t){return n=e,r=t.backstage.shared.providers,gT(n,r,[]);var n,r}),menubutton:tD(XN,function(e,t){return q_(e,"tox-tbtn",t.backstage,b.none())}),splitbutton:tD(function(e){return xt("SplitButton",JN,e)},function(e,t){return bT(e,t.backstage.shared)}),grouptoolbarbutton:tD(function(e){return xt("GroupToolbarButton",GN,e)},function(e,t,n){var r,a=n.ui.registry.getAll().buttons,o=((r={})[Oc]=t.backstage.shared.header.isPositionedAtTop()?Hi.TopToBottom:Hi.BottomToTop,r);switch(tg(n)){case Bh.floating:return function(e,t,n,r){var a=t.shared;return fN.sketch({lazySink:a.getSink,fetch:function(){return qy(function(t){t($(n(e.items),FN))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:pT(e.icon,e.text,e.tooltip,b.none(),b.none(),a.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})}(e,t.backstage,function(e){return iD(n,{buttons:a,toolbar:e,allowToolbarGroups:!1},t,b.none())},o);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(e,t){return function(e,t){var n=d({type:"advanced"},t.styleselect);return AT(e,t,ZT(e,n))}(e,t.backstage)},fontsizeSelectButton:function(e,t){return function(e,t){return AT(e,t,qT(e))}(e,t.backstage)},fontSelectButton:function(e,t){return function(e,t){return AT(e,t,PT(e))}(e,t.backstage)},formatButton:function(e,t){return function(e,t){return AT(e,t,JT(e))}(e,t.backstage)},alignMenuButton:function(e,t){return function(e,t){return AT(e,t,BT(e))}(e,t.backstage)}},rD={styleselect:nD.styleSelectButton,fontsizeselect:nD.fontsizeSelectButton,fontselect:nD.fontSelectButton,formatselect:nD.formatButton,align:nD.alignMenuButton},aD=function(e){var t,n=e.toolbar,r=e.buttons;return!1===n?[]:void 0===n||!0===n?function(e){var t=$(eD,function(t){var n=F(t.items,function(t){return Ie(e,t)||Ie(rD,t)});return{name:t.name,items:n}});return F(t,function(e){return e.items.length>0})}(r):x(n)?(t=n.split("|"),$(t,function(e){return{items:e.trim().split(" ")}})):function(e){return I(e,function(e){return Ie(e,"name")&&Ie(e,"items")})}(n)?n:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},oD=function(e,t,n,r,a,o){return De(t,n.toLowerCase()).orThunk(function(){return o.bind(function(e){return re(e,function(e){return De(t,e+n.toLowerCase())})})}).fold(function(){return De(rD,n.toLowerCase()).map(function(t){return t(e,a)}).orThunk(function(){return b.none()})},function(t){return"grouptoolbarbutton"!==t.type||r?function(e,t,n){return De(nD,e.type).fold(function(){return console.error("skipping button defined by",e),b.none()},function(r){return b.some(r(e,t,n))})}(t,a,e):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),b.none())})},iD=function(e,t,n,r){var a=aD(t),o=$(a,function(a){var o=G(a.items,function(a){return 0===a.trim().length?[]:oD(e,t.buttons,a,t.allowToolbarGroups,n,r).toArray()});return{title:b.from(e.translate(a.name)),items:o}});return F(o,function(e){return e.items.length>0})},sD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},cD={maxHeightFunction:xc(),maxWidthFunction:GC()},lD={onLtr:function(){return[Ms,Os,Ds,Ns,Is,Ts,qp,Wp,Hp,Pp,jp,Fp]},onRtl:function(){return[Ms,Os,Is,Ts,Ds,Ns,qp,Wp,jp,Fp,Hp,Pp]}},uD={onLtr:function(){return[Os,Ns,Ts,Ds,Is,Ms,qp,Wp,Hp,Pp,jp,Fp]},onRtl:function(){return[Os,Ts,Ns,Is,Ds,Ms,qp,Wp,jp,Fp,Hp,Pp]}},dD=function(e,t,n,r){var a,o,i=On().deviceType.isTouch,s=ai((a={sink:n,onEscape:function(){return e.focus(),b.some(!0)}},o=sn([]),zp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){o.set([]),zp.getContent(e).each(function(e){qo(e.element,"visibility")}),wo(e.element,"tox-pop--resizing"),qo(e.element,"width")},inlineBehaviours:Ys([Qm("context-toolbar-events",[Qr(ir(),function(e,t){wo(e.element,"tox-pop--resizing"),qo(e.element,"width")}),jr(MT,function(e,t){qo(e.element,"width");var n=vi(e.element);zp.setContent(e,t.event.contents),bo(e.element,"tox-pop--resizing");var r=vi(e.element);Bo(e.element,"width",n+"px"),zp.getContent(e).each(function(n){t.event.focus.bind(function(t){return tc(t),rc(e.element)}).orThunk(function(){return jm.focusIn(n),nc()})}),Yp.setTimeout(function(){Bo(e.element,"width",r+"px")},0)}),jr(DT,function(e,t){zp.getContent(e).each(function(e){o.set(o.get().concat([{bar:e,focus:nc()}]))}),Rr(e,MT,{contents:t.event.forwardContents,focus:b.none()})}),jr(IT,function(e,t){te(o.get()).each(function(t){o.set(o.get().slice(0,o.get().length-1)),Rr(e,MT,{contents:oi(t.bar),focus:t.focus})})})]),jm.config({mode:"special",onEscape:function(e){return te(o.get()).fold(function(){return a.onEscape()},function(t){return zr(e,IT),b.some(!0)})}})]),lazySink:function(){return ie.value(a.sink)}}))),c=function(){return _T(e,r.backstage.shared)},l=function(){if(i()&&r.backstage.isContextMenuOpen())return!0;var t,n,a,o,s,l,u=(t=p.get().filter(function(e){return Lo(ln.fromDom(e))}).map(function(e){return e.getBoundingClientRect()}).getOrThunk(function(){return e.selection.getRng().getBoundingClientRect()}),n=e.inline?xi().top:Mi(ln.fromDom(e.getBody())).y,{y:t.top+n,bottom:t.bottom+n}),d=c();return a=u.y,o=u.bottom,s=d.y,l=d.bottom,!(Math.max(a,s)<=Math.min(o,l))},u=function(){zp.hide(s)},f=function(){m.get().each(function(e){var t=s.element;qo(t,"display"),l()?Bo(t,"display","none"):Bl.positionWithinBounds(n,e,s,b.some(c()))})},m=sn(b.none()),p=sn(b.none()),h=sn(null),v=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Ys([jm.config({mode:"acyclic"}),Qm("pop-dialog-wrap-events",[Xr(function(t){e.shortcuts.add("ctrl+F9","focus statusbar",function(){return jm.focusIn(t)})}),Jr(function(t){e.shortcuts.remove("ctrl+F9")})])])}},g=Re(function(){return TT(t,function(e){var t=y([e]);Rr(s,DT,{forwardContents:v(t)})})}),y=function(t){var n=e.ui.registry.getAll().buttons,a=g(),o=d(d({},n),a.formNavigators),i=tg(e)===Bh.scrolling?Bh.scrolling:Bh.default,s=Y($(t,function(t){return"contexttoolbar"===t.type?function(t,n){return iD(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},r,b.some(["form:"]))}(o,t):function(e,t){return kT(e,t)}(t,r.backstage.shared.providers)}));return YN({type:i,uid:Va("context-toolbar"),initGroups:s,onEscape:b.none,cyclicKeying:!0,providers:r.backstage.shared.providers})};e.on("contexttoolbar-show",function(t){var n=g();De(n.lookupTable,t.toolbarKey).each(function(n){x([n],t.target===e?b.none():b.some(t)),zp.getContent(s).each(jm.focusIn)})});var w=function(e,t){var n="node"===e?r.backstage.shared.anchors.node(t):r.backstage.shared.anchors.cursor();return Ee(n,function(e,t){return"line"===e?{bubble:Nc(12,0,sD),layouts:{onLtr:function(){return[As]},onRtl:function(){return[Ls]}},overrides:cD}:{bubble:Nc(0,12,sD),layouts:t?uD:lD,overrides:cD}}(e,i()))},x=function(e,t){if(_(),!i()||!r.backstage.isContextMenuOpen()){var n=y(e),a=t.map(ln.fromDom),o=w(e[0].position,a);m.set(b.some(o)),p.set(t);var u=s.element;qo(u,"display"),zp.showWithinBounds(s,o,v(n),function(){return b.some(c())}),l()&&Bo(u,"display","none")}},k=function(){e.hasFocus()&&function(e,t){var n=ln.fromDom(t.getBody()),r=function(e){return En(e,n)},a=ln.fromDom(t.selection.getNode());return function(e){return!r(e)&&!Rn(n,e)}(a)?b.none():CT(a,e.inNodeScope,e.inEditorScope).orThunk(function(){return NT(r,a,e)})}(g(),e).fold(function(){m.set(b.none()),zp.hide(s)},function(e){x(e.toolbars,b.some(e.elem.dom))})},_=function(){var e=h.get();null!==e&&(Yp.clearTimeout(e),h.set(null))},S=function(e){_(),h.set(e)};e.on("init",function(){e.on("contexttoolbar-hide",u),e.on("ScrollContent ScrollWindow longpress",f),e.on("click keyup focus SetContent ObjectResized ResizeEditor",function(){S(Yp.setEditorTimeout(e,k,0))}),e.on("focusout",function(t){Yp.setEditorTimeout(e,function(){rc(n.element).isNone()&&rc(s.element).isNone()&&(m.set(b.none()),zp.hide(s))},0)}),e.on("SwitchMode",function(){e.mode.isReadOnly()&&(m.set(b.none()),zp.hide(s))}),e.on("NodeChange",function(t){rc(s.element).fold(function(){S(Yp.setEditorTimeout(e,k,0))},function(e){})})})},fD=_d,mD=id,pD=r([Qt("shell",!1),Rt("makeItem"),Qt("setupItem",t),Mu("listBehaviours",[Km])]),hD=rd({name:"items",overrides:function(){return{behaviours:Ys([Km.config({})])}}}),vD=r([hD]),gD=Od({name:r("CustomList")(),configFields:pD(),partFields:vD(),factory:function(e,t,n,r){var a=e.shell?{behaviours:[Km.config({})],components:[]}:{behaviours:[],components:t},o=function(t){return e.shell?b.some(t):hd(t,e,"items")};return{uid:e.uid,dom:e.dom,components:a.components,behaviours:Iu(e.listBehaviours,a.behaviours),apis:{setItems:function(t,n){o(t).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(r){var a=Km.contents(r),o=n.length,i=o-a.length,s=i>0?V(i,function(){return e.makeItem()}):[],c=a.slice(o);U(c,function(e){return Km.remove(r,e)}),U(s,function(e){return Km.append(r,e)});var l=Km.contents(r);U(l,function(r,a){e.setupItem(t,r,n[a],a)})})}}}},apis:{setItems:function(e,t,n){e.setItems(t,n)}}}),bD=t,yD=c,wD=r([]),xD=Object.freeze({__proto__:null,setup:bD,isDocked:yD,getBehaviours:wD}),kD=function(e){return(Ho(e,"position").is("fixed")?b.none():fa(e)).orThunk(function(){var t=ln.fromTag("span");return da(e).bind(function(e){ba(e,t);var n=fa(t);return xa(t),n})})},_D=function(e){return kD(e).map(mi).getOrThunk(function(){return di(0,0)})},SD=Oe([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),CD=function(e,t){var n=e.element;bo(n,t.transitionClass),wo(n,t.fadeOutClass),bo(n,t.fadeInClass),t.onShow(e)},ND=function(e,t){var n=e.element;bo(n,t.transitionClass),wo(n,t.fadeInClass),bo(n,t.fadeOutClass),t.onHide(e)},TD=function(e,t,n){return K(e,function(e){switch(e){case"bottom":return function(e,t){return e.bottom<=t.bottom}(t,n);case"top":return function(e,t){return e.y>=t.y}(t,n)}})},DD=function(e,t){return t.getInitialPosition().map(function(t){return Di(t.bounds.x,t.bounds.y,vi(e),ci(e))})},ID=function(e,t,n){n.setInitialPosition(b.some({style:function(e){var t={},n=e.dom;if(So(n))for(var r=0;r<n.style.length;r++){var a=n.style.item(r);t[a]=n.style[a]}return t}(e),position:Po(e,"position")||"static",bounds:t}))},MD=function(e,t,n){return n.getInitialPosition().bind(function(r){switch(n.setInitialPosition(b.none()),r.position){case"static":return b.some(SD.static());case"absolute":var a=kD(e).map(Ii).getOrThunk(function(){return Ii(Eo())});return b.some(SD.absolute(oc("absolute",De(r.style,"left").map(function(e){return t.x-a.x}),De(r.style,"top").map(function(e){return t.y-a.y}),De(r.style,"right").map(function(e){return a.right-t.right}),De(r.style,"bottom").map(function(e){return a.bottom-t.bottom}))));default:return b.none()}})},OD=function(e,t,n){var r=e.element;return Ho(r,"position").is("fixed")?function(e,t,n){return DD(e,n).filter(function(e){return TD(n.getModes(),e,t)}).bind(function(t){return MD(e,t,n)})}(r,t,n):function(e,t,n){var r=Ii(e);if(TD(n.getModes(),r,t))return b.none();ID(e,r,n);var a=Oi(),o=r.x-a.x,i=t.y-a.y,s=a.bottom-t.bottom,c=r.y<=t.y;return b.some(SD.fixed(oc("fixed",b.some(o),c?b.some(i):b.none(),b.none(),c?b.none():b.some(s))))}(r,t,n)},AD=function(e,t){U(["left","right","top","bottom","position"],function(t){return qo(e.element,t)}),t.onUndocked(e)},LD=function(e,t,n){ic(e.element,n),("fixed"===n.position?t.onDocked:t.onUndocked)(e)},ED=function(e,t,n,r,a){void 0===a&&(a=!1),t.contextual.each(function(t){t.lazyContext(e).each(function(o){var i=function(e,t){return e.y<t.bottom&&e.bottom>t.y}(o,r);i!==n.isVisible()&&(n.setVisible(i),a&&!i?(ko(e.element,[t.fadeOutClass]),t.onHide(e)):(i?CD:ND)(e,t))})})},zD=function(e,n,r){var a=e.element;r.setDocked(!1),function(e,t){var n=e.element;return DD(n,t).bind(function(e){return MD(n,e,t)})}(e,r).each(function(r){r.fold(function(){return AD(e,n)},function(t){return LD(e,n,t)},t)}),r.setVisible(!0),n.contextual.each(function(t){_o(a,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)}),RD(e,n,r)},RD=function(e,t,n){e.getSystem().isConnected()&&function(e,t,n){var r=t.lazyViewport(e),a=n.isDocked();a&&ED(e,t,n,r),OD(e,r,n).each(function(o){n.setDocked(!a),o.fold(function(){return AD(e,t)},function(n){return LD(e,t,n)},function(a){ED(e,t,n,r,!0),LD(e,t,a)})})}(e,t,n)},VD=function(e,t,n){n.isDocked()&&zD(e,t,n)},BD=Object.freeze({__proto__:null,refresh:RD,reset:VD,isDocked:function(e,t,n){return n.isDocked()},getModes:function(e,t,n){return n.getModes()},setModes:function(e,t,n,r){return n.setModes(r)}}),$D=Object.freeze({__proto__:null,events:function(e,t){return Pr([Qr(ir(),function(n,r){e.contextual.each(function(e){xo(n.element,e.transitionClass)&&(_o(n.element,[e.transitionClass,e.fadeInClass]),(t.isVisible()?e.onShown:e.onHidden)(n)),r.stop()})}),jr(_r(),function(n,r){RD(n,e,t)}),jr(Sr(),function(n,r){VD(n,e,t)})])}}),UD=[Kt("contextual",[Bt("fadeInClass"),Bt("fadeOutClass"),Bt("transitionClass"),Ut("lazyContext"),ns("onShow"),ns("onShown"),ns("onHide"),ns("onHidden")]),nn("lazyViewport",Oi),rn("modes",["top","bottom"],Mt),ns("onDocked"),ns("onUndocked")],PD=Ks({fields:UD,name:"docking",active:$D,apis:BD,state:Object.freeze({__proto__:null,init:function(e){var t=sn(!1),n=sn(!0),r=sn(b.none()),a=sn(e.modes);return to({isDocked:t.get,setDocked:t.set,getInitialPosition:r.get,setInitialPosition:r.set,isVisible:n.get,setVisible:n.set,getModes:a.get,setModes:a.set,readState:function(){return"docked:  "+t.get()+", visible: "+n.get()+", modes: "+a.get().join(",")}})}})}),FD={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},HD=function(e){var t=e.element;da(t).each(function(n){var r="padding-"+PD.getModes(e)[0];if(PD.isDocked(e)){var a=vi(n);Bo(t,"width",a+"px"),Bo(n,r,function(e){return li(e)+(parseInt(Po(e,"margin-top"),10)||0)+(parseInt(Po(e,"margin-bottom"),10)||0)}(t)+"px")}else qo(t,"width"),qo(n,r)})},jD=function(e,t){t?(wo(e,FD.fadeOutClass),ko(e,[FD.transitionClass,FD.fadeInClass])):(wo(e,FD.fadeInClass),ko(e,[FD.fadeOutClass,FD.transitionClass]))},qD=function(e,t){var n=ln.fromDom(e.getContainer());t?(bo(n,"tox-tinymce--toolbar-sticky-on"),wo(n,"tox-tinymce--toolbar-sticky-off")):(bo(n,"tox-tinymce--toolbar-sticky-off"),wo(n,"tox-tinymce--toolbar-sticky-on"))},WD=function(e,t){var n,r=sn(b.none()),a=t.getSink,o=function(e){a().each(function(t){return e(t.element)})},i=function(t){e.inline||HD(t),qD(e,PD.isDocked(t)),t.getSystem().broadcastOn([cu()],{}),a().each(function(e){return e.getSystem().broadcastOn([cu()],{})})},s=e.inline?[]:[Zs.config({channels:(n={},n[UN()]={onReceive:HD},n)})];return m([tp.config({}),PD.config({contextual:d({lazyContext:function(t){var n,r,a=li(t.element),o=e.inline?e.getContentAreaContainer():e.getContainer(),i=Ii(ln.fromDom(o)),s=i.height-a,c=i.y+(n=t,r="top",z(PD.getModes(n),r)?0:a);return b.some(Di(i.x,c,i.width,s))},onShow:function(){o(function(e){return jD(e,!0)})},onShown:function(e){o(function(e){return _o(e,[FD.transitionClass,FD.fadeInClass])}),r.get().each(function(t){var n,a,o;n=e.element,o=sa(a=t),nc(o).filter(function(e){return!En(a,e)}).filter(function(e){return En(e,ln.fromDom(o.dom.body))||Rn(n,e)}).each(function(){return tc(a)}),r.set(b.none())})},onHide:function(e){r.set(function(e,t){return rc(e).orThunk(function(){return t().toOptional().bind(function(e){return rc(e.element)})})}(e.element,a)),o(function(e){return jD(e,!1)})},onHidden:function(){o(function(e){return _o(e,[FD.transitionClass])})}},FD),modes:[t.header.getDockingMode()],onDocked:i,onUndocked:i})],s)},YD=Object.freeze({__proto__:null,setup:function(e,t,n){e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",function(){n().each(PD.reset)}),e.on("ResizeWindow ResizeEditor",function(){n().each(HD)}),e.on("SkinLoaded",function(){n().each(function(e){PD.isDocked(e)?PD.reset(e):PD.refresh(e)})}),e.on("FullscreenStateChanged",function(){n().each(PD.reset)})),e.on("AfterScrollIntoView",function(e){n().each(function(t){PD.refresh(t);var n=t.element;Bf(n)&&function(e,t){var n=sa(t),r=n.dom.defaultView.innerHeight,a=xi(n),o=ln.fromDom(e.elm),i=Mi(o),s=ci(o),c=i.y,l=c+s,u=mi(t),d=ci(t),f=u.top,m=f+d,p=Math.abs(f-a.top)<2,h=Math.abs(m-(a.top+r))<2;if(p&&c<m)ki(a.left,c-d,n);else if(h&&l>f){var v=c-r+s+d;ki(a.left,v,n)}}(e,n)})}),e.on("PostRender",function(){qD(e,!1)})},isDocked:function(e){return e().map(PD.isDocked).getOr(!1)},getBehaviours:WD}),GD=Md({factory:function(e,t){var n={focus:jm.focusIn,setMenus:function(e,n){var r=$(n,function(e){var n={type:"menubutton",text:e.text,fetch:function(t){t(e.getItems())}},r=XN(n).mapError(function(e){return St(e)}).getOrDie();return q_(r,"tox-mbtn",t.backstage,b.some("menuitem"))});Km.set(e,r)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Ys([Km.config({}),Qm("menubar-events",[Xr(function(t){e.onSetup(t)}),jr(Jn(),function(e,t){Bi(e.element,".tox-mbtn--active").each(function(n){$i(t.event.target,".tox-mbtn").each(function(t){En(n,t)||e.getSystem().getByDom(n).each(function(n){e.getSystem().getByDom(t).each(function(e){ww.expand(e),ww.close(n),tp.focus(e)})})})})}),jr(Ir(),function(e,t){t.event.prevFocus.bind(function(t){return e.getSystem().getByDom(t).toOptional()}).each(function(n){t.event.newFocus.bind(function(t){return e.getSystem().getByDom(t).toOptional()}).each(function(e){ww.isOpen(n)&&(ww.expand(e),ww.close(n))})})})]),jm.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return e.onEscape(t),b.some(!0)}}),gy.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Rt("dom"),Rt("uid"),Rt("onEscape"),Rt("backstage"),Qt("onSetup",t)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),KD=[Tu("slotBehaviours",[])],QD=function(e){return"<alloy.field."+e+">"},XD=function(e,t){var n,r=function(t){return yd(e)},a=function(t,n){return function(r,a){return hd(r,e,a).map(function(e){return t(e,a)}).getOr(n)}},o=function(e,t){return"true"!==Ta(e.element,"aria-hidden")},i=a(o,!1),s=a(function(e,t){if(o(e)){var n=e.element;Bo(n,"display","none"),Na(n,"aria-hidden","true"),Rr(e,Mr(),{name:t,visible:!1})}}),c=(n=s,function(e,t){U(t,function(t){return n(e,t)})}),l=a(function(e,t){if(!o(e)){var n=e.element;qo(n,"display"),Ma(n,"aria-hidden"),Rr(e,Mr(),{name:t,visible:!0})}}),u={getSlotNames:r,getSlot:function(t,n){return hd(t,e,n)},isShowing:i,hideSlot:s,hideAllSlots:function(e){return c(e,r())},showSlot:l};return{uid:e.uid,dom:e.dom,components:t,behaviours:Du(e.slotBehaviours),apis:u}},JD=ke({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},function(e){return Za(e)}),ZD=d(d({},JD),{sketch:function(e){var t,n=(t=[],{slot:function(e,n){return t.push(e),ud("container",QD(e),n)},record:function(){return t}}),r=e(n),a=n.record(),o=$(a,function(e){return td({name:e,pname:QD(e)})});return Cd("container",KD,o,XD,r)}}),eI=it([Yt("icon"),Yt("tooltip"),nn("onShow",t),nn("onHide",t),nn("onSetup",function(){return t})]),tI=function(e){return{element:function(){return e.element.dom}}},nI=function(e,n){var r=$(ye(n),function(e){var t=n[e],r=kt(function(e){return xt("sidebar",eI,e)}(t));return{name:e,getApi:tI,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}});return $(r,function(n){var a=sn(t);return e.slot(n.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:bv([wg(n,a),xg(n,a),jr(Mr(),function(e,t){var n=t.event;q(r,function(e){return e.name===n.name}).each(function(t){(n.visible?t.onShow:t.onHide)(t.getApi(e))})})])})})},rI=function(e,t){Vd.getCurrent(e).each(function(e){return Km.set(e,[function(e){return ZD.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:nI(t,e),slotBehaviours:bv([Xr(function(e){return ZD.hideAllSlots(e)})])}})}(t)])})},aI=function(e){return Vd.getCurrent(e).bind(function(e){return EN.isGrowing(e)||EN.hasGrown(e)?Vd.getCurrent(e).bind(function(e){return q(ZD.getSlotNames(e),function(t){return ZD.isShowing(e,t)})}):b.none()})},oI=Va("FixSizeEvent"),iI=Va("AutoSizeEvent"),sI=function(e){var t=ln.fromHtml(e),n=ma(t),r=function(e){var t=void 0!==e.dom.attributes?e.dom.attributes:[];return j(t,function(e,t){var n;return"class"===t.name?e:d(d({},e),((n={})[t.name]=t.value,n))},{})}(t),a=function(e){return Array.prototype.slice.call(e.dom.classList,0)}(t),o=0===n.length?{}:{innerHtml:_a(t)};return d({tag:ta(t),classes:a,attributes:r},o)},cI=function(e,t,n){var r=e.element;!0===t?(Km.set(e,[function(e){return{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:sI('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:Ys([jm.config({mode:"special",onTab:function(){return b.some(!0)},onShiftTab:function(){return b.some(!0)}}),tp.config({})])}}(n)]),qo(r,"display"),Ma(r,"aria-hidden")):(Km.set(e,[]),Bo(r,"display","none"),Na(r,"aria-hidden","true"))},lI=mD.optional({factory:GD,name:"menubar",schema:[Rt("backstage")]}),uI=mD.optional({factory:{sketch:function(e){return gD.sketch({uid:e.uid,dom:e.dom,listBehaviours:Ys([jm.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return YN({type:e.type,uid:Va("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:function(){return e.onEscape(),b.some(!0)}})},setupItem:function(e,t,n,r){XC.setGroups(t,n)},shell:!0})}},name:"multiple-toolbar",schema:[Rt("dom"),Rt("onEscape")]}),dI=mD.optional({factory:{sketch:function(e){return function(e){return e.type===Bh.sliding?WN:e.type===Bh.floating?qN:YN}(e)({type:e.type,uid:e.uid,onEscape:function(){return e.onEscape(),b.some(!0)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[Rt("dom"),Rt("onEscape"),Rt("getSink")]}),fI=mD.optional({factory:{sketch:function(e){var t=e.editor,n=e.sticky?WD:wD;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Ys(n(t,e.sharedBackstage))}}},name:"header",schema:[Rt("dom")]}),mI=mD.optional({name:"socket",schema:[Rt("dom")]}),pI=mD.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ys([gy.config({}),tp.config({}),EN.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){Vd.getCurrent(e).each(ZD.hideAllSlots),zr(e,iI)},onGrown:function(e){zr(e,iI)},onStartGrow:function(e){Rr(e,oI,{width:Ho(e.element,"width").getOr("")})},onStartShrink:function(e){Rr(e,oI,{width:vi(e.element)+"px"})}}),Km.config({}),Vd.config({find:function(e){var t=Km.contents(e);return ee(t)}})])}],behaviours:Ys([xk(0),Qm("sidebar-sliding-events",[jr(oI,function(e,t){Bo(e.element,"width",t.event.width)}),jr(iI,function(e,t){qo(e.element,"width")})])])}}},name:"sidebar",schema:[Rt("dom")]}),hI=mD.optional({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ys([Km.config({})]),components:[]}}},name:"throbber",schema:[Rt("dom")]}),vI=Od({name:"OuterContainer",factory:function(e,t,n){var r={getSocket:function(t){return fD.getPart(t,e,"socket")},setSidebar:function(t,n){fD.getPart(t,e,"sidebar").each(function(e){return rI(e,n)})},toggleSidebar:function(t,n){fD.getPart(t,e,"sidebar").each(function(e){return function(e,t){Vd.getCurrent(e).each(function(e){Vd.getCurrent(e).each(function(n){EN.hasGrown(e)?ZD.isShowing(n,t)?EN.shrink(e):(ZD.hideAllSlots(n),ZD.showSlot(n,t)):(ZD.hideAllSlots(n),ZD.showSlot(n,t),EN.grow(e))})})}(e,n)})},whichSidebar:function(t){return fD.getPart(t,e,"sidebar").bind(aI).getOrNull()},getHeader:function(t){return fD.getPart(t,e,"header")},getToolbar:function(t){return fD.getPart(t,e,"toolbar")},setToolbar:function(t,n){fD.getPart(t,e,"toolbar").each(function(e){e.getApis().setGroups(e,n)})},setToolbars:function(t,n){fD.getPart(t,e,"multiple-toolbar").each(function(e){gD.setItems(e,n)})},refreshToolbar:function(t){fD.getPart(t,e,"toolbar").each(function(e){return e.getApis().refresh(e)})},toggleToolbarDrawer:function(t){fD.getPart(t,e,"toolbar").each(function(e){var t,n;t=e.getApis().toggle,n=function(t){return t(e)},void 0!==t&&null!==t?b.some(n(t)):b.none()})},isToolbarDrawerToggled:function(t){return fD.getPart(t,e,"toolbar").bind(function(e){return b.from(e.getApis().isOpen).map(function(t){return t(e)})}).getOr(!1)},getThrobber:function(t){return fD.getPart(t,e,"throbber")},focusToolbar:function(t){fD.getPart(t,e,"toolbar").orThunk(function(){return fD.getPart(t,e,"multiple-toolbar")}).each(function(e){jm.focusIn(e)})},setMenubar:function(t,n){fD.getPart(t,e,"menubar").each(function(e){GD.setMenus(e,n)})},focusMenubar:function(t){fD.getPart(t,e,"menubar").each(function(e){GD.focus(e)})}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},configFields:[Rt("dom"),Rt("behaviours")],partFields:[fI,lI,dI,uI,mI,pI,hI],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getHeader:function(e,t){return e.getHeader(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var r=$(n,function(e){return FN(e)});e.setToolbar(t,r)},setToolbars:function(e,t,n){var r=$(n,function(e){return $(e,FN)});e.setToolbars(t,r)},refreshToolbar:function(e,t){return e.refreshToolbar(t)},toggleToolbarDrawer:function(e,t){e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(e,t){return e.isToolbarDrawerToggled(t)},getThrobber:function(e,t){return e.getThrobber(t)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),gI={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},bI=function(e){return"string"==typeof e?e.split(" "):e},yI=function(e,t){var n=d(d({},gI),t.menus),r=ye(t.menus).length>0,a=void 0===t.menubar||!0===t.menubar?bI("file edit view insert format tools table help"):bI(!1===t.menubar?"":t.menubar),o=F(a,function(e){return r&&t.menus.hasOwnProperty(e)&&t.menus[e].hasOwnProperty("items")||gI.hasOwnProperty(e)}),i=$(o,function(r){var a=n[r];return function(e,t,n){var r=function(e){return e.getParam("removed_menuitems","")}(n).split(/[ ,]/);return{text:e.title,getItems:function(){return G(e.items,function(e){var n=e.toLowerCase();return 0===n.trim().length?[]:R(r,function(e){return e===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]})}}}({title:a.title,items:bI(a.items)},t,e)});return F(i,function(e){return e.getItems().length>0&&R(e.getItems(),function(e){return"separator"!==e.type})})},wI=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},xI=function(e,t,n){return new mh(function(r,a){n.load(t,r,a),e.on("remove",function(){return n.unload(t)})})},kI=function(e,t){var n;return(n=ln.fromDom(e.getElement()),Mo(n).isSome())?xI(e,t+"/skin.shadowdom.min.css",Tv.DOM.styleSheetLoader):mh.resolve()},_I=function(e,t){var n=function(e){var t=e.getParam("skin"),n=e.getParam("skin_url");if(!1!==t){var r=t||"oxide";n=n?e.documentBaseURI.toAbsolute(n):Hv.baseURL+"/skins/ui/"+r}return n}(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),!1===function(e){return!1===e.getParam("skin")}(t)&&x(n)?mh.all([function(e,t){return xI(e,t+"/skin.min.css",e.ui.styleSheetLoader)}(t,n),kI(t,n)]).then(wI(t),function(e,t){return function(){return function(e,t){return e.fire("SkinLoadError",t)}(e,{message:t})}}(t,"Skin could not be loaded")):wI(t)()},SI=o(_I,!1),CI=o(_I,!0),NI=function(e,t,n,r){var a=t.outerContainer,o=n.toolbar,i=n.buttons;if(I(o,x)){var s=o.map(function(t){var a={toolbar:t,buttons:i,allowToolbarGroups:n.allowToolbarGroups};return iD(e,a,{backstage:r},b.none())});vI.setToolbars(a,s)}else vI.setToolbar(a,iD(e,n,{backstage:r},b.none()))},TI=On(),DI=TI.os.isiOS()&&TI.os.version.major<=12,II=Object.freeze({__proto__:null,render:function(e,t,n,r,a){var o=sn(0),i=t.outerContainer;SI(e);var s,c,l=ln.fromDom(a.targetNode),u=Io(Do(l));s=l,c=t.mothership,Kl(s,c,va),Gl(u,t.uiMothership),e.on("PostRender",function(){NI(e,t,n,r),o.set(e.getWin().innerWidth),vI.setMenubar(i,yI(e,n)),vI.setSidebar(i,n.sidebar),function(e,t){var n=e.dom,r=e.getWin(),a=e.getDoc().documentElement,o=sn(di(r.innerWidth,r.innerHeight)),i=sn(di(a.offsetWidth,a.offsetHeight)),s=function(){var t=o.get();t.left===r.innerWidth&&t.top===r.innerHeight||(o.set(di(r.innerWidth,r.innerHeight)),ob(e))},c=function(){var t=e.getDoc().documentElement,n=i.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(i.set(di(t.offsetWidth,t.offsetHeight)),ob(e))},l=function(t){return function(e,t){return e.fire("ScrollContent",t)}(e,t)};n.bind(r,"resize",s),n.bind(r,"scroll",l);var u=qb(ln.fromDom(e.getBody()),"load",c),d=t.uiMothership.element;e.on("hide",function(){Bo(d,"display","none")}),e.on("show",function(){qo(d,"display")}),e.on("NodeChange",c),e.on("remove",function(){u.unbind(),n.unbind(r,"resize",s),n.unbind(r,"scroll",l),r=null})}(e,t)});var d,f,m,p=vI.getSocket(i).getOrDie("Could not find expected socket element");if(DI){$o(p.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var h=(d=function(){e.fire("ScrollContent")},f=20,m=null,{cancel:function(){null!==m&&(clearTimeout(m),m=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===m&&(m=setTimeout(function(){d.apply(null,e),m=null},f))}}),v=jb(p.element,"scroll",h.throttle);e.on("remove",v.unbind)}mg(e,t),e.addCommand("ToggleSidebar",function(t,n){vI.toggleSidebar(i,n),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return vI.whichSidebar(i)});var g=tg(e);g!==Bh.sliding&&g!==Bh.floating||e.on("ResizeWindow ResizeEditor ResizeContent",function(){var n=e.getWin().innerWidth;n!==o.get()&&(vI.refreshToolbar(t.outerContainer),o.set(n))});var b={enable:function(){fg(t,!1)},disable:function(){fg(t,!0)},isDisabled:function(){return Fv.isDisabled(i)}};return{iframeContainer:p.element.dom,editorContainer:i.element.dom,api:b}}}),MI=function(e){return/^[0-9\.]+(|px)$/i.test(""+e)?b.some(parseInt(""+e,10)):b.none()},OI=function(e){return D(e)?e+"px":e},AI=function(e,t,n){var r=t.filter(function(t){return e<t}),a=n.filter(function(t){return e>t});return r.or(a).getOr(e)},LI=function(e){return function(e){var t=jv(e),n=Yv(e),r=Kv(e);return MI(t).map(function(e){return AI(e,n,r)})}(e).getOr(jv(e))},EI=function(e){var t=qv(e),n=Wv(e),r=Gv(e);return MI(t).map(function(e){return AI(e,n,r)})},zI=function(e,t,n,r,a){var o=n.uiMothership,i=n.outerContainer,s=Tv.DOM,c=sg(e),l=ug(e),u=Gv(e).or(EI(e)),d=r.shared.header,f=d.isPositionedAtTop,m=tg(e),p=m===Bh.sliding||m===Bh.floating,h=sn(!1),v=function(){return h.get()&&!e.removed},g=function(e){return p?e.fold(function(){return 0},function(e){return e.components().length>1?ci(e.components()[1].element):0}):0},b=function(){o.broadcastOn([cu()],{})},y=function(e){if(void 0===e&&(e=!1),v()){var n,r,o,s,d;if(c||(n=u.getOrThunk(function(){var e=MI(Po(Eo(),"margin-left")).getOr(0);return vi(Eo())-mi(t).left+e}),Bo(a.get().element,"max-width",n+"px")),p&&vI.refreshToolbar(i),c||(r=vI.getToolbar(i),o=g(r),s=Ii(t),d=f()?Math.max(s.y-ci(a.get().element)+o,0):s.bottom,$o(i.element,{position:"absolute",top:Math.round(d)+"px",left:Math.round(s.x)+"px"})),l){var m=a.get();e?PD.reset(m):PD.refresh(m)}b()}},w=function(n){if(void 0===n&&(n=!0),!c&&l&&v()){var r=d.getDockingMode(),o=function(n){switch(ag(e)){case eg.auto:var r=vI.getToolbar(i),a=g(r),o=ci(n.element)-a,s=Ii(t);if(s.y>o)return"top";var c=la(t),l=Math.max(c.dom.scrollHeight,ci(c));return s.bottom<l-o?"bottom":Oi().bottom<s.bottom-o?"bottom":"top";case eg.bottom:return"bottom";case eg.top:default:return"top"}}(a.get());o!==r&&(!function(e){var t=a.get();PD.setModes(t,[e]),d.setDockingMode(e);var n=f()?Hi.TopToBottom:Hi.BottomToTop;Na(t.element,Oc,n)}(o),n&&y(!0))}};return{isVisible:v,isPositionedAtTop:f,show:function(){h.set(!0),Bo(i.element,"display","flex"),s.addClass(e.getBody(),"mce-edit-focus"),qo(o.element,"display"),w(!1),y()},hide:function(){h.set(!1),n.outerContainer&&(Bo(i.element,"display","none"),s.removeClass(e.getBody(),"mce-edit-focus")),Bo(o.element,"display","none")},update:y,updateMode:w,repositionPopups:b}},RI=function(e,t){var n=Ii(e);return{pos:t?n.y:n.bottom,bounds:n}},VI=Object.freeze({__proto__:null,render:function(e,t,n,r,a){var o=t.mothership,i=t.uiMothership,s=t.outerContainer,c=sn(null),l=ln.fromDom(a.targetNode),u=zI(e,l,t,r,c),d=function(e){return e.getParam("toolbar_persist",!1,"boolean")}(e);CI(e);var f=function(){if(c.get())u.show();else{c.set(vI.getHeader(s).getOrDie());var a=cg(e);Gl(a,o),Gl(a,i),NI(e,t,n,r),vI.setMenubar(s,yI(e,n)),u.show(),function(e,t,n,r){var a=sn(RI(t,n.isPositionedAtTop())),o=function(r){var o=RI(t,n.isPositionedAtTop()),i=o.pos,s=o.bounds,c=a.get(),l=c.pos,u=c.bounds,d=s.height!==u.height||s.width!==u.width;a.set({pos:i,bounds:s}),d&&ob(e,r),n.isVisible()&&(l!==i?n.update(!0):d&&(n.updateMode(),n.repositionPopups()))};r||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",function(){return n.update(!0)}),e.on("NodeChange keydown",function(e){Yp.requestAnimationFrame(function(){return o(e)})}),e.on("ScrollWindow",function(){return n.updateMode()});var i=KT();i.set(qb(ln.fromDom(e.getBody()),"load",o)),e.on("remove",function(){i.clear()})}(e,l,u,d),e.nodeChanged()}};e.on("show",f),e.on("hide",u.hide),d||(e.on("focus",f),e.on("blur",u.hide)),e.on("init",function(){(e.hasFocus()||d)&&f()}),mg(e,t);var m={show:function(){u.show()},hide:function(){u.hide()},enable:function(){fg(t,!1)},disable:function(){fg(t,!0)},isDisabled:function(){return Fv.isDisabled(s)}};return{editorContainer:s.element.dom,api:m}}}),BI=function(e,t){!function(e,t){var n=OT(0,t,BT(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=OT(0,t,PT(e));e.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=d({type:"advanced"},t.styleselect),r=OT(0,t,ZT(e,n));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return r.items.validateItems(r.getStyleItems())}})}(e,t),function(e,t){var n=OT(0,t,JT(e));e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function(e,t){var n=OT(0,t,qT(e));e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(e,t)},$I=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},UI=function(e){!function(e){Ck.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t,n){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:QT(e,t.name),onAction:$I(e,t.name)})});for(var t=1;t<=6;t++){var n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:QT(e,n),onAction:$I(e,n)})}}(e),function(e){Ck.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)}})})}(e),function(e){Ck.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return e.execCommand(t.action)},onSetup:QT(e,t.name)})})}(e)},PI=function(e){UI(e),function(e){Ck.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:$I(e,"code")})}(e)},FI=function(e,t,n){var r=function(){return!!t.undoManager&&t.undoManager[n]()},a=function(){e.setDisabled(t.mode.isReadOnly()||!r())};return e.setDisabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a)}},HI=function(e){!function(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return FI(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return FI(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e),function(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return FI(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return FI(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}})}(e)},jI={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},qI=(ET=["Infinity","[0-9]+\\."+(LT=function(e){return"(?:"+e+")?"})("[0-9]+")+LT("[eE][+-]?[0-9]+"),"\\.[0-9]+"+LT("[eE][+-]?[0-9]+"),"[0-9]+"+LT("[eE][+-]?[0-9]+")].join("|"),new RegExp("^([+-]?(?:"+ET+"))(.*)$")),WI=function(e,t){return b.from(qI.exec(e)).bind(function(e){var n=Number(e[1]),r=e[2];return function(e,t){return R(t,function(t){return R(jI[t],function(t){return e===t})})}(r,t)?b.some({value:n,unit:r}):b.none()})},YI=function(e){return function(e,t){return WI(e,t).map(function(e){return e.value+e.unit})}(e,["fixed","relative","empty"]).getOr(e)},GI=function(e){var t=function(e){return e.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")}(e),n=new Map,r=GT(),a=function(){var t=YI(e.queryCommandValue("LineHeight"));b.from(n.get(t)).fold(function(){return r.clear()},function(e){r.set({destroy:function(){e.setActive(!1)}}),e.setActive(!0)})};return e.on("nodeChange",a),$(t,function(o,i){return{type:"togglemenuitem",text:o,onSetup:function(s){return n.set(YI(o),s),i+1===t.length&&a(),function(){0===i&&(e.off("nodeChange",a),r.clear())}},onAction:function(){return e.execCommand("LineHeight",!1,o)}}})},KI=function(e){!function(e){e.ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return GI(e)}})}(e),function(e){e.ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(t){return t(GI(e))}})}(e)},QI=function(e,t){!function(e){Ck.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return e.execCommand(t.cmd)},icon:t.icon,onSetup:QT(e,t.name)})});var t="alignnone",n="No alignment",r="JustifyNone",a="align-none";e.ui.registry.addButton(t,{tooltip:n,onAction:function(){return e.execCommand(r)},icon:a})}(e),PI(e),BI(e,t),HI(e),function(e){!function(e){e.addCommand("mceApplyTextcolor",function(t,n){!function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})}(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){!function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}(e,t)})}(e);var t=sn(null),n=sn(null);yb(e,"forecolor","forecolor","Text color",t),yb(e,"backcolor","hilitecolor","Background color",n),wb(e,"forecolor","forecolor","Text color"),wb(e,"backcolor","hilitecolor","Background color")}(e),function(e){!function(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}})}(e),function(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,e)},onAction:function(){e.execCommand("mceToggleVisualAid")}})}(e)}(e),function(e){!function(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(t){return function(e,t){e.setDisabled(!t.queryCommandState("outdent"));var n=function(){e.setDisabled(!t.queryCommandState("outdent"))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}(t,e)},onAction:function(){return e.execCommand("outdent")}}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return e.execCommand("indent")}})}(e)}(e),KI(e)},XI=function(e,t){return{anchor:"makeshift",x:e,y:t}},JI=function(e){return"longpress"===e.type||0===e.type.indexOf("touch")},ZI=function(e,t){var n=Tv.DOM.getPos(e);return function(e,t,n){return XI(e.x+t,e.y+n)}(t,n.x,n.y)},eM=function(e,t){return"contextmenu"===t.type||"longpress"===t.type?e.inline?function(e){if(JI(e)){var t=e.touches[0];return XI(t.pageX,t.pageY)}return XI(e.pageX,e.pageY)}(t):ZI(e.getContentAreaContainer(),function(e){if(JI(e)){var t=e.touches[0];return XI(t.clientX,t.clientY)}return XI(e.clientX,e.clientY)}(t)):tM(e)},tM=function(e){return{anchor:"selection",root:ln.fromDom(e.selection.getNode())}},nM=function(e){return{anchor:"node",node:b.some(ln.fromDom(e.selection.getNode())),root:ln.fromDom(e.getBody())}},rM=function(e,t,n,r,a,o){var i=n(),s=o?nM(e):eM(e,t);H_(i,$h.CLOSE_ON_EXECUTE,r,!1).map(function(e){t.preventDefault(),zp.showMenuAt(a,s,{menu:{markers:Yh("normal")},data:e})})},aM={onLtr:function(){return[Os,Ns,Ts,Ds,Is,Ms,qp,Wp,Hp,Pp,jp,Fp]},onRtl:function(){return[Os,Ts,Ns,Is,Ds,Ms,qp,Wp,jp,Fp,Hp,Pp]}},oM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},iM=function(e,t,n,r,a,o,i){var s=o?nM(e):function(e,t){return d({bubble:Nc(0,12,oM),layouts:aM,overrides:{maxWidthFunction:GC(),maxHeightFunction:xc()}},eM(e,t))}(e,t);H_(n,$h.CLOSE_ON_EXECUTE,r,!0).map(function(n){t.preventDefault(),zp.showMenuWithinBounds(a,s,{menu:{markers:Yh("normal"),highlightImmediately:i},data:n,type:"horizontal"},function(){return b.some(_T(e,r.shared))}),e.fire("contexttoolbar-hide")})},sM=function(e,t,n,r,a,o){var i=On(),s=i.os.isiOS(),c=i.os.isOSX(),l=i.os.isAndroid(),u=i.deviceType.isTouch(),d=function(){var i=n();iM(e,t,i,r,a,o,!(l||s||c&&u))};if(!c&&!s||o)l&&!o&&e.selection.setCursorLocation(t.target,0),d();else{var f=function(){!function(e){var t=e.selection.getRng(),n=function(){Yp.setEditorTimeout(e,function(){e.selection.setRng(t)},10),o()};e.once("touchend",n);var r=function(e){e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",r,!0);var a=function(){return o()};e.once("longpresscancel",a);var o=function(){e.off("touchend",n),e.off("longpresscancel",a),e.off("mousedown",r)}}(e),d()};!function(e,t){var n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;var r=t.touches[0],a=n.getRng();return al(e.getWin(),Pc.domRange(a)).exists(function(e){return e.left<=r.clientX&&e.right>=r.clientX&&e.top<=r.clientY&&e.bottom>=r.clientY})}(e,t)?(e.once("selectionchange",f),e.once("touchend",function(){return e.off("selectionchange",f)})):f()}},cM=function(e){return"string"==typeof e?e.split(/[ ,]/):e},lM=function(e){return e.getParam("contextmenu_never_use_native",!1,"boolean")},uM=function(e){return function(e,t,n){var r=e.ui.registry.getAll().contextMenus;return b.from(e.getParam(t)).map(cM).getOrThunk(function(){return F(cM(n),function(e){return Ie(r,e)})})}(e,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},dM=function(e){return x(e)?"|"===e:"separator"===e.type},fM={type:"separator"},mM=function(e){if(x(e))return e;switch(e.type){case"separator":return fM;case"submenu":return{type:"nestedmenuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){var t=e.getSubmenuItems();return x(t)?t:$(t,mM)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(t=e.onAction,function(){return t()})}}var t},pM=function(e,t){if(0===t.length)return e;var n=te(e).filter(function(e){return!dM(e)}).fold(function(){return[]},function(e){return[fM]});return e.concat(n).concat(t).concat([fM])},hM=function(e,t){return"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType)},vM=function(e,t){return hM(e,t)?e.selection.getStart(!0):t.target},gM=function(e,t,n){var r=On().deviceType.isTouch,a=ai(zp.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return e.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Ys([Qm("dismissContextMenu",[jr(Tr(),function(t,n){iu.close(t),e.focus()})])])})),o=function(e){return zp.hide(a)},i=function(t){if(lM(e)&&t.preventDefault(),!function(e,t){return t.ctrlKey&&!lM(e)}(e,t)&&!function(e){return!1===e.getParam("contextmenu")}(e)){var o=function(e,t){var n=function(e){return e.getParam("contextmenu_avoid_overlap","","string")}(e);if(hM(e,t))return!0;if(n){var r=vM(e,t);return Yb(ln.fromDom(r),n)}return!1}(e,t);(r()?sM:rM)(e,t,function(){var n=vM(e,t),r=e.ui.registry.getAll(),a=uM(e);return function(e,t,n){var r=j(t,function(t,r){if(Ie(e,r)){var a=e[r].update(n);if(x(a))return pM(t,a.split(" "));if(a.length>0){var o=$(a,mM);return pM(t,o)}return t}return t.concat([r])},[]);return r.length>0&&dM(r[r.length-1])&&r.pop(),r}(r.contextMenus,a,n)},n,a,o)}};e.on("init",function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");e.on(t,o),e.on("longpress contextmenu",i)})},bM=Oe([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),yM=function(e){return function(t){return t.translate(-e.left,-e.top)}},wM=function(e){return function(t){return t.translate(e.left,e.top)}},xM=function(e){return function(t,n){return j(e,function(e,t){return t(e)},di(t,n))}},kM=function(e,t,n){return e.fold(xM([wM(n),yM(t)]),xM([yM(t)]),xM([]))},_M=function(e,t,n){return e.fold(xM([wM(n)]),xM([]),xM([wM(t)]))},SM=function(e,t,n){return e.fold(xM([]),xM([yM(n)]),xM([wM(t),yM(n)]))},CM=function(e,t,n){var r=e.fold(function(e,t){return{position:b.some("absolute"),left:b.some(e+"px"),top:b.some(t+"px")}},function(e,t){return{position:b.some("absolute"),left:b.some(e-n.left+"px"),top:b.some(t-n.top+"px")}},function(e,t){return{position:b.some("fixed"),left:b.some(e+"px"),top:b.some(t+"px")}});return d({right:b.none(),bottom:b.none()},r)},NM=function(e,t,n,r){var a=function(e,a){return function(o,i){var s=e(t,n,r);return a(o.getOr(s.left),i.getOr(s.top))}};return e.fold(a(SM,TM),a(_M,DM),a(kM,IM))},TM=bM.offset,DM=bM.absolute,IM=bM.fixed,MM=function(e,t){var n=Ta(e,t);return C(n)?NaN:parseInt(n,10)},OM=function(e,t,n,r){return function(e,t){var n=e.element,r=MM(n,t.leftAttr),a=MM(n,t.topAttr);return isNaN(r)||isNaN(a)?b.none():b.some(di(r,a))}(e,t).fold(function(){return n},function(e){return IM(e.left+r.left,e.top+r.top)})},AM=function(e,t,n,r,a,o){var i=OM(e,t,n,r),s=t.mustSnap?zM(e,t,i,a,o):RM(e,t,i,a,o),c=kM(i,a,o);return function(e,t,n){var r=e.element;Na(r,t.leftAttr,n.left+"px"),Na(r,t.topAttr,n.top+"px")}(e,t,c),s.fold(function(){return{coord:IM(c.left,c.top),extra:b.none()}},function(e){return{coord:e.output,extra:e.extra}})},LM=function(e,t){!function(e,t){var n=e.element;Ma(n,t.leftAttr),Ma(n,t.topAttr)}(e,t)},EM=function(e,t,n,r){return re(e,function(e){var a=e.sensor;return function(e,t,n,r,a,o){var i=_M(e,a,o),s=_M(t,a,o);return Math.abs(i.left-s.left)<=n&&Math.abs(i.top-s.top)<=r}(t,a,e.range.left,e.range.top,n,r)?b.some({output:NM(e.output,t,n,r),extra:e.extra}):b.none()})},zM=function(e,t,n,r,a){var o=t.getSnapPoints(e);return EM(o,n,r,a).orThunk(function(){return j(o,function(e,t){var o=t.sensor,i=function(e,t,n,r,a,o){var i=_M(e,a,o),s=_M(t,a,o),c=Math.abs(i.left-s.left),l=Math.abs(i.top-s.top);return di(c,l)}(n,o,t.range.left,t.range.top,r,a);return e.deltas.fold(function(){return{deltas:b.some(i),snap:b.some(t)}},function(n){return(i.left+i.top)/2<=(n.left+n.top)/2?{deltas:b.some(i),snap:b.some(t)}:e})},{deltas:b.none(),snap:b.none()}).snap.map(function(e){return{output:NM(e.output,n,r,a),extra:e.extra}})})},RM=function(e,t,n,r,a){var o=t.getSnapPoints(e);return EM(o,n,r,a)},VM=Object.freeze({__proto__:null,snapTo:function(e,t,n,r){var a=t.getTarget(e.element);if(t.repositionTarget){var o=sa(e.element),i=xi(o),s=_D(a),c=function(e,t,n){return{coord:NM(e.output,e.output,t,n),extra:e.extra}}(r,i,s),l=CM(c.coord,0,s);Uo(a,l)}}}),BM=function(e,t){e.getSystem().addToGui(t),function(e){da(e.element).filter(ra).each(function(t){Ho(t,"z-index").each(function(e){Na(t,"data-initial-z-index",e)}),Bo(t,"z-index",Po(e.element,"z-index"))})}(t)},$M=function(e){!function(e){da(e.element).filter(ra).each(function(e){Da(e,"data-initial-z-index").fold(function(){return qo(e,"z-index")},function(t){return Bo(e,"z-index",t)}),Ma(e,"data-initial-z-index")})}(e),e.getSystem().removeFromGui(e)},UM=function(e,t,n){return e.getSystem().build(uy.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}))},PM=Kt("snaps",[Rt("getSnapPoints"),ns("onSensor"),Rt("leftAttr"),Rt("topAttr"),Qt("lazyViewport",Oi),Qt("mustSnap",!1)]),FM=[Qt("useFixed",c),Rt("blockerClass"),Qt("getTarget",a),Qt("onDrag",t),Qt("repositionTarget",!0),Qt("onDrop",t),nn("getBounds",Oi),PM],HM=function(e){return(t=Ho(e,"left"),n=Ho(e,"top"),r=Ho(e,"position"),a=function(e,t,n){return("fixed"===n?IM:TM)(parseInt(e,10),parseInt(t,10))},t.isSome()&&n.isSome()&&r.isSome()?b.some(a(t.getOrDie(),n.getOrDie(),r.getOrDie())):b.none()).getOrThunk(function(){var t=mi(e);return DM(t.left,t.top)});var t,n,r,a},jM=function(e,t,n,r,a,o,i){return function(e,t,n,r,a){var o=a.bounds,i=_M(t,n,r),s=pc(i.left,o.x,o.x+o.width-a.width),c=pc(i.top,o.y,o.y+o.height-a.height),l=DM(s,c);return t.fold(function(){var e=SM(l,n,r);return TM(e.left,e.top)},function(){return l},function(){var e=kM(l,n,r);return IM(e.left,e.top)})}(0,t.fold(function(){var e,t,i,s=(e=n,t=o.left,i=o.top,e.fold(function(e,n){return TM(e+t,n+i)},function(e,n){return DM(e+t,n+i)},function(e,n){return IM(e+t,n+i)})),c=kM(s,r,a);return IM(c.left,c.top)},function(t){var i=AM(e,t,n,o,r,a);return i.extra.each(function(n){t.onSensor(e,n)}),i.coord}),r,a,i)},qM=function(e,t){return{bounds:e.getBounds(),height:li(t.element),width:gi(t.element)}},WM=function(e,t,n,r,a){var o=n.update(r,a),i=n.getStartData().getOrThunk(function(){return qM(t,e)});o.each(function(n){!function(e,t,n,r){var a=t.getTarget(e.element);if(t.repositionTarget){var o=sa(e.element),i=xi(o),s=_D(a),c=HM(a),l=jM(e,t.snaps,c,i,s,r,n),u=CM(l,0,s);Uo(a,u)}t.onDrag(e,a,r)}(e,t,i,n)})},YM=function(e,t,n,r){t.each($M),n.snaps.each(function(t){LM(e,t)});var a=n.getTarget(e.element);r.reset(),n.onDrop(e,a)},GM=function(e){return function(t,n){var r=function(e){n.setStartData(qM(t,e))};return Pr(m([jr(_r(),function(e){n.getStartData().each(function(){return r(e)})})],e(t,n,r)))}},KM=Object.freeze({__proto__:null,getData:function(e){return b.from(di(e.x,e.y))},getDelta:function(e,t){return di(t.left-e.left,t.top-e.top)}}),QM=function(e,t,n){return[jr(Gn(),function(r,a){if(0===a.event.raw.button){a.stop();var o=function(){return YM(r,b.some(c),e,t)},i=Gb(o,200),s={drop:o,delayDrop:i.schedule,forceDrop:o,move:function(n){i.cancel(),WM(r,e,t,KM,n)}},c=UM(r,e.blockerClass,function(e){return Pr([jr(Gn(),e.forceDrop),jr(Xn(),e.drop),jr(Kn(),function(t,n){e.move(n.event)}),jr(Qn(),e.delayDrop)])}(s));n(r),BM(r,c)}})]},XM=m(FM,[is("dragger",{handlers:GM(QM)})]),JM=Object.freeze({__proto__:null,getData:function(e){var t=e.raw.touches;return 1===t.length?function(e){var t=e[0];return b.some(di(t.clientX,t.clientY))}(t):b.none()},getDelta:function(e,t){return di(t.left-e.left,t.top-e.top)}}),ZM=function(e,t,n){var r=sn(b.none());return[jr(jn(),function(a,o){o.stop();var i=function(){YM(a,r.get(),e,t),r.set(b.none())},s={drop:i,delayDrop:function(){},forceDrop:i,move:function(n){WM(a,e,t,JM,n)}},c=UM(a,e.blockerClass,function(e){return Pr([jr(jn(),e.forceDrop),jr(Wn(),e.drop),jr(Yn(),e.drop),jr(qn(),function(t,n){e.move(n.event)})])}(s));r.set(b.some(c));n(a),BM(a,c)}),jr(qn(),function(n,r){r.stop(),WM(n,e,t,JM,r.event)}),jr(Wn(),function(n,a){a.stop(),YM(n,r.get(),e,t),r.set(b.none())}),jr(Yn(),function(n){YM(n,r.get(),e,t),r.set(b.none())})]},eO=XM,tO=m(FM,[is("dragger",{handlers:GM(ZM)})]),nO=m(FM,[is("dragger",{handlers:GM(function(e,t,n){return m(QM(e,t,n),ZM(e,t,n))})})]),rO=Xs({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:eO,touch:tO,mouseOrTouch:nO}),name:"dragging",active:{events:function(e,t){return e.dragger.handlers(e,t)}},extra:{snap:function(e){return{sensor:e.sensor,range:e.range,output:e.output,extra:b.from(e.extra)}}},state:Object.freeze({__proto__:null,init:function(){var e=b.none(),t=b.none(),n=r({});return to({readState:n,reset:function(){e=b.none(),t=b.none()},update:function(t,n){return t.getData(n).bind(function(n){return function(t,n){var r=e.map(function(e){return t.getDelta(e,n)});return e=b.some(n),r}(t,n)})},getStartData:function(){return t},setStartData:function(e){t=b.some(e)}})}}),apis:VM}),aO=function(e,t,n,r,a,o){return e.fold(function(){return rO.snap({sensor:DM(n-20,r-20),range:di(a,o),output:DM(b.some(n),b.some(r)),extra:{td:t}})},function(e){var a=n-20,o=r-20,i=e.element.dom.getBoundingClientRect();return rO.snap({sensor:DM(a,o),range:di(40,40),output:DM(b.some(n-i.width/2),b.some(r-i.height/2)),extra:{td:t}})})},oO=function(e,t,n){return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(e,r){var a=r.td;(function(e,t){return e.exists(function(e){return En(e,t)})})(t.get(),a)||(t.set(b.some(a)),n(a))},mustSnap:!0}},iO=function(e){return Kp(Gp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ys([rO.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),xw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},sO=function(e,t){var n=sn([]),r=sn([]),a=sn(!1),o=sn(b.none()),i=sn(b.none()),s=function(e){var n=Mi(e);return aO(d.getOpt(t),e,n.x,n.y,n.width,n.height)},c=function(e){var n=Mi(e);return aO(f.getOpt(t),e,n.right,n.bottom,n.width,n.height)},l=oO(function(){return $(n.get(),function(e){return s(e)})},o,function(t){i.get().each(function(n){e.fire("TableSelectorChange",{start:t,finish:n})})}),u=oO(function(){return $(r.get(),function(e){return c(e)})},i,function(t){o.get().each(function(n){e.fire("TableSelectorChange",{start:n,finish:t})})}),d=iO(l),f=iO(u),m=ai(d.asSpec()),p=ai(f.asSpec()),h=function(t,n,r,a){var o=r(n);rO.snapTo(t,o);!function(t,n,r,a){var o=n.dom.getBoundingClientRect();qo(t.element,"display");var i=ua(ln.fromDom(e.getBody())).dom.innerHeight,s=r(o),c=a(o,i);(s||c)&&Bo(t.element,"display","none")}(t,n,function(e){return e[a]<0},function(e,t){return e[a]>t})},v=function(e){return h(m,e,s,"top")},g=function(e){return h(p,e,c,"bottom")};On().deviceType.isTouch()&&(e.on("TableSelectionChange",function(e){a.get()||(Hl(t,m),Hl(t,p),a.set(!0)),o.set(b.some(e.start)),i.set(b.some(e.finish)),e.otherCells.each(function(t){n.set(t.upOrLeftCells),r.set(t.downOrRightCells),v(e.start),g(e.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",function(){o.get().each(v),i.get().each(g)}),e.on("TableSelectionClear",function(){a.get()&&(Wl(m),Wl(p),a.set(!1)),o.set(b.none()),i.set(b.none())}))};!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(zT||(zT={}));var cO=function(e,t,n){var r=ln.fromDom(e.getContainer()),a=function(e,t,n,r,a){var o={};return o.height=AI(r+t.top,Yv(e),Kv(e)),n===zT.Both&&(o.width=AI(a+t.left,Wv(e),Gv(e))),o}(e,t,n,ci(r),vi(r));xe(a,function(e,t){return Bo(r,t,OI(e))}),function(e){e.fire("ResizeEditor")}(e)},lO=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},uO=function(e,t,n){t.delimiter||(t.delimiter="»");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ys([jm.config({mode:"flow",selector:"div[role=button]"}),Fv.config({disabled:n.isDisabled}),pg(),gy.config({}),Km.config({}),Qm("elementPathEvents",[Xr(function(r,a){e.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return jm.focusIn(r)}),e.on("NodeChange",function(a){var o,i,s=function(t){for(var n=[],r=t.length;r-- >0;){var a=t[r];if(1===a.nodeType&&!lO(a)){var o=e.fire("ResolveName",{name:a.nodeName.toLowerCase(),target:a});if(o.isDefaultPrevented()||n.push({name:o.name,element:a}),o.isPropagationStopped())break}}return n}(a.parents);s.length>0?Km.set(r,(o=$(s||[],function(t,r){return Gp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":r,"tab-index":-1,"aria-level":r+1},innerHtml:t.name},action:function(n){e.focus(),e.selection.select(t.element),e.nodeChanged()},buttonBehaviours:Ys([vg(n.isDisabled),pg()])})}),i={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+t.delimiter+" "}},j(o.slice(1),function(e,t){var n=e;return n.push(i),n.push(t),n},[o[0]]))):Km.set(r,[])})})])]),components:[]}},dO=function(e,t){var n,r;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(n=function(){var n,r=[];return e.getParam("elementpath",!0,"boolean")&&r.push(uO(e,{},t)),e.hasPlugin("wordcount")&&r.push(function(e,t){var n,r=function(e,n,r){return Km.set(e,[ti(t.translate(["{0} "+r,n[r]]))])};return Gp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ys([vg(t.isDisabled),pg(),gy.config({}),Km.config({}),Nu.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Qm("wordcount-events",[ea(function(e){var t=Nu.getValue(e),n="words"===t.mode?"characters":"words";Nu.setValue(e,{mode:n,count:t.count}),r(e,t.count,n)}),Xr(function(t){e.on("wordCountUpdate",function(e){var n=Nu.getValue(t).mode;Nu.setValue(t,{mode:n,count:e.wordCount}),r(t,e.wordCount,n)})})])]),eventOrder:(n={},n[pr()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})}(e,t)),e.getParam("branding",!0,"boolean")&&r.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(n=Dv.translate(["Powered by {0}","Tiny"]))+'">'+n+"</a>"}}),r.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:r}]:[]}(),r=function(e){var t=!e.hasPlugin("autoresize"),n=e.getParam("resize",t);return!1===n?zT.None:"both"===n?zT.Both:zT.Vertical}(e),r!==zT.None&&n.push(function(n){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-hidden":"true"},innerHtml:Xp("resize-handle",t.icons)},behaviours:Ys([rO.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,r,a){cO(e,a,n)},blockerClass:"tox-blocker"})])}}(r)),n)}},fO=function(e){var t,n,r,a,o=e.inline,i=o?VI:II,s=ug(e)?YD:xD,c=b.none(),l=On(),u=l.browser.isIE()?["tox-platform-ie"]:[],f=l.deviceType.isTouch()?["tox-platform-touch"]:[],m=og(e),p=cg(e),h=Dv.isRtl()?{attributes:{dir:"rtl"}}:{},v={attributes:(t={},t[Oc]=m?Hi.BottomToTop:Hi.TopToBottom,t)},g=function(){return c.bind(vI.getHeader)},y=function(){Bo(W.element,"width",document.body.clientWidth+"px")},w=ai((n=En(Eo(),p)&&"grid"===Po(p,"display"),r={dom:d({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(u).concat(f)},h),behaviours:Ys([Bl.config({useFixed:function(){return s.isDocked(g)}})])},a={dom:{styles:{width:document.body.clientWidth+"px"}},events:Pr([jr(Sr(),y)])},Ee(r,n?a:{}))),x=function(){return ie.value(w)},k=Kp({dom:{tag:"div",classes:["tox-anchorbar"]}}),_=function(){return c.bind(function(e){return vI.getThrobber(e)}).getOrDie("Could not find throbber element")},S=YC(w,e,function(){return c.bind(function(e){return k.getOpt(e)}).getOrDie("Could not find a anchor bar element")}),C=vI.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:S,onEscape:function(){e.focus()}}),N=tg(e),T=vI.parts.toolbar(d({dom:{tag:"div",classes:["tox-toolbar"]},getSink:x,providers:S.shared.providers,onEscape:function(){e.focus()},type:N,lazyToolbar:function(){return c.bind(function(e){return vI.getToolbar(e)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return g().getOrDie("Could not find header element")}},v)),I=vI.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:S.shared.providers,onEscape:function(){e.focus()},type:N}),M=vI.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),O=vI.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),A=vI.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:S}),L=e.getParam("statusbar",!0,"boolean")&&!o?b.some(dO(e,S.shared.providers)):b.none(),E={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[M,O]},z=Zv(e),R=Xv(e),V=Qv(e),B=vI.parts.header({dom:d({tag:"div",classes:["tox-editor-header"]},v),components:Y([V?[C]:[],z?[I]:R?[T]:[],sg(e)?[]:[k.asSpec()]]),sticky:ug(e),editor:e,sharedBackstage:S.shared}),$=Y([m?[]:[B],o?[]:[E],m?[B]:[]]),P=Y([[{dom:{tag:"div",classes:["tox-editor-container"]},components:$}],o?[]:L.toArray(),[A]]),F=lg(e),H=d(d({role:"application"},Dv.isRtl()?{dir:"rtl"}:{}),F?{"aria-hidden":"true"}:{}),j=ai(vI.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(o?["tox-tinymce-inline"]:[]).concat(m?["tox-tinymce--toolbar-bottom"]:[]).concat(f).concat(u),styles:d({visibility:"hidden"},F?{opacity:"0",border:"0"}:{}),attributes:H},components:P,behaviours:Ys([pg(),Fv.config({disableClass:"tox-tinymce--disabled"}),jm.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a"})])}));c=b.some(j),e.shortcuts.add("alt+F9","focus menubar",function(){vI.focusMenubar(j)}),e.shortcuts.add("alt+F10","focus toolbar",function(){vI.focusToolbar(j)}),e.addCommand("ToggleToolbarDrawer",function(){vI.toggleToolbarDrawer(j)}),e.addQueryStateHandler("ToggleToolbarDrawer",function(){return vI.isToolbarDrawerToggled(j)});var q=dy(j),W=dy(w);!function(e,t,n){var r=function(e,r){U([t,n],function(t){t.broadcastEvent(e,r)})},a=function(e,r){U([t,n],function(t){t.broadcastOn([e],r)})},o=function(e){return a(su(),{target:e.target})},i=jb(ln.fromDom(document),"touchstart",o),s=jb(ln.fromDom(document),"touchmove",function(e){return r(xr(),e)}),c=jb(ln.fromDom(document),"touchend",function(e){return r(kr(),e)}),l=jb(ln.fromDom(document),"mousedown",o),u=jb(ln.fromDom(document),"mouseup",function(e){0===e.raw.button&&a(lu(),{target:e.target})}),d=function(e){return a(su(),{target:ln.fromDom(e.target)})},f=function(e){0===e.button&&a(lu(),{target:ln.fromDom(e.target)})},m=function(e){return r(_r(),Wb(e))},p=function(e){a(cu(),{}),r(Sr(),Wb(e))},h=function(){return a(cu(),{})};e.on("PostRender",function(){e.on("click",d),e.on("tap",d),e.on("mouseup",f),e.on("ScrollWindow",m),e.on("ResizeWindow",p),e.on("ResizeEditor",h)}),e.on("remove",function(){e.off("click",d),e.off("tap",d),e.off("mouseup",f),e.off("ScrollWindow",m),e.off("ResizeWindow",p),e.off("ResizeEditor",h),l.unbind(),i.unbind(),s.unbind(),c.unbind(),u.unbind()}),e.on("detach",function(){Ql(t),Ql(n),t.destroy(),n.destroy()})}(e,q,W);var G=function(){var t=OI(LI(e)),n=OI(function(e){return EI(e).getOr(qv(e))}(e));return e.inline||(jo("div","width",n)&&Bo(j.element,"width",n),jo("div","height",t)?Bo(j.element,"height",t):Bo(j.element,"height","200px")),t};return{mothership:q,uiMothership:W,backstage:S,renderUI:function(){s.setup(e,S.shared,g),QI(e,S),gM(e,x,S),function(e){var t=e.ui.registry.getAll().sidebars;U(ye(t),function(n){var r=t[n],a=function(){return b.from(e.queryCommandValue("ToggleSidebar")).is(n)};e.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:function(t){e.execCommand("ToggleSidebar",!1,n),t.setActive(a())},onSetup:function(t){var n=function(){return t.setActive(a())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})})}(e),function(e,t,n){var r=sn(!1),a=sn(b.none()),o=function(e){e!==r.get()&&(cI(t(),e,n.providers),r.set(e))};e.on("ProgressState",function(t){if(a.get().each(Yp.clearTimeout),D(t.time)){var n=Yp.setEditorTimeout(e,function(){return o(t.state)},t.time);a.set(b.some(n))}else o(t.state),a.set(b.none())})}(e,_,S.shared),ke(function(e){return e.getParam("toolbar_groups",{},"object")}(e),function(t,n){e.ui.registry.addGroupToolbarButton(n,t)});var t=e.ui.registry.getAll(),n=t.buttons,r=t.menuItems,a=t.contextToolbars,o=t.sidebars,c=Jv(e),l={menuItems:r,menus:function(e){var t=e.getParam("menu");return t?ke(t,function(e){return d(d({},e),{items:e.items})}):{}}(e),menubar:function(e){return e.getParam("menubar")}(e),toolbar:c.getOrThunk(function(){return function(e){return e.getParam("toolbar",!0)}(e)}),allowToolbarGroups:N===Bh.floating,buttons:n,sidebar:o};dD(e,a,w,{backstage:S}),sO(e,w);var u=e.getElement(),f=G(),m={mothership:q,uiMothership:W,outerContainer:j},p={targetNode:u,height:f};return i.render(e,m,l,S,p)},getUi:function(){return{channels:{broadcastAll:W.broadcast,broadcastOn:W.broadcastOn,register:function(){}}}}}},mO=r([Rt("lazySink"),jt("dragBlockClass"),nn("getBounds",Oi),Qt("useTabstopAt",l),Qt("eventOrder",{}),Tu("modalBehaviours",[jm]),rs("onExecute"),os("onEscape")]),pO={sketch:a},hO=r([rd({name:"draghandle",overrides:function(e,t){return{behaviours:Ys([rO.config({mode:"mouse",getTarget:function(e){return Vi(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])}}}),td({schema:[Rt("dom")],name:"title"}),td({factory:pO,schema:[Rt("dom")],name:"close"}),td({factory:pO,schema:[Rt("dom")],name:"body"}),rd({factory:pO,schema:[Rt("dom")],name:"footer"}),nd({factory:{sketch:function(e,t){return d(d({},e),{dom:t.dom,components:t.components})}},schema:[Qt("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Qt("components",[])],name:"blocker"})]),vO=Object.freeze({__proto__:null,block:function(e,t,n,r){Na(e.element,"aria-busy",!0);var a=t.getRoot(e).getOr(e),o=Ys([jm.config({mode:"special",onTab:function(){return b.some(!0)},onShiftTab:function(){return b.some(!0)}}),tp.config({})]),i=r(a,o),s=a.getSystem().build(i);Km.append(a,oi(s)),s.hasConfigured(jm)&&jm.focusIn(s),n.isBlocked()||t.onBlock(e),n.blockWith(function(){return Km.remove(a,s)})},unblock:function(e,t,n){Ma(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()}}),gO=[nn("getRoot",b.none),ns("onBlock"),ns("onUnblock")],bO=Ks({fields:gO,name:"blocking",apis:vO,state:Object.freeze({__proto__:null,init:function(){var e=GT();return to({readState:e.isSet,blockWith:function(t){e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),yO=Od({name:"ModalDialog",configFields:mO(),partFields:hO(),factory:function(e,t,n,r){var o,i=sn(b.none()),s=Va("modal-events"),c=d(d({},e.eventOrder),((o={})[Cr()]=[s].concat(e.eventOrder["alloy.system.attached"]||[]),o));return{uid:e.uid,dom:e.dom,components:t,apis:{show:function(t){i.set(b.some(t));var n=e.lazySink(t).getOrDie(),a=r.blocker(),o=n.getSystem().build(d(d({},a),{components:a.components.concat([oi(t)]),behaviours:Ys([tp.config({}),Qm("dialog-blocker-events",[Qr(Zn(),function(){jm.focusIn(t)})])])}));Hl(n,o),jm.focusIn(t)},hide:function(e){i.set(b.none()),da(e.element).each(function(t){e.getSystem().getByDom(t).each(function(e){Wl(e)})})},getBody:function(t){return vd(t,e,"body")},getFooter:function(t){return vd(t,e,"footer")},setIdle:function(e){bO.unblock(e)},setBusy:function(e,t){bO.block(e,t)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Iu(e.modalBehaviours,[Km.config({}),jm.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),bO.config({getRoot:i.get}),Qm(s,[Xr(function(t){var n,r,o,i,s,c;n=t.element,r=vd(t,e,"title").element,o=Da(n,"id").fold(function(){var e=Va("dialog-label");return Na(r,"id",e),e},a),Na(n,"aria-labelledby",o),i=t.element,s=vd(t,e,"body").element,c=b.from(Ta(i,"id")).fold(function(){var e=Va("dialog-describe");return Na(s,"id",e),e},a),Na(i,"aria-describedby",c)})])])}},apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),wO=it([Bt("type"),Bt("name")].concat(lv)),xO=Ot,kO=[mt("name","name",Pe(function(){return Va("button-name")}),Mt),Yt("icon"),en("align","end",["start","end"]),tn("primary",!1),tn("disabled",!1)],_O=m(kO,[Bt("text")]),SO=m([$t("type",["submit","cancel","custom"])],_O),CO=m([$t("type",["menu"]),Yt("text"),Yt("tooltip"),Yt("icon"),Ht("items",wO)],kO),NO=Nt("type",{submit:SO,cancel:SO,custom:SO,menu:CO}),TO=[Bt("type"),Bt("text"),$t("level",["info","warn","error","success"]),Bt("icon"),Qt("url","")],DO=it(TO),IO=[Bt("type"),Bt("text"),tn("disabled",!1),tn("primary",!1),mt("name","name",Pe(function(){return Va("button-name")}),Mt),Yt("icon"),tn("borderless",!1)],MO=it(IO),OO=[Bt("type"),Bt("name"),Bt("label"),tn("disabled",!1)],AO=it(OO),LO=Ot,EO=[Bt("type"),Bt("name")],zO=EO.concat([Yt("label")]),RO=zO.concat([Qt("columns","auto")]),VO=it(RO),BO=gt([Bt("value"),Bt("text"),Bt("icon")]),$O=it(zO),UO=Mt,PO=it(zO),FO=Mt,HO=EO.concat([Zt("tag","textarea"),Bt("scriptId"),Bt("scriptUrl"),function(e,t){return Xt(e,t,Et)}("settings",void 0)]),jO=EO.concat([Zt("tag","textarea"),Ut("init")]),qO=yt(function(e){return xt("customeditor.old",ot(jO),e).orThunk(function(){return xt("customeditor.new",ot(HO),e)})}),WO=Mt,YO=it(zO),GO=st(vt),KO=function(e){return[Bt("type"),(t="columns",Vt(t,It)),e];var t},QO=[Bt("type"),Bt("html"),en("presets","presentation",["presentation","document"])],XO=it(QO),JO=zO.concat([tn("sandboxed",!0)]),ZO=it(JO),eA=Mt,tA=zO.concat([Vt("currentState",it([Rt("blob"),Bt("url")]))]),nA=it(tA),rA=zO.concat([Yt("inputMode"),Yt("placeholder"),tn("maximized",!1),tn("disabled",!1)]),aA=it(rA),oA=Mt,iA=[Bt("text"),Bt("value")],sA=[Bt("text"),Ht("items",function(e,t){return n=t,r=Re(function(){return n()}),{extract:function(e,t,n){return r().extract(e,t,n)},toString:function(){return r().toString()}};var n,r}(0,function(){return cA}))],cA=ct([it(iA),it(sA)]),lA=zO.concat([Ht("items",cA),tn("disabled",!1)]),uA=it(lA),dA=Mt,fA=zO.concat([Ft("items",[Bt("text"),Bt("value")]),Jt("size",1),tn("disabled",!1)]),mA=it(fA),pA=Mt,hA=zO.concat([tn("constrain",!0),tn("disabled",!1)]),vA=it(hA),gA=it([Bt("width"),Bt("height")]),bA=[Bt("type"),Ht("header",Mt),Ht("cells",st(Mt))],yA=it(bA),wA=zO.concat([Yt("placeholder"),tn("maximized",!1),tn("disabled",!1)]),xA=it(wA),kA=Mt,_A=zO.concat([en("filetype","file",["image","media","file"]),Qt("disabled",!1)]),SA=it(_A),CA=it([Bt("value"),Qt("meta",{})]),NA=function(e){return mt("items","items",$e(),st(yt(function(t){return xt("Checking item of "+e,TA,t).fold(function(e){return ie.error(St(e))},function(e){return ie.value(e)})})))},TA=bt(function(){return Ct("type",{alertbanner:DO,bar:it((e=NA("bar"),[Bt("type"),e])),button:MO,checkbox:AO,colorinput:$O,colorpicker:PO,dropzone:YO,grid:it(KO(NA("grid"))),iframe:ZO,input:aA,listbox:uA,selectbox:mA,sizeinput:vA,textarea:xA,urlinput:SA,customeditor:qO,htmlpanel:XO,imagetools:nA,collection:VO,label:it(function(e){return[Bt("type"),Bt("label"),e]}(NA("label"))),table:yA,panel:IA});var e}),DA=[Bt("type"),Qt("classes",[]),Ht("items",TA)],IA=it(DA),MA=[mt("name","name",Pe(function(){return Va("tab-name")}),Mt),Bt("title"),Ht("items",TA)],OA=[Bt("type"),Ft("tabs",MA)],AA=it(OA),LA=_O,EA=NO,zA=it([Bt("title"),Vt("body",Ct("type",{panel:IA,tabpanel:AA})),Zt("size","normal"),Ht("buttons",EA),Qt("initialData",{}),nn("onAction",t),nn("onChange",t),nn("onSubmit",t),nn("onClose",t),nn("onCancel",t),Qt("onTabChange",t)]),RA=it(m([$t("type",["cancel","custom"])],LA)),VA=it([Bt("title"),Bt("url"),Wt("height"),Wt("width"),function(e,t){return qt(e,st(t))}("buttons",RA),nn("onAction",t),nn("onCancel",t),nn("onClose",t),nn("onMessage",t)]),BA=function(e){return k(e)?[e].concat(G(Te(e),BA)):_(e)?G(e,BA):[]},$A=function(e){return x(e.type)&&x(e.name)},UA={checkbox:LO,colorinput:UO,colorpicker:FO,dropzone:GO,input:oA,iframe:eA,sizeinput:gA,selectbox:pA,listbox:dA,size:gA,textarea:kA,urlinput:CA,customeditor:WO,collection:BO,togglemenuitem:xO},PA=function(e){var t=function(e){return F(BA(e),$A)}(e),n=G(t,function(e){return function(e){return b.from(UA[e.type])}(e).fold(function(){return[]},function(t){return[Vt(e.name,t)]})});return it(n)},FA=function(e){return{internalDialog:kt(xt("dialog",zA,e)),dataValidator:PA(e),initialData:e.initialData}},HA={open:function(e,t){var n=FA(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(e,t){return e(kt(xt("dialog",VA,t)))},redial:function(e){return FA(e)}},jA=function(e){var t=[],n={};return xe(e,function(e,r){e.fold(function(){t.push(r)},function(e){n[r]=e})}),t.length>0?ie.error(t):ie.value(n)},qA=Md({name:"TabButton",configFields:[Qt("uid",void 0),Rt("value"),mt("dom","dom",Fe(function(){return{attributes:{role:"tab",id:Va("aria"),"aria-selected":"false"}}}),Tt()),jt("action"),Qt("domModification",{}),Tu("tabButtonBehaviours",[tp,jm,Nu]),Rt("view")],factory:function(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:hp(e.action),behaviours:Iu(e.tabButtonBehaviours,[tp.config({}),jm.config({mode:"execution",useSpace:!0,useEnter:!0}),Nu.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}}}),WA=r([Rt("tabs"),Rt("dom"),Qt("clickToDismiss",!1),Tu("tabbarBehaviours",[Gd,jm]),es(["tabClass","selectedClass"])]),YA=ad({factory:qA,name:"tabs",unit:"tab",overrides:function(e){var n=function(e,t){Gd.dehighlight(e,t),Rr(e,Ar(),{tabbar:e,button:t})},r=function(e,t){Gd.highlight(e,t),Rr(e,Or(),{tabbar:e,button:t})};return{action:function(a){var o=a.getSystem().getByUid(e.uid).getOrDie(),i=Gd.isHighlighted(o,a);(i&&e.clickToDismiss?n:i?t:r)(o,a)},domModification:{classes:[e.markers.tabClass]}}}}),GA=r([YA]),KA=Od({name:"Tabbar",configFields:WA(),partFields:GA(),factory:function(e,t,n,r){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Iu(e.tabbarBehaviours,[Gd.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function(e,t){Na(t.element,"aria-selected","true")},onDehighlight:function(e,t){Na(t.element,"aria-selected","false")}}),jm.config({mode:"flow",getInitial:function(e){return Gd.getHighlighted(e).map(function(e){return e.element})},selector:"."+e.markers.tabClass,executeOnMove:!0})])}}}),QA=Md({name:"Tabview",configFields:[Tu("tabviewBehaviours",[Km])],factory:function(e,t){return{uid:e.uid,dom:e.dom,behaviours:Iu(e.tabviewBehaviours,[Km.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),XA=r([Qt("selectFirst",!0),ns("onChangeTab"),ns("onDismissTab"),Qt("tabs",[]),Tu("tabSectionBehaviours",[])]),JA=td({factory:KA,schema:[Rt("dom"),Pt("markers",[Rt("tabClass"),Rt("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs}}}),ZA=td({factory:QA,name:"tabview"}),eL=r([JA,ZA]),tL=Od({name:"TabSection",configFields:XA(),partFields:eL(),factory:function(e,t,n,r){var a=function(t,n){hd(t,e,"tabbar").each(function(e){n(e).each(Vr)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:Du(e.tabSectionBehaviours),events:Pr(Y([e.selectFirst?[Xr(function(e,t){a(e,Gd.getFirst)})]:[],[jr(Or(),function(t,n){!function(t){var n=Nu.getValue(t);hd(t,e,"tabview").each(function(r){q(e.tabs,function(e){return e.value===n}).each(function(n){var a=n.view();Da(t.element,"id").each(function(e){Na(r.element,"aria-labelledby",e)}),Km.set(r,a),e.onChangeTab(r,t,a)})})}(n.event.button)}),jr(Ar(),function(t,n){var r=n.event.button;e.onDismissTab(t,r)})]])),apis:{getViewItems:function(t){return hd(t,e,"tabview").map(function(e){return Km.contents(e)}).getOr([])},showTab:function(e,t){a(e,function(e){var n=Gd.getCandidates(e);return q(n,function(e){return Nu.getValue(e)===t}).filter(function(t){return!Gd.isHighlighted(e,t)})})}}}},apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),nL=function(e,t){Bo(e,"height",t+"px"),On().browser.isIE()?qo(e,"flex-basis"):Bo(e,"flex-basis",t+"px")},rL=function(e,t,n){Vi(e,'[role="dialog"]').each(function(e){Bi(e,'[role="tablist"]').each(function(r){n.get().map(function(n){return Bo(t,"height","0"),Bo(t,"flex-basis","0"),Math.min(n,function(e,t,n){var r,a=la(e).dom,o=Vi(e,".tox-dialog-wrap").getOr(e);r="fixed"===Po(o,"position")?Math.max(a.clientHeight,window.innerHeight):Math.max(a.offsetHeight,a.scrollHeight);var i=ci(t),s=t.dom.offsetLeft>=n.dom.offsetLeft+vi(n)?Math.max(ci(n),i):i,c=parseInt(Po(e,"margin-top"),10)||0,l=parseInt(Po(e,"margin-bottom"),10)||0;return r-(ci(e)+c+l-s)}(e,t,r))}).each(function(e){nL(t,e)})})})},aL=function(e){return Bi(e,'[role="tabpanel"]')},oL=function(e){var t;return{smartTabHeight:(t=sn(b.none()),{extraEvents:[Xr(function(n){var r=n.element;aL(r).each(function(a){Bo(a,"visibility","hidden"),n.getSystem().getByDom(a).toOptional().each(function(n){var r=function(e){return ee(J(e,function(e,t){return e>t?-1:e<t?1:0}))}(function(e,t,n){return $(e,function(r,a){Km.set(n,e[a].view());var o=t.dom.getBoundingClientRect();return Km.set(n,[]),o.height})}(e,a,n));t.set(r)}),rL(r,a,t),qo(a,"visibility"),function(e,t){ee(e).each(function(e){return tL.showTab(t,e.value)})}(e,n),Yp.requestAnimationFrame(function(){rL(r,a,t)})})}),jr(Sr(),function(e){var n=e.element;aL(n).each(function(e){rL(n,e,t)})}),jr(Oy,function(e,n){var r=e.element;aL(r).each(function(e){var n=nc();Bo(e,"visibility","hidden");var a=Ho(e,"height").map(function(e){return parseInt(e,10)});qo(e,"height"),qo(e,"flex-basis");var o=e.dom.getBoundingClientRect().height;a.forall(function(e){return o>e})?(t.set(b.from(o)),rL(r,e,t)):a.each(function(t){nL(e,t)}),qo(e,"visibility"),n.each(tc)})})],selectFirst:!1}),naiveTabHeight:{extraEvents:[],selectFirst:!0}}},iL=Va("update-dialog"),sL=Va("update-title"),cL=Va("update-body"),lL=Va("update-footer"),uL=Va("body-send-message"),dL=function(e,t,n,r){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:d(d({},t.map(function(e){return{id:e}}).getOr({})),r?{"aria-live":"polite"}:{})},components:[],behaviours:Ys([xk(0),nT.config({channel:cL,updateState:function(e,t){return b.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){switch(e.body.type){case"tabpanel":return[function(e,t){var n=sn({}),r=function(e){var t=Nu.getValue(e),r=jA(t).getOr({}),a=n.get(),o=Ee(a,r);n.set(o)},a=function(e){var t=n.get();Nu.setValue(e,t)},o=sn(null),s=$(e.tabs,function(e){return{value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(e.title)},view:function(){return[fk.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:$(e.items,function(e){return cC(n,e,t)}),formBehaviours:Ys([jm.config({mode:"acyclic",useTabstopAt:i(Uk)}),Qm("TabView.form.events",[Xr(a),Jr(r)]),Zs.config({channels:We([{key:"send-data-to-section",value:{onReceive:r}},{key:"send-data-to-view",value:{onReceive:a}}])})])}})]}}}),c=oL(s).smartTabHeight;return tL.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(e,t,n){var r=Nu.getValue(t);Rr(e,My,{name:r,oldName:o.get()}),o.set(r)},tabs:s,components:[tL.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[KA.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ys([gy.config({})])}),tL.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:c.selectFirst,tabSectionBehaviours:Ys([Qm("tabpanel",c.extraEvents),jm.config({mode:"acyclic"}),Vd.config({find:function(e){return ee(tL.getViewItems(e))}}),Nu.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn(["send-data-to-section"],{}),n.get()},setValue:function(e,t){n.set(t),e.getSystem().broadcastOn(["send-data-to-view"],{})}}})])})}(e.body,n)];default:return[function(e,t){var n=Kp(fk.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:$(e.items,function(e){return cC(n,e,t)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Ys([jm.config({mode:"acyclic",useTabstopAt:i(Uk)}),wk(n),Ik(n,{postprocess:function(e){return jA(e).fold(function(e){return console.error(e),{}},function(e){return e})}})])}}(e.body,n)]}},initialData:e})])}},fL=Ng.deviceType.isTouch(),mL=function(e,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}},pL=function(e,t){return yO.parts.close(Gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Ys([gy.config({})])}))},hL=function(){return yO.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},vL=function(e,t){return yO.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:sI("<p>"+t.translate(e)+"</p>")}]}]})},gL=function(e){return yO.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},bL=function(e,t){return[uy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),uy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},yL=function(e){var t,n="tox-dialog",r=n+"-wrap",a=r+"__backdrop",o=n+"__disable-scroll";return yO.sketch({lazySink:e.lazySink,onEscape:function(t){return e.onEscape(t),b.some(!0)},useTabstopAt:function(e){return!Uk(e)},dom:{tag:"div",classes:[n].concat(e.extraClasses),styles:d({position:"relative"},e.extraStyles)},components:m([e.header,e.body],e.footer.toArray()),parts:{blocker:{dom:sI('<div class="'+r+'"></div>'),components:[{dom:{tag:"div",classes:fL?[a,a+"--opaque"]:[a]}}]}},dragBlockClass:r,modalBehaviours:Ys(m([tp.config({}),Qm("dialog-events",e.dialogEvents.concat([Qr(Zn(),function(e,t){jm.focusIn(e)})])),Qm("scroll-lock",[Xr(function(){bo(Eo(),o)}),Jr(function(){wo(Eo(),o)})])],e.extraBehaviours)),eventOrder:d((t={},t[pr()]=["dialog-events"],t[Cr()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[Nr()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),e.eventOrder)})},wL=function(e){return Gp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:Xp("close",e.icons)}}],action:function(e){zr(e,Cy)}})},xL=function(e,t,n){var r=function(e){return[ti(n.translate(e.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:d({},t.map(function(e){return{id:e}}).getOr({}))},components:r(e),behaviours:Ys([nT.config({channel:sL,renderComponents:r})])}},kL=function(){return{dom:sI('<div class="tox-dialog__draghandle"></div>')}},_L=function(e,t){return n={title:t.shared.providers.translate(e),draggable:t.dialog.isDraggableModal()},r=t.shared.providers,a=yO.parts.title(xL(n,b.none(),r)),o=yO.parts.draghandle(kL()),i=yO.parts.close(wL(r)),s=[a].concat(n.draggable?[o]:[]).concat([i]),uy.sketch({dom:sI('<div class="tox-dialog__header"></div>'),components:s});var n,r,a,o,i,s},SL=function(e,t){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:sI('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},CL=function(e,t){return{onClose:function(){return t.closeWindow()},onBlock:function(t){yO.setBusy(e(),function(e,n){return SL(t.message,n)})},onUnblock:function(){yO.setIdle(e())}}},NL=function(e,t,n,r){var a;return ai(yL(d(d({},e),{lazySink:r.shared.getSink,extraBehaviours:m([nT.config({channel:iL,updateState:function(e,t){return b.some(t)},initialData:t}),Ak({})],e.extraBehaviours),onEscape:function(e){zr(e,Cy)},dialogEvents:n,eventOrder:(a={},a[mr()]=[nT.name(),Zs.name()],a[Cr()]=["scroll-lock",nT.name(),"messages","dialog-events","alloy.base.behaviour"],a[Nr()]=["alloy.base.behaviour","dialog-events","messages",nT.name(),"scroll-lock"],a)})))},TL=function(e){return $(e,function(e){return"menu"===e.type?function(e){var t=$(e.items,function(e){var t=sn(!1);return d(d({},e),{storage:t})});return d(d({},e),{items:t})}(e):e})},DL=function(e){return j(e,function(e,t){return"menu"===t.type?j(t.items,function(e,t){return e[t.name]=t.storage,e},e):e},{})},IL=function(e,t){return[Gr(Zn(),$k),e(Sy,function(e,n){t.onClose(),n.onClose()}),e(Cy,function(e,t,n,r){t.onCancel(e),zr(r,Sy)}),jr(Iy,function(e,n){return t.onUnblock()}),jr(Dy,function(e,n){return t.onBlock(n.event)})]},ML=function(e,t){var n=function(t,n){return jr(t,function(t,a){r(t,function(r,o){n(e(),r,a.event,t)})})},r=function(e,t){nT.getState(e).get().each(function(n){t(n,e)})};return m(IL(n,t),[n(Ny,function(e,t,n){t.onAction(e,{name:n.name})})])},OL=function(e,t,n){var r=function(t,n){return jr(t,function(t,r){a(t,function(a,o){n(e(),a,r.event,t)})})},a=function(e,t){nT.getState(e).get().each(function(n){t(n.internalDialog,e)})};return m(IL(r,t),[r(Ty,function(e,t){return t.onSubmit(e)}),r(_y,function(e,t,n){t.onChange(e,{name:n.name})}),r(Ny,function(e,t,r,a){var o=function(){return jm.focusIn(a)},i=function(e){return Ia(e,"disabled")||Da(e,"aria-disabled").exists(function(e){return"true"===e})},s=Do(a.element),c=nc(s);t.onAction(e,{name:r.name,value:r.value}),nc(s).fold(o,function(e){i(e)?o():c.exists(function(t){return Rn(e,t)&&i(t)})?o():n().toOptional().filter(function(t){return!Rn(t.element,e)}).each(o)})}),r(My,function(e,t,n){t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})}),Jr(function(t){var n=e();Nu.setValue(t,n.getData())})])},AL=function(e,t){var n=t.map(function(e){return e.footerButtons}).getOr([]),r=P(n,function(e){return"start"===e.align}),a=function(e,t){return uy.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:$(t,function(e){return e.memento.asSpec()})})};return[a("start",r.pass),a("end",r.fail)]},LL=function(e,t){return{dom:sI('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ys([nT.config({channel:lL,initialData:e,updateState:function(e,n){var r=$(n.buttons,function(e){var n=Kp(function(e,t){return Z_(e,e.type,t)}(e,t));return{name:e.name,align:e.align,memento:n}});return b.some({lookupByName:function(e,t){return function(e,t,n){return q(t,function(e){return e.name===n}).bind(function(t){return t.memento.getOpt(e)})}(e,r,t)},footerButtons:r})},renderComponents:AL})])}},EL=function(e,t){return yO.parts.footer(LL(e,t))},zL=function(e,t){if(e.getRoot().getSystem().isConnected()){var n=Vd.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return fk.getField(n,t).fold(function(){var r=e.getFooter();return nT.getState(r).get().bind(function(e){return e.lookupByName(n,t)})},function(e){return b.some(e)})}return b.none()},RL=function(e,t,n){var r=function(t){var n=e.getRoot();n.getSystem().isConnected()&&t(n)},a={getData:function(){var t=e.getRoot(),r=t.getSystem().isConnected()?e.getFormWrapper():t,a=Nu.getValue(r),o=ke(n,function(e){return e.get()});return d(d({},a),o)},setData:function(t){r(function(r){var o=a.getData(),i=d(d({},o),t),s=function(e,t){var n=e.getRoot();return nT.getState(n).get().map(function(e){return kt(xt("data",e.dataValidator,t))}).getOr(t)}(e,i),c=e.getFormWrapper();Nu.setValue(c,s),xe(n,function(e,t){Ie(i,t)&&e.set(i[t])})})},disable:function(t){zL(e,t).each(Fv.disable)},enable:function(t){zL(e,t).each(Fv.enable)},focus:function(t){zL(e,t).each(tp.focus)},block:function(e){if(!x(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(function(t){Rr(t,Dy,{message:e})})},unblock:function(){r(function(e){zr(e,Iy)})},showTab:function(t){r(function(n){var r=e.getBody();nT.getState(r).get().exists(function(e){return e.isTabPanel()})&&Vd.getCurrent(r).each(function(e){tL.showTab(e,t)})})},redial:function(e){r(function(n){var r=t(e);n.getSystem().broadcastOn([iL],r),n.getSystem().broadcastOn([sL],r.internalDialog),n.getSystem().broadcastOn([cL],r.internalDialog),n.getSystem().broadcastOn([lL],r.internalDialog),a.setData(r.initialData)})},close:function(){r(function(e){zr(e,Sy)})}};return a},VL=function(e,t,n){var r=_L(e.internalDialog.title,n),a=function(e,t){var n=dL(e,b.none(),t,!1);return yO.parts.body(n)}({body:e.internalDialog.body},n),o=TL(e.internalDialog.buttons),i=DL(o),s=EL({buttons:o},n),c=OL(function(){return f},CL(function(){return d},t),n.shared.getSink),l=function(e){switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(e.internalDialog.size),u={header:r,body:a,footer:b.some(s),extraClasses:l,extraBehaviours:[],extraStyles:{}},d=NL(u,e,c,n),f=RL({getRoot:function(){return d},getBody:function(){return yO.getBody(d)},getFooter:function(){return yO.getFooter(d)},getFormWrapper:function(){var e=yO.getBody(d);return Vd.getCurrent(e).getOr(e)}},t.redial,i);return{dialog:d,instanceApi:f}},BL=function(e,t,n,r){var a,o,i,s,c,l=Va("dialog-label"),u=Va("dialog-content"),d=Kp((i={title:e.internalDialog.title,draggable:!0},s=l,c=n.shared.providers,uy.sketch({dom:sI('<div class="tox-dialog__header"></div>'),components:[xL(i,b.some(s),c),kL(),wL(c)],containerBehaviours:Ys([rO.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return $i(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),f=Kp(function(e,t,n,r){return dL(e,b.some(t),n,r)}({body:e.internalDialog.body},u,n,r)),m=TL(e.internalDialog.buttons),p=DL(m),h=Kp(function(e,t){return LL(e,t)}({buttons:m},n)),v=OL(function(){return y},{onBlock:function(e){bO.block(g,function(t,n){return SL(e.message,n)})},onUnblock:function(){bO.unblock(g)},onClose:function(){return t.closeWindow()}},n.shared.getSink),g=ai({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(a={role:"dialog"},a["aria-labelledby"]=l,a["aria-describedby"]=""+u,a)},eventOrder:(o={},o[mr()]=[nT.name(),Zs.name()],o[pr()]=["execute-on-form"],o[Cr()]=["reflecting","execute-on-form"],o),behaviours:Ys([jm.config({mode:"cyclic",onEscape:function(e){return zr(e,Sy),b.some(!0)},useTabstopAt:function(e){return!Uk(e)&&("button"!==ta(e)||"disabled"!==Ta(e,"disabled"))}}),nT.config({channel:iL,updateState:function(e,t){return b.some(t)},initialData:e}),tp.config({}),Qm("execute-on-form",v.concat([Qr(Zn(),function(e,t){jm.focusIn(e)})])),bO.config({getRoot:function(){return b.some(g)}}),Km.config({}),Ak({})]),components:[d.asSpec(),f.asSpec(),h.asSpec()]}),y=RL({getRoot:function(){return g},getFooter:function(){return h.get(g)},getBody:function(){return f.get(g)},getFormWrapper:function(){var e=f.get(g);return Vd.getCurrent(e).getOr(e)}},t.redial,p);return{dialog:g,instanceApi:y}},$L=tinymce.util.Tools.resolve("tinymce.util.URI"),UL=["insertContent","setContent","execCommand","close","block","unblock"],PL=function(e){return k(e)&&-1!==UL.indexOf(e.mceAction)},FL=function(e,t,n,r){var a,o,s,c=_L(e.title,r),l=function(e){var t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Vk({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Ys([gy.config({}),tp.config({})])})]}],behaviours:Ys([jm.config({mode:"acyclic",useTabstopAt:i(Uk)})])};return yO.parts.body(t)}(e),u=e.buttons.bind(function(e){return 0===e.length?b.none():b.some(EL({buttons:e},r))}),f=ML(function(){return _},CL(function(){return w},t)),m=d(d({},e.height.fold(function(){return{}},function(e){return{height:e+"px","max-height":e+"px"}})),e.width.fold(function(){return{}},function(e){return{width:e+"px","max-width":e+"px"}})),p=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],h=new $L(e.url,{base_uri:new $L(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),g=sn(b.none()),y=[Qm("messages",[Xr(function(){var t=jb(ln.fromDom(window),"message",function(t){if(h.isSameOrigin(new $L(t.raw.origin))){var r=t.raw.data;PL(r)?function(e,t,n){switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":var r=!!S(n.ui)&&n.ui;e.execCommand(n.cmd,r,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}}(n,_,r):function(e){return!PL(e)&&k(e)&&Ie(e,"mceAction")}(r)&&e.onMessage(_,r)}});g.set(b.some(t))}),Jr(function(){g.get().each(function(e){return e.unbind()})})]),Zs.config({channels:(a={},a[uL]={onReceive:function(e,t){Bi(e.element,"iframe").each(function(e){e.dom.contentWindow.postMessage(t,v)})}},a)})],w=NL({header:c,body:l,footer:u,extraClasses:p,extraBehaviours:y,extraStyles:m},e,f,r),_=(o=w,s=function(e){o.getSystem().isConnected()&&e(o)},{block:function(e){if(!x(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(function(t){Rr(t,Dy,{message:e})})},unblock:function(){s(function(e){zr(e,Iy)})},close:function(){s(function(e){zr(e,Sy)})},sendMessage:function(e){s(function(t){t.getSystem().broadcastOn([uL],e)})}});return{dialog:w,instanceApi:_}},HL=function(e){var t=e.backstage,n=e.editor,r=ug(n),a=function(e){var t=e.backstage.shared;return{open:function(n,r){var a=function(){yO.hide(c),r()},o=Kp(Z_({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:b.none()},"cancel",e.backstage)),i=hL(),s=pL(a,t.providers),c=ai(yL({lazySink:function(){return t.getSink()},header:mL(i,s),body:vL(n,t.providers),footer:b.some(gL(bL([],[o.asSpec()]))),onEscape:a,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[jr(Cy,a)],eventOrder:{}}));yO.show(c);var l=o.get(c);tp.focus(l)}}}(e),o=function(e){var t=e.backstage.shared;return{open:function(n,r){var a=function(e){yO.hide(l),r(e)},o=Kp(Z_({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:b.none()},"submit",e.backstage)),i=Z_({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:b.none()},"cancel",e.backstage),s=hL(),c=pL(function(){return a(!1)},t.providers),l=ai(yL({lazySink:function(){return t.getSink()},header:mL(s,c),body:vL(n,t.providers),footer:b.some(gL(bL([],[i,o.asSpec()]))),onEscape:function(){return a(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[jr(Cy,function(){return a(!1)}),jr(Ty,function(){return a(!0)})],eventOrder:{}}));yO.show(l);var u=o.get(l);tp.focus(u)}}}(e),i=function(e,r){return HA.openUrl(function(e){var a=FL(e,{closeWindow:function(){yO.hide(a.dialog),r(a.instanceApi)}},n,t);return yO.show(a.dialog),a.instanceApi},e)},s=function(e,n){return HA.open(function(e,r,a){var o=r,i=VL({dataValidator:a,initialData:o,internalDialog:e},{redial:HA.redial,closeWindow:function(){yO.hide(i.dialog),n(i.instanceApi)}},t);return yO.show(i.dialog),i.instanceApi.setData(o),i.instanceApi},e)},c=function(e,a,o,i){return HA.open(function(e,s,c){var l,u=kt(xt("data",c,s)),f=(l=sn(b.none()),{clear:function(){return l.set(b.none())},set:function(e){return l.set(b.some(e))},isSet:function(){return l.get().isSome()},on:function(e){return l.get().each(e)}}),p=t.shared.header.isPositionedAtTop(),h=function(){return f.on(function(e){zp.reposition(e),PD.refresh(e)})},v=BL({dataValidator:c,initialData:u,internalDialog:e},{redial:HA.redial,closeWindow:function(){f.on(zp.hide),n.off("ResizeEditor",h),f.clear(),o(v.instanceApi)}},t,i),g=ai(zp.sketch(d(d({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},p?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Ys(m([Qm("window-manager-inline-events",[jr(Tr(),function(e,t){zr(v.dialog,Cy)})])],function(e,t,n){return t&&n?[]:[PD.config({contextual:{lazyContext:function(){return b.some(Ii(ln.fromDom(e.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]}(n,r,p))),isExtraPart:function(e,t){return function(e){return Yb(e,".tox-alert-dialog")||Yb(e,".tox-confirm-dialog")}(t)}})));return f.set(g),zp.showWithin(g,a,oi(v.dialog),b.some(Eo())),r&&p||(PD.refresh(g),n.on("ResizeEditor",h)),v.instanceApi.setData(u),jm.focusIn(v.dialog),v.instanceApi},e)};return{open:function(e,n,r){return void 0!==n&&"toolbar"===n.inline?c(e,t.shared.anchors.inlineDialog(),r,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?c(e,t.shared.anchors.cursor(),r,n.ariaAttrs):s(e,r)},openUrl:function(e,t){return i(e,t)},alert:function(e,t){a.open(e,function(){t()})},close:function(e){e.close()},confirm:function(e,t){o.open(e,function(e){t(e)})}}};u.add("silver",function(e){var t=fO(e),n=t.uiMothership,a=t.backstage,o=t.renderUI,i=t.getUi;Fb.register(e,a.shared);var s=HL({editor:e,backstage:a});return{renderUI:o,getWindowManagerImpl:r(s),getNotificationManagerImpl:function(){return eh(0,{backstage:a},n)},ui:i()}})}()}).call(t,n("DuR2"))},BDhv:function(e,t,n){var r=n("kM2E");r(r.P+r.R,"Set",{toJSON:n("m9gC")("Set")})},BzBW:function(e,t){!function(){"use strict";var e=function(){},t=function(e){return function(){return e}},n=function(e){return e};function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=t.concat(n);return e.apply(null,a)}}var a,o=function(e){return function(t){return!e(t)}},i=t(!1),s=t(!0),c=function(){return l},l=function(){var n=function(e){return e.isNone()},r=function(e){return e()},a=function(e){return e};return{fold:function(e,t){return e()},is:i,isSome:i,isNone:s,getOr:a,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:t(null),getOrUndefined:t(void 0),or:a,orThunk:r,map:c,each:e,bind:c,exists:i,forall:s,filter:c,equals:n,equals_:n,toArray:function(){return[]},toString:t("none()")}}(),u=function(e){var n=t(e),r=function(){return o},a=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:i,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(t){return u(t(e))},each:function(t){t(e)},bind:a,exists:a,forall:a,filter:function(t){return t(e)?o:l},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(i,function(t){return n(e,t)})}};return o},d={some:u,none:c,from:function(e){return null===e||void 0===e?l:u(e)}},f=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},m=function(e){return function(t){return typeof t===e}},p=f("string"),h=f("object"),v=f("array"),g=m("boolean"),b=(a=void 0,function(e){return a===e}),y=function(e){return!function(e){return null===e||void 0===e}(e)},w=m("function"),x=m("number"),k=Array.prototype.slice,_=Array.prototype.indexOf,S=Array.prototype.push,C=function(e,t){return n=e,r=t,_.call(n,r)>-1;var n,r},N=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},T=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},D=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var o=e[a];r[a]=t(o,a)}return r},I=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},M=function(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var o=e[r];t(o,r)&&n.push(o)}return n},O=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,function(e){n=t(n,e)}),n},A=function(e,t,n){return I(e,function(e){n=t(n,e)}),n},L=function(e,t){return function(e,t,n){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t(o,r))return d.some(o);if(n(o,r))break}return d.none()}(e,t,i)},E=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return d.some(n)}return d.none()},z=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!v(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t},R=function(e,t){return z(D(e,t))},V=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},B=function(e){return[e]},$=function(e,t){return t>=0&&t<e.length?d.some(e[t]):d.none()},U=function(e){return $(e,e.length-1)},P=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return d.none()},F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function H(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}var j=function(e){var t,n=!1;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return n||(n=!0,t=e.apply(null,r)),t}},q=function(){return W(0,0)},W=function(e,t){return{major:e,minor:t}},Y={nu:W,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?q():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return W(r(1),r(2))}(e,n)},unknown:q},G=function(e,t){var n=String(t).toLowerCase();return L(e,function(e){return e.search(n)})},K=function(e,t){return G(e,t).map(function(e){var n=Y.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Q=function(e,t){return G(e,t).map(function(e){var n=Y.detect(e.versionRegexes,t);return{current:e.name,version:n}})},X=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},J=function(e,t){return-1!==e.indexOf(t)},Z=function(e,t){return X(e,t,0)},ee=function(e,t){return X(e,t,e.length-t.length)},te=function(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),ne=function(e){return e.length>0},re=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ae=function(e){return function(t){return J(t,e)}},oe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return J(e,"edge/")&&J(e,"chrome")&&J(e,"safari")&&J(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,re],search:function(e){return J(e,"chrome")&&!J(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return J(e,"msie")||J(e,"trident")}},{name:"Opera",versionRegexes:[re,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ae("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ae("firefox")},{name:"Safari",versionRegexes:[re,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(J(e,"safari")||J(e,"mobile/"))&&J(e,"applewebkit")}}],ie=[{name:"Windows",search:ae("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return J(e,"iphone")||J(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ae("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ae("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ae("linux"),versionRegexes:[]},{name:"Solaris",search:ae("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ae("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ae("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],se={browsers:t(oe),oses:t(ie)},ce=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r("Firefox"),isSafari:r("Safari")}},le={unknown:function(){return ce({current:void 0,version:Y.unknown()})},nu:ce,edge:t("Edge"),chrome:t("Chrome"),ie:t("IE"),opera:t("Opera"),firefox:t("Firefox"),safari:t("Safari")},ue=function(e){var t=e.current,n=e.version,r=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:r("Windows"),isiOS:r("iOS"),isAndroid:r("Android"),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r("Solaris"),isFreeBSD:r("FreeBSD"),isChromeOS:r("ChromeOS")}},de={unknown:function(){return ue({current:void 0,version:Y.unknown()})},nu:ue,windows:t("Windows"),ios:t("iOS"),android:t("Android"),linux:t("Linux"),osx:t("OSX"),solaris:t("Solaris"),freebsd:t("FreeBSD"),chromeos:t("ChromeOS")},fe=function(e,n){var r=se.browsers(),a=se.oses(),o=K(r,e).fold(le.unknown,le.nu),i=Q(a,e).fold(de.unknown,de.nu);return{browser:o,os:i,deviceType:function(e,n,r,a){var o=e.isiOS()&&!0===/ipad/i.test(r),i=e.isiOS()&&!o,s=e.isiOS()||e.isAndroid(),c=s||a("(pointer:coarse)"),l=o||!i&&s&&a("(min-device-width:768px)"),u=i||s&&!l,d=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),f=!u&&!l&&!d;return{isiPad:t(o),isiPhone:t(i),isTablet:t(l),isPhone:t(u),isTouch:t(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:t(d),isDesktop:t(f)}}(i,o,e,n)}},me=function(e){return window.matchMedia(e).matches},pe=j(function(){return fe(navigator.userAgent,me)}),he=function(){return pe()},ve=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},ge={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return ve(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return ve(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return ve(n)},fromDom:ve,fromPoint:function(e,t,n){return d.from(e.dom.elementFromPoint(t,n)).map(ve)}},be=function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ye=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},we=function(e,t){return e.dom===t.dom},xe=function(e,t){return n=e.dom,r=t.dom,function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(n,r,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,r},ke=function(e,t){return he().browser.isIE()?xe(e,t):function(e,t){var n=e.dom,r=t.dom;return n!==r&&n.contains(r)}(e,t)},_e=be,Se=Object.keys,Ce=Object.hasOwnProperty,Ne=function(e,t){for(var n=Se(e),r=0,a=n.length;r<a;r++){var o=n[r];t(e[o],o)}},Te=function(e,t){return De(e,function(e,n){return{k:n,v:t(e,n)}})},De=function(e,t){var n={};return Ne(e,function(e,r){var a=t(e,r);n[a.k]=a.v}),n},Ie=function(t,n){var r,a={};return function(e,t,n,r){Ne(e,function(e,a){(t(e,a)?n:r)(e,a)})}(t,n,(r=a,function(e,t){r[t]=e}),e),a},Me=function(e){return function(e,t){var n=[];return Ne(e,function(e,r){n.push(t(e,r))}),n}(e,function(e){return e})},Oe=function(e,t){return Ae(e,t)?d.from(e[t]):d.none()},Ae=function(e,t){return Ce.call(e,t)},Le=["tfoot","thead","tbody","colgroup"],Ee=function(e,t,n){return{element:e,rowspan:t,colspan:n}},ze=function(e,t,n){return{element:e,cells:t,section:n}},Re=function(e,t){return{element:e,isNew:t}},Ve=function(e,t){return{cells:e,section:t}},Be=("undefined"!=typeof window?window:Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),$e=function(e){return e.dom.nodeType},Ue=function(e){return function(t){return $e(t)===e}},Pe=function(e){return 8===$e(e)||"#comment"===Be(e)},Fe=Ue(1),He=Ue(3),je=Ue(9),qe=Ue(11),We=function(e){return ge.fromDom(e.dom.ownerDocument)},Ye=function(e){return je(e)?e:We(e)},Ge=function(e){return d.from(e.dom.parentNode).map(ge.fromDom)},Ke=function(e,t){for(var n=w(t)?t:i,r=e.dom,a=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,s=ge.fromDom(o);if(a.push(s),!0===n(s))break;r=o}return a},Qe=function(e){return d.from(e.dom.previousSibling).map(ge.fromDom)},Xe=function(e){return d.from(e.dom.nextSibling).map(ge.fromDom)},Je=function(e){return D(e.dom.childNodes,ge.fromDom)},Ze=function(e,t){var n=e.dom.childNodes;return d.from(n[t]).map(ge.fromDom)},et=w(Element.prototype.attachShadow)&&w(Node.prototype.getRootNode),tt=t(et),nt=et?function(e){return ge.fromDom(e.dom.getRootNode())}:Ye,rt=function(e){var t=nt(e);return qe(t)?d.some(t):d.none()},at=function(e){return ge.fromDom(e.dom.host)},ot=function(e){if(tt()&&y(e.target)){var t=ge.fromDom(e.target);if(Fe(t)&&it(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return $(n,0)}}return d.from(e.target)},it=function(e){return y(e.dom.shadowRoot)},st=function(e){var t=He(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n,r,a=t.ownerDocument;return rt(ge.fromDom(t)).fold(function(){return a.body.contains(t)},(n=st,r=at,function(e){return n(r(e))}))},ct=function(e){var t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return ge.fromDom(t)},lt=function(e,t){var n=[];return I(Je(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(lt(e,t))}),n},ut=function(e,t,n){return function(e,t,n){return M(Ke(e,n),t)}(e,function(e){return be(e,t)},n)},dt=function(e,t){return function(e,t){return M(Je(e),t)}(e,function(e){return be(e,t)})},ft=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return ye(n)?[]:D(n.querySelectorAll(e),ge.fromDom)}(t,e)};function mt(e,t,n,r,a){return e(n,r)?d.some(n):w(a)&&a(n)?d.none():t(n,r,a)}var pt=function(e,t,n){for(var r=e.dom,a=w(n)?n:i;r.parentNode;){r=r.parentNode;var o=ge.fromDom(r);if(t(o))return d.some(o);if(a(o))break}return d.none()},ht=function(e,t,n){return pt(e,function(e){return be(e,t)},n)},vt=function(e,t){return function(e,t){return L(e.dom.childNodes,function(e){return t(ge.fromDom(e))}).map(ge.fromDom)}(e,function(e){return be(e,t)})},gt=function(e,t){return function(e,t){var n=void 0===t?document:t.dom;return ye(n)?d.none():d.from(n.querySelector(e)).map(ge.fromDom)}(t,e)},bt=function(e,t,n){return mt(function(e,t){return be(e,t)},ht,e,t,n)},yt=function(e,t,n){if(!(p(n)||g(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},wt=function(e,t,n){yt(e.dom,t,n)},xt=function(e,t){var n=e.dom;Ne(t,function(e,t){yt(n,t,e)})},kt=function(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},_t=function(e,t){return d.from(kt(e,t))},St=function(e,t){e.dom.removeAttribute(t)},Ct=function(e){return A(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})},Nt=function(e){return void 0!==e.style&&w(e.style.getPropertyValue)},Tt=function(e,t,n){if(!p(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Nt(e)&&e.style.setProperty(t,n)},Dt=function(e,t,n){var r=e.dom;Tt(r,t,n)},It=function(e,t){var n=e.dom;Ne(t,function(e,t){Tt(n,t,e)})},Mt=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||st(e)?r:Ot(n,t)},Ot=function(e,t){return Nt(e)?e.style.getPropertyValue(t):""},At=function(e,t){var n=e.dom,r=Ot(n,t);return d.from(r).filter(function(e){return e.length>0})},Lt=function(e,t){!function(e,t){Nt(e)&&e.style.removeProperty(t)}(e.dom,t),_t(e,"style").map(te).is("")&&St(e,"style")},Et=function(e,t,n){return void 0===n&&(n=0),_t(e,t).map(function(e){return parseInt(e,10)}).getOr(n)},zt=function(e,t){return Et(e,t,1)},Rt=function(e){return zt(e,"colspan")>1},Vt=function(e){return zt(e,"rowspan")>1},Bt=function(e,t){return parseInt(Mt(e,t),10)},$t=t(10),Ut=t(10),Pt=function(e,t){return Ft(e,t,s)},Ft=function(e,t,n){return R(Je(e),function(e){return be(e,t)?n(e)?[e]:[]:Ft(e,t,n)})},Ht=function(e,t){return function(e,t,n){if(void 0===n&&(n=i),n(t))return d.none();if(C(e,Be(t)))return d.some(t);return ht(t,e.join(","),function(e){return be(e,"table")||n(e)})}(["td","th"],e,t)},jt=function(e){return Pt(e,"th,td")},qt=function(e){return be(e,"colgroup")?dt(e,"col"):R(Gt(e),function(e){return dt(e,"col")})},Wt=function(e,t){return bt(e,"table",t)},Yt=function(e){return Pt(e,"tr")},Gt=function(e){return Wt(e).fold(t([]),function(e){return dt(e,"colgroup")})},Kt=function(e,t){return D(e,function(e){if("colgroup"===Be(e)){var n=D(qt(e),function(e){var t=Et(e,"span",1);return Ee(e,1,t)});return ze(e,n,"colgroup")}n=D(jt(e),function(e){var t=Et(e,"rowspan",1),n=Et(e,"colspan",1);return Ee(e,t,n)});return ze(e,n,t(e))})},Qt=function(e){return Ge(e).map(function(e){var t=Be(e);return function(e){return C(Le,e)}(t)?t:"tbody"}).getOr("tbody")},Xt=function(e){var t=Yt(e),n=H(Gt(e),t);return Kt(n,Qt)},Jt=function(e,t){return e+","+t},Zt=function(e,t){var n=R(e.all,function(e){return e.cells});return M(n,t)},en=function(e){var t={},n=[],r={},a=0,o=0,i=0;return I(e,function(e){if("colgroup"===e.section)r=function(e){var t={},n=0;return I(e.cells,function(e){var r=e.colspan;T(r,function(a){var o=n+a;t[o]=function(e,t,n){return{element:e,colspan:t,column:n}}(e.element,r,o)}),n+=r}),t}(e);else{var s=[];I(e.cells,function(e){for(var n=0;void 0!==t[Jt(i,n)];)n++;for(var r,a,c,l=(r=e.element,a=e.rowspan,c=e.colspan,{element:r,rowspan:a,colspan:c,row:i,column:n}),u=0;u<e.colspan;u++)for(var d=0;d<e.rowspan;d++){var f=n+u,m=Jt(i+d,f);t[m]=l,o=Math.max(o,f+1)}s.push(l)}),a++,n.push(ze(e.element,s,e.section)),i++}}),{grid:function(e,t){return{rows:e,columns:t}}(a,o),access:t,all:n,columns:r}},tn={fromTable:function(e){var t=Xt(e);return en(t)},generate:en,getAt:function(e,t,n){var r=e.access[Jt(t,n)];return void 0!==r?d.some(r):d.none()},findItem:function(e,t,n){var r=Zt(e,function(e){return n(t,e.element)});return r.length>0?d.some(r[0]):d.none()},filterItems:Zt,justCells:function(e){return R(e.all,function(e){return e.cells})},justColumns:function(e){return Me(e.columns)},hasColumns:function(e){return Se(e.columns).length>0},getColumnAt:function(e,t){return d.from(e.columns[t])}},nn=function(e,t){var n=t.column,r=t.column+t.colspan-1,a=t.row,o=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&a<=e.finishRow&&o>=e.startRow},rn=function(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow},an=function(e,t,n){var r=tn.findItem(e,t,we),a=tn.findItem(e,n,we);return r.bind(function(e){return a.map(function(t){return n=e,r=t,a=Math.min(n.row,r.row),o=Math.min(n.column,r.column),i=Math.max(n.row+n.rowspan-1,r.row+r.rowspan-1),s=Math.max(n.column+n.colspan-1,r.column+r.colspan-1),{startRow:a,startCol:o,finishRow:i,finishCol:s};var n,r,a,o,i,s})})},on=function(e,t,n){return an(e,t,n).bind(function(t){return function(e,t){for(var n=!0,a=r(rn,t),o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++)n=n&&tn.getAt(e,o,i).exists(a);return n?d.some(t):d.none()}(e,t)})},sn=function(e,t,n){return an(e,t,n).map(function(t){var n=tn.filterItems(e,r(nn,t));return D(n,function(e){return e.element})})},cn=function(e,t){return tn.findItem(e,t,function(e,t){return ke(t,e)}).map(function(e){return e.element})},ln=function(e,t,n){return Wt(e).bind(function(r){return function(e,t,n,r){return tn.findItem(e,t,we).bind(function(t){var a=n>0?t.row+t.rowspan-1:t.row,o=r>0?t.column+t.colspan-1:t.column;return tn.getAt(e,a+n,o+r).map(function(e){return e.element})})}(dn(r),e,t,n)})},un=function(e,t,n,r,a){var o=dn(e),i=we(e,n)?d.some(t):cn(o,t),s=we(e,a)?d.some(r):cn(o,r);return i.bind(function(e){return s.bind(function(t){return sn(o,e,t)})})},dn=tn.fromTable,fn=function(e,t){Ge(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},mn=function(e,t){Xe(e).fold(function(){Ge(e).each(function(e){hn(e,t)})},function(e){fn(e,t)})},pn=function(e,t){(function(e){return Ze(e,0)})(e).fold(function(){hn(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})},hn=function(e,t){e.dom.appendChild(t.dom)},vn=function(e,t){fn(e,t),hn(t,e)},gn=function(e,t){I(t,function(n,r){var a=0===r?e:t[r-1];mn(a,n)})},bn=function(e,t){I(t,function(t){hn(e,t)})},yn=function(e){e.dom.textContent="",I(Je(e),function(e){wn(e)})},wn=function(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},xn=function(e){var t,n=Je(e);n.length>0&&(t=e,I(n,function(e){fn(t,e)})),wn(e)};var kn=function(e,t){var n=function(t){return e(t)?d.from(t.dom.nodeValue):d.none()};return{get:function(r){if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}}(He,"text"),_n=function(e){return kn.get(e)},Sn=function(e){return kn.getOption(e)},Cn=function(e,t){return kn.set(e,t)},Nn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Tn(){return{up:t({selector:ht,closest:bt,predicate:pt,all:Ke}),down:t({selector:ft,predicate:lt}),styles:t({get:Mt,getRaw:At,set:Dt,remove:Lt}),attrs:t({get:kt,set:wt,remove:St,copyTo:function(e,t){var n=Ct(e);xt(t,n)}}),insert:t({before:fn,after:mn,afterAll:gn,append:hn,appendAll:bn,prepend:pn,wrap:vn}),remove:t({unwrap:xn,remove:wn}),create:t({nu:ge.fromTag,clone:function(e){return ge.fromDom(e.dom.cloneNode(!1))},text:ge.fromText}),query:t({comparePosition:function(e,t){return e.dom.compareDocumentPosition(t.dom)},prevSibling:Qe,nextSibling:Xe}),property:t({children:Je,name:Be,parent:Ge,document:function(e){return Ye(e).dom},isText:He,isComment:Pe,isElement:Fe,getText:_n,setText:Cn,isBoundary:function(e){return!!Fe(e)&&("body"===Be(e)||C(Nn,Be(e)))},isEmptyTag:function(e){return!!Fe(e)&&C(["br","img","hr","input"],Be(e))},isNonEditable:function(e){return Fe(e)&&"false"===kt(e,"contenteditable")}}),eq:we,is:_e}}var Dn=function(e,t,n,r){var a=t(e,n);return O(r,function(n,r){var a=t(e,r);return In(e,n,a)},a)},In=function(e,t,n){return t.bind(function(t){return n.filter(r(e.eq,t))})},Mn=function(e,t,n){return n.length>0?function(e,t,n,r){return r(e,t,n[0],n.slice(1))}(e,t,n,Dn):d.none()},On=function(e,t,n,a){void 0===a&&(a=i);var o=[t].concat(e.up().all(t)),s=[n].concat(e.up().all(n)),c=function(e){return E(e,a).fold(function(){return e},function(t){return e.slice(0,t+1)})},l=c(o),u=c(s),d=L(l,function(t){return N(u,function(e,t){return r(e.eq,t)}(e,t))});return{firstpath:l,secondpath:u,shared:d}},An=Tn(),Ln=function(e,t){return Mn(An,function(t,n){return e(n)},t)},En=function(e){return ht(e,"table")},zn=function(e,t,n){var r=function(e){return function(t){return void 0!==n&&n(t)||we(t,e)}};return we(e,t)?d.some({boxes:d.some([e]),start:e,finish:t}):En(e).bind(function(a){return En(t).bind(function(o){if(we(a,o))return d.some({boxes:(l=a,u=e,f=t,m=dn(l),sn(m,u,f)),start:e,finish:t});if(ke(a,o)){var i=(s=ut(t,"td,th",r(a))).length>0?s[s.length-1]:t;return d.some({boxes:un(a,e,a,t,o),start:e,finish:i})}if(ke(o,a)){var s,c=(s=ut(e,"td,th",r(o))).length>0?s[s.length-1]:e;return d.some({boxes:un(o,e,a,t,o),start:e,finish:c})}return function(e,t,n){return On(An,e,t,n)}(e,t).shared.bind(function(i){return bt(i,"table",n).bind(function(n){var i=ut(t,"td,th",r(n)),s=i.length>0?i[i.length-1]:t,c=ut(e,"td,th",r(n)),l=c.length>0?c[c.length-1]:e;return d.some({boxes:un(n,e,a,t,o),start:l,finish:s})})});var l,u,f,m})})},Rn=function(e,t){var n=ft(e,t);return n.length>0?d.some(n):d.none()},Vn=function(e,t,n){return gt(e,t).bind(function(t){return gt(e,n).bind(function(e){return Ln(En,[t,e]).map(function(n){return{first:t,last:e,table:n}})})})},Bn=function(e,t,n,r,a){return function(e,t){return L(e,function(e){return be(e,t)})}(e,a).bind(function(e){return ln(e,t,n).bind(function(e){return function(e,t){return ht(e,"table").bind(function(n){return gt(n,t).bind(function(t){return zn(t,e).bind(function(e){return e.boxes.map(function(t){return{boxes:t,start:e.start,finish:e.finish}})})})})}(e,r)})})},$n=function(e,t){return Rn(e,t)},Un=function(e,t,n){return Vn(e,t,n).bind(function(t){var n=function(t){return we(e,t)},r=ht(t.first,"thead,tfoot,tbody,table",n),a=ht(t.last,"thead,tfoot,tbody,table",n);return r.bind(function(e){return a.bind(function(n){return we(e,n)?(r=t.table,a=t.first,o=t.last,i=dn(r),on(i,a,o)):d.none();var r,a,o,i})})})},Pn=function(e){if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return I(e,function(r,a){var o=Se(r);if(1!==o.length)throw new Error("one and only one name per case");var i=o[0],s=r[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!v(s))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[a].apply(null,r)},match:function(e){var n=Se(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!V(t,function(e){return C(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:i,params:r})}}}}),n},Fn=Pn([{none:[]},{multiple:["elements"]},{single:["element"]}]),Hn=function(e,t,n,r){return e.fold(t,n,r)},jn=Fn.none,qn=Fn.multiple,Wn=Fn.single,Yn=function(e,t,n){return{get:function(){return $n(e(),n).fold(function(){return t().map(Wn).getOrThunk(jn)},function(e){return qn(e)})}}},Gn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Kn=function(e,t,n){var r=e[n].element,a=ge.fromTag("td");hn(a,ge.fromTag("br")),(t?hn:pn)(r,a)},Qn=function(e,t){var n=function(e){return be(e.element,t)},r=Xt(e),a=tn.generate(r),o=function(e,t){var n=e.grid.columns,r=e.grid.rows,a=n,o=0,i=0;return Ne(e.access,function(e){if(t(e)){var n=e.row,s=n+e.rowspan-1,c=e.column,l=c+e.colspan-1;n<r?r=n:s>o&&(o=s),c<a?a=c:l>i&&(i=l)}}),function(e,t,n,r){return{minRow:e,minCol:t,maxRow:n,maxCol:r}}(r,a,o,i)}(a,n),i="th:not("+t+"),td:not("+t+")",s=Ft(e,"th,td",function(e){return be(e,i)});return I(s,wn),function(e,t,n,r){for(var a=t.grid.columns,o=t.grid.rows,i=0;i<o;i++)for(var s=!1,c=0;c<a;c++)i<n.minRow||i>n.maxRow||c<n.minCol||c>n.maxCol||(tn.getAt(t,i,c).filter(r).isNone()?Kn(e,s,i):s=!0)}(r,a,o,n),function(e,t){var n=M(Pt(e,"tr"),function(e){return 0===e.dom.childElementCount});I(n,wn),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||I(Pt(e,"th,td"),function(e){St(e,"rowspan"),St(e,"colspan")}),St(e,"width"),St(e,"height"),Lt(e,"width"),Lt(e,"height")}(e,o),e},Xn=function(e){return"img"===Be(e)?1:Sn(e).fold(function(){return Je(e).length},function(e){return e.length})},Jn=["img","br"],Zn=function(e){return Sn(e).filter(function(e){return 0!==e.trim().length||e.indexOf(" ")>-1}).isSome()||C(Jn,Be(e))},er=function(e){return t=Zn,(n=function(e){for(var r=0;r<e.childNodes.length;r++){var a=ge.fromDom(e.childNodes[r]);if(t(a))return d.some(a);var o=n(e.childNodes[r]);if(o.isSome())return o}return d.none()})(e.dom);var t,n},tr=function(e){return nr(e,Zn)},nr=function(e,t){var n=function(e){for(var r=Je(e),a=r.length-1;a>=0;a--){var o=r[a];if(t(o))return d.some(o);var i=n(o);if(i.isSome())return i}return d.none()};return n(e)},rr=function(e,t){return ge.fromDom(e.dom.cloneNode(t))},ar=function(e){return rr(e,!1)},or=function(e){return rr(e,!0)},ir=function(e,t){var n=function(e,t){var n=ge.fromTag(t),r=Ct(e);return xt(n,r),n}(e,t),r=Je(or(e));return bn(n,r),n},sr={scope:["row","col"]},cr=function(){var e=ge.fromTag("td");return hn(e,ge.fromTag("br")),e},lr=function(){return ge.fromTag("col")},ur=function(){return ge.fromTag("colgroup")},dr=function(e,t,n){var r=ir(e,t);return Ne(n,function(e,t){null===e?St(r,t):wt(r,t,e)}),r},fr=function(e){return e},mr=function(e){return function(){return ge.fromTag("tr",e.dom)}},pr=function(e,t,n){var r=function(e,t){var n,r,a,o;n=e.element,r=t,a=n.dom,o=r.dom,Nt(a)&&Nt(o)&&(o.style.cssText=a.style.cssText),Lt(t,"height"),1!==e.colspan&&Lt(e.element,"width")};return{col:function(t){var n=We(t.element),a=ge.fromTag(Be(t.element),n.dom);return r(t,a),e(t.element,a),a},colgroup:ur,row:mr(t),cell:function(t){var a,o,i=We(t.element),s=ge.fromTag(Be(t.element),i.dom),c=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=c.length>0?function(e,t,n){return er(e).map(function(r){var a=n.join(","),o=ut(r,a,function(t){return we(t,e)});return O(o,function(e,t){var n=ar(t);return St(n,"contenteditable"),hn(e,n),n},t)}).getOr(t)}(t.element,s,c):s;return hn(l,ge.fromTag("br")),r(t,s),a=t.element,o=s,Ne(sr,function(e,t){return _t(a,t).filter(function(t){return C(e,t)}).each(function(e){return wt(o,t,e)})}),e(t.element,s),s},replace:dr,gap:cr}},hr=function(e){return{col:lr,colgroup:ur,row:mr(e),cell:cr,replace:fr,gap:cr}},vr=function(e){return D(e,ge.fromDom)},gr=function(e){return Hn(e.get(),t([]),n,B)},br={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},yr=function(e){return{element:e,mergable:d.none(),unmergable:d.none(),selection:[e]}},wr=function(e,t,n){return{element:n,mergable:function(e,t,n){return Hn(t.get(),d.none,function(t){return t.length<=1?d.none():Un(e,n.firstSelectedSelector,n.lastSelectedSelector).map(function(e){return{bounds:e,cells:t}})},d.none)}(t,e,br),unmergable:function(e){var t=function(e,t){return _t(e,t).exists(function(e){return parseInt(e,10)>1})},n=gr(e);return n.length>0&&V(n,function(e){return t(e,"rowspan")||t(e,"colspan")})?d.some(n):d.none()}(e),selection:gr(e)}},xr=function(t,n,r,a){t.on("BeforeGetContent",function(r){!0===r.selection&&Hn(n.get(),e,function(e){r.preventDefault(),function(e){return Wt(e[0]).map(or).map(function(e){return[Qn(e,"[data-mce-selected]")]})}(e).each(function(e){r.content="text"===r.format?function(e){return D(e,function(e){return e.dom.innerText}).join("")}(e):function(e,t){return D(t,function(t){return e.selection.serializer.serialize(t.dom,{})}).join("")}(t,e)})},e)}),t.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&d.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(n){var o=ge.fromDom(n);Wt(o).each(function(n){var i,s,c,l,u=M((i=e.content,(c=(s||document).createElement("div")).innerHTML=i,Je(ge.fromDom(c))),function(e){return"meta"!==Be(e)});if(1===u.length&&(l=u[0],"table"===Be(l))){e.preventDefault();var d=ge.fromDom(t.getDoc()),f=hr(d),m=function(e,t,n){return{element:e,clipboard:t,generators:n}}(o,u[0],f);r.pasteCells(n,m).each(function(e){t.selection.setRng(e),t.focus(),a.clear(n)})}})})})},kr=Pn([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),_r=F({},kr),Sr=function(e,n,r,a,o){var i=e.slice(0),s=function(e,t){return 0===e.length?_r.none():1===e.length?_r.only(0):0===t?_r.left(0,1):t===e.length-1?_r.right(t-1,t):t>0&&t<e.length-1?_r.middle(t-1,t,t+1):_r.none()}(e,n),c=t(D(i,t(0)));return s.fold(c,function(e){return a.singleColumnWidth(i[e],r)},function(e,t){return o.calcLeftEdgeDeltas(i,e,t,r,a.minCellWidth(),a.isRelative)},function(e,t,n){return o.calcMiddleDeltas(i,e,t,n,r,a.minCellWidth(),a.isRelative)},function(e,t){return o.calcRightEdgeDeltas(i,e,t,r,a.minCellWidth(),a.isRelative)})},Cr=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t};function Nr(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var a=Mt(n,e);return parseFloat(a)||0}return r},r=function(e,t){return A(t,function(t,n){var r=Mt(e,n),a=void 0===r?0:parseInt(r,10);return isNaN(a)?t:t+a},0)};return{set:function(t,n){if(!x(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom;Nt(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var a=r(e,n);return t>a?t-a:0}}}var Tr,Dr,Ir,Mr=Nr("width",function(e){return e.dom.offsetWidth}),Or=function(e){return Mr.get(e)},Ar=function(e){return Mr.getOuter(e)},Lr=function(e){var t=e.grid,r=T(t.columns,n),a=T(t.rows,n);return D(r,function(t){return Er(function(){return R(a,function(n){return tn.getAt(e,n,t).filter(function(e){return e.column===t}).toArray()})},function(e){return 1===e.colspan},function(){return tn.getAt(e,0,t)})})},Er=function(e,t,n){var r=e();return L(r,t).orThunk(function(){return d.from(r[0]).orThunk(n)}).map(function(e){return e.element})},zr=function(e){var r=e.grid,a=T(r.rows,n),o=T(r.columns,n);return D(a,function(n){return Er(function(){return R(o,function(r){return tn.getAt(e,n,r).filter(function(e){return e.row===n}).fold(t([]),function(e){return[e]})})},function(e){return 1===e.rowspan},function(){return tn.getAt(e,n,0)})})},Rr=function(e,t){if(t<0||t>=e.length-1)return d.none();var n=e[t].fold(function(){var n=function(e){var t=k.call(e,0);return t.reverse(),t}(e.slice(0,t));return P(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return d.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return P(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return d.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},Vr=function(e,t){return function(n){return"rtl"===Br(n)?t:e}},Br=function(e){return"rtl"===Mt(e,"direction")?"rtl":"ltr"},$r=Nr("height",function(e){var t=e.dom;return st(e)?t.getBoundingClientRect().height:t.offsetHeight}),Ur=function(e){return $r.get(e)},Pr=function(e){return $r.getOuter(e)},Fr=function(e,t){return{left:e,top:t,translate:function(n,r){return Fr(e+n,t+r)}}},Hr=Fr,jr=function(e,t){return void 0!==e?e:void 0!==t?t:0},qr=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,a=t.documentElement;if(n===e.dom)return Hr(n.offsetLeft,n.offsetTop);var o=jr(null===r||void 0===r?void 0:r.pageYOffset,a.scrollTop),i=jr(null===r||void 0===r?void 0:r.pageXOffset,a.scrollLeft),s=jr(a.clientTop,n.clientTop),c=jr(a.clientLeft,n.clientLeft);return Wr(e).translate(i-c,o-s)},Wr=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Hr(n.offsetLeft,n.offsetTop):st(e)?function(e){var t=e.getBoundingClientRect();return Hr(t.left,t.top)}(t):Hr(0,0)},Yr=function(e,t){return{row:e,y:t}},Gr=function(e,t){return{col:e,x:t}},Kr=function(e){return qr(e).left+Ar(e)},Qr=function(e){return qr(e).left},Xr=function(e,t){return Gr(e,Qr(t))},Jr=function(e,t){return Gr(e,Kr(t))},Zr=function(e){return qr(e).top},ea=function(e,t){return Yr(e,Zr(t))},ta=function(e,t){return Yr(e,Zr(t)+Pr(t))},na=function(e,t,n){if(0===n.length)return[];var r=D(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),a=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([a])},ra={delta:n,positions:function(e){return na(ea,ta,e)},edge:Zr},aa=Vr({delta:n,edge:Qr,positions:function(e){return na(Xr,Jr,e)}},{delta:function(e){return-e},edge:Kr,positions:function(e){return na(Jr,Xr,e)}}),oa={delta:function(e,t){return aa(t).delta(e,t)},positions:function(e,t){return aa(t).positions(e,t)},edge:function(e){return aa(e).edge(e)}},ia={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},sa=(Dr=["Infinity","[0-9]+\\."+(Tr=function(e){return"(?:"+e+")?"})("[0-9]+")+Tr("[eE][+-]?[0-9]+"),"\\.[0-9]+"+Tr("[eE][+-]?[0-9]+"),"[0-9]+"+Tr("[eE][+-]?[0-9]+")].join("|"),new RegExp("^([+-]?(?:"+Dr+"))(.*)$")),ca=function(e,t){return d.from(sa.exec(e)).bind(function(e){var n=Number(e[1]),r=e[2];return function(e,t){return N(t,function(t){return N(ia[t],function(t){return e===t})})}(r,t)?d.some({value:n,unit:r}):d.none()})},la=function(){var e=he().browser;return e.isIE()||e.isEdge()},ua=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(Mt(e,t),n)},da=function(e){return la()?function(e){var t=e.dom.getBoundingClientRect().height;return"border-box"===Mt(e,"box-sizing")?t:t-ua(e,"padding-top",0)-ua(e,"padding-bottom",0)-(ua(e,"border-top-width",0)+ua(e,"border-bottom-width",0))}(e):ua(e,"height",Ur(e))},fa=function(e){return la()?function(e){var t=e.dom.getBoundingClientRect().width;return"border-box"===Mt(e,"box-sizing")?t:t-ua(e,"padding-left",0)-ua(e,"padding-right",0)-(ua(e,"border-left-width",0)+ua(e,"border-right-width",0))}(e):ua(e,"width",Or(e))},ma=/(\d+(\.\d+)?)%/,pa=/(\d+(\.\d+)?)px|em/,ha=function(e,t){var n,r=(n=e,d.from(n.dom.offsetParent).map(ge.fromDom)).getOr(ct(We(e)));return t(e)/t(r)*100},va=function(e,t){Dt(e,"width",t+"px")},ga=function(e,t){Dt(e,"width",t+"%")},ba=function(e,t){Dt(e,"height",t+"px")},ya=function(e,t,n,r){var a=parseInt(e,10);return ee(e,"%")&&"table"!==Be(t)?function(e,t,n,r){var a=Wt(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,a),a}(t,a,n,r):a},wa=function(e){var t=function(e){return At(e,"height").getOrThunk(function(){return da(e)+"px"})}(e);return t?ya(t,e,Ur,ba):Ur(e)},xa=function(e){return At(e,"width").fold(function(){return d.from(kt(e,"width"))},function(e){return d.some(e)})},ka=function(e,t){return e/t.pixelWidth()*100},_a=function(e,t){return xa(e).fold(function(){var n=Or(e);return ka(n,t)},function(n){return function(e,t,n){var r=ma.exec(t);if(null!==r)return parseFloat(r[1]);var a=fa(e);return ka(a,n)}(e,n,t)})},Sa=function(e,t){return xa(e).fold(function(){return fa(e)},function(n){return function(e,t,n){var r=pa.exec(t);if(null!==r)return parseInt(r[1],10);var a=ma.exec(t);return null!==a?function(e,t){return e/100*t.pixelWidth()}(parseFloat(a[1]),n):fa(e)}(e,n,t)})},Ca=function(e){return function(e,t,n){return n(e)/zt(e,t)}(e,"rowspan",wa)},Na=function(e,t,n){Dt(e,"width",t+n)},Ta=function(e){return ha(e,Or)+"%"},Da=t(ma),Ia=t(pa),Ma=(Ir="col",function(e){return Fe(e)&&Be(e)===Ir}),Oa=function(e,t,n){return At(e,t).fold(function(){return n(e)+"px"},function(e){return e})},Aa=function(e,t){return Oa(e,"width",function(e){return Ma(e)?Or(e):Sa(e,t)})},La=function(e){return Oa(e,"height",Ca)},Ea=function(e,t,n,r,a,o){return e.filter(r).fold(function(){return o(Rr(n,t))},function(e){return a(e)})},za=function(e,t,r,a,i){var s=Lr(e),c=tn.hasColumns(e)?function(e){return D(tn.justColumns(e),function(e){return d.from(e.element)})}(e):s,l=[d.some(oa.edge(t))].concat(D(oa.positions(s,t),function(e){return e.map(function(e){return e.x})})),u=o(Rt);return D(c,function(e,t){return Ea(e,t,l,u,function(e){if(function(e){return!Ma(e)||At(e,"width").isSome()}(e))return r(e,i);var o,c=void 0!==(o=s[t])&&null!==o?n(o):d.none();return Ea(c,t,l,u,function(e){return a(d.some(Or(e)))},a)},a)})},Ra=function(e){return e.map(function(e){return e+"px"}).getOr("")},Va=function(e,t,n){return za(e,t,Sa,function(e){return e.getOrThunk(n.minCellWidth)},n)},Ba=function(e,t,n,r,a){var i=zr(e),s=[d.some(n.edge(t))].concat(D(n.positions(i,t),function(e){return e.map(function(e){return e.y})}));return D(i,function(e,t){return Ea(e,t,s,o(Vt),r,a)})},$a=function(e,t,n){for(var r=0,a=e;a<t;a++)r+=void 0!==n[a]?n[a]:0;return r},Ua=function(e,t){var n=tn.justCells(e);return D(n,function(e){var n=$a(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}})},Pa=function(e,t){return tn.hasColumns(e)?function(e,t){var n=tn.justColumns(e);return D(n,function(e,n){return{element:e.element,width:t[n],colspan:e.colspan}})}(e,t):function(e,t){var n=tn.justCells(e);return D(n,function(e){var n=$a(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}})}(e,t)},Fa=function(e,t,n){var r=Pa(e,t);I(r,function(e){n.setElementWidth(e.element,e.width)})},Ha=function(e,t,n,r,a){var o=tn.fromTable(e),i=a.getCellDelta(t),s=a.getWidths(o,a),c=n===o.grid.columns-1,l=r.clampTableDelta(s,n,i,a.minCellWidth(),c),u=Sr(s,n,l,a,r),d=D(u,function(e,t){return e+s[t]});Fa(o,d,a),r.resizeTable(a.adjustTableWidth,l,c)},ja=function(e,t,n,r){var a=tn.fromTable(e),o=function(e,t,n){return Ba(e,t,n,Ca,function(e){return e.getOrThunk(Ut)})}(a,e,r),i=D(o,function(e,r){return n===r?Math.max(t+e,Ut()):e}),s=Ua(a,i),c=function(e,t){return D(e.all,function(e,n){return{element:e.element,height:t[n]}})}(a,i);I(c,function(e){ba(e.element,e.height)}),I(s,function(e){ba(e.element,e.height)});var l=O(i,function(e,t){return e+t},0);ba(e,l)},qa=function(e){return D(e,t(0))},Wa=function(e,t,n,r,a){return a(e.slice(0,t)).concat(r).concat(a(e.slice(n)))},Ya=function(e){return function(t,n,r,a){if(e(r)){var o=Math.max(a,t[n]-Math.abs(r)),i=Math.abs(o-t[n]);return r>=0?i:-i}return r}},Ga=Ya(function(e){return e<0}),Ka=Ya(s),Qa=function(){var e=function(e,t,n,r){var a=(100+n)/100,o=Math.max(r,(e[t]+n)/a);return D(e,function(e,n){return(n===t?o:e/a)-e})},t=function(t,n,r,a,o,i){return i?e(t,n,a,o):function(e,t,n,r,a){var o=Ga(e,t,r,a);return Wa(e,t,n+1,[o,0],qa)}(t,n,r,a,o)};return{resizeTable:function(e,t){return e(t)},clampTableDelta:Ga,calcLeftEdgeDeltas:t,calcMiddleDeltas:function(e,n,r,a,o,i,s){return t(e,r,a,o,i,s)},calcRightEdgeDeltas:function(t,n,r,a,o,i){if(i)return e(t,r,a,o);var s=Ga(t,r,a,o);return qa(t.slice(0,r)).concat([s])}}},Xa=function(e,n){var r=d.from(e.dom.documentElement).map(ge.fromDom).getOr(e);return{parent:t(r),view:t(e),origin:t(Hr(0,0)),isResizable:n}},Ja=function(e,n,r){return{parent:t(n),view:t(e),origin:t(Hr(0,0)),isResizable:r}},Za=Pn([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),eo=function(e,t,n){var r=n.substring(0,n.length-e.length),a=parseFloat(r);return r===a.toString()?t(a):Za.invalid(n)},to=F(F({},Za),{from:function(e){return ee(e,"%")?eo("%",Za.percent,e):ee(e,"px")?eo("px",Za.pixels,e):Za.invalid(e)}}),no=function(e,t,n){return e.fold(function(){return t},function(e){return function(e,t,n){var r=n/t;return D(e,function(e){return to.from(e).fold(function(){return e},function(e){return e*r+"px"},function(e){return e/100*n+"px"})})}(t,n,e)},function(e){return function(e,t){return D(e,function(e){return to.from(e).fold(function(){return e},function(e){return e/t*100+"%"},function(e){return e+"%"})})}(t,n)})},ro=function(e,n,r){var a,o,i,s=to.from(r),c=V(e,function(e){return"0px"===e})?(a=s,o=e.length,i=a.fold(function(){return t("")},function(e){return t(e/o+"px")},function(){return t(100/o+"%")}),T(o,i)):no(s,e,n);return oo(c)},ao=function(e,r){return 0===e.length?r:O(e,function(e,r){return to.from(r).fold(t(0),n,n)+e},0)},oo=function(e){if(0===e.length)return e;var n,r,a=O(e,function(e,t){var n=to.from(t).fold(function(){return{value:t,remainder:0}},function(e){return function(e,t){var n=Math.floor(e);return{value:n+t,remainder:e-n}}(e,"px")},function(e){return{value:e+"%",remainder:0}});return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0}),o=a.output;return o.slice(0,o.length-1).concat([(n=o[o.length-1],r=Math.round(a.remainder),to.from(n).fold(t(n),function(e){return e+r+"px"},function(e){return e+r+"%"}))])},io=to.from,so=function(e){return io(e).fold(t("px"),t("px"),t("%"))},co=function(e,t,n,r){var a=tn.fromTable(e),o=a.all,i=tn.justCells(a),s=tn.justColumns(a);t.each(function(t){var n=so(t),o=Or(e),c=function(e,t,n){return za(e,t,Aa,Ra,n)}(a,e,r),l=ro(c,o,t);tn.hasColumns(a)?function(e,t,n){I(t,function(t,r){var a=ao([e[r]],$t());Dt(t.element,"width",a+n)})}(l,s,n):function(e,t,n){I(t,function(t){var r=e.slice(t.column,t.colspan+t.column),a=ao(r,$t());Dt(t.element,"width",a+n)})}(l,i,n),Dt(e,"width",t)}),n.each(function(t){var n=so(t),r=Ur(e),s=function(e,t,n){return Ba(e,t,n,La,Ra)}(a,e,ra);!function(e,t,n,r){I(n,function(t){var n=e.slice(t.row,t.rowspan+t.row),a=ao(n,Ut());Dt(t.element,"height",a+r)}),I(t,function(t,n){Dt(t.element,"height",e[n])})}(ro(s,r,t),o,i,n),Dt(e,"height",t)})},lo=function(e){return xa(e).exists(function(e){return ma.test(e)})},uo=function(e){return xa(e).exists(function(e){return pa.test(e)})},fo=function(e){return xa(e).isNone()},mo=Ta,po=function(e){return tn.fromTable(e).grid},ho=function(e){var t=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:function(e){t=M(t,function(t){return t!==e})},trigger:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a={};I(e,function(e,t){a[e]=n[t]}),I(t,function(e){e(a)})}}},vo=function(e){return{registry:Te(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:Te(e,function(e){return e.trigger})}},go=function(e){return e.slice(0).sort()},bo=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");var r;return function(e,t){if(!v(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");I(t,function(t){if(!p(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})}("required",t),r=go(t),L(r,function(e,t){return t<r.length-1&&e===r[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+r.join(", ")+"].")}),function(r){var a=Se(r);V(t,function(e){return C(a,e)})||function(e,t){throw new Error("All required keys ("+go(e).join(", ")+") were not specified. Specified keys were: "+go(t).join(", ")+".")}(t,a),e(t,a);var o=M(t,function(e){return!n.validate(r[e],e)});return o.length>0&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+go(e).join(", ")+") were not.")}(o,n.label),r}},yo=function(e,t){var n=M(t,function(t){return!C(e,t)});n.length>0&&function(e){throw new Error("Unsupported keys for object: "+go(e).join(", "))}(n)},wo=function(e){return function(e,t){return bo(e,t,{validate:w,label:"function"})}(yo,e)},xo=wo(["compare","extract","mutate","sink"]),ko=wo(["element","start","stop","destroy"]),_o=wo(["forceDrop","drop","move","delayDrop"]);function So(){var e=d.none(),t=vo({move:ho(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=d.some(n),r})(r,n).each(function(e){t.trigger.move(e)})})},reset:function(){e=d.none()},events:t.registry}}function Co(){var t={onEvent:e,reset:e},n=So(),r=t;return{on:function(){r.reset(),r=n},off:function(){r.reset(),r=t},isOn:function(){return r===n},onEvent:function(e,t){r.onEvent(e,t)},events:n.events}}var No=function(e,t,n){var r,a,o,i=!1,s=vo({start:ho([]),stop:ho([])}),c=Co(),l=function(){f.stop(),c.isOn()&&(c.off(),s.trigger.stop())},u=(r=l,a=200,o=null,{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==o&&clearTimeout(o),o=setTimeout(function(){r.apply(null,e),o=null},a)}});c.events.move.bind(function(n){t.mutate(e,n.info)});var d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i&&e.apply(null,t)}},f=t.sink(_o({forceDrop:l,drop:d(l),move:d(function(e){u.cancel(),c.onEvent(e,t)}),delayDrop:d(u.throttle)}),n);return{element:f.element,go:function(e){f.start(e),c.on(),s.trigger.start()},on:function(){i=!0},off:function(){i=!1},destroy:function(){f.destroy()},events:s.registry}},To=function(e){var t,n,r=ge.fromDom(ot(e).getOr(e.target)),a=function(){return e.stopPropagation()},o=function(){return e.preventDefault()},i=(t=o,n=a,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t(n.apply(null,e))});return function(e,t,n,r,a,o,i){return{target:e,x:t,y:n,stop:r,prevent:a,kill:o,raw:i}}(r,e.clientX,e.clientY,a,o,i,e)},Do=function(e,t,n,a,o){var i=function(e,t){return function(n){e(n)&&t(To(n))}}(n,a);return e.dom.addEventListener(t,i,o),{unbind:r(Io,e,t,i,o)}},Io=function(e,t,n,r){e.dom.removeEventListener(t,n,r)},Mo=s,Oo=function(e,t,n){return function(e,t,n,r){return Do(e,t,n,r,!1)}(e,t,Mo,n)},Ao=To,Lo=function(e,t){var n=kt(e,t);return void 0===n||""===n?[]:n.split(" ")},Eo=function(e){return void 0!==e.dom.classList},zo=function(e,t){return function(e,t,n){var r=Lo(e,t).concat([n]);return wt(e,t,r.join(" ")),!0}(e,"class",t)},Ro=function(e,t){return function(e,t,n){var r=M(Lo(e,t),function(e){return e!==n});return r.length>0?wt(e,t,r.join(" ")):St(e,t),!1}(e,"class",t)},Vo=function(e,t){Eo(e)?e.dom.classList.add(t):zo(e,t)},Bo=function(e){0===(Eo(e)?e.dom.classList:function(e){return Lo(e,"class")}(e)).length&&St(e,"class")},$o=function(e,t){return Eo(e)&&e.dom.classList.contains(t)},Uo=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Po=Uo("ephox-dragster").resolve,Fo=xo({compare:function(e,t){return Hr(t.left-e.left,t.top-e.top)},extract:function(e){return d.some(Hr(e.x,e.y))},sink:function(e,t){var n=function(e){var t=F({layerClass:Po("blocker")},e),n=ge.fromTag("div");return wt(n,"role","presentation"),It(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vo(n,Po("blocker")),Vo(n,t.layerClass),{element:function(){return n},destroy:function(){wn(n)}}}(t),r=Oo(n.element(),"mousedown",e.forceDrop),a=Oo(n.element(),"mouseup",e.drop),o=Oo(n.element(),"mousemove",e.move),i=Oo(n.element(),"mouseout",e.delayDrop);return ko({element:n.element,start:function(e){hn(e,n.element())},stop:function(){wn(n.element())},destroy:function(){n.destroy(),a.unbind(),o.unbind(),i.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left,t.top)}}),Ho=function(e){return"true"===kt(e,"contenteditable")},jo=Uo("ephox-snooker").resolve,qo=function(){var e=vo({drag:ho(["xDelta","yDelta","target"])}),t=d.none(),n=function(){var e=vo({drag:ho(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta,n.yDelta,t)})});return{assign:function(e){t=d.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}},Wo=jo("resizer-bar"),Yo=jo("resizer-rows"),Go=jo("resizer-cols"),Ko=function(e){var t=ft(e.parent(),"."+Wo);I(t,wn)},Qo=function(e,t,n){var r=e.origin();I(t,function(t){t.each(function(t){var a=n(r,t);Vo(a,Wo),hn(e.parent(),a)})})},Xo=function(e,t,n,r){Qo(e,t,function(e,t){var a,o,i,s,c,l,u=(a=t.col,o=t.x-e.left,i=n.top-e.top,s=7,c=r,l=ge.fromTag("div"),It(l,{position:"absolute",left:o-s/2+"px",top:i+"px",height:c+"px",width:s+"px"}),xt(l,{"data-column":a,role:"presentation"}),l);return Vo(u,Go),u})},Jo=function(e,t,n,r){Qo(e,t,function(e,t){var a,o,i,s,c,l,u=(a=t.row,o=n.left-e.left,i=t.y-e.top,s=r,c=7,l=ge.fromTag("div"),It(l,{position:"absolute",left:o+"px",top:i-c/2+"px",height:c+"px",width:s+"px"}),xt(l,{"data-row":a,role:"presentation"}),l);return Vo(u,Yo),u})},Zo=function(e,t,n,r,a){var o=qr(n),i=t.isResizable,s=r.length>0?ra.positions(r,n):[],c=s.length>0?function(e,t){return R(e.all,function(e,n){return t(e.element)?[n]:[]})}(e,i):[],l=M(s,function(e,t){return N(c,function(e){return t===e})});Jo(t,l,o,Ar(n));var u=a.length>0?oa.positions(a,n):[],d=u.length>0?function(e,t){var n=[];return T(e.grid.columns,function(r){tn.getColumnAt(e,r).map(function(e){return e.element}).forall(t)&&n.push(r)}),M(n,function(n){var r=tn.filterItems(e,function(e){return e.column===n});return V(r,function(e){return t(e.element)})})}(e,i):[],f=M(u,function(e,t){return N(d,function(e){return t===e})});Xo(t,f,o,Pr(n))},ei=function(e,t){if(Ko(e),e.isResizable(t)){var n=tn.fromTable(t),r=zr(n),a=Lr(n);Zo(n,e,t,r,a)}},ti=function(e,t){var n=ft(e.parent(),"."+Wo);I(n,t)},ni=function(e){ti(e,function(e){Dt(e,"display","none")})},ri=function(e){ti(e,function(e){Dt(e,"display","block")})},ai=jo("resizer-bar-dragging"),oi=function(e){var t=qo(),n=function(e,t){void 0===t&&(t={});var n=void 0!==t.mode?t.mode:Fo;return No(e,n,t)}(t,{}),a=d.none(),o=function(e,t){return d.from(kt(e,t))};t.events.drag.bind(function(e){o(e.target,"data-row").each(function(t){var n=Bt(e.target,"top");Dt(e.target,"top",n+e.yDelta+"px")}),o(e.target,"data-column").each(function(t){var n=Bt(e.target,"left");Dt(e.target,"left",n+e.xDelta+"px")})});var i=function(e,t){return Bt(e,t)-Et(e,"data-initial-"+t,0)};n.events.stop.bind(function(){t.get().each(function(t){a.each(function(n){o(t,"data-row").each(function(e){var r=i(t,"top");St(t,"data-initial-top"),m.trigger.adjustHeight(n,r,parseInt(e,10))}),o(t,"data-column").each(function(e){var r=i(t,"left");St(t,"data-initial-left"),m.trigger.adjustWidth(n,r,parseInt(e,10))}),ei(e,n)})})});var s=function(r,a){m.trigger.startAdjust(),t.assign(r),wt(r,"data-initial-"+a,Bt(r,a)),Vo(r,ai),Dt(r,"opacity","0.2"),n.go(e.parent())},c=Oo(e.parent(),"mousedown",function(e){var t;t=e.target,$o(t,Yo)&&s(e.target,"top"),function(e){return $o(e,Go)}(e.target)&&s(e.target,"left")}),l=function(t){return we(t,e.view())},u=function(e){return bt(e,"table",l).filter(function(e){return function(e,t){return bt(e,"[contenteditable]",t)}(e,l).exists(Ho)})},f=Oo(e.view(),"mouseover",function(t){u(t.target).fold(function(){st(t.target)&&Ko(e)},function(t){a=d.some(t),ei(e,t)})}),m=vo({adjustHeight:ho(["table","delta","row"]),adjustWidth:ho(["table","delta","column"]),startAdjust:ho([])});return{destroy:function(){c.unbind(),f.unbind(),n.destroy(),Ko(e)},refresh:function(t){ei(e,t)},on:n.on,off:n.off,hideBars:r(ni,e),showBars:r(ri,e),events:m.registry}},ii=function(e,t,n){var r=ra,a=oa,o=oi(e),i=vo({beforeResize:ho(["table","type"]),afterResize:ho(["table","type"]),startDrag:ho([])});return o.events.adjustHeight.bind(function(e){var t=e.table;i.trigger.beforeResize(t,"row");var n=r.delta(e.delta,t);ja(t,n,e.row,r),i.trigger.afterResize(t,"row")}),o.events.startAdjust.bind(function(e){i.trigger.startDrag()}),o.events.adjustWidth.bind(function(e){var r=e.table;i.trigger.beforeResize(r,"col");var o=a.delta(e.delta,r),s=n(r);Ha(r,o,e.column,t,s),i.trigger.afterResize(r,"col")}),{on:o.on,off:o.off,hideBars:o.hideBars,showBars:o.showBars,destroy:o.destroy,events:i.registry}},si=function(e,t){return e.fire("newrow",{node:t})},ci=function(e,t){return e.fire("newcell",{node:t})},li=function(e,t,n,r,a){e.fire("TableSelectionChange",{cells:t,start:n,finish:r,otherCells:a})},ui=function(e){e.fire("TableSelectionClear")},di=function(e,t,n){e.fire("TableModified",F(F({},n),{table:t}))},fi={"border-collapse":"collapse",width:"100%"},mi={border:"1"},pi=function(e){return e.getParam("table_sizing_mode","auto")},hi=function(e){return e.getParam("table_responsive_width")},vi=function(e){return e.getParam("table_default_attributes",mi,"object")},gi=function(e){return e.getParam("table_default_styles",function(e){if(Si(e)){var t=e.getBody().offsetWidth;return F(F({},fi),{width:t+"px"})}return Ci(e)?Ie(fi,function(e,t){return"width"!==t}):fi}(e),"object")},bi=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},yi=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},wi=function(e){return e.getParam("table_row_advtab",!0,"boolean")},xi=function(e){return e.getParam("table_advtab",!0,"boolean")},ki=function(e){return e.getParam("table_style_by_css",!1,"boolean")},_i=function(e){return"relative"===pi(e)||!0===hi(e)},Si=function(e){return"fixed"===pi(e)||!1===hi(e)},Ci=function(e){return"responsive"===pi(e)},Ni=function(e){var t=e.getParam("table_header_type","section","string");return C(["section","cells","sectionCells","auto"],t)?t:"section"},Ti=function(e){var t=e.getParam("table_column_resizing","preservetable","string");return L(["preservetable","resizetable"],function(e){return e===t}).getOr("preservetable")},Di=function(e){return"preservetable"===Ti(e)},Ii=function(e){var t=e.getParam("table_clone_elements");return p(t)?d.some(t.split(/[ ,]/)):Array.isArray(t)?d.some(t):d.none()},Mi=function(e){return e.nodeName.toLowerCase()},Oi=function(e){return ge.fromDom(e.getBody())},Ai=function(e){return e.getBoundingClientRect().width},Li=function(e){return e.getBoundingClientRect().height},Ei=function(e){return function(t){return we(t,Oi(e))}},zi=function(e){return/^\d+(\.\d+)?$/.test(e)?e+"px":e},Ri=function(e){St(e,"data-mce-style");var t=function(e){return St(e,"data-mce-style")};I(jt(e),t),I(qt(e),t)},Vi=function(e,t){var n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return d.from(n).filter(ne)},Bi=function(e){return/^(\d+(\.\d+)?)%$/.test(e)},$i=function(e){return ge.fromDom(e.selection.getStart())},Ui=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},Pi=function(n){var r=function(){return Or(n)},a=t(0);return{width:r,pixelWidth:r,getWidths:function(e,t){return Va(e,n,t)},getCellDelta:a,singleColumnWidth:t([0]),minCellWidth:a,setElementWidth:e,adjustTableWidth:e,isRelative:!0,label:"none"}},Fi=function(e,t){var n=Ui(parseFloat(e)),r=Ui(Or(t));return{width:n.get,pixelWidth:r.get,getWidths:function(e,n){return function(e,t,n){return za(e,t,_a,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)}(e,t,n)},getCellDelta:function(e){return e/r.get()*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return $t()/r.get()*100},setElementWidth:ga,adjustTableWidth:function(e){var a=n.get(),o=a+e/100*a;ga(t,o),n.set(o),r.set(Or(t))},isRelative:!0,label:"percent"}},Hi=function(e,t){var r=Ui(e),a=r.get;return{width:a,pixelWidth:a,getWidths:function(e,n){return Va(e,t,n)},getCellDelta:n,singleColumnWidth:function(e,t){return[Math.max($t(),e+t)-e]},minCellWidth:$t,setElementWidth:va,adjustTableWidth:function(e){var n=a()+e;va(t,n),r.set(n)},isRelative:!1,label:"pixel"}},ji=function(e){return xa(e).fold(function(){return Pi(e)},function(t){return function(e,t){var n=Da().exec(t);if(null!==n)return Fi(n[1],e);var r=Ia().exec(t);if(null!==r){var a=parseInt(r[1],10);return Hi(a,e)}var o=Or(e);return Hi(o,e)}(e,t)})},qi=Hi,Wi=Fi,Yi=function(e,t){if(_i(e)){var n=Vi(e,t.dom).filter(Bi).getOrThunk(function(){return mo(t)});return Wi(n,t)}return Si(e)?qi(Or(t),t):ji(t)},Gi=function(e){St(e,"width")},Ki=function(e,t){var n=function(e){return Or(e)+"px"}(e);co(e,d.some(n),d.none(),t),Gi(e)},Qi=function(e,t){!function(e,t){var n=Ta(e);co(e,d.some(n),d.none(),t),Gi(e)}(t,Yi(e,t))},Xi=function(e,t){var n=Yi(e,t);Ki(t,n)},Ji=function(e){Lt(e,"width");var t=qt(e),n=t.length>0?t:jt(e);I(n,function(e){Lt(e,"width"),Gi(e)}),Gi(e)},Zi=function(){var e=ge.fromTag("div");return It(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),hn(ct(ge.fromDom(document)),e),e},es=function(e){return"false"!==kt(e,"data-mce-resize")},ts=function(e){var n,r,a=d.none(),o=d.none(),i=d.none(),s=function(e){return"TABLE"===e.nodeName},c=function(){return o},l=function(t){return Yi(e,t)},u=function(){return Di(e)?{resizeTable:function(e,t,n){n&&e(t)},clampTableDelta:function(e,t,n,r,a){if(a){if(n>=0)return n;var o=A(e,function(e,t){return e+t-r},0);return Math.max(-o,n)}return Ga(e,t,n,r)},calcLeftEdgeDeltas:n=function(e,t,n,r,a){var o=Ka(e,r>=0?n:t,r,a);return Wa(e,t,n+1,[o,-o],qa)},calcMiddleDeltas:function(e,t,r,a,o,i){return n(e,r,a,o,i)},calcRightEdgeDeltas:function(e,n,r,a,o,i){if(i)return qa(e);var s=a/e.length;return D(e,t(s))}}:Qa();var n},f=function(t,a,o){var i=ee(a,"e");if(""===r&&Qi(e,t),o!==n&&""!==r){Dt(t,"width",r);var s=u(),c=l(t),d=Di(e)||i?function(e){return po(e).columns}(t)-1:0;Ha(t,o-n,d,s,c)}else if(Bi(r)){var f=parseFloat(r.replace("%",""));Dt(t,"width",o*f/n+"%")}/^(\d+(\.\d+)?)px$/.test(r)&&function(e){var t=tn.fromTable(e);tn.hasColumns(t)||I(jt(e),function(e){var t=Mt(e,"width");Dt(e,"width",t),St(e,"width")})}(t)};return e.on("init",function(){var t=function(e,t){return e.inline?Ja(Oi(e),Zi(),t):Xa(ge.fromDom(e.getDoc()),t)}(e,es);if(i=d.some(t),function(e){var t=e.getParam("object_resizing",!0);return p(t)?"table"===t:t}(e)&&function(e){return e.getParam("table_resize_bars",!0,"boolean")}(e)){var n=u(),r=ii(t,n,l);r.on(),r.events.startDrag.bind(function(t){a=d.some(e.selection.getRng())}),r.events.beforeResize.bind(function(t){var n=t.table.dom;!function(e,t,n,r,a){e.fire("ObjectResizeStart",{target:t,width:n,height:r,origin:a})}(e,n,Ai(n),Li(n),"bar-"+t.type)}),r.events.afterResize.bind(function(t){var n=t.table,r=n.dom;Ri(n),a.each(function(t){e.selection.setRng(t),e.focus()}),function(e,t,n,r,a){e.fire("ObjectResized",{target:t,width:n,height:r,origin:a})}(e,r,Ai(r),Li(r),"bar-"+t.type),e.undoManager.add()}),o=d.some(r)}}),e.on("ObjectResizeStart",function(t){var a=t.target;if(s(a)){var o=ge.fromDom(a);I(e.dom.select(".mce-clonedresizable"),function(t){e.dom.addClass(t,"mce-"+Ti(e)+"-columns")}),!uo(o)&&Si(e)?Xi(e,o):!lo(o)&&_i(e)&&Qi(e,o),fo(o)&&Z(t.origin,"bar-")&&Qi(e,o),n=t.width,r=Ci(e)?"":Vi(e,a).getOr("")}}),e.on("ObjectResized",function(t){var n=t.target;if(s(n)){var r=ge.fromDom(n),a=t.origin;Z(a,"corner-")&&f(r,a,t.width),Ri(r),di(e,r.dom)}}),e.on("SwitchMode",function(){c().each(function(t){e.mode.isReadOnly()?t.hideBars():t.showBars()})}),{lazyResize:c,lazyWire:function(){return i.getOr(Xa(ge.fromDom(e.getBody()),es))},destroy:function(){o.each(function(e){e.destroy()}),i.each(function(t){!function(e,t){e.inline&&wn(t.parent())}(e,t)})}}},ns=function(e,t){return{element:e,offset:t}},rs=function(e,t,n){return e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind(function(t){return rs(e,t,n).orThunk(function(){return d.some(t)})}):d.none()},as=function(e,t){return e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length},os=function(e,t){var n=rs(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return ns(n,as(e,n));var r=e.property().children(n);return r.length>0?os(e,r[r.length-1]):ns(n,as(e,n))},is=os,ss=Tn(),cs=function(e,t){xa(e).bind(function(e){return ca(e,["fixed","relative","empty"])}).each(function(n){var r=n.value/2;Na(e,r,n.unit),Na(t,r,n.unit)})},ls=function(e,t,n){e.cells[t]=n},us=function(e,t){return Ve(t,e.section)},ds=function(e,t){var n=e.cells,r=D(n,t);return Ve(r,e.section)},fs=function(e,t){return e.cells[t]},ms=function(e,t){return fs(e,t).element},ps=function(e){return e.cells.length},hs=function(e){var t=function(e,t){for(var n=[],r=[],a=0,o=e.length;a<o;a++){var i=e[a];(t(i,a)?n:r).push(i)}return{pass:n,fail:r}}(e,function(e){return"colgroup"===e.section});return{rows:t.fail,cols:t.pass}},vs=function(e,t,n,r){n===r?St(e,t):wt(e,t,n)},gs=function(e,t,n){U(dt(e,t)).fold(function(){return pn(e,n)},function(e){return mn(e,n)})},bs=function(e,t){var n=[],r=[],a=function(e){return D(e,function(e){e.isNew&&n.push(e.element);var t=e.element;return yn(t),I(e.cells,function(e){e.isNew&&r.push(e.element),vs(e.element,"colspan",e.colspan,1),vs(e.element,"rowspan",e.rowspan,1),hn(t,e.element)}),t})},o=function(e){return R(e,function(e){return D(e.cells,function(e){return vs(e.element,"span",e.colspan,1),e.element})})},i=function(t,n){var r=function(e,t){var n=vt(e,t).getOrThunk(function(){var n=ge.fromTag(t,We(e).dom);return"thead"===t?gs(e,"caption,colgroup",n):"colgroup"===t?gs(e,"caption",n):hn(e,n),n});return yn(n),n}(e,n),i=("colgroup"===n?o:a)(t);bn(r,i)},s=function(t,n){t.length>0?i(t,n):function(t){vt(e,t).each(wn)}(n)},c=[],l=[],u=[],d=[];return I(t,function(e){switch(e.section){case"thead":c.push(e);break;case"tbody":l.push(e);break;case"tfoot":u.push(e);break;case"colgroup":d.push(e)}}),s(d,"colgroup"),s(c,"thead"),s(l,"tbody"),s(u,"tfoot"),{newRows:n,newCells:r}},ys=function(e,t){if(0===e.length)return 0;var n=e[0];return E(e,function(e){return!t(n.element,e.element)}).fold(function(){return e.length},function(e){return e})},ws=function(e,t,n,r){var a=function(e,t){return e[t]}(e,t).cells.slice(n),o=ys(a,r),i=function(e,t){return D(e,function(e){return fs(e,t)})}(e,n).slice(t);return{colspan:o,rowspan:ys(i,r)}},xs=function(e,t){var n=D(e,function(e){return D(e.cells,i)});return D(e,function(r,a){return function(e,t){return{details:e,section:t}}(R(r.cells,function(r,o){if(!1===n[a][o]){var i=ws(e,a,o,t);return function(e,t,r,a){for(var o=e;o<e+r;o++)for(var i=t;i<t+a;i++)n[o][i]=!0}(a,o,i.rowspan,i.colspan),[(s=r.element,c=i.rowspan,l=i.colspan,u=r.isNew,{element:s,rowspan:c,colspan:l,isNew:u})]}return[];var s,c,l,u}),r.section)})},ks=function(e,t,n){var r=[];if(tn.hasColumns(e)){var a=D(tn.justColumns(e),function(e){return Re(e.element,n)});r.push(Ve(a,"colgroup"))}for(var o=0;o<e.grid.rows;o++){for(var i=[],s=0;s<e.grid.columns;s++){var c=tn.getAt(e,o,s).map(function(e){return Re(e.element,n)}).getOrThunk(function(){return Re(t.gap(),!0)});i.push(c)}var l=Ve(i,e.all[o].section);r.push(l)}return r},_s=function(e,t){return D(e,function(e){var n,r,a,o,i=function(e){return P(e,function(e){return Ge(e.element).map(function(e){var t=Ge(e).isNone();return Re(e,t)})}).getOrThunk(function(){return Re(t.row(),!0)})}(e.details);return n=i.element,r=e.details,a=e.section,o=i.isNew,{element:n,cells:r,section:a,isNew:o}})},Ss=function(e,t){var n=xs(e,we);return _s(n,t)},Cs=function(e,t){return P(e.all,function(e){return L(e.cells,function(e){return we(t,e.element)})})},Ns=function(e,t,n,r,a){return function(o,i,s,c,l){var u=tn.fromTable(i);return t(u,s).map(function(t){var n=function(e,t){return ks(e,t,!1)}(u,c),r=e(n,t,we,a(c));return{grid:Ss(r.grid,c),cursor:r.cursor}}).fold(function(){return d.none()},function(e){var t=bs(i,e.grid),a=d.from(l).getOrThunk(function(){return ji(i)});return n(i,e.grid,a),r(i),ei(o,i),d.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},Ts=function(e,t){return Ht(t.element).bind(function(t){return Cs(e,t)})},Ds=function(e,t){var n=D(t.selection,function(t){return Ht(t).bind(function(t){return Cs(e,t)})}),r=Cr(n);return r.length>0?d.some({cells:r,generators:t.generators,clipboard:t.clipboard}):d.none()},Is=function(e,t){var n=D(t.selection,function(t){return Ht(t).bind(function(t){return Cs(e,t)})}),r=Cr(n);return r.length>0?d.some(r):d.none()},Ms=function(e,t,n,r){for(var a=hs(e).rows,o=!0,i=0;i<a.length;i++)for(var s=0;s<ps(a[0]);s++){var c=n(ms(a[i],s),t);!0===c&&!1===o?ls(a[i],s,Re(r(),!0)):!0===c&&(o=!1)}return e},Os=function(e,t,n,r){var a=hs(e).rows;if(t>0&&t<a.length){var o=function(e,t){return A(e,function(e,n){return N(e,function(e){return t(e.element,n.element)})?e:e.concat([n])},[])}(a[t-1].cells,n);I(o,function(e){for(var o=d.none(),i=function(t){for(var i=function(i){var s=a[t].cells[i];n(s.element,e.element)&&(o.isNone()&&(o=d.some(r())),o.each(function(e){ls(a[t],i,Re(e,!0))}))},s=0;s<ps(a[0]);s++)i(s)},s=t;s<a.length;s++)i(s)})}return e},As=function(e){return{is:function(t){return e===t},isValue:s,isError:i,getOr:t(e),getOrThunk:t(e),getOrDie:t(e),or:function(t){return As(e)},orThunk:function(t){return As(e)},fold:function(t,n){return n(e)},map:function(t){return As(t(e))},mapError:function(t){return As(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return d.some(e)}}},Ls=function(t){return{is:i,isValue:i,isError:s,getOr:n,getOrThunk:function(e){return e()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,n){return e(t)},map:function(e){return Ls(t)},mapError:function(e){return Ls(e(t))},each:e,bind:function(e){return Ls(t)},exists:i,forall:s,toOptional:d.none}},Es={value:As,error:Ls,fromOption:function(e,t){return e.fold(function(){return Ls(t)},As)}},zs=function(e,t){return{rowDelta:0,colDelta:ps(e[0])-ps(t[0])}},Rs=function(e,t){return{rowDelta:e.length-t.length,colDelta:0}},Vs=function(e,t,n){var r="colgroup"===t.section?n.col:n.cell;return D(e,function(){return Re(r(),!0)})},Bs=function(e,t,n){return e.concat(T(t,function(){var t=e[e.length-1];return us(t,Vs(t.cells,t,n))}))},$s=function(e,t,r){return D(e,function(e){var a=Vs(T(t,n),e,r);return us(e,e.cells.concat(a))})},Us=function(e,t,r){var a=t.colDelta<0?$s:n;return(t.rowDelta<0?Bs:n)(a(e,Math.abs(t.colDelta),r),Math.abs(t.rowDelta),r)},Ps=function(e,t,n,a){var o=r(a,fs(e[t],n).element),i=e[t];return e.length>1&&ps(i)>1&&(n>0&&o(ms(i,n-1))||n<i.cells.length-1&&o(ms(i,n+1))||t>0&&o(ms(e[t-1],n))||t<e.length-1&&o(ms(e[t+1],n)))},Fs=function(e,t,n,r,a){return function(e,t,n){if(e.row>=t.length||e.column>ps(t[0]))return Es.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var r=t.slice(e.row),a=r[0].cells.slice(e.column),o=ps(n[0]),i=n.length;return Es.value({rowDelta:r.length-i,colDelta:a.length-o})}(e,t,n).map(function(o){var i=Us(t,o,r);return function(e,t,n,r,a){for(var o=e.row,i=e.column,s=o+n.length,c=i+ps(n[0]),l=o;l<s;l++)for(var u=i;u<c;u++){Ps(t,l,u,a)&&Ms(t,ms(t[l],u),a,r.cell);var d=ms(n[l-o],u-i),f=r.replace(d);ls(t[l],u,Re(f,!0))}return t}(e,i,n,r,a)})},Hs=function(e,t,n,r,a){!function(e,t,n,r){t>0&&t<e[0].cells.length&&I(e,function(e){var a=e.cells[t-1],o=e.cells[t];n(o.element,a.element)&&ls(e,t,Re(r(),!0))})}(t,e,a,r.cell);var o=Rs(n,t),i=Us(n,o,r),s=Rs(t,i),c=Us(t,s,r);return D(c,function(t,n){var r=t.cells.slice(0,e).concat(i[n].cells).concat(t.cells.slice(e,t.cells.length));return us(t,r)})},js=function(e,t,n,r,a){Os(t,e,a,r.cell);var o=zs(n,t),i=Us(n,o,r),s=zs(t,i),c=Us(t,s,r),l=hs(c),u=l.cols,d=l.rows;return u.concat(d.slice(0,e)).concat(i).concat(d.slice(e,d.length))},qs=function(e,t,n,r,a){var o=hs(e),i=o.rows,s=o.cols,c=i.slice(0,t),l=i.slice(t),u=ds(i[n],function(e,n){return t>0&&t<i.length&&r(ms(i[t-1],n),ms(i[t],n))?fs(i[t],n):Re(a(e.element,r),!0)});return s.concat(c).concat([u]).concat(l)},Ws=function(e,t,n,r,a){return D(e,function(e){var o=t>0&&t<ps(e)&&r(ms(e,t-1),ms(e,t)),i=function(e,t,n,r,a,o,i){return"colgroup"!==n&&r?fs(e,t):Re(i(ms(e,a),o),!0)}(e,t,e.section,o,n,r,a);return function(e,t,n){var r=e.cells,a=r.slice(0,t),o=r.slice(t),i=a.concat([n]).concat(o);return us(e,i)}(e,t,i)})},Ys=function(e,t,n,r){return D(e,function(e){return ds(e,function(e){return function(e){return N(t,function(t){return n(e.element,t.element)})}(e)?Re(r(e.element,n),!0):e})})},Gs=function(e,t,n,r){return void 0!==ms(e[t],n)&&t>0&&r(ms(e[t-1],n),ms(e[t],n))},Ks=function(e,t,n){return t>0&&n(ms(e,t-1),ms(e,t))},Qs=function(e,t,n,r){var a=R(e,function(r,a){return Gs(e,a,t,n)||Ks(r,t,n)?[]:[fs(r,t)]});return Ys(e,a,n,r)},Xs=function(e,t,n,r){var a=hs(e).rows,o=a[t],i=R(o.cells,function(e,r){return Gs(a,t,r,n)||Ks(o,r,n)?[]:[e]});return Ys(e,i,n,r)},Js=wo(["cell","row","replace","gap","col","colgroup"]),Zs=function(e){return{element:e,colspan:Et(e,"colspan",1),rowspan:Et(e,"rowspan",1)}},ec=function(e,t){void 0===t&&(t=Zs),Js(e);var n=Ui(d.none()),r=function(n){return function(t){switch(Be(t.element)){case"col":return e.col(t);default:return e.cell(t)}}(t(n))},a=function(e){var t=r(e);return n.get().isNone()&&n.set(d.some(t)),o=d.some({item:e,replacement:t}),t},o=d.none();return{getOrInit:function(e,t){return o.fold(function(){return a(e)},function(n){return t(e,n.item)?n.replacement:a(e)})},cursor:n.get}},tc=function(e,t){return function(n){var r=Ui(d.none());Js(n);var a=[],o=function(o){var i={scope:e},s=n.replace(o,t,i);return a.push({item:o,sub:s}),r.get().isNone()&&r.set(d.some(s)),s};return{replaceOrInit:function(e,t){return function(e,t){return L(a,function(n){return t(n.item,e)})}(e,t).fold(function(){return o(e)},function(n){return t(e,n.item)?n.sub:o(e)})},cursor:r.get}}},nc=function(e){Js(e);var t=Ui(d.none());return{combine:function(n){return t.get().isNone()&&t.set(d.some(n)),function(){var t=e.cell({element:n,colspan:1,rowspan:1});return Lt(t,"width"),Lt(n,"width"),t}},cursor:t.get}},rc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ac=Tn(),oc=function(e){return t=e,n=ac.property().name(t),C(rc,n);var t,n},ic=function(e){return t=e,n=ac.property().name(t),C(["ol","ul"],n);var t,n},sc=function(e){return t=e,C(["br","img","hr","input"],ac.property().name(t));var t},cc=function(e){var t,n=function(e){return"br"===Be(e)},r=function(e){return tr(e).bind(function(t){var r=Xe(t).map(function(e){return!!oc(e)||!!sc(e)&&"img"!==Be(e)}).getOr(!1);return Ge(t).map(function(a){return!0===r||("li"===Be(o=a)||pt(o,ic).isSome())||n(t)||oc(a)&&!we(e,a)?[]:[ge.fromTag("br")];var o})}).getOr([])},a=0===(t=R(e,function(e){var t=Je(e);return function(e){return V(e,function(e){return n(e)||He(e)&&0===_n(e).trim().length})}(t)?[]:t.concat(r(e))})).length?[ge.fromTag("br")]:t;yn(e[0]),bn(e[0],a)},lc=function(e){0===jt(e).length&&wn(e)},uc=function(e,t){return{grid:e,cursor:t}},dc=function(e,t,n){var r=hs(e).rows;return fc(r,t,n).orThunk(function(){return fc(r,0,0)})},fc=function(e,t,n){return d.from(e[t]).bind(function(e){return d.from(e.cells[n]).bind(function(e){return d.from(e.element)})})},mc=function(e,t,n){var r=hs(e).rows;return uc(e,fc(r,t,n))},pc=function(e){return A(e,function(e,t){return N(e,function(e){return e.row===t.row})?e:e.concat([t])},[]).sort(function(e,t){return e.row-t.row})},hc=function(e){return A(e,function(e,t){return N(e,function(e){return e.column===t.column})?e:e.concat([t])},[]).sort(function(e,t){return e.column-t.column})},vc=function(e,t,n){var r,a,o=(r=e,a=n.section,Kt(r,function(){return a})),i=tn.generate(o);return ks(i,t,!0)},gc=function(e,t){var n=M(e,t);return 0===n.length?d.some("td"):n.length===e.length?d.some("th"):d.none()},bc=function(e,t,n){var r=tn.generate(t),a=n.getWidths(r,n);Fa(r,a,n)},yc=Ns(function(e,t,n,r){var a=t[0].row,o=t[0].row,i=pc(t),s=A(i,function(e,t){return qs(e,o,a,n,r.getOrInit)},e);return mc(s,o,t[0].column)},Is,e,e,ec),wc=Ns(function(e,t,n,r){var a=pc(t),o=a[a.length-1].row,i=a[a.length-1].row+a[a.length-1].rowspan,s=A(a,function(e,t){return qs(e,i,o,n,r.getOrInit)},e);return mc(s,i,t[0].column)},Is,e,e,ec),xc=Ns(function(e,t,n,r){var a=hc(t),o=a[0].column,i=a[0].column,s=A(a,function(e,t){return Ws(e,i,o,n,r.getOrInit)},e);return mc(s,t[0].row,i)},Is,bc,e,ec),kc=Ns(function(e,t,n,r){var a=t[t.length-1].column,o=t[t.length-1].column+t[t.length-1].colspan,i=hc(t),s=A(i,function(e,t){return Ws(e,o,a,n,r.getOrInit)},e);return mc(s,t[0].row,o)},Is,bc,e,ec),_c=Ns(function(e,t,n,r){var a=hc(t),o=function(e,t,n){var r=D(e,function(e){var r=e.cells.slice(0,t).concat(e.cells.slice(n+1));return Ve(r,e.section)});return M(r,function(e){return e.cells.length>0})}(e,a[0].column,a[a.length-1].column),i=dc(o,t[0].row,t[0].column);return uc(o,i)},Is,bc,lc,ec),Sc=Ns(function(e,t,n,r){var a=pc(t),o=function(e,t,n){var r=hs(e),a=r.rows;return r.cols.concat(a.slice(0,t)).concat(a.slice(n+1))}(e,a[0].row,a[a.length-1].row),i=dc(o,t[0].row,t[0].column);return uc(o,i)},Is,e,lc,ec),Cc=(Ns(function(e,t,n,r){var a=Qs(e,t.column,n,r.replaceOrInit);return mc(a,t.row,t.column)},Ts,e,e,tc("row","th")),Ns(function(e,t,n,r){var a=hc(t),o=A(a,function(e,t){return Qs(e,t.column,n,r.replaceOrInit)},e);return mc(o,t[0].row,t[0].column)},Is,e,e,tc("row","th"))),Nc=(Ns(function(e,t,n,r){var a=Qs(e,t.column,n,r.replaceOrInit);return mc(a,t.row,t.column)},Ts,e,e,tc(null,"td")),Ns(function(e,t,n,r){var a=hc(t),o=A(a,function(e,t){return Qs(e,t.column,n,r.replaceOrInit)},e);return mc(o,t[0].row,t[0].column)},Is,e,e,tc(null,"td"))),Tc=(Ns(function(e,t,n,r){var a=Xs(e,t.row,n,r.replaceOrInit);return mc(a,t.row,t.column)},Ts,e,e,tc("col","th")),Ns(function(e,t,n,r){var a=pc(t),o=A(a,function(e,t){return Xs(e,t.row,n,r.replaceOrInit)},e);return mc(o,t[0].row,t[0].column)},Is,e,e,tc("col","th")),Ns(function(e,t,n,r){var a=Xs(e,t.row,n,r.replaceOrInit);return mc(a,t.row,t.column)},Ts,e,e,tc(null,"td")),Ns(function(e,t,n,r){var a=pc(t),o=A(a,function(e,t){return Xs(e,t.row,n,r.replaceOrInit)},e);return mc(o,t[0].row,t[0].column)},Is,e,e,tc(null,"td")),Ns(function(e,n,r,a){var o=n.cells;cc(o);var i=function(e,t,n,r){var a=hs(e).rows;if(0===a.length)return e;for(var o=t.startRow;o<=t.finishRow;o++)for(var i=t.startCol;i<=t.finishCol;i++)ls(a[o],i,Re(r(),!1));return e}(e,n.bounds,0,t(o[0]));return uc(i,d.from(o[0]))},function(e,t){return t.mergable},e,e,nc)),Dc=Ns(function(e,t,n,r){var a=O(t,function(e,t){return Ms(e,t,n,r.combine(t))},e);return uc(a,d.from(t[0]))},function(e,t){return t.unmergable},bc,e,nc),Ic=Ns(function(e,t,n,r){var a,o,i,s,c,l=(a=t.clipboard,o=t.generators,i=tn.fromTable(a),ks(i,o,!0)),u=(s=t.row,c=t.column,{row:s,column:c});return Fs(u,e,l,t.generators,n).fold(function(){return uc(e,d.some(t.element))},function(e){var n=dc(e,t.row,t.column);return uc(e,n)})},function(e,t){return Ht(t.element).bind(function(n){return Cs(e,n).map(function(e){return F(F({},e),{generators:t.generators,clipboard:t.clipboard})})})},bc,e,ec),Mc=Ns(function(e,t,n,r){var a=hs(e).rows,o=t.cells[0].column,i=a[t.cells[0].row],s=vc(t.clipboard,t.generators,i),c=Hs(o,e,s,t.generators,n),l=dc(c,t.cells[0].row,t.cells[0].column);return uc(c,l)},Ds,e,e,ec),Oc=Ns(function(e,t,n,r){var a=hs(e).rows,o=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=a[t.cells[0].row],s=vc(t.clipboard,t.generators,i),c=Hs(o,e,s,t.generators,n),l=dc(c,t.cells[0].row,t.cells[0].column);return uc(c,l)},Ds,e,e,ec),Ac=Ns(function(e,t,n,r){var a=hs(e).rows,o=t.cells[0].row,i=a[o],s=vc(t.clipboard,t.generators,i),c=js(o,e,s,t.generators,n),l=dc(c,t.cells[0].row,t.cells[0].column);return uc(c,l)},Ds,e,e,ec),Lc=Ns(function(e,t,n,r){var a=hs(e).rows,o=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=a[t.cells[0].row],s=vc(t.clipboard,t.generators,i),c=js(o,e,s,t.generators,n),l=dc(c,t.cells[0].row,t.cells[0].column);return uc(c,l)},Ds,e,e,ec),Ec=function(e,t){var n=tn.fromTable(e);return Is(n,t).bind(function(e){var t=e[e.length-1],r=e[0].column,a=t.column+t.colspan,o=z(D(n.all,function(e){return M(e.cells,function(e){return e.column>=r&&e.column<a})}));return gc(o,function(e){return"th"===Be(e.element)})}).getOr("")},zc=function(e){return Mi(e.parentNode)},Rc=function(e,t){var n="thead"===zc(t),r=!N(t.cells,function(e){return"th"!==Mi(e)});return n||r?d.some({thead:n,ths:r}):d.none()},Vc=function(e,t){return"thead"===(n=Rc(0,t).fold(function(){return zc(t)},function(e){return"thead"}))?"header":"tfoot"===n?"footer":"body";var n},Bc=function(e,t,n){var r=e.getParent(t,"table"),a=t.parentNode,o=Mi(a);if(n!==o){var i=e.select(n,r)[0];if(!i){i=e.create(n);var s=r.firstChild;"thead"===n?U(dt(ge.fromDom(r),"caption,colgroup")).fold(function(){return r.insertBefore(i,s)},function(t){return e.insertAfter(i,t.dom)}):r.appendChild(i)}"tbody"===n&&"thead"===o&&i.firstChild?i.insertBefore(t,i.firstChild):i.appendChild(t),a.hasChildNodes()||e.remove(a)}},$c=function(e,t,n,r){var a=e.dom,o=function(e,t,n){if(y(n)&&Mi(t)!==n){var r=e.dom.rename(t,n);return ci(e,r),r}return t}(e,t,n);return b(r)||a.setAttrib(o,"scope",r),o},Uc=function(e,t,n,r){return I(t,function(t){return $c(e,t,n,r)})},Pc=function(e,t,n){var r,a=e.dom;if("header"===n){var o=Ni(e),i="auto"===o?(r=Wt(ge.fromDom(t.cells[0])).map(function(e){return Yt(e)}).getOr([]),P(r,function(e){return Rc(0,e.dom)}).map(function(e){return e.thead&&e.ths?"sectionCells":e.thead?"section":"cells"}).getOr("section")):o;Uc(e,t.cells,"section"===i?"td":"th","col"),Bc(a,t,"cells"===i?"tbody":"thead")}else Uc(e,t.cells,"td",null),Bc(a,t,"footer"===n?"tfoot":"tbody")},Fc=function(e){return function(t){var n=Be(t),r="col"===n||"colgroup"===n?function(e){return Wt(e).bind(function(e){return $n(e,br.firstSelectedSelector)}).fold(function(){return e},function(e){return e[0]})}(t):t;return bt(r,e)}},Hc=Fc("th,td"),jc=Fc("th,td,caption"),qc=function(e,t){return Hc(e).map(function(e){return gr(t)}).getOr([])},Wc=function(e,t){var n,r,a,o=Hc(e),i=o.bind(function(e){return Wt(e)}).map(function(e){return Yt(e)});return(n=o,r=i,a=function(e,n){return M(n,function(n){return N(vr(n.dom.cells),function(n){return"1"===kt(n,t)||we(n,e)})})},n.isSome()&&r.isSome()?d.some(a(n.getOrDie(),r.getOrDie())):d.none()).getOr([])},Yc=function(t,n,r){var a=function(e){return"table"===Be(Oi(e))},o=Ii(t),i=function(e,n,r,a){return function(i,s){Ri(i);var c=a(),l=ge.fromDom(t.getDoc()),u=pr(r,l,o),f=Yi(t,i);return n(i)?e(c,i,s,u,f).bind(function(e){return I(e.newRows,function(e){si(t,e.dom)}),I(e.newCells,function(e){ci(t,e.dom)}),e.cursor.map(function(e){var n=is(ss,e),r=t.dom.createRng();return r.setStart(n.element.dom,n.offset),r.setEnd(n.element.dom,n.offset),r})}):d.none()}},c=function(e,t){return Oe(e,"type").filter(function(e){return C(t,e)})};return{deleteRow:i(Sc,function(e){return!1===a(t)||po(e).rows>1},e,n),deleteColumn:i(_c,function(e){return!1===a(t)||po(e).columns>1},e,n),insertRowsBefore:i(yc,s,e,n),insertRowsAfter:i(wc,s,e,n),insertColumnsBefore:i(xc,s,cs,n),insertColumnsAfter:i(kc,s,cs,n),mergeCells:i(Tc,s,e,n),unmergeCells:i(Dc,s,e,n),pasteColsBefore:i(Mc,s,e,n),pasteColsAfter:i(Oc,s,e,n),pasteRowsBefore:i(Ac,s,e,n),pasteRowsAfter:i(Lc,s,e,n),pasteCells:i(Ic,s,e,n),setTableCellType:function(e,t){return c(t,["td","th"]).each(function(t){var n=D(qc($i(e),r),function(e){return e.dom});Uc(e,n,t,null)})},setTableRowType:function(e,t){return c(t,["header","body","footer"]).each(function(t){D(Wc($i(e),br.selected),function(n){return Pc(e,n.dom,t)})})},makeColumnsHeader:i(Cc,s,e,n),unmakeColumnsHeader:i(Nc,s,e,n),getTableRowType:function(e){var t=Wc($i(e),br.selected);if(t.length>0){var n=D(t,function(e){return Vc(0,e.dom)}),r=C(n,"header"),a=C(n,"footer");if(r||a){var o=C(n,"body");return!r||o||a?r||o||!a?"":"footer":"header"}return"body"}},getTableCellType:function(e){return gc(qc($i(e),r),function(e){return"th"===Be(e)}).getOr("")},getTableColType:Ec}},Gc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Kc=function(e){var t=ge.fromTag("colgroup");return T(e,function(){return hn(t,ge.fromTag("col"))}),t},Qc=function(e,t,n,r){return T(e,function(e){return function(e,t,n,r){for(var a=ge.fromTag("tr"),o=0;o<e;o++){var i=r<t||o<n?ge.fromTag("th"):ge.fromTag("td");o<n&&wt(i,"scope","row"),r<t&&wt(i,"scope","col"),hn(i,ge.fromTag("br")),hn(a,i)}return a}(t,n,r,e)})},Xc=function(e,t){e.selection.select(t.dom,!0),e.selection.collapse(!0)},Jc=function(e,t,n,a,o){var i=gi(e),s={styles:i,attributes:vi(e),colGroups:function(e){return e.getParam("table_use_colgroups",!1,"boolean")}(e)};return e.undoManager.ignore(function(){var r=function(e,t,n,r,a,o){void 0===o&&(o=Gc);var i=ge.fromTag("table"),s="cells"!==a;It(i,o.styles),xt(i,o.attributes),o.colGroups&&hn(i,Kc(t));var c=Math.min(e,n);if(s&&n>0){var l=ge.fromTag("thead");hn(i,l);var u=Qc(n,t,"sectionCells"===a?c:0,r);bn(l,u)}var d=ge.fromTag("tbody");hn(i,d);var f=Qc(s?e-c:e,t,s?0:n,r);return bn(d,f),i}(n,t,o,a,Ni(e),s);wt(r,"data-mce-id","__mce");var i,c,l,u=(i=r,c=ge.fromTag("div"),l=ge.fromDom(i.dom.cloneNode(!0)),hn(c,l),function(e){return e.dom.innerHTML}(c));e.insertContent(u),e.addVisual()}),gt(Oi(e),'table[data-mce-id="__mce"]').map(function(t){var n;return Si(e)?Xi(e,t):Ci(e)?Ji(t):(_i(e)||(n=i.width,p(n)&&-1!==n.indexOf("%")))&&Qi(e,t),Ri(t),St(t,"data-mce-id"),function(e,t){I(ft(t,"tr"),function(t){si(e,t.dom),I(ft(t,"th,td"),function(t){ci(e,t.dom)})})}(e,t),function(e,t){gt(t,"td,th").each(r(Xc,e))}(e,t),t.dom}).getOr(null)},Zc=function(e,t,n,r,a){void 0===r&&(r={});var o=function(e){return x(e)&&e>0};if(o(t)&&o(n)){var i=r.headerRows||0,s=r.headerColumns||0;return Jc(e,n,t,s,i)}return console.error(a),null},el=function(e){return function(){return e().fold(function(){return[]},function(e){return D(e,function(e){return e.dom})})}},tl=function(e){return function(t){var n=t.length>0?d.some(vr(t)):d.none();e(n)}},nl=function(e,t,n,r){return{insertTable:function(e){return function(t,n,r){void 0===r&&(r={});var a=Zc(e,n,t,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return e.undoManager.add(),a}}(e),setClipboardRows:tl(t.setRows),getClipboardRows:el(t.getRows),setClipboardCols:tl(t.setColumns),getClipboardCols:el(t.getColumns),resizeHandler:n,selectionTargets:r}},rl=function(e,t,n){var r=Et(e,t,1);1===n||r<=1?St(e,t):wt(e,t,Math.min(n,r))},al=function(e,t){var n=tn.fromTable(e);return Is(n,t).map(function(e){var t=e[e.length-1],r=e[0].column,a=t.column+t.colspan;return H(function(e,t,n){if(tn.hasColumns(e)){var r=M(tn.justColumns(e),function(e){return e.column>=t&&e.column<n}),a=D(r,function(e){var r=or(e.element);return rl(r,"span",n-t),r}),o=ge.fromTag("colgroup");return bn(o,a),[o]}return[]}(n,r,a),function(e,t,n){return D(e.all,function(e){var r=M(e.cells,function(e){return e.column>=t&&e.column<n}),a=D(r,function(e){var r=or(e.element);return rl(r,"colspan",n-t),r}),o=ge.fromTag("tr");return bn(o,a),o})}(n,r,a))})},ol=function(e,t,n){var r=tn.fromTable(e);return Is(r,t).map(function(e){var t=ks(r,n,!1),a=hs(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan);return function(e){return D(e,function(e){var t=ar(e.element);return I(e.cells,function(e){var n=or(e.element);vs(n,"colspan",e.colspan,1),vs(n,"rowspan",e.rowspan,1),hn(t,n)}),t})}(Ss(a,n))})},il=tinymce.util.Tools.resolve("tinymce.util.Tools"),sl=function(e,t,n){return function(t,r){for(var a=0;a<r.length;a++){var o=e.getStyle(r[a],n);if(void 0===t&&(t=o),t!==o)return""}return t}(void 0,e.select("td,th",t))},cl=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},ll=function(e,t){il.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},ul=function(e){return Ae(t=e,n="menu")&&void 0!==t[n]&&null!==t[n];var t,n},dl=function(e,t){var n;return n=e,(t||[]).concat(D(n,function(e){var t=e.text||e.title;return ul(e)?{text:t,items:dl(e.menu)}:{text:t,value:e.value}}))},fl=function(e){return function(t){return Z(t,"rgb")?e.toHex(t):t}},ml=function(e,t){var n=ge.fromDom(t);return{borderwidth:At(n,"border-width").getOr(""),borderstyle:At(n,"border-style").getOr(""),bordercolor:At(n,"border-color").map(fl(e)).getOr(""),backgroundcolor:At(n,"background-color").map(fl(e)).getOr("")}},pl=function(e){var t=e[0],n=e.slice(1);return I(n,function(e){I(Se(t),function(n){Ne(e,function(e,r){var a=t[n];""!==a&&n===r&&a!==e&&(t[n]="")})})}),t},hl=function(e){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===e?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}},vl=function(e,t,n,r){return L(e,function(e){return n.formatter.matchNode(r,t+e)}).getOr("")},gl=r(vl,["left","center","right"],"align"),bl=r(vl,["top","middle","bottom"],"valign"),yl=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],wl=function(e){return yl.concat(function(e){var t=dl(function(e){return e.getParam("table_cell_class_list",[],"array")}(e));return t.length>0?d.some({name:"class",type:"listbox",label:"Class",items:t}):d.none()}(e).toArray())},xl=function(e){return function(t,n){var r=t.dom;return{setAttrib:function(t,a){e&&!a||r.setAttrib(n,t,a)},setStyle:function(t,a){e&&!a||r.setStyle(n,t,a)},setFormat:function(r,a){e&&!a||(""===a?t.formatter.remove(r,{value:null},n,!0):t.formatter.apply(r,{value:a},n))}}}},kl={normal:xl(!1),ifTruthy:xl(!0)},_l=function(e){return Wt(e[0]).map(function(t){var n=tn.fromTable(t),r=tn.justCells(n),a=M(r,function(t){return N(e,function(e){return we(t.element,e)})});return D(a,function(e){return{element:e.element.dom,column:tn.getColumnAt(n,e.column).map(function(e){return e.element.dom})}})})},Sl=function(e,t,n){var r=1===t.length;if(t.length>=1){var a=Wt(t[0]);_l(t).each(function(t){I(t,function(t){var a=$c(e,t.element,n.celltype),o=r?kl.normal(e,a):kl.ifTruthy(e,a);!function(e,t,n){e.setAttrib("scope",n.scope),e.setAttrib("class",n.class),e.setStyle("height",zi(n.height)),t.setStyle("width",zi(n.width))}(o,t.column.map(function(t){return r?kl.normal(e,t):kl.ifTruthy(e,t)}).getOr(o),n),yi(e)&&function(e,t){e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),e.setFormat("tablecellbordercolor",t.bordercolor),e.setFormat("tablecellborderstyle",t.borderstyle),e.setFormat("tablecellborderwidth",zi(t.borderwidth))}(o,n),r&&(ll(e,a),function(e,t){il.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})}(e,a)),n.halign&&cl(e,a,n.halign),n.valign&&function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)}(e,a,n.valign)})}),a.each(function(t){return di(e,t.dom)})}},Cl=function(e,t,n){var r=n.getData();n.close(),e.undoManager.transact(function(){Sl(e,t,r),e.focus()})},Nl=function(e,t){var n=_l(t).map(function(t){return D(t,function(t){return function(e,t,n,r){var a=e.dom,o=r.getOr(t),i=function(e,t){return a.getStyle(e,t)||a.getAttrib(e,t)};return F({width:i(o,"width"),height:i(t,"height"),scope:a.getAttrib(t,"scope"),celltype:Mi(t),class:a.getAttrib(t,"class",""),halign:gl(e,t),valign:bl(e,t)},n?ml(a,t):{})}(e,t.element,yi(e),t.column)})});return pl(n.getOrDie())},Tl=function(e,t){var n=qc($i(e),t);if(0!==n.length){var a=Nl(e,n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:wl(e)},hl("cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:wl(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:yi(e)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:r(Cl,e,n)})}},Dl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Il=function(e){return Dl.concat(function(e){var t=dl(function(e){return e.getParam("table_row_class_list",[],"array")}(e));return t.length>0?d.some({name:"class",type:"listbox",label:"Class",items:t}):d.none()}(e).toArray())},Ml=function(e,t,n,r){var a=1===t.length;I(t,function(t){r.type!==Mi(t.parentNode)&&Pc(e,t,r.type);var o=a?kl.normal(e,t):kl.ifTruthy(e,t);!function(e,t){e.setAttrib("scope",t.scope),e.setAttrib("class",t.class),e.setStyle("height",zi(t.height))}(o,r),wi(e)&&function(e,t){e.setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle)}(o,r),r.align!==n.align&&(ll(e,t),cl(e,t,r.align))}),Wt(ge.fromDom(t[0])).each(function(t){return di(e,t.dom)})},Ol=function(e,t,n,r){var a=r.getData();r.close(),e.undoManager.transact(function(){Ml(e,t,n,a),e.focus()})},Al=function(e){var t=Wc($i(e),br.selected);if(0!==t.length){var n=D(t,function(t){return function(e,t,n){var r=e.dom;return F({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),class:r.getAttrib(t,"class",""),type:Vc(0,t),align:gl(e,t)},n?ml(r,t):{})}(e,t.dom,wi(e))}),a=pl(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Il(e)},hl("row")]},i={type:"panel",items:[{type:"grid",columns:2,items:Il(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:wi(e)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:r(Ol,e,D(t,function(e){return e.dom}),a)})}},Ll=tinymce.util.Tools.resolve("tinymce.Env"),El=function(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)p(n)?e.setStyle(t,n,r):e.setStyle(t,n);else if(t.children)for(var a=0;a<t.children.length;a++)El(e,t.children[a],n,r)},zl=function(e,t,n){var r,a=e.dom,o=n.getData();n.close(),""===o.class&&delete o.class,e.undoManager.transact(function(){if(!t){var n=parseInt(o.cols,10)||1,i=parseInt(o.rows,10)||1;t=Jc(e,n,i,0,0)}!function(e,t,n){var r,a=e.dom,o={},i={};if(o.class=n.class,i.height=zi(n.height),a.getAttrib(t,"width")&&!ki(e)?o.width=(r=n.width)?r.replace(/px$/,""):"":i.width=zi(n.width),ki(e)?(i["border-width"]=zi(n.border),i["border-spacing"]=zi(n.cellspacing)):(o.border=n.border,o.cellpadding=n.cellpadding,o.cellspacing=n.cellspacing),ki(e)&&t.children)for(var s=0;s<t.children.length;s++)El(a,t.children[s],{"border-width":zi(n.border),padding:zi(n.cellpadding)}),xi(e)&&El(a,t.children[s],{"border-color":n.bordercolor});xi(e)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),o.style=a.serializeStyle(F(F({},gi(e)),i)),a.setAttribs(t,F(F({},vi(e)),o)),di(e,t)}(e,t,o),(r=a.select("caption",t)[0])&&!o.caption&&a.remove(r),!r&&o.caption&&((r=a.create("caption")).innerHTML=Ll.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),""===o.align?ll(e,t):cl(e,t,o.align),e.focus(),e.addVisual()})},Rl=function(e,t){var n,a=e.dom,o=function(e,t){var n,r,a,o,i=gi(e),s=vi(e),c=t?(n=e.dom,{borderstyle:Oe(i,"border-style").getOr(""),bordercolor:fl(n)(Oe(i,"border-color").getOr("")),backgroundcolor:fl(n)(Oe(i,"background-color").getOr(""))}):{};return F(F(F(F(F(F({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),s),c),(o=i["border-width"],ki(e)&&o?{border:o}:Oe(s,"border").fold(function(){return{}},function(e){return{border:e}}))),(r=Oe(i,"border-spacing").or(Oe(s,"cellspacing")).fold(function(){return{}},function(e){return{cellspacing:e}}),a=Oe(i,"border-padding").or(Oe(s,"cellpadding")).fold(function(){return{}},function(e){return{cellpadding:e}}),F(F({},r),a)))}(e,xi(e));!1===t?(n=a.getParent(e.selection.getStart(),"table"))?o=function(e,t,n){var r=e.dom;return F({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"),cellpadding:r.getAttrib(t,"cellpadding")||sl(e.dom,t,"padding"),border:function(t,n){var r=At(ge.fromDom(n),"border-width");return ki(e)&&r.isSome()?r.getOr(""):t.getAttrib(n,"border")||sl(e.dom,n,"border-width")||sl(e.dom,n,"border")}(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class",""),align:gl(e,t)},n?ml(r,t):{})}(e,n,xi(e)):xi(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",xi(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=dl(function(e){return e.getParam("table_class_list",[],"array")}(e));i.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var s={type:"grid",columns:2,items:function(e,t,n){var r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],a=function(e){return e.getParam("table_appearance_options",!0,"boolean")}(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],o=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(a).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(o)}(e,i,t)},c=xi(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[s]},hl("table")]}:{type:"panel",items:[s]};e.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:r(zl,e,n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Vl=function(e){return jc($i(e))},Bl=function(e){return Hc($i(e))},$l=function(t,n,a,i,s){var c=Ei(t),l=function(e){return Wt(e,c)},u=function(e){return function(n){t.selection.setRng(n),t.focus(),a.clear(e),Ri(e),di(t,e.dom)}},f=function(e){return Bl(t).each(function(t){l(t).each(function(n){var r=wr(i,n,t);e(n,r).each(u(n))})})},m=function(){return Bl(t).map(function(n){return l(n).bind(function(r){var a=wr(i,r,n),o=pr(e,ge.fromDom(t.getDoc()),d.none());return ol(r,a,o)})})},v=function(){return Bl(t).map(function(e){return l(e).bind(function(t){var n=wr(i,t,e);return al(t,n)})})},g=function(e,n){return n().each(function(n){var r=D(n,function(e){return or(e)});Bl(t).each(function(n){return l(n).each(function(n){var a=hr(ge.fromDom(t.getDoc())),o=function(e,t,n,r){return{selection:gr(e),clipboard:n,generators:r}}(i,0,r,a);e(n,o).each(u(n))})})})};Ne({mceTableSplitCells:function(){return f(n.unmergeCells)},mceTableMergeCells:function(){return f(n.mergeCells)},mceTableInsertRowBefore:function(){return f(n.insertRowsBefore)},mceTableInsertRowAfter:function(){return f(n.insertRowsAfter)},mceTableInsertColBefore:function(){return f(n.insertColumnsBefore)},mceTableInsertColAfter:function(){return f(n.insertColumnsAfter)},mceTableDeleteCol:function(){return f(n.deleteColumn)},mceTableDeleteRow:function(){return f(n.deleteRow)},mceTableCutCol:function(e){return v().each(function(e){s.setColumns(e),f(n.deleteColumn)})},mceTableCutRow:function(e){return m().each(function(e){s.setRows(e),f(n.deleteRow)})},mceTableCopyCol:function(e){return v().each(function(e){return s.setColumns(e)})},mceTableCopyRow:function(e){return m().each(function(e){return s.setRows(e)})},mceTablePasteColBefore:function(e){return g(n.pasteColsBefore,s.getColumns)},mceTablePasteColAfter:function(e){return g(n.pasteColsAfter,s.getColumns)},mceTablePasteRowBefore:function(e){return g(n.pasteRowsBefore,s.getRows)},mceTablePasteRowAfter:function(e){return g(n.pasteRowsAfter,s.getRows)},mceTableDelete:function(){return Vl(t).each(function(e){Wt(e,c).filter(o(c)).each(function(e){var n=ge.fromText("");if(mn(e,n),wn(e),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(n.dom,0),r.setEnd(n.dom,0),t.selection.setRng(r),t.nodeChanged()}})})},mceTableSizingMode:function(e,n){return function(e){return Vl(t).each(function(n){Ci(t)||Si(t)||_i(t)||Wt(n,c).each(function(n){"relative"!==e||lo(n)?"fixed"!==e||uo(n)?"responsive"!==e||fo(n)||Ji(n):Xi(t,n):Qi(t,n),Ri(n),di(t,n.dom)})})}(n)}},function(e,n){return t.addCommand(n,e)});var b=function(e,t){t.each(function(t){di(e,t.dom)})};Ne({mceTableCellType:function(e,r){var a=Wt($i(t),c);n.setTableCellType(t,r),b(t,a)},mceTableRowType:function(e,r){var a=Wt($i(t),c);n.setTableRowType(t,r),b(t,a)}},function(e,n){return t.addCommand(n,e)}),t.addCommand("mceTableColType",function(e,t){return Oe(t,"type").each(function(e){return f("th"===e?n.makeColumnsHeader:n.unmakeColumnsHeader)})}),Ne({mceTableProps:r(Rl,t,!1),mceTableRowProps:r(Al,t),mceTableCellProps:r(Tl,t,i)},function(e,n){return t.addCommand(n,function(){return e()})}),t.addCommand("mceInsertTable",function(e,n){h(n)&&Se(n).length>0?Zc(t,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Rl(t,!0)}),t.addCommand("mceTableApplyCellStyle",function(e,n){var r=function(e){return"tablecell"+e.toLowerCase().replace("-","")};if(h(n)){var a=qc($i(t),i);if(0!==a.length){var o=Ie(n,function(e,n){return t.formatter.has(r(n))&&p(e)});(function(e){for(var t in e)if(Ce.call(e,t))return!1;return!0})(o)||(Ne(o,function(e,n){I(a,function(a){kl.normal(t,a.dom).setFormat(r(n),e)})}),l(a[0]).each(function(e){return di(t,e.dom,{structure:!1,style:!0})}))}}})},Ul=function(e,t,n){var r=Ei(e);Ne({mceTableRowType:function(){return t.getTableRowType(e)},mceTableCellType:function(){return t.getTableCellType(e)},mceTableColType:function(){return Hc($i(e)).bind(function(e){return function(e){return Wt(e,r)}(e).map(function(r){var a=wr(n,r,e);return t.getTableColType(r,a)})}).getOr("")}},function(t,n){return e.addQueryValueHandler(n,t)})},Pl=function(){var e=Ui(d.none()),t=Ui(d.none()),n=function(e){e.set(d.none())};return{getRows:e.get,setRows:function(r){e.set(r),n(t)},clearRows:function(){return n(e)},getColumns:t.get,setColumns:function(r){t.set(r),n(e)},clearColumns:function(){return n(t)}}},Fl={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Hl=function(e){e.formatter.register(Fl)},jl=Pn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ql=F(F({},jl),{none:function(e){return void 0===e&&(e=void 0),jl.none(e)}}),Wl=function(e,t){return Wt(e,t).bind(function(t){var n=jt(t);return E(n,function(t){return we(e,t)}).map(function(e){return{index:e,all:n}})})},Yl=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},Gl=Pn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kl={before:Gl.before,on:Gl.on,after:Gl.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(n,n,n)}},Ql=Pn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xl={domRange:Ql.domRange,relative:Ql.relative,exact:Ql.exact,exactFromRange:function(e){return Ql.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){var t,n=function(e){return e.match({domRange:function(e){return ge.fromDom(e.startContainer)},relative:function(e,t){return Kl.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return t=n,ge.fromDom(Ye(t).dom.defaultView)},range:Yl},Jl=function(e,t){return e.selectNodeContents(t.dom)},Zl=function(e,t,n){var r,a=e.document.createRange();return r=a,t.fold(function(e){r.setStartBefore(e.dom)},function(e,t){r.setStart(e.dom,t)},function(e){r.setStartAfter(e.dom)}),function(e,t){t.fold(function(t){e.setEndBefore(t.dom)},function(t,n){e.setEnd(t.dom,n)},function(t){e.setEndAfter(t.dom)})}(a,n),a},eu=function(e,t,n,r,a){var o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(r.dom,a),o},tu=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},nu=Pn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ru=function(e,t,n){return t(ge.fromDom(n.startContainer),n.startOffset,ge.fromDom(n.endContainer),n.endOffset)},au=function(e,n){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return nu.rtl(ge.fromDom(e.endContainer),e.endOffset,ge.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return ru(0,nu.ltr,n)}):ru(0,nu.ltr,n)}(0,function(e,n){return n.match({domRange:function(e){return{ltr:t(e),rtl:d.none}},relative:function(t,n){return{ltr:j(function(){return Zl(e,t,n)}),rtl:j(function(){return d.some(Zl(e,n,t))})}},exact:function(t,n,r,a){return{ltr:j(function(){return eu(e,t,n,r,a)}),rtl:j(function(){return d.some(eu(e,r,a,t,n))})}}})}(e,n))},ou=function(e,t){return au(e,t).match({ltr:function(t,n,r,a){var o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(r.dom,a),o},rtl:function(t,n,r,a){var o=e.document.createRange();return o.setStart(r.dom,a),o.setEnd(t.dom,n),o}})},iu=(nu.ltr,nu.rtl,function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}),su=function(e,t,n,r,a){var o=function(n){var r=e.dom.createRange();return r.setStart(t.dom,n),r.collapse(!0),r},i=_n(t).length,s=function(e,t,n,r,a){if(0===a)return 0;if(t===r)return a-1;for(var o=r,i=1;i<a;i++){var s=e(i),c=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||c>o)return i-1;o=c}}return 0}(function(e){return o(e).getBoundingClientRect()},n,r,a.right,i);return o(s)},cu=function(e,t,n,r){return He(t)?function(e,t,n,r){var a=e.dom.createRange();a.selectNode(t.dom);var o=a.getClientRects();return P(o,function(e){return iu(e,n,r)?d.some(e):d.none()}).map(function(a){return su(e,t,n,r,a)})}(e,t,n,r):function(e,t,n,r){var a=e.dom.createRange(),o=Je(t);return P(o,function(t){return a.selectNode(t.dom),iu(a.getBoundingClientRect(),n,r)?cu(e,t,n,r):d.none()})}(e,t,n,r)},lu=function(e,t){return t-e.left<e.right-t},uu=function(e,t,n){var r=e.dom.createRange();return r.selectNode(t.dom),r.collapse(n),r},du=function(e,t,n){var r=e.dom.createRange();r.selectNode(t.dom);var a=r.getBoundingClientRect(),o=lu(a,n);return(!0===o?er:tr)(t).map(function(t){return uu(e,t,o)})},fu=function(e,t,n){var r=t.dom.getBoundingClientRect(),a=lu(r,n);return d.some(uu(e,t,a))},mu=function(e,t,n){return d.from(e.dom.caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return d.none();var n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),d.some(n)})},pu=function(e,t,n){return d.from(e.dom.caretRangeFromPoint(t,n))},hu=function(e,t,n,r){var a=e.dom.createRange();a.selectNode(t.dom);var o=a.getBoundingClientRect();return function(e,t,n,r){var a=e.dom.createRange();a.selectNode(t.dom);var o=a.getBoundingClientRect(),i=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return cu(e,t,i,s)}(e,t,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))},vu=function(e,t,n){return ge.fromPoint(e,t,n).bind(function(r){var a=function(){return function(e,t,n){return(0===Je(t).length?fu:du)(e,t,n)}(e,r,t)};return 0===Je(r).length?a():hu(e,r,t,n).orThunk(a)})},gu=document.caretPositionFromPoint?mu:document.caretRangeFromPoint?pu:vu,bu=function(e,t){var n=Be(e);return"input"===n?Kl.after(e):C(["br","img"],n)?0===t?Kl.before(e):Kl.after(e):Kl.on(e,t)},yu=function(e,t){var n=e.fold(Kl.before,bu,Kl.after),r=t.fold(Kl.before,bu,Kl.after);return Xl.relative(n,r)},wu=function(e,t,n,r){var a=bu(e,t),o=bu(n,r);return Xl.relative(a,o)},xu=function(e,t,n,r){var a=function(e,t,n,r){var a=We(e).dom.createRange();return a.setStart(e.dom,t),a.setEnd(n.dom,r),a}(e,t,n,r),o=we(e,n)&&t===r;return a.collapsed&&!o},ku=function(e){return d.from(e.getSelection())},_u=function(e,t){ku(e).each(function(e){e.removeAllRanges(),e.addRange(t)})},Su=function(e,t,n,r,a){var o=eu(e,t,n,r,a);_u(e,o)},Cu=function(e,t){return au(e,t).match({ltr:function(t,n,r,a){Su(e,t,n,r,a)},rtl:function(t,n,r,a){ku(e).each(function(o){if(o.setBaseAndExtent)o.setBaseAndExtent(t.dom,n,r.dom,a);else if(o.extend)try{!function(e,t,n,r,a,o){t.collapse(n.dom,r),t.extend(a.dom,o)}(0,o,t,n,r,a)}catch(o){Su(e,r,a,t,n)}else Su(e,r,a,t,n)})}})},Nu=function(e,t,n,r,a){var o=wu(t,n,r,a);Cu(e,o)},Tu=function(e,t,n){var r=yu(t,n);Cu(e,r)},Du=function(e){var t=Xl.getWin(e).dom,n=function(e,n,r,a){return eu(t,e,n,r,a)},r=function(e){return e.match({domRange:function(e){var t=ge.fromDom(e.startContainer),n=ge.fromDom(e.endContainer);return wu(t,e.startOffset,n,e.endOffset)},relative:yu,exact:wu})}(e);return au(t,r).match({ltr:n,rtl:n})},Iu=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return d.some(Yl(ge.fromDom(t.startContainer),t.startOffset,ge.fromDom(n.endContainer),n.endOffset))}return d.none()},Mu=function(e){if(null===e.anchorNode||null===e.focusNode)return Iu(e);var t=ge.fromDom(e.anchorNode),n=ge.fromDom(e.focusNode);return xu(t,e.anchorOffset,n,e.focusOffset)?d.some(Yl(t,e.anchorOffset,n,e.focusOffset)):Iu(e)},Ou=function(e,t){var n=function(e,t){var n=e.document.createRange();return Jl(n,t),n}(e,t);_u(e,n)},Au=function(e){return function(e){return ku(e).filter(function(e){return e.rangeCount>0}).bind(Mu)}(e).map(function(e){return Xl.exact(e.start,e.soffset,e.finish,e.foffset)})},Lu=function(e,t){return function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?d.some(n).map(tu):d.none()}(ou(e,t))},Eu=function(e,t,n){return function(e,t,n){var r=ge.fromDom(e.document);return gu(r,t,n).map(function(e){return Yl(ge.fromDom(e.startContainer),e.startOffset,ge.fromDom(e.endContainer),e.endOffset)})}(e,t,n)},zu=tinymce.util.Tools.resolve("tinymce.util.VK"),Ru=function(e,t,n,r){return $u(e,t,function(e,t){return Wl(e,t).fold(function(){return ql.none(e)},function(t){return t.index+1<t.all.length?ql.middle(e,t.all[t.index+1]):ql.last(e)})}(n),r)},Vu=function(e,t,n,r){return $u(e,t,function(e,t){return Wl(e,t).fold(function(){return ql.none()},function(t){return t.index-1>=0?ql.middle(e,t.all[t.index-1]):ql.first(e)})}(n),r)},Bu=function(e,t){var n=Xl.exact(t,0,t,0);return Du(n)},$u=function(e,t,n,r){return n.fold(d.none,d.none,function(e,t){return er(t).map(function(e){return Bu(0,e)})},function(n){return Wt(n,t).bind(function(t){var a=yr(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,a)}),function(e,t){var n=ft(t,"tr");return U(n).bind(function(e){return gt(e,"td,th").map(function(e){return Bu(0,e)})})}(0,t)})})},Uu=["table","li","dl"],Pu=function(e,t,n){if(e.keyCode===zu.TAB){var r=Oi(t),a=function(e){var t=Be(e);return we(e,r)||C(Uu,t)},o=t.selection.getRng();if(o.collapsed){var i=ge.fromDom(o.startContainer);Ht(i,a).each(function(r){e.preventDefault(),(e.shiftKey?Vu:Ru)(t,a,r,n).each(function(e){t.selection.setRng(e)})})}}},Fu=function(e,t){return{selection:e,kill:t}},Hu=function(e,t,n,r){return{start:Kl.on(e,t),finish:Kl.on(n,r)}},ju=function(e,t){var n=ou(e,t);return Yl(ge.fromDom(n.startContainer),n.startOffset,ge.fromDom(n.endContainer),n.endOffset)},qu=Hu,Wu=function(e,t,n,r,a){return we(n,r)?d.none():zn(n,r,t).bind(function(t){var r=t.boxes.getOr([]);return r.length>0?(a(e,r,t.start,t.finish),d.some(Fu(d.some(qu(n,0,n,Xn(n))),!0))):d.none()})},Yu=function(e,t){return{item:e,mode:t}},Gu=function(e,t,n,r){return void 0===r&&(r=Ku),e.property().parent(t).map(function(e){return Yu(e,r)})},Ku=function(e,t,n,r){return void 0===r&&(r=Qu),n.sibling(e,t).map(function(e){return Yu(e,r)})},Qu=function(e,t,n,r){void 0===r&&(r=Qu);var a=e.property().children(t);return n.first(a).map(function(e){return Yu(e,r)})},Xu=[{current:Gu,next:Ku,fallback:d.none()},{current:Ku,next:Qu,fallback:d.some(Gu)},{current:Qu,next:Qu,fallback:d.some(Ku)}],Ju=function(e,t,n,r,a){return void 0===a&&(a=Xu),L(a,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Ju(e,t,n,r)})})})},Zu=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?d.some(e[e.length-1]):d.none()}}},ed=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?d.some(e[0]):d.none()}}},td=function(e,t,n,r,a,o){return Ju(e,t,r,a).bind(function(t){return o(t.item)?d.none():n(t.item)?d.some(t.item):td(e,t.item,n,t.mode,a,o)})},nd=function(e){return function(t){return 0===e.property().children(t).length}},rd=function(e,t,n,r){return td(e,t,n,Ku,Zu(),r)},ad=function(e,t,n,r){return td(e,t,n,Ku,ed(),r)},od=Tn(),id=function(e,t){return function(e,t,n){return rd(e,t,nd(e),n)}(od,e,t)},sd=function(e,t){return function(e,t,n){return ad(e,t,nd(e),n)}(od,e,t)},cd=Pn([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ld=function(e){return bt(e,"tr")},ud=F(F({},cd),{verify:function(e,t,n,r,a,o,i){return bt(r,"td,th",i).bind(function(n){return bt(t,"td,th",i).map(function(t){return we(n,t)?we(r,n)&&Xn(n)===a?o(t):cd.none("in same cell"):Ln(ld,[n,t]).fold(function(){return function(e,t,n){var r=e.getRect(t),a=e.getRect(n);return a.right>r.left&&a.left<r.right}(e,t,n)?cd.success():o(t)},function(e){return o(t)})})}).getOr(cd.none("default"))},cata:function(e,t,n,r,a){return e.fold(t,n,r,a)}}),dd=function(e,t){return E(e,r(we,t))},fd=function(e){return"br"===Be(e)},md=function(e,t,n){return t(e,n).bind(function(e){return He(e)&&0===_n(e).trim().length?md(e,t,n):d.some(e)})},pd=function(e,t,n,r){return function(e,t){return Ze(e,t).filter(fd).orThunk(function(){return Ze(e,t-1).filter(fd)})}(t,n).bind(function(t){return r.traverse(t).fold(function(){return md(t,r.gather,e).map(r.relative)},function(e){return(t=e,Ge(t).bind(function(e){var n=Je(e);return dd(n,t).map(function(r){return function(e,t,n,r){return{parent:e,children:t,element:n,index:r}}(e,n,t,r)})})).map(function(e){return Kl.on(e.parent,e.index)});var t})})},hd=function(e,t,n,r){return(fd(t)?function(e,t,n){return n.traverse(t).orThunk(function(){return md(t,n.gather,e)}).map(n.relative)}(e,t,r):pd(e,t,n,r)).map(function(e){return{start:e,finish:e}})},vd=function(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}},gd=function(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}},bd=function(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}},yd=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}},wd=function(e,t){return d.some(e.getRect(t))},xd=function(e,t,n){return Fe(t)?wd(e,t).map(yd):He(t)?function(e,t,n){return n>=0&&n<Xn(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):d.none()}(e,t,n).map(yd):d.none()},kd=function(e,t){return Fe(t)?wd(e,t).map(yd):He(t)?e.getRangedRect(t,0,t,Xn(t)).map(yd):d.none()},_d=Pn([{none:[]},{retry:["caret"]}]),Sd=function(e,t,n){return(r=t,a=oc,mt(function(e,t){return t(e)},pt,r,a,o)).fold(i,function(t){return kd(e,t).exists(function(e){return function(e,t){return e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right}(n,e)})});var r,a,o},Cd={point:function(e){return e.bottom},adjuster:function(e,t,n,r,a){var o=vd(a,5);return Math.abs(n.bottom-r.bottom)<1?_d.retry(o):n.top>a.bottom?_d.retry(o):n.top===a.bottom?_d.retry(vd(a,1)):Sd(e,t,a)?_d.retry(bd(o,5,0)):_d.none()},move:vd,gather:sd},Nd=function(e,t,n,r,a){return 0===a?d.some(r):function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===Be(e)}).isSome()}(e,r.left,t.point(r))?function(e,t,n,r,a){return Nd(e,t,n,t.move(r,5),a)}(e,t,n,r,a-1):e.situsFromPoint(r.left,t.point(r)).bind(function(o){return o.start.fold(d.none,function(o){return kd(e,o).bind(function(i){return t.adjuster(e,o,i,n,r).fold(d.none,function(r){return Nd(e,t,n,r,a-1)})}).orThunk(function(){return d.some(r)})},d.none)})},Td=function(e,t,n){var r=e.move(n,5),a=Nd(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?d.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?d.some(-e.point(t)):d.none()}(e,a,t).fold(function(){return t.situsFromPoint(a.left,e.point(a))},function(n){return t.scrollBy(0,n),t.situsFromPoint(a.left,e.point(a)-n)})},Dd={tryUp:r(Td,{point:function(e){return e.top},adjuster:function(e,t,n,r,a){var o=gd(a,5);return Math.abs(n.top-r.top)<1?_d.retry(o):n.bottom<a.top?_d.retry(o):n.bottom===a.top?_d.retry(gd(a,1)):Sd(e,t,a)?_d.retry(bd(o,5,0)):_d.none()},move:gd,gather:id}),tryDown:r(Td,Cd),ieTryUp:function(e,t){return e.situsFromPoint(t.left,t.top-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left,t.bottom+5)},getJumpSize:t(5)},Id=function(e,t,n){return e.getSelection().bind(function(r){return hd(t,r.finish,r.foffset,n).fold(function(){return d.some(ns(r.finish,r.foffset))},function(a){var o=e.fromSitus(a);return function(e){return ud.cata(e,function(e){return d.none()},function(){return d.none()},function(e){return d.some(ns(e,0))},function(e){return d.some(ns(e,Xn(e)))})}(ud.verify(e,r.finish,r.foffset,o.finish,o.foffset,n.failure,t))})})},Md=function(e,t,n,r,a,o){return 0===o?d.none():Ld(e,t,n,r,a).bind(function(i){var s=e.fromSitus(i),c=ud.verify(e,n,r,s.finish,s.foffset,a.failure,t);return ud.cata(c,function(){return d.none()},function(){return d.some(i)},function(i){return we(n,i)&&0===r?Od(e,n,r,gd,a):Md(e,t,i,0,a,o-1)},function(i){return we(n,i)&&r===Xn(i)?Od(e,n,r,vd,a):Md(e,t,i,Xn(i),a,o-1)})})},Od=function(e,t,n,r,a){return xd(e,t,n).bind(function(t){return Ad(e,a,r(t,Dd.getJumpSize()))})},Ad=function(e,t,n){var r=he().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(e,n):r.isIE()?t.ieRetry(e,n):d.none()},Ld=function(e,t,n,r,a){return xd(e,n,r).bind(function(t){return Ad(e,a,t)})},Ed=function(e,t){return pt(e,function(e){return Ge(e).exists(function(e){return we(e,t)})},n).isSome();var n},zd=function(e,t,n,r,a){return bt(r,"td,th",t).bind(function(r){return bt(r,"table",t).bind(function(o){return Ed(a,o)?function(e,t,n){return Id(e,t,n).bind(function(r){return Md(e,t,r.element,r.offset,n,20).map(e.fromSitus)})}(e,t,n).bind(function(e){return bt(e.finish,"td,th",t).map(function(t){return{start:r,finish:t,range:e}})}):d.none()})})},Rd=function(e,t,n,r,a,o){return he().browser.isIE()?d.none():o(r,t).orThunk(function(){return zd(e,t,n,r,a).map(function(e){var t=e.range;return Fu(d.some(qu(t.start,t.soffset,t.finish,t.foffset)),!0)})})},Vd=function(e,t){return bt(e,"tr",t).bind(function(e){return bt(e,"table",t).bind(function(n){var r=ft(n,"tr");return we(e,r[0])?function(e,t,n){return rd(od,e,t,n)}(n,function(e){return tr(e).isSome()},t).map(function(e){var t=Xn(e);return Fu(d.some(qu(e,t,e,t)),!0)}):d.none()})})},Bd=function(e,t){return bt(e,"tr",t).bind(function(e){return bt(e,"table",t).bind(function(n){var r=ft(n,"tr");return we(e,r[r.length-1])?function(e,t,n){return ad(od,e,t,n)}(n,function(e){return er(e).isSome()},t).map(function(e){return Fu(d.some(qu(e,0,e,0)),!0)}):d.none()})})},$d=function(e,t,n,r,a,o,i){return zd(e,n,r,a,o).bind(function(e){return Wu(t,n,e.start,e.finish,i)})},Ud=function(){var e=Ui(d.none());return{clear:function(){return e.set(d.none())},set:function(t){return e.set(d.some(t))},isSet:function(){return e.get().isSome()},on:function(t){return e.get().each(t)}}},Pd=function(e,t){return bt(e,"td,th",t)};var Fd={traverse:Xe,gather:sd,relative:Kl.before,otherRetry:Dd.tryDown,ieRetry:Dd.ieTryDown,failure:ud.failedDown},Hd={traverse:Qe,gather:id,relative:Kl.before,otherRetry:Dd.tryUp,ieRetry:Dd.ieTryUp,failure:ud.failedUp},jd=function(e){return function(t){return t===e}},qd=jd(38),Wd=jd(40),Yd=function(e){return e>=37&&e<=40},Gd={isBackward:jd(37),isForward:jd(39)},Kd={isBackward:jd(39),isForward:jd(37)},Qd=function(e){return{elementFromPoint:function(t,n){return ge.fromPoint(ge.fromDom(e.document),t,n)},getRect:function(e){return e.dom.getBoundingClientRect()},getRangedRect:function(t,n,r,a){var o=Xl.exact(t,n,r,a);return Lu(e,o)},getSelection:function(){return Au(e).map(function(t){return ju(e,t)})},fromSitus:function(t){var n=Xl.relative(t.start,t.finish);return ju(e,n)},situsFromPoint:function(t,n){return Eu(e,t,n).map(function(e){return Hu(e.start,e.soffset,e.finish,e.foffset)})},clearSelection:function(){!function(e){ku(e).each(function(e){return e.removeAllRanges()})}(e)},collapseSelection:function(t){void 0===t&&(t=!1),Au(e).each(function(n){return n.fold(function(e){return e.collapse(t)},function(n,r){var a=t?n:r;Tu(e,a,a)},function(n,r,a,o){var i=t?n:a,s=t?r:o;Nu(e,i,s,i,s)})})},setSelection:function(t){Nu(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:function(t,n){Tu(e,t,n)},selectContents:function(t){Ou(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){var t,n,r,a;return(t=ge.fromDom(e.document),n=void 0!==t?t.dom:document,r=n.body.scrollLeft||n.documentElement.scrollLeft,a=n.body.scrollTop||n.documentElement.scrollTop,Hr(r,a)).top},scrollBy:function(t,n){!function(e,t,n){var r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollBy(e,t)}(t,n,ge.fromDom(e.document))}}},Xd=function(e,t){return{rows:e,cols:t}},Jd=function(e,t,n,r){var a=function(e,t,n,r){var a=Ud(),o=a.clear;return{clearstate:o,mousedown:function(e){r.clear(t),Pd(e.target,n).each(a.set)},mouseover:function(o){a.on(function(a){r.clearBeforeUpdate(t),Pd(o.target,n).each(function(o){zn(a,o,n).each(function(n){var i=n.boxes.getOr([]);(i.length>1||1===i.length&&!we(a,o))&&(r.selectRange(t,i,n.start,n.finish),e.selectContents(o))})})})},mouseup:function(e){o()}}}(Qd(e),t,n,r);return{clearstate:a.clearstate,mousedown:a.mousedown,mouseover:a.mouseover,mouseup:a.mouseup}},Zd=function(e,t,n,a){var o=Qd(e),i=function(){return a.clear(t),d.none()};return{keydown:function(e,s,c,l,u,f){var m=e.raw,p=m.which,h=!0===m.shiftKey;return Rn(t,a.selectedSelector).fold(function(){return Wd(p)&&h?r($d,o,t,n,Fd,l,s,a.selectRange):qd(p)&&h?r($d,o,t,n,Hd,l,s,a.selectRange):Wd(p)?r(Rd,o,n,Fd,l,s,Bd):qd(p)?r(Rd,o,n,Hd,l,s,Vd):d.none},function(e){var n=function(n){return function(){return P(n,function(n){return function(e,t,n,r,a){return Bn(r,e,t,a.firstSelectedSelector,a.lastSelectedSelector).map(function(e){return a.clearBeforeUpdate(n),a.selectRange(n,e.boxes,e.start,e.finish),e.boxes})}(n.rows,n.cols,t,e,a)}).fold(function(){return Vn(t,a.firstSelectedSelector,a.lastSelectedSelector).map(function(e){var n=Wd(p)||f.isForward(p)?Kl.after:Kl.before;return o.setRelativeSelection(Kl.on(e.first,0),n(e.table)),a.clear(t),Fu(d.none(),!0)})},function(e){return d.some(Fu(d.none(),!0))})}};return Wd(p)&&h?n([Xd(1,0)]):qd(p)&&h?n([Xd(-1,0)]):f.isBackward(p)&&h?n([Xd(0,-1),Xd(-1,0)]):f.isForward(p)&&h?n([Xd(0,1),Xd(1,0)]):Yd(p)&&!1===h?i:d.none})()},keyup:function(e,r,o,i,s){return Rn(t,a.selectedSelector).fold(function(){var c=e.raw,l=c.which;return!1==(!0===c.shiftKey)?d.none():Yd(l)?function(e,t,n,r,a,o,i){return we(n,a)&&r===o?d.none():bt(n,"td,th",t).bind(function(n){return bt(a,"td,th",t).bind(function(r){return Wu(e,t,n,r,i)})})}(t,n,r,o,i,s,a.selectRange):d.none()},d.none)}}},ef=function(e,t,n,r){var a=Qd(e);return function(e,o){r.clearBeforeUpdate(t),zn(e,o,n).each(function(e){var n=e.boxes.getOr([]);r.selectRange(t,n,e.start,e.finish),a.selectContents(o),a.collapseSelection()})}},tf=function(e,t){I(t,function(t){!function(e,t){Eo(e)?e.dom.classList.remove(t):Ro(e,t);Bo(e)}(e,t)})},nf={byClass:function(e){var t,n,r=(t=e.selected,function(e){Vo(e,t)}),a=(n=[e.selected,e.lastSelected,e.firstSelected],function(e){tf(e,n)}),o=function(t){var n=ft(t,e.selectedSelector);I(n,a)};return{clearBeforeUpdate:o,clear:o,selectRange:function(t,n,a,i){o(t),I(n,r),Vo(a,e.firstSelected),Vo(i,e.lastSelected)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:function(e,t,n){var r=function(t){St(t,e.selected),St(t,e.firstSelected),St(t,e.lastSelected)},a=function(t){wt(t,e.selected,"1")},o=function(e){i(e),n()},i=function(t){var n=ft(t,e.selectedSelector);I(n,r)};return{clearBeforeUpdate:i,clear:o,selectRange:function(n,r,i,s){o(n),I(r,a),wt(i,e.firstSelected,"1"),wt(s,e.lastSelected,"1"),t(r,i,s)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},rf=function(e,t,n){var r=tn.fromTable(e);return Is(r,t).map(function(e){var t=ks(r,n,!1);return{upOrLeftCells:function(e,t,n){var r=e.slice(0,t[t.length-1].row+1),a=Ss(r,n);return R(a,function(e){var n=e.cells.slice(0,t[t.length-1].column+1);return D(n,function(e){return e.element})})}(t,e,n),downOrRightCells:function(e,t,n){var r=e.slice(t[0].row+t[0].rowspan-1,e.length),a=Ss(r,n);return R(a,function(e){var n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return D(n,function(e){return e.element})})}(t,e,n)}})},af=function(e){return!1===$o(ge.fromDom(e.target),"ephox-snooker-resizer-bar")};function of(t,n,r){var a=nf.byAttr(br,function(n,a,o){r.targets().each(function(r){Wt(a).each(function(i){var s=Ii(t),c=pr(e,ge.fromDom(t.getDoc()),s),l=rf(i,r,c);li(t,n,a,o,l)})})},function(){return ui(t)});return t.on("init",function(r){var o=t.getWin(),i=Oi(t),s=Ei(t),c=Jd(o,i,s,a),l=Zd(o,i,s,a),u=ef(o,i,s,a);t.on("TableSelectorChange",function(e){return u(e.start,e.finish)});var d,f,m=function(e,n){(function(e){return!0===e.raw.shiftKey})(e)&&(n.kill&&e.kill(),n.selection.each(function(e){var n=Xl.relative(e.start,e.finish),r=ou(o,n);t.selection.setRng(r)}))},p=function(e){return 0===e.button},h=(d=Ui(ge.fromDom(i)),f=Ui(0),{touchEnd:function(e){var t=ge.fromDom(e.target);if("td"===Be(t)||"th"===Be(t)){var n=d.get(),r=f.get();we(n,t)&&e.timeStamp-r<300&&(e.preventDefault(),u(t,t))}d.set(t),f.set(e.timeStamp)}});t.on("dragstart",function(e){c.clearstate()}),t.on("mousedown",function(e){p(e)&&af(e)&&c.mousedown(Ao(e))}),t.on("mouseover",function(e){var t;(void 0===(t=e).buttons||Ll.browser.isEdge()&&0===t.buttons||0!=(1&t.buttons))&&af(e)&&c.mouseover(Ao(e))}),t.on("mouseup",function(e){p(e)&&af(e)&&c.mouseup(Ao(e))}),t.on("touchend",h.touchEnd),t.on("keyup",function(e){var n=Ao(e);if(n.raw.shiftKey&&Yd(n.raw.which)){var r=t.selection.getRng(),a=ge.fromDom(r.startContainer),o=ge.fromDom(r.endContainer);l.keyup(n,a,r.startOffset,o,r.endOffset).each(function(e){m(n,e)})}}),t.on("keydown",function(e){var r=Ao(e);n().each(function(e){return e.hideBars()});var a=t.selection.getRng(),o=ge.fromDom(a.startContainer),i=ge.fromDom(a.endContainer),s=Vr(Gd,Kd)(ge.fromDom(t.selection.getStart()));l.keydown(r,o,a.startOffset,i,a.endOffset,s).each(function(e){m(r,e)}),n().each(function(e){return e.showBars()})}),t.on("NodeChange",function(){var n=t.selection,r=ge.fromDom(n.getStart()),o=ge.fromDom(n.getEnd());Ln(Wt,[r,o]).fold(function(){return a.clear(i)},e)})}),{clear:a.clear}}var sf=function(e,t){var n=Ui(d.none()),r=Ui([]),a=function(){return jc($i(e)).bind(function(e){return Wt(e).map(function(n){return"caption"===Be(e)?yr(e):wr(t,n,e)})})},o=function(){n.set(j(a)()),I(r.get(),function(e){return e()})},i=function(e,t){var a=function(){return n.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})};return a(),r.set(r.get().concat([a])),function(){r.set(M(r.get(),function(e){return e!==a}))}};return e.on("NodeChange ExecCommand TableSelectorChange",o),{onSetupTable:function(e){return i(e,function(e){return!1})},onSetupCellOrRow:function(e){return i(e,function(e){return"caption"===Be(e.element)})},onSetupPasteable:function(e){return function(t){return i(t,function(t){return"caption"===Be(t.element)||e().isNone()})}},onSetupMergeable:function(e){return i(e,function(e){return e.mergable.isNone()})},onSetupUnmergeable:function(e){return i(e,function(e){return e.unmergable.isNone()})},resetTargets:o,targets:function(){return n.get()}}},cf=function(e,t,n){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(e){return e("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(t){return function(){return e.execCommand(t)}};e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(n.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(n.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteable(n.getColumns)}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteable(n.getColumns)}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})},lf=function(e){var t=function(e){return e.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},items:t,scope:"node",position:"node"})},uf=function(e,t,n){var r=function(t){return function(){return e.execCommand(t)}},a=function(t){e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},o={text:"Table properties",onSetup:t.onSetupTable,onAction:r("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:r("mceTableDelete")};e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(n.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(n.getRows)});e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteable(n.getColumns)}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteable(n.getColumns)});e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:t.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:t.onSetupUnmergeable});!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:a}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",o),e.ui.registry.addMenuItem("deletetable",i),e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(function(){return""},function(e){return"caption"===Be(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}})};function df(e){var t=Yn(function(){return Oi(e)},function(){return jc($i(e))},br.selectedSelector),n=sf(e,t),r=ts(e),a=of(e,r.lazyResize,n),o=Yc(e,r.lazyWire,t),i=Pl();return $l(e,o,a,t,i),Ul(e,o,t),xr(e,t,o,a),uf(e,n,i),cf(e,n,i),lf(e),e.on("PreInit",function(){e.serializer.addTempAttr(br.firstSelected),e.serializer.addTempAttr(br.lastSelected),Hl(e)}),bi(e)&&e.on("keydown",function(t){Pu(t,e,o)}),e.on("remove",function(){r.destroy()}),nl(e,i,r,n)}Gn.add("table",df)}()},"CWx+":function(e,t){},CaOM:function(e,t,n){"use strict";t.a=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||["",""])[1].replace(/\+/g,"%20"))||null}},CabM:function(e,t){},Cdx3:function(e,t,n){var r=n("sB3e"),a=n("lktj");n("uqUo")("keys",function(){return function(e){return a(r(e))}})},DDoT:function(e,t){},DHrB:function(e,t){},DhT3:function(e,t){},Dr9H:function(e,t){},DyBw:function(e,t){},EDhB:function(e,t){},ETdn:function(e,t){},Ehlx:function(e,t){},F2sa:function(e,t){},FGtH:function(e,t){},FLeV:function(e,t){},FaSy:function(e,t){},GW2b:function(e,t){},GWDW:function(e,t){},GZzZ:function(e,t){},H7n5:function(e,t){},HTgX:function(e,t){},HaK5:function(e,t,n){n("I7le")},Hb9E:function(e,t){},HpRW:function(e,t,n){"use strict";var r=n("kM2E"),a=n("lOnJ"),o=n("+ZMJ"),i=n("NWt+");e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),(t=void 0!==c)&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},I7le:function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},o=function(e){return function(t){return typeof t===e}},i=a("string"),s=a("object"),c=a("array"),l=(e=null,function(t){return e===t}),u=o("boolean"),d=o("number"),f=function(){},m=function(e){return function(){return e}},p=m(!1),h=m(!0),v=function(){return g},g=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:p,isSome:p,isNone:h,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:t,map:v,each:f,bind:v,exists:p,forall:h,filter:v,equals:e,equals_:e,toArray:function(){return[]},toString:m("none()")}}(),b=function(e){var t=m(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:h,isNone:p,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return b(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:g},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(p,function(t){return n(e,t)})}};return a},y={some:b,none:v,from:function(e){return null===e||void 0===e?g:b(e)}},w=Array.prototype.push,x=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!c(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t},k=function(e){return function(e,t){return t>=0&&t<e.length?y.some(e[t]):y.none()}(e,0)},_=("undefined"!=typeof window?window:Function("return this;")(),function(e,t,n){!function(e,t,n){if(!(i(n)||u(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)}),S=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},C={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return S(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return S(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return S(n)},fromDom:S,fromPoint:function(e,t,n){return y.from(e.dom.elementFromPoint(t,n)).map(S)}},N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=tinymce.util.Tools.resolve("tinymce.util.Promise"),D=tinymce.util.Tools.resolve("tinymce.util.XHR"),I=function(e){return e.getParam("image_dimensions",!0,"boolean")},M=function(e){return e.getParam("images_upload_url","","string")},O=function(e){return e.getParam("images_upload_handler",void 0,"function")},A=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},L=function(e){return e&&(e=e.replace(/px$/,"")),e},E=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},z=function(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},R=function(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))},V=N.DOM,B=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?L(e.style.marginLeft):""},$=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?L(e.style.marginTop):""},U=function(e){return e.style.borderWidth?L(e.style.borderWidth):""},P=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},F=function(e,t){return e.style[t]?e.style[t]:""},H=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},j=function(e,t,n){""===n?e.removeAttribute(t):e.setAttribute(t,n)},q=function(e){H(e)?function(e){var t=e.parentNode;V.insertAfter(e,t),V.remove(t)}(e):function(e){var t=V.create("figure",{class:"image"});V.insertAfter(t,e),t.appendChild(e),t.appendChild(V.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"}(e)},W=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},Y=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=E(r),W(e,t)):j(e,n,r)}},G=function(e,t){return e.style[t]?L(e.style[t]):P(e,t)},K=function(e,t){var n=E(t);e.style.marginLeft=n,e.style.marginRight=n},Q=function(e,t){var n=E(t);e.style.marginTop=n,e.style.marginBottom=n},X=function(e,t){var n=E(t);e.style.borderWidth=n},J=function(e,t){e.style.borderStyle=t},Z=function(e){return"FIGURE"===e.nodeName},ee=function(e){return 0===V.getAttrib(e,"alt").length&&"presentation"===V.getAttrib(e,"role")},te=function(e,t){var n=document.createElement("img");return j(n,"style",t.style),(B(n)||""!==t.hspace)&&K(n,t.hspace),($(n)||""!==t.vspace)&&Q(n,t.vspace),(U(n)||""!==t.border)&&X(n,t.border),(function(e){return F(e,"borderStyle")}(n)||""!==t.borderStyle)&&J(n,t.borderStyle),e(n.getAttribute("style"))},ne=function(e,t){return{src:P(t,"src"),alt:function(e){return ee(e)?"":P(e,"alt")}(t),title:P(t,"title"),width:G(t,"width"),height:G(t,"height"),class:P(t,"class"),style:e(P(t,"style")),caption:H(t),hspace:B(t),vspace:$(t),border:U(t),borderStyle:F(t,"borderStyle"),isDecorative:ee(t)}},re=function(e,t,n,r,a){n[r]!==t[r]&&a(e,r,n[r])},ae=function(e,t,n){if(n){V.setAttrib(e,"role","presentation");var r=C.fromDom(e);_(r,"alt","")}else{if(l(t)){r=C.fromDom(e);a="alt",r.dom.removeAttribute(a)}else{r=C.fromDom(e);_(r,"alt",t)}"presentation"===V.getAttrib(e,"role")&&V.setAttrib(e,"role","")}var a},oe=function(e,t){return function(n,r,a){e(n,a),W(n,t)}},ie=function(e,t,n){var r=ne(e,n);re(n,r,t,"caption",function(e,t,n){return q(e)}),re(n,r,t,"src",j),re(n,r,t,"title",j),re(n,r,t,"width",Y(0,e)),re(n,r,t,"height",Y(0,e)),re(n,r,t,"class",j),re(n,r,t,"style",oe(function(e,t){return j(e,"style",t)},e)),re(n,r,t,"hspace",oe(K,e)),re(n,r,t,"vspace",oe(Q,e)),re(n,r,t,"border",oe(X,e)),re(n,r,t,"borderStyle",oe(J,e)),function(e,t,n){n.alt===t.alt&&n.isDecorative===t.isDecorative||ae(e,n.alt,n.isDecorative)}(n,r,t)},se=function(e,t){var n=e.dom.styles.parse(t),r=z(n),a=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(a)},ce=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||R(t))?null:t},le=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return!!e.schema.getTextBlockElements()[t.nodeName]},e.getBody());return r?n.split(r,t):t},ue=function(e,t){var n=function(e,t){var n=document.createElement("img");if(ie(e,r(r({},t),{caption:!1}),n),ae(n,t.alt,t.isDecorative),t.caption){var a=V.create("figure",{class:"image"});return a.appendChild(n),a.appendChild(V.create("figcaption",{contentEditable:"true"},"Caption")),a.contentEditable="false",a}return n}(function(t){return se(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var a=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(a,"data-mce-id",null),Z(a)){var o=le(e,a);e.selection.select(o)}else e.selection.select(a)},de=function(e,t){var n=ce(e);if(ie(function(t){return se(e,t)},t,n),function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))}(e,n),Z(n.parentNode)){var r=n.parentNode;le(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),function(e,t,n){var r=function(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())};n.onload=function(){t.width||t.height||!I(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r}(e,t,n)},fe=Object.prototype.hasOwnProperty,me=(t=function(e,t){return s(e)&&s(t)?me(e,t):t},function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},a=0;a<e.length;a++){var o=e[a];for(var i in o)fe.call(o,i)&&(r[i]=t(r[i],o[i]))}return r}),pe=tinymce.util.Tools.resolve("tinymce.util.Tools"),he=function(e){return i(e.value)?e.value:""},ve=function(e,t){var n=[];return pe.each(e,function(e){var r=function(e){return i(e.text)?e.text:i(e.title)?e.title:""}(e);if(void 0!==e.menu){var a=ve(e.menu,t);n.push({text:r,items:a})}else{var o=t(e);n.push({text:r,value:o})}}),n},ge=function(e){return void 0===e&&(e=he),function(t){return t?y.from(t).map(function(t){return ve(t,e)}):y.none()}},be=function(e,t){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return y.none()}(e,function(e){return function(e){return Object.prototype.hasOwnProperty.call(e,"items")}(e)?be(e.items,t):e.value===t?y.some(e):y.none()})},ye=ge,we=function(e){return ge(he)(e)},xe=function(e,t){return e.bind(function(e){return be(e,t)})},ke=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function _e(e){var t=function(t,n,r,a){var o=new XMLHttpRequest;o.open("POST",e.url),o.withCredentials=e.credentials,o.upload.onprogress=function(e){a(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){if(o.status<200||o.status>=300)r("HTTP Error: "+o.status);else{var t=JSON.parse(o.responseText);t&&"string"==typeof t.location?n(ke(e.basePath,t.location)):r("Invalid JSON: "+o.responseText)}};var i=new FormData;i.append("file",t.blob(),t.filename()),o.send(i)};return e=pe.extend({credentials:!1,handler:t},e),{upload:function(n){return e.url||e.handler!==t?function(e,t){return new T(function(n,r){try{t(e,n,r,f)}catch(e){r(e.message)}})}(n,e.handler):T.reject("Upload url missing from the settings.")}}}var Se=function(e){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Ce=function(e){var t=ye(function(t){return e.convertURL(t.value||t.url,"src")}),n=new T(function(n){!function(e,t){var n=function(e){return e.getParam("image_list",!1)}(e);"string"==typeof n?D.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}(e,function(e){n(t(e).map(function(e){return x([[{text:"None",value:""}],e])}))})}),r=we(function(e){return e.getParam("image_class_list")}(e)),a=function(e){return e.getParam("image_advtab",!1,"boolean")}(e),o=function(e){return e.getParam("image_uploadtab",!0,"boolean")}(e),s=function(e){return!!M(e)}(e),c=function(e){return!!O(e)}(e),l=function(e){var t=ce(e);return t?ne(function(t){return se(e,t)},t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}(e),u=function(e){return e.getParam("image_description",!0,"boolean")}(e),d=function(e){return e.getParam("image_title",!1,"boolean")}(e),f=I(e),m=function(e){return e.getParam("image_caption",!1,"boolean")}(e),p=function(e){return e.getParam("a11y_advanced_options",!1,"boolean")}(e),h=M(e),v=function(e){return e.getParam("images_upload_base_path",void 0,"string")}(e),g=function(e){return e.getParam("images_upload_credentials",!1,"boolean")}(e),b=O(e),w=function(e){return e.getParam("automatic_uploads",!0,"boolean")}(e),k=y.some(function(e){return e.getParam("image_prepend_url","","string")}(e)).filter(function(e){return i(e)&&e.length>0});return n.then(function(e){return{image:l,imageList:e,classList:r,hasAdvTab:a,hasUploadTab:o,hasUploadUrl:s,hasUploadHandler:c,hasDescription:u,hasImageTitle:d,hasDimensions:f,hasImageCaption:m,url:h,basePath:v,credentials:g,handler:b,prependURL:k,hasAccessibilityOptions:p,automaticUploads:w}})},Ne=function(e){var t=e.imageList.map(function(e){return{name:"images",type:"listbox",label:"Image list",items:e}}),n={name:"alt",type:"input",label:"Alternative description",disabled:e.hasAccessibilityOptions&&e.image.isDecorative},r=e.classList.map(function(e){return{name:"classes",type:"listbox",label:"Class",items:e}});return x([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:x([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},Te=function(e){return{title:"General",name:"general",items:Ne(e)}},De=Ne,Ie=function(e){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},Me=function(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}},Oe=function(e,t){return{src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}},Ae=function(e,t){var n=t.getData();(function(e,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?y.none():e.prependURL.bind(function(e){return t.substring(0,e.length)!==e?y.some(e+t):y.none()})})(e,n.src.value).each(function(e){t.setData({src:{value:e,meta:n.src.meta}})})},Le=function(e,t){var n=t.getData(),r=n.src.meta;if(void 0!==r){var a=me({},n);!function(e,t,n){e.hasDescription&&i(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&i(n.title)&&(t.title=n.title),e.hasDimensions&&(i(n.width)&&(t.dimensions.width=n.width),i(n.height)&&(t.dimensions.height=n.height)),i(n.class)&&xe(e.classList,n.class).each(function(e){t.classes=e.value}),e.hasImageCaption&&u(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(i(n.style)&&(t.style=n.style),i(n.vspace)&&(t.vspace=n.vspace),i(n.border)&&(t.border=n.border),i(n.hspace)&&(t.hspace=n.hspace),i(n.borderstyle)&&(t.borderstyle=n.borderstyle))}(e,a,r),t.setData(a)}},Ee=function(e,t,n,r){Ae(t,r),Le(t,r),function(e,t,n,r){var a=r.getData(),o=a.src.value,i=a.src.meta||{};i.width||i.height||!t.hasDimensions||e.imageSize(o).then(function(e){n.open&&r.setData({dimensions:e})})}(e,t,n,r),function(e,t,n){var r=n.getData(),a=xe(e.imageList,r.src.value);t.prevImage=a,n.setData({images:a.map(function(e){return e.value}).getOr("")})}(t,n,r)},ze=function(e,t,n){var r=z(e(n.style)),a=me({},n);return a.vspace=function(e){return e["margin-top"]&&e["margin-bottom"]&&e["margin-top"]===e["margin-bottom"]?L(String(e["margin-top"])):""}(r),a.hspace=function(e){return e["margin-right"]&&e["margin-left"]&&e["margin-right"]===e["margin-left"]?L(String(e["margin-right"])):""}(r),a.border=function(e){return e["border-width"]?L(String(e["border-width"])):""}(r),a.borderstyle=function(e){return e["border-style"]?String(e["border-style"]):""}(r),a.style=function(e,t,n){return t(e(t(n)))}(e,t,r),a},Re=function(e,t,n,r){var a=r.getData();r.block("Uploading image"),k(a.fileinput).fold(function(){r.unblock()},function(a){var o,i=URL.createObjectURL(a),s=_e({url:t.url,basePath:t.basePath,credentials:t.credentials,handler:t.handler}),c=function(){r.unblock(),URL.revokeObjectURL(i)},l=function(a){r.setData({src:{value:a,meta:{}}}),r.showTab("general"),Ee(e,t,n,r)};(o=a,new T(function(e,t){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(){t(n.error.message)},n.readAsDataURL(o)})).then(function(n){var o=e.createBlobCache(a,i,n);t.automaticUploads?s.upload(o).then(function(e){l(e),c()}).catch(function(t){c(),e.alertErr(t)}):(e.addToBlobCache(o),l(o.blobUri()),r.unblock())})})},Ve=function(e,t,n){return function(r,a){"src"===a.name?Ee(e,t,n,r):"images"===a.name?function(e,t,n,r){var a=r.getData(),o=xe(t.imageList,a.images);o.each(function(e){""===a.alt||n.prevImage.map(function(e){return e.text===a.alt}).getOr(!1)?""===e.value?r.setData({src:e,alt:n.prevAlt}):r.setData({src:e,alt:e.text}):r.setData({src:e})}),n.prevImage=o,Ee(e,t,n,r)}(e,t,n,r):"alt"===a.name?n.prevAlt=r.getData().alt:"style"===a.name?function(e,t){var n=t.getData(),r=ze(e.parseStyle,e.serializeStyle,n);t.setData(r)}(e,r):"vspace"===a.name||"hspace"===a.name||"border"===a.name||"borderstyle"===a.name?function(e,t,n){var r=me(Me(t.image),n.getData()),a=te(e.normalizeCss,Oe(r,!1));n.setData({style:a})}(e,t,r):"fileinput"===a.name?Re(e,t,n,r):"isDecorative"===a.name&&(r.getData().isDecorative?r.disable("alt"):r.enable("alt"))}},Be=function(e){return function(t){var n=function(e){return{prevImage:xe(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}}(t);return{title:"Insert/Edit Image",size:"normal",body:function(e){return e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:x([[Te(e)],e.hasAdvTab?[Se(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ie(e)]:[]])}:{type:"panel",items:De(e)}}(t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Me(t.image),onSubmit:e.onSubmit(t),onChange:Ve(e,t,n),onClose:function(e){return function(){e.open=!1}}(n)}}},$e=function(e){return function(t){return function(e){return new T(function(t){var n=document.createElement("img"),r=function(e){n.parentNode&&n.parentNode.removeChild(n),t(e)};n.onload=function(){var e={width:A(n.width,n.clientWidth),height:A(n.height,n.clientHeight)};r(T.resolve(e))},n.onerror=function(){r(T.reject("Failed to get image dimensions for: "+e))};var a=n.style;a.visibility="hidden",a.position="fixed",a.bottom=a.left="0px",a.width=a.height="auto",document.body.appendChild(n),n.src=e})}(e.documentBaseURI.toAbsolute(t)).then(function(e){return{width:String(e.width),height:String(e.height)}})}},Ue=function(e){var t={onSubmit:function(e){return function(t){return function(n){var r=me(Me(t.image),n.getData());e.execCommand("mceUpdateImage",!1,Oe(r,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),n.close()}}}(e),imageSize:$e(e),addToBlobCache:function(e){return function(t){e.editorUpload.blobCache.add(t)}}(e),createBlobCache:function(e){return function(t,n,r){return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,filename:t.name,base64:r.split(",")[1]})}}(e),alertErr:function(e){return function(t){e.windowManager.alert(t)}}(e),normalizeCss:function(e){return function(t){return se(e,t)}}(e),parseStyle:function(e){return function(t){return e.dom.parseStyle(t)}}(e),serializeStyle:function(e){return function(t,n){return e.dom.serializeStyle(t,n)}}(e)};return{open:function(){Ce(e).then(Be(t)).then(e.windowManager.open)}}},Pe=function(e){e.addCommand("mceImage",Ue(e).open),e.addCommand("mceUpdateImage",function(t,n){e.undoManager.transact(function(){return function(e,t){var n=ce(e);if(n){var a=ne(function(t){return se(e,t)},n),o=r(r({},a),t);o.src?de(e,o):function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,n)}else t.src&&ue(e,r(r({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),t))}(e,n)})})},Fe=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},He=function(e){return function(t){for(var n=t.length,r=function(t){t.attr("contenteditable",e?"true":null)};n--;){var a=t[n];Fe(a)&&(a.attr("contenteditable",e?"false":null),pe.each(a.getAll("figcaption"),r))}}},je=function(e){e.on("PreInit",function(){e.parser.addNodeFilter("figure",He(!0)),e.serializer.addNodeFilter("figure",He(!1))})},qe=function(e){e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ue(e).open,onSetup:function(t){return e.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",t.setActive).unbind}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ue(e).open}),e.ui.registry.addContextMenu("image",{update:function(e){return Z(e)||"IMG"===e.nodeName&&!R(e)?["image"]:[]}})};n.add("image",function(e){je(e),qe(e),Pe(e)})}()},IH2t:function(e,t){},IQsC:function(e,t){},Ixju:function(e,t){},JccS:function(e,t){},JqsX:function(e,t){},JxrV:function(e,t){},JzrQ:function(e,t){},"K/IZ":function(e,t){},K6dV:function(e,t){},KDBB:function(e,t){},KLhd:function(e,t){},Kci8:function(e,t,n){"use strict";var r=n("Ixju"),a=n.n(r),o=n("u/2+");var i=function(e){n("5qmP")},s=n("VU/8")(a.a,o.a,!1,i,null,null);t.default=s.exports},L6PU:function(e,t){},LHHV:function(e,t){},LIJb:function(e,t,n){var r=n("EqjI");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},LP5z:function(e,t){},"M/ek":function(e,t){},MK9U:function(e,t){},"MSp+":function(e,t){},MZqU:function(e,t){},MaV4:function(e,t){},NBEC:function(e,t,n){n("m/OW")},NHOf:function(e,t){},NUv0:function(e,t){},NdTe:function(e,t){},O3sd:function(e,t){},O7qg:function(e,t){},"OV/M":function(e,t){},OnJB:function(e,t){},"P/e0":function(e,t){},P0L1:function(e,t){e.exports="data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjQ0cHgiIGhlaWdodD0iNDRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgMSAtMjQ4IC0zNTAgKSI+DQogICAgPHBhdGggZD0iTSAxOC4zMzMzMzMzMzMzMzMzIDM0LjA4ODU0MTY2NjY2NjcgIEMgMTguODI5ODYxMTExMTExMSAzNC4wODg1NDE2NjY2NjY3ICAxOS4yNTk1NDg2MTExMTExIDMzLjkwNzExODA1NTU1NTYgIDE5LjYyMjM5NTgzMzMzMzMgMzMuNTQ0MjcwODMzMzMzMyAgTCAzNy4yMTA5Mzc1IDE1Ljk1NTcyOTE2NjY2NjcgIEMgMzcuNTczNzg0NzIyMjIyMiAxNS41OTI4ODE5NDQ0NDQ0ICAzNy43NTUyMDgzMzMzMzMzIDE1LjE2MzE5NDQ0NDQ0NDQgIDM3Ljc1NTIwODMzMzMzMzMgMTQuNjY2NjY2NjY2NjY2NyAgQyAzNy43NTUyMDgzMzMzMzMzIDE0LjE3MDEzODg4ODg4ODkgIDM3LjU3Mzc4NDcyMjIyMjIgMTMuNzQwNDUxMzg4ODg4OSAgMzcuMjEwOTM3NSAxMy4zNzc2MDQxNjY2NjY3ICBMIDM0LjI4OTA2MjUgMTAuNDU1NzI5MTY2NjY2NyAgQyAzMy45MjYyMTUyNzc3Nzc4IDEwLjA5Mjg4MTk0NDQ0NDQgIDMzLjQ5NjUyNzc3Nzc3NzggOS45MTE0NTgzMzMzMzMzMyAgMzMgOS45MTE0NTgzMzMzMzMzMyAgQyAzMi41MDM0NzIyMjIyMjIyIDkuOTExNDU4MzMzMzMzMzMgIDMyLjA3Mzc4NDcyMjIyMjIgMTAuMDkyODgxOTQ0NDQ0NCAgMzEuNzEwOTM3NSAxMC40NTU3MjkxNjY2NjY3ICBMIDE4LjMzMzMzMzMzMzMzMzMgMjMuODMzMzMzMzMzMzMzMyAgTCAxMi4yODkwNjI1IDE3Ljc4OTA2MjUgIEMgMTEuOTI2MjE1Mjc3Nzc3OCAxNy40MjYyMTUyNzc3Nzc4ICAxMS40OTY1Mjc3Nzc3Nzc4IDE3LjI0NDc5MTY2NjY2NjcgIDExIDE3LjI0NDc5MTY2NjY2NjcgIEMgMTAuNTAzNDcyMjIyMjIyMiAxNy4yNDQ3OTE2NjY2NjY3ICAxMC4wNzM3ODQ3MjIyMjIyIDE3LjQyNjIxNTI3Nzc3NzggIDkuNzEwOTM3NSAxNy43ODkwNjI1ICBMIDYuNzg5MDYyNSAyMC43MTA5Mzc1ICBDIDYuNDI2MjE1Mjc3Nzc3NzggMjEuMDczNzg0NzIyMjIyMiAgNi4yNDQ3OTE2NjY2NjY2NyAyMS41MDM0NzIyMjIyMjIyICA2LjI0NDc5MTY2NjY2NjY3IDIyICBDIDYuMjQ0NzkxNjY2NjY2NjcgMjIuNDk2NTI3Nzc3Nzc3OCAgNi40MjYyMTUyNzc3Nzc3OCAyMi45MjYyMTUyNzc3Nzc4ICA2Ljc4OTA2MjUgMjMuMjg5MDYyNSAgTCAxNy4wNDQyNzA4MzMzMzMzIDMzLjU0NDI3MDgzMzMzMzMgIEMgMTcuNDA3MTE4MDU1NTU1NiAzMy45MDcxMTgwNTU1NTU2ICAxNy44MzY4MDU1NTU1NTU2IDM0LjA4ODU0MTY2NjY2NjcgIDE4LjMzMzMzMzMzMzMzMzMgMzQuMDg4NTQxNjY2NjY2NyAgWiBNIDQxLjU3OTQyNzA4MzMzMzMgMi40MjA1NzI5MTY2NjY2NyAgQyA0My4xOTMxNDIzNjExMTExIDQuMDM0Mjg4MTk0NDQ0NDQgIDQ0IDUuOTc3NDMwNTU1NTU1NTUgIDQ0IDguMjUgIEwgNDQgMzUuNzUgIEMgNDQgMzguMDIyNTY5NDQ0NDQ0NCAgNDMuMTkzMTQyMzYxMTExMSAzOS45NjU3MTE4MDU1NTU2ICA0MS41Nzk0MjcwODMzMzMzIDQxLjU3OTQyNzA4MzMzMzMgIEMgMzkuOTY1NzExODA1NTU1NiA0My4xOTMxNDIzNjExMTExICAzOC4wMjI1Njk0NDQ0NDQ1IDQ0ICAzNS43NSA0NCAgTCA4LjI1IDQ0ICBDIDUuOTc3NDMwNTU1NTU1NTYgNDQgIDQuMDM0Mjg4MTk0NDQ0NDQgNDMuMTkzMTQyMzYxMTExMSAgMi40MjA1NzI5MTY2NjY2NyA0MS41Nzk0MjcwODMzMzMzICBDIDAuODA2ODU3NjM4ODg4ODg5IDM5Ljk2NTcxMTgwNTU1NTYgIDAgMzguMDIyNTY5NDQ0NDQ0NCAgMCAzNS43NSAgTCAwIDguMjUgIEMgMCA1Ljk3NzQzMDU1NTU1NTU1ICAwLjgwNjg1NzYzODg4ODg4OSA0LjAzNDI4ODE5NDQ0NDQ0ICAyLjQyMDU3MjkxNjY2NjY3IDIuNDIwNTcyOTE2NjY2NjcgIEMgNC4wMzQyODgxOTQ0NDQ0NCAwLjgwNjg1NzYzODg4ODg4NiAgNS45Nzc0MzA1NTU1NTU1NiAwICA4LjI1IDAgIEwgMzUuNzUgMCAgQyAzOC4wMjI1Njk0NDQ0NDQ1IDAgIDM5Ljk2NTcxMTgwNTU1NTYgMC44MDY4NTc2Mzg4ODg4ODYgIDQxLjU3OTQyNzA4MzMzMzMgMi40MjA1NzI5MTY2NjY2NyAgWiAiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDI0OCAzNTAgKSIgLz4NCiAgPC9nPg0KPC9zdmc+"},PEMz:function(e,t){},PrzO:function(e,t){},"Q/P+":function(e,t,n){n("BzBW")},Q7EB:function(e,t){},QGnN:function(e,t){},QLtu:function(e,t){},QcX7:function(e,t){},Qd5c:function(e,t){},QfWg:function(e,t){},R2ow:function(e,t){},RejN:function(e,t){},Rv7z:function(e,t,n){n("iTxg")},SE6Q:function(e,t){},SGbo:function(e,t){},SUw3:function(e,t){},SlIL:function(e,t,n){n("T8kY")},T8kY:function(e,t){!function(){"use strict";var e,t,n,r,a=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e){return!!e.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)},s=function(e,t){return{clipboard:e,quirks:t}},c=function(){},l=function(e){return function(){return e}},u=l(!1),d=l(!0),f=function(){return m},m=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:u,isSome:u,isNone:d,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:t,map:f,each:c,bind:f,exists:u,forall:d,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")}),p=function(e){var t=l(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:d,isNone:u,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,function(t){return n(e,t)})}};return a},h={some:p,none:f,from:function(e){return null===e||void 0===e?m:p(e)}},v=function(e){return!function(e){return null===e||void 0===e}(e)},g=(r="function",function(e){return typeof e===r}),b=Array.prototype.slice,y=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},w=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var o=e[a];r[a]=t(o,a)}return r},x=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},k=g(Array.from)?Array.from:function(e){return b.call(e)},_=function(){var e=a(h.none());return{clear:function(){return e.set(h.none())},set:function(t){return e.set(h.some(t))},isSet:function(){return e.get().isSome()},on:function(t){return e.get().each(t)}}},S=function(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},C=tinymce.util.Tools.resolve("tinymce.Env"),N=tinymce.util.Tools.resolve("tinymce.util.Delay"),T=tinymce.util.Tools.resolve("tinymce.util.Promise"),D=tinymce.util.Tools.resolve("tinymce.util.VK"),I=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},M=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=function(e){return e.getParam("paste_data_images",!1)},A=function(e){return e.getParam("paste_webkit_styles")},L=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},E=function(e){return e.getParam("paste_as_text",!1)},z=function(e){return e.getParam("paste_retain_style_properties")},R=function(e){return e.getParam("validate")},V=function(e){return e.getParam("allow_html_data_urls",!1,"boolean")},B=function(e){return e.getParam("paste_data_images",!1,"boolean")},$=function(e){return M.explode(e.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))},U="\x3c!-- x-tinymce/html --\x3e",P=function(e){return-1!==e.indexOf(U)},F=tinymce.util.Tools.resolve("tinymce.html.Entities"),H=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},j=function(e,t,n){var r=e.split(/\n\n/),a=function(e,t){var n,r=[],a="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+F.encodeAllRaw(t[n])+'"');r.length&&(a+=" "+r.join(" "))}return a+">"}(t,n),o="</"+t+">",i=M.map(r,function(e){return e.split(/\n/).join("<br />")});return 1===i.length?i[0]:M.map(i,function(e){return a+e+o}).join("")},q=tinymce.util.Tools.resolve("tinymce.html.DomParser"),W=tinymce.util.Tools.resolve("tinymce.html.Serializer"),Y=" ",G=tinymce.util.Tools.resolve("tinymce.html.Node"),K=tinymce.util.Tools.resolve("tinymce.html.Schema");function Q(e,t){return M.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function X(e){return e=Q(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?Y:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function J(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function Z(e){var t;return e=e.replace(/^[\u00a0 ]+/,""),M.each([/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(n){if(n.test(e))return t=!0,!1}),t}function ee(e){var t,n,r=1;function a(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=a(e)}while(e=e.next);return t}function o(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!o(e,t))return!1}while(e=e.next);return!0}function i(e,a,i){var s=e._listLevel||r;s!==r&&(s<r?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===a?t.append(e):(n=n||t,t=new G(a,1),i>1&&t.attr("start",""+i),e.wrap(t)),e.name="li",s>r&&n&&n.lastChild.append(t),r=s,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{e(t)}while(t=t.next)}(e),o(e,/^\u00a0+/),o(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),o(e,/^\u00a0+/)}for(var s=[],c=e.firstChild;void 0!==c&&null!==c;)if(s.push(c),null!==(c=c.walk()))for(;void 0!==c&&c.parent!==e;)c=c.walk();for(var l=0;l<s.length;l++)if("p"===(e=s[l]).name&&e.firstChild){var u=a(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(u)){i(e,"ul");continue}if(Z(u)){var d=/([0-9]+)\./.exec(u),f=1;d&&(f=parseInt(d[1],10)),i(e,"ol",f);continue}if(e._listLevel){i(e,"ul",1);continue}t=null}else n=t,t=null}function te(e,t,n,r){var a,o={},i=e.dom.parseStyle(r);return M.each(i,function(i,s){switch(s){case"mso-list":(a=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(a[1],10)),/Ignore/i.test(i)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":return void("normal"!==i&&(o[s]=i));case"mso-element":if(/^(comment|comment-list)$/i.test(i))return void n.remove()}0!==s.indexOf("mso-comment")?0!==s.indexOf("mso-")&&("all"===z(e)||t&&t[s])&&(o[s]=i):n.remove()}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],n.wrap(new G("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],n.wrap(new G("i",1))),(o=e.dom.serializeStyle(o,n.name))||null}var ne,re,ae=function(e,t){return function(e){return e.getParam("paste_enable_default_filters",!0)}(e)?function(e,t){var n,r=z(e);r&&(n=M.makeMap(r.split(/[, ]/))),t=Q(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,Y],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(Y):""}]]);var a=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(e),o=K({valid_elements:a,valid_children:"-li[p]"});M.each(o.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var i=q({},o);i.addAttributeFilter("style",function(t){for(var r,a=t.length;a--;)(r=t[a]).attr("style",te(e,n,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()}),i.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),i.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),i.addNodeFilter("a",function(e){for(var t,n,r,a=e.length;a--;)if(n=(t=e[a]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var s=i.parse(t);return function(e){return e.getParam("paste_convert_word_fake_lists",!0)}(e)&&ee(s),t=W({validate:R(e)},o).serialize(s)}(e,t):t},oe=function(e,t){return{content:e,cancelled:t}},ie=function(e,t,n,r){var a=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})}(e,t,n,r),o=function(e,t){var n=q({},e.schema);n.addNodeFilter("meta",function(e){M.each(e,function(e){e.remove()})});var r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return W({validate:R(e)},e.schema).serialize(r)}(e,a.content);return e.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?function(e,t,n,r){var a=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})}(e,e.dom.create("div",{style:"display:none"},t),n,r);return oe(a.node.innerHTML,a.isDefaultPrevented())}(e,o,n,r):oe(o,a.isDefaultPrevented())},se=function(e,t){return e.insertContent(t,{merge:function(e){return e.getParam("paste_merge_formats",!0)}(e),paste:!0}),!0},ce=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},le=function(e,t){return ce(t)&&y($(e),function(e){return S(n=t,r="."+e,n.length-r.length);var n,r})},ue=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!ce(t))&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0}(e,t,n)},de=function(e,t,n){return!!le(e,t)&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0}(e,t,n)},fe=function(e,t,n){n||!1===function(e){return e.getParam("smart_paste",!0)}(e)?se(e,t):function(e,t){M.each([ue,de,se],function(n){return!0!==n(e,t,se)})}(e,t)},me=function(e){return"\n"===e||"\r"===e},pe=function(e,t){var n,r,a,o,i=(n=" ",(r=function(e){return e.getParam("paste_tab_spaces",4,"number")}(e))<=0?"":new Array(r+1).join(n)),s=t.replace(/\t/g,i);return(a=function(e,t){return function(e){return-1!==" \f\t\v".indexOf(e)}(t)||t===Y?e.pcIsSpace||""===e.str||e.str.length===s.length-1||(n=s,(r=e.str.length+1)<n.length&&r>=0&&me(n[r]))?{pcIsSpace:!1,str:e.str+Y}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:me(t),str:e.str+t};var n,r},o={pcIsSpace:!1,str:""},x(s,function(e){o=a(o,e)}),o).str},he=function(e,t,n,r){var a=function(e,t,n){var r=J(t),a=r?ae(e,t):t;return ie(e,a,n,r)}(e,t,n);!1===a.cancelled&&fe(e,a.content,r)},ve=function(e,t,n){var r=n||P(t);he(e,function(e){return e.replace(U,"")}(t),r,!1)},ge=function(e,t){var n=e.dom.encode(t).replace(/\r\n/g,"\n"),r=function(e,t,n){return t?j(e,!0===t?"p":t,n):function(e){return e.replace(/\r?\n/g,"<br>")}(e)}(pe(e,n),function(e){return e.getParam("forced_root_block")}(e),function(e){return e.getParam("forced_root_block_attrs")}(e));he(e,r,!1,!0)},be=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var a=e.types[r];try{t[a]=e.getData(a)}catch(e){t[a]=""}}}return t},ye=function(e,t){return t in e&&e[t].length>0},we=function(e){return ye(e,"text/html")||ye(e,"text/plain")},xe=(ne="mceclip",re=0,function(){return ne+re++}),ke=function(e,t){var n,r,a=(n=t.uri,(r=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(n))?{type:r[1],data:decodeURIComponent(r[2])}:{type:null,data:null}),o=a.data,i=a.type,s=xe(),c=t.blob,l=new Image;if(l.src=t.uri,function(e,t){var n=function(e){return e.getParam("images_dataimg_filter")}(e);return!n||n(t)}(e,l)){var u=e.editorUpload.blobCache,d=void 0,f=u.getByData(o,i);if(f)d=f;else{var m=function(e){return e.getParam("images_reuse_filename")}(e)&&v(c.name),p=m?function(e,t){var n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return v(n)?e.dom.encode(n[1]):null}(e,c.name):s,h=m?c.name:void 0;d=u.create(s,c,o,p,h),u.add(d)}ve(e,'<img src="'+d.blobUri()+'">',!1)}else ve(e,'<img src="'+t.uri+'">',!1)},_e=function(e){return T.all(w(e,function(e){return new T(function(t){var n=function(e){return v(e.getAsFile)}(e)?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})},r.readAsDataURL(n)})}))},Se=function(e){var t=$(e);return function(e){return n=e.type,S(n,"image/",0)&&y(t,function(t){return n=t,r={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(M.hasOwn(r,n)?"image/"+r[n]:"image/"+n)===e.type;var n,r});var n}},Ce=function(e,t,n){var r="paste"===t.type?t.clipboardData:t.dataTransfer;if(B(e)&&r){var a=function(e,t){var n=t.items?w(k(t.items),function(e){return e.getAsFile()}):[],r=t.files?k(t.files):[];return function(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var o=e[r];t(o,r)&&n.push(o)}return n}(n.length>0?n:r,Se(e))}(e,r);if(a.length>0)return t.preventDefault(),_e(a).then(function(t){n&&e.selection.setRng(n),x(t,function(t){ke(e,t)})}),!0}return!1},Ne=function(e){return D.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Te=function(e,t,n){var r,a=_(),o=_();function i(e,n,r,a,o){var i;ye(n,"text/html")?i=n["text/html"]:(i=t.getHtml(),o=o||P(i),t.isDefaultContent(i)&&(a=!0)),i=X(i),t.remove();var s,c,l,u,d,f,m,p=!1===o&&H(i),h=le(e,i);(!i.length||p&&!h)&&(a=!0),(a||h)&&(ye(n,"text/plain")&&p?i=n["text/plain"]:(s=i,c=K(),l=q({},c),u="",d=c.getShortEndedElements(),f=M.makeMap("script noscript style textarea video audio iframe object"," "),m=c.getBlockElements(),s=Q(s,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n){if("wbr"!==n)if(d[n]&&(u+=" "),f[n])u+=" ";else{if(3===t.type&&(u+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);m[n]&&r.next&&(u+="\n","p"===n&&(u+="\n"))}}else u+="\n"}(l.parse(s)),i=u)),t.isDefaultContent(i)?r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):a?ge(e,i):ve(e,i,o)}e.on("keyup",o.clear),e.on("keydown",function(n){var i=function(e){Ne(e)&&!e.isDefaultPrevented()&&t.remove()};if(Ne(n)&&!n.isDefaultPrevented()){if((r=n.shiftKey&&86===n.keyCode)&&C.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),a.set(n),o.set(!0),C.ie&&r)return n.preventDefault(),void function(e,t){e.fire("paste",{ieFake:t})}(e,!0);t.remove(),t.create(),e.once("keyup",i),e.once("paste",function(){e.off("keyup",i)})}});e.on("paste",function(s){var c=a.isSet()||o.isSet();c&&a.clear();var l=function(e,t){return be(t.clipboardData||e.getDoc().dataTransfer)}(e,s),u="text"===n.get()||r,d=ye(l,"x-tinymce/html");r=!1,s.isDefaultPrevented()||function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}(s)?t.remove():we(l)||!Ce(e,s,t.getLastRng()||e.selection.getRng())?(c||s.preventDefault(),!C.ie||c&&!s.ieFake||ye(l,"text/html")||(t.create(),e.dom.bind(t.getEl(),"paste",function(e){e.stopPropagation()}),e.getDoc().execCommand("Paste",!1,null),l["text/html"]=t.getHtml()),ye(l,"text/html")?(s.preventDefault(),d||(d=P(l["text/html"])),i(e,l,c,u,d)):N.setEditorTimeout(e,function(){i(e,l,c,u,d)},0)):t.remove()})},De=function(e){return C.ie&&e.inline?document.body:e.getBody()},Ie=function(e,t,n){(function(e){return De(e)!==e.getBody()})(e)&&e.dom.bind(t,"paste keyup",function(t){Ae(e,n)||e.fire("paste")})},Me=function(e){return e.dom.get("mcepastebin")},Oe=function(e,t){return t===e},Ae=function(e,t){var n,r=Me(e);return(n=r)&&"mcepastebin"===n.id&&Oe(t,r.innerHTML)},Le=function(e){var t=a(null);return{create:function(){return function(e,t,n){var r=e.dom,a=e.getBody();t.set(e.selection.getRng());var o=e.dom.add(De(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);(C.ie||C.gecko)&&r.setStyle(o,"left","rtl"===r.getStyle(a,"direction",!0)?65535:-65535),r.bind(o,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Ie(e,o,n),o.focus(),e.selection.select(o,!0)}(e,t,"%MCEPASTEBIN%")},remove:function(){return function(e,t){if(Me(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,t)},getEl:function(){return Me(e)},getHtml:function(){return function(e){var t=function(t,n){t.appendChild(n),e.dom.remove(n,!0)},n=M.grep(De(e).childNodes,function(e){return"mcepastebin"===e.id}),r=n.shift();M.each(n,function(e){t(r,e)});for(var a=e.dom.select("div[id=mcepastebin]",r),o=a.length-1;o>=0;o--){var i=e.dom.create("div");r.insertBefore(i,a[o]),t(i,a[o])}return r?r.innerHTML:""}(e)},getLastRng:function(){return function(e){return e.get()}(t)},isDefault:function(){return Ae(e,"%MCEPASTEBIN%")},isDefaultContent:function(e){return Oe("%MCEPASTEBIN%",e)}}},Ee=function(e,t){var n=Le(e);return e.on("PreInit",function(){return function(e,t,n){var r;Te(e,t,n),e.parser.addNodeFilter("img",function(t,n,a){var o=function(e){e.attr("data-mce-object")||r===C.transparentSrc||e.remove()},i=function(e){return 0===e.indexOf("webkit-fake-url")},s=function(e){return 0===e.indexOf("data:")};if(!B(e)&&function(e){return e.data&&!0===e.data.paste}(a))for(var c=t.length;c--;)(r=t[c].attr("src"))&&(i(r)?o(t[c]):!V(e)&&s(r)&&o(t[c]))})}(e,n,t)}),{pasteFormat:t,pasteHtml:function(t,n){return ve(e,t,n)},pasteText:function(t){return ge(e,t)},pasteImageData:function(t,n){return Ce(e,t,n)},getDataTransferItems:be,hasHtmlOrText:we,hasContentType:ye}},ze=function(e,t){e.addCommand("mceTogglePlainTextPaste",function(){!function(e,t){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),I(e,!1)):(t.pasteFormat.set("text"),I(e,!0)),e.focus()}(e,t)}),e.addCommand("mceInsertClipboardContent",function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)})},Re=function(e,t,n){if(!function(e){return!1===C.iOS&&"function"==typeof(null===e||void 0===e?void 0:e.setData)}(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData("x-tinymce/html",t),!0}catch(e){return!1}},Ve=function(e,t,n,r){Re(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},Be=function(e){return function(t,n){var r=function(e){return U+e}(t),a=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(o),e.dom.add(e.getBody(),a);var i=e.selection.getRng();o.focus();var s=e.dom.createRng();s.selectNodeContents(o),e.selection.setRng(s),N.setTimeout(function(){e.selection.setRng(i),a.parentNode.removeChild(a),n()},0)}},$e=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},Ue=function(e){return!e.selection.isCollapsed()||function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())}(e)},Pe=function(e){e.on("cut",function(e){return function(t){Ue(e)&&Ve(t,$e(e),Be(e),function(){if(C.browser.isChrome()||C.browser.isFirefox()){var t=e.selection.getRng();N.setEditorTimeout(e,function(){e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})}}(e)),e.on("copy",function(e){return function(t){Ue(e)&&Ve(t,$e(e),Be(e),function(){})}}(e))},Fe=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),He=function(e,t){return Fe.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},je=function(e,t){e.focus(),e.selection.setRng(t)},qe=function(e,t,n){(function(e){return e.getParam("paste_block_drop",!1)})(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),O(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(r){var a=He(e,r);if(!r.isDefaultPrevented()&&!n.get()){var o,i=t.getDataTransferItems(r.dataTransfer),s=t.hasContentType(i,"x-tinymce/html");if(t.hasHtmlOrText(i)&&(!(o=i["text/plain"])||0!==o.indexOf("file://"))||!t.pasteImageData(r,a))if(a&&function(e){return e.getParam("paste_filter_drop",!0)}(e)){var c=i["mce-internal"]||i["text/html"]||i["text/plain"];c&&(r.preventDefault(),N.setEditorTimeout(e,function(){e.undoManager.transact(function(){i["mce-internal"]&&e.execCommand("Delete"),je(e,a),c=X(c),i["text/html"]?t.pasteHtml(c,s):t.pasteText(c)})}))}}}),e.on("dragstart",function(e){n.set(!0)}),e.on("dragover dragend",function(t){O(e)&&!1===n.get()&&(t.preventDefault(),je(e,He(e,t))),"dragend"===t.type&&n.set(!1)})},We=function(e){var t=e.plugins.paste,n=function(e){return e.getParam("paste_preprocess")}(e);n&&e.on("PastePreProcess",function(e){n.call(t,t,e)});var r=function(e){return e.getParam("paste_postprocess")}(e);r&&e.on("PastePostProcess",function(e){r.call(t,t,e)})};function Ye(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function Ge(e,t){if(!J(t))return t;var n=[];return M.each(e.schema.getBlockElements(),function(e,t){n.push(t)}),t=Q(t=Q(t,[[new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),"$1"]]),[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function Ke(e,t,n,r){if(r||n)return t;var a,o=A(e);if(!1===L(e)||"all"===o)return t;if(o&&(a=o.split(/[, ]/)),a){var i=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=i.parseStyle(i.decode(n)),c={};if("none"===a)return t+r;for(var l=0;l<a.length;l++){var u=o[a[l]],d=i.getStyle(s,a[l],!0);/color/.test(a[l])&&(u=i.toHex(u),d=i.toHex(d)),d!==u&&(c[a[l]]=u)}return(c=i.serializeStyle(c,"span"))?t+' style="'+c+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function Qe(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}var Xe=function(e){C.webkit&&Ye(e,Ke),C.ie&&(Ye(e,Ge),function(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}(e,Qe))},Je=function(e,t){return function(n){n.setActive("text"===t.pasteFormat.get());var r=function(e){return n.setActive(e.state)};return e.on("PastePlainTextToggle",r),function(){return e.off("PastePlainTextToggle",r)}}},Ze=function(e,t){e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:Je(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:function(){return e.execCommand("mceTogglePlainTextPaste")},onSetup:Je(e,t)})};o.add("paste",function(e){if(!1===i(e)){var t=a(!1),n=a(E(e)?"text":"html"),r=Ee(e,n),o=Xe(e);return Ze(e,r),ze(e,r),We(e),Pe(e),qe(e,r,t),s(r,o)}})}()},TC2U:function(e,t){tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}})},TCoF:function(e,t){},TeQZ:function(e,t){},"UR/I":function(e,t){},URJE:function(e,t){},Uk8j:function(e,t){},UvrK:function(e,t,n){var r=n("kM2E");r(r.P+r.R,"Map",{toJSON:n("m9gC")("Map")})},V9zC:function(e,t){!function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("textcolor",function(){console.warn("Text color plugin is now built in to the core editor, please remove it from your editor configuration")})}()},W6xS:function(e,t){},WQjn:function(e,t){},WgLl:function(e,t){},WjAO:function(e,t){},"X+t2":function(e,t){},X22y:function(e,t){},XJiJ:function(e,t){},XbhP:function(e,t){},Xjd4:function(e,t,n){n("9Bbf")("Map")},Y9I6:function(e,t){},YI2q:function(e,t){},Yjq7:function(e,t){},"Z3/R":function(e,t){},Z9DA:function(e,t){},ZFE0:function(e,t){},ZHUV:function(e,t){},ZmVo:function(e,t){},aCbb:function(e,t){},aDXi:function(e,t){},aFIn:function(e,t){},aLAq:function(e,t){},afix:function(e,t){},aoMJ:function(e,t){},arfN:function(e,t){},avDw:function(e,t){},bMH6:function(e,t){},bOac:function(e,t){},"bPR+":function(e,t){!function(){"use strict";var e=function(e){var t=function(e){return e.getContent({source_view:!0})}(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:function(t){!function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()}(e,t.getData().code),t.close()}})},t=function(t){t.addCommand("mceCodeEditor",function(){e(t)})},n=function(t){t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return e(t)}}),t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return e(t)}})};tinymce.util.Tools.resolve("tinymce.PluginManager").add("code",function(e){return t(e),n(e),{}})}()},"bg/a":function(e,t){},bnzc:function(e,t){},bqnK:function(e,t,n){n("HpRW")("Map")},"c/6r":function(e,t,n){n("V9zC")},c48q:function(e,t){},c8sk:function(e,t){},cCzA:function(e,t){},cXq3:function(e,t){},d0yp:function(e,t){},d88s:function(e,t){},dQHh:function(e,t){},dTsO:function(e,t){},dUjX:function(e,t){},ddYb:function(e,t){},e2CY:function(e,t){},e4ce:function(e,t){},eDYg:function(e,t){},eVbm:function(e,t){tinymce.addI18n("zh_CN",{Redo:"重做",Undo:"撤销",Cut:"剪切",Copy:"复制",Paste:"粘贴","Select all":"全选","New document":"新文件",Ok:"确定",Cancel:"取消","Visual aids":"网格线",Bold:"粗体",Italic:"斜体",Underline:"下划线",Strikethrough:"删除线",Superscript:"上标",Subscript:"下标","Clear formatting":"清除格式","Align left":"左边对齐","Align center":"中间对齐","Align right":"右边对齐",Justify:"两端对齐","Bullet list":"项目符号","Numbered list":"编号列表","Decrease indent":"减少缩进","Increase indent":"增加缩进",Close:"关闭",Formats:"格式",'Your browser doesn"t support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.':"你的浏览器不支持打开剪贴板，请使用Ctrl+X/C/V等快捷键。",Headers:"标题","Header 1":"标题1","Header 2":"标题2","Header 3":"标题3","Header 4":"标题4","Header 5":"标题5","Header 6":"标题6",Headings:"标题","Heading 1":"标题1","Heading 2":"标题2","Heading 3":"标题3","Heading 4":"标题4","Heading 5":"标题5","Heading 6":"标题6",Preformatted:"预先格式化的",Div:"Div",Pre:"Pre",Code:"代码",Paragraph:"段落",Blockquote:"引文区块",Inline:"文本",Blocks:"基块","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Fonts:"字体","Font Sizes":"字号",Class:"类型","Browse for an image":"浏览图像",OR:"或","Drop an image here":"拖放一张图像至此",Upload:"上传",Block:"块",Align:"对齐",Default:"默认",Circle:"空心圆",Disc:"实心圆",Square:"方块","Lower Alpha":"小写英文字母","Lower Greek":"小写希腊字母","Lower Roman":"小写罗马字母","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Anchor...":"锚点...",Name:"名称",Id:"标识符","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character...":"特殊字符...","Source code":"源代码","Insert/Edit code sample":"插入/编辑代码示例",Language:"语言","Code sample...":"示例代码...","Color Picker":"选色器",R:"R",G:"G",B:"B","Left to right":"从左到右","Right to left":"从右到左","Emoticons...":"表情符号...","Metadata and Document Properties":"元数据和文档属性",Title:"标题",Keywords:"关键词",Description:"描述",Robots:"机器人",Author:"作者",Encoding:"编码",Fullscreen:"全屏",Action:"操作",Shortcut:"快捷键",Help:"帮助",Address:"地址","Focus to menubar":"移动焦点到菜单栏","Focus to toolbar":"移动焦点到工具栏","Focus to element path":"移动焦点到元素路径","Focus to contextual toolbar":"移动焦点到上下文菜单","Insert link (if link plugin activated)":"插入链接 (如果链接插件已激活)","Save (if save plugin activated)":"保存(如果保存插件已激活)","Find (if searchreplace plugin activated)":"查找(如果查找替换插件已激活)","Plugins installed ({0}):":"已安装插件 ({0}):","Premium plugins:":"优秀插件：","Learn more...":"了解更多...","You are using {0}":"你正在使用 {0}",Plugins:"插件","Handy Shortcuts":"快捷键","Horizontal line":"水平分割线","Insert/edit image":"插入/编辑图片","Image description":"图片描述",Source:"地址",Dimensions:"大小","Constrain proportions":"保持纵横比",General:"普通",Advanced:"高级",Style:"样式","Vertical space":"垂直边距","Horizontal space":"水平边距",Border:"边框","Insert image":"插入图片","Image...":"图片...","Image list":"图片列表","Rotate counterclockwise":"逆时针旋转","Rotate clockwise":"顺时针旋转","Flip vertically":"垂直翻转","Flip horizontally":"水平翻转","Edit image":"编辑图片","Image options":"图片选项","Zoom in":"放大","Zoom out":"缩小",Crop:"裁剪",Resize:"调整大小",Orientation:"方向",Brightness:"亮度",Sharpen:"锐化",Contrast:"对比度","Color levels":"颜色层次",Gamma:"伽马值",Invert:"反转",Apply:"应用",Back:"后退","Insert date/time":"插入日期/时间","Date/time":"日期/时间","Insert/Edit Link":"插入/编辑链接","Insert/edit link":"插入/编辑链接","Text to display":"显示文字",Url:"地址","Open link in...":"链接打开位置...","Current window":"当前窗口",None:"无","New window":"在新窗口打开","Remove link":"删除链接",Anchors:"锚点","Link...":"链接...","Paste or type a link":"粘贴或输入链接","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Link list":"链接列表","Insert video":"插入视频","Insert/edit video":"插入/编辑视频","Insert/edit media":"插入/编辑媒体","Alternative source":"镜像","Alternative source URL":"替代来源网址","Media poster (Image URL)":"封面(图片地址)","Paste your embed code below:":"将内嵌代码粘贴在下面:",Embed:"内嵌","Media...":"多媒体...","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览","Print...":"打印...",Save:"保存",Find:"查找","Replace with":"替换为",Replace:"替换","Replace all":"全部替换",Previous:"上一个",Next:"下一个","Find and replace...":"查找并替换...","Could not find the specified string.":"未找到搜索内容.","Match case":"区分大小写","Find whole words only":"全字匹配","Spell check":"拼写检查",Ignore:"忽略","Ignore all":"全部忽略",Finish:"完成","Add to Dictionary":"添加到字典","Insert table":"插入表格","Table properties":"表格属性","Delete table":"删除表格",Cell:"单元格",Row:"行",Column:"列","Cell properties":"单元格属性","Merge cells":"合并单元格","Split cell":"拆分单元格","Insert row before":"在上方插入","Insert row after":"在下方插入","Delete row":"删除行","Row properties":"行属性","Cut row":"剪切行","Copy row":"复制行","Paste row before":"粘贴到上方","Paste row after":"粘贴到下方","Insert column before":"在左侧插入","Insert column after":"在右侧插入","Delete column":"删除列",Cols:"列",Rows:"行",Width:"宽",Height:"高","Cell spacing":"单元格外间距","Cell padding":"单元格内边距","Show caption":"显示标题",Left:"左对齐",Center:"居中",Right:"右对齐","Cell type":"单元格类型",Scope:"范围",Alignment:"对齐方式","H Align":"水平对齐","V Align":"垂直对齐",Top:"顶部对齐",Middle:"垂直居中",Bottom:"底部对齐","Header cell":"表头单元格","Row group":"行组","Column group":"列组","Row type":"行类型",Header:"表头",Body:"表体",Footer:"表尾","Border color":"边框颜色","Insert template...":"插入模板...",Templates:"模板",Template:"模板","Text color":"文字颜色","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Remove color":"移除颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Word count":"字数",Count:"计数",Document:"文档",Selection:"选择",Words:"单词","Words: {0}":"字数：{0}","{0} words":"{0} 字",File:"文件",Edit:"编辑",Insert:"插入",View:"视图",Format:"格式",Table:"表格",Tools:"工具","Powered by {0}":"由{0}驱动","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助","Image title":"图片标题","Border width":"边框宽度","Border style":"边框样式",Error:"错误",Warn:"警告",Valid:"有效","To open the popup, press Shift+Enter":"按Shitf+Enter键打开对话框","Rich Text Area. Press ALT-0 for help.":"编辑区。按Alt+0键打开帮助。","System Font":"系统字体","Failed to upload image: {0}":"图片上传失败: {0}","Failed to load plugin: {0} from url {1}":"插件加载失败: {0} 来自链接 {1}","Failed to load plugin url: {0}":"插件加载失败 链接: {0}","Failed to initialize plugin: {0}":"插件初始化失败: {0}",example:"示例",Search:"搜索",All:"全部",Currency:"货币",Text:"文字",Quotations:"引用",Mathematical:"数学","Extended Latin":"拉丁语扩充",Symbols:"符号",Arrows:"箭头","User Defined":"自定义","dollar sign":"美元符号","currency sign":"货币符号","euro-currency sign":"欧元符号","colon sign":"冒号","cruzeiro sign":"克鲁赛罗币符号","french franc sign":"法郎符号","lira sign":"里拉符号","mill sign":"密尔符号","naira sign":"奈拉符号","peseta sign":"比塞塔符号","rupee sign":"卢比符号","won sign":"韩元符号","new sheqel sign":"新谢克尔符号","dong sign":"越南盾符号","kip sign":"老挝基普符号","tugrik sign":"图格里克符号","drachma sign":"德拉克马符号","german penny symbol":"德国便士符号","peso sign":"比索符号","guarani sign":"瓜拉尼符号","austral sign":"澳元符号","hryvnia sign":"格里夫尼亚符号","cedi sign":"塞地符号","livre tournois sign":"里弗弗尔符号","spesmilo sign":"spesmilo符号","tenge sign":"坚戈符号","indian rupee sign":"印度卢比","turkish lira sign":"土耳其里拉","nordic mark sign":"北欧马克","manat sign":"马纳特符号","ruble sign":"卢布符号","yen character":"日元字样","yuan character":"人民币元字样","yuan character, in hong kong and taiwan":"元字样（港台地区）","yen/yuan character variant one":"元字样（大写）","Loading emoticons...":"加载表情符号...","Could not load emoticons":"不能加载表情符号",People:"人类","Animals and Nature":"动物和自然","Food and Drink":"食物和饮品",Activity:"活动","Travel and Places":"旅游和地点",Objects:"物件",Flags:"旗帜",Characters:"字符","Characters (no spaces)":"字符(无空格)","{0} characters":"{0} 个字符","Error: Form submit field collision.":"错误: 表单提交字段冲突。","Error: No form element found.":"错误: 没有表单控件。",Update:"更新","Color swatch":"颜色样本",Turquoise:"青绿色",Green:"绿色",Blue:"蓝色",Purple:"紫色","Navy Blue":"海军蓝","Dark Turquoise":"深蓝绿色","Dark Green":"深绿色","Medium Blue":"中蓝色","Medium Purple":"中紫色","Midnight Blue":"深蓝色",Yellow:"黄色",Orange:"橙色",Red:"红色","Light Gray":"浅灰色",Gray:"灰色","Dark Yellow":"暗黄色","Dark Orange":"深橙色","Dark Red":"深红色","Medium Gray":"中灰色","Dark Gray":"深灰色","Light Green":"浅绿色","Light Yellow":"浅黄色","Light Red":"浅红色","Light Purple":"浅紫色","Light Blue":"浅蓝色","Dark Purple":"深紫色","Dark Blue":"深蓝色",Black:"黑色",White:"白色","Switch to or from fullscreen mode":"切换全屏模式","Open help dialog":"打开帮助对话框",history:"历史",styles:"样式",formatting:"格式化",alignment:"对齐",indentation:"缩进","permanent pen":"记号笔",comments:"备注","Format Painter":"格式刷","Insert/edit iframe":"插入/编辑框架",Capitalization:"大写",lowercase:"小写",UPPERCASE:"大写","Title Case":"首字母大写","Permanent Pen Properties":"永久笔属性","Permanent pen properties...":"永久笔属性...",Font:"字体",Size:"字号","More...":"更多...","Spellcheck Language":"拼写检查语言","Select...":"选择...",Preferences:"首选项",Yes:"是",No:"否","Keyboard Navigation":"键盘指引",Version:"版本",Anchor:"锚点","Special character":"特殊符号","Code sample":"代码示例",Color:"颜色",Emoticons:"表情","Document properties":"文档属性",Image:"图片","Insert link":"插入链接",Target:"打开方式",Link:"链接",Poster:"封面",Media:"媒体",Print:"打印",Prev:"上一个","Find and replace":"查找和替换","Whole words":"全字匹配",Spellcheck:"拼写检查",Caption:"标题","Insert template":"插入模板"})},ek3R:function(e,t){},eos2:function(e,t){},eu5e:function(e,t){},f8MO:function(e,t){},fDlB:function(e,t){},fZjL:function(e,t,n){e.exports={default:n("jFbC"),__esModule:!0}},ff4F:function(e,t){},fjxZ:function(e,t){},fuXn:function(e,t){},gBhd:function(e,t,n){n("bPR+")},h8D7:function(e,t){},hKBi:function(e,t){},hYlO:function(e,t){},heJ0:function(e,t){},"i+yu":function(e,t){},"i/qu":function(e,t){},"iCs+":function(e,t){},iHo2:function(e,t){},iTxg:function(e,t){!function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("colorpicker",function(){console.warn("Color picker plugin is now built in to the core editor, please remove it from your editor configuration")})}()},iVmp:function(e,t){},icnn:function(e,t){},"ieK+":function(e,t){},ifoU:function(e,t,n){e.exports={default:n("3C/1"),__esModule:!0}},ikxi:function(e,t,n){
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */var r;r=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t,n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},r=(function(e){var t={};for(var r in n)n.hasOwnProperty(r)&&(t[n[r]]=r);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in a)if(a.hasOwnProperty(o)){if(!("channels"in a[o]))throw new Error("missing channels property: "+o);if(!("labels"in a[o]))throw new Error("missing channel labels property: "+o);if(a[o].labels.length!==a[o].channels)throw new Error("channel and label counts mismatch: "+o);var i=a[o].channels,s=a[o].labels;delete a[o].channels,delete a[o].labels,Object.defineProperty(a[o],"channels",{value:i}),Object.defineProperty(a[o],"labels",{value:s})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,a=e[1]/255,o=e[2]/255,i=Math.min(r,a,o),s=Math.max(r,a,o),c=s-i;return s===i?t=0:r===s?t=(a-o)/c:a===s?t=2+(o-r)/c:o===s&&(t=4+(r-a)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(i+s)/2,[t,100*(s===i?0:n<=.5?c/(s+i):c/(2-s-i)),100*n]},a.rgb.hsv=function(e){var t,n,r,a,o,i=e[0]/255,s=e[1]/255,c=e[2]/255,l=Math.max(i,s,c),u=l-Math.min(i,s,c),d=function(e){return(l-e)/6/u+.5};return 0===u?a=o=0:(o=u/l,t=d(i),n=d(s),r=d(c),i===l?a=r-n:s===l?a=1/3+t-r:c===l&&(a=2/3+n-t),a<0?a+=1:a>1&&(a-=1)),[360*a,100*o,100*l]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,a=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-a)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-a-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var r=t[e];if(r)return r;var a,o,i,s=1/0;for(var c in n)if(n.hasOwnProperty(c)){var l=n[c],u=(o=e,i=l,Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2)+Math.pow(o[2]-i[2],2));u<s&&(s=u,a=c)}return a},a.keyword.rgb=function(e){return n[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],o=t[2];return r/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){var t,n,r,a,o,i=e[0]/360,s=e[1]/100,c=e[2]/100;if(0===s)return[o=255*c,o,o];t=2*c-(n=c<.5?c*(1+s):c+s-c*s),a=[0,0,0];for(var l=0;l<3;l++)(r=i+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,a[l]=255*o;return a},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,a=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,a*=o<=1?o:2-o,[t,100*(0===r?2*a/(o+a):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,a=Math.floor(t)%6,o=t-Math.floor(t),i=255*r*(1-n),s=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,a){case 0:return[r,c,i];case 1:return[s,r,i];case 2:return[i,r,c];case 3:return[i,s,r];case 4:return[c,i,r];case 5:return[r,i,s]}},a.hsv.hsl=function(e){var t,n,r,a=e[0],o=e[1]/100,i=e[2]/100,s=Math.max(i,.01);return r=(2-o)*i,n=o*s,[a,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,a,o,i,s,c=e[0]/360,l=e[1]/100,u=e[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),n=1-u,r=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(r=1-r),a=l+r*(n-l),t){default:case 6:case 0:o=n,i=a,s=l;break;case 1:o=a,i=n,s=l;break;case 2:o=l,i=n,s=a;break;case 3:o=l,i=a,s=n;break;case 4:o=a,i=l,s=n;break;case 5:o=n,i=l,s=a}return[255*o,255*i,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,a=e[3]/100;return[255*(1-Math.min(1,t*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,r*(1-a)+a))]},a.xyz.rgb=function(e){var t,n,r,a=e[0]/100,o=e[1]/100,i=e[2]/100;return n=-.9689*a+1.8758*o+.0415*i,r=.0557*a+-.204*o+1.057*i,t=(t=3.2406*a+-1.5372*o+-.4986*i)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,a=e[0],o=e[1],i=e[2];t=o/500+(n=(a+16)/116),r=n-i/200;var s=Math.pow(n,3),c=Math.pow(t,3),l=Math.pow(r,3);return n=s>.008856?s:(n-16/116)/7.787,t=c>.008856?c:(t-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],a=e[2];return(t=360*Math.atan2(a,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+a*a),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n,r=e[0]/255,a=e[1]/255,o=e[2]/255,i=Math.max(Math.max(r,a),o),s=Math.min(Math.min(r,a),o),c=i-s;return t=c<1?s/(1-c):0,n=c<=0?0:i===r?(a-o)/c%6:i===a?2+(o-r)/c:4+(r-a)/c+4,n/=6,[360*(n%=1),100*c,100*t]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,a=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(a=(n-.5*r)/(1-r)),[e[0],100*r,100*a]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,a=0;return r<1&&(a=(n-r)/(1-r)),[e[0],100*r,100*a]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var a,o=[0,0,0],i=t%1*6,s=i%1,c=1-s;switch(Math.floor(i)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return a=(1-n)*r,[255*(n*o[0]+a),255*(n*o[1]+a),255*(n*o[2]+a)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,a=0;return r<1&&(a=(n-r)/(1-r)),[e[0],100*r,100*a]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}(t={exports:{}},t.exports),t.exports);r.rgb,r.hsl,r.hsv,r.hwb,r.cmyk,r.xyz,r.lab,r.lch,r.hex,r.keyword,r.ansi16,r.ansi256,r.hcg,r.apple,r.gray;function a(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,a=0;a<n;a++)e[t[a]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var a=n.pop(),o=Object.keys(r[a]),i=o.length,s=0;s<i;s++){var c=o[s],l=t[c];-1===l.distance&&(l.distance=t[a].distance+1,l.parent=a,n.unshift(c))}return t}function o(e,t){return function(n){return t(e(n))}}function i(e,t){for(var n=[t[e].parent,e],a=r[t[e].parent][e],i=t[e].parent;t[i].parent;)n.unshift(t[i].parent),a=o(r[t[i].parent][i],a),i=t[i].parent;return a.conversion=n,a}var s={};Object.keys(r).forEach(function(e){s[e]={},Object.defineProperty(s[e],"channels",{value:r[e].channels}),Object.defineProperty(s[e],"labels",{value:r[e].labels});var t=function(e){for(var t=a(e),n={},r=Object.keys(t),o=r.length,s=0;s<o;s++){var c=r[s];null!==t[c].parent&&(n[c]=i(c,t))}return n}(e);Object.keys(t).forEach(function(n){var r=t[n];s[e][n]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,a=0;a<r;a++)n[a]=Math.round(n[a]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),s[e][n].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})});var c=s,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},u={getRgba:d,getHsla:f,getRgb:function(e){var t=d(e);return t&&t.slice(0,3)},getHsl:function(e){var t=f(e);return t&&t.slice(0,3)},getHwb:m,getAlpha:function(e){var t=d(e);if(t)return t[3];if(t=f(e))return t[3];if(t=m(e))return t[3]},hexString:function(e,t){var t=void 0!==t&&3===e.length?t:e[3];return"#"+b(e[0])+b(e[1])+b(e[2])+(t>=0&&t<1?b(Math.round(255*t)):"")},rgbString:function(e,t){if(t<1||e[3]&&e[3]<1)return p(e,t);return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:p,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return h(e,t);var n=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),a=Math.round(e[2]/255*100);return"rgb("+n+"%, "+r+"%, "+a+"%)"},percentaString:h,hslString:function(e,t){if(t<1||e[3]&&e[3]<1)return v(e,t);return"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:v,hwbString:function(e,t){void 0===t&&(t=void 0!==e[3]?e[3]:1);return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return y[e.slice(0,3)]}};function d(e){if(e){var t=[0,0,0],n=1,r=e.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(r){a=(r=r[1])[3];for(var o=0;o<t.length;o++)t[o]=parseInt(r[o]+r[o],16);a&&(n=Math.round(parseInt(a+a,16)/255*100)/100)}else if(r=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){a=r[2],r=r[1];for(o=0;o<t.length;o++)t[o]=parseInt(r.slice(2*o,2*o+2),16);a&&(n=Math.round(parseInt(a,16)/255*100)/100)}else if(r=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=parseInt(r[o+1]);n=parseFloat(r[4])}else if(r=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=Math.round(2.55*parseFloat(r[o+1]));n=parseFloat(r[4])}else if(r=e.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(t=l[r[1]]))return}for(o=0;o<t.length;o++)t[o]=g(t[o],0,255);return n=n||0==n?g(n,0,1):1,t[3]=n,t}}function f(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[g(parseInt(t[1]),0,360),g(parseFloat(t[2]),0,100),g(parseFloat(t[3]),0,100),g(isNaN(n)?1:n,0,1)]}}}function m(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[g(parseInt(t[1]),0,360),g(parseFloat(t[2]),0,100),g(parseFloat(t[3]),0,100),g(isNaN(n)?1:n,0,1)]}}}function p(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function h(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function v(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function g(e,t,n){return Math.min(Math.max(t,e),n)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var y={};for(var w in l)y[l[w]]=w;var x=function(e){return e instanceof x?e:this instanceof x?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=u.getRgba(e))?this.setValues("rgb",t):(t=u.getHsla(e))?this.setValues("hsl",t):(t=u.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new x(e);var t};x.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return u.hexString(this.values.rgb)},rgbString:function(){return u.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return u.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return u.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return u.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return u.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return u.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return u.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=e,r=void 0===t?.5:t,a=2*r-1,o=this.alpha()-n.alpha(),i=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,s=1-i;return this.rgb(i*this.red()+s*n.red(),i*this.green()+s*n.green(),i*this.blue()+s*n.blue()).alpha(this.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new x,r=this.values,a=n.values;for(var o in r)r.hasOwnProperty(o)&&(e=r[o],"[object Array]"===(t={}.toString.call(e))?a[o]=e.slice(0):"[object Number]"===t?a[o]=e:console.error("unexpected color value:",e));return n}},x.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},x.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},x.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},x.prototype.setValues=function(e,t){var n,r,a=this.values,o=this.spaces,i=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)a[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)a[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[o[e][0]]){var l=o[e];for(n=0;n<e.length;n++)a[e][n]=t[l[n]];s=t.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===e)return!1;for(n=0;n<e.length;n++)r=Math.max(0,Math.min(i[e][n],a[e][n])),a[e][n]=Math.round(r);for(var u in o)u!==e&&(a[u]=c[e][u](a[e]));return!0},x.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},x.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:n===r[t]?this:(r[t]=n,this.setValues(e,r),this)},"undefined"!=typeof window&&(window.Color=x);var k,_=x,S={noop:function(){},uid:(k=0,function(){return k++}),isNullOrUndef:function(e){return null===e||void 0===e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return S.valueOrDefault(S.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,r){var a,o,i;if(S.isArray(e))if(o=e.length,r)for(a=o-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<o;a++)t.call(n,e[a],a);else if(S.isObject(e))for(o=(i=Object.keys(e)).length,a=0;a<o;a++)t.call(n,e[i[a]],i[a])},arrayEquals:function(e,t){var n,r,a,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],o=t[n],a instanceof Array&&o instanceof Array){if(!S.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},clone:function(e){if(S.isArray(e))return e.map(S.clone);if(S.isObject(e)){for(var t={},n=Object.keys(e),r=n.length,a=0;a<r;++a)t[n[a]]=S.clone(e[n[a]]);return t}return e},_merger:function(e,t,n,r){var a=t[e],o=n[e];S.isObject(a)&&S.isObject(o)?S.merge(a,o,r):t[e]=S.clone(o)},_mergerIf:function(e,t,n){var r=t[e],a=n[e];S.isObject(r)&&S.isObject(a)?S.mergeIf(r,a):t.hasOwnProperty(e)||(t[e]=S.clone(a))},merge:function(e,t,n){var r,a,o,i,s,c=S.isArray(t)?t:[t],l=c.length;if(!S.isObject(e))return e;for(r=(n=n||{}).merger||S._merger,a=0;a<l;++a)if(t=c[a],S.isObject(t))for(s=0,i=(o=Object.keys(t)).length;s<i;++s)r(o[s],e,t,n);return e},mergeIf:function(e,t){return S.merge(e,t,{merger:S._mergerIf})},extend:Object.assign||function(e){return S.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.extend=S.inherits,e&&S.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,r){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+r+'" instead')}},C=S;S.callCallback=S.callback,S.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},S.getValueOrDefault=S.valueOrDefault,S.getValueAtIndexOrDefault=S.valueAtIndexOrDefault;var N={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-N.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*N.easeInBounce(2*e):.5*N.easeOutBounce(2*e-1)+.5}},T={effects:N};C.easingEffects=N;var D=Math.PI,I=D/180,M=2*D,O=D/2,A=D/4,L=2*D/3,E={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,a,o){if(o){var i=Math.min(o,a/2,r/2),s=t+i,c=n+i,l=t+r-i,u=n+a-i;e.moveTo(t,c),s<l&&c<u?(e.arc(s,c,i,-D,-O),e.arc(l,c,i,-O,0),e.arc(l,u,i,0,O),e.arc(s,u,i,O,D)):s<l?(e.moveTo(s,n),e.arc(l,c,i,-O,O),e.arc(s,c,i,O,D+O)):c<u?(e.arc(s,c,i,-D,0),e.arc(s,u,i,0,D)):e.arc(s,c,i,-D,D),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,a)},drawPoint:function(e,t,n,r,a,o){var i,s,c,l,u,d=(o||0)*I;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(i=t.toString())||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(r,a),e.rotate(d),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(r,a,n,0,M),e.closePath();break;case"triangle":e.moveTo(r+Math.sin(d)*n,a-Math.cos(d)*n),d+=L,e.lineTo(r+Math.sin(d)*n,a-Math.cos(d)*n),d+=L,e.lineTo(r+Math.sin(d)*n,a-Math.cos(d)*n),e.closePath();break;case"rectRounded":l=n-(u=.516*n),s=Math.cos(d+A)*l,c=Math.sin(d+A)*l,e.arc(r-s,a-c,u,d-D,d-O),e.arc(r+c,a-s,u,d-O,d),e.arc(r+s,a+c,u,d,d+O),e.arc(r-c,a+s,u,d+O,d+D),e.closePath();break;case"rect":if(!o){l=Math.SQRT1_2*n,e.rect(r-l,a-l,2*l,2*l);break}d+=A;case"rectRot":s=Math.cos(d)*n,c=Math.sin(d)*n,e.moveTo(r-s,a-c),e.lineTo(r+c,a-s),e.lineTo(r+s,a+c),e.lineTo(r-c,a+s),e.closePath();break;case"crossRot":d+=A;case"cross":s=Math.cos(d)*n,c=Math.sin(d)*n,e.moveTo(r-s,a-c),e.lineTo(r+s,a+c),e.moveTo(r+c,a-s),e.lineTo(r-c,a+s);break;case"star":s=Math.cos(d)*n,c=Math.sin(d)*n,e.moveTo(r-s,a-c),e.lineTo(r+s,a+c),e.moveTo(r+c,a-s),e.lineTo(r-c,a+s),d+=A,s=Math.cos(d)*n,c=Math.sin(d)*n,e.moveTo(r-s,a-c),e.lineTo(r+s,a+c),e.moveTo(r+c,a-s),e.lineTo(r-c,a+s);break;case"line":s=Math.cos(d)*n,c=Math.sin(d)*n,e.moveTo(r-s,a-c),e.lineTo(r+s,a+c);break;case"dash":e.moveTo(r,a),e.lineTo(r+Math.cos(d)*n,a+Math.sin(d)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){var a=n.steppedLine;if(a){if("middle"===a){var o=(t.x+n.x)/2;e.lineTo(o,r?n.y:t.y),e.lineTo(o,r?t.y:n.y)}else"after"===a&&!r||"after"!==a&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},z=E;C.clear=E.clear,C.drawRoundedRectangle=function(e){e.beginPath(),E.roundedRect.apply(E,arguments)};var R={_set:function(e,t){return C.merge(this[e]||(this[e]={}),t)}};R._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var V=R,B=C.valueOrDefault;var $={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,r,a;return C.isObject(e)?(t=+e.top||0,n=+e.right||0,r=+e.bottom||0,a=+e.left||0):t=n=r=a=+e||0,{top:t,right:n,bottom:r,left:a,height:t+r,width:a+n}},_parseFont:function(e){var t=V.global,n=B(e.fontSize,t.defaultFontSize),r={family:B(e.fontFamily,t.defaultFontFamily),lineHeight:C.options.toLineHeight(B(e.lineHeight,t.defaultLineHeight),n),size:n,style:B(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return r.string=function(e){return!e||C.isNullOrUndef(e.size)||C.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r},resolve:function(e,t,n,r){var a,o,i,s=!0;for(a=0,o=e.length;a<o;++a)if(void 0!==(i=e[a])&&(void 0!==t&&"function"==typeof i&&(i=i(t),s=!1),void 0!==n&&C.isArray(i)&&(i=i[n],s=!1),void 0!==i))return r&&!s&&(r.cacheable=!1),i}},U={_factorize:function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t==0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort(function(e,t){return e-t}).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},P=U;C.log10=U.log10;var F=C,H=T,j=z,q=$,W=P,Y={getRtlAdapter:function(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};F.easing=H,F.canvas=j,F.options=q,F.math=W,F.rtl=Y;var G=function(e){F.extend(this,e),this.initialize.apply(this,arguments)};F.extend(G.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=F.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,r=t._start,a=t._view;return n&&1!==e?(a||(a=t._view={}),r||(r=t._start={}),function(e,t,n,r){var a,o,i,s,c,l,u,d,f,m=Object.keys(n);for(a=0,o=m.length;a<o;++a)if(l=n[i=m[a]],t.hasOwnProperty(i)||(t[i]=l),(s=t[i])!==l&&"_"!==i[0]){if(e.hasOwnProperty(i)||(e[i]=s),(u=typeof l)==typeof(c=e[i]))if("string"===u){if((d=_(c)).valid&&(f=_(l)).valid){t[i]=f.mix(d,r).rgbString();continue}}else if(F.isFinite(c)&&F.isFinite(l)){t[i]=c+(l-c)*r;continue}t[i]=l}}(r,a,n,e),t):(t._view=F.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return F.isNumber(this._model.x)&&F.isNumber(this._model.y)}}),G.extend=F.inherits;var K=G,Q=K.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),X=Q;Object.defineProperty(Q.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Q.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),V._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:F.noop,onComplete:F.noop}});var J={animations:[],request:null,addAnimation:function(e,t,n,r){var a,o,i=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,r||(e.animating=!0),a=0,o=i.length;a<o;++a)if(i[a].chart===e)return void(i[a]=t);i.push(t),1===i.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=F.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=F.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,n,r,a=this.animations,o=0;o<a.length;)t=(e=a[o]).chart,n=e.numSteps,r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(r,n),F.callback(e.render,[t,e],t),F.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(F.callback(e.onAnimationComplete,[e],t),t.animating=!1,a.splice(o,1)):++o}},Z=F.options.resolve,ee=["push","pop","shift","splice","unshift"];function te(e,t){var n=e._chartjs;if(n){var r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(ee.forEach(function(t){delete e[t]}),delete e._chartjs)}}var ne=function(e,t){this.initialize(e,t)};F.extend(ne.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this.getMeta(),t=this.chart,n=t.scales,r=this.getDataset(),a=t.options.scales;null!==e.xAxisID&&e.xAxisID in n&&!r.xAxisID||(e.xAxisID=r.xAxisID||a.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in n&&!r.yAxisID||(e.yAxisID=r.yAxisID||a.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&te(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,n=this.getMeta(),r=this.getDataset().data||[],a=n.data;for(e=0,t=r.length;e<t;++e)a[e]=a[e]||this.createMetaData(e);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,n=this,r=n.getDataset(),a=r.data||(r.data=[]);n._data!==a&&(n._data&&te(n._data,n),a&&Object.isExtensible(a)&&(t=n,(e=a)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ee.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),a=r.apply(this,t);return F.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),a}})}))),n._data=a),n.resyncElements()},_configure:function(){this._config=F.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&F._merger(e,t,n)}})},_update:function(e){this._configure(),this._cachedDataOpts=null,this.update(e)},update:F.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,a=0;a<r;++a)n[a].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},getStyle:function(e){var t,n=this.getMeta(),r=n.dataset;return this._configure(),r&&void 0===e?t=this._resolveDatasetElementOptions(r||{}):(e=e||0,t=this._resolveDataElementOptions(n.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var n,r,a,o,i=this,s=i.chart,c=i._config,l=e.custom||{},u=s.options.elements[i.datasetElementType.prototype._type]||{},d=i._datasetElementOptions,f={},m={chart:s,dataset:i.getDataset(),datasetIndex:i.index,hover:t};for(n=0,r=d.length;n<r;++n)a=d[n],o=t?"hover"+a.charAt(0).toUpperCase()+a.slice(1):a,f[a]=Z([l[o],c[o],u[o]],m);return f},_resolveDataElementOptions:function(e,t){var n=this,r=e&&e.custom,a=n._cachedDataOpts;if(a&&!r)return a;var o,i,s,c,l=n.chart,u=n._config,d=l.options.elements[n.dataElementType.prototype._type]||{},f=n._dataElementOptions,m={},p={chart:l,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},h={cacheable:!r};if(r=r||{},F.isArray(f))for(i=0,s=f.length;i<s;++i)m[c=f[i]]=Z([r[c],u[c],d[c]],p,t,h);else for(i=0,s=(o=Object.keys(f)).length;i<s;++i)m[c=o[i]]=Z([r[c],u[f[c]],u[c],d[c]],p,t,h);return h.cacheable&&(n._cachedDataOpts=Object.freeze(m)),m},removeHoverStyle:function(e){F.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},a=e._model,o=F.getHoverColor;e.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=Z([r.hoverBackgroundColor,t.hoverBackgroundColor,o(a.backgroundColor)],void 0,n),a.borderColor=Z([r.hoverBorderColor,t.hoverBorderColor,o(a.borderColor)],void 0,n),a.borderWidth=Z([r.hoverBorderWidth,t.hoverBorderWidth,a.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,r,a,o,i=this.getMeta().dataset,s={};if(i){for(o=i._model,a=this._resolveDatasetElementOptions(i,!0),e=0,t=(r=Object.keys(a)).length;e<t;++e)s[n=r[e]]=o[n],o[n]=a[n];i.$previousStyle=s}},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,n=e.data.length,r=t.length;r<n?e.data.splice(r,n-r):r>n&&this.insertElements(n,r-n)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),ne.extend=F.inherits;var re=ne,ae=2*Math.PI;function oe(e,t){var n=t.startAngle,r=t.endAngle,a=t.pixelMargin,o=a/t.outerRadius,i=t.x,s=t.y;e.beginPath(),e.arc(i,s,t.outerRadius,n-o,r+o),t.innerRadius>a?(o=a/t.innerRadius,e.arc(i,s,t.innerRadius-a,r+o,n-o,!0)):e.arc(i,s,a,r+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function ie(e,t,n){var r="inner"===t.borderAlign;r?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&function(e,t,n,r){var a,o=n.endAngle;for(r&&(n.endAngle=n.startAngle+ae,oe(e,n),n.endAngle=o,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=ae,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+ae,n.startAngle,!0),a=0;a<n.fullCircles;++a)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+ae),a=0;a<n.fullCircles;++a)e.stroke()}(e,t,n,r),r&&oe(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}V._set("global",{elements:{arc:{backgroundColor:V.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var se=K.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=F.getAngleFromPoint(n,{x:e,y:t}),a=r.angle,o=r.distance,i=n.startAngle,s=n.endAngle;s<i;)s+=ae;for(;a>s;)a-=ae;for(;a<i;)a+=ae;var c=a>=i&&a<=s,l=o>=n.innerRadius&&o<=n.outerRadius;return c&&l}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,r="inner"===n.borderAlign?.33:0,a={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-r,0),pixelMargin:r,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/ae)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,a.fullCircles){for(a.endAngle=a.startAngle+ae,t.beginPath(),t.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),t.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),t.closePath(),e=0;e<a.fullCircles;++e)t.fill();a.endAngle=a.startAngle+n.circumference%ae}t.beginPath(),t.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),t.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&ie(t,n,a),t.restore()}}),ce=F.valueOrDefault,le=V.global.defaultColor;V._set("global",{elements:{line:{tension:.4,backgroundColor:le,borderWidth:3,borderColor:le,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ue=K.extend({_type:"line",draw:function(){var e,t,n,r=this,a=r._view,o=r._chart.ctx,i=a.spanGaps,s=r._children.slice(),c=V.global,l=c.elements.line,u=-1,d=r._loop;if(s.length){if(r._loop){for(e=0;e<s.length;++e)if(t=F.previousItem(s,e),!s[e]._view.skip&&t._view.skip){s=s.slice(e).concat(s.slice(0,e)),d=i;break}d&&s.push(s[0])}for(o.save(),o.lineCap=a.borderCapStyle||l.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||l.borderDash),o.lineDashOffset=ce(a.borderDashOffset,l.borderDashOffset),o.lineJoin=a.borderJoinStyle||l.borderJoinStyle,o.lineWidth=ce(a.borderWidth,l.borderWidth),o.strokeStyle=a.borderColor||c.defaultColor,o.beginPath(),(n=s[0]._view).skip||(o.moveTo(n.x,n.y),u=0),e=1;e<s.length;++e)n=s[e]._view,t=-1===u?F.previousItem(s,e):s[u],n.skip||(u!==e-1&&!i||-1===u?o.moveTo(n.x,n.y):F.canvas.lineTo(o,t._view,n),u=e);d&&o.closePath(),o.stroke(),o.restore()}}}),de=F.valueOrDefault,fe=V.global.defaultColor;function me(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}V._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:fe,borderColor:fe,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var pe=K.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:me,inXRange:me,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,r=t.pointStyle,a=t.rotation,o=t.radius,i=t.x,s=t.y,c=V.global,l=c.defaultColor;t.skip||(void 0===e||F.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||l,n.lineWidth=de(t.borderWidth,c.elements.point.borderWidth),n.fillStyle=t.backgroundColor||l,F.canvas.drawPoint(n,r,o,i,s,a))}}),he=V.global.defaultColor;function ve(e){return e&&void 0!==e.width}function ge(e){var t,n,r,a,o;return ve(e)?(o=e.width/2,t=e.x-o,n=e.x+o,r=Math.min(e.y,e.base),a=Math.max(e.y,e.base)):(o=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),r=e.y-o,a=e.y+o),{left:t,top:r,right:n,bottom:a}}function be(e,t,n){return e===t?n:e===n?t:e}function ye(e,t,n){var r,a,o,i,s=e.borderWidth,c=function(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=be(t,"left","right")):e.base<e.y&&(t=be(t,"bottom","top")),n[t]=!0,n):n}(e);return F.isObject(s)?(r=+s.top||0,a=+s.right||0,o=+s.bottom||0,i=+s.left||0):r=a=o=i=+s||0,{t:c.top||r<0?0:r>n?n:r,r:c.right||a<0?0:a>t?t:a,b:c.bottom||o<0?0:o>n?n:o,l:c.left||i<0?0:i>t?t:i}}function we(e,t,n){var r=null===t,a=null===n,o=!(!e||r&&a)&&ge(e);return o&&(r||t>=o.left&&t<=o.right)&&(a||n>=o.top&&n<=o.bottom)}V._set("global",{elements:{rectangle:{backgroundColor:he,borderColor:he,borderSkipped:"bottom",borderWidth:0}}});var xe={},ke=se,_e=ue,Se=pe,Ce=K.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=function(e){var t=ge(e),n=t.right-t.left,r=t.bottom-t.top,a=ye(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b}}}(t),r=n.outer,a=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.w,r.h),r.w===a.w&&r.h===a.h||(e.save(),e.beginPath(),e.rect(r.x,r.y,r.w,r.h),e.clip(),e.fillStyle=t.borderColor,e.rect(a.x,a.y,a.w,a.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return we(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return ve(n)?we(n,e,null):we(n,null,t)},inXRange:function(e){return we(this._view,e,null)},inYRange:function(e){return we(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return ve(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return ve(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}});xe.Arc=ke,xe.Line=_e,xe.Point=Se,xe.Rectangle=Ce;var Ne=F._deprecated,Te=F.valueOrDefault;function De(e,t,n){var r,a,o=n.barThickness,i=t.stackCount,s=t.pixels[e],c=F.isNullOrUndef(o)?function(e,t){var n,r,a,o,i=e._length;for(a=1,o=t.length;a<o;++a)i=Math.min(i,Math.abs(t[a]-t[a-1]));for(a=0,o=e.getTicks().length;a<o;++a)r=e.getPixelForTick(a),i=a>0?Math.min(i,Math.abs(r-n)):i,n=r;return i}(t.scale,t.pixels):-1;return F.isNullOrUndef(o)?(r=c*n.categoryPercentage,a=n.barPercentage):(r=o*i,a=1),{chunk:r/i,ratio:a,start:s-r/2}}V._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),V._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Ie=re.extend({dataElementType:xe.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;re.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,Ne("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Ne("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Ne("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Ne("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Ne("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,r=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,n=r.length;t<n;++t)this.updateElement(r[t],t,e)},updateElement:function(e,t,n){var r=this,a=r.getMeta(),o=r.getDataset(),i=r._resolveDataElementOptions(e,t);e._xScale=r.getScaleForId(a.xAxisID),e._yScale=r.getScaleForId(a.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderSkipped:i.borderSkipped,borderWidth:i.borderWidth,datasetLabel:o.label,label:r.chart.data.labels[t]},F.isArray(o.data[t])&&(e._model.borderSkipped=null),r._updateElementGeometry(e,t,n,i),e.pivot()},_updateElementGeometry:function(e,t,n,r){var a=this,o=e._model,i=a._getValueScale(),s=i.getBasePixel(),c=i.isHorizontal(),l=a._ruler||a.getRuler(),u=a.calculateBarValuePixels(a.index,t,r),d=a.calculateBarIndexPixels(a.index,t,l,r);o.horizontal=c,o.base=n?s:u.base,o.x=c?n?s:u.head:d.center,o.y=c?d.center:n?s:u.head,o.height=c?d.size:void 0,o.width=c?void 0:d.size},_getStacks:function(e){var t,n,r=this._getIndexScale(),a=r._getMatchingVisibleMetas(this._type),o=r.options.stacked,i=a.length,s=[];for(t=0;t<i&&(n=a[t],(!1===o||-1===s.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&s.push(n.stack),n.index!==e);++t);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),r=void 0!==t?n.indexOf(t):-1;return-1===r?n.length-1:r},getRuler:function(){var e,t,n=this._getIndexScale(),r=[];for(e=0,t=this.getMeta().data.length;e<t;++e)r.push(n.getPixelForValue(null,e,this.index));return{pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(e,t,n){var r,a,o,i,s,c,l,u=this.chart,d=this._getValueScale(),f=d.isHorizontal(),m=u.data.datasets,p=d._getMatchingVisibleMetas(this._type),h=d._parseValue(m[e].data[t]),v=n.minBarLength,g=d.options.stacked,b=this.getMeta().stack,y=void 0===h.start?0:h.max>=0&&h.min>=0?h.min:h.max,w=void 0===h.start?h.end:h.max>=0&&h.min>=0?h.max-h.min:h.min-h.max,x=p.length;if(g||void 0===g&&void 0!==b)for(r=0;r<x&&(a=p[r]).index!==e;++r)a.stack===b&&(o=void 0===(l=d._parseValue(m[a.index].data[t])).start?l.end:l.min>=0&&l.max>=0?l.max:l.min,(h.min<0&&o<0||h.max>=0&&o>0)&&(y+=o));return i=d.getPixelForValue(y),c=(s=d.getPixelForValue(y+w))-i,void 0!==v&&Math.abs(c)<v&&(c=v,s=w>=0&&!f||w<0&&f?i-v:i+v),{size:c,base:i,head:s,center:s+c/2}},calculateBarIndexPixels:function(e,t,n,r){var a="flex"===r.barThickness?function(e,t,n){var r,a=t.pixels,o=a[e],i=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,c=n.categoryPercentage;return null===i&&(i=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-i),r=o-(o-Math.min(i,s))/2*c,{chunk:Math.abs(s-i)/2*c/t.stackCount,ratio:n.barPercentage,start:r}}(t,n,r):De(t,n,r),o=this.getStackIndex(e,this.getMeta().stack),i=a.start+a.chunk*o+a.chunk/2,s=Math.min(Te(r.maxBarThickness,1/0),a.chunk*a.ratio);return{base:i-s/2,head:i+s/2,center:i,size:s}},draw:function(){var e=this.chart,t=this._getValueScale(),n=this.getMeta().data,r=this.getDataset(),a=n.length,o=0;for(F.canvas.clipArea(e.ctx,e.chartArea);o<a;++o){var i=t._parseValue(r.data[o]);isNaN(i.min)||isNaN(i.max)||n[o].draw()}F.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var e=F.extend({},re.prototype._resolveDataElementOptions.apply(this,arguments)),t=this._getIndexScale().options,n=this._getValueScale().options;return e.barPercentage=Te(t.barPercentage,e.barPercentage),e.barThickness=Te(t.barThickness,e.barThickness),e.categoryPercentage=Te(t.categoryPercentage,e.categoryPercentage),e.maxBarThickness=Te(t.maxBarThickness,e.maxBarThickness),e.minBarLength=Te(n.minBarLength,e.minBarLength),e}}),Me=F.valueOrDefault,Oe=F.options.resolve;V._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+r.r+")"}}}});var Ae=re.extend({dataElementType:xe.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta().data;F.each(n,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,a=r.getMeta(),o=e.custom||{},i=r.getScaleForId(a.xAxisID),s=r.getScaleForId(a.yAxisID),c=r._resolveDataElementOptions(e,t),l=r.getDataset().data[t],u=r.index,d=n?i.getPixelForDecimal(.5):i.getPixelForValue("object"==typeof l?l:NaN,t,u),f=n?s.getBasePixel():s.getPixelForValue(l,t,u);e._xScale=i,e._yScale=s,e._options=c,e._datasetIndex=u,e._index=t,e._model={backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,hitRadius:c.hitRadius,pointStyle:c.pointStyle,rotation:c.rotation,radius:n?0:c.radius,skip:o.skip||isNaN(d)||isNaN(f),x:d,y:f},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,r=F.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Me(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Me(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Me(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,r=n.chart,a=n.getDataset(),o=e.custom||{},i=a.data[t]||{},s=re.prototype._resolveDataElementOptions.apply(n,arguments),c={chart:r,dataIndex:t,dataset:a,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=F.extend({},s)),s.radius=Oe([o.radius,i.r,n._config.radius,r.options.elements.point.radius],c,t),s}}),Le=F.valueOrDefault,Ee=Math.PI,ze=2*Ee,Re=Ee/2;V._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,r,a=document.createElement("ul"),o=e.data,i=o.datasets,s=o.labels;if(a.setAttribute("class",e.id+"-legend"),i.length)for(t=0,n=i[0].data.length;t<n;++t)(r=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=i[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return a.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var a=e.getDatasetMeta(0),o=a.controller.getStyle(r);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[r])||a.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,a,o=t.index,i=this.chart;for(n=0,r=(i.data.datasets||[]).length;n<r;++n)(a=i.getDatasetMeta(n)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);i.update()}},cutoutPercentage:50,rotation:-Re,circumference:ze,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return F.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var Ve=re.extend({dataElementType:xe.Arc,linkScales:F.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,r,a,o=this,i=o.chart,s=i.chartArea,c=i.options,l=1,u=1,d=0,f=0,m=o.getMeta(),p=m.data,h=c.cutoutPercentage/100||0,v=c.circumference,g=o._getRingWeight(o.index);if(v<ze){var b=c.rotation%ze,y=(b+=b>=Ee?-ze:b<-Ee?ze:0)+v,w=Math.cos(b),x=Math.sin(b),k=Math.cos(y),_=Math.sin(y),S=b<=0&&y>=0||y>=ze,C=b<=Re&&y>=Re||y>=ze+Re,N=b<=-Re&&y>=-Re||y>=Ee+Re,T=b===-Ee||y>=Ee?-1:Math.min(w,w*h,k,k*h),D=N?-1:Math.min(x,x*h,_,_*h),I=S?1:Math.max(w,w*h,k,k*h),M=C?1:Math.max(x,x*h,_,_*h);l=(I-T)/2,u=(M-D)/2,d=-(I+T)/2,f=-(M+D)/2}for(r=0,a=p.length;r<a;++r)p[r]._options=o._resolveDataElementOptions(p[r],r);for(i.borderWidth=o.getMaxBorderWidth(),t=(s.right-s.left-i.borderWidth)/l,n=(s.bottom-s.top-i.borderWidth)/u,i.outerRadius=Math.max(Math.min(t,n)/2,0),i.innerRadius=Math.max(i.outerRadius*h,0),i.radiusLength=(i.outerRadius-i.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),i.offsetX=d*i.outerRadius,i.offsetY=f*i.outerRadius,m.total=o.calculateTotal(),o.outerRadius=i.outerRadius-i.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-i.radiusLength*g,0),r=0,a=p.length;r<a;++r)o.updateElement(p[r],r,e)},updateElement:function(e,t,n){var r=this,a=r.chart,o=a.chartArea,i=a.options,s=i.animation,c=(o.left+o.right)/2,l=(o.top+o.bottom)/2,u=i.rotation,d=i.rotation,f=r.getDataset(),m=n&&s.animateRotate?0:e.hidden?0:r.calculateCircumference(f.data[t])*(i.circumference/ze),p=n&&s.animateScale?0:r.innerRadius,h=n&&s.animateScale?0:r.outerRadius,v=e._options||{};F.extend(e,{_datasetIndex:r.index,_index:t,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c+a.offsetX,y:l+a.offsetY,startAngle:u,endAngle:d,circumference:m,outerRadius:h,innerRadius:p,label:F.valueAtIndexOrDefault(f.label,t,a.data.labels[t])}});var g=e._model;n&&s.animateRotate||(g.startAngle=0===t?i.rotation:r.getMeta().data[t-1]._model.endAngle,g.endAngle=g.startAngle+g.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return F.each(n.data,function(n,a){e=t.data[a],isNaN(e)||n.hidden||(r+=Math.abs(e))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?ze*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,r,a,o,i,s,c,l=0,u=this.chart;if(!e)for(t=0,n=u.data.datasets.length;t<n;++t)if(u.isDatasetVisible(t)){e=(r=u.getDatasetMeta(t)).data,t!==this.index&&(o=r.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)a=e[t],o?(o._configure(),i=o._resolveDataElementOptions(a,t)):i=a._options,"inner"!==i.borderAlign&&(s=i.borderWidth,l=(c=i.hoverBorderWidth)>(l=s>l?s:l)?c:l);return l},setHoverStyle:function(e){var t=e._model,n=e._options,r=F.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Le(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Le(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Le(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(Le(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});V._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),V._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Be=Ie.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),$e=F.valueOrDefault,Ue=F.options.resolve,Pe=F.canvas._isPointInArea;function Fe(e,t){var n=e&&e.options.ticks||{},r=n.reverse,a=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:a,end:r?a:o}}V._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var He=re.extend({datasetElementType:xe.Line,dataElementType:xe.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,r=this,a=r.getMeta(),o=a.dataset,i=a.data||[],s=r.chart.options,c=r._config,l=r._showLine=$e(c.showLine,s.showLines);for(r._xScale=r.getScaleForId(a.xAxisID),r._yScale=r.getScaleForId(a.yAxisID),l&&(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),o._scale=r._yScale,o._datasetIndex=r.index,o._children=i,o._model=r._resolveDatasetElementOptions(o),o.pivot()),t=0,n=i.length;t<n;++t)r.updateElement(i[t],t,e);for(l&&0!==o._model.tension&&r.updateBezierControlPoints(),t=0,n=i.length;t<n;++t)i[t].pivot()},updateElement:function(e,t,n){var r,a,o=this,i=o.getMeta(),s=e.custom||{},c=o.getDataset(),l=o.index,u=c.data[t],d=o._xScale,f=o._yScale,m=i.dataset._model,p=o._resolveDataElementOptions(e,t);r=d.getPixelForValue("object"==typeof u?u:NaN,t,l),a=n?f.getBasePixel():o.calculatePointY(u,t,l),e._xScale=d,e._yScale=f,e._options=p,e._datasetIndex=l,e._index=t,e._model={x:r,y:a,skip:s.skip||isNaN(r)||isNaN(a),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:$e(s.tension,m?m.tension:0),steppedLine:!!m&&m.steppedLine,hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(e){var t,n,r,a,o,i,s,c,l,u,d,f=this,m=f._config,p=e.custom||{},h=f.chart.options,v=h.elements.line,g=re.prototype._resolveDatasetElementOptions.apply(f,arguments);return g.spanGaps=$e(m.spanGaps,h.spanGaps),g.tension=$e(m.lineTension,v.tension),g.steppedLine=Ue([p.steppedLine,m.steppedLine,v.stepped]),g.clip=(t=$e(m.clip,(i=f._xScale,s=f._yScale,c=g.borderWidth,u=Fe(i,l=c/2),{top:(d=Fe(s,l)).end,right:u.end,bottom:d.start,left:u.start})),F.isObject(t)?(n=t.top,r=t.right,a=t.bottom,o=t.left):n=r=a=o=t,{top:n,right:r,bottom:a,left:o}),g},calculatePointY:function(e,t,n){var r,a,o,i,s,c,l,u=this.chart,d=this._yScale,f=0,m=0;if(d.options.stacked){for(s=+d.getRightValue(e),l=(c=u._getSortedVisibleDatasetMetas()).length,r=0;r<l&&(o=c[r]).index!==n;++r)a=u.data.datasets[o.index],"line"===o.type&&o.yAxisID===d.id&&((i=+d.getRightValue(a.data[t]))<0?m+=i||0:f+=i||0);return s<0?d.getPixelForValue(m+s):d.getPixelForValue(f+s)}return d.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,r,a=this.chart,o=this.getMeta(),i=o.dataset._model,s=a.chartArea,c=o.data||[];function l(e,t,n){return Math.max(Math.min(e,n),t)}if(i.spanGaps&&(c=c.filter(function(e){return!e._model.skip})),"monotone"===i.cubicInterpolationMode)F.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)n=c[e]._model,r=F.splineCurve(F.previousItem(c,e)._model,n,F.nextItem(c,e)._model,i.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(a.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)n=c[e]._model,Pe(n,s)&&(e>0&&Pe(c[e-1]._model,s)&&(n.controlPointPreviousX=l(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=l(n.controlPointPreviousY,s.top,s.bottom)),e<c.length-1&&Pe(c[e+1]._model,s)&&(n.controlPointNextX=l(n.controlPointNextX,s.left,s.right),n.controlPointNextY=l(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var e,t=this.chart,n=this.getMeta(),r=n.data||[],a=t.chartArea,o=t.canvas,i=0,s=r.length;for(this._showLine&&(e=n.dataset._model.clip,F.canvas.clipArea(t.ctx,{left:!1===e.left?0:a.left-e.left,right:!1===e.right?o.width:a.right+e.right,top:!1===e.top?0:a.top-e.top,bottom:!1===e.bottom?o.height:a.bottom+e.bottom}),n.dataset.draw(),F.canvas.unclipArea(t.ctx));i<s;++i)r[i].draw(a)},setHoverStyle:function(e){var t=e._model,n=e._options,r=F.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=$e(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=$e(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=$e(n.hoverBorderWidth,n.borderWidth),t.radius=$e(n.hoverRadius,n.radius)}}),je=F.options.resolve;V._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,r,a=document.createElement("ul"),o=e.data,i=o.datasets,s=o.labels;if(a.setAttribute("class",e.id+"-legend"),i.length)for(t=0,n=i[0].data.length;t<n;++t)(r=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=i[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return a.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var a=e.getDatasetMeta(0),o=a.controller.getStyle(r);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[r])||a.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,a,o=t.index,i=this.chart;for(n=0,r=(i.data.datasets||[]).length;n<r;++n)(a=i.getDatasetMeta(n)).data[o].hidden=!a.data[o].hidden;i.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var qe=re.extend({dataElementType:xe.Arc,linkScales:F.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r,a=this,o=a.getDataset(),i=a.getMeta(),s=a.chart.options.startAngle||0,c=a._starts=[],l=a._angles=[],u=i.data;for(a._updateRadius(),i.count=a.countVisibleElements(),t=0,n=o.data.length;t<n;t++)c[t]=s,r=a._computeAngle(t),l[t]=r,s+=r;for(t=0,n=u.length;t<n;++t)u[t]._options=a._resolveDataElementOptions(u[t],t),a.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,r=t.options,a=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(a/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var r=this,a=r.chart,o=r.getDataset(),i=a.options,s=i.animation,c=a.scale,l=a.data.labels,u=c.xCenter,d=c.yCenter,f=i.startAngle,m=e.hidden?0:c.getDistanceFromCenterForValue(o.data[t]),p=r._starts[t],h=p+(e.hidden?0:r._angles[t]),v=s.animateScale?0:c.getDistanceFromCenterForValue(o.data[t]),g=e._options||{};F.extend(e,{_datasetIndex:r.index,_index:t,_scale:c,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:u,y:d,innerRadius:0,outerRadius:n?v:m,startAngle:n&&s.animateRotate?f:p,endAngle:n&&s.animateRotate?f:h,label:F.valueAtIndexOrDefault(l,t,l[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return F.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,r=F.getHoverColor,a=F.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=a(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=a(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=a(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,r=t.getDataset(),a=t.getMeta();if(isNaN(r.data[e])||a.data[e].hidden)return 0;var o={chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index};return je([t.chart.options.elements.arc.angle,2*Math.PI/n],o,e)}});V._set("pie",F.clone(V.doughnut)),V._set("pie",{cutoutPercentage:0});var We=Ve,Ye=F.valueOrDefault;V._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Ge=re.extend({datasetElementType:xe.Line,dataElementType:xe.Point,linkScales:F.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r=this,a=r.getMeta(),o=a.dataset,i=a.data||[],s=r.chart.scale,c=r._config;for(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),o._scale=s,o._datasetIndex=r.index,o._children=i,o._loop=!0,o._model=r._resolveDatasetElementOptions(o),o.pivot(),t=0,n=i.length;t<n;++t)r.updateElement(i[t],t,e);for(r.updateBezierControlPoints(),t=0,n=i.length;t<n;++t)i[t].pivot()},updateElement:function(e,t,n){var r=this,a=e.custom||{},o=r.getDataset(),i=r.chart.scale,s=i.getPointPositionForValue(t,o.data[t]),c=r._resolveDataElementOptions(e,t),l=r.getMeta().dataset._model,u=n?i.xCenter:s.x,d=n?i.yCenter:s.y;e._scale=i,e._options=c,e._datasetIndex=r.index,e._index=t,e._model={x:u,y:d,skip:a.skip||isNaN(u)||isNaN(d),radius:c.radius,pointStyle:c.pointStyle,rotation:c.rotation,backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,tension:Ye(a.tension,l?l.tension:0),hitRadius:c.hitRadius}},_resolveDatasetElementOptions:function(){var e=this._config,t=this.chart.options,n=re.prototype._resolveDatasetElementOptions.apply(this,arguments);return n.spanGaps=Ye(e.spanGaps,t.spanGaps),n.tension=Ye(e.lineTension,t.elements.line.tension),n},updateBezierControlPoints:function(){var e,t,n,r,a=this.getMeta(),o=this.chart.chartArea,i=a.data||[];function s(e,t,n){return Math.max(Math.min(e,n),t)}for(a.dataset._model.spanGaps&&(i=i.filter(function(e){return!e._model.skip})),e=0,t=i.length;e<t;++e)n=i[e]._model,r=F.splineCurve(F.previousItem(i,e,!0)._model,n,F.nextItem(i,e,!0)._model,n.tension),n.controlPointPreviousX=s(r.previous.x,o.left,o.right),n.controlPointPreviousY=s(r.previous.y,o.top,o.bottom),n.controlPointNextX=s(r.next.x,o.left,o.right),n.controlPointNextY=s(r.next.y,o.top,o.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,r=F.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ye(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Ye(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Ye(n.hoverBorderWidth,n.borderWidth),t.radius=Ye(n.hoverRadius,n.radius)}});V._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),V._set("global",{datasets:{scatter:{showLine:!1}}});var Ke={bar:Ie,bubble:Ae,doughnut:Ve,horizontalBar:Be,line:He,polarArea:qe,pie:We,radar:Ge,scatter:He};function Qe(e,t){return e.native?{x:e.x,y:e.y}:F.getRelativePosition(e,t)}function Xe(e,t){var n,r,a,o,i,s,c=e._getSortedVisibleDatasetMetas();for(r=0,o=c.length;r<o;++r)for(a=0,i=(n=c[r].data).length;a<i;++a)(s=n[a])._view.skip||t(s)}function Je(e,t){var n=[];return Xe(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function Ze(e,t,n,r){var a=Number.POSITIVE_INFINITY,o=[];return Xe(e,function(e){if(!n||e.inRange(t.x,t.y)){var i=e.getCenterPoint(),s=r(t,i);s<a?(o=[e],a=s):s===a&&o.push(e)}}),o}function et(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var a=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function tt(e,t,n){var r=Qe(t,e);n.axis=n.axis||"x";var a=et(n.axis),o=n.intersect?Je(e,r):Ze(e,r,!1,a),i=[];return o.length?(e._getSortedVisibleDatasetMetas().forEach(function(e){var t=e.data[o[0]._index];t&&!t._view.skip&&i.push(t)}),i):[]}var nt={modes:{single:function(e,t){var n=Qe(t,e),r=[];return Xe(e,function(e){if(e.inRange(n.x,n.y))return r.push(e),r}),r.slice(0,1)},label:tt,index:tt,dataset:function(e,t,n){var r=Qe(t,e);n.axis=n.axis||"xy";var a=et(n.axis),o=n.intersect?Je(e,r):Ze(e,r,!1,a);return o.length>0&&(o=e.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(e,t){return tt(e,t,{intersect:!1})},point:function(e,t){return Je(e,Qe(t,e))},nearest:function(e,t,n){var r=Qe(t,e);n.axis=n.axis||"xy";var a=et(n.axis);return Ze(e,r,n.intersect,a)},x:function(e,t,n){var r=Qe(t,e),a=[],o=!1;return Xe(e,function(e){e.inXRange(r.x)&&a.push(e),e.inRange(r.x,r.y)&&(o=!0)}),n.intersect&&!o&&(a=[]),a},y:function(e,t,n){var r=Qe(t,e),a=[],o=!1;return Xe(e,function(e){e.inYRange(r.y)&&a.push(e),e.inRange(r.x,r.y)&&(o=!0)}),n.intersect&&!o&&(a=[]),a}}},rt=F.extend;function at(e,t){return F.where(e,function(e){return e.pos===t})}function ot(e,t){return e.sort(function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function it(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function st(e,t,n){var r,a,o=n.box,i=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?o.height:o.width,e[n.pos]+=n.size,o.getPadding){var s=o.getPadding();i.top=Math.max(i.top,s.top),i.left=Math.max(i.left,s.left),i.bottom=Math.max(i.bottom,s.bottom),i.right=Math.max(i.right,s.right)}if(r=t.outerWidth-it(i,e,"left","right"),a=t.outerHeight-it(i,e,"top","bottom"),r!==e.w||a!==e.h)return e.w=r,e.h=a,n.horizontal?r!==e.w:a!==e.h}function ct(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function lt(e,t,n){var r,a,o,i,s,c,l=[];for(r=0,a=e.length;r<a;++r)(i=(o=e[r]).box).update(o.width||t.w,o.height||t.h,ct(o.horizontal,t)),st(t,n,o)&&(c=!0,l.length&&(s=!0)),i.fullWidth||l.push(o);return s&&lt(l,t,n)||c}function ut(e,t,n){var r,a,o,i,s=n.padding,c=t.x,l=t.y;for(r=0,a=e.length;r<a;++r)i=(o=e[r]).box,o.horizontal?(i.left=i.fullWidth?s.left:t.left,i.right=i.fullWidth?n.outerWidth-s.right:t.left+t.w,i.top=l,i.bottom=l+i.height,i.width=i.right-i.left,l=i.bottom):(i.left=c,i.right=c+i.width,i.top=t.top,i.bottom=t.top+t.h,i.height=i.bottom-i.top,c=i.right);t.x=c,t.y=l}V._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var dt,ft={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,a=["fullWidth","position","weight"],o=a.length,i=0;i<o;++i)r=a[i],n.hasOwnProperty(r)&&(t[r]=n[r])},update:function(e,t,n){if(e){var r=e.options.layout||{},a=F.options.toPadding(r.padding),o=t-a.width,i=n-a.height,s=function(e){var t=function(e){var t,n,r,a=[];for(t=0,n=(e||[]).length;t<n;++t)r=e[t],a.push({index:t,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return a}(e),n=ot(at(t,"left"),!0),r=ot(at(t,"right")),a=ot(at(t,"top"),!0),o=ot(at(t,"bottom"));return{leftAndTop:n.concat(a),rightAndBottom:r.concat(o),chartArea:at(t,"chartArea"),vertical:n.concat(r),horizontal:a.concat(o)}}(e.boxes),c=s.vertical,l=s.horizontal,u=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:o,vBoxMaxWidth:o/2/c.length,hBoxMaxHeight:i/2}),d=rt({maxPadding:rt({},a),w:o,h:i,x:a.left,y:a.top},a);!function(e,t){var n,r,a;for(n=0,r=e.length;n<r;++n)(a=e[n]).width=a.horizontal?a.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,a.height=a.horizontal&&t.hBoxMaxHeight}(c.concat(l),u),lt(c,d,u),lt(l,d,u)&&lt(c,d,u),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(d),ut(s.leftAndTop,d,u),d.x+=d.w,d.y+=d.h,ut(s.rightAndBottom,d,u),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h},F.each(s.chartArea,function(t){var n=t.box;rt(n,e.chartArea),n.update(d.w,d.h)})}}},mt=(dt=Object.freeze({__proto__:null,default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&dt.default||dt,pt="$chartjs",ht="chartjs-size-monitor",vt="chartjs-render-monitor",gt="chartjs-render-animation",bt=["animationstart","webkitAnimationStart"],yt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function wt(e,t){var n=F.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}var xt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function kt(e,t,n){e.addEventListener(t,n,xt)}function _t(e,t,n){e.removeEventListener(t,n,xt)}function St(e,t,n,r,a){return{type:e,chart:t,native:a||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function Ct(e){var t=document.createElement("div");return t.className=e||"",t}function Nt(e,t,n){var r,a,o,i,s=e[pt]||(e[pt]={}),c=s.resizer=function(e){var t=Ct(ht),n=Ct(ht+"-expand"),r=Ct(ht+"-shrink");n.appendChild(Ct()),r.appendChild(Ct()),t.appendChild(n),t.appendChild(r),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,r.scrollLeft=1e6,r.scrollTop=1e6};var a=function(){t._reset(),e()};return kt(n,"scroll",a.bind(n,"expand")),kt(r,"scroll",a.bind(r,"shrink")),t}((r=function(){if(s.resizer){var r=n.options.maintainAspectRatio&&e.parentNode,a=r?r.clientWidth:0;t(St("resize",n)),r&&r.clientWidth<a&&n.canvas&&t(St("resize",n))}},o=!1,i=[],function(){i=Array.prototype.slice.call(arguments),a=a||this,o||(o=!0,F.requestAnimFrame.call(window,function(){o=!1,r.apply(a,i)}))}));!function(e,t){var n=e[pt]||(e[pt]={}),r=n.renderProxy=function(e){e.animationName===gt&&t()};F.each(bt,function(t){kt(e,t,r)}),n.reflow=!!e.offsetParent,e.classList.add(vt)}(e,function(){if(s.resizer){var t=e.parentNode;t&&t!==c.parentNode&&t.insertBefore(c,t.firstChild),c._reset()}})}function Tt(e){var t=e[pt]||{},n=t.resizer;delete t.resizer,function(e){var t=e[pt]||{},n=t.renderProxy;n&&(F.each(bt,function(t){_t(e,t,n)}),delete t.renderProxy),e.classList.remove(vt)}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}var Dt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function(e,t){var n=e[pt]||(e[pt]={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var r=document.createElement("style");r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(t)),e.appendChild(r)}}(t.host?t:document.head,mt)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),function(e,t){var n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e[pt]={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===a||""===a){var o=wt(e,"width");void 0!==o&&(e.width=o)}if(null===r||""===r)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var i=wt(e,"height");void 0!==o&&(e.height=i)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[pt]){var n=t[pt].initial;["height","width"].forEach(function(e){var r=n[e];F.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}),F.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t[pt]}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var a=n[pt]||(n[pt]={});kt(r,t,(a.proxies||(a.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=yt[e.type]||e.type,r=F.getRelativePosition(e,t);return St(n,t,r.x,r.y,e)}(t,e))})}else Nt(r,n,e)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var a=((n[pt]||{}).proxies||{})[e.id+"_"+t];a&&_t(r,t,a)}else Tt(r)}};F.addEvent=kt,F.removeEvent=_t;var It=Dt._enabled?Dt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Mt=F.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},It);V._set("global",{plugins:{}});var Ot={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,a,o,i,s,c=this.descriptors(e),l=c.length;for(r=0;r<l;++r)if("function"==typeof(s=(o=(a=c[r]).plugin)[t])&&((i=[e].concat(n||[])).push(a.options),!1===s.apply(o,i)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],r=[],a=e&&e.config||{},o=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,a=o[t];!1!==a&&(!0===a&&(a=F.clone(V.global.plugins[t])),n.push(e),r.push({plugin:e,options:a||{}}))}}),t.descriptors=r,t.id=this._cacheId,r},_invalidate:function(e){delete e.$plugins}},At={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=F.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?F.merge({},[V.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=F.extend(this.defaults[e],t))},addScalesToLayout:function(e){F.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,ft.addBox(e,t)})}},Lt=F.valueOrDefault,Et=F.rtl.getRtlAdapter;V._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:F.noop,title:function(e,t){var n="",r=t.labels,a=r?r.length:0;if(e.length>0){var o=e[0];o.label?n=o.label:o.xLabel?n=o.xLabel:a>0&&o.index<a&&(n=r[o.index])}return n},afterTitle:F.noop,beforeBody:F.noop,beforeLabel:F.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),F.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:F.noop,afterBody:F.noop,beforeFooter:F.noop,footer:F.noop,afterFooter:F.noop}}});var zt={average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,o=0;for(t=0,n=e.length;t<n;++t){var i=e[t];if(i&&i.hasValue()){var s=i.tooltipPosition();r+=s.x,a+=s.y,++o}}return{x:r/o,y:a/o}},nearest:function(e,t){var n,r,a,o=t.x,i=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var c=e[n];if(c&&c.hasValue()){var l=c.getCenterPoint(),u=F.distanceBetweenPoints(t,l);u<s&&(s=u,a=c)}}if(a){var d=a.tooltipPosition();o=d.x,i=d.y}return{x:o,y:i}}};function Rt(e,t){return t&&(F.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Vt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Bt(e){var t=V.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Lt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Lt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Lt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Lt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Lt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Lt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Lt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Lt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Lt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function $t(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ut(e){return Rt([],Vt(e))}var Pt=K.extend({initialize:function(){this._model=Bt(this._options),this._lastActive=[]},getTitle:function(){var e=this._options.callbacks,t=e.beforeTitle.apply(this,arguments),n=e.title.apply(this,arguments),r=e.afterTitle.apply(this,arguments),a=[];return a=Rt(a=Rt(a=Rt(a,Vt(t)),Vt(n)),Vt(r))},getBeforeBody:function(){return Ut(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,r=n._options.callbacks,a=[];return F.each(e,function(e){var o={before:[],lines:[],after:[]};Rt(o.before,Vt(r.beforeLabel.call(n,e,t))),Rt(o.lines,r.label.call(n,e,t)),Rt(o.after,Vt(r.afterLabel.call(n,e,t))),a.push(o)}),a},getAfterBody:function(){return Ut(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this._options.callbacks,t=e.beforeFooter.apply(this,arguments),n=e.footer.apply(this,arguments),r=e.afterFooter.apply(this,arguments),a=[];return a=Rt(a=Rt(a=Rt(a,Vt(t)),Vt(n)),Vt(r))},update:function(e){var t,n,r,a,o,i,s,c,l,u,d=this,f=d._options,m=d._model,p=d._model=Bt(f),h=d._active,v=d._data,g={xAlign:m.xAlign,yAlign:m.yAlign},b={x:m.x,y:m.y},y={width:m.width,height:m.height},w={x:m.caretX,y:m.caretY};if(h.length){p.opacity=1;var x=[],k=[];w=zt[f.position].call(d,h,d._eventPosition);var _=[];for(t=0,n=h.length;t<n;++t)_.push((r=h[t],a=void 0,o=void 0,void 0,void 0,c=void 0,l=void 0,u=void 0,a=r._xScale,o=r._yScale||r._scale,i=r._index,s=r._datasetIndex,c=r._chart.getDatasetMeta(s).controller,l=c._getIndexScale(),u=c._getValueScale(),{xLabel:a?a.getLabelForIndex(i,s):"",yLabel:o?o.getLabelForIndex(i,s):"",label:l?""+l.getLabelForIndex(i,s):"",value:u?""+u.getLabelForIndex(i,s):"",index:i,datasetIndex:s,x:r._model.x,y:r._model.y}));f.filter&&(_=_.filter(function(e){return f.filter(e,v)})),f.itemSort&&(_=_.sort(function(e,t){return f.itemSort(e,t,v)})),F.each(_,function(e){x.push(f.callbacks.labelColor.call(d,e,d._chart)),k.push(f.callbacks.labelTextColor.call(d,e,d._chart))}),p.title=d.getTitle(_,v),p.beforeBody=d.getBeforeBody(_,v),p.body=d.getBody(_,v),p.afterBody=d.getAfterBody(_,v),p.footer=d.getFooter(_,v),p.x=w.x,p.y=w.y,p.caretPadding=f.caretPadding,p.labelColors=x,p.labelTextColors=k,p.dataPoints=_,b=function(e,t,n,r){var a=e.x,o=e.y,i=e.caretSize,s=e.caretPadding,c=e.cornerRadius,l=n.xAlign,u=n.yAlign,d=i+s,f=c+s;return"right"===l?a-=t.width:"center"===l&&((a-=t.width/2)+t.width>r.width&&(a=r.width-t.width),a<0&&(a=0)),"top"===u?o+=d:o-="bottom"===u?t.height+d:t.height/2,"center"===u?"left"===l?a+=d:"right"===l&&(a-=d):"left"===l?a-=f:"right"===l&&(a+=f),{x:a,y:o}}(p,y=function(e,t){var n=e._chart.ctx,r=2*t.yPadding,a=0,o=t.body,i=o.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);i+=t.beforeBody.length+t.afterBody.length;var s=t.title.length,c=t.footer.length,l=t.titleFontSize,u=t.bodyFontSize,d=t.footerFontSize;r+=s*l,r+=s?(s-1)*t.titleSpacing:0,r+=s?t.titleMarginBottom:0,r+=i*u,r+=i?(i-1)*t.bodySpacing:0,r+=c?t.footerMarginTop:0,r+=c*d,r+=c?(c-1)*t.footerSpacing:0;var f=0,m=function(e){a=Math.max(a,n.measureText(e).width+f)};return n.font=F.fontString(l,t._titleFontStyle,t._titleFontFamily),F.each(t.title,m),n.font=F.fontString(u,t._bodyFontStyle,t._bodyFontFamily),F.each(t.beforeBody.concat(t.afterBody),m),f=t.displayColors?u+2:0,F.each(o,function(e){F.each(e.before,m),F.each(e.lines,m),F.each(e.after,m)}),f=0,n.font=F.fontString(d,t._footerFontStyle,t._footerFontFamily),F.each(t.footer,m),{width:a+=2*t.xPadding,height:r}}(this,p),g=function(e,t){var n,r,a,o,i,s=e._model,c=e._chart,l=e._chart.chartArea,u="center",d="center";s.y<t.height?d="top":s.y>c.height-t.height&&(d="bottom");var f=(l.left+l.right)/2,m=(l.top+l.bottom)/2;"center"===d?(n=function(e){return e<=f},r=function(e){return e>f}):(n=function(e){return e<=t.width/2},r=function(e){return e>=c.width-t.width/2}),a=function(e){return e+t.width+s.caretSize+s.caretPadding>c.width},o=function(e){return e-t.width-s.caretSize-s.caretPadding<0},i=function(e){return e<=m?"top":"bottom"},n(s.x)?(u="left",a(s.x)&&(u="center",d=i(s.y))):r(s.x)&&(u="right",o(s.x)&&(u="center",d=i(s.y)));var p=e._options;return{xAlign:p.xAlign?p.xAlign:u,yAlign:p.yAlign?p.yAlign:d}}(this,y),d._chart)}else p.opacity=0;return p.xAlign=g.xAlign,p.yAlign=g.yAlign,p.x=b.x,p.y=b.y,p.width=y.width,p.height=y.height,p.caretX=w.x,p.caretY=w.y,d._model=p,e&&f.custom&&f.custom.call(d,p),d},drawCaret:function(e,t){var n=this._chart.ctx,r=this._view,a=this.getCaretPosition(e,t,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)},getCaretPosition:function(e,t,n){var r,a,o,i,s,c,l=n.caretSize,u=n.cornerRadius,d=n.xAlign,f=n.yAlign,m=e.x,p=e.y,h=t.width,v=t.height;if("center"===f)s=p+v/2,"left"===d?(a=(r=m)-l,o=r,i=s+l,c=s-l):(a=(r=m+h)+l,o=r,i=s-l,c=s+l);else if("left"===d?(r=(a=m+u+l)-l,o=a+l):"right"===d?(r=(a=m+h-u-l)-l,o=a+l):(r=(a=n.caretX)-l,o=a+l),"top"===f)s=(i=p)-l,c=i;else{s=(i=p+v)+l,c=i;var g=o;o=r,r=g}return{x1:r,x2:a,x3:o,y1:i,y2:s,y3:c}},drawTitle:function(e,t,n){var r,a,o,i=t.title,s=i.length;if(s){var c=Et(t.rtl,t.x,t.width);for(e.x=$t(t,t._titleAlign),n.textAlign=c.textAlign(t._titleAlign),n.textBaseline="middle",r=t.titleFontSize,a=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=F.fontString(r,t._titleFontStyle,t._titleFontFamily),o=0;o<s;++o)n.fillText(i[o],c.x(e.x),e.y+r/2),e.y+=r+a,o+1===s&&(e.y+=t.titleMarginBottom-a)}},drawBody:function(e,t,n){var r,a,o,i,s,c,l,u,d=t.bodyFontSize,f=t.bodySpacing,m=t._bodyAlign,p=t.body,h=t.displayColors,v=0,g=h?$t(t,"left"):0,b=Et(t.rtl,t.x,t.width),y=function(t){n.fillText(t,b.x(e.x+v),e.y+d/2),e.y+=d+f},w=b.textAlign(m);for(n.textAlign=m,n.textBaseline="middle",n.font=F.fontString(d,t._bodyFontStyle,t._bodyFontFamily),e.x=$t(t,w),n.fillStyle=t.bodyFontColor,F.each(t.beforeBody,y),v=h&&"right"!==w?"center"===m?d/2+1:d+2:0,s=0,l=p.length;s<l;++s){for(r=p[s],a=t.labelTextColors[s],o=t.labelColors[s],n.fillStyle=a,F.each(r.before,y),c=0,u=(i=r.lines).length;c<u;++c){if(h){var x=b.x(g);n.fillStyle=t.legendColorBackground,n.fillRect(b.leftForLtr(x,d),e.y,d,d),n.lineWidth=1,n.strokeStyle=o.borderColor,n.strokeRect(b.leftForLtr(x,d),e.y,d,d),n.fillStyle=o.backgroundColor,n.fillRect(b.leftForLtr(b.xPlus(x,1),d-2),e.y+1,d-2,d-2),n.fillStyle=a}y(i[c])}F.each(r.after,y)}v=0,F.each(t.afterBody,y),e.y-=f},drawFooter:function(e,t,n){var r,a,o=t.footer,i=o.length;if(i){var s=Et(t.rtl,t.x,t.width);for(e.x=$t(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=s.textAlign(t._footerAlign),n.textBaseline="middle",r=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=F.fontString(r,t._footerFontStyle,t._footerFontFamily),a=0;a<i;++a)n.fillText(o[a],s.x(e.x),e.y+r/2),e.y+=r+t.footerSpacing}},drawBackground:function(e,t,n,r){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var a=t.xAlign,o=t.yAlign,i=e.x,s=e.y,c=r.width,l=r.height,u=t.cornerRadius;n.beginPath(),n.moveTo(i+u,s),"top"===o&&this.drawCaret(e,r),n.lineTo(i+c-u,s),n.quadraticCurveTo(i+c,s,i+c,s+u),"center"===o&&"right"===a&&this.drawCaret(e,r),n.lineTo(i+c,s+l-u),n.quadraticCurveTo(i+c,s+l,i+c-u,s+l),"bottom"===o&&this.drawCaret(e,r),n.lineTo(i+u,s+l),n.quadraticCurveTo(i,s+l,i,s+l-u),"center"===o&&"left"===a&&this.drawCaret(e,r),n.lineTo(i,s+u),n.quadraticCurveTo(i,s,i+u,s),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},a=Math.abs(t.opacity<.001)?0:t.opacity,o=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&o&&(e.save(),e.globalAlpha=a,this.drawBackground(r,t,e,n),r.y+=t.yPadding,F.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),F.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t,n=this,r=n._options;return n._lastActive=n._lastActive||[],"mouseout"===e.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(e,r.mode,r),r.reverse&&n._active.reverse()),(t=!F.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(r.enabled||r.custom)&&(n._eventPosition={x:e.x,y:e.y},n.update(!0),n.pivot())),t}}),Ft=zt,Ht=Pt;Ht.positioners=Ft;var jt=F.valueOrDefault;function qt(){return F.merge({},[].slice.call(arguments),{merger:function(e,t,n,r){if("xAxes"===e||"yAxes"===e){var a,o,i,s=n[e].length;for(t[e]||(t[e]=[]),a=0;a<s;++a)i=n[e][a],o=jt(i.type,"xAxes"===e?"category":"linear"),a>=t[e].length&&t[e].push({}),!t[e][a].type||i.type&&i.type!==t[e][a].type?F.merge(t[e][a],[At.getScaleDefaults(o),i]):F.merge(t[e][a],i)}else F._merger(e,t,n,r)}})}function Wt(){return F.merge({},[].slice.call(arguments),{merger:function(e,t,n,r){var a=t[e]||{},o=n[e];"scales"===e?t[e]=qt(a,o):"scale"===e?t[e]=F.merge(a,[At.getScaleDefaults(o.type),o]):F._merger(e,t,n,r)}})}function Yt(e,t,n){var r,a=function(e){return e.id===r};do{r=t+n++}while(F.findIndex(e,a)>=0);return r}function Gt(e){return"top"===e||"bottom"===e}function Kt(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}V._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Qt=function(e,t){return this.construct(e,t),this};F.extend(Qt.prototype,{construct:function(e,t){var n=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Wt(V.global,V[e.type],e.options||{}),e}(t);var r=Mt.acquireContext(e,t),a=r&&r.canvas,o=a&&a.height,i=a&&a.width;n.id=F.uid(),n.ctx=r,n.canvas=a,n.config=t,n.width=i,n.height=o,n.aspectRatio=o?i/o:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Qt.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),r&&a?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Ot.notify(e,"beforeInit"),F.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),Ot.notify(e,"afterInit"),e},clear:function(){return F.canvas.clear(this),this},stop:function(){return J.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,a=n.maintainAspectRatio&&t.aspectRatio||null,o=Math.max(0,Math.floor(F.getMaximumWidth(r))),i=Math.max(0,Math.floor(a?o/a:F.getMaximumHeight(r)));if((t.width!==o||t.height!==i)&&(r.width=t.width=o,r.height=t.height=i,r.style.width=o+"px",r.style.height=i+"px",F.retinaScale(t,n.devicePixelRatio),!e)){var s={width:o,height:i};Ot.notify(t,"resize",[s]),n.onResize&&n.onResize(t,s),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;F.each(t.xAxes,function(e,n){e.id||(e.id=Yt(t.xAxes,"x-axis-",n))}),F.each(t.yAxes,function(e,n){e.id||(e.id=Yt(t.yAxes,"y-axis-",n))}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},r=[],a=Object.keys(n).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(r=r.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&r.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),F.each(r,function(t){var r=t.options,o=r.id,i=jt(r.type,t.dtype);Gt(r.position)!==Gt(t.dposition)&&(r.position=t.dposition),a[o]=!0;var s=null;if(o in n&&n[o].type===i)(s=n[o]).options=r,s.ctx=e.ctx,s.chart=e;else{var c=At.getScaleConstructor(i);if(!c)return;s=new c({id:o,type:i,options:r,ctx:e.ctx,chart:e}),n[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)}),F.each(a,function(e,t){e||delete n[t]}),e.scales=n,At.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,r=[],a=n.data.datasets;for(e=0,t=a.length;e<t;e++){var o=a[e],i=n.getDatasetMeta(e),s=o.type||n.config.type;if(i.type&&i.type!==s&&(n.destroyDatasetMeta(e),i=n.getDatasetMeta(e)),i.type=s,i.order=o.order||0,i.index=e,i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var c=Ke[i.type];if(void 0===c)throw new Error('"'+i.type+'" is not a chart type.');i.controller=new c(n,e),r.push(i.controller)}}return r},resetElements:function(){var e=this;F.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,r,a,o=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),a=(r=o).options,F.each(r.scales,function(e){ft.removeBox(r,e)}),a=Wt(V.global,V[r.config.type],a),r.options=r.config.options=a,r.ensureScalesHaveIDs(),r.buildOrUpdateScales(),r.tooltip._options=a.tooltips,r.tooltip.initialize(),Ot._invalidate(o),!1!==Ot.notify(o,"beforeUpdate")){o.tooltip._data=o.data;var i=o.buildOrUpdateControllers();for(t=0,n=o.data.datasets.length;t<n;t++)o.getDatasetMeta(t).controller.buildOrUpdateElements();o.updateLayout(),o.options.animation&&o.options.animation.duration&&F.each(i,function(e){e.reset()}),o.updateDatasets(),o.tooltip.initialize(),o.lastActive=[],Ot.notify(o,"afterUpdate"),o._layers.sort(Kt("z","_idx")),o._bufferedRender?o._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:o.render(e)}},updateLayout:function(){var e=this;!1!==Ot.notify(e,"beforeLayout")&&(ft.update(this,this.width,this.height),e._layers=[],F.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(e,t){e._idx=t}),Ot.notify(e,"afterScaleUpdate"),Ot.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==Ot.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Ot.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),n={meta:t,index:e};!1!==Ot.notify(this,"beforeDatasetUpdate",[n])&&(t.controller._update(),Ot.notify(this,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,r=jt(e.duration,n&&n.duration),a=e.lazy;if(!1!==Ot.notify(t,"beforeRender")){var o=function(e){Ot.notify(t,"afterRender"),F.callback(n&&n.onComplete,[e],t)};if(n&&r){var i=new X({numSteps:r/16.66,easing:e.easing||n.easing,render:function(e,t){var n=F.easing.effects[t.easing],r=t.currentStep,a=r/t.numSteps;e.draw(n(a),a,r)},onAnimationProgress:n.onProgress,onAnimationComplete:o});J.addAnimation(t,i,r,a)}else t.draw(),o(new X({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,r=this;if(r.clear(),F.isNullOrUndef(e)&&(e=1),r.transition(e),!(r.width<=0||r.height<=0)&&!1!==Ot.notify(r,"beforeDraw",[e])){for(n=r._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(r.chartArea);for(r.drawDatasets(e);t<n.length;++t)n[t].draw(r.chartArea);r._drawTooltip(e),Ot.notify(r,"afterDraw",[e])}},transition:function(e){for(var t=0,n=(this.data.datasets||[]).length;t<n;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,r=[];for(t=0,n=(this.data.datasets||[]).length;t<n;++t)e&&!this.isDatasetVisible(t)||r.push(this.getDatasetMeta(t));return r.sort(Kt("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n;if(!1!==Ot.notify(this,"beforeDatasetsDraw",[e])){for(n=(t=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(t[n],e);Ot.notify(this,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n={meta:e,index:e.index,easingValue:t};!1!==Ot.notify(this,"beforeDatasetDraw",[n])&&(e.controller.draw(t),Ot.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,n={tooltip:t,easingValue:e};!1!==Ot.notify(this,"beforeTooltipDraw",[n])&&(t.draw(),Ot.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return nt.modes.single(this,e)},getElementsAtEvent:function(e){return nt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return nt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=nt.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return nt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var n=t._meta[this.id];return n||(n=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t.order||0,index:e}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,r=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);r&&(n.unbindEvents(),F.canvas.clear(n),Mt.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Ot.notify(n,"destroy"),delete Qt.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Ht({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};F.each(e.options.events,function(r){Mt.addEventListener(e,r,n),t[r]=n}),e.options.responsive&&(n=function(){e.resize()},Mt.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,F.each(t,function(t,n){Mt.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var r,a,o,i=n?"set":"remove";for(a=0,o=e.length;a<o;++a)(r=e[a])&&this.getDatasetMeta(r._datasetIndex).controller[i+"HoverStyle"](r);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+i+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==Ot.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);n&&(r=n._start?n.handleEvent(e):r|n.handleEvent(e)),Ot.notify(t,"afterEvent",[e]);var a=t._bufferedRequest;return a?t.render(a):r&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,r=n.options||{},a=r.hover;return n.lastActive=n.lastActive||[],"mouseout"===e.type?n.active=[]:n.active=n.getElementsAtEventForMode(e,a.mode,a),F.callback(r.onHover||r.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||r.onClick&&r.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,a.mode,!1),n.active.length&&a.mode&&n.updateHoverStyle(n.active,a.mode,!0),t=!F.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),Qt.instances={};var Xt=Qt;Qt.Controller=Qt,Qt.types={},F.configMerge=Wt,F.scaleMerge=qt;function Jt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Zt(e){this.options=e||{}}F.extend(Zt.prototype,{formats:Jt,parse:Jt,format:Jt,add:Jt,diff:Jt,startOf:Jt,endOf:Jt,_create:function(e){return e}}),Zt.override=function(e){F.extend(Zt.prototype,e)};var en={_date:Zt},tn={formatters:{values:function(e){return F.isArray(e)?e:""+e},linear:function(e,t,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&e!==Math.floor(e)&&(r=e-Math.floor(e));var a=F.log10(Math.abs(r)),o="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var i=F.log10(Math.abs(e)),s=Math.floor(i)-Math.floor(a);s=Math.max(Math.min(s,20),0),o=e.toExponential(s)}else{var c=-1*Math.floor(a);c=Math.max(Math.min(c,20),0),o=e.toFixed(c)}else o="0";return o},logarithmic:function(e,t,n){var r=e/Math.pow(10,Math.floor(F.log10(e)));return 0===e?"0":1===r||2===r||5===r||0===t||t===n.length-1?e.toExponential():""}}},nn=F.isArray,rn=F.isNullOrUndef,an=F.valueOrDefault,on=F.valueAtIndexOrDefault;function sn(e,t,n){var r,a=e.getTicks().length,o=Math.min(t,a-1),i=e.getPixelForTick(o),s=e._startPixel,c=e._endPixel;if(!(n&&(r=1===a?Math.max(i-s,c-i):0===t?(e.getPixelForTick(1)-i)/2:(i-e.getPixelForTick(o-1))/2,(i+=o<t?r:-r)<s-1e-6||i>c+1e-6)))return i}function cn(e,t,n,r){var a,o,i,s,c,l,u,d,f,m,p,h,v,g=n.length,b=[],y=[],w=[];for(a=0;a<g;++a){if(s=n[a].label,c=n[a].major?t.major:t.minor,e.font=l=c.string,u=r[l]=r[l]||{data:{},gc:[]},d=c.lineHeight,f=m=0,rn(s)||nn(s)){if(nn(s))for(o=0,i=s.length;o<i;++o)p=s[o],rn(p)||nn(p)||(f=F.measureText(e,u.data,u.gc,f,p),m+=d)}else f=F.measureText(e,u.data,u.gc,f,s),m=d;b.push(f),y.push(m),w.push(d/2)}function x(e){return{width:b[e]||0,height:y[e]||0,offset:w[e]||0}}return function(e,t){F.each(e,function(e){var n,r=e.gc,a=r.length/2;if(a>t){for(n=0;n<a;++n)delete e.data[r[n]];r.splice(0,a)}})}(r,g),h=b.indexOf(Math.max.apply(null,b)),v=y.indexOf(Math.max.apply(null,y)),{first:x(0),last:x(g-1),widest:x(h),highest:x(v)}}function ln(e){return e.drawTicks?e.tickMarkLength:0}function un(e){var t,n;return e.display?(t=F.options._parseFont(e),n=F.options.toPadding(e.padding),t.lineHeight+n.height):0}function dn(e,t){return F.extend(F.options._parseFont({fontFamily:an(t.fontFamily,e.fontFamily),fontSize:an(t.fontSize,e.fontSize),fontStyle:an(t.fontStyle,e.fontStyle),lineHeight:an(t.lineHeight,e.lineHeight)}),{color:F.options.resolve([t.fontColor,e.fontColor,V.global.defaultFontColor])})}function fn(e){var t=dn(e,e.minor);return{minor:t,major:e.major.enabled?dn(e,e.major):t}}function mn(e){var t,n,r,a=[];for(n=0,r=e.length;n<r;++n)void 0!==(t=e[n])._index&&a.push(t);return a}function pn(e,t,n,r){var a,o,i,s,c=an(n,0),l=Math.min(an(r,e.length),e.length),u=0;for(t=Math.ceil(t),r&&(t=(a=r-n)/Math.floor(a/t)),s=c;s<0;)u++,s=Math.round(c+u*t);for(o=Math.max(c,0);o<l;o++)i=e[o],o===s?(i._index=o,u++,s=Math.round(c+u*t)):delete i.label}V._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:tn.formatters.values,minor:{},major:{}}});var hn=K.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){F.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var r,a,o,i,s,c=this,l=c.options.ticks,u=l.sampleSize;if(c.beforeUpdate(),c.maxWidth=e,c.maxHeight=t,c.margins=F.extend({left:0,right:0,top:0,bottom:0},n),c._ticks=null,c.ticks=null,c._labelSizes=null,c._maxLabelLines=0,c.longestLabelWidth=0,c.longestTextCache=c.longestTextCache||{},c._gridLineItems=null,c._labelItems=null,c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),i=c.buildTicks()||[],(!(i=c.afterBuildTicks(i)||i)||!i.length)&&c.ticks)for(i=[],r=0,a=c.ticks.length;r<a;++r)i.push({value:c.ticks[r],major:!1});return c._ticks=i,s=u<i.length,o=c._convertTicksToLabels(s?function(e,t){for(var n=[],r=e.length/t,a=0,o=e.length;a<o;a+=r)n.push(e[Math.floor(a)]);return n}(i,u):i),c._configure(),c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c._ticksToDraw=l.display&&(l.autoSkip||"auto"===l.source)?c._autoSkip(i):i,s&&(o=c._convertTicksToLabels(c._ticksToDraw)),c.ticks=o,c.afterUpdate(),c.minSize},_configure:function(){var e,t,n=this,r=n.options.ticks.reverse;n.isHorizontal()?(e=n.left,t=n.right):(e=n.top,t=n.bottom,r=!r),n._startPixel=e,n._endPixel=t,n._reversePixels=r,n._length=t-e},afterUpdate:function(){F.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){F.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){F.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){F.callback(this.options.beforeDataLimits,[this])},determineDataLimits:F.noop,afterDataLimits:function(){F.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){F.callback(this.options.beforeBuildTicks,[this])},buildTicks:F.noop,afterBuildTicks:function(e){var t=this;return nn(e)&&e.length?F.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=F.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){F.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){F.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){F.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,n,r,a,o,i,s=this,c=s.options,l=c.ticks,u=s.getTicks().length,d=l.minRotation||0,f=l.maxRotation,m=d;!s._isVisible()||!l.display||d>=f||u<=1||!s.isHorizontal()?s.labelRotation=d:(t=(e=s._getLabelSizes()).widest.width,n=e.highest.height-e.highest.offset,r=Math.min(s.maxWidth,s.chart.width-t),t+6>(a=c.offset?s.maxWidth/u:r/(u-1))&&(a=r/(u-(c.offset?.5:1)),o=s.maxHeight-ln(c.gridLines)-l.padding-un(c.scaleLabel),i=Math.sqrt(t*t+n*n),m=F.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/a,1)),Math.asin(Math.min(o/i,1))-Math.asin(n/i))),m=Math.max(d,Math.min(f,m))),s.labelRotation=m)},afterCalculateTickRotation:function(){F.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){F.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,r=e.options,a=r.ticks,o=r.scaleLabel,i=r.gridLines,s=e._isVisible(),c="bottom"===r.position,l=e.isHorizontal();if(l?t.width=e.maxWidth:s&&(t.width=ln(i)+un(o)),l?s&&(t.height=ln(i)+un(o)):t.height=e.maxHeight,a.display&&s){var u=fn(a),d=e._getLabelSizes(),f=d.first,m=d.last,p=d.widest,h=d.highest,v=.4*u.minor.lineHeight,g=a.padding;if(l){var b=0!==e.labelRotation,y=F.toRadians(e.labelRotation),w=Math.cos(y),x=Math.sin(y),k=x*p.width+w*(h.height-(b?h.offset:0))+(b?0:v);t.height=Math.min(e.maxHeight,t.height+k+g);var _,S,C=e.getPixelForTick(0)-e.left,N=e.right-e.getPixelForTick(e.getTicks().length-1);b?(_=c?w*f.width+x*f.offset:x*(f.height-f.offset),S=c?x*(m.height-m.offset):w*m.width+x*m.offset):(_=f.width/2,S=m.width/2),e.paddingLeft=Math.max((_-C)*e.width/(e.width-C),0)+3,e.paddingRight=Math.max((S-N)*e.width/(e.width-N),0)+3}else{var T=a.mirror?0:p.width+g+v;t.width=Math.min(e.maxWidth,t.width+T),e.paddingTop=f.height/2,e.paddingBottom=m.height/2}}e.handleMargins(),l?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){F.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(rn(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,n,r,a=this;for(a.ticks=e.map(function(e){return e.value}),a.beforeTickToLabelConversion(),t=a.convertTicksToLabels(e)||a.ticks,a.afterTickToLabelConversion(),n=0,r=e.length;n<r;++n)e[n].label=t[n];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=cn(e.ctx,fn(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,r,a;return nn(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),r=Math.min(t,n),a=Math.max(t,n)):(t=void 0,n=e=+this.getRightValue(e),r=e,a=e),{min:r,max:a,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:F.noop,getPixelForValue:F.noop,getValueForPixel:F.noop,getPixelForTick:function(e){var t=this.options.offset,n=this._ticks.length,r=1/Math.max(n-(t?0:1),1);return e<0||e>n-1?null:this.getPixelForDecimal(e*r+(t?r/2:0))},getPixelForDecimal:function(e){return this._reversePixels&&(e=1-e),this._startPixel+e*this._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,n,r,a,o=this.options.ticks,i=this._length,s=o.maxTicksLimit||i/this._tickSize()+1,c=o.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(e):[],l=c.length,u=c[0],d=c[l-1];if(l>s)return function(e,t,n){var r,a,o=0,i=t[0];for(n=Math.ceil(n),r=0;r<e.length;r++)a=e[r],r===i?(a._index=r,i=t[++o*n]):delete a.label}(e,c,l/s),mn(e);if(r=function(e,t,n,r){var a,o,i,s,c=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),l=(t.length-1)/r;if(!c)return Math.max(l,1);for(i=0,s=(a=F.math._factorize(c)).length-1;i<s;i++)if((o=a[i])>l)return o;return Math.max(l,1)}(c,e,0,s),l>0){for(t=0,n=l-1;t<n;t++)pn(e,r,c[t],c[t+1]);return a=l>1?(d-u)/(l-1):null,pn(e,r,F.isNullOrUndef(a)?0:u-a,u),pn(e,r,d,F.isNullOrUndef(a)?e.length:d+a),mn(e)}return pn(e,r),mn(e)},_tickSize:function(){var e=this.options.ticks,t=F.toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,i=a?a.widest.width+o:0,s=a?a.highest.height+o:0;return this.isHorizontal()?s*n>i*r?i/n:s/r:s*r<i*n?s/n:i/r},_isVisible:function(){var e,t,n,r=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(e=0,t=r.data.datasets.length;e<t;++e)if(r.isDatasetVisible(e)&&((n=r.getDatasetMeta(e)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(e){var t,n,r,a,o,i,s,c,l,u,d,f,m,p,h,v,g,b=this,y=b.chart,w=b.options,x=w.gridLines,k=w.position,_=x.offsetGridLines,S=b.isHorizontal(),C=b._ticksToDraw,N=C.length+(_?1:0),T=ln(x),D=[],I=x.drawBorder?on(x.lineWidth,0,0):0,M=I/2,O=F._alignPixel,A=function(e){return O(y,e,I)};for("top"===k?(t=A(b.bottom),s=b.bottom-T,l=t-M,d=A(e.top)+M,m=e.bottom):"bottom"===k?(t=A(b.top),d=e.top,m=A(e.bottom)-M,s=t+M,l=b.top+T):"left"===k?(t=A(b.right),i=b.right-T,c=t-M,u=A(e.left)+M,f=e.right):(t=A(b.left),u=e.left,f=A(e.right)-M,i=t+M,c=b.left+T),n=0;n<N;++n)r=C[n]||{},rn(r.label)&&n<C.length||(n===b.zeroLineIndex&&w.offset===_?(p=x.zeroLineWidth,h=x.zeroLineColor,v=x.zeroLineBorderDash||[],g=x.zeroLineBorderDashOffset||0):(p=on(x.lineWidth,n,1),h=on(x.color,n,"rgba(0,0,0,0.1)"),v=x.borderDash||[],g=x.borderDashOffset||0),void 0!==(a=sn(b,r._index||n,_))&&(o=O(y,a,p),S?i=c=u=f=o:s=l=d=m=o,D.push({tx1:i,ty1:s,tx2:c,ty2:l,x1:u,y1:d,x2:f,y2:m,width:p,color:h,borderDash:v,borderDashOffset:g})));return D.ticksLength=N,D.borderValue=t,D},_computeLabelItems:function(){var e,t,n,r,a,o,i,s,c,l,u,d,f=this,m=f.options,p=m.ticks,h=m.position,v=p.mirror,g=f.isHorizontal(),b=f._ticksToDraw,y=fn(p),w=p.padding,x=ln(m.gridLines),k=-F.toRadians(f.labelRotation),_=[];for("top"===h?(o=f.bottom-x-w,i=k?"left":"center"):"bottom"===h?(o=f.top+x+w,i=k?"right":"center"):"left"===h?(a=f.right-(v?0:x)-w,i=v?"left":"right"):(a=f.left+(v?0:x)+w,i=v?"right":"left"),e=0,t=b.length;e<t;++e)r=(n=b[e]).label,rn(r)||(s=f.getPixelForTick(n._index||e)+p.labelOffset,l=(c=n.major?y.major:y.minor).lineHeight,u=nn(r)?r.length:1,g?(a=s,d="top"===h?((k?1:.5)-u)*l:(k?0:.5)*l):(o=s,d=(1-u)*l/2),_.push({x:a,y:o,rotation:k,label:r,font:c,textOffset:d,textAlign:i}));return _},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var r,a,o,i,s,c=t.ctx,l=t.chart,u=F._alignPixel,d=n.drawBorder?on(n.lineWidth,0,0):0,f=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(o=0,i=f.length;o<i;++o)r=(s=f[o]).width,a=s.color,r&&a&&(c.save(),c.lineWidth=r,c.strokeStyle=a,c.setLineDash&&(c.setLineDash(s.borderDash),c.lineDashOffset=s.borderDashOffset),c.beginPath(),n.drawTicks&&(c.moveTo(s.tx1,s.ty1),c.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(c.moveTo(s.x1,s.y1),c.lineTo(s.x2,s.y2)),c.stroke(),c.restore());if(d){var m,p,h,v,g=d,b=on(n.lineWidth,f.ticksLength-1,1),y=f.borderValue;t.isHorizontal()?(m=u(l,t.left,g)-g/2,p=u(l,t.right,b)+b/2,h=v=y):(h=u(l,t.top,g)-g/2,v=u(l,t.bottom,b)+b/2,m=p=y),c.lineWidth=d,c.strokeStyle=on(n.color,0),c.beginPath(),c.moveTo(m,h),c.lineTo(p,v),c.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,n,r,a,o,i,s,c,l=e.ctx,u=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,r=u.length;t<r;++t){if(i=(o=u[t]).font,l.save(),l.translate(o.x,o.y),l.rotate(o.rotation),l.font=i.string,l.fillStyle=i.color,l.textBaseline="middle",l.textAlign=o.textAlign,s=o.label,c=o.textOffset,nn(s))for(n=0,a=s.length;n<a;++n)l.fillText(""+s[n],0,c),c+=i.lineHeight;else l.fillText(s,0,c);l.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,r=n.scaleLabel;if(r.display){var a,o,i=an(r.fontColor,V.global.defaultFontColor),s=F.options._parseFont(r),c=F.options.toPadding(r.padding),l=s.lineHeight/2,u=n.position,d=0;if(e.isHorizontal())a=e.left+e.width/2,o="bottom"===u?e.bottom-l-c.bottom:e.top+l+c.top;else{var f="left"===u;a=f?e.left+l+c.top:e.right-l-c.top,o=e.top+e.height/2,d=f?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(a,o),t.rotate(d),t.textAlign="center",t.textBaseline="middle",t.fillStyle=i,t.font=s.string,t.fillText(r.labelString,0,0),t.restore()}},draw:function(e){this._isVisible()&&(this._drawGrid(e),this._drawTitle(),this._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,r=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==r&&e.draw===e._draw?[{z:r,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(r){return(!e||r.type===e)&&(n?r.xAxisID===t.id:r.yAxisID===t.id)})}});hn.prototype._draw=hn.prototype.draw;var vn=hn,gn=F.isNullOrUndef,bn=vn.extend({determineDataLimits:function(){var e,t=this,n=t._getLabels(),r=t.options.ticks,a=r.min,o=r.max,i=0,s=n.length-1;void 0!==a&&(e=n.indexOf(a))>=0&&(i=e),void 0!==o&&(e=n.indexOf(o))>=0&&(s=e),t.minIndex=i,t.maxIndex=s,t.min=n[i],t.max=n[s]},buildTicks:function(){var e=this._getLabels(),t=this.minIndex,n=this.maxIndex;this.ticks=0===t&&n===e.length-1?e:e.slice(t,n+1)},getLabelForIndex:function(e,t){var n=this.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[t].data[e]):this._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;vn.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var r,a,o,i=this;return gn(t)||gn(n)||(e=i.chart.data.datasets[n].data[t]),gn(e)||(r=i.isHorizontal()?e.x:e.y),(void 0!==r||void 0!==e&&isNaN(t))&&(a=i._getLabels(),e=F.valueOrDefault(r,e),t=-1!==(o=a.indexOf(e))?o:t,isNaN(t)&&(t=e)),i.getPixelForDecimal((t-i._startValue)/i._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange);return Math.min(Math.max(t,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),yn={position:"bottom"};bn._defaults=yn;var wn=F.noop,xn=F.isNullOrUndef;var kn=vn.extend({getRightValue:function(e){return"string"==typeof e?+e:vn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=F.sign(e.min),r=F.sign(e.max);n<0&&r<0?e.max=0:n>0&&r>0&&(e.min=0)}var a=void 0!==t.min||void 0!==t.suggestedMin,o=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),a!==o&&e.min>=e.max&&(a?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,n=t.stepSize,r=t.maxTicksLimit;return n?e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(e=this._computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:wn,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,precision:t.precision,stepSize:F.valueOrDefault(t.fixedStepSize,t.stepSize)},a=e.ticks=function(e,t){var n,r,a,o,i=[],s=e.stepSize,c=s||1,l=e.maxTicks-1,u=e.min,d=e.max,f=e.precision,m=t.min,p=t.max,h=F.niceNum((p-m)/l/c)*c;if(h<1e-14&&xn(u)&&xn(d))return[m,p];(o=Math.ceil(p/h)-Math.floor(m/h))>l&&(h=F.niceNum(o*h/l/c)*c),s||xn(f)?n=Math.pow(10,F._decimalPlaces(h)):(n=Math.pow(10,f),h=Math.ceil(h*n)/n),r=Math.floor(m/h)*h,a=Math.ceil(p/h)*h,s&&(!xn(u)&&F.almostWhole(u/h,h/1e3)&&(r=u),!xn(d)&&F.almostWhole(d/h,h/1e3)&&(a=d)),o=(a-r)/h,o=F.almostEquals(o,Math.round(o),h/1e3)?Math.round(o):Math.ceil(o),r=Math.round(r*n)/n,a=Math.round(a*n)/n,i.push(xn(u)?r:u);for(var v=1;v<o;++v)i.push(Math.round((r+v*h)*n)/n);return i.push(xn(d)?a:d),i}(r,e);e.handleDirectionalChanges(),e.max=F.max(a),e.min=F.min(a),t.reverse?(a.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),vn.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,n=t.getTicks(),r=t.min,a=t.max;vn.prototype._configure.call(t),t.options.offset&&n.length&&(r-=e=(a-r)/Math.max(n.length-1,1)/2,a+=e),t._startValue=r,t._endValue=a,t._valueRange=a-r}}),_n={position:"left",ticks:{callback:tn.formatters.linear}};function Sn(e,t,n,r){var a,o,i=e.options,s=function(e,t,n){var r=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[r]&&(e[r]={pos:[],neg:[]}),e[r]}(t,i.stacked,n),c=s.pos,l=s.neg,u=r.length;for(a=0;a<u;++a)o=e._parseValue(r[a]),isNaN(o.min)||isNaN(o.max)||n.data[a].hidden||(c[a]=c[a]||0,l[a]=l[a]||0,i.relativePoints?c[a]=100:o.min<0||o.max<0?l[a]+=o.min:c[a]+=o.max)}function Cn(e,t,n){var r,a,o=n.length;for(r=0;r<o;++r)a=e._parseValue(n[r]),isNaN(a.min)||isNaN(a.max)||t.data[r].hidden||(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}var Nn=kn.extend({determineDataLimits:function(){var e,t,n,r,a=this,o=a.options,i=a.chart.data.datasets,s=a._getMatchingVisibleMetas(),c=o.stacked,l={},u=s.length;if(a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,void 0===c)for(e=0;!c&&e<u;++e)c=void 0!==(t=s[e]).stack;for(e=0;e<u;++e)n=i[(t=s[e]).index].data,c?Sn(a,l,t,n):Cn(a,t,n);F.each(l,function(e){r=e.pos.concat(e.neg),a.min=Math.min(a.min,F.min(r)),a.max=Math.max(a.max,F.max(r))}),a.min=F.isFinite(a.min)&&!isNaN(a.min)?a.min:0,a.max=F.isFinite(a.max)&&!isNaN(a.max)?a.max:1,a.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=F.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){return this.getPixelForDecimal((+this.getRightValue(e)-this._startValue)/this._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),Tn=_n;Nn._defaults=Tn;var Dn=F.valueOrDefault,In=F.math.log10;var Mn={position:"left",ticks:{callback:tn.formatters.logarithmic}};function On(e,t){return F.isFinite(e)&&e>=0?e:t}var An=vn.extend({determineDataLimits:function(){var e,t,n,r,a,o,i=this,s=i.options,c=i.chart,l=c.data.datasets,u=i.isHorizontal();function d(e){return u?e.xAxisID===i.id:e.yAxisID===i.id}i.min=Number.POSITIVE_INFINITY,i.max=Number.NEGATIVE_INFINITY,i.minNotZero=Number.POSITIVE_INFINITY;var f=s.stacked;if(void 0===f)for(e=0;e<l.length;e++)if(t=c.getDatasetMeta(e),c.isDatasetVisible(e)&&d(t)&&void 0!==t.stack){f=!0;break}if(s.stacked||f){var m={};for(e=0;e<l.length;e++){var p=[(t=c.getDatasetMeta(e)).type,void 0===s.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(c.isDatasetVisible(e)&&d(t))for(void 0===m[p]&&(m[p]=[]),a=0,o=(r=l[e].data).length;a<o;a++){var h=m[p];n=i._parseValue(r[a]),isNaN(n.min)||isNaN(n.max)||t.data[a].hidden||n.min<0||n.max<0||(h[a]=h[a]||0,h[a]+=n.max)}}F.each(m,function(e){if(e.length>0){var t=F.min(e),n=F.max(e);i.min=Math.min(i.min,t),i.max=Math.max(i.max,n)}})}else for(e=0;e<l.length;e++)if(t=c.getDatasetMeta(e),c.isDatasetVisible(e)&&d(t))for(a=0,o=(r=l[e].data).length;a<o;a++)n=i._parseValue(r[a]),isNaN(n.min)||isNaN(n.max)||t.data[a].hidden||n.min<0||n.max<0||(i.min=Math.min(n.min,i.min),i.max=Math.max(n.max,i.max),0!==n.min&&(i.minNotZero=Math.min(n.min,i.minNotZero)));i.min=F.isFinite(i.min)?i.min:null,i.max=F.isFinite(i.max)?i.max:null,i.minNotZero=F.isFinite(i.minNotZero)?i.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=On(t.min,e.min),e.max=On(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(In(e.min))-1),e.max=Math.pow(10,Math.floor(In(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(In(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(In(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(In(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),r={min:On(t.min),max:On(t.max)},a=e.ticks=function(e,t){var n,r,a=[],o=Dn(e.min,Math.pow(10,Math.floor(In(t.min)))),i=Math.floor(In(t.max)),s=Math.ceil(t.max/Math.pow(10,i));0===o?(n=Math.floor(In(t.minNotZero)),r=Math.floor(t.minNotZero/Math.pow(10,n)),a.push(o),o=r*Math.pow(10,n)):(n=Math.floor(In(o)),r=Math.floor(o/Math.pow(10,n)));var c=n<0?Math.pow(10,Math.abs(n)):1;do{a.push(o),10==++r&&(r=1,c=++n>=0?1:c),o=Math.round(r*Math.pow(10,n)*c)/c}while(n<i||n===i&&r<s);var l=Dn(e.max,o);return a.push(l),a}(r,e);e.max=F.max(a),e.min=F.min(a),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),vn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(In(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;vn.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=Dn(e.options.ticks.fontSize,V.global.defaultFontSize)/e._length),e._startValue=In(t),e._valueOffset=n,e._valueRange=(In(e.max)-In(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(n=(In(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}}),Ln=Mn;An._defaults=Ln;var En=F.valueOrDefault,zn=F.valueAtIndexOrDefault,Rn=F.options.resolve,Vn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:tn.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Bn(e){var t=e.ticks;return t.display&&e.display?En(t.fontSize,V.global.defaultFontSize)+2*t.backdropPaddingY:0}function $n(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function Un(e){return 0===e||180===e?"center":e<180?"left":"right"}function Pn(e,t,n,r){var a,o,i=n.y+r/2;if(F.isArray(t))for(a=0,o=t.length;a<o;++a)e.fillText(t[a],n.x,i),i+=r;else e.fillText(t,n.x,i)}function Fn(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function Hn(e){return F.isNumber(e)?e:0}var jn=kn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Bn(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;F.each(t.data.datasets,function(a,o){if(t.isDatasetVisible(o)){var i=t.getDatasetMeta(o);F.each(a.data,function(t,a){var o=+e.getRightValue(t);isNaN(o)||i.data[a].hidden||(n=Math.min(o,n),r=Math.max(o,r))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=r===Number.NEGATIVE_INFINITY?0:r,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Bn(this.options))},convertTicksToLabels:function(){var e=this;kn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=F.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,n,r,a=F.options._parseFont(e.options.pointLabels),o={l:0,r:e.width,t:0,b:e.height-e.paddingTop},i={};e.ctx.font=a.string,e._pointLabelSizes=[];var s,c,l,u=e.chart.data.labels.length;for(t=0;t<u;t++){r=e.getPointPosition(t,e.drawingArea+5),s=e.ctx,c=a.lineHeight,l=e.pointLabels[t],n=F.isArray(l)?{w:F.longestText(s,s.font,l),h:l.length*c}:{w:s.measureText(l).width,h:c},e._pointLabelSizes[t]=n;var d=e.getIndexAngle(t),f=F.toDegrees(d)%360,m=$n(f,r.x,n.w,0,180),p=$n(f,r.y,n.h,90,270);m.start<o.l&&(o.l=m.start,i.l=d),m.end>o.r&&(o.r=m.end,i.r=d),p.start<o.t&&(o.t=p.start,i.t=d),p.end>o.b&&(o.b=p.end,i.b=d)}e.setReductions(e.drawingArea,o,i)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var r=this,a=t.l/Math.sin(n.l),o=Math.max(t.r-r.width,0)/Math.sin(n.r),i=-t.t/Math.cos(n.t),s=-Math.max(t.b-(r.height-r.paddingTop),0)/Math.cos(n.b);a=Hn(a),o=Hn(o),i=Hn(i),s=Hn(s),r.drawingArea=Math.min(Math.floor(e-(a+o)/2),Math.floor(e-(i+s)/2)),r.setCenterPoint(a,o,i,s)},setCenterPoint:function(e,t,n,r){var a=this,o=a.width-t-a.drawingArea,i=e+a.drawingArea,s=n+a.drawingArea,c=a.height-a.paddingTop-r-a.drawingArea;a.xCenter=Math.floor((i+o)/2+a.left),a.yCenter=Math.floor((s+c)/2+a.top+a.paddingTop)},getIndexAngle:function(e){var t=this.chart,n=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(F.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this.min,n=this.max;return this.getPointPositionForValue(e||0,this.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},_drawGrid:function(){var e,t,n,r=this,a=r.ctx,o=r.options,i=o.gridLines,s=o.angleLines,c=En(s.lineWidth,i.lineWidth),l=En(s.color,i.color);if(o.pointLabels.display&&function(e){var t=e.ctx,n=e.options,r=n.pointLabels,a=Bn(n),o=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),i=F.options._parseFont(r);t.save(),t.font=i.string,t.textBaseline="middle";for(var s=e.chart.data.labels.length-1;s>=0;s--){var c=0===s?a/2:0,l=e.getPointPosition(s,o+c+5),u=zn(r.fontColor,s,V.global.defaultFontColor);t.fillStyle=u;var d=e.getIndexAngle(s),f=F.toDegrees(d);t.textAlign=Un(f),Fn(f,e._pointLabelSizes[s],l),Pn(t,e.pointLabels[s],l,i.lineHeight)}t.restore()}(r),i.display&&F.each(r.ticks,function(e,n){0!==n&&(t=r.getDistanceFromCenterForValue(r.ticksAsNumbers[n]),function(e,t,n,r){var a,o=e.ctx,i=t.circular,s=e.chart.data.labels.length,c=zn(t.color,r-1),l=zn(t.lineWidth,r-1);if((i||s)&&c&&l){if(o.save(),o.strokeStyle=c,o.lineWidth=l,o.setLineDash&&(o.setLineDash(t.borderDash||[]),o.lineDashOffset=t.borderDashOffset||0),o.beginPath(),i)o.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{a=e.getPointPosition(0,n),o.moveTo(a.x,a.y);for(var u=1;u<s;u++)a=e.getPointPosition(u,n),o.lineTo(a.x,a.y)}o.closePath(),o.stroke(),o.restore()}}(r,i,t,n))}),s.display&&c&&l){for(a.save(),a.lineWidth=c,a.strokeStyle=l,a.setLineDash&&(a.setLineDash(Rn([s.borderDash,i.borderDash,[]])),a.lineDashOffset=Rn([s.borderDashOffset,i.borderDashOffset,0])),e=r.chart.data.labels.length-1;e>=0;e--)t=r.getDistanceFromCenterForValue(o.ticks.reverse?r.min:r.max),n=r.getPointPosition(e,t),a.beginPath(),a.moveTo(r.xCenter,r.yCenter),a.lineTo(n.x,n.y),a.stroke();a.restore()}},_drawLabels:function(){var e=this,t=e.ctx,n=e.options.ticks;if(n.display){var r,a,o=e.getIndexAngle(0),i=F.options._parseFont(n),s=En(n.fontColor,V.global.defaultFontColor);t.save(),t.font=i.string,t.translate(e.xCenter,e.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",F.each(e.ticks,function(o,c){(0!==c||n.reverse)&&(r=e.getDistanceFromCenterForValue(e.ticksAsNumbers[c]),n.showLabelBackdrop&&(a=t.measureText(o).width,t.fillStyle=n.backdropColor,t.fillRect(-a/2-n.backdropPaddingX,-r-i.size/2-n.backdropPaddingY,a+2*n.backdropPaddingX,i.size+2*n.backdropPaddingY)),t.fillStyle=s,t.fillText(o,0,-r))}),t.restore()}},_drawTitle:F.noop}),qn=Vn;jn._defaults=qn;var Wn=F._deprecated,Yn=F.options.resolve,Gn=F.valueOrDefault,Kn=Number.MIN_SAFE_INTEGER||-9007199254740991,Qn=Number.MAX_SAFE_INTEGER||9007199254740991,Xn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Jn=Object.keys(Xn);function Zn(e,t){return e-t}function er(e){return F.valueOrDefault(e.time.min,e.ticks.min)}function tr(e){return F.valueOrDefault(e.time.max,e.ticks.max)}function nr(e,t,n,r){var a=function(e,t,n){for(var r,a,o,i=0,s=e.length-1;i>=0&&i<=s;){if(a=e[(r=i+s>>1)-1]||null,o=e[r],!a)return{lo:null,hi:o};if(o[t]<n)i=r+1;else{if(!(a[t]>n))return{lo:a,hi:o};s=r-1}}return{lo:o,hi:null}}(e,t,n),o=a.lo?a.hi?a.lo:e[e.length-2]:e[0],i=a.lo?a.hi?a.hi:e[e.length-1]:e[1],s=i[t]-o[t],c=s?(n-o[t])/s:0,l=(i[r]-o[r])*c;return o[r]+l}function rr(e,t){var n=e._adapter,r=e.options.time,a=r.parser,o=a||r.format,i=t;return"function"==typeof a&&(i=a(i)),F.isFinite(i)||(i="string"==typeof o?n.parse(i,o):n.parse(i)),null!==i?+i:(a||"function"!=typeof o||(i=o(t),F.isFinite(i)||(i=n.parse(i))),i)}function ar(e,t){if(F.isNullOrUndef(t))return null;var n=e.options.time,r=rr(e,e.getRightValue(t));return null===r?r:(n.round&&(r=+e._adapter.startOf(r,n.round)),r)}function or(e,t,n,r){var a,o,i,s=Jn.length;for(a=Jn.indexOf(e);a<s-1;++a)if(i=(o=Xn[Jn[a]]).steps?o.steps:Qn,o.common&&Math.ceil((n-t)/(i*o.size))<=r)return Jn[a];return Jn[s-1]}function ir(e,t,n){var r,a,o=[],i={},s=t.length;for(r=0;r<s;++r)i[a=t[r]]=r,o.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){var a,o,i=e._adapter,s=+i.startOf(t[0].value,r),c=t[t.length-1].value;for(a=s;a<=c;a=+i.add(a,1,r))(o=n[a])>=0&&(t[o].major=!0);return t}(e,o,i,n):o}var sr=vn.extend({initialize:function(){this.mergeTicksOptions(),vn.prototype.initialize.call(this)},update:function(){var e=this.options,t=e.time||(e.time={}),n=this._adapter=new en._date(e.adapters.date);return Wn("time scale",t.format,"time.format","time.parser"),Wn("time scale",t.min,"time.min","ticks.min"),Wn("time scale",t.max,"time.max","ticks.max"),F.mergeIf(t.displayFormats,n.formats()),vn.prototype.update.apply(this,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),vn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,r,a,o,i,s=this,c=s.chart,l=s._adapter,u=s.options,d=u.time.unit||"day",f=Qn,m=Kn,p=[],h=[],v=[],g=s._getLabels();for(e=0,n=g.length;e<n;++e)v.push(ar(s,g[e]));for(e=0,n=(c.data.datasets||[]).length;e<n;++e)if(c.isDatasetVisible(e))if(a=c.data.datasets[e].data,F.isObject(a[0]))for(h[e]=[],t=0,r=a.length;t<r;++t)o=ar(s,a[t]),p.push(o),h[e][t]=o;else h[e]=v.slice(0),i||(p=p.concat(v),i=!0);else h[e]=[];v.length&&(f=Math.min(f,v[0]),m=Math.max(m,v[v.length-1])),p.length&&(p=n>1?function(e){var t,n,r,a={},o=[];for(t=0,n=e.length;t<n;++t)a[r=e[t]]||(a[r]=!0,o.push(r));return o}(p).sort(Zn):p.sort(Zn),f=Math.min(f,p[0]),m=Math.max(m,p[p.length-1])),f=ar(s,er(u))||f,m=ar(s,tr(u))||m,f=f===Qn?+l.startOf(Date.now(),d):f,m=m===Kn?+l.endOf(Date.now(),d)+1:m,s.min=Math.min(f,m),s.max=Math.max(f+1,m),s._table=[],s._timestamps={data:p,datasets:h,labels:v}},buildTicks:function(){var e,t,n,r=this,a=r.min,o=r.max,i=r.options,s=i.ticks,c=i.time,l=r._timestamps,u=[],d=r.getLabelCapacity(a),f=s.source,m=i.distribution;for(l="data"===f||"auto"===f&&"series"===m?l.data:"labels"===f?l.labels:function(e,t,n,r){var a,o=e._adapter,i=e.options,s=i.time,c=s.unit||or(s.minUnit,t,n,r),l=Yn([s.stepSize,s.unitStepSize,1]),u="week"===c&&s.isoWeekday,d=t,f=[];if(u&&(d=+o.startOf(d,"isoWeek",u)),d=+o.startOf(d,u?"day":c),o.diff(n,t,c)>1e5*l)throw t+" and "+n+" are too far apart with stepSize of "+l+" "+c;for(a=d;a<n;a=+o.add(a,l,c))f.push(a);return a!==n&&"ticks"!==i.bounds||f.push(a),f}(r,a,o,d),"ticks"===i.bounds&&l.length&&(a=l[0],o=l[l.length-1]),a=ar(r,er(i))||a,o=ar(r,tr(i))||o,e=0,t=l.length;e<t;++e)(n=l[e])>=a&&n<=o&&u.push(n);return r.min=a,r.max=o,r._unit=c.unit||(s.autoSkip?or(c.minUnit,r.min,r.max,d):function(e,t,n,r,a){var o,i;for(o=Jn.length-1;o>=Jn.indexOf(n);o--)if(i=Jn[o],Xn[i].common&&e._adapter.diff(a,r,i)>=t-1)return i;return Jn[n?Jn.indexOf(n):0]}(r,u.length,c.minUnit,r.min,r.max)),r._majorUnit=s.major.enabled&&"year"!==r._unit?function(e){for(var t=Jn.indexOf(e)+1,n=Jn.length;t<n;++t)if(Xn[Jn[t]].common)return Jn[t]}(r._unit):void 0,r._table=function(e,t,n,r){if("linear"===r||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var a,o,i,s,c,l=[],u=[t];for(a=0,o=e.length;a<o;++a)(s=e[a])>t&&s<n&&u.push(s);for(u.push(n),a=0,o=u.length;a<o;++a)c=u[a+1],i=u[a-1],s=u[a],void 0!==i&&void 0!==c&&Math.round((c+i)/2)===s||l.push({time:s,pos:a/(o-1)});return l}(r._timestamps.data,a,o,m),r._offsets=function(e,t,n,r,a){var o,i,s=0,c=0;return a.offset&&t.length&&(o=nr(e,"time",t[0],"pos"),s=1===t.length?1-o:(nr(e,"time",t[1],"pos")-o)/2,i=nr(e,"time",t[t.length-1],"pos"),c=1===t.length?i:(i-nr(e,"time",t[t.length-2],"pos"))/2),{start:s,end:c,factor:1/(s+1+c)}}(r._table,u,0,0,i),s.reverse&&u.reverse(),ir(r,u,r._majorUnit)},getLabelForIndex:function(e,t){var n=this,r=n._adapter,a=n.chart.data,o=n.options.time,i=a.labels&&e<a.labels.length?a.labels[e]:"",s=a.datasets[t].data[e];return F.isObject(s)&&(i=n.getRightValue(s)),o.tooltipFormat?r.format(rr(n,i),o.tooltipFormat):"string"==typeof i?i:r.format(rr(n,i),o.displayFormats.datetime)},tickFormatFunction:function(e,t,n,r){var a=this._adapter,o=this.options,i=o.time.displayFormats,s=i[this._unit],c=this._majorUnit,l=i[c],u=n[t],d=o.ticks,f=c&&l&&u&&u.major,m=a.format(e,r||(f?l:s)),p=f?d.major:d.minor,h=Yn([p.callback,p.userCallback,d.callback,d.userCallback]);return h?h(m,t,n):m},convertTicksToLabels:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(this.tickFormatFunction(e[t].value,t,e));return r},getPixelForOffset:function(e){var t=this._offsets,n=nr(this._table,"time",e,"pos");return this.getPixelForDecimal((t.start+n)*t.factor)},getPixelForValue:function(e,t,n){var r=null;if(void 0!==t&&void 0!==n&&(r=this._timestamps.datasets[n][t]),null===r&&(r=ar(this,e)),null!==r)return this.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end,r=nr(this._table,"pos",n,"time");return this._adapter._create(r)},_getLabelSize:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=F.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),o=Math.sin(r),i=Gn(t.fontSize,V.global.defaultFontSize);return{w:n*a+i*o,h:n*o+i*a}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,r=n.displayFormats,a=r[n.unit]||r.millisecond,o=t.tickFormatFunction(e,0,ir(t,[e],t._majorUnit),a),i=t._getLabelSize(o),s=Math.floor(t.isHorizontal()?t.width/i.w:t.height/i.h);return t.options.offset&&s--,s>0?s:1}}),cr={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};sr._defaults=cr;var lr={category:bn,linear:Nn,logarithmic:An,radialLinear:jn,time:sr},ur={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};en._date.override("function"==typeof e?{_id:"moment",formats:function(){return ur},parse:function(t,n){return"string"==typeof t&&"string"==typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,r){return e(t).add(n,r).valueOf()},diff:function(t,n,r){return e(t).diff(e(n),r)},startOf:function(t,n,r){return t=e(t),"isoWeek"===n?t.isoWeekday(r).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),V._set("global",{plugins:{filler:{propagate:!0}}});var dr={dataset:function(e){var t=e.fill,n=e.chart,r=n.getDatasetMeta(t),a=r&&n.isDatasetVisible(t)&&r.dataset._children||[],o=a.length||0;return o?function(e,t){return t<o&&a[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,r=t?t.y:null;return F.isArray(t)?function(e,n){return t[n]}:function(e){return{x:null===n?e.x:n,y:null===r?e.y:r}}}};function fr(e,t,n){var r,a=e._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(r=parseFloat(o,10),isFinite(r)&&Math.floor(r)===r)return"-"!==o[0]&&"+"!==o[0]||(r=t+r),!(r===t||r<0||r>=n)&&r;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function mr(e){return(e.el._scale||{}).getPointPositionForValue?function(e){var t,n,r,a,o,i=e.el._scale,s=i.options,c=i.chart.data.labels.length,l=e.fill,u=[];if(!c)return null;for(t=s.ticks.reverse?i.max:i.min,n=s.ticks.reverse?i.min:i.max,r=i.getPointPositionForValue(0,t),a=0;a<c;++a)o="start"===l||"end"===l?i.getPointPositionForValue(a,"start"===l?t:n):i.getBasePosition(a),s.gridLines.circular&&(o.cx=r.x,o.cy=r.y,o.angle=i.getIndexAngle(a)-Math.PI/2),u.push(o);return u}(e):function(e){var t,n=e.el._model||{},r=e.el._scale||{},a=e.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===a?o=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:r.getBasePixel&&(o=r.getBasePixel()),void 0!==o&&null!==o){if(void 0!==o.x&&void 0!==o.y)return o;if(F.isFinite(o))return{x:(t=r.isHorizontal())?o:null,y:t?null:o}}return null}(e)}function pr(e,t,n){var r,a=e[t].fill,o=[t];if(!n)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(r=e[a]))return!1;if(r.visible)return a;o.push(a),a=r.fill}return!1}function hr(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),dr[n](e))}function vr(e){return e&&!e.skip}function gr(e,t,n,r,a){var o,i,s,c;if(r&&a){for(e.moveTo(t[0].x,t[0].y),o=1;o<r;++o)F.canvas.lineTo(e,t[o-1],t[o]);if(void 0===n[0].angle)for(e.lineTo(n[a-1].x,n[a-1].y),o=a-1;o>0;--o)F.canvas.lineTo(e,n[o],n[o-1],!0);else for(i=n[0].cx,s=n[0].cy,c=Math.sqrt(Math.pow(n[0].x-i,2)+Math.pow(n[0].y-s,2)),o=a-1;o>0;--o)e.arc(i,s,c,n[o].angle,n[o-1].angle,!0)}}function br(e,t,n,r,a,o){var i,s,c,l,u,d,f,m,p=t.length,h=r.spanGaps,v=[],g=[],b=0,y=0;for(e.beginPath(),i=0,s=p;i<s;++i)u=n(l=t[c=i%p]._view,c,r),d=vr(l),f=vr(u),o&&void 0===m&&d&&(s=p+(m=i+1)),d&&f?(b=v.push(l),y=g.push(u)):b&&y&&(h?(d&&v.push(l),f&&g.push(u)):(gr(e,v,g,b,y),b=y=0,v=[],g=[]));gr(e,v,g,b,y),e.closePath(),e.fillStyle=a,e.fill()}var yr={id:"filler",afterDatasetsUpdate:function(e,t){var n,r,a,o,i=(e.data.datasets||[]).length,s=t.propagate,c=[];for(r=0;r<i;++r)o=null,(a=(n=e.getDatasetMeta(r)).dataset)&&a._model&&a instanceof xe.Line&&(o={visible:e.isDatasetVisible(r),fill:fr(a,r,i),chart:e,el:a}),n.$filler=o,c.push(o);for(r=0;r<i;++r)(o=c[r])&&(o.fill=pr(c,r,s),o.boundary=mr(o),o.mapper=hr(o))},beforeDatasetsDraw:function(e){var t,n,r,a,o,i,s,c=e._getSortedVisibleDatasetMetas(),l=e.ctx;for(n=c.length-1;n>=0;--n)(t=c[n].$filler)&&t.visible&&(a=(r=t.el)._view,o=r._children||[],i=t.mapper,s=a.backgroundColor||V.global.defaultColor,i&&s&&o.length&&(F.canvas.clipArea(l,e.chartArea),br(l,o,i,a,s,r._loop),F.canvas.unclipArea(l)))}},wr=F.rtl.getRtlAdapter,xr=F.noop,kr=F.valueOrDefault;function _r(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}V._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,r=this.chart,a=r.getDatasetMeta(n);a.hidden=null===a.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},r=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(n){var a=n.controller.getStyle(r?0:void 0);return{text:t[n.index].label,fillStyle:a.backgroundColor,hidden:!e.isDatasetVisible(n.index),lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:a.borderWidth,strokeStyle:a.borderColor,pointStyle:a.pointStyle,rotation:a.rotation,datasetIndex:n.index}},this)}}},legendCallback:function(e){var t,n,r,a=document.createElement("ul"),o=e.data.datasets;for(a.setAttribute("class",e.id+"-legend"),t=0,n=o.length;t<n;t++)(r=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[t].backgroundColor,o[t].label&&r.appendChild(document.createTextNode(o[t].label));return a.outerHTML}});var Sr=K.extend({initialize:function(e){F.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:xr,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:xr,beforeSetDimensions:xr,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:xr,beforeBuildLabels:xr,buildLabels:function(){var e=this,t=e.options.labels||{},n=F.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:xr,beforeFit:xr,fit:function(){var e=this,t=e.options,n=t.labels,r=t.display,a=e.ctx,o=F.options._parseFont(n),i=o.size,s=e.legendHitBoxes=[],c=e.minSize,l=e.isHorizontal();if(l?(c.width=e.maxWidth,c.height=r?10:0):(c.width=r?10:0,c.height=e.maxHeight),r){if(a.font=o.string,l){var u=e.lineWidths=[0],d=0;a.textAlign="left",a.textBaseline="middle",F.each(e.legendItems,function(e,t){var r=_r(n,i)+i/2+a.measureText(e.text).width;(0===t||u[u.length-1]+r+2*n.padding>c.width)&&(d+=i+n.padding,u[u.length-(t>0?0:1)]=0),s[t]={left:0,top:0,width:r,height:i},u[u.length-1]+=r+n.padding}),c.height+=d}else{var f=n.padding,m=e.columnWidths=[],p=e.columnHeights=[],h=n.padding,v=0,g=0;F.each(e.legendItems,function(e,t){var r=_r(n,i)+i/2+a.measureText(e.text).width;t>0&&g+i+2*f>c.height&&(h+=v+n.padding,m.push(v),p.push(g),v=0,g=0),v=Math.max(v,r),g+=i+f,s[t]={left:0,top:0,width:r,height:i}}),h+=v,m.push(v),p.push(g),c.width+=h}e.width=c.width,e.height=c.height}else e.width=c.width=e.height=c.height=0},afterFit:xr,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,r=V.global,a=r.defaultColor,o=r.elements.line,i=e.height,s=e.columnHeights,c=e.width,l=e.lineWidths;if(t.display){var u,d=wr(t.rtl,e.left,e.minSize.width),f=e.ctx,m=kr(n.fontColor,r.defaultFontColor),p=F.options._parseFont(n),h=p.size;f.textAlign=d.textAlign("left"),f.textBaseline="middle",f.lineWidth=.5,f.strokeStyle=m,f.fillStyle=m,f.font=p.string;var v=_r(n,h),g=e.legendHitBoxes,b=function(e,r){switch(t.align){case"start":return n.padding;case"end":return e-r;default:return(e-r+n.padding)/2}},y=e.isHorizontal();u=y?{x:e.left+b(c,l[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+b(i,s[0]),line:0},F.rtl.overrideTextDirection(e.ctx,t.textDirection);var w=h+n.padding;F.each(e.legendItems,function(t,r){var m=f.measureText(t.text).width,p=v+h/2+m,x=u.x,k=u.y;d.setWidth(e.minSize.width),y?r>0&&x+p+n.padding>e.left+e.minSize.width&&(k=u.y+=w,u.line++,x=u.x=e.left+b(c,l[u.line])):r>0&&k+w>e.top+e.minSize.height&&(x=u.x=x+e.columnWidths[u.line]+n.padding,u.line++,k=u.y=e.top+b(i,s[u.line]));var _=d.x(x);!function(e,t,r){if(!(isNaN(v)||v<=0)){f.save();var i=kr(r.lineWidth,o.borderWidth);if(f.fillStyle=kr(r.fillStyle,a),f.lineCap=kr(r.lineCap,o.borderCapStyle),f.lineDashOffset=kr(r.lineDashOffset,o.borderDashOffset),f.lineJoin=kr(r.lineJoin,o.borderJoinStyle),f.lineWidth=i,f.strokeStyle=kr(r.strokeStyle,a),f.setLineDash&&f.setLineDash(kr(r.lineDash,o.borderDash)),n&&n.usePointStyle){var s=v*Math.SQRT2/2,c=d.xPlus(e,v/2),l=t+h/2;F.canvas.drawPoint(f,r.pointStyle,s,c,l,r.rotation)}else f.fillRect(d.leftForLtr(e,v),t,v,h),0!==i&&f.strokeRect(d.leftForLtr(e,v),t,v,h);f.restore()}}(_,k,t),g[r].left=d.leftForLtr(_,g[r].width),g[r].top=k,function(e,t,n,r){var a=h/2,o=d.xPlus(e,v+a),i=t+a;f.fillText(n.text,o,i),n.hidden&&(f.beginPath(),f.lineWidth=2,f.moveTo(o,i),f.lineTo(d.xPlus(o,r),i),f.stroke())}(_,k,t,m),y?u.x+=p+n.padding:u.y+=w}),F.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var n,r,a,o=this;if(e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom)for(a=o.legendHitBoxes,n=0;n<a.length;++n)if(e>=(r=a[n]).left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height)return o.legendItems[n];return null},handleEvent:function(e){var t,n=this,r=n.options,a="mouseup"===e.type?"click":e.type;if("mousemove"===a){if(!r.onHover&&!r.onLeave)return}else{if("click"!==a)return;if(!r.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===a?t&&r.onClick&&r.onClick.call(n,e.native,t):(r.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&r.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),r.onHover&&t&&r.onHover.call(n,e.native,t))}});function Cr(e,t){var n=new Sr({ctx:e.ctx,options:t,chart:e});ft.configure(e,n,t),ft.addBox(e,n),e.legend=n}var Nr={id:"legend",_element:Sr,beforeInit:function(e){var t=e.options.legend;t&&Cr(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(F.mergeIf(t,V.global.legend),n?(ft.configure(e,n,t),n.options=t):Cr(e,t)):n&&(ft.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},Tr=F.noop;V._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Dr=K.extend({initialize:function(e){F.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Tr,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:Tr,beforeSetDimensions:Tr,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Tr,beforeBuildLabels:Tr,buildLabels:Tr,afterBuildLabels:Tr,beforeFit:Tr,fit:function(){var e,t=this,n=t.options,r=t.minSize={},a=t.isHorizontal();n.display?(e=(F.isArray(n.text)?n.text.length:1)*F.options._parseFont(n).lineHeight+2*n.padding,t.width=r.width=a?t.maxWidth:e,t.height=r.height=a?e:t.maxHeight):t.width=r.width=t.height=r.height=0},afterFit:Tr,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var r,a,o,i=F.options._parseFont(n),s=i.lineHeight,c=s/2+n.padding,l=0,u=e.top,d=e.left,f=e.bottom,m=e.right;t.fillStyle=F.valueOrDefault(n.fontColor,V.global.defaultFontColor),t.font=i.string,e.isHorizontal()?(a=d+(m-d)/2,o=u+c,r=m-d):(a="left"===n.position?d+c:m-c,o=u+(f-u)/2,r=f-u,l=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(a,o),t.rotate(l),t.textAlign="center",t.textBaseline="middle";var p=n.text;if(F.isArray(p))for(var h=0,v=0;v<p.length;++v)t.fillText(p[v],0,h,r),h+=s;else t.fillText(p,0,0,r);t.restore()}}});function Ir(e,t){var n=new Dr({ctx:e.ctx,options:t,chart:e});ft.configure(e,n,t),ft.addBox(e,n),e.titleBlock=n}var Mr={},Or=yr,Ar=Nr,Lr={id:"title",_element:Dr,beforeInit:function(e){var t=e.options.title;t&&Ir(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(F.mergeIf(t,V.global.title),n?(ft.configure(e,n,t),n.options=t):Ir(e,t)):n&&(ft.removeBox(e,n),delete e.titleBlock)}};for(var Er in Mr.filler=Or,Mr.legend=Ar,Mr.title=Lr,Xt.helpers=F,function(){function e(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}function t(e){return void 0!==e&&null!==e&&"none"!==e}function n(n,r,a){var o=document.defaultView,i=F._getParentNode(n),s=o.getComputedStyle(n)[r],c=o.getComputedStyle(i)[r],l=t(s),u=t(c),d=Number.POSITIVE_INFINITY;return l||u?Math.min(l?e(s,n,a):d,u?e(c,i,a):d):"none"}F.where=function(e,t){if(F.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return F.each(e,function(e){t(e)&&n.push(e)}),n},F.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var r=0,a=e.length;r<a;++r)if(t.call(n,e[r],r,e))return r;return-1},F.findNextWhere=function(e,t,n){F.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<e.length;r++){var a=e[r];if(t(a))return a}},F.findPreviousWhere=function(e,t,n){F.isNullOrUndef(n)&&(n=e.length);for(var r=n-1;r>=0;r--){var a=e[r];if(t(a))return a}},F.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},F.almostEquals=function(e,t,n){return Math.abs(e-t)<n},F.almostWhole=function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e},F.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},F.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},F.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},F.toRadians=function(e){return e*(Math.PI/180)},F.toDegrees=function(e){return e*(180/Math.PI)},F._decimalPlaces=function(e){if(F.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},F.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},F.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},F.aliasPixel=function(e){return e%2==0?0:.5},F._alignPixel=function(e,t,n){var r=e.currentDevicePixelRatio,a=n/2;return Math.round((t-a)*r)/r+a},F.splineCurve=function(e,t,n,r){var a=e.skip?t:e,o=t,i=n.skip?t:n,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),c=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)),l=s/(s+c),u=c/(s+c),d=r*(l=isNaN(l)?0:l),f=r*(u=isNaN(u)?0:u);return{previous:{x:o.x-d*(i.x-a.x),y:o.y-d*(i.y-a.y)},next:{x:o.x+f*(i.x-a.x),y:o.y+f*(i.y-a.y)}}},F.EPSILON=Number.EPSILON||1e-14,F.splineCurveMonotone=function(e){var t,n,r,a,o,i,s,c,l,u=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),d=u.length;for(t=0;t<d;++t)if(!(r=u[t]).model.skip){if(n=t>0?u[t-1]:null,(a=t<d-1?u[t+1]:null)&&!a.model.skip){var f=a.model.x-r.model.x;r.deltaK=0!==f?(a.model.y-r.model.y)/f:0}!n||n.model.skip?r.mK=r.deltaK:!a||a.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}for(t=0;t<d-1;++t)r=u[t],a=u[t+1],r.model.skip||a.model.skip||(F.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=a.mK=0:(o=r.mK/r.deltaK,i=a.mK/r.deltaK,(c=Math.pow(o,2)+Math.pow(i,2))<=9||(s=3/Math.sqrt(c),r.mK=o*s*r.deltaK,a.mK=i*s*r.deltaK)));for(t=0;t<d;++t)(r=u[t]).model.skip||(n=t>0?u[t-1]:null,a=t<d-1?u[t+1]:null,n&&!n.model.skip&&(l=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-l,r.model.controlPointPreviousY=r.model.y-l*r.mK),a&&!a.model.skip&&(l=(a.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+l,r.model.controlPointNextY=r.model.y+l*r.mK))},F.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},F.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},F.niceNum=function(e,t){var n=Math.floor(F.log10(e)),r=e/Math.pow(10,n);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},F.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},F.getRelativePosition=function(e,t){var n,r,a=e.originalEvent||e,o=e.target||e.srcElement,i=o.getBoundingClientRect(),s=a.touches;s&&s.length>0?(n=s[0].clientX,r=s[0].clientY):(n=a.clientX,r=a.clientY);var c=parseFloat(F.getStyle(o,"padding-left")),l=parseFloat(F.getStyle(o,"padding-top")),u=parseFloat(F.getStyle(o,"padding-right")),d=parseFloat(F.getStyle(o,"padding-bottom")),f=i.right-i.left-c-u,m=i.bottom-i.top-l-d;return{x:n=Math.round((n-i.left-c)/f*o.width/t.currentDevicePixelRatio),y:r=Math.round((r-i.top-l)/m*o.height/t.currentDevicePixelRatio)}},F.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},F.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},F._calculatePadding=function(e,t,n){return(t=F.getStyle(e,t)).indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},F._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},F.getMaximumWidth=function(e){var t=F._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,r=n-F._calculatePadding(t,"padding-left",n)-F._calculatePadding(t,"padding-right",n),a=F.getConstraintWidth(e);return isNaN(a)?r:Math.min(r,a)},F.getMaximumHeight=function(e){var t=F._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,r=n-F._calculatePadding(t,"padding-top",n)-F._calculatePadding(t,"padding-bottom",n),a=F.getConstraintHeight(e);return isNaN(a)?r:Math.min(r,a)},F.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},F.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var r=e.canvas,a=e.height,o=e.width;r.height=a*n,r.width=o*n,e.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=a+"px",r.style.width=o+"px")}},F.fontString=function(e,t,n){return t+" "+e+"px "+n},F.longestText=function(e,t,n,r){var a=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},o=r.garbageCollect=[],r.font=t),e.font=t;var i,s,c,l,u,d=0,f=n.length;for(i=0;i<f;i++)if(void 0!==(l=n[i])&&null!==l&&!0!==F.isArray(l))d=F.measureText(e,a,o,d,l);else if(F.isArray(l))for(s=0,c=l.length;s<c;s++)void 0===(u=l[s])||null===u||F.isArray(u)||(d=F.measureText(e,a,o,d,u));var m=o.length/2;if(m>n.length){for(i=0;i<m;i++)delete a[o[i]];o.splice(0,m)}return d},F.measureText=function(e,t,n,r,a){var o=t[a];return o||(o=t[a]=e.measureText(a).width,n.push(a)),o>r&&(r=o),r},F.numberOfLabelLines=function(e){var t=1;return F.each(e,function(e){F.isArray(e)&&e.length>t&&(t=e.length)}),t},F.color=_?function(e){return e instanceof CanvasGradient&&(e=V.global.defaultColor),_(e)}:function(e){return console.error("Color.js not found!"),e},F.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:F.color(e).saturate(.5).darken(.1).rgbString()}}(),Xt._adapters=en,Xt.Animation=X,Xt.animationService=J,Xt.controllers=Ke,Xt.DatasetController=re,Xt.defaults=V,Xt.Element=K,Xt.elements=xe,Xt.Interaction=nt,Xt.layouts=ft,Xt.platform=Mt,Xt.plugins=Ot,Xt.Scale=vn,Xt.scaleService=At,Xt.Ticks=tn,Xt.Tooltip=Ht,Xt.helpers.each(lr,function(e,t){Xt.scaleService.registerScaleType(t,e,e._defaults)}),Mr)Mr.hasOwnProperty(Er)&&Xt.plugins.register(Mr[Er]);Xt.platform.initialize();var zr=Xt;return"undefined"!=typeof window&&(window.Chart=Xt),Xt.Chart=Xt,Xt.Legend=Mr.legend._element,Xt.Title=Mr.title._element,Xt.pluginService=Xt.plugins,Xt.PluginBase=Xt.Element.extend({}),Xt.canvasHelpers=Xt.helpers.canvas,Xt.layoutService=Xt.layouts,Xt.LinearScaleBase=kn,Xt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Xt[e]=function(t,n){return new Xt(t,Xt.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),zr},e.exports=r(function(){try{return n("PJh5")}catch(e){}}())},ioQ5:function(e,t,n){n("HpRW")("Set")},itOa:function(e,t){},j1hc:function(e,t){},"j5N+":function(e,t){},jFbC:function(e,t,n){n("Cdx3"),e.exports=n("FeBl").Object.keys},jipU:function(e,t){},jpwL:function(e,t){},"k2Q+":function(e,t){},kAry:function(e,t){},lHA8:function(e,t,n){e.exports={default:n("pPW7"),__esModule:!0}},lh9K:function(e,t,n){"use strict";t.a=function(){return!(!sessionStorage.token||"undefined"===sessionStorage.token)},t.b=function(){return!(!localStorage.shopId||"undefined"===localStorage.shopId)},t.e=function(e){localStorage.removeItem("shopId"),localStorage.removeItem("permissions"),e()},t.d=function(e){localStorage.removeItem("token"),localStorage.removeItem("permissions"),e()},t.c=function(e,t){sessionStorage.token=e.token,localStorage.token=e.token,localStorage.avatar=e.avatar,localStorage.userName=e.userName,t()}},lvet:function(e,t){},"m/OW":function(e,t){!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"===r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},a=function(e){return function(t){return typeof t===e}},o=r("string"),i=r("array"),s=(e=null,function(t){return e===t}),c=a("boolean"),l=a("function"),u=function(e){var t=e.getParam("link_assume_external_targets",!1);return c(t)&&t?1:!o(t)||"http"!==t&&"https"!==t?0:t},d=function(e){return e.getParam("default_link_target")},f=function(e){return e.getParam("target_list",!0)},m=function(e){return e.getParam("rel_list",[],"array")},p=function(e){return e.getParam("allow_unsafe_link_target",!1,"boolean")},h=function(){},v=function(e){return function(){return e}},g=v(!1),b=v(!0),y=function(){return w},w=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e};return{fold:function(e,t){return e()},is:g,isSome:g,isNone:b,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:v(null),getOrUndefined:v(void 0),or:n,orThunk:t,map:y,each:h,bind:y,exists:g,forall:b,filter:y,equals:e,equals_:e,toArray:function(){return[]},toString:v("none()")}}(),x=function(e){var t=v(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:b,isNone:g,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return x(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:w},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(g,function(t){return n(e,t)})}};return a},k={some:x,none:y,from:function(e){return null===e||void 0===e?w:x(e)}},_=Array.prototype.indexOf,S=Array.prototype.push,C=function(e,t){return n=e,r=t,_.call(n,r)>-1;var n,r},N=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t},T=function(e,t){return N(function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var o=e[a];r[a]=t(o,a)}return r}(e,t))},D=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return k.none()},I=function(e,t){return e?k.some(t):k.none()},M=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=function(e){return o(e.value)?e.value:""},A=function(e,t){var n=[];return M.each(e,function(e){var r=function(e){return o(e.text)?e.text:o(e.title)?e.title:""}(e);if(void 0!==e.menu){var a=A(e.menu,t);n.push({text:r,items:a})}else{var i=t(e);n.push({text:r,value:i})}}),n},L=function(e){return void 0===e&&(e=O),function(t){return k.from(t).map(function(t){return A(t,e)})}},E={sanitize:function(e){return L(O)(e)},sanitizeWith:L,createUi:function(e,t){return function(n){return{name:e,type:"listbox",label:t,items:n}}},getValue:O},z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},R=Object.keys,V=Object.hasOwnProperty,B=function(e,t,n,r){return function(e,t){for(var n=R(e),r=0,a=n.length;r<a;r++){var o=n[r];t(e[o],o)}}(e,function(e,a){(t(e,a)?n:r)(e,a)}),{}},$=function(e,t){return V.call(e,t)},U=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),P=function(e){return e&&"a"===e.nodeName.toLowerCase()},F=function(e){return P(e)&&!!q(e)},H=function(e,t){if(e.collapsed)return[];var n=e.cloneContents(),r=new U(n.firstChild,n),a=[],o=n.firstChild;do{t(o)&&a.push(o)}while(o=r.next());return a},j=function(e){return/^\w+:/i.test(e)},q=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},W=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],a=function(e){return e.filter(function(e){return-1===M.inArray(n,e)})},o=t?function(e){return(e=a(e)).length>0?e.concat(n):n}(r):a(r);return o.length>0?function(e){return M.trim(e.sort().join(" "))}(o):""},Y=function(e,t){return t=t||e.selection.getNode(),X(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},G=function(e,t){return function(e){return e.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))},K=function(e){return M.grep(e,F).length>0},Q=function(e){var t=e.schema.getTextInlineElements();return 0===H(e.selection.getRng(),function(e){return 1===e.nodeType&&!P(e)&&!$(t,e.nodeName.toLowerCase())}).length},X=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},J=function(e,t){var n=z({},t);if(!(m(e).length>0)&&!1===p(e)){var r=W(n.rel,"_blank"===n.target);n.rel=r||null}return k.from(n.target).isNone()&&!1===f(e)&&(n.target=d(e)),n.href=function(e,t){return"http"!==t&&"https"!==t||j(e)?e:t+"://"+e}(n.href,u(e)),n},Z=function(e,t,n){var r=e.selection.getNode(),a=Y(e,r),o=J(e,function(e){return t=["title","rel","class","target"],n=function(t,n){return e[n].each(function(e){t[n]=e.length>0?e:null}),t},r={href:e.href},function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(t,function(e){r=n(r,e)}),r;var t,n,r}(n));e.undoManager.transact(function(){n.href===t.href&&t.attach(),a?(e.focus(),function(e,t,n,r){n.each(function(e){t.hasOwnProperty("innerText")?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,r),e.selection.select(t)}(e,a,n.text,o)):function(e,t,n,r){X(t)?ae(e,t,r):n.fold(function(){e.execCommand("mceInsertLink",!1,r)},function(t){e.insertContent(e.dom.createHTML("a",r,e.dom.encode(t)))})}(e,r,n.text,o)})},ee=function(e){var t,n,r,a=e.class,o=e.href,i=e.rel,c=e.target,l=e.text,u=e.title;return t={class:a.getOrNull(),href:o,rel:i.getOrNull(),target:c.getOrNull(),text:l.getOrNull(),title:u.getOrNull()},B(t,function(e,t){return!1===s(e)},(n=r={},function(e,t){n[t]=e}),h),r},te=function(e,t,n){e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ee(n)):Z(e,t,n)},ne=function(e){e.hasPlugin("rtc",!0)?e.execCommand("unlink"):function(e){e.undoManager.transact(function(){var t=e.selection.getNode();X(t)?re(e,t):function(e){var t=e.dom,n=e.selection,r=n.getBookmark(),a=n.getRng().cloneRange(),o=t.getParent(a.startContainer,"a[href]",e.getBody()),i=t.getParent(a.endContainer,"a[href]",e.getBody());o&&a.setStartBefore(o),i&&a.setEndAfter(i),n.setRng(a),e.execCommand("unlink"),n.moveToBookmark(r)}(e),e.focus()})}(e)},re=function(e,t){var n=e.dom.select("img",t)[0];if(n){var r=e.dom.getParents(n,"a[href]",t)[0];r&&(r.parentNode.insertBefore(n,r),e.dom.remove(r))}},ae=function(e,t,n){var r=e.dom.select("img",t)[0];if(r){var a=e.dom.create("a",n);r.parentNode.insertBefore(a,r),a.appendChild(r)}},oe=function(e){return $(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},ie=function(e,t){return D(t,function(t){return oe(t)?ie(e,t.items):I(t.value===e,t)})},se=function(e,t,n,r){var a=r[t],o=e.length>0;return void 0!==a?ie(a,n).map(function(t){return{url:{value:t.value,meta:{text:o?e:t.text,attach:h}},text:o?e:t.text}}):k.none()},ce=function(e,t){var n={text:e.text,title:e.title},r=function(e){var t,r=(t=e.url,I(n.text.length<=0,k.from(t.meta.text).getOr(t.value))),a=function(e){return I(n.title.length<=0,k.from(e.meta.title).getOr(""))}(e.url);return r.isSome()||a.isSome()?k.some(z(z({},r.map(function(e){return{text:e}}).getOr({})),a.map(function(e){return{title:e}}).getOr({}))):k.none()},a=function(e,r){var a,o,i=(a=t,o=r.name,"link"===o?a.link:"anchor"===o?a.anchor:k.none()).getOr([]);return se(n.text,r.name,i,e)};return{onChange:function(e,t){var o=t.name;return"url"===o?r(e()):C(["anchor","link"],o)?a(e(),t):"text"===o||"title"===o?(n[o]=e()[o],k.none()):k.none()}}},le=tinymce.util.Tools.resolve("tinymce.util.Delay"),ue=tinymce.util.Tools.resolve("tinymce.util.Promise"),de=function(e){var t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?k.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(e){return z(z({},e),{href:"mailto:"+t})}}):k.none()},fe=function(e,t){return D([de,function(e,t){return function(n){var r=n.href;return 1===e&&!j(r)||0===e&&/^\s*www(\.|\d\.)/i.test(r)?k.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+t+":// prefix?",preprocess:function(e){return z(z({},e),{href:t+"://"+r})}}):k.none()}}(u(e),function(e){return e.getParam("link_default_protocol","http","string")}(e))],function(e){return e(t)}).fold(function(){return ue.resolve(t)},function(n){return new ue(function(r){!function(e,t,n){var r=e.selection.getRng();le.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})}(e,n.message,function(e){r(e?n.preprocess(t):t)})})})},me=function(e){var t=e.dom.select("a:not([href])"),n=T(t,function(e){var t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]});return n.length>0?k.some([{text:"None",value:""}].concat(n)):k.none()},pe=function(e){var t=function(e){return e.getParam("link_class_list",[],"array")}(e);return t.length>0?E.sanitize(t):k.none()},he=tinymce.util.Tools.resolve("tinymce.util.XHR"),ve=function(e){var t=function(t){return e.convertURL(t.value||t.url,"href")},n=function(e){return e.getParam("link_list")}(e);return new ue(function(e){o(n)?he.send({url:n,success:function(t){return e(function(e){try{return k.some(JSON.parse(e))}catch(e){return k.none()}}(t))},error:function(t){return e(k.none())}}):l(n)?n(function(t){return e(k.some(t))}):e(k.from(n))}).then(function(e){return e.bind(E.sanitizeWith(t)).map(function(e){return e.length>0?[{text:"None",value:""}].concat(e):e})})},ge=function(e,t){var n=m(e);if(n.length>0){var r=t.is("_blank");return(!1===p(e)?E.sanitizeWith(function(e){return W(E.getValue(e),r)}):E.sanitize)(n)}return k.none()},be=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ye=function(e){var t=f(e);return i(t)?E.sanitize(t).orThunk(function(){return k.some(be)}):!1===t?k.none():k.some(be)},we=function(e,t,n){var r=e.getAttrib(t,n);return null!==r&&r.length>0?k.some(r):k.none()},xe=function(e,t){return ve(e).then(function(n){var r=function(e,t){var n=e.dom,r=Q(e)?k.some(G(e.selection,t)):k.none(),a=t?k.some(n.getAttrib(t,"href")):k.none(),o=t?k.from(n.getAttrib(t,"target")):k.none(),i=we(n,t,"rel"),s=we(n,t,"class");return{url:a,text:r,title:we(n,t,"title"),target:o,rel:i,linkClass:s}}(e,t);return{anchor:r,catalogs:{targets:ye(e),rels:ge(e,r.target),classes:pe(e),anchor:me(e),link:n},optNode:k.from(t),flags:{titleEnabled:function(e){return e.getParam("link_title",!0,"boolean")}(e)}}})},ke=function(e){(function(e){var t=Y(e);return xe(e,t)})(e).then(function(t){return function(e,t,n){var r=e.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),a=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],o=function(e,t){var n=e.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}}(e,k.from(d(n))),i=e.catalogs,s=ce(o,i);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:N([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,a,function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([i.anchor.map(E.createUi("anchor","Anchors")),i.rels.map(E.createUi("rel","Rel")),i.targets.map(E.createUi("target","Open link in...")),i.link.map(E.createUi("link","Link list")),i.classes.map(E.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onChange:function(e,t){var n=t.name;s.onChange(e.getData,{name:n}).each(function(t){e.setData(t)})},onSubmit:t}}(t,function(e,t){return function(n){var r=n.getData();if(!r.url.value)return ne(e),void n.close();var a=function(e){return k.from(r[e]).filter(function(n){return!t.anchor[e].is(n)})},o={href:r.url.value,text:a("text"),target:a("target"),rel:a("rel"),class:a("linkClass"),title:a("title")},i={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:function(){}};fe(e,o).then(function(t){te(e,i,t)}),n.close()}}(e,t),e)}).then(function(t){e.windowManager.open(t)})},_e=function(e){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)},Se=function(e,t){return e.dom.getParent(t,"a[href]")},Ce=function(e){return Se(e,e.selection.getStart())},Ne=function(e,t){if(t){var n=q(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else _e(t.href)}},Te=function(e){return function(){ke(e)}},De=function(e){return function(){Ne(e,Ce(e))}},Ie=function(e){e.on("click",function(t){var r=Se(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),Ne(e,r))}),e.on("keydown",function(t){var n=Ce(e);n&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),Ne(e,n))})},Me=function(e,t){return e.on("NodeChange",t),function(){return e.off("NodeChange",t)}},Oe=function(e){return function(t){return Me(e,function(){t.setActive(!e.mode.isReadOnly()&&null!==Y(e,e.selection.getNode()))})}},Ae=function(e){return function(t){var n=function(){return t.setDisabled(null===Y(e,e.selection.getNode()))};return n(),Me(e,n)}},Le=function(e){return function(t){var n=function(t){return K(t)||(n=e.selection.getRng(),H(n,F).length>0);var n},r=e.dom.getParents(e.selection.getStart());return t.setDisabled(!n(r)),Me(e,function(e){return t.setDisabled(!n(e.parents))})}},Ee=function(e){e.addCommand("mceLink",function(){!function(e){return e.getParam("link_quicklink",!1,"boolean")}(e)?Te(e)():e.fire("contexttoolbar-show",{toolbarKey:"quicklink"})})},ze=function(e){e.addShortcut("Meta+K","",function(){e.execCommand("mceLink")})},Re=function(e){e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Te(e),onSetup:Oe(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:De(e),onSetup:Ae(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return ne(e)},onSetup:Le(e)})},Ve=function(e){e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:De(e),onSetup:Ae(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Te(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return ne(e)},onSetup:Le(e)})},Be=function(e){e.ui.registry.addContextMenu("link",{update:function(t){return K(e.dom.getParents(t,"a"))?"link unlink openlink":"link"}})},$e=function(e){var t=function(t){var n=e.selection.getNode();return t.setDisabled(!Y(e,n)),function(){}};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Oe(e)},label:"Link",predicate:function(t){return!!Y(e,t)&&function(e){return e.getParam("link_context_toolbar",!1,"boolean")}(e)},initValue:function(){var t=Y(e);return t?q(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var n=e.selection.getNode();return t.setActive(!!Y(e,n)),Oe(e)(t)},onAction:function(t){var n=Y(e),r=t.getValue();if(n)e.undoManager.transact(function(){e.dom.setAttrib(n,"href",r),function(e){e.selection.collapse(!1)}(e),t.hide()});else{var a={href:r,attach:function(){}},o=Q(e)?k.some(G(e.selection,n)).filter(function(e){return e.length>0}).or(k.from(r)):k.none();te(e,a,{href:r,text:o,title:k.none(),rel:k.none(),target:k.none(),class:k.none()}),t.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:function(t){ne(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:function(t){De(e)(),t.hide()}}]})};t.add("link",function(e){Re(e),Ve(e),Be(e),$e(e),Ie(e),Ee(e),ze(e)})}()},m9gC:function(e,t,n){var r=n("RY/4"),a=n("4WTo");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},mAVP:function(e,t){},"mAf+":function(e,t){},mEII:function(e,t){},mroy:function(e,t){},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},n8WX:function(e,t){},nGh7:function(e,t){},oNmr:function(e,t,n){n("9Bbf")("Set")},oRqg:function(e,t){},oeOm:function(e,t,n){var r=n("7Doy");e.exports=function(e,t){return new(r(e))(t)}},oqOH:function(e,t){},oz0K:function(e,t){},pPW7:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("ttyz"),n("BDhv"),n("oNmr"),n("ioQ5"),e.exports=n("FeBl").Set},pa12:function(e,t){},q6ma:function(e,t){},q93p:function(e,t){},qCoq:function(e,t,n){"use strict";var r=n("9C8M"),a=n("LIJb");e.exports=n("qo66")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},qGu8:function(e,t){},qHHD:function(e,t){},qcl2:function(e,t){},qkKv:function(e,t,n){var r=n("FeBl"),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},qo66:function(e,t,n){"use strict";var r=n("7KvD"),a=n("kM2E"),o=n("06OY"),i=n("S82l"),s=n("hJx8"),c=n("xH/j"),l=n("NWt+"),u=n("2KxR"),d=n("EqjI"),f=n("e6n0"),m=n("evD5").f,p=n("ALrJ")(0),h=n("+E39");e.exports=function(e,t,n,v,g,b){var y=r[e],w=y,x=g?"set":"add",k=w&&w.prototype,_={};return h&&"function"==typeof w&&(b||k.forEach&&!i(function(){(new w).entries().next()}))?(w=t(function(t,n){u(t,w,e,"_c"),t._c=new y,void 0!=n&&l(n,g,t[x],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!b||"clear"!=e)&&s(w.prototype,e,function(n,r){if(u(this,w,e),!t&&b&&!d(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),b||m(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(t,e,g,x),c(w.prototype,n),o.NEED=!0),f(w,e),_[e]=w,a(a.G+a.W+a.F,_),b||v.setStrong(w,e,g),w}},rAdd:function(e,t){},rGxf:function(e,t){},rPOg:function(e,t){},rWlc:function(e,t){},rwb8:function(e,t){},s15N:function(e,t){},si2V:function(e,t){},sxJU:function(e,t){},tSOK:function(e,t){},tfhO:function(e,t){!function(){"use strict";var e,t,n,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},o=function(e){e.addCommand("ApplyUnorderedListStyle",function(t,n){a(e,"UL",n["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,n){a(e,"OL",n["list-style-type"])})},i=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(){},c=function(e){return function(){return e}},l=c(!1),u=c(!0),d=function(){return f},f=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:l,isSome:l,isNone:u,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:t,map:d,each:s,bind:d,exists:l,forall:u,filter:d,equals:e,equals_:e,toArray:function(){return[]},toString:c("none()")}),m=function(e){var t=c(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:u,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return m(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,function(t){return n(e,t)})}};return a},p=function(e){return null===e||void 0===e?f:m(e)},h=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},v=function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(t.parents,h),a=-1!==r?t.parents.slice(0,r):t.parents,o=i.grep(a,function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}}(e));return o.length>0&&o[0].nodeName===n},g=function(e,t,n,r,o,s){e.ui.registry.addSplitButton(t,{tooltip:n,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(e){e(i.map(s,function(e){return{type:"choiceitem",value:"default"===e?"":e,icon:"list-"+("OL"===o?"num":"bull")+"-"+("disc"===e||"decimal"===e?"default":e),text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e)}}))},onAction:function(){return e.execCommand(r)},onItemAction:function(t,n){a(e,o,n)},select:function(t){return function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),n=e.dom.getStyle(t,"listStyleType");return p(n)}(e).map(function(e){return t===e}).getOr(!1)},onSetup:function(t){var n=function(n){t.setActive(v(e,n,o))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}})},b=function(e,t,n,r,a,o){o.length>1?g(e,t,n,r,a,o):function(e,t,n,r,a,o){e.ui.registry.addToggleButton(t,{active:!1,tooltip:n,icon:"OL"===a?"ordered-list":"unordered-list",onSetup:function(t){var n=function(n){t.setActive(v(e,n,a))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}},onAction:function(){return e.execCommand(r)}})}(e,t,n,r,a)},y=function(e){b(e,"numlist","Numbered list","InsertOrderedList","OL",function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]}(e)),b(e,"bullist","Bullet list","InsertUnorderedList","UL",function(e){var t=e.getParam("advlist_bullet_styles","default,circle,square");return t?t.split(/[ ,]/):[]}(e))};r.add("advlist",function(e){e.hasPlugin("lists")&&(y(e),o(e))})}()},tli4:function(e,t){},ttyz:function(e,t,n){"use strict";var r=n("9C8M"),a=n("LIJb");e.exports=n("qo66")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},tyRm:function(e,t){},"u/2+":function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"},on:{mousewheel:function(e){e.preventDefault()}}},[t("vue-particles",{staticClass:"lizi",attrs:{color:"#3D8AFD",particleOpacity:1,particlesNumber:80,shapeType:"circle",particleSize:4,linesColor:"#3D8AFD",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,moveSpeed:3,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),this._v(" "),t("div",{staticClass:"middle-text"},[this._v("\n                欢迎使用小耳朵后台管理系统\n        ")])],1)},staticRenderFns:[]};t.a=r},"u/B0":function(e,t){},uST9:function(e,t){},uVSI:function(e,t){},"ud/M":function(e,t){},udy9:function(e,t){},uqUo:function(e,t,n){var r=n("kM2E"),a=n("FeBl"),o=n("S82l");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},v2v1:function(e,t){},v74i:function(e,t){},v86L:function(e,t){},vIKg:function(e,t){},vxTA:function(e,t){},"w/TU":function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"01f9":function(e,t,n){"use strict";var r=n("2d00"),a=n("5ca1"),o=n("2aba"),i=n("32e9"),s=n("84f2"),c=n("41a0"),l=n("7f20"),u=n("38fd"),d=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,t,n,p,h,v,g){c(n,t,p);var b,y,w,x=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",_="values"==h,S=!1,C=e.prototype,N=C[d]||C["@@iterator"]||h&&C[h],T=N||x(h),D=h?_?x("entries"):T:void 0,I="Array"==t&&C.entries||N;if(I&&(w=u(I.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||"function"==typeof w[d]||i(w,d,m)),_&&N&&"values"!==N.name&&(S=!0,T=function(){return N.call(this)}),r&&!g||!f&&!S&&C[d]||i(C,d,T),s[t]=T,s[k]=m,h)if(b={values:_?T:x("values"),keys:v?T:x("keys"),entries:D},g)for(y in b)y in C||o(C,y,b[y]);else a(a.P+a.F*(f||S),t,b);return b}},"02f4":function(e,t,n){var r=n("4588"),a=n("be13");e.exports=function(e){return function(t,n){var o,i,s=String(a(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):o:e?s.slice(c,c+2):i-56320+(o-55296<<10)+65536}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,n){var r=n("ce10"),a=n("e11e");e.exports=Object.keys||function(e){return r(e,a)}},1495:function(e,t,n){var r=n("86cc"),a=n("cb7c"),o=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){a(e);for(var n,i=o(t),s=i.length,c=0;s>c;)r.f(e,n=i[c++],t[n]);return e}},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),a=n("32e9"),o=n("79e5"),i=n("be13"),s=n("2b4c"),c=n("520a"),l=s("species"),u=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),m=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),p=m?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!t}):void 0;if(!m||!p||"replace"===e&&!u||"split"===e&&!d){var h=/./[f],v=n(i,f,""[e],function(e,t,n,r,a){return t.exec===c?m&&!a?{done:!0,value:h.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),g=v[0],b=v[1];r(String.prototype,e,g),a(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"230e":function(e,t,n){var r=n("d3f4"),a=n("7726").document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},"23c6":function(e,t,n){var r=n("2d95"),a=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:o?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,n){var r=n("7726"),a=n("32e9"),o=n("69a8"),i=n("ca5a")("src"),s=n("fa5b"),c=(""+s).split("toString");n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(o(n,"name")||a(n,"name",t)),e[t]!==n&&(l&&(o(n,i)||a(n,i,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:a(e,t,n):(delete e[t],a(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||s.call(this)})},"2aeb":function(e,t,n){var r=n("cb7c"),a=n("1495"),o=n("e11e"),i=n("613b")("IE_PROTO"),s=function(){},c=function(){var e,t=n("230e")("iframe"),r=o.length;for(t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[i]=e):n=c(),void 0===t?n:a(n,t)}},"2b4c":function(e,t,n){var r=n("5537")("wks"),a=n("ca5a"),o=n("7726").Symbol,i="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=i&&o[e]||(i?o:a)("Symbol."+e))}).store=r},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2fdb":function(e,t,n){"use strict";var r=n("5ca1"),a=n("d2c8");r(r.P+r.F*n("5147")("includes"),"String",{includes:function(e){return!!~a(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,n){var r=n("86cc"),a=n("4630");e.exports=n("9e1e")?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},"38fd":function(e,t,n){var r=n("69a8"),a=n("4bf8"),o=n("613b")("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},"41a0":function(e,t,n){"use strict";var r=n("2aeb"),a=n("4630"),o=n("7f20"),i={};n("32e9")(i,n("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(i,{next:a(1,n)}),o(e,t+" Iterator")}},"456d":function(e,t,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",function(){return function(e){return a(r(e))}})},4588:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,n){var r=n("be13");e.exports=function(e){return Object(r(e))}},5147:function(e,t,n){var r=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},"520a":function(e,t,n){"use strict";var r,a,o=n("0bfb"),i=RegExp.prototype.exec,s=String.prototype.replace,c=i,l=(r=/a/,a=/b*/g,i.call(r,"a"),i.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(e){var t,n,r,a,c=this;return u&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),l&&(t=c.lastIndex),r=i.call(c,e),l&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r}),e.exports=c},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,n){var r=n("8378"),a=n("7726"),o=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,n){var r=n("7726"),a=n("8378"),o=n("32e9"),i=n("2aba"),s=n("9b43"),c=function(e,t,n){var l,u,d,f,m=e&c.F,p=e&c.G,h=e&c.S,v=e&c.P,g=e&c.B,b=p?r:h?r[t]||(r[t]={}):(r[t]||{}).prototype,y=p?a:a[t]||(a[t]={}),w=y.prototype||(y.prototype={});for(l in p&&(n=t),n)d=((u=!m&&b&&void 0!==b[l])?b:n)[l],f=g&&u?s(d,r):v&&"function"==typeof d?s(Function.call,d):d,b&&i(b,l,d,e&c.U),y[l]!=d&&o(y,l,f),v&&w[l]!=d&&(w[l]=d)};r.core=a,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"5eda":function(e,t,n){var r=n("5ca1"),a=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),a=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"613b":function(e,t,n){var r=n("5537")("keys"),a=n("ca5a");e.exports=function(e){return r[e]||(r[e]=a(e))}},"626a":function(e,t,n){var r=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},6762:function(e,t,n){"use strict";var r=n("5ca1"),a=n("c366")(!0);r(r.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(e,t,n){var r=n("626a"),a=n("be13");e.exports=function(e){return r(a(e))}},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"6a99":function(e,t,n){var r=n("d3f4");e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,n){"use strict";var r=n("0d58"),a=n("2621"),o=n("52a7"),i=n("4bf8"),s=n("626a"),c=Object.assign;e.exports=!c||n("79e5")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=i(e),c=arguments.length,l=1,u=a.f,d=o.f;c>l;)for(var f,m=s(arguments[l++]),p=u?r(m).concat(u(m)):r(m),h=p.length,v=0;h>v;)d.call(m,f=p[v++])&&(n[f]=m[f]);return n}:c},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(e,t,n){var r=n("4588"),a=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):o(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"7f20":function(e,t,n){var r=n("86cc").f,a=n("69a8"),o=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},8378:function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,n){var r=n("cb7c"),a=n("c69a"),o=n("6a99"),i=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"9b43":function(e,t,n){var r=n("d8e8");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,n){var r=n("2b4c")("unscopables"),a=Array.prototype;void 0==a[r]&&n("32e9")(a,r,{}),e.exports=function(e){a[r][e]=!0}},"9def":function(e,t,n){var r=n("4588"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a352:function(t,n){t.exports=e},a481:function(e,t,n){"use strict";var r=n("cb7c"),a=n("4bf8"),o=n("9def"),i=n("4588"),s=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g;n("214f")("replace",2,function(e,t,n,p){return[function(r,a){var o=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,o,a):n.call(String(o),r,a)},function(e,t){var a=p(n,e,this,t);if(a.done)return a.value;var d=r(e),f=String(this),m="function"==typeof t;m||(t=String(t));var v=d.global;if(v){var g=d.unicode;d.lastIndex=0}for(var b=[];;){var y=c(d,f);if(null===y)break;if(b.push(y),!v)break;""===String(y[0])&&(d.lastIndex=s(f,o(d.lastIndex),g))}for(var w,x="",k=0,_=0;_<b.length;_++){y=b[_];for(var S=String(y[0]),C=l(u(i(y.index),f.length),0),N=[],T=1;T<y.length;T++)N.push(void 0===(w=y[T])?w:String(w));var D=y.groups;if(m){var I=[S].concat(N,C,f);void 0!==D&&I.push(D);var M=String(t.apply(void 0,I))}else M=h(S,f,C,N,D,t);C>=k&&(x+=f.slice(k,C)+M,k=C+S.length)}return x+f.slice(k)}];function h(e,t,r,o,i,s){var c=r+e.length,l=o.length,u=m;return void 0!==i&&(i=a(i),u=f),n.call(s,u,function(n,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=i[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>l){var f=d(u/10);return 0===f?n:f<=l?void 0===o[f-1]?a.charAt(1):o[f-1]+a.charAt(1):n}s=o[u-1]}return void 0===s?"":s})}})},aae3:function(e,t,n){var r=n("d3f4"),a=n("2d95"),o=n("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},ac6a:function(e,t,n){for(var r=n("cadf"),a=n("0d58"),o=n("2aba"),i=n("7726"),s=n("32e9"),c=n("84f2"),l=n("2b4c"),u=l("iterator"),d=l("toStringTag"),f=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(m),h=0;h<p.length;h++){var v,g=p[h],b=m[g],y=i[g],w=y&&y.prototype;if(w&&(w[u]||s(w,u,f),w[d]||s(w,d,g),c[g]=f,b))for(v in r)w[v]||o(w,v,r[v],!0)}},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,n){var r=n("6821"),a=n("9def"),o=n("77f1");e.exports=function(e){return function(t,n,i){var s,c=r(t),l=a(c.length),u=o(i,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},c649:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c});n("a481");var r="undefined"!=typeof window?window.console:e.console;var a,o,i=/-(\w)/g,s=(a=function(e){return e.replace(i,function(e,t){return t?t.toUpperCase():""})},o=Object.create(null),function(e){return o[e]||(o[e]=a(e))});function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function l(e,t,n){var r=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,r)}}).call(this,n("c8ba"))},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},cadf:function(e,t,n){"use strict";var r=n("9c6c"),a=n("d53b"),o=n("84f2"),i=n("6821");e.exports=n("01f9")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},cb7c:function(e,t,n){var r=n("d3f4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,n){var r=n("69a8"),a=n("6821"),o=n("c366")(!1),i=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=a(e),c=0,l=[];for(n in s)n!=i&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(l,n)||l.push(n));return l}},d2c8:function(e,t,n){var r=n("aae3"),a=n("be13");e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(e))}},d3f4:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,n){"use strict";var r=n("5ca1"),a=n("9def"),o=n("d2c8"),i="".startsWith;r(r.P+r.F*n("5147")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=a(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return i?i.call(t,r,n):t.slice(n,n+r.length)===r}})},f6fd:function(e,t){!function(e){var t=e.getElementsByTagName("script");"currentScript"in e||Object.defineProperty(e,"currentScript",{get:function(){try{throw new Error}catch(r){var e,n=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in t)if(t[e].src==n||"interactive"==t[e].readyState)return t[e];return null}}})}(document)},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,n){var r=n("7726").document;e.exports=r&&r.documentElement},fb15:function(e,t,n){"use strict";var r;(n.r(t),"undefined"!=typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("f751"),n("f559"),n("ac6a"),n("cadf"),n("456d");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n("6762"),n("2fdb");function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n("a352"),l=n.n(c),u=n("c649");function d(e,t){var n=this;this.$nextTick(function(){return n.$emit(e.toLowerCase(),t)})}function f(e){return["transition-group","TransitionGroup"].includes(e)}function m(e,t,n){return e[n]||(t[n]?t[n]():void 0)}var p=["Start","Add","Remove","Update","End"],h=["Choose","Unchoose","Sort","Filter","Clone"],v=["Move"].concat(p,h).map(function(e){return"on"+e}),g=null,b={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=function(e){if(!e||1!==e.length)return!1;var t=i(e,1)[0].componentOptions;return!!t&&f(t.tag)}(t);var n=function(e,t,n){var r=0,a=0,o=m(t,n,"header");o&&(r=o.length,e=e?[].concat(s(o),s(e)):s(o));var i=m(t,n,"footer");return i&&(a=i.length,e=e?[].concat(s(e),s(i)):s(i)),{children:e,headerOffset:r,footerOffset:a}}(t,this.$slots,this.$scopedSlots),r=n.children,a=n.headerOffset,o=n.footerOffset;this.headerOffset=a,this.footerOffset=o;var c=function(e,t){var n=null,r=function(e,t){n=function(e,t,n){return void 0===n?e:((e=e||{})[t]=n,e)}(n,e,t)};if(r("attrs",Object.keys(e).filter(function(e){return"id"===e||e.startsWith("data-")}).reduce(function(t,n){return t[n]=e[n],t},{})),!t)return n;var a=t.on,o=t.props,i=t.attrs;return r("on",a),r("props",o),Object.assign(n.attrs,i),n}(this.$attrs,this.componentData);return e(this.getTag(),c,r)},created:function(){null!==this.list&&null!==this.value&&u.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&u.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&u.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};p.forEach(function(n){t["on"+n]=function(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),d.call(t,e,n)}}.call(e,n)}),h.forEach(function(n){t["on"+n]=d.bind(e,n)});var n=Object.keys(this.$attrs).reduce(function(t,n){return t[Object(u.a)(n)]=e.$attrs[n],t},{}),r=Object.assign({},this.options,n,t,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new l.a(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var n=Object(u.a)(t);-1===v.indexOf(n)&&this._sortable.option(n,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,n,r){if(!e)return[];var a=e.map(function(e){return e.elm}),o=t.length-r,i=s(t).map(function(e,t){return t>=o?a.length:a.indexOf(e)});return n?i.filter(function(e){return-1!==e}):i}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&f(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=s(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,s(e))};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var a=r.realList,o={list:a,component:r};if(t!==n&&a&&r.getUnderlyingVm){var i=r.getUnderlyingVm(n);if(i)return Object.assign(i,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),g=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(u.d)(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,t),this.computeIndexes();var r={element:t,newIndex:n};this.emitChanges({added:r})}},onDragRemove:function(e){if(Object(u.c)(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var n={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:n})}else Object(u.d)(e.clone)},onDragUpdate:function(e){Object(u.d)(e.item),Object(u.c)(e.from,e.item,e.oldIndex);var t=this.context.index,n=this.getVmIndex(e.newIndex);this.updatePosition(t,n);var r={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:r})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=s(t.to.children).filter(function(e){return"none"!==e.style.display}),r=n.indexOf(t.related),a=e.component.getVmIndex(r);return-1!==n.indexOf(g)||!t.willInsertAfter?a:a+1},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(e),a=this.context,o=this.computeFutureIndex(r,e);return Object.assign(a,{futureIndex:o}),n(Object.assign({},e,{relatedContext:r,draggedContext:a}),t)},onDragEnd:function(){this.computeIndexes(),g=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",b);var y=b;t.default=y}}).default},e.exports=r(n("/dO2"))},w2Fb:function(e,t){},wG09:function(e,t){},wcYR:function(e,t){},"x+bW":function(e,t){},x9Dy:function(e,t){},xBCc:function(e,t){},xJRl:function(e,t){},xNxL:function(e,t){},xeaZ:function(e,t){},xlbD:function(e,t){},xqKw:function(e,t){},"y/gW":function(e,t){},yC8l:function(e,t){},yS18:function(e,t){},ySV7:function(e,t){},ygc2:function(e,t){},zFDg:function(e,t){},zJl1:function(e,t){},zNtu:function(e,t){},zjNF:function(e,t){},zzv9:function(e,t){}});
//# sourceMappingURL=0.392fce30c4f39c7b68cc.js.map